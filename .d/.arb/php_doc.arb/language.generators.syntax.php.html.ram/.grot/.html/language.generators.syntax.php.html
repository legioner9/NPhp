<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: Синтаксис генераторов - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="language.generators.syntax.php.html">
 <link rel="shorturl" href="https://www.php.net/generators.syntax">
 <link rel="alternate" href="https://www.php.net/generators.syntax" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="language.generators.php.html">
 <link rel="prev" href="language.generators.overview.php.html">
 <link rel="next" href="language.generators.comparison.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/language.generators.syntax.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/language.generators.syntax.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/language.generators.syntax.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/language.generators.syntax.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/language.generators.syntax.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/language.generators.syntax.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/language.generators.syntax.php" hreflang="pt_BR">
 <link rel="alternate" href="language.generators.syntax.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/language.generators.syntax.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/language.generators.syntax.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="language.generators.comparison.php.html">
          Сравнение генераторов с объектами класса Iterator &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="language.generators.overview.php.html">
          &laquo; Знакомство с генераторами        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='langref.php.html'>Справочник языка</a></li>      <li><a href='language.generators.php.html'>Генераторы</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/language.generators.syntax.php'>English</option>
            <option value='de/language.generators.syntax.php'>German</option>
            <option value='es/language.generators.syntax.php'>Spanish</option>
            <option value='fr/language.generators.syntax.php'>French</option>
            <option value='it/language.generators.syntax.php'>Italian</option>
            <option value='ja/language.generators.syntax.php'>Japanese</option>
            <option value='pt_BR/language.generators.syntax.php'>Brazilian Portuguese</option>
            <option value='ru/language.generators.syntax.php' selected="selected">Russian</option>
            <option value='tr/language.generators.syntax.php'>Turkish</option>
            <option value='zh/language.generators.syntax.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/language/generators.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Flanguage.generators.syntax%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="language.generators.syntax" class="sect1">
  <h2 class="title">Синтаксис генераторов</h2>

  <p class="para">
   Генератор в целом выглядит как обычная функция, за исключением того, что
   вместо возвращения одного значения, генератор будет перебирать столько
   значений, сколько необходимо.
   Любая функция, содержащая <a href="language.generators.syntax.php.html#control-structures.yield" class="link">yield</a>, является функцией генератора.
  </p>

  <p class="para">
   Когда вызывается генератор, он возвращает объект, который можно итерировать.
   Когда вы итерируете этот объект (например, в цикле <a href="control-structures.foreach.php.html" class="link">foreach</a>), PHP вызывает
   методы итерации объекта каждый раз, когда вам нужно новое значение, после
   чего сохраняет состояние генератора и при следующем вызове возвращает следующее
   значение.
  </p>

  <p class="para">
   Когда все значения в генераторе закончились, генератор просто завершит работу,
   ничего не вернув. После этого основной код продолжит работу, как если бы
   в массиве закончились элементы для перебора.
  </p>

  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Генераторы могут возвращать значения, которые можно получить с помощью
    <span class="methodname"><a href="generator.getreturn.php.html" class="methodname">Generator::getReturn()</a></span>.
   </p>
  </p></blockquote>

  <div class="sect2" id="control-structures.yield">
   <h3 class="title">Ключевое слово <strong class="command">yield</strong></h3>

   <p class="para">
    Вся суть генератора заключается в ключевом слове <strong class="command">yield</strong>.
    В самом простом варианте оператор &quot;yield&quot; можно рассматривать как оператор
    &quot;return&quot;, за исключением того, что вместо прекращения работы функции,
    &quot;yield&quot; только приостанавливает её выполнение и возвращает текущее значение, и при
    следующем вызове функции она возобновит выполнение с места, на котором прервалась.
   </p>

   <div class="example" id="example-1027">
    <p><strong>Пример #1 Простой пример выдачи значений</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">gen_one_to_three</span><span style="color: #007700">() {<br />    for (</span><span style="color: #0000BB">$i </span><span style="color: #007700">= </span><span style="color: #0000BB">1</span><span style="color: #007700">; </span><span style="color: #0000BB">$i </span><span style="color: #007700">&lt;= </span><span style="color: #0000BB">3</span><span style="color: #007700">; </span><span style="color: #0000BB">$i</span><span style="color: #007700">++) {<br />        </span><span style="color: #FF8000">// Обратите внимание, что $i сохраняет своё значение между вызовами.<br />        </span><span style="color: #007700">yield </span><span style="color: #0000BB">$i</span><span style="color: #007700">;<br />    }<br />}<br /><br /></span><span style="color: #0000BB">$generator </span><span style="color: #007700">= </span><span style="color: #0000BB">gen_one_to_three</span><span style="color: #007700">();<br />foreach (</span><span style="color: #0000BB">$generator </span><span style="color: #007700">as </span><span style="color: #0000BB">$value</span><span style="color: #007700">) {<br />    echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
1
2
3
</pre></div>
    </div>
   </div>

   <blockquote class="note"><p><strong class="note">Замечание</strong>: 
    <p class="para">
     Последовательность целых чисел будет связана с получаемыми от генератора значениями,
     как будто перебирается неассоциативный массив.
    </p>
   </p></blockquote>

   <div class="sect3" id="control-structures.yield.associative">
    <h4 class="title">Получение значений с ключами</h4>

    <p class="para">
     PHP поддерживает ассоциативные массивы, и генераторы не являются исключением.
     Так же как можно получать простые значения, как показано выше, вы можете
     получать значения с ключами.
    </p>

    <p class="para">
     Синтаксис получения ключ/значение очень похож на синтаксис
     ассоциативных массивов, как показано ниже.
    </p>

    <div class="example" id="example-1030">
     <p><strong>Пример #2 Получение пар ключ/значение</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/* $input содержит пары ключ/значение разделённые точкой с запятой */<br /><br /></span><span style="color: #0000BB">$input </span><span style="color: #007700">= &lt;&lt;&lt;'EOF'<br /></span><span style="color: #DD0000">1;PHP;Любит знаки доллара<br />2;Python;Любит пробелы<br />3;Ruby;Любит блоки<br /></span><span style="color: #007700">EOF;<br /><br />function </span><span style="color: #0000BB">input_parser</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">) {<br />    foreach (</span><span style="color: #0000BB">explode</span><span style="color: #007700">(</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">, </span><span style="color: #0000BB">$input</span><span style="color: #007700">) as </span><span style="color: #0000BB">$line</span><span style="color: #007700">) {<br />        </span><span style="color: #0000BB">$fields </span><span style="color: #007700">= </span><span style="color: #0000BB">explode</span><span style="color: #007700">(</span><span style="color: #DD0000">';'</span><span style="color: #007700">, </span><span style="color: #0000BB">$line</span><span style="color: #007700">);<br />        </span><span style="color: #0000BB">$id </span><span style="color: #007700">= </span><span style="color: #0000BB">array_shift</span><span style="color: #007700">(</span><span style="color: #0000BB">$fields</span><span style="color: #007700">);<br /><br />        yield </span><span style="color: #0000BB">$id </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">$fields</span><span style="color: #007700">;<br />    }<br />}<br /><br />foreach (</span><span style="color: #0000BB">input_parser</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">) as </span><span style="color: #0000BB">$id </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">$fields</span><span style="color: #007700">) {<br />    echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$id</span><span style="color: #DD0000">:\n"</span><span style="color: #007700">;<br />    echo </span><span style="color: #DD0000">"    </span><span style="color: #0000BB">$fields</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />    echo </span><span style="color: #DD0000">"    </span><span style="color: #0000BB">$fields</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

     
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

     <div class="example-contents screen">
<div class="cdata"><pre>
1:
    PHP
    Любит знаки доллара
2:
    Python
    Любит пробелы
3:
    Ruby
    Любит блоки
</pre></div>
     </div>
    </div>
   </div>

   <div class="sect3" id="control-structures.yield.null">
    <h4 class="title">Получение NULL</h4>

    <p class="para">
     Для получения <strong><code>null</code></strong> нужно вызвать &quot;yield&quot; без аргументов. Ключ сгенерируется
     автоматически.
    </p>

    <div class="example" id="example-1033">
     <p><strong>Пример #3 Получение <strong><code>null</code></strong></strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">gen_three_nulls</span><span style="color: #007700">() {<br />    foreach (</span><span style="color: #0000BB">range</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">3</span><span style="color: #007700">) as </span><span style="color: #0000BB">$i</span><span style="color: #007700">) {<br />        yield;<br />    }<br />}<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">iterator_to_array</span><span style="color: #007700">(</span><span style="color: #0000BB">gen_three_nulls</span><span style="color: #007700">()));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

     
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

     <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [0]=&gt;
  NULL
  [1]=&gt;
  NULL
  [2]=&gt;
  NULL
}
</pre></div>
     </div>
    </div>
   </div>

   <div class="sect3" id="control-structures.yield.references">
    <h4 class="title">Получение значения по ссылке</h4>

    <p class="para">
     Генераторы могут отдавать значения по ссылке. Это делается так же, как
     <a href="functions.returning-values.php.html" class="link">возврат ссылок из функций</a>:
     добавлением амперсанда (&amp;) перед именем функции.
    </p>

    <div class="example" id="example-1036">
     <p><strong>Пример #4 Получение значений по ссылке</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function &amp;</span><span style="color: #0000BB">gen_reference</span><span style="color: #007700">() {<br />    </span><span style="color: #0000BB">$value </span><span style="color: #007700">= </span><span style="color: #0000BB">3</span><span style="color: #007700">;<br /><br />    while (</span><span style="color: #0000BB">$value </span><span style="color: #007700">&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">) {<br />        yield </span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br />    }<br />}<br /><br /></span><span style="color: #FF8000">/* Обратите внимание, что мы можем изменять $number в цикле, и<br /> * так как генератор возвращает ссылку, $value<br /> * в gen_reference() также изменится. */<br /></span><span style="color: #007700">foreach (</span><span style="color: #0000BB">gen_reference</span><span style="color: #007700">() as &amp;</span><span style="color: #0000BB">$number</span><span style="color: #007700">) {<br />    echo (--</span><span style="color: #0000BB">$number</span><span style="color: #007700">).</span><span style="color: #DD0000">'... '</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

     
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

     <div class="example-contents screen">
<div class="cdata"><pre>
2... 1... 0...
</pre></div>
     </div>
    </div>
   </div>

   <div class="sect3" id="control-structures.yield.from">
    <h4 class="title">Делегирование генератора с помощью <strong class="command">yield from</strong></h4>

    <p class="para">
     Делегирование генератора позволяет вам получать значения из
     другого генератора, объекта <span class="classname"><a href="class.traversable.php.html" class="classname">Traversable</a></span>, или массива,
     используя <strong class="command">yield from</strong>.
     Внешний генератор будет возвращать значения из внутреннего генератора,
     объекта или массива, до того момента, пока они их отдают, после чего
     продолжится выполнение внешнего генератора.
    </p>

    <p class="para">
     Если генератор используется с <strong class="command">yield from</strong>, то выражение
     <strong class="command">yield from</strong> также будет возвращать значения из
     внутреннего генератора.
    </p>

    <div class="caution"><strong class="caution">Предостережение</strong>
     <h1 class="title">Сохранение в массив (например, с помощью <span class="function"><a href="function.iterator-to-array.php.html" class="function">iterator_to_array()</a></span>)</h1>

     <p class="para">
      <strong class="command">yield from</strong> не сбрасывает ключи. Ключи, возвращённые
      из объекта <span class="classname"><a href="class.traversable.php.html" class="classname">Traversable</a></span> или массива, сохранятся.
      Таким образом, некоторые значения, могут пересекаться по ключам с другими
      <strong class="command">yield</strong> или <strong class="command">yield from</strong>, что, при записи
      в массив, повлечёт за собой перезапись прежних значений.
     </p>

     <p class="para">
      Общий случай, когда это имеет значение, это когда <span class="function"><a href="function.iterator-to-array.php.html" class="function">iterator_to_array()</a></span>
      возвращает массив с ключами по умолчанию. В этом случае можно получить
      неожиданный результат. <span class="function"><a href="function.iterator-to-array.php.html" class="function">iterator_to_array()</a></span> имеет второй параметр
      <code class="parameter">preserve_keys</code>, который можно установить в <strong><code>false</code></strong>, для
      генерации собственных ключей и игнорирования ключей,
      переданных из объекта <span class="classname"><a href="class.generator.php.html" class="classname">Generator</a></span>.
     </p>

     <div class="example" id="example-1039">
      <p><strong>Пример #5 <strong class="command">yield from</strong> с <span class="function"><a href="function.iterator-to-array.php.html" class="function">iterator_to_array()</a></span></strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">inner</span><span style="color: #007700">() {<br />    yield </span><span style="color: #0000BB">1</span><span style="color: #007700">; </span><span style="color: #FF8000">// ключ 0<br />    </span><span style="color: #007700">yield </span><span style="color: #0000BB">2</span><span style="color: #007700">; </span><span style="color: #FF8000">// ключ 1<br />    </span><span style="color: #007700">yield </span><span style="color: #0000BB">3</span><span style="color: #007700">; </span><span style="color: #FF8000">// ключ 2<br /></span><span style="color: #007700">}<br />function </span><span style="color: #0000BB">gen</span><span style="color: #007700">() {<br />    yield </span><span style="color: #0000BB">0</span><span style="color: #007700">; </span><span style="color: #FF8000">// ключ 0<br />    </span><span style="color: #007700">yield from </span><span style="color: #0000BB">inner</span><span style="color: #007700">(); </span><span style="color: #FF8000">// ключи 0-2<br />    </span><span style="color: #007700">yield </span><span style="color: #0000BB">4</span><span style="color: #007700">; </span><span style="color: #FF8000">// ключ 1<br /></span><span style="color: #007700">}<br /></span><span style="color: #FF8000">// Задайте false вторым параметром для получения массива [0, 1, 2, 3, 4]<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">iterator_to_array</span><span style="color: #007700">(</span><span style="color: #0000BB">gen</span><span style="color: #007700">()));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
      </div>

      
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

      <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [0]=&gt;
  int(1)
  [1]=&gt;
  int(4)
  [2]=&gt;
  int(3)
}
</pre></div>
      </div>
     </div>
    </div>

    <div class="example" id="example-1042">
     <p><strong>Пример #6 Основы использования <strong class="command">yield from</strong></strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">count_to_ten</span><span style="color: #007700">() {<br />    yield </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />    yield </span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />    yield from [</span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #0000BB">4</span><span style="color: #007700">];<br />    yield from new </span><span style="color: #0000BB">ArrayIterator</span><span style="color: #007700">([</span><span style="color: #0000BB">5</span><span style="color: #007700">, </span><span style="color: #0000BB">6</span><span style="color: #007700">]);<br />    yield from </span><span style="color: #0000BB">seven_eight</span><span style="color: #007700">();<br />    yield </span><span style="color: #0000BB">9</span><span style="color: #007700">;<br />    yield </span><span style="color: #0000BB">10</span><span style="color: #007700">;<br />}<br /><br />function </span><span style="color: #0000BB">seven_eight</span><span style="color: #007700">() {<br />    yield </span><span style="color: #0000BB">7</span><span style="color: #007700">;<br />    yield from </span><span style="color: #0000BB">eight</span><span style="color: #007700">();<br />}<br /><br />function </span><span style="color: #0000BB">eight</span><span style="color: #007700">() {<br />    yield </span><span style="color: #0000BB">8</span><span style="color: #007700">;<br />}<br /><br />foreach (</span><span style="color: #0000BB">count_to_ten</span><span style="color: #007700">() as </span><span style="color: #0000BB">$num</span><span style="color: #007700">) {<br />    echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$num</span><span style="color: #DD0000"> "</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

     
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

     <div class="example-contents screen">
<div class="cdata"><pre>
1 2 3 4 5 6 7 8 9 10
</pre></div>
     </div>
    </div>

    <div class="example" id="example-1045">
     <p><strong>Пример #7 <strong class="command">yield from</strong> и возвращаемые значения</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">count_to_ten</span><span style="color: #007700">() {<br />    yield </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />    yield </span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />    yield from [</span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #0000BB">4</span><span style="color: #007700">];<br />    yield from new </span><span style="color: #0000BB">ArrayIterator</span><span style="color: #007700">([</span><span style="color: #0000BB">5</span><span style="color: #007700">, </span><span style="color: #0000BB">6</span><span style="color: #007700">]);<br />    yield from </span><span style="color: #0000BB">seven_eight</span><span style="color: #007700">();<br />    return yield from </span><span style="color: #0000BB">nine_ten</span><span style="color: #007700">();<br />}<br /><br />function </span><span style="color: #0000BB">seven_eight</span><span style="color: #007700">() {<br />    yield </span><span style="color: #0000BB">7</span><span style="color: #007700">;<br />    yield from </span><span style="color: #0000BB">eight</span><span style="color: #007700">();<br />}<br /><br />function </span><span style="color: #0000BB">eight</span><span style="color: #007700">() {<br />    yield </span><span style="color: #0000BB">8</span><span style="color: #007700">;<br />}<br /><br />function </span><span style="color: #0000BB">nine_ten</span><span style="color: #007700">() {<br />    yield </span><span style="color: #0000BB">9</span><span style="color: #007700">;<br />    return </span><span style="color: #0000BB">10</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$gen </span><span style="color: #007700">= </span><span style="color: #0000BB">count_to_ten</span><span style="color: #007700">();<br />foreach (</span><span style="color: #0000BB">$gen </span><span style="color: #007700">as </span><span style="color: #0000BB">$num</span><span style="color: #007700">) {<br />    echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$num</span><span style="color: #DD0000"> "</span><span style="color: #007700">;<br />}<br />echo </span><span style="color: #0000BB">$gen</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReturn</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

     
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

     <div class="example-contents screen">
<div class="cdata"><pre>
1 2 3 4 5 6 7 8 9 10
</pre></div>
     </div>
    </div>
   </div>
  </div>
 </div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=language.generators.syntax&amp;redirect=https://www.php.net/manual/ru/language.generators.syntax.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">9 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="111969">  <div class="votes">
    <div id="Vu111969">
    <a href="https://www.php.net/manual/vote-note.php?id=111969&amp;page=language.generators.syntax&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd111969">
    <a href="https://www.php.net/manual/vote-note.php?id=111969&amp;page=language.generators.syntax&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V111969" title="85% like this...">
    122
    </div>
  </div>
  <a href="language.generators.syntax.php.html#111969" class="name">
  <strong class="user"><em>Adil lhan (adilmedya at gmail dot com)</em></strong></a><a class="genanchor" href="language.generators.syntax.php.html#111969"> &para;</a><div class="date" title="2013-04-18 09:02"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom111969">
<div class="phpcode"><code><span class="html">For example yield keyword with Fibonacci:<br /><br />function getFibonacci()<br />{<br />    $i = 0;<br />    $k = 1; //first fibonacci value<br />    yield $k;<br />    while(true)<br />    {<br />        $k = $i + $k;<br />        $i = $k - $i;<br />        yield $k;        <br />    }<br />}<br /><br />$y = 0;<br /><br />foreach(getFibonacci() as $fibonacci)<br />{<br />    echo $fibonacci . "\n";<br />    $y++;    <br />    if($y &gt; 30)<br />    {<br />        break; // infinite loop prevent<br />    }<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="116577">  <div class="votes">
    <div id="Vu116577">
    <a href="https://www.php.net/manual/vote-note.php?id=116577&amp;page=language.generators.syntax&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116577">
    <a href="https://www.php.net/manual/vote-note.php?id=116577&amp;page=language.generators.syntax&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116577" title="92% like this...">
    47
    </div>
  </div>
  <a href="language.generators.syntax.php.html#116577" class="name">
  <strong class="user"><em>info at boukeversteegh dot nl</em></strong></a><a class="genanchor" href="language.generators.syntax.php.html#116577"> &para;</a><div class="date" title="2015-01-23 07:02"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom116577">
<div class="phpcode"><code><span class="html">[This comment replaces my previous comment]<br /><br />You can use generators to do lazy loading of lists. You only compute the items that are actually used. However, when you want to load more items, how to cache the ones already loaded?<br /><br />Here is how to do cached lazy loading with a generator:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">CachedGenerator </span><span class="keyword">{<br />    protected </span><span class="default">$cache </span><span class="keyword">= [];<br />    protected </span><span class="default">$generator </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br /><br />    public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$generator</span><span class="keyword">) {<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">generator </span><span class="keyword">= </span><span class="default">$generator</span><span class="keyword">;<br />    }<br /><br />    public function </span><span class="default">generator</span><span class="keyword">() {<br />        foreach(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cache </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">) yield </span><span class="default">$item</span><span class="keyword">;<br /><br />        while( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">generator</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">() ) {<br />            </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cache</span><span class="keyword">[] = </span><span class="default">$current </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">generator</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">();<br />            </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">generator</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">();<br />            yield </span><span class="default">$current</span><span class="keyword">;<br />        }<br />    }<br />}<br />class </span><span class="default">Foobar </span><span class="keyword">{<br />    protected </span><span class="default">$loader </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br /><br />    protected function </span><span class="default">loadItems</span><span class="keyword">() {<br />        foreach(</span><span class="default">range</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">) as </span><span class="default">$i</span><span class="keyword">) {<br />            </span><span class="default">usleep</span><span class="keyword">(</span><span class="default">200000</span><span class="keyword">);<br />            yield </span><span class="default">$i</span><span class="keyword">;<br />        }<br />    }<br /><br />    public function </span><span class="default">getItems</span><span class="keyword">() {<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">loader </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">loader </span><span class="keyword">?: new </span><span class="default">CachedGenerator</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">loadItems</span><span class="keyword">());<br />        return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">loader</span><span class="keyword">-&gt;</span><span class="default">generator</span><span class="keyword">();<br />    }<br />}<br /><br /></span><span class="default">$f </span><span class="keyword">= new </span><span class="default">Foobar</span><span class="keyword">;<br /><br /></span><span class="comment"># First<br /></span><span class="keyword">print </span><span class="string">"First\n"</span><span class="keyword">;<br />foreach(</span><span class="default">$f</span><span class="keyword">-&gt;</span><span class="default">getItems</span><span class="keyword">() as </span><span class="default">$i</span><span class="keyword">) {<br />    print </span><span class="default">$i </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />    if( </span><span class="default">$i </span><span class="keyword">== </span><span class="default">5 </span><span class="keyword">) {<br />        break;<br />    }<br />}<br /><br /></span><span class="comment"># Second (items 1-5 are cached, 6-10 are loaded)<br /></span><span class="keyword">print </span><span class="string">"Second\n"</span><span class="keyword">;<br />foreach(</span><span class="default">$f</span><span class="keyword">-&gt;</span><span class="default">getItems</span><span class="keyword">() as </span><span class="default">$i</span><span class="keyword">) {<br />    print </span><span class="default">$i </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />}<br /><br /></span><span class="comment"># Third (all items are cached and returned instantly)<br /></span><span class="keyword">print </span><span class="string">"Third\n"</span><span class="keyword">;<br />foreach(</span><span class="default">$f</span><span class="keyword">-&gt;</span><span class="default">getItems</span><span class="keyword">() as </span><span class="default">$i</span><span class="keyword">) {<br />    print </span><span class="default">$i </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="118526">  <div class="votes">
    <div id="Vu118526">
    <a href="https://www.php.net/manual/vote-note.php?id=118526&amp;page=language.generators.syntax&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd118526">
    <a href="https://www.php.net/manual/vote-note.php?id=118526&amp;page=language.generators.syntax&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V118526" title="80% like this...">
    19
    </div>
  </div>
  <a href="language.generators.syntax.php.html#118526" class="name">
  <strong class="user"><em>Hayley Watson</em></strong></a><a class="genanchor" href="language.generators.syntax.php.html#118526"> &para;</a><div class="date" title="2015-12-21 09:14"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom118526">
<div class="phpcode"><code><span class="html">If for some strange reason you need a generator that doesn't yield anything, an empty function doesn't work; the function needs a yield statement to be recognised as a generator.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">function </span><span class="default">gndn</span><span class="keyword">()<br />{<br />}<br /><br />foreach(</span><span class="default">gndn</span><span class="keyword">() as </span><span class="default">$it</span><span class="keyword">)<br />{<br />    echo </span><span class="string">'FNORD'</span><span class="keyword">;<br />}<br /><br /></span><span class="default">?&gt;<br /></span><br /> But it's enough to have the yield syntactically present even if it's not reachable:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">function </span><span class="default">gndn</span><span class="keyword">()<br />{<br />    if(</span><span class="default">false</span><span class="keyword">) { yield; }<br />}<br /><br />foreach(</span><span class="default">gndn</span><span class="keyword">() as </span><span class="default">$it</span><span class="keyword">)<br />{<br />    echo </span><span class="string">'FNORD'</span><span class="keyword">;<br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="118316">  <div class="votes">
    <div id="Vu118316">
    <a href="https://www.php.net/manual/vote-note.php?id=118316&amp;page=language.generators.syntax&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd118316">
    <a href="https://www.php.net/manual/vote-note.php?id=118316&amp;page=language.generators.syntax&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V118316" title="76% like this...">
    11
    </div>
  </div>
  <a href="language.generators.syntax.php.html#118316" class="name">
  <strong class="user"><em>zilvinas at kuusas dot lt</em></strong></a><a class="genanchor" href="language.generators.syntax.php.html#118316"> &para;</a><div class="date" title="2015-11-16 09:18"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom118316">
<div class="phpcode"><code><span class="html">Do not call generator functions directly, that won't work.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">function </span><span class="default">my_transform</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) {<br />    </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />    return </span><span class="default">$value </span><span class="keyword">* </span><span class="default">2</span><span class="keyword">;<br />}<br /><br />function </span><span class="default">my_function</span><span class="keyword">(array </span><span class="default">$values</span><span class="keyword">) {<br />    foreach (</span><span class="default">$values </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />        yield </span><span class="default">my_transform</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />    }<br />}<br /><br /></span><span class="default">$data </span><span class="keyword">= [</span><span class="default">1</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">];<br /></span><span class="comment">// my_transform() won't be called inside my_function()<br /></span><span class="default">my_function</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br /><br /></span><span class="comment"># my_transform() will be called.<br /></span><span class="keyword">foreach (</span><span class="default">my_function</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">) as </span><span class="default">$val</span><span class="keyword">) {<br />    </span><span class="comment">// ...<br /></span><span class="keyword">}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="117460">  <div class="votes">
    <div id="Vu117460">
    <a href="https://www.php.net/manual/vote-note.php?id=117460&amp;page=language.generators.syntax&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117460">
    <a href="https://www.php.net/manual/vote-note.php?id=117460&amp;page=language.generators.syntax&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117460" title="70% like this...">
    14
    </div>
  </div>
  <a href="language.generators.syntax.php.html#117460" class="name">
  <strong class="user"><em>Harun Yasar harunyasar at mail dot com</em></strong></a><a class="genanchor" href="language.generators.syntax.php.html#117460"> &para;</a><div class="date" title="2015-06-12 02:43"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom117460">
<div class="phpcode"><code><span class="html">That is a simple fibonacci generator.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">fibonacci</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">) {<br />    </span><span class="default">$a </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />    </span><span class="default">$b </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />    for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$item</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />        yield </span><span class="default">$a</span><span class="keyword">;<br />        </span><span class="default">$a </span><span class="keyword">= </span><span class="default">$b </span><span class="keyword">- </span><span class="default">$a</span><span class="keyword">;<br />        </span><span class="default">$b </span><span class="keyword">= </span><span class="default">$a </span><span class="keyword">+ </span><span class="default">$b</span><span class="keyword">;<br />    }<br />}<br /><br /></span><span class="comment"># give me the first ten fibonacci numbers<br /></span><span class="default">$fibo </span><span class="keyword">= </span><span class="default">fibonacci</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">);<br />foreach (</span><span class="default">$fibo </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />    echo </span><span class="string">"</span><span class="default">$value</span><span class="string">\n"</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="115705">  <div class="votes">
    <div id="Vu115705">
    <a href="https://www.php.net/manual/vote-note.php?id=115705&amp;page=language.generators.syntax&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd115705">
    <a href="https://www.php.net/manual/vote-note.php?id=115705&amp;page=language.generators.syntax&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V115705" title="67% like this...">
    11
    </div>
  </div>
  <a href="language.generators.syntax.php.html#115705" class="name">
  <strong class="user"><em>christophe dot maymard at gmail dot com</em></strong></a><a class="genanchor" href="language.generators.syntax.php.html#115705"> &para;</a><div class="date" title="2014-09-11 04:43"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom115705">
<div class="phpcode"><code><span class="html"><span class="default">&lt;?php<br /></span><span class="comment">//Example of class implementing IteratorAggregate using generator<br /><br /></span><span class="keyword">class </span><span class="default">ValueCollection </span><span class="keyword">implements </span><span class="default">IteratorAggregate<br /></span><span class="keyword">{<br />    private </span><span class="default">$items </span><span class="keyword">= array();<br />    <br />    public function </span><span class="default">addValue</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">)<br />    {<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">items</span><span class="keyword">[] = </span><span class="default">$item</span><span class="keyword">;<br />        return </span><span class="default">$this</span><span class="keyword">;<br />    }<br />    <br />    public function </span><span class="default">getIterator</span><span class="keyword">()<br />    {<br />        foreach (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">items </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">) {<br />            yield </span><span class="default">$item</span><span class="keyword">;<br />        }<br />    }<br />}<br /><br /></span><span class="comment">//Initializes a collection<br /></span><span class="default">$collection </span><span class="keyword">= new </span><span class="default">ValueCollection</span><span class="keyword">();<br /></span><span class="default">$collection<br />        </span><span class="keyword">-&gt;</span><span class="default">addValue</span><span class="keyword">(</span><span class="string">'A string'</span><span class="keyword">)<br />        -&gt;</span><span class="default">addValue</span><span class="keyword">(new </span><span class="default">stdClass</span><span class="keyword">())<br />        -&gt;</span><span class="default">addValue</span><span class="keyword">(</span><span class="default">NULL</span><span class="keyword">);<br /><br />foreach (</span><span class="default">$collection </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">) {<br />    </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">);<br />}</span></span></code></div>
  </div>
 </div>
  <div class="note" id="113636">  <div class="votes">
    <div id="Vu113636">
    <a href="https://www.php.net/manual/vote-note.php?id=113636&amp;page=language.generators.syntax&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd113636">
    <a href="https://www.php.net/manual/vote-note.php?id=113636&amp;page=language.generators.syntax&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V113636" title="60% like this...">
    6
    </div>
  </div>
  <a href="language.generators.syntax.php.html#113636" class="name">
  <strong class="user"><em>Shumeyko Dmitriy</em></strong></a><a class="genanchor" href="language.generators.syntax.php.html#113636"> &para;</a><div class="date" title="2013-11-08 07:46"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom113636">
<div class="phpcode"><code><span class="html">This is little example of using generators with recursion. Used version of php is 5.5.5<br />[php]<br /><span class="default">&lt;?php<br />define </span><span class="keyword">(</span><span class="string">"DS"</span><span class="keyword">, </span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">);<br /></span><span class="default">define </span><span class="keyword">(</span><span class="string">"ZERO_DEPTH"</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br /></span><span class="default">define </span><span class="keyword">(</span><span class="string">"DEPTHLESS"</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">define </span><span class="keyword">(</span><span class="string">"OPEN_SUCCESS"</span><span class="keyword">, </span><span class="default">True</span><span class="keyword">);<br /></span><span class="default">define </span><span class="keyword">(</span><span class="string">"END_OF_LIST"</span><span class="keyword">, </span><span class="default">False</span><span class="keyword">);<br /></span><span class="default">define </span><span class="keyword">(</span><span class="string">"CURRENT_DIR"</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">);<br /></span><span class="default">define </span><span class="keyword">(</span><span class="string">"PARENT_DIR"</span><span class="keyword">, </span><span class="string">".."</span><span class="keyword">);<br /><br />function </span><span class="default">DirTreeTraversal</span><span class="keyword">(</span><span class="default">$DirName</span><span class="keyword">, </span><span class="default">$MaxDepth </span><span class="keyword">= </span><span class="default">DEPTHLESS</span><span class="keyword">, </span><span class="default">$CurrDepth </span><span class="keyword">= </span><span class="default">ZERO_DEPTH</span><span class="keyword">)<br />{<br />  if ((</span><span class="default">$MaxDepth </span><span class="keyword">=== </span><span class="default">DEPTHLESS</span><span class="keyword">) || (</span><span class="default">$CurrDepth </span><span class="keyword">&lt; </span><span class="default">$MaxDepth</span><span class="keyword">)) { <br />    </span><span class="default">$DirHandle </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$DirName</span><span class="keyword">);<br />    if (</span><span class="default">$DirHandle </span><span class="keyword">!== </span><span class="default">OPEN_SUCCESS</span><span class="keyword">) { <br />      try{<br />        while ((</span><span class="default">$FileName </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$DirHandle</span><span class="keyword">)) !== </span><span class="default">END_OF_LIST</span><span class="keyword">) { </span><span class="comment">//read all file in directory<br />          </span><span class="keyword">if ((</span><span class="default">$FileName </span><span class="keyword">!= </span><span class="default">CURRENT_DIR</span><span class="keyword">) &amp;&amp; (</span><span class="default">$FileName </span><span class="keyword">!= </span><span class="default">PARENT_DIR</span><span class="keyword">)) {<br />            </span><span class="default">$FullName </span><span class="keyword">= </span><span class="default">$DirName</span><span class="keyword">.</span><span class="default">$FileName</span><span class="keyword">;<br />            yield </span><span class="default">$FullName</span><span class="keyword">;<br />            if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$FullName</span><span class="keyword">)) { </span><span class="comment">//include sub files and directories<br />              </span><span class="default">$SubTrav </span><span class="keyword">= </span><span class="default">DirTreeTraversal</span><span class="keyword">(</span><span class="default">$FullName</span><span class="keyword">.</span><span class="default">DS</span><span class="keyword">, </span><span class="default">$MaxDepth</span><span class="keyword">, (</span><span class="default">$CurrDepth </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">));<br />              foreach(</span><span class="default">$SubTrav </span><span class="keyword">as </span><span class="default">$SubItem</span><span class="keyword">) yield </span><span class="default">$SubItem</span><span class="keyword">;<br />            }<br />          }<br />        }<br />      } finally {<br />        </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$DirHandle</span><span class="keyword">);<br />      }<br />    }<br />  }<br />}<br /><br /></span><span class="default">$PathTrav </span><span class="keyword">= </span><span class="default">DirTreeTraversal</span><span class="keyword">(</span><span class="string">"C:"</span><span class="keyword">.</span><span class="default">DS</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />print </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />foreach(</span><span class="default">$PathTrav </span><span class="keyword">as </span><span class="default">$FileName</span><span class="keyword">) </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%s\n"</span><span class="keyword">, </span><span class="default">$FileName</span><span class="keyword">);<br />print </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />[/</span><span class="default">php</span><span class="keyword">]</span></span></code></div>
  </div>
 </div>
  <div class="note" id="123983">  <div class="votes">
    <div id="Vu123983">
    <a href="https://www.php.net/manual/vote-note.php?id=123983&amp;page=language.generators.syntax&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123983">
    <a href="https://www.php.net/manual/vote-note.php?id=123983&amp;page=language.generators.syntax&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123983" title="38% like this...">
    -3
    </div>
  </div>
  <a href="language.generators.syntax.php.html#123983" class="name">
  <strong class="user"><em>christianggimenez at gmail dot com</em></strong></a><a class="genanchor" href="language.generators.syntax.php.html#123983"> &para;</a><div class="date" title="2019-06-24 09:36"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom123983">
<div class="phpcode"><code><span class="html">Module list of a number from 1 to 100.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">function </span><span class="default">list_of_modulo</span><span class="keyword">(){<br /><br />    for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">100</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br /><br />        if((</span><span class="default">$i </span><span class="keyword">% </span><span class="default">2</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">){<br />            yield </span><span class="default">$i</span><span class="keyword">;<br />        }<br />    }<br />}<br /><br /></span><span class="default">$modulos </span><span class="keyword">= </span><span class="default">list_of_modulo</span><span class="keyword">();<br /><br />foreach(</span><span class="default">$modulos </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">){<br />    <br />    echo </span><span class="string">"</span><span class="default">$value</span><span class="string">\n"</span><span class="keyword">;<br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="114844">  <div class="votes">
    <div id="Vu114844">
    <a href="https://www.php.net/manual/vote-note.php?id=114844&amp;page=language.generators.syntax&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd114844">
    <a href="https://www.php.net/manual/vote-note.php?id=114844&amp;page=language.generators.syntax&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V114844" title="19% like this...">
    -45
    </div>
  </div>
  <a href="language.generators.syntax.php.html#114844" class="name">
  <strong class="user"><em>denshadewillspam at HOTMAIL dot com</em></strong></a><a class="genanchor" href="language.generators.syntax.php.html#114844"> &para;</a><div class="date" title="2014-04-13 10:46"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom114844">
<div class="phpcode"><code><span class="html">Note that you can't use count() on generators.<br /><br />/**<br /> * @return integer[]<br /> */<br />function xrange() {<br />    for ($a = 0; $a &lt; 10; $a++)<br />    {<br />        yield $a;<br />    }<br />}<br /><br />function mycount(Traversable $traversable)<br />{<br />    $skip = 0;<br />    foreach($traversable as $skip)<br />    {<br />        $skip++;<br />    }<br />    return $skip;<br />}<br />echo "Count:" . count(xrange()). PHP_EOL;<br />echo "Count:" . mycount(xrange()). PHP_EOL;</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=language.generators.syntax&amp;redirect=https://www.php.net/manual/ru/language.generators.syntax.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="language.generators.php.html">Генераторы</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="language.generators.overview.php.html" title="Знакомство с генераторами">Знакомство с генераторами</a>
                        </li>
                                                <li class="current">
                            <a href="language.generators.syntax.php.html" title="Синтаксис генераторов">Синтаксис генераторов</a>
                        </li>
                                                <li class="">
                            <a href="language.generators.comparison.php.html" title="Сравнение генераторов с объектами класса Iterator">Сравнение генераторов с объектами класса Iterator</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
