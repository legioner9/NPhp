<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: Объекты и ссылки - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="language.oop5.references.php.html">
 <link rel="shorturl" href="https://www.php.net/oop5.references">
 <link rel="alternate" href="https://www.php.net/oop5.references" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="language.oop5.php.html">
 <link rel="prev" href="language.oop5.late-static-bindings.php.html">
 <link rel="next" href="language.oop5.serialization.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/language.oop5.references.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/language.oop5.references.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/language.oop5.references.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/language.oop5.references.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/language.oop5.references.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/language.oop5.references.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/language.oop5.references.php" hreflang="pt_BR">
 <link rel="alternate" href="language.oop5.references.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/language.oop5.references.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/language.oop5.references.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="language.oop5.serialization.php.html">
          Сериализация объектов &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="language.oop5.late-static-bindings.php.html">
          &laquo; Позднее статическое связывание        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='langref.php.html'>Справочник языка</a></li>      <li><a href='language.oop5.php.html'>Классы и объекты</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/language.oop5.references.php'>English</option>
            <option value='de/language.oop5.references.php'>German</option>
            <option value='es/language.oop5.references.php'>Spanish</option>
            <option value='fr/language.oop5.references.php'>French</option>
            <option value='it/language.oop5.references.php'>Italian</option>
            <option value='ja/language.oop5.references.php'>Japanese</option>
            <option value='pt_BR/language.oop5.references.php'>Brazilian Portuguese</option>
            <option value='ru/language.oop5.references.php' selected="selected">Russian</option>
            <option value='tr/language.oop5.references.php'>Turkish</option>
            <option value='zh/language.oop5.references.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/language/oop5/references.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Flanguage.oop5.references%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="language.oop5.references" class="sect1">
 <h2 class="title">Объекты и ссылки</h2>
 <p class="para">
  Одним из ключевых моментов объектно-ориентированной парадигмы PHP, который
  часто обсуждается, является &quot;передача объектов по ссылке по умолчанию&quot;. Это не совсем верно.
  Данный раздел уточняет это понятие, используя некоторые примеры.
 </p>

 <p class="para">
  Ссылка в PHP - это псевдоним (алиас), который позволяет присвоить двум переменным
  одинаковое значение. В PHP объектная переменная больше не содержит сам объект
  как значение. Такая переменная содержит только идентификатор объекта, который позволяет
  найти конкретный объект при обращении к нему. Когда объект передаётся
  как аргумент функции, возвращается или присваивается другой переменной, то эти разные
  переменные не являются псевдонимами (алиасами): они содержат копию идентификатора,
  который указывает на один и тот же объект.
 </p>

 <div class="example" id="example-874">
  <p><strong>Пример #1 Ссылки и объекты</strong></p>
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">A </span><span style="color: #007700">{<br />    public </span><span style="color: #0000BB">$foo </span><span style="color: #007700">= </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$a </span><span style="color: #007700">= new </span><span style="color: #0000BB">A</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$b </span><span style="color: #007700">= </span><span style="color: #0000BB">$a</span><span style="color: #007700">;     </span><span style="color: #FF8000">// $a и $b - копии одного идентификатора<br />             // ($a) = ($b) = &lt;id&gt;<br /></span><span style="color: #0000BB">$b</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo </span><span style="color: #007700">= </span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />echo </span><span style="color: #0000BB">$a</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /><br /></span><span style="color: #0000BB">$c </span><span style="color: #007700">= new </span><span style="color: #0000BB">A</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$d </span><span style="color: #007700">= &amp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">;    </span><span style="color: #FF8000">// $c и $d - ссылки<br />             // ($c,$d) = &lt;id&gt;<br /><br /></span><span style="color: #0000BB">$d</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo </span><span style="color: #007700">= </span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />echo </span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /><br /></span><span style="color: #0000BB">$e </span><span style="color: #007700">= new </span><span style="color: #0000BB">A</span><span style="color: #007700">;<br /><br />function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">) {<br />    </span><span style="color: #FF8000">// ($obj) = ($e) = &lt;id&gt;<br />    </span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo </span><span style="color: #007700">= </span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">);<br />echo </span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
  </div>

  
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

  <div class="example-contents screen">
<div class="cdata"><pre>
2
2
2
</pre></div>
   </div>
  </div>
</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=language.oop5.references&amp;redirect=https://www.php.net/manual/ru/language.oop5.references.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">18 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="95522">  <div class="votes">
    <div id="Vu95522">
    <a href="https://www.php.net/manual/vote-note.php?id=95522&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd95522">
    <a href="https://www.php.net/manual/vote-note.php?id=95522&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V95522" title="80% like this...">
    333
    </div>
  </div>
  <a href="language.oop5.references.php.html#95522" class="name">
  <strong class="user"><em>miklcct at gmail dot com</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#95522"> &para;</a><div class="date" title="2010-01-07 01:34"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom95522">
<div class="phpcode"><code><span class="html">Notes on reference:<br />A reference is not a pointer. However, an object handle IS a pointer. Example:<br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">Foo </span><span class="keyword">{<br />  private static </span><span class="default">$used</span><span class="keyword">;<br />  private </span><span class="default">$id</span><span class="keyword">;<br />  public function </span><span class="default">__construct</span><span class="keyword">() {<br />    </span><span class="default">$id </span><span class="keyword">= </span><span class="default">$used</span><span class="keyword">++;<br />  }<br />  public function </span><span class="default">__clone</span><span class="keyword">() {<br />    </span><span class="default">$id </span><span class="keyword">= </span><span class="default">$used</span><span class="keyword">++;<br />  }<br />}<br /><br /></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">; </span><span class="comment">// $a is a pointer pointing to Foo object 0<br /></span><span class="default">$b </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">; </span><span class="comment">// $b is a pointer pointing to Foo object 0, however, $b is a copy of $a<br /></span><span class="default">$c </span><span class="keyword">= &amp;</span><span class="default">$a</span><span class="keyword">; </span><span class="comment">// $c and $a are now references of a pointer pointing to Foo object 0<br /></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">; </span><span class="comment">// $a and $c are now references of a pointer pointing to Foo object 1, $b is still a pointer pointing to Foo object 0<br /></span><span class="keyword">unset(</span><span class="default">$a</span><span class="keyword">); </span><span class="comment">// A reference with reference count 1 is automatically converted back to a value. Now $c is a pointer to Foo object 1<br /></span><span class="default">$a </span><span class="keyword">= &amp;</span><span class="default">$b</span><span class="keyword">; </span><span class="comment">// $a and $b are now references of a pointer pointing to Foo object 0<br /></span><span class="default">$a </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">; </span><span class="comment">// $a and $b now become a reference to NULL. Foo object 0 can be garbage collected now<br /></span><span class="keyword">unset(</span><span class="default">$b</span><span class="keyword">); </span><span class="comment">// $b no longer exists and $a is now NULL<br /></span><span class="default">$a </span><span class="keyword">= clone </span><span class="default">$c</span><span class="keyword">; </span><span class="comment">// $a is now a pointer to Foo object 2, $c remains a pointer to Foo object 1<br /></span><span class="keyword">unset(</span><span class="default">$c</span><span class="keyword">); </span><span class="comment">// Foo object 1 can be garbage collected now.<br /></span><span class="default">$c </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">; </span><span class="comment">// $c and $a are pointers pointing to Foo object 2<br /></span><span class="keyword">unset(</span><span class="default">$a</span><span class="keyword">); </span><span class="comment">// Foo object 2 is still pointed by $c<br /></span><span class="default">$a </span><span class="keyword">= &amp;</span><span class="default">$c</span><span class="keyword">; </span><span class="comment">// Foo object 2 has 1 pointers pointing to it only, that pointer has 2 references: $a and $c;<br /></span><span class="keyword">const </span><span class="default">ABC </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">;<br />if(</span><span class="default">ABC</span><span class="keyword">) {<br />  </span><span class="default">$a </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">; </span><span class="comment">// Foo object 2 can be garbage collected now because $a and $c are now a reference to the same NULL value<br /></span><span class="keyword">} else {<br />  unset(</span><span class="default">$a</span><span class="keyword">); </span><span class="comment">// Foo object 2 is still pointed to $c<br /></span><span class="keyword">}</span></span></code></div>
  </div>
 </div>
  <div class="note" id="101900">  <div class="votes">
    <div id="Vu101900">
    <a href="https://www.php.net/manual/vote-note.php?id=101900&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd101900">
    <a href="https://www.php.net/manual/vote-note.php?id=101900&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V101900" title="83% like this...">
    245
    </div>
  </div>
  <a href="language.oop5.references.php.html#101900" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#101900"> &para;</a><div class="date" title="2011-01-16 08:51"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom101900">
<div class="phpcode"><code><span class="html">There seems to be some confusion here. The distinction between pointers and references is not particularly helpful.<br />The behavior in some of the "comprehensive" examples already posted can be explained in simpler unifying terms. Hayley's code, for example, is doing EXACTLY what you should expect it should. (Using &gt;= 5.3)<br /><br />First principle:<br />A pointer stores a memory address to access an object. Any time an object is assigned, a pointer is generated. (I haven't delved TOO deeply into the Zend engine yet, but as far as I can see, this applies)<br /><br />2nd principle, and source of the most confusion:<br />Passing a variable to a function is done by default as a value pass, ie, you are working with a copy. "But objects are passed by reference!" A common misconception both here and in the Java world. I never said a copy OF WHAT. The default passing is done by value. Always. WHAT is being copied and passed, however, is the pointer. When using the "-&gt;", you will of course be accessing the same internals as the original variable in the caller function. Just using "=" will only play with copies.<br /><br />3rd principle:<br />"&amp;" automatically and permanently sets another variable name/pointer to the same memory address as something else until you decouple them. It is correct to use the term "alias" here. Think of it as joining two pointers at the hip until forcibly separated with "unset()". This functionality exists both in the same scope and when an argument is passed to a function. Often the passed argument is called a "reference," due to certain distinctions between "passing by value" and "passing by reference" that were clearer in C and C++.<br /><br />Just remember: pointers to objects, not objects themselves, are passed to functions. These pointers are COPIES of the original unless you use "&amp;" in your parameter list to actually pass the originals. Only when you dig into the internals of an object will the originals change.<br /><br />Example:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">//The two are meant to be the same<br /></span><span class="default">$a </span><span class="keyword">= </span><span class="string">"Clark Kent"</span><span class="keyword">; </span><span class="comment">//a==Clark Kent<br /></span><span class="default">$b </span><span class="keyword">= &amp;</span><span class="default">$a</span><span class="keyword">; </span><span class="comment">//The two will now share the same fate.<br /><br /></span><span class="default">$b</span><span class="keyword">=</span><span class="string">"Superman"</span><span class="keyword">; </span><span class="comment">// $a=="Superman" too.<br /></span><span class="keyword">echo </span><span class="default">$a</span><span class="keyword">; <br />echo </span><span class="default">$a</span><span class="keyword">=</span><span class="string">"Clark Kent"</span><span class="keyword">; </span><span class="comment">// $b=="Clark Kent" too.<br /></span><span class="keyword">unset(</span><span class="default">$b</span><span class="keyword">); </span><span class="comment">// $b divorced from $a<br /></span><span class="default">$b</span><span class="keyword">=</span><span class="string">"Bizarro"</span><span class="keyword">;<br />echo </span><span class="default">$a</span><span class="keyword">; </span><span class="comment">// $a=="Clark Kent" still, since $b is a free agent pointer now.<br /><br />//The two are NOT meant to be the same.<br /></span><span class="default">$c</span><span class="keyword">=</span><span class="string">"King"</span><span class="keyword">;<br /></span><span class="default">$d</span><span class="keyword">=</span><span class="string">"Pretender to the Throne"</span><span class="keyword">;<br />echo </span><span class="default">$c</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// $c=="King"<br /></span><span class="keyword">echo </span><span class="default">$d</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// $d=="Pretender to the Throne"<br /></span><span class="default">swapByValue</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">);<br />echo </span><span class="default">$c</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// $c=="King"<br /></span><span class="keyword">echo </span><span class="default">$d</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// $d=="Pretender to the Throne"<br /></span><span class="default">swapByRef</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">);<br />echo </span><span class="default">$c</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// $c=="Pretender to the Throne"<br /></span><span class="keyword">echo </span><span class="default">$d</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// $d=="King"<br /><br /></span><span class="keyword">function </span><span class="default">swapByValue</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">){<br /></span><span class="default">$temp</span><span class="keyword">=</span><span class="default">$x</span><span class="keyword">;<br /></span><span class="default">$x</span><span class="keyword">=</span><span class="default">$y</span><span class="keyword">;<br /></span><span class="default">$y</span><span class="keyword">=</span><span class="default">$temp</span><span class="keyword">;<br /></span><span class="comment">//All this beautiful work will disappear<br />//because it was done on COPIES of pointers.<br />//The originals pointers still point as they did.<br /></span><span class="keyword">}<br /><br />function </span><span class="default">swapByRef</span><span class="keyword">(&amp;</span><span class="default">$x</span><span class="keyword">, &amp;</span><span class="default">$y</span><span class="keyword">){<br /> </span><span class="default">$temp</span><span class="keyword">=</span><span class="default">$x</span><span class="keyword">;<br /> </span><span class="default">$x</span><span class="keyword">=</span><span class="default">$y</span><span class="keyword">;<br /> </span><span class="default">$y</span><span class="keyword">=</span><span class="default">$temp</span><span class="keyword">;<br /> </span><span class="comment">//Note the parameter list: now we switched 'em REAL good.<br /></span><span class="keyword">}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="124995">  <div class="votes">
    <div id="Vu124995">
    <a href="https://www.php.net/manual/vote-note.php?id=124995&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd124995">
    <a href="https://www.php.net/manual/vote-note.php?id=124995&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V124995" title="80% like this...">
    3
    </div>
  </div>
  <a href="language.oop5.references.php.html#124995" class="name">
  <strong class="user"><em>rnealxp at yahoo dot com</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#124995"> &para;</a><div class="date" title="2020-05-11 06:47"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom124995">
<div class="phpcode"><code><span class="html">Concise reminders of the behaviors of object assignments, with and without using the "&amp;" operator...<br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">clsA</span><span class="keyword">{<br />    public </span><span class="default">$propA </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />}<br />class </span><span class="default">clsB</span><span class="keyword">{<br />    public </span><span class="default">$propB </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;<br />}<br /></span><span class="comment">//------------<br /></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">clsA</span><span class="keyword">();<br /></span><span class="default">$c </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">; </span><span class="comment">//Both of these vars now refer to the same object-instance (an assignment-by-reference).<br /></span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">propA </span><span class="keyword">= </span><span class="default">22</span><span class="keyword">; </span><span class="comment">//Use one of the vars to change the instance's property.<br /></span><span class="keyword">echo </span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">propA </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">//output: 22<br /></span><span class="keyword">echo </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">propA </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">//output: 22<br />//------------<br /></span><span class="default">$b </span><span class="keyword">= new </span><span class="default">clsB</span><span class="keyword">();<br /></span><span class="default">$a </span><span class="keyword">= </span><span class="default">$b</span><span class="keyword">; </span><span class="comment">//Before this assignment, both $c and $a referred to the same object instance; this is no longer the case after $a is switched to reference the instance of clsB.<br /></span><span class="keyword">echo </span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">propA </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">//output: 22 (this works because $c is still a reference to the object instance of type clsA)<br /></span><span class="keyword">echo </span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">propB </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">//output: "Undefined property: clsA::$propB" (did not work because $c is not a reference to the object instance of type clsB)<br />//------------<br />//Start over and use the "&amp;" operator...<br /></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">clsA</span><span class="keyword">();<br /></span><span class="default">$b </span><span class="keyword">= new </span><span class="default">clsB</span><span class="keyword">();<br /></span><span class="default">$c </span><span class="keyword">= &amp;</span><span class="default">$a</span><span class="keyword">; </span><span class="comment">//&lt;--$c will refer to whatever $a currently and "futuristically" refers to (also a type of assignment-by-reference); in C-language, you would think of this as copying a pointer.<br /></span><span class="keyword">echo </span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">propA </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">//output: 2<br /></span><span class="default">$a </span><span class="keyword">= </span><span class="default">$b</span><span class="keyword">; </span><span class="comment">//This assignment causes $c to refer to a new/different object.<br /></span><span class="keyword">echo </span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">propA </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">//output: "Undefined property: clsB::$propA" (does not work since $c no longer refers to the object instance of type clsA)<br /></span><span class="keyword">echo </span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">propB </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">//output: 3 (works since $c now refers to the object instance of type clsB)<br />//------------<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="91627">  <div class="votes">
    <div id="Vu91627">
    <a href="https://www.php.net/manual/vote-note.php?id=91627&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd91627">
    <a href="https://www.php.net/manual/vote-note.php?id=91627&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V91627" title="74% like this...">
    55
    </div>
  </div>
  <a href="language.oop5.references.php.html#91627" class="name">
  <strong class="user"><em>Aaron Bond</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#91627"> &para;</a><div class="date" title="2009-06-19 06:08"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom91627">
<div class="phpcode"><code><span class="html">I've bumped into a behavior that helped clarify the difference between objects and identifiers for me.<br /><br />When we hand off an object variable, we get an identifier to that object's value.  This means that if I were to mutate the object from a passed variable, ALL variables originating from that instance of the object will change.  <br /><br />HOWEVER, if I set that object variable to new instance, it replaces the identifier itself with a new identifier and leaves the old instance in tact.<br /><br />Take the following example:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />    public </span><span class="default">$foo </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />}  <br /><br />class </span><span class="default">B </span><span class="keyword">{<br />    public function </span><span class="default">foo</span><span class="keyword">(</span><span class="default">A $bar</span><span class="keyword">)<br />    {<br />        </span><span class="default">$bar</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">= </span><span class="default">42</span><span class="keyword">;<br />    }<br />    <br />    public function </span><span class="default">bar</span><span class="keyword">(</span><span class="default">A $bar</span><span class="keyword">)<br />    {<br />        </span><span class="default">$bar </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">;<br />    }<br />}<br /><br /></span><span class="default">$f </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">;<br /></span><span class="default">$g </span><span class="keyword">= new </span><span class="default">B</span><span class="keyword">;<br />echo </span><span class="default">$f</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br /><br /></span><span class="default">$g</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">);<br />echo </span><span class="default">$f</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br /><br /></span><span class="default">$g</span><span class="keyword">-&gt;</span><span class="default">bar</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">);<br />echo </span><span class="default">$f</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br /><br /></span><span class="default">?&gt;<br /></span><br />If object variables were always references, we'd expect the following output:<br />1<br />42<br />1<br /><br />However, we get:<br />1<br />42<br />42<br /><br />The reason for this is simple.  In the bar function of the B class, we replace the identifier you passed in, which identified the same instance of the A class as your $f variable, with a brand new A class identifier.  Creating a new instance of A doesn't mutate $f because $f wasn't passed as a reference.<br /><br />To get the reference behavior, one would have to enter the following for class B:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">B </span><span class="keyword">{<br />    public function </span><span class="default">foo</span><span class="keyword">(</span><span class="default">A $bar</span><span class="keyword">)<br />    {<br />        </span><span class="default">$bar</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">= </span><span class="default">42</span><span class="keyword">;<br />    }<br />    <br />    public function </span><span class="default">bar</span><span class="keyword">(</span><span class="default">A </span><span class="keyword">&amp;</span><span class="default">$bar</span><span class="keyword">)<br />    {<br />        </span><span class="default">$bar </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">;<br />    }<br />}<br /></span><span class="default">?&gt;<br /></span><br />The foo function doesn't require a reference, because it is MUTATING an object instance that $bar identifies.  But bar will be REPLACING the object instance.  If only an identifier is passed, the variable identifier will be overwritten but the object instance will be left in place.</span></code></div>
  </div>
 </div>
  <div class="note" id="109052">  <div class="votes">
    <div id="Vu109052">
    <a href="https://www.php.net/manual/vote-note.php?id=109052&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd109052">
    <a href="https://www.php.net/manual/vote-note.php?id=109052&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V109052" title="70% like this...">
    22
    </div>
  </div>
  <a href="language.oop5.references.php.html#109052" class="name">
  <strong class="user"><em>kristof at viewranger dot com</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#109052"> &para;</a><div class="date" title="2012-06-16 02:07"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom109052">
<div class="phpcode"><code><span class="html">I hope this clarifies references a bit more:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />    public </span><span class="default">$foo </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />}  <br /><br /></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">;<br /></span><span class="default">$b </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">;<br /></span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br /></span><span class="default">$a </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br />echo </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// 2<br /><br /></span><span class="default">$c </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">;<br /></span><span class="default">$d </span><span class="keyword">= &amp;</span><span class="default">$c</span><span class="keyword">;<br /></span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br /></span><span class="default">$c </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br />echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// Notice:  Trying to get property of non-object...<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="92955">  <div class="votes">
    <div id="Vu92955">
    <a href="https://www.php.net/manual/vote-note.php?id=92955&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd92955">
    <a href="https://www.php.net/manual/vote-note.php?id=92955&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V92955" title="67% like this...">
    13
    </div>
  </div>
  <a href="language.oop5.references.php.html#92955" class="name">
  <strong class="user"><em>mjung at poczta dot onet dot pl</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#92955"> &para;</a><div class="date" title="2009-08-15 10:25"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom92955">
<div class="phpcode"><code><span class="html">Ultimate explanation to object references:<br />NOTE: wording 'points to' could be easily replaced with 'refers ' and is used loosly.<br /><span class="default">&lt;?php<br />$a1 </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);  </span><span class="comment">// $a1 == handle1-1 to A(1)<br /></span><span class="default">$a2 </span><span class="keyword">= </span><span class="default">$a1</span><span class="keyword">;     </span><span class="comment">// $a2 == handle1-2 to A(1) - assigned by value (copy)<br /></span><span class="default">$a3 </span><span class="keyword">= &amp;</span><span class="default">$a1</span><span class="keyword">;  </span><span class="comment">// $a3 points to $a1 (handle1-1)<br /></span><span class="default">$a3 </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;      </span><span class="comment">// makes $a1==null, $a3 (still) points to $a1, $a2 == handle1-2 (same object instance A(1))<br /></span><span class="default">$a2 </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;      </span><span class="comment">// makes $a2 == null<br /></span><span class="default">$a1 </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">); </span><span class="comment">//makes $a1 == handle2-1 to new object and $a3 (still) points to $a1 =&gt; handle2-1 (new object), so value of $a1 and $a3 is the new object and $a2 == null<br />//By reference:<br /></span><span class="default">$a4 </span><span class="keyword">= &amp;new </span><span class="default">A</span><span class="keyword">(</span><span class="default">4</span><span class="keyword">);  </span><span class="comment">//$a4 points to handle4-1 to A(4)<br /></span><span class="default">$a5 </span><span class="keyword">= </span><span class="default">$a4</span><span class="keyword">;   </span><span class="comment">// $a5 == handle4-2 to A(4) (copy)<br /></span><span class="default">$a6 </span><span class="keyword">= &amp;</span><span class="default">$a4</span><span class="keyword">;  </span><span class="comment">//$a6 points to (handle4-1), not to $a4 (reference to reference references the referenced object handle4-1 not the reference itself)<br /><br /></span><span class="default">$a4 </span><span class="keyword">= &amp;new </span><span class="default">A</span><span class="keyword">(</span><span class="default">40</span><span class="keyword">); </span><span class="comment">// $a4 points to handle40-1, $a5 == handle4-2 and $a6 still points to handle4-1 to A(4)<br /></span><span class="default">$a6 </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;  </span><span class="comment">// sets handle4-1 to null; $a5 == handle4-2 = A(4); $a4 points to handle40-1; $a6 points to null<br /></span><span class="default">$a6 </span><span class="keyword">=&amp;</span><span class="default">$a4</span><span class="keyword">; </span><span class="comment">// $a6 points to handle40-1<br /></span><span class="default">$a7 </span><span class="keyword">= &amp;</span><span class="default">$a6</span><span class="keyword">; </span><span class="comment">//$a7 points to handle40-1<br /></span><span class="default">$a8 </span><span class="keyword">= &amp;</span><span class="default">$a7</span><span class="keyword">; </span><span class="comment">//$a8 points to handle40-1<br /></span><span class="default">$a5 </span><span class="keyword">= </span><span class="default">$a7</span><span class="keyword">;  </span><span class="comment">//$a5 == handle40-2 (copy)<br /></span><span class="default">$a6 </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">; </span><span class="comment">//makes handle40-1 null, all variables pointing to (hanlde40-1 ==null) are null, except ($a5 == handle40-2 = A(40))<br /></span><span class="default">?&gt;<br /></span>Hope this helps.</span></code></div>
  </div>
 </div>
  <div class="note" id="123495">  <div class="votes">
    <div id="Vu123495">
    <a href="https://www.php.net/manual/vote-note.php?id=123495&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123495">
    <a href="https://www.php.net/manual/vote-note.php?id=123495&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123495" title="65% like this...">
    7
    </div>
  </div>
  <a href="language.oop5.references.php.html#123495" class="name">
  <strong class="user"><em>gevorgmelkoumyan at gmail dot com</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#123495"> &para;</a><div class="date" title="2019-01-06 03:46"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom123495">
<div class="phpcode"><code><span class="html">I think this example should clarify the difference between PHP references (aliases) and pointers:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />    public </span><span class="default">$var </span><span class="keyword">= </span><span class="default">42</span><span class="keyword">;<br />}<br /><br /></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">; </span><span class="comment">// $a points to the object with id=1<br /></span><span class="keyword">echo </span><span class="string">'A: ' </span><span class="keyword">. </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">var </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// A: 42 <br /><br /></span><span class="default">$b </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">; </span><span class="comment">// $b points to the object with id=1<br /></span><span class="keyword">echo </span><span class="string">'B: ' </span><span class="keyword">. </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">var </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// B: 42<br /><br /></span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">var </span><span class="keyword">= </span><span class="default">5</span><span class="keyword">;<br />echo </span><span class="string">'B: ' </span><span class="keyword">. </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">var </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// B: 5<br /></span><span class="keyword">echo </span><span class="string">'A: ' </span><span class="keyword">. </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">var </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// A: 5<br /><br /></span><span class="default">$b </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">; </span><span class="comment">// now $b points to the object with id=2, but $a still points to the 1st object <br /></span><span class="keyword">echo </span><span class="string">'B: ' </span><span class="keyword">. </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">var </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// B: 42<br /></span><span class="keyword">echo </span><span class="string">'A: ' </span><span class="keyword">. </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">var </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// A: 5<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="117353">  <div class="votes">
    <div id="Vu117353">
    <a href="https://www.php.net/manual/vote-note.php?id=117353&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117353">
    <a href="https://www.php.net/manual/vote-note.php?id=117353&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117353" title="65% like this...">
    6
    </div>
  </div>
  <a href="language.oop5.references.php.html#117353" class="name">
  <strong class="user"><em>wassimamal121 at hotmail dot com</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#117353"> &para;</a><div class="date" title="2015-05-26 04:43"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom117353">
<div class="phpcode"><code><span class="html">The example given by PHP manual is pretty clever and simple.<br />The example begins by explaining how things go when two aliases referring to the same objects are changed, just rethink the first part of the example <br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{    public </span><span class="default">$foo </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;}  <br />function </span><span class="default">go</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) {  </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;}<br />function </span><span class="default">bo</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) {</span><span class="default">$obj</span><span class="keyword">=new </span><span class="default">A</span><span class="keyword">;}<br /><br />function </span><span class="default">chan</span><span class="keyword">(</span><span class="default">$p</span><span class="keyword">){</span><span class="default">$p</span><span class="keyword">=</span><span class="default">44</span><span class="keyword">;}<br />function </span><span class="default">chanref</span><span class="keyword">(&amp;</span><span class="default">$p</span><span class="keyword">){</span><span class="default">$p</span><span class="keyword">=</span><span class="default">44</span><span class="keyword">;} <br /><br /></span><span class="comment">/**************manipulating simple variable******************/<br /></span><span class="default">$h</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">;</span><span class="default">$k</span><span class="keyword">=</span><span class="default">$h</span><span class="keyword">;</span><span class="default">$h</span><span class="keyword">=</span><span class="default">4</span><span class="keyword">; echo </span><span class="string">'$k='</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">.</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br /></span><span class="comment">//$k refers to a memory cell containing the value 2<br />//$k is created and referes to another cell in the RAM<br />//$k=$h implies take the content of the cell to which $h refers <br />//and put it in the cell to which $k refers to<br />//$h=4 implies change the content of the cell to which $h refers to<br />//dosn't imply changing the content of the cell to which $k refers to <br /><br /></span><span class="default">$h</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">;</span><span class="default">$k</span><span class="keyword">=&amp;</span><span class="default">$h</span><span class="keyword">;</span><span class="default">$h</span><span class="keyword">=</span><span class="default">4</span><span class="keyword">; echo </span><span class="string">'$k='</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">.</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br /></span><span class="comment">//here $k refers to the same memory cell as $h <br /><br /></span><span class="default">$v</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">;</span><span class="default">chan</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">); echo </span><span class="string">'$v='</span><span class="keyword">.</span><span class="default">$v</span><span class="keyword">.</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br /></span><span class="comment">//the value of $v doesn't change because the function takes <br />// as argument an alias  refering to a value 2, in the function we <br />//change only the value to which this alias refers to<br /><br /></span><span class="default">$u</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">;</span><span class="default">chanref</span><span class="keyword">(</span><span class="default">$u</span><span class="keyword">); echo </span><span class="string">'$u='</span><span class="keyword">.</span><span class="default">$u</span><span class="keyword">.</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br /></span><span class="comment">//here the value changes because we pass a adress of the <br />//memory cell to which $u refers to, the function is manipulating<br />//the content of this memory cell <br /><br />/***************manipaliting objects************************/<br /></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">;<br /></span><span class="comment">//create an object by allocating some cells in memory, $a refers <br />//to this cells<br /><br /></span><span class="default">$b </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">; <br /></span><span class="comment">//$b refers to the same cells, it's not like simple variables<br />//which are created then, we copy the content<br /><br /></span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;echo </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">.</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br /></span><span class="comment">//you can access the same object using both $a or $b <br /><br /></span><span class="default">$c </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">;</span><span class="default">$d </span><span class="keyword">= &amp;</span><span class="default">$c</span><span class="keyword">;</span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;echo </span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">.</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br /></span><span class="comment">//$d and $c don't just refers to the same memory space, <br />//but they are the same<br /> <br /></span><span class="default">$e </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">;<br /></span><span class="default">go</span><span class="keyword">(</span><span class="default">$e</span><span class="keyword">);<br /></span><span class="comment">//we pass a copy of a pointer <br /></span><span class="keyword">echo </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">.</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br /></span><span class="default">bo</span><span class="keyword">(</span><span class="default">$e</span><span class="keyword">);<br />echo </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">.</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br /></span><span class="comment">//if you think it's 1 sorry I failed to explain<br />//remember you passed just a pointer, when new is called<br />//the pointer is discoupled  <br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="86042">  <div class="votes">
    <div id="Vu86042">
    <a href="https://www.php.net/manual/vote-note.php?id=86042&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd86042">
    <a href="https://www.php.net/manual/vote-note.php?id=86042&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V86042" title="61% like this...">
    3
    </div>
  </div>
  <a href="language.oop5.references.php.html#86042" class="name">
  <strong class="user"><em>wbcarts at juno dot com</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#86042"> &para;</a><div class="date" title="2008-09-30 01:23"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom86042">
<div class="phpcode"><code><span class="html">A BIT DILUTED... but it's alright!<br /><br />In the PHP example above, the function foo($obj), will actually create a $foo property to "any object" passed to it - which brings some confusion to me:<br />  $obj = new stdClass();<br />  foo($obj);    // tags on a $foo property to the object<br />                // why is this method here?<br />Furthermore, in OOP, it is not a good idea for "global functions" to operate on an object's properties... and it is not a good idea for your class objects to let them. To illustrate the point, the example should be:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />  protected </span><span class="default">$foo </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br /><br />  public function </span><span class="default">getFoo</span><span class="keyword">() {<br />    return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">;<br />  }<br /><br />  public function </span><span class="default">setFoo</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) {<br />    if(</span><span class="default">$val </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$val </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">) {<br />      </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">= </span><span class="default">$val</span><span class="keyword">;<br />    }<br />  }<br /><br />  public function </span><span class="default">__toString</span><span class="keyword">() {<br />    return </span><span class="string">"A [foo=</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="string">]"</span><span class="keyword">;<br />  }<br />}<br /><br /></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">();<br /></span><span class="default">$b </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">;                        </span><span class="comment">// $a and $b are copies of the same identifier<br />                                // ($a) = ($b) = &lt;id&gt;<br /></span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">setFoo</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br />echo </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">getFoo</span><span class="keyword">() . </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br /><br /></span><span class="default">$c </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">();<br /></span><span class="default">$d </span><span class="keyword">= &amp;</span><span class="default">$c</span><span class="keyword">;                       </span><span class="comment">// $c and $d are references<br />                                // ($c,$d) = &lt;id&gt;<br /></span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">setFoo</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br />echo </span><span class="default">$c </span><span class="keyword">. </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br /><br /></span><span class="default">$e </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">();<br /></span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">setFoo</span><span class="keyword">(</span><span class="default">16</span><span class="keyword">);                 </span><span class="comment">// will be ignored<br /></span><span class="keyword">echo </span><span class="default">$e</span><span class="keyword">;<br /><br /></span><span class="default">?&gt;<br /></span> - - -<br /> 2<br /> A [foo=2]<br /> A [foo=1]<br /> - - -<br />Because the global function foo() has been deleted, class A is more defined, robust and will handle all foo operations... and only for objects of type A. I can now take it for granted and see clearly that your are talking about "A" objects and their references. But it still reminds me too much of cloning and object comparisons, which to me borders on machine-like programming and not object-oriented programming, which is a totally different way to think.</span></code></div>
  </div>
 </div>
  <div class="note" id="109737">  <div class="votes">
    <div id="Vu109737">
    <a href="https://www.php.net/manual/vote-note.php?id=109737&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd109737">
    <a href="https://www.php.net/manual/vote-note.php?id=109737&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V109737" title="59% like this...">
    4
    </div>
  </div>
  <a href="language.oop5.references.php.html#109737" class="name">
  <strong class="user"><em>Jon Whitener</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#109737"> &para;</a><div class="date" title="2012-08-15 01:55"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom109737">
<div class="phpcode"><code><span class="html">The use of clone may get you the behavior you expect when passing an object to a function, as shown below using DateTime objects as examples.<br /><br /><span class="default">&lt;?php<br />date_default_timezone_set</span><span class="keyword">( </span><span class="string">"America/Detroit" </span><span class="keyword">);<br /><br /></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">;<br />echo </span><span class="string">"a = " </span><span class="keyword">. </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-j'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br /><br /></span><span class="comment">// This might not give what you expect...<br /></span><span class="default">$b </span><span class="keyword">= </span><span class="default">upDate</span><span class="keyword">( </span><span class="default">$a </span><span class="keyword">); </span><span class="comment">// a and b both updated<br /></span><span class="keyword">echo </span><span class="string">"a = " </span><span class="keyword">. </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-j'</span><span class="keyword">) . </span><span class="string">", b = " </span><span class="keyword">. </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-j'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br /></span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">( </span><span class="string">"+ 1 day" </span><span class="keyword">); </span><span class="comment">// a and b both modified<br /></span><span class="keyword">echo </span><span class="string">"a = " </span><span class="keyword">. </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-j'</span><span class="keyword">) . </span><span class="string">", b = " </span><span class="keyword">. </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-j'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">; <br /><br /></span><span class="comment">// This might be what you want...<br /></span><span class="default">$c </span><span class="keyword">= </span><span class="default">upDateClone</span><span class="keyword">( </span><span class="default">$a </span><span class="keyword">); </span><span class="comment">// only c updated, a left alone<br /></span><span class="keyword">echo </span><span class="string">"a = " </span><span class="keyword">. </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-j'</span><span class="keyword">) . </span><span class="string">", c = " </span><span class="keyword">. </span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-j'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br /><br />function </span><span class="default">upDate</span><span class="keyword">( </span><span class="default">$datetime </span><span class="keyword">) {<br />    </span><span class="default">$datetime</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">( </span><span class="string">"+ 1 day" </span><span class="keyword">);<br />    return </span><span class="default">$datetime</span><span class="keyword">;<br />}<br /><br />function </span><span class="default">upDateClone</span><span class="keyword">( </span><span class="default">$datetime </span><span class="keyword">) {<br />    </span><span class="default">$dt </span><span class="keyword">= clone </span><span class="default">$datetime</span><span class="keyword">;<br />    </span><span class="default">$dt</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">( </span><span class="string">"+ 1 day" </span><span class="keyword">);<br />    return </span><span class="default">$dt</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span><br />The above would output something like:<br /><br />a = 2012-08-15<br />a = 2012-08-16, b = 2012-08-16<br />a = 2012-08-17, b = 2012-08-17<br />a = 2012-08-17, c = 2012-08-18</span></code></div>
  </div>
 </div>
  <div class="note" id="106643">  <div class="votes">
    <div id="Vu106643">
    <a href="https://www.php.net/manual/vote-note.php?id=106643&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd106643">
    <a href="https://www.php.net/manual/vote-note.php?id=106643&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V106643" title="55% like this...">
    2
    </div>
  </div>
  <a href="language.oop5.references.php.html#106643" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#106643"> &para;</a><div class="date" title="2011-11-23 07:57"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom106643">
<div class="phpcode"><code><span class="html">this example could help:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />    public </span><span class="default">$testA </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />}  <br /><br />class </span><span class="default">B </span><span class="keyword">{<br />    public </span><span class="default">$testB </span><span class="keyword">= </span><span class="string">"class B"</span><span class="keyword">;<br />}  <br /><br /></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">;<br /></span><span class="default">$b </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">;     <br /></span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">testA </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br /><br /></span><span class="default">$c </span><span class="keyword">= new </span><span class="default">B</span><span class="keyword">;<br /></span><span class="default">$a </span><span class="keyword">= </span><span class="default">$c</span><span class="keyword">;<br /><br /></span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">testB </span><span class="keyword">= </span><span class="string">"Changed Class B"</span><span class="keyword">;<br /><br />echo </span><span class="string">"&lt;br/&gt; object a: "</span><span class="keyword">; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />echo </span><span class="string">"&lt;br/&gt; object b: "</span><span class="keyword">; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br />echo </span><span class="string">"&lt;br/&gt; object c: "</span><span class="keyword">; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">);<br /><br /></span><span class="comment">// by reference <br /><br /></span><span class="default">$aa </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">;<br /></span><span class="default">$bb </span><span class="keyword">= &amp;</span><span class="default">$aa</span><span class="keyword">;     <br /></span><span class="default">$bb</span><span class="keyword">-&gt;</span><span class="default">testA </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br /><br /></span><span class="default">$cc </span><span class="keyword">= new </span><span class="default">B</span><span class="keyword">;<br /></span><span class="default">$aa </span><span class="keyword">= </span><span class="default">$cc</span><span class="keyword">;<br /><br /></span><span class="default">$aa</span><span class="keyword">-&gt;</span><span class="default">testB </span><span class="keyword">= </span><span class="string">"Changed Class B"</span><span class="keyword">;<br /><br />echo </span><span class="string">"&lt;br/&gt; object aa: "</span><span class="keyword">; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$aa</span><span class="keyword">);<br />echo </span><span class="string">"&lt;br/&gt; object bb: "</span><span class="keyword">; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$bb</span><span class="keyword">);<br />echo </span><span class="string">"&lt;br/&gt; object cc: "</span><span class="keyword">; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$cc</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="86374">  <div class="votes">
    <div id="Vu86374">
    <a href="https://www.php.net/manual/vote-note.php?id=86374&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd86374">
    <a href="https://www.php.net/manual/vote-note.php?id=86374&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V86374" title="54% like this...">
    4
    </div>
  </div>
  <a href="language.oop5.references.php.html#86374" class="name">
  <strong class="user"><em>Ivan Bertona</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#86374"> &para;</a><div class="date" title="2008-10-15 08:45"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom86374">
<div class="phpcode"><code><span class="html">A point that in my opinion is not stressed enough in the manual page is that in PHP5, passing an object as an argument of a function call with no use of the &amp; operator means passing BY VALUE an unique identifier for that object (intended as instance of a class), which will be stored in another variable that has function scope.<br /><br />This behaviour is the same used in Java, where indeed there is no notion of passing arguments by reference. On the other hand, in PHP you can pass a value by reference (in PHP we refer to references as "aliases"), and this poses a threat if you are not aware of what you are really doing. Please consider these two classes:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">A <br /></span><span class="keyword">{<br />    function </span><span class="default">__toString</span><span class="keyword">() {<br />        return </span><span class="string">"Class A"</span><span class="keyword">;<br />    }<br />}<br />    <br />class </span><span class="default">B<br /></span><span class="keyword">{<br />    function </span><span class="default">__toString</span><span class="keyword">() {<br />        return </span><span class="string">"Class B"</span><span class="keyword">;<br />    }<br />}<br /></span><span class="default">?&gt;<br /></span><br />In the first test case we make two objects out of the classes A and B, then swap the variables using a temp one and the normal assignment operator (=).<br /><br /><span class="default">&lt;?php<br />$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">();<br /></span><span class="default">$b </span><span class="keyword">= new </span><span class="default">B</span><span class="keyword">();<br />    <br /></span><span class="default">$temp </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">;<br /></span><span class="default">$a </span><span class="keyword">= </span><span class="default">$b</span><span class="keyword">;<br /></span><span class="default">$b </span><span class="keyword">= </span><span class="default">$temp</span><span class="keyword">;<br />    <br />print(</span><span class="string">'$a: ' </span><span class="keyword">. </span><span class="default">$a </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">);<br />print(</span><span class="string">'$b: ' </span><span class="keyword">. </span><span class="default">$b </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />As expected the script will output:<br /><br />$a: Class B<br />$b: Class A<br /><br />Now consider the following snippet. It is similar to the former but the assignment $a = &amp;$b makes $a an ALIAS of $b.<br /><br /><span class="default">&lt;?php<br />$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">();<br /></span><span class="default">$b </span><span class="keyword">= new </span><span class="default">B</span><span class="keyword">();<br />    <br /></span><span class="default">$temp </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">;<br /></span><span class="default">$a </span><span class="keyword">= &amp;</span><span class="default">$b</span><span class="keyword">;<br /></span><span class="default">$b </span><span class="keyword">= </span><span class="default">$temp</span><span class="keyword">;<br />    <br />print(</span><span class="string">'$a: ' </span><span class="keyword">. </span><span class="default">$a </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">);<br />print(</span><span class="string">'$b: ' </span><span class="keyword">. </span><span class="default">$b </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />This script will output:<br /><br />$a: Class A<br />$b: Class A<br /><br />That is, modifying $b reflects the same assignment on $a... The two variables end pointing to the same object, and the other one is lost. To sum up is a good practice NOT using aliasing when handling PHP5 objects, unless your are really really sure of what you are doing.</span></code></div>
  </div>
 </div>
  <div class="note" id="112285">  <div class="votes">
    <div id="Vu112285">
    <a href="https://www.php.net/manual/vote-note.php?id=112285&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd112285">
    <a href="https://www.php.net/manual/vote-note.php?id=112285&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V112285" title="50% like this...">
    0
    </div>
  </div>
  <a href="language.oop5.references.php.html#112285" class="name">
  <strong class="user"><em>cesoid at gmail dot com</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#112285"> &para;</a><div class="date" title="2013-05-27 04:45"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom112285">
<div class="phpcode"><code><span class="html">Comparing an alias to a pointer is like comparing a spoken word to the neurochemistry of the speaker. You know that the speaker can use two different words to refer to the same thing, but what's going on in their brain to make this work is something you don't want to have to think about every time they speak. (If you're programming in assembly or, less so, in C++, you're out of luck there.)<br /><br />Likewise, PHP *the language* and a given php interpretor are not the same thing, and this post and most of these comments leave that out in the explanation. An alias/reference is a part of the language, a pointer is a part of how the computer makes the reference work. You often have little guarantee that an interpreter will continue working the same way internally.<br /><br />From a functional point of view the internals of the interpreter *do* matter for optimization, but *don't* matter in terms of the end result of the program. A higher level programming language such as PHP is supposed to try to hide such details from the programmer so that they can write clearer, more manageable code, and do it quickly.<br /><br />Unfortunately, years ago, using pass-by-reference a lot actually was very useful in terms of optimizing. Fortunately, that ended years ago, so now we no longer need to perform a reference assignment and hope that we remember not to change one variable when the other one is supposed to stay the same. By the time you read this the php that is sending these words to you may be running on a server that uses some kind of new exotic technology for which the word "pointer" no longer accurately describes anything, because the server stores both the program state and instructions intermingled in non-sequential atoms bonded into molecules which work by randomly bouncing off each other at high speeds, thereby exchanging atoms and crossbreeding their instructions and information in such a way as to, in aggregate, successfully run php 5 code. But the code itself will still have references that work the same way they did before, and you will therefore not have to think about whether the machine I just described makes any sense at all.</span></code></div>
  </div>
 </div>
  <div class="note" id="97052">  <div class="votes">
    <div id="Vu97052">
    <a href="https://www.php.net/manual/vote-note.php?id=97052&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd97052">
    <a href="https://www.php.net/manual/vote-note.php?id=97052&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V97052" title="50% like this...">
    0
    </div>
  </div>
  <a href="language.oop5.references.php.html#97052" class="name">
  <strong class="user"><em>Hayley Watson</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#97052"> &para;</a><div class="date" title="2010-03-29 07:21"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom97052">
<div class="phpcode"><code><span class="html">Using &amp;$this can result in some weird and counter-intuitive behaviour - it starts lying to you.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">class </span><span class="default">Bar<br /></span><span class="keyword">{<br />    public </span><span class="default">$prop </span><span class="keyword">= </span><span class="default">42</span><span class="keyword">;<br />}<br /><br />class </span><span class="default">Foo<br /></span><span class="keyword">{<br />    public </span><span class="default">$prop </span><span class="keyword">= </span><span class="default">17</span><span class="keyword">;<br />    function </span><span class="default">boom</span><span class="keyword">()<br />    {<br />        </span><span class="default">$bar </span><span class="keyword">= &amp;</span><span class="default">$this</span><span class="keyword">;<br />        echo </span><span class="string">"\$bar is an alias of \$this, a Foo.\n"</span><span class="keyword">;<br />        echo </span><span class="string">'$this is a '</span><span class="keyword">, </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">), </span><span class="string">'; $bar is a '</span><span class="keyword">, </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$bar</span><span class="keyword">), </span><span class="string">"\n"</span><span class="keyword">;<br /><br />        echo </span><span class="string">"Are they the same object? "</span><span class="keyword">, (</span><span class="default">$bar </span><span class="keyword">=== </span><span class="default">$this </span><span class="keyword">? </span><span class="string">"Yes\n" </span><span class="keyword">: </span><span class="string">"No\n"</span><span class="keyword">);<br />        echo </span><span class="string">"Are they equal? "</span><span class="keyword">, (</span><span class="default">$bar </span><span class="keyword">=== </span><span class="default">$this </span><span class="keyword">? </span><span class="string">"Yes\n" </span><span class="keyword">: </span><span class="string">"No\n"</span><span class="keyword">);<br />        echo </span><span class="string">'$this says its prop value is '</span><span class="keyword">;<br />        echo </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">prop</span><span class="keyword">;<br />        echo </span><span class="string">' and $bar says it is '</span><span class="keyword">;<br />        echo </span><span class="default">$bar</span><span class="keyword">-&gt;</span><span class="default">prop</span><span class="keyword">;<br />        echo </span><span class="string">"\n"</span><span class="keyword">;<br /><br />        echo </span><span class="string">"\n"</span><span class="keyword">;<br /><br />        </span><span class="default">$bar </span><span class="keyword">= new </span><span class="default">Bar</span><span class="keyword">;<br />        echo </span><span class="string">"\$bar has been made into a new Bar.\n"</span><span class="keyword">;<br />        echo </span><span class="string">'$this is a '</span><span class="keyword">, </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">), </span><span class="string">'; $bar is a '</span><span class="keyword">, </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$bar</span><span class="keyword">), </span><span class="string">"\n"</span><span class="keyword">;<br /><br />        echo </span><span class="string">"Are they the same object? "</span><span class="keyword">, (</span><span class="default">$bar </span><span class="keyword">=== </span><span class="default">$this </span><span class="keyword">? </span><span class="string">"Yes\n" </span><span class="keyword">: </span><span class="string">"No\n"</span><span class="keyword">);<br />        echo </span><span class="string">"Are they equal? "</span><span class="keyword">, (</span><span class="default">$bar </span><span class="keyword">=== </span><span class="default">$this </span><span class="keyword">? </span><span class="string">"Yes\n" </span><span class="keyword">: </span><span class="string">"No\n"</span><span class="keyword">);<br />        echo </span><span class="string">'$this says its prop value is '</span><span class="keyword">;<br />        echo </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">prop</span><span class="keyword">;<br />        echo </span><span class="string">' and $bar says it is '</span><span class="keyword">;<br />        echo </span><span class="default">$bar</span><span class="keyword">-&gt;</span><span class="default">prop</span><span class="keyword">;<br />        echo </span><span class="string">"\n"</span><span class="keyword">;<br /><br />    }<br />}<br /><br /></span><span class="default">$t </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">;<br /></span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">boom</span><span class="keyword">();<br /></span><span class="default">?&gt;<br /></span>In the above $this claims to be a Bar (in fact it claims to be the very same object that $bar is), while still having all the properties and methods of a Foo.<br /><br />Fortunately it doesn't persist beyond the method where you committed the faux pas.<br /><span class="default">&lt;?php<br /></span><span class="keyword">echo </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">), </span><span class="string">"\t"</span><span class="keyword">, </span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">prop</span><span class="keyword">;<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="102242">  <div class="votes">
    <div id="Vu102242">
    <a href="https://www.php.net/manual/vote-note.php?id=102242&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd102242">
    <a href="https://www.php.net/manual/vote-note.php?id=102242&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V102242" title="42% like this...">
    -4
    </div>
  </div>
  <a href="language.oop5.references.php.html#102242" class="name">
  <strong class="user"><em>Rob Marscher</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#102242"> &para;</a><div class="date" title="2011-02-03 09:33"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom102242">
<div class="phpcode"><code><span class="html">Here's an example I created that helped me understand the difference between passing objects by reference and by value in php 5.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />    public </span><span class="default">$foo </span><span class="keyword">= </span><span class="string">'empty'</span><span class="keyword">;<br />}<br />class </span><span class="default">B </span><span class="keyword">{<br />    public </span><span class="default">$foo </span><span class="keyword">= </span><span class="string">'empty'</span><span class="keyword">;<br />    public </span><span class="default">$bar </span><span class="keyword">= </span><span class="string">'hello'</span><span class="keyword">;<br />}<br /><br />function </span><span class="default">normalAssignment</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) {<br />    </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">= </span><span class="string">'changed'</span><span class="keyword">;<br />    </span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">B</span><span class="keyword">;<br />}<br /><br />function </span><span class="default">referenceAssignment</span><span class="keyword">(&amp;</span><span class="default">$obj</span><span class="keyword">) {<br />    </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">= </span><span class="string">'changed'</span><span class="keyword">;<br />    </span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">B</span><span class="keyword">;<br />}<br /><br /></span><span class="default">$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">;<br /></span><span class="default">normalAssignment</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />echo </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">), </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"foo = </span><span class="keyword">{</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">}</span><span class="string">\n"</span><span class="keyword">;<br /><br /></span><span class="default">referenceAssignment</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />echo </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">), </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"foo = </span><span class="keyword">{</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">}</span><span class="string">\n"</span><span class="keyword">;<br />echo </span><span class="string">"bar = </span><span class="keyword">{</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">bar</span><span class="keyword">}</span><span class="string">\n"</span><span class="keyword">;<br /><br /></span><span class="comment">/*<br />prints:<br />A<br />foo = changed<br />B<br />foo = empty<br />bar = hello<br />*/<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="113103">  <div class="votes">
    <div id="Vu113103">
    <a href="https://www.php.net/manual/vote-note.php?id=113103&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd113103">
    <a href="https://www.php.net/manual/vote-note.php?id=113103&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V113103" title="38% like this...">
    -5
    </div>
  </div>
  <a href="language.oop5.references.php.html#113103" class="name">
  <strong class="user"><em>akam at akameng dot com</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#113103"> &para;</a><div class="date" title="2013-08-29 09:30"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom113103">
<div class="phpcode"><code><span class="html">Object is being referenced even after the original object deleted, so be careful when copying objects into your array. <br /><br /><span class="default">&lt;?php<br />$result </span><span class="keyword">= </span><span class="default">json_decode</span><span class="keyword">(</span><span class="string">' {"1":1377809496,"2":1377813096}'</span><span class="keyword">);<br /></span><span class="default">$copy1</span><span class="keyword">[</span><span class="string">'object'</span><span class="keyword">] = </span><span class="default">$result</span><span class="keyword">;<br /></span><span class="default">$copy2</span><span class="keyword">[</span><span class="string">'object'</span><span class="keyword">] = </span><span class="default">$result</span><span class="keyword">;<br /><br />unset(</span><span class="default">$result</span><span class="keyword">);<br /><br /></span><span class="comment">//now lets change $copy1['object'][1] to 'test';<br /></span><span class="default">$copy1</span><span class="keyword">[</span><span class="string">'object'</span><span class="keyword">]-&gt;{</span><span class="string">"1"</span><span class="keyword">} = </span><span class="string">'test'</span><span class="keyword">;<br /><br />echo (</span><span class="default">$copy1 </span><span class="keyword">=== </span><span class="default">$copy2</span><span class="keyword">) ? </span><span class="string">"Yes" </span><span class="keyword">: </span><span class="string">"No"</span><span class="keyword">;<br /></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$copy2</span><span class="keyword">);<br /></span><span class="comment">/*<br />Array<br />(<br />    [API] =&gt; stdClass Object<br />        (<br />            [1] =&gt; test<br />            [2] =&gt; 1377813096<br />        )<br /><br />)<br />*/<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="86050">  <div class="votes">
    <div id="Vu86050">
    <a href="https://www.php.net/manual/vote-note.php?id=86050&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd86050">
    <a href="https://www.php.net/manual/vote-note.php?id=86050&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V86050" title="38% like this...">
    -4
    </div>
  </div>
  <a href="language.oop5.references.php.html#86050" class="name">
  <strong class="user"><em>lazybones_senior</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#86050"> &para;</a><div class="date" title="2008-09-30 06:57"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom86050">
<div class="phpcode"><code><span class="html">WHOA... KEEP IT SIMPLE!<br /><br />In regards to secure_admin's note: You've used OOP to simplify PHP's ability to create and use object references. Now use PHP's static keyword to simplify your OOP.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">class </span><span class="default">DataModelControl </span><span class="keyword">{<br />  protected static </span><span class="default">$data </span><span class="keyword">= </span><span class="default">256</span><span class="keyword">; </span><span class="comment">// default value; <br />  </span><span class="keyword">protected </span><span class="default">$name</span><span class="keyword">;<br /><br />  public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$dmcName</span><span class="keyword">) {<br />    </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="default">$dmcName</span><span class="keyword">;<br />  }<br /><br />  public static function </span><span class="default">setData</span><span class="keyword">(</span><span class="default">$dmcData</span><span class="keyword">) {<br />    if(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$dmcData</span><span class="keyword">)) {<br />      </span><span class="default">self</span><span class="keyword">::</span><span class="default">$data </span><span class="keyword">= </span><span class="default">$dmcData</span><span class="keyword">;<br />    }<br />  }<br /><br />  public function </span><span class="default">__toString</span><span class="keyword">() {<br />    return </span><span class="string">"DataModelControl [name=</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="string">, data=" </span><span class="keyword">. </span><span class="default">self</span><span class="keyword">::</span><span class="default">$data </span><span class="keyword">. </span><span class="string">"]"</span><span class="keyword">;<br />  }   <br />}<br /><br /></span><span class="comment"># create several instances of DataModelControl...<br /></span><span class="default">$dmc1 </span><span class="keyword">= new </span><span class="default">DataModelControl</span><span class="keyword">(</span><span class="string">'dmc1'</span><span class="keyword">);<br /></span><span class="default">$dmc2 </span><span class="keyword">= new </span><span class="default">DataModelControl</span><span class="keyword">(</span><span class="string">'dmc2'</span><span class="keyword">);<br /></span><span class="default">$dmc3 </span><span class="keyword">= new </span><span class="default">DataModelControl</span><span class="keyword">(</span><span class="string">'dmc3'</span><span class="keyword">);<br />echo </span><span class="default">$dmc1 </span><span class="keyword">. </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />echo </span><span class="default">$dmc2 </span><span class="keyword">. </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />echo </span><span class="default">$dmc3 </span><span class="keyword">. </span><span class="string">'&lt;br&gt;&lt;br&gt;'</span><span class="keyword">;<br /><br /></span><span class="comment"># To change data, use any DataModelControl object...<br /></span><span class="default">$dmc2</span><span class="keyword">-&gt;</span><span class="default">setData</span><span class="keyword">(</span><span class="default">512</span><span class="keyword">);<br /></span><span class="comment"># Or, call setData() directly from the class...<br /></span><span class="default">DataModelControl</span><span class="keyword">::</span><span class="default">setData</span><span class="keyword">(</span><span class="default">1024</span><span class="keyword">);<br />echo </span><span class="default">$dmc1 </span><span class="keyword">. </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />echo </span><span class="default">$dmc2 </span><span class="keyword">. </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />echo </span><span class="default">$dmc3 </span><span class="keyword">. </span><span class="string">'&lt;br&gt;&lt;br&gt;'</span><span class="keyword">;<br /></span><span class="default">?&gt;<br /></span><br /> DataModelControl [name=dmc1, data=256]<br /> DataModelControl [name=dmc2, data=256]<br /> DataModelControl [name=dmc3, data=256]<br /><br /> DataModelControl [name=dmc1, data=1024]<br /> DataModelControl [name=dmc2, data=1024]<br /> DataModelControl [name=dmc3, data=1024]<br /><br />... even better! Now, PHP creates one copy of $data, that is shared amongst all DataModelControl objects.</span></code></div>
  </div>
 </div>
  <div class="note" id="123644">  <div class="votes">
    <div id="Vu123644">
    <a href="https://www.php.net/manual/vote-note.php?id=123644&amp;page=language.oop5.references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123644">
    <a href="https://www.php.net/manual/vote-note.php?id=123644&amp;page=language.oop5.references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123644" title="33% like this...">
    -2
    </div>
  </div>
  <a href="language.oop5.references.php.html#123644" class="name">
  <strong class="user"><em>Joe F</em></strong></a><a class="genanchor" href="language.oop5.references.php.html#123644"> &para;</a><div class="date" title="2019-03-01 01:38"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom123644">
<div class="phpcode"><code><span class="html">I am planning to serialize and unserialize objects as a means of storage, and my application can conveniently group large numbers of objects inside of a single object to serialize. However, this presented some questions that I needed to answer:<br /><br />Let's say the parent object I plan to serialize is "A" and the objects I store in it will be A(a-z). If I pass A(b) to A(c), this happens by reference. So if A(c) takes actions that effect the values of A(b), this will also update the original A(b) stored in A. Great!<br /><br />However, what happens when I serialize A, where A(c) has a reference to A(b), and then I unserialize? Will A(c) have a new unique copy of A(b), or will it still reference the A(b) stored in A?<br /><br />The answer is, PHP 5.5 and PHP 7 both track whether something is a reference to an object it's already "recreated" during the unserialize process, see this example:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">class </span><span class="default">foo </span><span class="keyword">{<br />    protected </span><span class="default">$stored_object</span><span class="keyword">;<br />    protected </span><span class="default">$stored_object2</span><span class="keyword">;<br />    protected </span><span class="default">$stored_value</span><span class="keyword">;<br />    <br />    public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$stored_value</span><span class="keyword">) {<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">store_value</span><span class="keyword">(</span><span class="default">$stored_value</span><span class="keyword">);<br />        echo </span><span class="string">'Constructed: '</span><span class="keyword">.</span><span class="default">$name</span><span class="keyword">.</span><span class="string">' =&gt; '</span><span class="keyword">.</span><span class="default">$stored_value</span><span class="keyword">.</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;<br />    }<br />    <br />    public function </span><span class="default">store_object</span><span class="keyword">(</span><span class="default">foo $object</span><span class="keyword">) {<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">stored_object </span><span class="keyword">= </span><span class="default">$object</span><span class="keyword">;<br />    }<br />    <br />    public function </span><span class="default">store_object2</span><span class="keyword">(</span><span class="default">foo $object</span><span class="keyword">) {<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">stored_object2 </span><span class="keyword">= </span><span class="default">$object</span><span class="keyword">;<br />    }<br />    <br />    public function </span><span class="default">store_value</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) {<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">stored_value </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">;<br />    }<br />    <br />    public function </span><span class="default">stored_method</span><span class="keyword">(</span><span class="default">$method</span><span class="keyword">, array </span><span class="default">$parameters</span><span class="keyword">) {<br />        echo </span><span class="string">'Call stored method: '</span><span class="keyword">.</span><span class="default">$method</span><span class="keyword">.</span><span class="string">'{ &lt;br/&gt;'</span><span class="keyword">;<br />        </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">stored_object</span><span class="keyword">, </span><span class="default">$method</span><span class="keyword">), </span><span class="default">$parameters</span><span class="keyword">);<br />        echo </span><span class="string">'} &lt;br/&gt;'</span><span class="keyword">;<br />    }<br />    <br />    public function </span><span class="default">stored_method2</span><span class="keyword">(</span><span class="default">$method</span><span class="keyword">, array </span><span class="default">$parameters</span><span class="keyword">) {<br />        echo </span><span class="string">'Call stored method 2: '</span><span class="keyword">.</span><span class="default">$method</span><span class="keyword">.</span><span class="string">'{ &lt;br/&gt;'</span><span class="keyword">;<br />        </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">stored_object2</span><span class="keyword">, </span><span class="default">$method</span><span class="keyword">), </span><span class="default">$parameters</span><span class="keyword">);<br />        echo </span><span class="string">'} &lt;br/&gt;'</span><span class="keyword">;<br />    }<br />    <br />    public function </span><span class="default">echo_value</span><span class="keyword">() {<br />        echo </span><span class="string">'Value: '</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">stored_value</span><span class="keyword">.</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;<br />    }<br />}<br /><br /></span><span class="default">$foo </span><span class="keyword">= new </span><span class="default">foo</span><span class="keyword">(</span><span class="string">'foo'</span><span class="keyword">, </span><span class="string">'Hello!'</span><span class="keyword">); </span><span class="comment">// Constructed: foo =&gt; Hello!<br /></span><span class="default">$new_foo </span><span class="keyword">= new </span><span class="default">foo</span><span class="keyword">(</span><span class="string">'new_foo'</span><span class="keyword">, </span><span class="string">'New Foo 2!'</span><span class="keyword">); </span><span class="comment">// Constructed: new_foo =&gt; New Foo 2!<br /></span><span class="default">$third_foo </span><span class="keyword">= new </span><span class="default">foo</span><span class="keyword">(</span><span class="string">'third_foo'</span><span class="keyword">, </span><span class="string">'Final Foo!'</span><span class="keyword">); </span><span class="comment">// Constructed: third_foo =&gt; Final Foo!<br /><br /></span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">store_object</span><span class="keyword">(</span><span class="default">$new_foo</span><span class="keyword">); <br /></span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">store_object2</span><span class="keyword">(</span><span class="default">$third_foo</span><span class="keyword">);<br /></span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">stored_method</span><span class="keyword">(</span><span class="string">'store_object'</span><span class="keyword">, array(</span><span class="default">$third_foo</span><span class="keyword">)); </span><span class="comment">//Call stored method: store_object{ }<br /><br /></span><span class="default">$serialized </span><span class="keyword">= </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">);<br />unset(</span><span class="default">$foo</span><span class="keyword">);<br />unset(</span><span class="default">$new_foo</span><span class="keyword">);<br />unset(</span><span class="default">$third_foo</span><span class="keyword">);<br /></span><span class="default">$unserialized_foo </span><span class="keyword">= </span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">$serialized</span><span class="keyword">);<br /><br /></span><span class="comment">//Below, I update the object represented as A(c) but I update it via the A object<br /></span><span class="default">$unserialized_foo</span><span class="keyword">-&gt;</span><span class="default">stored_method2</span><span class="keyword">(</span><span class="string">'store_value'</span><span class="keyword">, array(</span><span class="string">'Super Last Foo!'</span><span class="keyword">)); </span><span class="comment">// Call stored method 2: store_value{}<br /></span><span class="default">$unserialized_foo</span><span class="keyword">-&gt;</span><span class="default">echo_value</span><span class="keyword">(); </span><span class="comment">// Value: Hello!<br /></span><span class="default">$unserialized_foo</span><span class="keyword">-&gt;</span><span class="default">stored_method</span><span class="keyword">(</span><span class="string">'echo_value'</span><span class="keyword">, array());<br /></span><span class="comment">//Call stored method: echo_value{ <br />//Value: New Foo 2!<br />//}<br /><br />// Last, I check the value of A(c) as it was stored in A(b) to see if updating A(c) via A also updates A(b)'s copy/reference:<br /></span><span class="default">$unserialized_foo</span><span class="keyword">-&gt;</span><span class="default">stored_method</span><span class="keyword">(</span><span class="string">'stored_method'</span><span class="keyword">, array(</span><span class="string">'echo_value'</span><span class="keyword">, array()));<br /></span><span class="comment">//Call stored method: stored_method{ <br />//Call stored method: echo_value{ <br />//Value: Super Last Foo!<br />//}<br />//}<br /></span><span class="default">?&gt;<br /></span><br />Per the last line, A(b)'s "copy" of A(c) is still a reference to the original A(b) as stored in A, even after unserializing.</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=language.oop5.references&amp;redirect=https://www.php.net/manual/ru/language.oop5.references.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="language.oop5.php.html">Классы и объекты</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="oop5.intro.php.html" title="Введение">Введение</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.basic.php.html" title="Основы">Основы</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.properties.php.html" title="Свойства">Свойства</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.constants.php.html" title="Константы классов">Константы классов</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.autoload.php.html" title="Автоматическая загрузка классов">Автоматическая загрузка классов</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.decon.php.html" title="Конструкторы и деструкторы">Конструкторы и деструкторы</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.visibility.php.html" title="Область видимости">Область видимости</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.inheritance.php.html" title="Наследование">Наследование</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.paamayim-nekudotayim.php.html" title="Оператор разрешения области видимости (::)">Оператор разрешения области видимости (::)</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.static.php.html" title="Ключевое слово static">Ключевое слово static</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.abstract.php.html" title="Абстрактные классы">Абстрактные классы</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.interfaces.php.html" title="Интерфейсы объектов">Интерфейсы объектов</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.traits.php.html" title="Трейты">Трейты</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.anonymous.php.html" title="Анонимные классы">Анонимные классы</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.overloading.php.html" title="Перегрузка">Перегрузка</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.iterations.php.html" title="Итераторы объектов">Итераторы объектов</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.magic.php.html" title="Магические методы">Магические методы</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.final.php.html" title="Ключевое слово final">Ключевое слово final</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.cloning.php.html" title="Клонирование объектов">Клонирование объектов</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.object-comparison.php.html" title="Сравнение объектов">Сравнение объектов</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.late-static-bindings.php.html" title="Позднее статическое связывание">Позднее статическое связывание</a>
                        </li>
                                                <li class="current">
                            <a href="language.oop5.references.php.html" title="Объекты и ссылки">Объекты и ссылки</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.serialization.php.html" title="Сериализация объектов">Сериализация объектов</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.variance.php.html" title="Ковариантность и контравариантность">Ковариантность и контравариантность</a>
                        </li>
                                                <li class="">
                            <a href="language.oop5.changelog.php.html" title="Журнал изменений ООП">Журнал изменений ООП</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
