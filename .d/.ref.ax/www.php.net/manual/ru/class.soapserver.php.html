<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: SoapServer - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="class.soapserver.php.html">
 <link rel="shorturl" href="https://www.php.net/soapserver">
 <link rel="alternate" href="https://www.php.net/soapserver" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="book.soap.php.html">
 <link rel="prev" href="soapclient.soapcall.php.html">
 <link rel="next" href="soapserver.addfunction.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/class.soapserver.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/class.soapserver.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/class.soapserver.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/class.soapserver.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/class.soapserver.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/class.soapserver.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/class.soapserver.php" hreflang="pt_BR">
 <link rel="alternate" href="class.soapserver.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/class.soapserver.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/class.soapserver.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="soapserver.addfunction.php.html">
          SoapServer::addFunction &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="soapclient.soapcall.php.html">
          &laquo; SoapClient::__soapCall        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.webservice.php.html'>Веб-сервисы</a></li>      <li><a href='book.soap.php.html'>SOAP</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/class.soapserver.php'>English</option>
            <option value='de/class.soapserver.php'>German</option>
            <option value='es/class.soapserver.php'>Spanish</option>
            <option value='fr/class.soapserver.php'>French</option>
            <option value='it/class.soapserver.php'>Italian</option>
            <option value='ja/class.soapserver.php'>Japanese</option>
            <option value='pt_BR/class.soapserver.php'>Brazilian Portuguese</option>
            <option value='ru/class.soapserver.php' selected="selected">Russian</option>
            <option value='tr/class.soapserver.php'>Turkish</option>
            <option value='zh/class.soapserver.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/soap/soapserver.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Fclass.soapserver%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="class.soapserver" class="reference">

 <h1 class="title">Класс SoapServer</h1>
 

 <div class="partintro"><p class="verinfo">(PHP 5, PHP 7, PHP 8)</p>


  <div class="section" id="soapserver.intro">
   <h2 class="title">Введение</h2>
   <p class="para">
    Класс SoapServer представляет собой сервер для протоколов <a href="http://www.w3.org/TR/soap11/" class="link external">&raquo;&nbsp;SOAP 1.1</a> и <a href="http://www.w3.org/TR/soap12/" class="link external">&raquo;&nbsp;SOAP 1.2</a>. Его можно использовать с описанием службы WSDL или без него.
   </p>
  </div>


  <div class="section" id="soapserver.synopsis">
   <h2 class="title">Обзор классов</h2>

   
   <div class="classsynopsis"><div class="classsynopsisinfo">
    
     <span class="modifier">class</span> <strong class="classname"><strong class="classname">SoapServer</strong></strong>
     {</div>

    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Свойства */</div>
    <div class="fieldsynopsis">
     <span class="modifier">private</span>
     <span class="type">?</span><span class="type"><span class="type"><a href="class.soapfault.php.html" class="type SoapFault">SoapFault</a></span><span class="type"></span></span>
      <var class="varname"><a href="class.soapserver.php.html#soapserver.props.--soap-fault">$<var class="varname">__soap_fault</var></a></var><span class="initializer"> = null</span>;</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Методы */</div>
    <div class="constructorsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><a href="soapserver.construct.php.html" class="methodname">__construct</a></span>(<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$wsdl</code></span>, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = []</span></span>)</div>

    <div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="soapserver.addfunction.php.html" class="methodname">addFunction</a></span>(<span class="methodparam"><span class="type"><span class="type">array</span>|<span class="type">string</span>|<span class="type">int</span></span> <code class="parameter">$functions</code></span>): <span class="type"><span class="type void">void</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="soapserver.addsoapheader.php.html" class="methodname">addSoapHeader</a></span>(<span class="methodparam"><span class="type"><a href="class.soapheader.php.html" class="type SoapHeader">SoapHeader</a></span> <code class="parameter">$header</code></span>): <span class="type"><span class="type void">void</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="soapserver.fault.php.html" class="methodname">fault</a></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$code</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$actor</code><span class="initializer"> = &quot;&quot;</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.declarations.php.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$details</code><span class="initializer"> = <strong><code>null</code></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code><span class="initializer"> = &quot;&quot;</span></span><br>): <span class="type"><span class="type void">void</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="soapserver.getfunctions.php.html" class="methodname">getFunctions</a></span>(): <span class="type">array</span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="soapserver.handle.php.html" class="methodname">handle</a></span>(<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$request</code><span class="initializer"> = <strong><code>null</code></strong></span></span>): <span class="type"><span class="type void">void</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="soapserver.setclass.php.html" class="methodname">setClass</a></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$class</code></span>, <span class="methodparam"><span class="type"><a href="language.types.declarations.php.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">...$args</code></span>): <span class="type"><span class="type void">void</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="soapserver.setobject.php.html" class="methodname">setObject</a></span>(<span class="methodparam"><span class="type">object</span> <code class="parameter">$object</code></span>): <span class="type"><span class="type void">void</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="soapserver.setpersistence.php.html" class="methodname">setPersistence</a></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$mode</code></span>): <span class="type"><span class="type void">void</span></span></div>

   }</div>
   
  </div>

  <div class="section" id="soapserver.props">
   <h2 class="title">Свойства</h2>
   <dl>
    
     <dt id="soapserver.props.service"><var class="varname">service</var></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
    
     <dt id="soapserver.props.--soap-fault"><var class="varname">__soap_fault</var></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
   </dl>

  </div>

 </div>

 























































<h2>Содержание</h2><ul class="chunklist chunklist_reference"><li><a href="soapserver.addfunction.php.html">SoapServer::addFunction</a> — Добавляет одну или несколько функций для обработки запросов SOAP</li><li><a href="soapserver.addsoapheader.php.html">SoapServer::addSoapHeader</a> — Добавить заголовок SOAP в ответ</li><li><a href="soapserver.construct.php.html">SoapServer::__construct</a> — Конструктор SoapServer</li><li><a href="soapserver.fault.php.html">SoapServer::fault</a> — Вынуждает SoapServer вернуть ошибку</li><li><a href="soapserver.getfunctions.php.html">SoapServer::getFunctions</a> — Вернуть список определённых функций</li><li><a href="soapserver.handle.php.html">SoapServer::handle</a> — Обработка SOAP-запроса</li><li><a href="soapserver.setclass.php.html">SoapServer::setClass</a> — Устанавливает класс, который обрабатывает SOAP-запросы</li><li><a href="soapserver.setobject.php.html">SoapServer::setObject</a> — Устанавливает объект, который будет использоваться для обработки SOAP-запросов</li><li><a href="soapserver.setpersistence.php.html">SoapServer::setPersistence</a> — Устанавливает режим сохранения SoapServer</li></ul>
</div>
<section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=class.soapserver&amp;redirect=https://www.php.net/manual/ru/class.soapserver.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">10 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="105448">  <div class="votes">
    <div id="Vu105448">
    <a href="https://www.php.net/manual/vote-note.php?id=105448&amp;page=class.soapserver&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd105448">
    <a href="https://www.php.net/manual/vote-note.php?id=105448&amp;page=class.soapserver&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V105448" title="59% like this...">
    25
    </div>
  </div>
  <a href="class.soapserver.php.html#105448" class="name">
  <strong class="user"><em>php1221 at klox dot net</em></strong></a><a class="genanchor" href="class.soapserver.php.html#105448"> &para;</a><div class="date" title="2011-08-18 01:39"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom105448">
<div class="phpcode"><code><span class="html">While there are plenty of mentions online that SoapServer doesn't support SOAP Headers, this isn't true.<br /><br />In your class, if you declare a function with the name of the header, the function will be called when that header is received.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">MySoapService </span><span class="keyword">{<br />  private </span><span class="default">$user_is_valid</span><span class="keyword">;<br /><br />  function </span><span class="default">MyHeader</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">) {<br />    if ((isset(</span><span class="default">$header</span><span class="keyword">-&gt;</span><span class="default">Username</span><span class="keyword">)) &amp;&amp; (isset(</span><span class="default">$header</span><span class="keyword">-&gt;</span><span class="default">Password</span><span class="keyword">))) {<br />      if (</span><span class="default">ValidateUser</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">-&gt;</span><span class="default">Username</span><span class="keyword">, </span><span class="default">$header</span><span class="keyword">-&gt;</span><span class="default">Password</span><span class="keyword">)) {<br />        </span><span class="default">$user_is_valid </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />      }<br />    }<br />  }<br /><br />  function </span><span class="default">MySoapRequest</span><span class="keyword">(</span><span class="default">$request</span><span class="keyword">) {<br />    if (</span><span class="default">$user_is_valid</span><span class="keyword">) {<br />      </span><span class="comment">// process request<br />    </span><span class="keyword">}<br />    else {<br />      throw new </span><span class="default">MyFault</span><span class="keyword">(</span><span class="string">"MySoapRequest"</span><span class="keyword">, </span><span class="string">"User not valid."</span><span class="keyword">);<br />    }<br />  }<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="123592">  <div class="votes">
    <div id="Vu123592">
    <a href="https://www.php.net/manual/vote-note.php?id=123592&amp;page=class.soapserver&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123592">
    <a href="https://www.php.net/manual/vote-note.php?id=123592&amp;page=class.soapserver&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123592" title="68% like this...">
    11
    </div>
  </div>
  <a href="class.soapserver.php.html#123592" class="name">
  <strong class="user"><em>mail at borisd dot ru</em></strong></a><a class="genanchor" href="class.soapserver.php.html#123592"> &para;</a><div class="date" title="2019-02-08 12:43"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom123592">
<div class="phpcode"><code><span class="html">If you want to run dummy SoapServer as a daemon for tests on linux, you need to:<br /><br />1. Set up location "localhost:12312/soapServer.php" in your wsdl like:<br /><br />&lt;wsdl:service name="ServiceName"&gt;<br />        &lt;wsdl:port name="ServiceNamePort" binding="tns:ServiceNameBinding"&gt;<br />            &lt;soap:address location="<a href="http://localhost:12312/soapServer.php" rel="nofollow" target="_blank">http://localhost:12312/soapServer.php</a>" /&gt;<br />        &lt;/wsdl:port&gt;<br />&lt;/wsdl:service&gt;<br /><br />2. Write your test server like:<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">/*<br />  * Server<br />  */<br /></span><span class="keyword">class </span><span class="default">TestSoapServer<br /></span><span class="keyword">{<br />    public function </span><span class="default">getMessage</span><span class="keyword">()<br />    {<br />        return </span><span class="string">'Hello, World!'</span><span class="keyword">;<br />    }<br />}<br /></span><span class="default">$options </span><span class="keyword">= [</span><span class="string">'uri' </span><span class="keyword">=&gt; </span><span class="string">'<a href="http://localhost:12312/" rel="nofollow" target="_blank">http://localhost:12312/</a>'</span><span class="keyword">];<br /></span><span class="default">$server </span><span class="keyword">= new </span><span class="default">SoapServer</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">);<br /></span><span class="default">$server</span><span class="keyword">-&gt;</span><span class="default">setClass</span><span class="keyword">(</span><span class="string">'TestSoapServer'</span><span class="keyword">);<br /></span><span class="default">$server</span><span class="keyword">-&gt;</span><span class="default">handle</span><span class="keyword">();<br /><br /></span><span class="default">?&gt;<br /></span><br />3. Run it with `php -S localhost:12312` (in the same folder)<br /><br />Whenever you make a request according to your wsdl, it will end up at your "server".</span></code></div>
  </div>
 </div>
  <div class="note" id="98021">  <div class="votes">
    <div id="Vu98021">
    <a href="https://www.php.net/manual/vote-note.php?id=98021&amp;page=class.soapserver&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd98021">
    <a href="https://www.php.net/manual/vote-note.php?id=98021&amp;page=class.soapserver&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V98021" title="62% like this...">
    11
    </div>
  </div>
  <a href="class.soapserver.php.html#98021" class="name">
  <strong class="user"><em>carlos dot vini at gmail dot com</em></strong></a><a class="genanchor" href="class.soapserver.php.html#98021"> &para;</a><div class="date" title="2010-05-20 01:55"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom98021">
<div class="phpcode"><code><span class="html">SoapServer does not support WSDL with literal/document. I have a class:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">My_Soap </span><span class="keyword">{<br />    </span><span class="comment">/**<br />     * Returns Hello World.<br />     * <br />     * @param string $world<br />     * @return string<br />     */<br />    </span><span class="keyword">public function </span><span class="default">getInterAdmins</span><span class="keyword">(</span><span class="default">$world</span><span class="keyword">) {<br />        return </span><span class="string">'hello' </span><span class="keyword">. </span><span class="default">$world</span><span class="keyword">;<br />    }<br />}<br /></span><span class="default">?&gt;<br /></span><br />To fix this I had to create proxy class:<br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">My_Soap_LiteralDocumentProxy </span><span class="keyword">{<br />   public function </span><span class="default">__call</span><span class="keyword">(</span><span class="default">$methodName</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">) {<br />       </span><span class="default">$soapClass </span><span class="keyword">= new </span><span class="default">My_Soap</span><span class="keyword">();<br />       </span><span class="default">$result </span><span class="keyword">= </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="default">$soapClass</span><span class="keyword">, </span><span class="default">$methodName</span><span class="keyword">),  </span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />       return array(</span><span class="default">$methodName </span><span class="keyword">. </span><span class="string">'Result' </span><span class="keyword">=&gt; </span><span class="default">$result</span><span class="keyword">);<br />   }<br />}<br /></span><span class="default">?&gt;<br /></span><br />Now make sure that the WSDL is created using My_Soap. And that the Server is created using My_Soap_LiteralDocumentProxy:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">if (isset(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'wsdl'</span><span class="keyword">])) {<br />    </span><span class="default">$wsdl </span><span class="keyword">= new </span><span class="default">Zend_Soap_AutoDiscover</span><span class="keyword">(); </span><span class="comment">// It generates the WSDL<br />    </span><span class="default">$wsdl</span><span class="keyword">-&gt;</span><span class="default">setOperationBodyStyle</span><span class="keyword">(array(<br />        </span><span class="string">'use' </span><span class="keyword">=&gt; </span><span class="string">'literal'<br />    </span><span class="keyword">));<br />    </span><span class="default">$wsdl</span><span class="keyword">-&gt;</span><span class="default">setBindingStyle</span><span class="keyword">(array(<br />        </span><span class="string">'style' </span><span class="keyword">=&gt; </span><span class="string">'document'<br />    </span><span class="keyword">));<br />    </span><span class="default">$wsdl</span><span class="keyword">-&gt;</span><span class="default">setClass</span><span class="keyword">(</span><span class="string">'My_Soap'</span><span class="keyword">);<br />    </span><span class="default">$wsdl</span><span class="keyword">-&gt;</span><span class="default">handle</span><span class="keyword">();<br />} else {<br />    </span><span class="default">$server </span><span class="keyword">= new </span><span class="default">Zend_Soap_Server</span><span class="keyword">(</span><span class="string">'<a href="http://localhost/something/webservice.php?wsdl" rel="nofollow" target="_blank">http://localhost/something/webservice.php?wsdl</a>'</span><span class="keyword">);<br />    </span><span class="default">$server</span><span class="keyword">-&gt;</span><span class="default">setClass</span><span class="keyword">(</span><span class="string">'My_Soap_LiteralDocumentProxy'</span><span class="keyword">);<br />    </span><span class="default">$server</span><span class="keyword">-&gt;</span><span class="default">handle</span><span class="keyword">();<br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="116014">  <div class="votes">
    <div id="Vu116014">
    <a href="https://www.php.net/manual/vote-note.php?id=116014&amp;page=class.soapserver&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116014">
    <a href="https://www.php.net/manual/vote-note.php?id=116014&amp;page=class.soapserver&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116014" title="57% like this...">
    7
    </div>
  </div>
  <a href="class.soapserver.php.html#116014" class="name">
  <strong class="user"><em>softontherocks at gmail dot com</em></strong></a><a class="genanchor" href="class.soapserver.php.html#116014"> &para;</a><div class="date" title="2014-10-29 06:20"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom116014">
<div class="phpcode"><code><span class="html">I posted in this URL <a href="http://softontherocks.blogspot.com/2014/02/web-service-soap-con-php.html" rel="nofollow" target="_blank">http://softontherocks.blogspot.com/2014/02/web-service-soap-con-php.html</a> a full example of a nusoap web service.<br /><br />There is defined the server and the cliente who calls the web service.<br /><br />I hope it would be useful for you.</span></code></div>
  </div>
 </div>
  <div class="note" id="95309">  <div class="votes">
    <div id="Vu95309">
    <a href="https://www.php.net/manual/vote-note.php?id=95309&amp;page=class.soapserver&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd95309">
    <a href="https://www.php.net/manual/vote-note.php?id=95309&amp;page=class.soapserver&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V95309" title="53% like this...">
    2
    </div>
  </div>
  <a href="class.soapserver.php.html#95309" class="name">
  <strong class="user"><em>dsubar at interna dot com</em></strong></a><a class="genanchor" href="class.soapserver.php.html#95309"> &para;</a><div class="date" title="2009-12-25 09:49"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom95309">
<div class="phpcode"><code><span class="html">Do not put a SoapServer and a SoapClient in the same PHP file. This seems to cause arbitrary behavior. On the PHP interpreter in Eclipse, everything worked fine. Under MAMP, I got an undocumented error. In moving the client from the same file as the server, everything worked fine.</span></code></div>
  </div>
 </div>
  <div class="note" id="113210">  <div class="votes">
    <div id="Vu113210">
    <a href="https://www.php.net/manual/vote-note.php?id=113210&amp;page=class.soapserver&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd113210">
    <a href="https://www.php.net/manual/vote-note.php?id=113210&amp;page=class.soapserver&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V113210" title="52% like this...">
    1
    </div>
  </div>
  <a href="class.soapserver.php.html#113210" class="name">
  <strong class="user"><em>s at dumdeedum dot com</em></strong></a><a class="genanchor" href="class.soapserver.php.html#113210"> &para;</a><div class="date" title="2013-09-12 05:32"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom113210">
<div class="phpcode"><code><span class="html">I was running PHP 5.3.2 and couldn't for the life of me get SOAP headers to work, no matter how carefully I built my class/wsdl/client.  What finally fixed it was updating to the latest PHP.  No idea if there was a bug somewhere or what, but it's never a bad idea to stay current and it might save you weeks of frustration!</span></code></div>
  </div>
 </div>
  <div class="note" id="101979">  <div class="votes">
    <div id="Vu101979">
    <a href="https://www.php.net/manual/vote-note.php?id=101979&amp;page=class.soapserver&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd101979">
    <a href="https://www.php.net/manual/vote-note.php?id=101979&amp;page=class.soapserver&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V101979" title="46% like this...">
    -3
    </div>
  </div>
  <a href="class.soapserver.php.html#101979" class="name">
  <strong class="user"><em>hawky83 at googlemail dot com</em></strong></a><a class="genanchor" href="class.soapserver.php.html#101979"> &para;</a><div class="date" title="2011-01-21 02:46"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom101979">
<div class="phpcode"><code><span class="html">Another simple example for SOAP_SERVER with errorhandling an params and wsdl:<br /><br />SERVER (soap_all_srv.php):<br /><br /><span class="default">&lt;?php <br /></span><span class="comment">// PEAR::SOAP einbinden<br /></span><span class="keyword">require_once </span><span class="string">"SOAP/Server.php"</span><span class="keyword">;<br /></span><span class="default">$skiptrace </span><span class="keyword">=&amp; </span><span class="default">PEAR</span><span class="keyword">::</span><span class="default">getStaticProperty</span><span class="keyword">(</span><span class="string">'PEAR_Error'</span><span class="keyword">, </span><span class="string">'skiptrace'</span><span class="keyword">);<br /></span><span class="default">$skiptrace </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br /><br /></span><span class="comment">// Service-Class<br /></span><span class="keyword">class </span><span class="default">mytimeserv </span><span class="keyword">{<br /><br />  </span><span class="comment">// __dispatch_map<br />  </span><span class="keyword">public </span><span class="default">$__dispatch_map </span><span class="keyword">= array ();<br />  <br />  </span><span class="comment">// In/Out param -&gt; __dispatch_map<br />  </span><span class="keyword">public function </span><span class="default">__construct</span><span class="keyword">() {<br />    </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">__dispatch_map</span><span class="keyword">[</span><span class="string">"now"</span><span class="keyword">] =<br />      array (</span><span class="string">"in" </span><span class="keyword">=&gt; array(</span><span class="string">"format" </span><span class="keyword">=&gt; </span><span class="string">"string"</span><span class="keyword">),<br />             </span><span class="string">"out" </span><span class="keyword">=&gt; array(</span><span class="string">"time" </span><span class="keyword">=&gt; </span><span class="string">"string"</span><span class="keyword">));<br />  }<br />  <br />  </span><span class="comment">// get back __dispatch_map in __dispatch<br />  </span><span class="keyword">public function </span><span class="default">__dispatch</span><span class="keyword">(</span><span class="default">$methodname</span><span class="keyword">) {<br />  <br />    if (isset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">__dispatch_map</span><span class="keyword">[</span><span class="default">$methodname</span><span class="keyword">])) {<br />      return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">__dispatch_map</span><span class="keyword">[</span><span class="default">$methodname</span><span class="keyword">];<br />    }<br />    <br />    return </span><span class="default">NULL</span><span class="keyword">;<br />  }<br />  <br />  </span><span class="comment">// servicemthod with parameters<br />  </span><span class="keyword">function </span><span class="default">now </span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">) {<br />  <br />    </span><span class="comment">// formaterror?<br />    </span><span class="keyword">if ((</span><span class="default">$format </span><span class="keyword">== </span><span class="default">null</span><span class="keyword">) || (</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">) == </span><span class="string">""</span><span class="keyword">)) {<br />    <br />      </span><span class="comment">// send errormessage<br />      </span><span class="keyword">return new </span><span class="default">SOAP_Fault</span><span class="keyword">(</span><span class="string">"Kein Parameter angegeben"</span><span class="keyword">,</span><span class="string">"0815"</span><span class="keyword">, </span><span class="string">"Client"</span><span class="keyword">);<br />    }<br />    <br />    </span><span class="default">date_default_timezone_set</span><span class="keyword">(</span><span class="string">'Europe/Berlin'</span><span class="keyword">);<br />    <br />    </span><span class="default">$time </span><span class="keyword">= </span><span class="default">date </span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">);<br />    <br />    </span><span class="comment">// return SOAP-Obj.<br />    </span><span class="keyword">return (new </span><span class="default">SOAP_Value</span><span class="keyword">(</span><span class="string">'time'</span><span class="keyword">,</span><span class="string">'string'</span><span class="keyword">, </span><span class="default">$time</span><span class="keyword">));<br />  }       <br />}<br /><br /></span><span class="comment">// service-class<br /></span><span class="default">$service </span><span class="keyword">= new </span><span class="default">mytimeserv</span><span class="keyword">();<br /><br /></span><span class="comment">// server<br /></span><span class="default">$ss </span><span class="keyword">= new </span><span class="default">SOAP_Server</span><span class="keyword">();<br /><br /></span><span class="comment">// add service with name<br /></span><span class="default">$ss</span><span class="keyword">-&gt;</span><span class="default">addObjectMap </span><span class="keyword">(&amp;</span><span class="default">$service</span><span class="keyword">,</span><span class="string">"urn:mytimeserv"</span><span class="keyword">);<br /><br /></span><span class="comment">// service or wsdl<br /></span><span class="keyword">if (isset(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"REQUEST_METHOD"</span><span class="keyword">])&amp;&amp; </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"REQUEST_METHOD"</span><span class="keyword">] == </span><span class="string">"POST"</span><span class="keyword">) {<br /><br />    </span><span class="comment">// postdata -&gt; service<br />    </span><span class="default">$ss</span><span class="keyword">-&gt;</span><span class="default">service </span><span class="keyword">(</span><span class="default">$HTTP_RAW_POST_DATA</span><span class="keyword">);<br />    <br />} else {<br /><br />  </span><span class="comment">// wsdl-param in url<br />  </span><span class="keyword">if (isset(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'QUERY_STRING'</span><span class="keyword">]) &amp;&amp; </span><span class="default">strcasecmp</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'QUERY_STRING'</span><span class="keyword">],</span><span class="string">'wsdl'</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">) {<br />    <br />    </span><span class="comment">// DISCO_Server for WSDL <br />    </span><span class="keyword">require_once </span><span class="string">"SOAP/Disco.php"</span><span class="keyword">;<br />    </span><span class="default">$disco </span><span class="keyword">= new </span><span class="default">SOAP_DISCO_Server </span><span class="keyword">(</span><span class="default">$ss</span><span class="keyword">,</span><span class="string">"mytimeserv"</span><span class="keyword">,</span><span class="string">"My Time Service"</span><span class="keyword">);<br />    <br />    </span><span class="comment">// set HTML-Header <br />    </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: text/xml"</span><span class="keyword">);<br />    <br />    </span><span class="comment">// return wsdl<br />    </span><span class="keyword">print </span><span class="default">$disco</span><span class="keyword">-&gt;</span><span class="default">getWSDL </span><span class="keyword">();<br />  }<br />}<br /><br /></span><span class="default">?&gt;<br /></span><br />CLIENT (soap_all_client.php) (for wsdl: <a href="http://example.com/soap_all_srv.php?wsdl" rel="nofollow" target="_blank">http://example.com/soap_all_srv.php?wsdl</a>):<br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">require_once </span><span class="string">"SOAP/Client.php"</span><span class="keyword">;<br /><br /></span><span class="comment">// SOAP/WSDL<br /></span><span class="default">$sw </span><span class="keyword">= new </span><span class="default">SOAP_WSDL </span><span class="keyword">(</span><span class="string">"<a href="http://example.com/soap_all_srv.php?wsdl" rel="nofollow" target="_blank">http://example.com/soap_all_srv.php?wsdl</a>"</span><span class="keyword">);<br /><br /></span><span class="comment">// Proxy-Obj.<br /></span><span class="default">$proxy </span><span class="keyword">= </span><span class="default">$sw</span><span class="keyword">-&gt;</span><span class="default">getProxy </span><span class="keyword">();<br /><br /></span><span class="comment">// servicemthod<br /></span><span class="default">$erg </span><span class="keyword">= </span><span class="default">$proxy</span><span class="keyword">-&gt;</span><span class="default">now </span><span class="keyword">(</span><span class="string">"H:i:s"</span><span class="keyword">);<br /><br /></span><span class="comment">// return<br /></span><span class="keyword">print </span><span class="default">$erg</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="98082">  <div class="votes">
    <div id="Vu98082">
    <a href="https://www.php.net/manual/vote-note.php?id=98082&amp;page=class.soapserver&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd98082">
    <a href="https://www.php.net/manual/vote-note.php?id=98082&amp;page=class.soapserver&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V98082" title="42% like this...">
    -7
    </div>
  </div>
  <a href="class.soapserver.php.html#98082" class="name">
  <strong class="user"><em>junk2cm at gmx dot de</em></strong></a><a class="genanchor" href="class.soapserver.php.html#98082"> &para;</a><div class="date" title="2010-05-25 12:54"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom98082">
<div class="phpcode"><code><span class="html">As the SoapServer class lacks the possibility of dealing with SOAP-Headers, my following workaround is suitable to my needs when I had to do authentication via the SOAP-Headers:<br />1. Use a class which handles SOAP requests and let the constructor of this class take the sent headers.<br />2. Before invoking the SoapServer extract the SOAP-Header from the incoming raw data.<br />3. When using setClass pass the extracted header to the handling class.<br /><br />In Your Server-Skript do things like this <br /><span class="default">&lt;?php<br />$hdr </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">"php://input"</span><span class="keyword">);<br />if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$hdr</span><span class="keyword">,</span><span class="string">'&lt;s:Header&gt;'</span><span class="keyword">)===</span><span class="default">false</span><span class="keyword">) {<br />    </span><span class="default">$hdr </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />} else {<br />    </span><span class="default">$hdr </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'&lt;s:Header&gt;'</span><span class="keyword">,</span><span class="default">$hdr</span><span class="keyword">);<br />    </span><span class="default">$hdr </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'&lt;/s:Header&gt;'</span><span class="keyword">,</span><span class="default">$hdr</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br />    </span><span class="default">$hdr </span><span class="keyword">= </span><span class="default">$hdr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />}<br /></span><span class="default">$srv </span><span class="keyword">= new </span><span class="default">SoapServer</span><span class="keyword">(</span><span class="string">'Your_wsdl'</span><span class="keyword">);<br /></span><span class="default">$srv</span><span class="keyword">-&gt;</span><span class="default">setClass</span><span class="keyword">(</span><span class="string">"ServiceClass"</span><span class="keyword">,</span><span class="default">$hdr</span><span class="keyword">);<br /></span><span class="default">$srv</span><span class="keyword">-&gt;</span><span class="default">handle</span><span class="keyword">();<br /></span><span class="default">?&gt;<br /></span><br />And the service class is like this:<br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">ServiceClass </span><span class="keyword">{<br />    var </span><span class="default">$IsAuthenticated</span><span class="keyword">;<br /><br />    function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$hdr</span><span class="keyword">) {<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">IsAuthenticated </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />        if (</span><span class="default">$hdr</span><span class="keyword">!=</span><span class="default">null</span><span class="keyword">) {<br />            </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">header </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$hdr</span><span class="keyword">);<br />            </span><span class="comment">//Your authentication stuff goes here...<br />        </span><span class="keyword">}<br />    }<br />    <br />    function </span><span class="default">SomeFunctionOfTheService</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) {<br />        if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">IsAuthenticated</span><span class="keyword">) {<br />            </span><span class="comment">//here Your function...<br />        </span><span class="keyword">}<br />    }<br /><br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="98227">  <div class="votes">
    <div id="Vu98227">
    <a href="https://www.php.net/manual/vote-note.php?id=98227&amp;page=class.soapserver&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd98227">
    <a href="https://www.php.net/manual/vote-note.php?id=98227&amp;page=class.soapserver&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V98227" title="34% like this...">
    -9
    </div>
  </div>
  <a href="class.soapserver.php.html#98227" class="name">
  <strong class="user"><em>mikkel at nsales dot dk</em></strong></a><a class="genanchor" href="class.soapserver.php.html#98227"> &para;</a><div class="date" title="2010-06-02 03:15"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom98227">
<div class="phpcode"><code><span class="html">If you want to return a custom object array from a nusoap webservice, you have to cast the objects to arrays like so:<br /><br /><span class="default">&lt;?php<br />$users </span><span class="keyword">= array();<br />while(</span><span class="default">$res </span><span class="keyword">= </span><span class="default">$db_obj</span><span class="keyword">-&gt;</span><span class="default">fetch_row</span><span class="keyword">())<br />{<br />  </span><span class="default">$user </span><span class="keyword">= new </span><span class="default">user</span><span class="keyword">();<br />  </span><span class="default">$user</span><span class="keyword">-&gt;</span><span class="default">Id </span><span class="keyword">= </span><span class="default">$res</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">];<br />  </span><span class="default">$user</span><span class="keyword">-&gt;</span><span class="default">Username </span><span class="keyword">= </span><span class="default">$res</span><span class="keyword">[</span><span class="string">'username'</span><span class="keyword">];<br />  </span><span class="default">$user</span><span class="keyword">-&gt;</span><span class="default">Email </span><span class="keyword">= </span><span class="default">$res</span><span class="keyword">[</span><span class="string">'email'</span><span class="keyword">];<br />  <br />  </span><span class="default">$users</span><span class="keyword">[] = (array) </span><span class="default">$user</span><span class="keyword">;<br />}<br /><br />return (</span><span class="default">$users</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="109306">  <div class="votes">
    <div id="Vu109306">
    <a href="https://www.php.net/manual/vote-note.php?id=109306&amp;page=class.soapserver&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd109306">
    <a href="https://www.php.net/manual/vote-note.php?id=109306&amp;page=class.soapserver&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V109306" title="23% like this...">
    -23
    </div>
  </div>
  <a href="class.soapserver.php.html#109306" class="name">
  <strong class="user"><em>phpman dot fulter47 at recursor dot net</em></strong></a><a class="genanchor" href="class.soapserver.php.html#109306"> &para;</a><div class="date" title="2012-07-04 05:36"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom109306">
<div class="phpcode"><code><span class="html">For those (like me) coming from other SOAP frameworks and getting confused:<br /><br />- A PHP SOAP server application created using the SoapServer class can not be used as a standalone SOAP server.<br />It needs an HTTP server to receive SOAP requests, which must run a PHP engine to execute the PHP SOAP server script as a CGI.<br /><br />- For this reason, there are no settings in PHP that control the Interface/Port under which the SOAP server will wait for requests - it is the HTTP server who is responsible for that.<br /><br />- The "uri" parameter is an "id value", used as the namespace for the SOAP response. It is only required if no WSDL file is used (that contains this setting), i.e. "wsdl" is set to NULL. It does _not_ control the Hostname/Port under which the HTTP server will be reachable for requests.</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=class.soapserver&amp;redirect=https://www.php.net/manual/ru/class.soapserver.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="book.soap.php.html">SOAP</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="intro.soap.php.html" title="Введение">Введение</a>
                        </li>
                                                <li class="">
                            <a href="soap.setup.php.html" title="Установка и настройка">Установка и настройка</a>
                        </li>
                                                <li class="">
                            <a href="soap.constants.php.html" title="Предопределённые константы">Предопределённые константы</a>
                        </li>
                                                <li class="">
                            <a href="ref.soap.php.html" title="Функции SOAP">Функции SOAP</a>
                        </li>
                                                <li class="">
                            <a href="class.soapclient.php.html" title="SoapClient">SoapClient</a>
                        </li>
                                                <li class="current">
                            <a href="class.soapserver.php.html" title="SoapServer">SoapServer</a>
                        </li>
                                                <li class="">
                            <a href="class.soapfault.php.html" title="SoapFault">SoapFault</a>
                        </li>
                                                <li class="">
                            <a href="class.soapheader.php.html" title="SoapHeader">SoapHeader</a>
                        </li>
                                                <li class="">
                            <a href="class.soapparam.php.html" title="SoapParam">SoapParam</a>
                        </li>
                                                <li class="">
                            <a href="class.soapvar.php.html" title="SoapVar">SoapVar</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
