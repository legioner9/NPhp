<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: Страница состояния - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="fpm.status.php.html">
 <link rel="shorturl" href="fpm.status.php.html">
 <link rel="alternate" href="fpm.status.php.html" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="fpm.observability.php.html">
 <link rel="prev" href="fpm.observability.php.html">
 <link rel="next" href="ref.fpm.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/fpm.status.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/fpm.status.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/fpm.status.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/fpm.status.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/fpm.status.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/fpm.status.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/fpm.status.php" hreflang="pt_BR">
 <link rel="alternate" href="fpm.status.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/fpm.status.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/fpm.status.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="ref.fpm.php.html">
          Функции FPM &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="fpm.observability.php.html">
          &laquo; Наблюдаемость        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.utilspec.server.php.html'>Модули для работы с серверами</a></li>      <li><a href='book.fpm.php.html'>Менеджер процессов FastCGI</a></li>      <li><a href='fpm.observability.php.html'>Наблюдаемость</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/fpm.status.php'>English</option>
            <option value='de/fpm.status.php'>German</option>
            <option value='es/fpm.status.php'>Spanish</option>
            <option value='fr/fpm.status.php'>French</option>
            <option value='it/fpm.status.php'>Italian</option>
            <option value='ja/fpm.status.php'>Japanese</option>
            <option value='pt_BR/fpm.status.php'>Brazilian Portuguese</option>
            <option value='ru/fpm.status.php' selected="selected">Russian</option>
            <option value='tr/fpm.status.php'>Turkish</option>
            <option value='zh/fpm.status.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/fpm/status.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffpm.status%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="fpm.status" class="sect1">
 <h2 class="title">Страница состояния</h2>

 <p class="para">
  На этой странице представлена информация о настройке и содержании страницы состояния FPM.
  Смотрите также описание функции <span class="function"><a href="function.fpm-get-status.php.html" class="function">fpm_get_status()</a></span>.
 </p>

 <div class="sect2" id="fpm.status.configuration">
  <h3 class="title">Настройка</h3>

  <p class="para">
   Страница состояния FPM может быть включена путём установки параметра конфигурации
   <a href="install.fpm.configuration.php.html#pm.status-path" class="link">pm.status_path</a> в пуле FPM конфигурации.
  </p>

  <div class="caution"><strong class="caution">Предостережение</strong>
   <p class="para">
    В целях безопасности страница состояния FPM должна быть ограничена внутренними запросами
    или известными IP-адресами клиентов так как страница показывает URL запроса и информацию о доступных ресурсах.
   </p>
  </div>

  <p class="para">
   От конфигурации веб-сервера зависит, нужно ли в его настройках
   разрешать запросы непосредственно к этому пути, минуя любые PHP-скрипты.
   Пример конфигурации для сервера Apache с менеджером процессов FPM, слушающим на UDS,
   и директивой <code class="literal">pm.status_path</code>
   с установленным значением <code class="literal">/fpm-status</code> будет выглядеть следующим образом:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="apache-confcode"><pre class="apache-confcode">&lt;LocationMatch &quot;/fpm-status&quot;&gt;
 Order Allow,Deny
 Allow from 127.0.0.1
 ProxyPass &quot;unix:/var/run/php-fpm.sock|fcgi://localhost/fpm-status&quot;
&lt;/LocationMatch&gt;</pre>
</div>
   </div>

  </div>

  <p class="para">
   После перезагрузки или перезапуска и менеджера FPM, и веб-сервера страница состояния будет доступна из браузера
   (при условии, что запрос поступает с разрешённого IP-адреса, если было настроено ограничение IP-адресов).
  </p>
 </div>

 <div class="sect2" id="fpm.status.parameters">
  <h3 class="title">Параметры запроса</h3>

  <p class="para">
   Формат вывода страницы состояния может быть изменён путём указания одного из следующих параметров запроса:
  </p>

  <ul class="simplelist">
   <li class="member"><code class="literal">html</code></li>
   <li class="member"><code class="literal">json</code></li>
   <li class="member"><code class="literal">openmetrics</code></li>
   <li class="member"><code class="literal">xml</code></li>
  </ul>

  <p class="para">
   Дополнительная информация также может быть возвращена с помощью параметра запроса <code class="literal">full</code>.
  </p>

  <p class="para">
   Примеры URL-адресов страниц состояния:
  </p>

  <ul class="simplelist">
   <li class="member">
    <code class="literal">https://localhost/fpm-status</code>
    - Краткий вывод в текстовом формате по умолчанию
   </li>
   <li class="member">
    <code class="literal">https://localhost/fpm-status?full</code>
    - Полный вывод в текстовом формате по умолчанию
   </li>
   <li class="member">
    <code class="literal">https://localhost/fpm-status?json</code>
    - Краткий вывод в формате JSON
   </li>
   <li class="member">
    <code class="literal">https://localhost/fpm-status?html&amp;full</code>
    - Полный вывод в формате HTML
   </li>
  </ul>
 </div>

 <div class="sect2" id="fpm.status.contents">
  <h3 class="title">Отображаемая информация</h3>

  <p class="para">
   Значения даты/времени используют формат метки времени UNIX в выходных данных JSON и XML,
   иначе они используют формат, приводящий к следующему примеру даты:
   <code class="literal">&quot;03/Jun/2021:07:21:46 +0100&quot;</code>.
  </p>

  <table class="doctable table">
   <caption><strong>Основная информация — всегда отображается на странице состояния</strong></caption>
   
    <thead>
     <tr>
      <th>Параметр</th>
      <th>Описание</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>pool</td>
      <td>Имя пула процессов FPM.</td>
     </tr>

     <tr>
      <td>proccess manager</td>
      <td>Тип менеджера процесса — static (статический), dynamic (динамический) или ondemand (по требованию).</td>
     </tr>

     <tr>
      <td>start time</td>
      <td>Дата/время последнего запуска пула процессов.</td>
     </tr>

     <tr>
      <td>start since</td>
      <td>Время в секундах с момента последнего запуска пула процессов.</td>
     </tr>

     <tr>
      <td>accepted conn</td>
      <td>Общее количество принятых соединений.</td>
     </tr>

     <tr>
      <td>listen queue</td>
      <td>Количество запросов (backlog), ожидающих свободного процесса.</td>
     </tr>

     <tr>
      <td>max listen queue</td>
      <td>Максимальное количество запросов в очереди на прослушивание в любой момент времени.</td>
     </tr>

     <tr>
      <td>listen queue len</td>
      <td>Максимально допустимый размер очереди прослушивания.</td>
     </tr>

     <tr>
      <td>idle processes</td>
      <td>Количество процессов, которые в настоящее время простаивают (ожидают запросов).</td>
     </tr>

     <tr>
      <td>active processes</td>
      <td>Количество процессов, которые в настоящее время обрабатывают запросы.</td>
     </tr>

     <tr>
      <td>total processes</td>
      <td>Текущее общее количество процессов.</td>
     </tr>

     <tr>
      <td>max active processes</td>
      <td>Максимальное количество одновременно активных процессов.</td>
     </tr>

     <tr>
      <td>max children reached</td>
      <td>
       Было ли достигнуто максимальное количество процессов? Если да, то отображаемое значение
       будет <code class="literal">1</code>, иначе значение будет <code class="literal">0</code>.
      </td>
     </tr>

     <tr>
      <td>slow requests</td>
      <td>
       Общее количество запросов, которые достигли настроенного
       <code class="literal">request_slowlog_timeout</code>.
      </td>
     </tr>

    </tbody>
   
  </table>


  <table class="doctable table">
   <caption><strong>Информация о каждом процессе — отображается только в режиме вывода <code class="literal">full</code></strong></caption>
   
    <thead>
     <tr>
      <th>Параметр</th>
      <th>Описание</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>pid</td>
      <td>Системный PID процесса.</td>
     </tr>

     <tr>
      <td>state</td>
      <td>Состояние процесса — Idle, Running, ...</td>
     </tr>

     <tr>
      <td>start time</td>
      <td>Дата/время начала процесса.</td>
     </tr>

     <tr>
      <td>start since</td>
      <td>Количество секунд с момента начала процесса.</td>
     </tr>

     <tr>
      <td>requests</td>
      <td>Общее количество обслуженных запросов.</td>
     </tr>

     <tr>
      <td>request duration</td>
      <td>Общее время в микросекундах, затраченное на обслуживание последнего запроса.</td>
     </tr>

     <tr>
      <td>request method</td>
      <td>Метод HTTP последнего обслуженного запроса.</td>
     </tr>

     <tr>
      <td>request uri</td>
      <td>
       URI последнего обслуженного запроса (после обработки веб-сервером он всегда может быть
       равен <code class="literal">/index.php</code>, если вы используете шаблонный редирект фронт-контроллера).
      </td>
     </tr>

     <tr>
      <td>content length</td>
      <td>Длина тела запроса, в байтах, последнего запроса.</td>
     </tr>

     <tr>
      <td>user</td>
      <td>HTTP-пользователь (<code class="literal">PHP_AUTH_USER</code>) последнего запроса.</td>
     </tr>

     <tr>
      <td>script</td>
      <td>
       Полный путь к скрипту, выполненному последним запросом. Это будет
       <code class="literal">&#039;-&#039;</code>, если не применимо (например, запросы страницы состояния).
      </td>
     </tr>

     <tr>
      <td>last request cpu</td>
      <td>
       Процент занятого cpu времени при выполнении последнего запроса.
       Это значение будет равно 0, если процесс не в состоянии Idle,
       потому что вычисление проводится после окончания обработки запроса.
       Значение может превысить 100 %, потому что метрика покажет,
       какой процент от общего времени работы процессора
       занял последний запрос, —
       в расчёте будут учтены процессы на всех ядрах,
       тогда как 100 % — это значение только для одного ядра.
      </td>
     </tr>

     <tr>
      <td>last request memory</td>
      <td>
       Максимальный объем памяти, потреблённый последним запросом.
       Это значение будет равно 0, если процесс не простаивает, так как вычисление проводится после окончания обработки запроса.
      </td>
     </tr>

    </tbody>
   
  </table>


  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Все значения специфичны для пула и сбрасываются при перезапуске FPM.
   </p>
  </p></blockquote>

  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    В выводе формата OpenMetrics используются различные типы параметров, чтобы лучше соответствовать формату OpenMetrics.
    Параметры и описания их значений включены в выходные данные формата OpenMetrics.
   </p>
  </p></blockquote>
 </div>

 <div class="sect2">
  <h3 class="title">Список изменений</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Версия</th>
      <th>Описание</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>8.1.0</td>
      <td>Добавлен формат OpenMetrics.</td>
     </tr>

    </tbody>
   
  </table>

 </div>
</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=fpm.status&amp;redirect=https://www.php.net/manual/ru/fpm.status.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">3 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="127827">  <div class="votes">
    <div id="Vu127827">
    <a href="https://www.php.net/manual/vote-note.php?id=127827&amp;page=fpm.status&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd127827">
    <a href="https://www.php.net/manual/vote-note.php?id=127827&amp;page=fpm.status&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V127827" title="81% like this...">
    14
    </div>
  </div>
  <a href="fpm.status.php.html#127827" class="name">
  <strong class="user"><em>uwe at ohse dot de</em></strong></a><a class="genanchor" href="fpm.status.php.html#127827"> &para;</a><div class="date" title="2022-10-23 10:16"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom127827">
<div class="phpcode"><code><span class="html">Before someone else misunderstands that:<br />  "request duration    The total time in seconds spent serving requests."<br /><br />This is not the total time of all requests done by that process, but either the time used by the last request done (idle state), or the current request (all other states).<br /><br />And the number given is not in seconds, but in microseconds.<br /><br />The fpm status documentation is a mess.</span></code></div>
  </div>
 </div>
  <div class="note" id="129209">  <div class="votes">
    <div id="Vu129209">
    <a href="https://www.php.net/manual/vote-note.php?id=129209&amp;page=fpm.status&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd129209">
    <a href="https://www.php.net/manual/vote-note.php?id=129209&amp;page=fpm.status&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V129209" title="no votes...">
    0
    </div>
  </div>
  <a href="fpm.status.php.html#129209" class="name">
  <strong class="user"><em>Mark Gooderum</em></strong></a><a class="genanchor" href="fpm.status.php.html#129209"> &para;</a><div class="date" title="2024-01-31 12:43"><strong>14 days ago</strong></div>
  <div class="text" id="Hcom129209">
<div class="phpcode"><code><span class="html">Anonymous is correct.<br /><br />So the URI has to match the pm.status_path in the pool configuration and in turn the Apache Location configuration.  The same applies to ping.path.<br /><br />Ergo If you want multiple PHP FPMs exposed on the same Apache each needs their own unique path.  Also from experience Apache 8 FPM status_listen doesn't seem to work with the domain socket, only TCP.  Obviously for 8.x you'll need unique port numbers for each PHP FPM and they need to match between the pm.status_listen and the Apache ProxyPass line.<br /><br />So imagine I want FPM status and ping exposed for 7.4 and 8.2.  <br /><br />I then have an Apache config like:<br /><br />&lt;LocationMatch "/fpm-ping-74"&gt;<br />        Order Deny,Allow<br />        Require local<br />        ProxyPass "unix:/run/php/php7.4-fpm.sock|fcgi://localhost"<br />&lt;/LocationMatch&gt;<br />&lt;LocationMatch "/fpm-status-74"&gt;<br />        Order Deny,Allow<br />        Require local<br />        IncludeOptional trusted-ips.conf<br />        ProxyPass "unix:/run/php/php7.4-fpm.sock|fcgi://localhost"<br />&lt;/LocationMatch&gt;<br /><br />&lt;LocationMatch "/fpm-ping-82"&gt;<br />        Order Deny,Allow<br />        Require local<br />        IncludeOptional trusted-ips.conf<br />        ProxyPass "unix:/run/php/php8.2-fpm.sock|fcgi://localhost:9002"<br />&lt;/LocationMatch&gt;<br />&lt;LocationMatch "/fpm-status-82"&gt;<br />        Order Deny,Allow<br />        Require local<br />        ProxyPass "unix:/run/php/php8.2-fpm.sock|fcgi://localhost:9002"<br />&lt;/LocationMatch&gt;<br /><br />Then in the respective pool config files:<br /><br />7.4/fpm/pool.d/www.conf:<br /><br />; status_listen default works in 7.4<br />pm.status_path = /fpm-status-74<br />ping.path = /fpm-ping-74<br /><br />8.2/fpm/pool.d/www.conf:<br /><br />; Need an explicit TCP listen in 8.x - why?<br />pm.status_listen = 127.0.0.1:9002<br />pm.status_path = /fpm-status-82<br />ping.path = /fpm-ping-82</span></code></div>
  </div>
 </div>
  <div class="note" id="128833">  <div class="votes">
    <div id="Vu128833">
    <a href="https://www.php.net/manual/vote-note.php?id=128833&amp;page=fpm.status&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd128833">
    <a href="https://www.php.net/manual/vote-note.php?id=128833&amp;page=fpm.status&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V128833" title="50% like this...">
    0
    </div>
  </div>
  <a href="fpm.status.php.html#128833" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="fpm.status.php.html#128833"> &para;</a><div class="date" title="2023-08-27 06:58"><strong>5 months ago</strong></div>
  <div class="text" id="Hcom128833">
<div class="phpcode"><code><span class="html">there is an error in the docs, if you want to use with fastcgi, the correct link in ProxyPass is not<br /><br />ProxyPass "unix:/var/run/php-fpm.sock|fcgi://localhost/fpm-status"<br /><br />but only<br /><br />ProxyPass "unix:/var/run/php-fpm.sock|fcgi://localhost"<br /><br />otherwise the page says "File not found"</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=fpm.status&amp;redirect=https://www.php.net/manual/ru/fpm.status.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="fpm.observability.php.html">Наблюдаемость</a>

                                    <ul class='child-menu-list'>

                                                <li class="current">
                            <a href="fpm.status.php.html" title="Страница состояния">Страница состояния</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
