<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: chmod - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.chmod.php.html">
 <link rel="shorturl" href="https://www.php.net/chmod">
 <link rel="alternate" href="https://www.php.net/chmod" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.filesystem.php.html">
 <link rel="prev" href="function.chgrp.php.html">
 <link rel="next" href="function.chown.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.chmod.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.chmod.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.chmod.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.chmod.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.chmod.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.chmod.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.chmod.php" hreflang="pt_BR">
 <link rel="alternate" href="function.chmod.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.chmod.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.chmod.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.chown.php.html">
          chown &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.chgrp.php.html">
          &laquo; chgrp        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.fileprocess.file.php.html'>Модули для работы с файловой системой</a></li>      <li><a href='book.filesystem.php.html'>Файловая система</a></li>      <li><a href='ref.filesystem.php.html'>Функции файловой системы</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.chmod.php'>English</option>
            <option value='de/function.chmod.php'>German</option>
            <option value='es/function.chmod.php'>Spanish</option>
            <option value='fr/function.chmod.php'>French</option>
            <option value='it/function.chmod.php'>Italian</option>
            <option value='ja/function.chmod.php'>Japanese</option>
            <option value='pt_BR/function.chmod.php'>Brazilian Portuguese</option>
            <option value='ru/function.chmod.php' selected="selected">Russian</option>
            <option value='tr/function.chmod.php'>Turkish</option>
            <option value='zh/function.chmod.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/filesystem/functions/chmod.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.chmod%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.chmod" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">chmod</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">chmod</span> &mdash; <span class="dc-title">Изменяет режим доступа к файлу</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.chmod-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>chmod</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$permissions</code></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   Осуществляет попытку изменения режима доступа указанного файла
   на режим, переданный в параметре <code class="parameter">permissions</code>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.chmod-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       Путь к файлу.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">permissions</code></dt>

     <dd>

      <p class="para">
       Обратите внимание, что значение параметра <code class="parameter">permissions</code>
       не переводится автоматически в восьмеричную систему счисления,
       поэтому, чтобы удостовериться в том, что режим
       был установлен верно, предваряйте нулём (0) значение
       передаваемое в параметре <code class="parameter">permissions</code>.
       Строки, такие как &quot;g+w&quot;, не будут работать
       должным образом.
      </p>
      <p class="para">
       <div class="informalexample">
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />chmod</span><span style="color: #007700">(</span><span style="color: #DD0000">"/somedir/somefile"</span><span style="color: #007700">, </span><span style="color: #0000BB">755</span><span style="color: #007700">);   </span><span style="color: #FF8000">// десятичное, скорее всего, указано неверно<br /></span><span style="color: #0000BB">chmod</span><span style="color: #007700">(</span><span style="color: #DD0000">"/somedir/somefile"</span><span style="color: #007700">, </span><span style="color: #DD0000">"u+rwx,go+rx"</span><span style="color: #007700">); </span><span style="color: #FF8000">// строка, неверный способ<br /></span><span style="color: #0000BB">chmod</span><span style="color: #007700">(</span><span style="color: #DD0000">"/somedir/somefile"</span><span style="color: #007700">, </span><span style="color: #0000BB">0755</span><span style="color: #007700">);  </span><span style="color: #FF8000">// восьмеричное, верный способ<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
        </div>

       </div>
      </p>
      <p class="para">
       Значение параметра <code class="parameter">permissions</code> состоит
       из трёх восьмеричных чисел, определяющих уровень доступа
       для владельца файла, для группы, в которую входит владелец,
       и для других пользователей, соответственно. Число, определяющее
       уровень пользователя, может быть вычислено путём суммирования
       значений, определяющих права: 1 - доступ на выполнение, 2 -
       доступ на запись, 4 - доступ на чтение. Сложите эти числа для
       указания нужного права доступа. Более подробно о системе
       прав в системах Unix вы можете узнать с помощью команд
       &#039;<strong class="command">man 1 chmod</strong>&#039; и &#039;<strong class="command">man 2 chmod</strong>&#039;.
      </p>
      <p class="para">
       <div class="informalexample">
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// Доступ на запись и чтение для владельца, нет доступа для других<br /></span><span style="color: #0000BB">chmod</span><span style="color: #007700">(</span><span style="color: #DD0000">"/somedir/somefile"</span><span style="color: #007700">, </span><span style="color: #0000BB">0600</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Доступ на запись и чтение для владельца, доступ на чтение для других<br /></span><span style="color: #0000BB">chmod</span><span style="color: #007700">(</span><span style="color: #DD0000">"/somedir/somefile"</span><span style="color: #007700">, </span><span style="color: #0000BB">0644</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Полный доступ для владельца, доступ на чтение и выполнение для других<br /></span><span style="color: #0000BB">chmod</span><span style="color: #007700">(</span><span style="color: #DD0000">"/somedir/somefile"</span><span style="color: #007700">, </span><span style="color: #0000BB">0755</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Полный доступ для владельца, доступ на чтение и выполнение для группы владельца<br /></span><span style="color: #0000BB">chmod</span><span style="color: #007700">(</span><span style="color: #DD0000">"/somedir/somefile"</span><span style="color: #007700">, </span><span style="color: #0000BB">0750</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
        </div>

       </div>
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.chmod-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает <strong><code>true</code></strong> в случае успешного выполнения или <strong><code>false</code></strong> в случае возникновения ошибки.
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.chmod-errors">
  <h3 class="title">Ошибки</h3>
  <p class="para">
   В случае возникновения ошибки выдаётся ошибка уровня <strong><code>E_WARNING</code></strong>.
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.chmod-notes">
  <h3 class="title">Примечания</h3>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Текущим пользователем является пользователь, от имени
    которого выполняется PHP. Возможно, что это будет не тот
    пользователь, под именем которого вы получаете доступ к
    командной оболочке или учётной записи FTP. На большинстве систем
    режим доступа к файлу может быть изменён только его владельцем.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: <span class="simpara">Эта функция
неприменима для работы с <a href="features.remote-files.php.html" class="link">удалёнными файлами</a>,
поскольку файл должен быть доступен через файловую систему сервера.</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.chmod-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.chown.php.html" class="function" rel="rdfs-seeAlso">chown()</a> - Изменяет владельца файла</span></li>
    <li class="member"><span class="function"><a href="function.chgrp.php.html" class="function" rel="rdfs-seeAlso">chgrp()</a> - Изменяет группу файла</span></li>
    <li class="member"><span class="function"><a href="function.fileperms.php.html" class="function" rel="rdfs-seeAlso">fileperms()</a> - Возвращает информацию о правах на файл</span></li>
    <li class="member"><span class="function"><a href="function.stat.php.html" class="function" rel="rdfs-seeAlso">stat()</a> - Возвращает информацию о файле</span></li>
   </ul>
  </p>
 </div>


</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.chmod&amp;redirect=https://www.php.net/manual/ru/function.chmod.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">17 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="99747">  <div class="votes">
    <div id="Vu99747">
    <a href="https://www.php.net/manual/vote-note.php?id=99747&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd99747">
    <a href="https://www.php.net/manual/vote-note.php?id=99747&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V99747" title="72% like this...">
    57
    </div>
  </div>
  <a href="function.chmod.php.html#99747" class="name">
  <strong class="user"><em>MethodicalFool</em></strong></a><a class="genanchor" href="function.chmod.php.html#99747"> &para;</a><div class="date" title="2010-09-02 09:46"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom99747">
<div class="phpcode"><code><span class="html">BEWARE, a couple of the examples in the comments suggest doing something like this:<br /><br />chmod(file_or_dir_name, intval($mode, 8));<br /><br />However, if $mode is an integer then intval( ) won't modify it.  So, this code...<br /><br />$mode = 644;<br />chmod('/tmp/test', intval($mode, 8));<br /><br />...produces permissions that look like this:<br /><br />1--w----r-T<br /><br />Instead, use octdec( ), like this:<br /><br />chmod(file_or_dir_name, octdec($mode));<br /><br />See also: <a href="http://www.php.net/manual/en/function.octdec.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/function.octdec.php</a></span></code></div>
  </div>
 </div>
  <div class="note" id="96086">  <div class="votes">
    <div id="Vu96086">
    <a href="https://www.php.net/manual/vote-note.php?id=96086&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd96086">
    <a href="https://www.php.net/manual/vote-note.php?id=96086&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V96086" title="76% like this...">
    37
    </div>
  </div>
  <a href="function.chmod.php.html#96086" class="name">
  <strong class="user"><em>Geoff W</em></strong></a><a class="genanchor" href="function.chmod.php.html#96086"> &para;</a><div class="date" title="2010-02-08 02:13"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom96086">
<div class="phpcode"><code><span class="html">BEWARE using quotes around the second parameter...<br /><br />If you use quotes eg<br /><br />chmod (file, "0644");<br /><br />php will not complain but will do an implicit conversion to an int before running chmod. Unfortunately the implicit conversion doesn't take into account the octal string so you end up with an integer version 644, which is 1204 octal</span></code></div>
  </div>
 </div>
  <div class="note" id="54640">  <div class="votes">
    <div id="Vu54640">
    <a href="https://www.php.net/manual/vote-note.php?id=54640&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd54640">
    <a href="https://www.php.net/manual/vote-note.php?id=54640&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V54640" title="68% like this...">
    36
    </div>
  </div>
  <a href="function.chmod.php.html#54640" class="name">
  <strong class="user"><em>masha at mail dot ru</em></strong></a><a class="genanchor" href="function.chmod.php.html#54640"> &para;</a><div class="date" title="2005-07-10 09:23"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom54640">
<div class="phpcode"><code><span class="html">Usefull reference:<br /><br />Value    Permission Level<br />400    Owner Read<br />200    Owner Write<br />100    Owner Execute<br />40    Group Read<br />20    Group Write<br />10    Group Execute<br />4    Global Read<br />2    Global Write<br />1    Global Execute<br /><br />(taken from <a href="http://www.onlamp.com/pub/a/php/2003/02/06/php_foundations.html" rel="nofollow" target="_blank">http://www.onlamp.com/pub/a/php/2003/02/06/php_foundations.html</a>)</span></code></div>
  </div>
 </div>
  <div class="note" id="125694">  <div class="votes">
    <div id="Vu125694">
    <a href="https://www.php.net/manual/vote-note.php?id=125694&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd125694">
    <a href="https://www.php.net/manual/vote-note.php?id=125694&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V125694" title="80% like this...">
    3
    </div>
  </div>
  <a href="function.chmod.php.html#125694" class="name">
  <strong class="user"><em>no at no dot es</em></strong></a><a class="genanchor" href="function.chmod.php.html#125694"> &para;</a><div class="date" title="2021-01-18 09:43"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom125694">
<div class="phpcode"><code><span class="html">use a stored string for the mask is a pain<br />ex: $mask contains a string 0755<br />int($mask) not work (return 755)<br />the only way i found is use octdec($mask)</span></code></div>
  </div>
 </div>
  <div class="note" id="31383">  <div class="votes">
    <div id="Vu31383">
    <a href="https://www.php.net/manual/vote-note.php?id=31383&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd31383">
    <a href="https://www.php.net/manual/vote-note.php?id=31383&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V31383" title="71% like this...">
    17
    </div>
  </div>
  <a href="function.chmod.php.html#31383" class="name">
  <strong class="user"><em>pmichaud at pobox dot com</em></strong></a><a class="genanchor" href="function.chmod.php.html#31383"> &para;</a><div class="date" title="2003-04-19 03:45"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom31383">
<div class="phpcode"><code><span class="html">In the previous post, stickybit avenger writes:<br />    Just a little hint. I was once adwised to set the 'sticky bit', i.e. use 1777 as chmod-value...<br /><br />Note that in order to set the sticky bit on a file one must use '01777' (oct) and not '1777' (dec) as the parameter to chmod:<br /><br /><span class="default">&lt;?php<br />    chmod</span><span class="keyword">(</span><span class="string">"file"</span><span class="keyword">,</span><span class="default">01777</span><span class="keyword">);   </span><span class="comment">// correct<br />     </span><span class="default">chmod</span><span class="keyword">(</span><span class="string">"file"</span><span class="keyword">,</span><span class="default">1777</span><span class="keyword">);    </span><span class="comment">// incorrect, same as chmod("file",01023), causing no owner permissions!<br /></span><span class="default">?&gt;<br /></span><br />Rule of thumb: always prefix octal mode values with a zero.</span></code></div>
  </div>
 </div>
  <div class="note" id="51498">  <div class="votes">
    <div id="Vu51498">
    <a href="https://www.php.net/manual/vote-note.php?id=51498&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd51498">
    <a href="https://www.php.net/manual/vote-note.php?id=51498&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V51498" title="73% like this...">
    7
    </div>
  </div>
  <a href="function.chmod.php.html#51498" class="name">
  <strong class="user"><em>alex at feidesign dot com</em></strong></a><a class="genanchor" href="function.chmod.php.html#51498"> &para;</a><div class="date" title="2005-04-01 04:20"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom51498">
<div class="phpcode"><code><span class="html">If you cannot chmod files/directories with PHP because of safe_mode restrictions, but you can use FTP to chmod them, simply use PHP's FTP-functions (eg. ftp_chmod or ftp_site) instead. Not as efficient, but works.</span></code></div>
  </div>
 </div>
  <div class="note" id="82751">  <div class="votes">
    <div id="Vu82751">
    <a href="https://www.php.net/manual/vote-note.php?id=82751&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd82751">
    <a href="https://www.php.net/manual/vote-note.php?id=82751&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V82751" title="69% like this...">
    9
    </div>
  </div>
  <a href="function.chmod.php.html#82751" class="name">
  <strong class="user"><em>paul maybe at squirrel mail org</em></strong></a><a class="genanchor" href="function.chmod.php.html#82751"> &para;</a><div class="date" title="2008-04-24 05:09"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom82751">
<div class="phpcode"><code><span class="html">Note that info at rvgate dot nl's chmodnum function produces INCORRECT results.  The resutls are base-10 numbers that only LOOK like they are octal numbers.  The function also ignores setuid, setgid and sticky bits, and will produce incorrect numbers if such a file is encountered.  Instead, this brute-force code works.  Maybe there is something more slick, but this isn't too CPU-intensive (note that it assumes you've error-checked that you indeed have a 10-character string!):<br /><br /><span class="default">&lt;?php<br />      $permissions </span><span class="keyword">= </span><span class="string">'drwxr-xr-x'</span><span class="keyword">;  </span><span class="comment">// or whatever<br />      </span><span class="default">$mode </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br /><br />      if (</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] == </span><span class="string">'r'</span><span class="keyword">) </span><span class="default">$mode </span><span class="keyword">+= </span><span class="default">0400</span><span class="keyword">;<br />      if (</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] == </span><span class="string">'w'</span><span class="keyword">) </span><span class="default">$mode </span><span class="keyword">+= </span><span class="default">0200</span><span class="keyword">;<br />      if (</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] == </span><span class="string">'x'</span><span class="keyword">) </span><span class="default">$mode </span><span class="keyword">+= </span><span class="default">0100</span><span class="keyword">;<br />      else if (</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] == </span><span class="string">'s'</span><span class="keyword">) </span><span class="default">$mode </span><span class="keyword">+= </span><span class="default">04100</span><span class="keyword">;<br />      else if (</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] == </span><span class="string">'S'</span><span class="keyword">) </span><span class="default">$mode </span><span class="keyword">+= </span><span class="default">04000</span><span class="keyword">;<br /><br />      if (</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">] == </span><span class="string">'r'</span><span class="keyword">) </span><span class="default">$mode </span><span class="keyword">+= </span><span class="default">040</span><span class="keyword">;<br />      if (</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">] == </span><span class="string">'w'</span><span class="keyword">) </span><span class="default">$mode </span><span class="keyword">+= </span><span class="default">020</span><span class="keyword">;<br />      if (</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">] == </span><span class="string">'x'</span><span class="keyword">) </span><span class="default">$mode </span><span class="keyword">+= </span><span class="default">010</span><span class="keyword">;<br />      else if (</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">] == </span><span class="string">'s'</span><span class="keyword">) </span><span class="default">$mode </span><span class="keyword">+= </span><span class="default">02010</span><span class="keyword">;<br />      else if (</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">] == </span><span class="string">'S'</span><span class="keyword">) </span><span class="default">$mode </span><span class="keyword">+= </span><span class="default">02000</span><span class="keyword">;<br /><br />      if (</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">] == </span><span class="string">'r'</span><span class="keyword">) </span><span class="default">$mode </span><span class="keyword">+= </span><span class="default">04</span><span class="keyword">;<br />      if (</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">] == </span><span class="string">'w'</span><span class="keyword">) </span><span class="default">$mode </span><span class="keyword">+= </span><span class="default">02</span><span class="keyword">;<br />      if (</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">9</span><span class="keyword">] == </span><span class="string">'x'</span><span class="keyword">) </span><span class="default">$mode </span><span class="keyword">+= </span><span class="default">01</span><span class="keyword">;<br />      else if (</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">9</span><span class="keyword">] == </span><span class="string">'t'</span><span class="keyword">) </span><span class="default">$mode </span><span class="keyword">+= </span><span class="default">01001</span><span class="keyword">;<br />      else if (</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">9</span><span class="keyword">] == </span><span class="string">'T'</span><span class="keyword">) </span><span class="default">$mode </span><span class="keyword">+= </span><span class="default">01000</span><span class="keyword">;<br /><br />      </span><span class="default">printf</span><span class="keyword">(</span><span class="string">'Mode is %d decimal and %o octal'</span><span class="keyword">, </span><span class="default">$mode</span><span class="keyword">, </span><span class="default">$mode</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="87826">  <div class="votes">
    <div id="Vu87826">
    <a href="https://www.php.net/manual/vote-note.php?id=87826&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd87826">
    <a href="https://www.php.net/manual/vote-note.php?id=87826&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V87826" title="63% like this...">
    16
    </div>
  </div>
  <a href="function.chmod.php.html#87826" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.chmod.php.html#87826"> &para;</a><div class="date" title="2008-12-24 02:14"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom87826">
<div class="phpcode"><code><span class="html">Changes file mode recursive in $pathname to $filemode<br /><br /><span class="default">&lt;?php<br /><br />$iterator </span><span class="keyword">= new </span><span class="default">RecursiveIteratorIterator</span><span class="keyword">(new </span><span class="default">RecursiveDirectoryIterator</span><span class="keyword">(</span><span class="default">$pathname</span><span class="keyword">));<br /><br />foreach(</span><span class="default">$iterator </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">) {<br />    </span><span class="default">chmod</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">, </span><span class="default">$filemode</span><span class="keyword">);<br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="125011">  <div class="votes">
    <div id="Vu125011">
    <a href="https://www.php.net/manual/vote-note.php?id=125011&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd125011">
    <a href="https://www.php.net/manual/vote-note.php?id=125011&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V125011" title="71% like this...">
    3
    </div>
  </div>
  <a href="function.chmod.php.html#125011" class="name">
  <strong class="user"><em>Tuckbros</em></strong></a><a class="genanchor" href="function.chmod.php.html#125011"> &para;</a><div class="date" title="2020-05-15 06:26"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom125011">
<div class="phpcode"><code><span class="html">Just an update of the solution with octdec. You have to give octdec the string as a parameter.<br /><br />$mode = '644';<br />chmod(file_or_dir_name, octdec($mode));<br /><br />See also: <a href="http://www.php.net/manual/en/function.octdec.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/function.octdec.php</a></span></code></div>
  </div>
 </div>
  <div class="note" id="124784">  <div class="votes">
    <div id="Vu124784">
    <a href="https://www.php.net/manual/vote-note.php?id=124784&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd124784">
    <a href="https://www.php.net/manual/vote-note.php?id=124784&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V124784" title="64% like this...">
    4
    </div>
  </div>
  <a href="function.chmod.php.html#124784" class="name">
  <strong class="user"><em>chris at ocproducts dot com</em></strong></a><a class="genanchor" href="function.chmod.php.html#124784"> &para;</a><div class="date" title="2020-03-02 07:50"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom124784">
<div class="phpcode"><code><span class="html">Windows has a very different file permission model to Unix and integrates them only minimally.<br /><br />On Windows, all this function can do is to change the "read only" flag, which is turned on if $mode &amp; 0200 does not pass.<br />i.e. it only checks if u+w is missing from the bitmask, and if it is, it sets the read only flag.<br /><br />The executable flag cannot be set as Windows determines it based on file extension.<br />The write flag cannot be set as Windows determines write access based on ACLs, which are not integrated here.</span></code></div>
  </div>
 </div>
  <div class="note" id="71485">  <div class="votes">
    <div id="Vu71485">
    <a href="https://www.php.net/manual/vote-note.php?id=71485&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd71485">
    <a href="https://www.php.net/manual/vote-note.php?id=71485&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V71485" title="62% like this...">
    7
    </div>
  </div>
  <a href="function.chmod.php.html#71485" class="name">
  <strong class="user"><em>imoldgreg at o2 dot co dot uk</em></strong></a><a class="genanchor" href="function.chmod.php.html#71485"> &para;</a><div class="date" title="2006-11-30 05:32"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom71485">
<div class="phpcode"><code><span class="html">an update to 'neil at 11 out of 10's code for changing mode using FTP.<br /><br />changes: proper array added within the function (better for those of us who only need to connect to one ftp server) so only the mode and directory name need to be passed.<br /><br />the octal added, for completeness and predictable stability.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">changemode</span><span class="keyword">(</span><span class="default">$xcite</span><span class="keyword">)<br />{<br /></span><span class="default">$ftp_details </span><span class="keyword">= array(<br /></span><span class="default">ftp_user_name </span><span class="keyword">=&gt; </span><span class="string">'username'</span><span class="keyword">, <br /></span><span class="default">ftp_user_pass </span><span class="keyword">=&gt; </span><span class="string">'password'</span><span class="keyword">, <br /></span><span class="default">ftp_user_root </span><span class="keyword">=&gt; </span><span class="string">'/public_html/'</span><span class="keyword">, <br /></span><span class="default">ftp_server </span><span class="keyword">=&gt; </span><span class="string">'ftp.something.org' <br /></span><span class="keyword">);<br /><br /></span><span class="default">$path </span><span class="keyword">= </span><span class="string">"public"</span><span class="keyword">;<br /></span><span class="default">$mod </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$xcite</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">);<br /><br />   </span><span class="comment">// extract ftp details (array keys as variable names)<br />   </span><span class="default">extract </span><span class="keyword">(</span><span class="default">$ftp_details</span><span class="keyword">);<br />   <br />   </span><span class="comment">// set up basic connection<br />   </span><span class="default">$conn_id </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">$ftp_server</span><span class="keyword">);<br />   <br />   </span><span class="comment">// login with username and password<br />   </span><span class="default">$login_result </span><span class="keyword">= </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$ftp_user_name</span><span class="keyword">, </span><span class="default">$ftp_user_pass</span><span class="keyword">);<br />   <br />   </span><span class="comment">// try to chmod $path directory<br />   </span><span class="keyword">if (</span><span class="default">ftp_site</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="string">'CHMOD '</span><span class="keyword">.</span><span class="default">$mod</span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">.</span><span class="default">$ftp_root</span><span class="keyword">.</span><span class="default">$path</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {<br />       </span><span class="default">$success</span><span class="keyword">=</span><span class="default">TRUE</span><span class="keyword">;<br />   } <br />   else {<br />       </span><span class="default">$success</span><span class="keyword">=</span><span class="default">FALSE</span><span class="keyword">;<br />   }<br /><br />   </span><span class="comment">// close the connection<br />   </span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">);<br />    return </span><span class="default">$success</span><span class="keyword">;<br />}<br /><br /></span><span class="default">?&gt;<br /></span><br />for those of you, like me, who were looking for a way to make an 'un-hackable' uploader, here's the closest i got, now for a field test, good luck!</span></code></div>
  </div>
 </div>
  <div class="note" id="102716">  <div class="votes">
    <div id="Vu102716">
    <a href="https://www.php.net/manual/vote-note.php?id=102716&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd102716">
    <a href="https://www.php.net/manual/vote-note.php?id=102716&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V102716" title="59% like this...">
    5
    </div>
  </div>
  <a href="function.chmod.php.html#102716" class="name">
  <strong class="user"><em>Andrey P.</em></strong></a><a class="genanchor" href="function.chmod.php.html#102716"> &para;</a><div class="date" title="2011-03-01 02:23"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom102716">
<div class="phpcode"><code><span class="html">I was trying to change permissions of a folder with chmod command with FTP connection. (I needed a writable folder to upload pictures with php)<br /><br />I got the following respond:<br />"SITE CHMOD 777 uploads: command not understood"<br /><br />The reason: Server is running under Windows system that does not allow to set file permissions via FTP. Conversely, the UNIX-running servers allow that.<br /><br />Solutions:<br /><br />1. If your web hosting provider has a web-based control panel that lets you set file permissions, then you need to login there and make changes.<br /><br />2. It is possible to contact the hosting provider and ask them about this issue; maybe they can make the changes.<br /><br />3. It is possible to change the hosting provider that has servers run on UNIX, and keep the site there.</span></code></div>
  </div>
 </div>
  <div class="note" id="105570">  <div class="votes">
    <div id="Vu105570">
    <a href="https://www.php.net/manual/vote-note.php?id=105570&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd105570">
    <a href="https://www.php.net/manual/vote-note.php?id=105570&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V105570" title="54% like this...">
    3
    </div>
  </div>
  <a href="function.chmod.php.html#105570" class="name">
  <strong class="user"><em>h dot kuppens at cs dot ru dot nl</em></strong></a><a class="genanchor" href="function.chmod.php.html#105570"> &para;</a><div class="date" title="2011-08-29 02:51"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom105570">
<div class="phpcode"><code><span class="html">For recursive chmod'ing both files and directories in one step you can use the function below. Note that this function has one argument for directory permissions and one for file permissions.<br />In this way you can apply the 'x' permission on directories, and skip it on directories. This function also skips links.<br /><br />Example usage :<br /><br />   chmod_R( 'mydir', 0666, 0777);<br /><br />Makes all files and directories within mydir/ directory accessible for everyone, but doesn't make the files executable.<br /><br />I guess for very deeply nested directories the recursion with php can become problematic, but I can be wrong because I never investigated this.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">chmod_R</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$filemode</span><span class="keyword">, </span><span class="default">$dirmode</span><span class="keyword">) {<br />    if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) ) {<br />        if (!</span><span class="default">chmod</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$dirmode</span><span class="keyword">)) {<br />            </span><span class="default">$dirmode_str</span><span class="keyword">=</span><span class="default">decoct</span><span class="keyword">(</span><span class="default">$dirmode</span><span class="keyword">);<br />            print </span><span class="string">"Failed applying filemode '</span><span class="default">$dirmode_str</span><span class="string">' on directory '</span><span class="default">$path</span><span class="string">'\n"</span><span class="keyword">;<br />            print </span><span class="string">"  `-&gt; the directory '</span><span class="default">$path</span><span class="string">' will be skipped from recursive chmod\n"</span><span class="keyword">;<br />            return;<br />        }<br />        </span><span class="default">$dh </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br />        while ((</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />            if(</span><span class="default">$file </span><span class="keyword">!= </span><span class="string">'.' </span><span class="keyword">&amp;&amp; </span><span class="default">$file </span><span class="keyword">!= </span><span class="string">'..'</span><span class="keyword">) {  </span><span class="comment">// skip self and parent pointing directories<br />                </span><span class="default">$fullpath </span><span class="keyword">= </span><span class="default">$path</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">;<br />                </span><span class="default">chmod_R</span><span class="keyword">(</span><span class="default">$fullpath</span><span class="keyword">, </span><span class="default">$filemode</span><span class="keyword">,</span><span class="default">$dirmode</span><span class="keyword">);<br />            }<br />        }<br />        </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">);<br />    } else {<br />        if (</span><span class="default">is_link</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)) {<br />            print </span><span class="string">"link '</span><span class="default">$path</span><span class="string">' is skipped\n"</span><span class="keyword">;<br />            return;<br />        }<br />        if (!</span><span class="default">chmod</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$filemode</span><span class="keyword">)) {<br />            </span><span class="default">$filemode_str</span><span class="keyword">=</span><span class="default">decoct</span><span class="keyword">(</span><span class="default">$filemode</span><span class="keyword">);<br />            print </span><span class="string">"Failed applying filemode '</span><span class="default">$filemode_str</span><span class="string">' on file '</span><span class="default">$path</span><span class="string">'\n"</span><span class="keyword">;<br />            return;<br />        }<br />    }<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="91794">  <div class="votes">
    <div id="Vu91794">
    <a href="https://www.php.net/manual/vote-note.php?id=91794&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd91794">
    <a href="https://www.php.net/manual/vote-note.php?id=91794&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V91794" title="55% like this...">
    2
    </div>
  </div>
  <a href="function.chmod.php.html#91794" class="name">
  <strong class="user"><em>sander</em></strong></a><a class="genanchor" href="function.chmod.php.html#91794"> &para;</a><div class="date" title="2009-06-25 11:06"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom91794">
<div class="phpcode"><code><span class="html">if you want to chmod directories too, use this <br /><br /><span class="default">&lt;?php<br />$iterator </span><span class="keyword">= new </span><span class="default">RecursiveIteratorIterator</span><span class="keyword">(new </span><span class="default">RecursiveDirectoryIterator</span><span class="keyword">(</span><span class="default">$pathname</span><span class="keyword">), </span><span class="default">RecursiveIteratorIterator</span><span class="keyword">::</span><span class="default">SELF_FIRST</span><span class="keyword">);<br /><br />foreach(</span><span class="default">$iterator </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">) {<br />    </span><span class="default">chmod</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">, </span><span class="default">$filemode</span><span class="keyword">);<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="84273">  <div class="votes">
    <div id="Vu84273">
    <a href="https://www.php.net/manual/vote-note.php?id=84273&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd84273">
    <a href="https://www.php.net/manual/vote-note.php?id=84273&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V84273" title="55% like this...">
    2
    </div>
  </div>
  <a href="function.chmod.php.html#84273" class="name">
  <strong class="user"><em>nicolas at infosoft dot inf dot br</em></strong></a><a class="genanchor" href="function.chmod.php.html#84273"> &para;</a><div class="date" title="2008-07-07 05:37"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom84273">
<div class="phpcode"><code><span class="html">I use the code of haasje@welmers.net, but have a lite alteration. (linux symlink)<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">chmod_R</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$filemode</span><span class="keyword">) {<br />    if (!</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">))<br />        return </span><span class="default">chmod</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$filemode</span><span class="keyword">);<br /><br />    </span><span class="default">$dh </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br />    while ((</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />        if(</span><span class="default">$file </span><span class="keyword">!= </span><span class="string">'.' </span><span class="keyword">&amp;&amp; </span><span class="default">$file </span><span class="keyword">!= </span><span class="string">'..'</span><span class="keyword">) {<br />            </span><span class="default">$fullpath </span><span class="keyword">= </span><span class="default">$path</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">;<br />            if(</span><span class="default">is_link</span><span class="keyword">(</span><span class="default">$fullpath</span><span class="keyword">))<br />                return </span><span class="default">FALSE</span><span class="keyword">;<br />            elseif(!</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$fullpath</span><span class="keyword">))<br />                if (!</span><span class="default">chmod</span><span class="keyword">(</span><span class="default">$fullpath</span><span class="keyword">, </span><span class="default">$filemode</span><span class="keyword">))<br />                    return </span><span class="default">FALSE</span><span class="keyword">;<br />            elseif(!</span><span class="default">chmod_R</span><span class="keyword">(</span><span class="default">$fullpath</span><span class="keyword">, </span><span class="default">$filemode</span><span class="keyword">))<br />                return </span><span class="default">FALSE</span><span class="keyword">;<br />        }<br />    }<br /><br />    </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">);<br /><br />    if(</span><span class="default">chmod</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$filemode</span><span class="keyword">))<br />        return </span><span class="default">TRUE</span><span class="keyword">;<br />    else<br />        return </span><span class="default">FALSE</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span>thanks alls</span></code></div>
  </div>
 </div>
  <div class="note" id="74107">  <div class="votes">
    <div id="Vu74107">
    <a href="https://www.php.net/manual/vote-note.php?id=74107&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd74107">
    <a href="https://www.php.net/manual/vote-note.php?id=74107&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V74107" title="54% like this...">
    2
    </div>
  </div>
  <a href="function.chmod.php.html#74107" class="name">
  <strong class="user"><em>Ambriel_Angel at www dot ambriels dot net/entry</em></strong></a><a class="genanchor" href="function.chmod.php.html#74107"> &para;</a><div class="date" title="2007-03-25 06:00"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom74107">
<div class="phpcode"><code><span class="html"><span class="default">&lt;?php<br />error_reporting</span><span class="keyword">(</span><span class="default">E_ERROR </span><span class="keyword">| </span><span class="default">E_PARSE</span><span class="keyword">);<br /></span><span class="comment">/* Makes is so Directories are not browseable to the public,<br />removing only the Public = Read permission, while leaving <br />the other chmod permissions for the file in tact.<br /><br />If you have exectue already on, and read off, public viewers will only<br />be able to view files through links, but not browse<br />around to see what's inside of directories and see what<br />you've got laying around. */<br />//-------------------------------------------------------<br />// Get file mode<br />// Get file permissions supported by chmod<br /></span><span class="keyword">function </span><span class="default">getmod</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">) {<br />   </span><span class="default">$val </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />   </span><span class="default">$perms </span><span class="keyword">= </span><span class="default">fileperms</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">);<br />   </span><span class="comment">// Owner; User<br />   </span><span class="default">$val </span><span class="keyword">+= ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">0x0100</span><span class="keyword">) ? </span><span class="default">0x0100 </span><span class="keyword">: </span><span class="default">0x0000</span><span class="keyword">); </span><span class="comment">//Read<br />   </span><span class="default">$val </span><span class="keyword">+= ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">0x0080</span><span class="keyword">) ? </span><span class="default">0x0080 </span><span class="keyword">: </span><span class="default">0x0000</span><span class="keyword">); </span><span class="comment">//Write<br />   </span><span class="default">$val </span><span class="keyword">+= ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">0x0040</span><span class="keyword">) ? </span><span class="default">0x0040 </span><span class="keyword">: </span><span class="default">0x0000</span><span class="keyword">); </span><span class="comment">//Execute<br /> <br />   // Group<br />   </span><span class="default">$val </span><span class="keyword">+= ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">0x0020</span><span class="keyword">) ? </span><span class="default">0x0020 </span><span class="keyword">: </span><span class="default">0x0000</span><span class="keyword">); </span><span class="comment">//Read<br />   </span><span class="default">$val </span><span class="keyword">+= ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">0x0010</span><span class="keyword">) ? </span><span class="default">0x0010 </span><span class="keyword">: </span><span class="default">0x0000</span><span class="keyword">); </span><span class="comment">//Write<br />   </span><span class="default">$val </span><span class="keyword">+= ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">0x0008</span><span class="keyword">) ? </span><span class="default">0x0008 </span><span class="keyword">: </span><span class="default">0x0000</span><span class="keyword">); </span><span class="comment">//Execute<br /> <br />   // Global; World<br />   </span><span class="default">$val </span><span class="keyword">+= ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">0x0004</span><span class="keyword">) ? </span><span class="default">0x0004 </span><span class="keyword">: </span><span class="default">0x0000</span><span class="keyword">); </span><span class="comment">//Read<br />   </span><span class="default">$val </span><span class="keyword">+= ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">0x0002</span><span class="keyword">) ? </span><span class="default">0x0002 </span><span class="keyword">: </span><span class="default">0x0000</span><span class="keyword">); </span><span class="comment">//Write<br />   </span><span class="default">$val </span><span class="keyword">+= ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">0x0001</span><span class="keyword">) ? </span><span class="default">0x0001 </span><span class="keyword">: </span><span class="default">0x0000</span><span class="keyword">); </span><span class="comment">//Execute<br /><br />   // Misc<br />   </span><span class="default">$val </span><span class="keyword">+= ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">0x40000</span><span class="keyword">) ? </span><span class="default">0x40000 </span><span class="keyword">: </span><span class="default">0x0000</span><span class="keyword">); </span><span class="comment">//temporary file (01000000)<br />   </span><span class="default">$val </span><span class="keyword">+= ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">0x80000</span><span class="keyword">) ? </span><span class="default">0x80000 </span><span class="keyword">: </span><span class="default">0x0000</span><span class="keyword">); </span><span class="comment">//compressed file (02000000)<br />   </span><span class="default">$val </span><span class="keyword">+= ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">0x100000</span><span class="keyword">) ? </span><span class="default">0x100000 </span><span class="keyword">: </span><span class="default">0x0000</span><span class="keyword">); </span><span class="comment">//sparse file (04000000)<br />   </span><span class="default">$val </span><span class="keyword">+= ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">0x0800</span><span class="keyword">) ? </span><span class="default">0x0800 </span><span class="keyword">: </span><span class="default">0x0000</span><span class="keyword">); </span><span class="comment">//Hidden file (setuid bit) (04000)<br />   </span><span class="default">$val </span><span class="keyword">+= ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">0x0400</span><span class="keyword">) ? </span><span class="default">0x0400 </span><span class="keyword">: </span><span class="default">0x0000</span><span class="keyword">); </span><span class="comment">//System file (setgid bit) (02000)<br />   </span><span class="default">$val </span><span class="keyword">+= ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">0x0200</span><span class="keyword">) ? </span><span class="default">0x0200 </span><span class="keyword">: </span><span class="default">0x0000</span><span class="keyword">); </span><span class="comment">//Archive bit (sticky bit) (01000)<br /><br />   </span><span class="keyword">return </span><span class="default">$val</span><span class="keyword">;<br />}<br /><br /></span><span class="comment">//-------------------------------------------------------<br />// Find out if file has mode<br /></span><span class="keyword">function </span><span class="default">hasmod</span><span class="keyword">(</span><span class="default">$perms</span><span class="keyword">, </span><span class="default">$permission</span><span class="keyword">) {<br /><br /></span><span class="comment"># User Read = 0400 (256), Write = 0200 (128), Execute = 0100 (64)<br /># Group Read = 0040 (32), Write = 0020 (16), Execute = 0010 (8)<br /># Public Read = 0004 (4), Write = 0002 (2), Execute = 0001 (1)<br /><br />    </span><span class="keyword">return ((</span><span class="default">$perms </span><span class="keyword">&amp; </span><span class="default">$permission</span><span class="keyword">) == </span><span class="default">$permission</span><span class="keyword">);<br />}<br /><br /></span><span class="comment">//-------------------------------------------------------<br />// Take the read option off of all the subdirectories of the included path<br /></span><span class="keyword">function </span><span class="default">pathlock</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">, </span><span class="default">$listall </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">, </span><span class="default">$testrun </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">) {<br />   echo </span><span class="string">"START @ " </span><span class="keyword">. </span><span class="default">date</span><span class="keyword">(</span><span class="string">"F j, Y, h:i:s A"</span><span class="keyword">) . </span><span class="string">"&lt;br&gt;&lt;br&gt;"</span><span class="keyword">;<br />   echo (</span><span class="default">$testrun </span><span class="keyword">? </span><span class="string">'**Test Run Activated (no changes will be made).**&lt;br&gt;&lt;br&gt;' </span><span class="keyword">: </span><span class="string">'**Live Run Activated.**&lt;br&gt;&lt;br&gt;'</span><span class="keyword">);<br />   echo </span><span class="default">$dir </span><span class="keyword">. </span><span class="string">" is our directory.&lt;br&gt;&lt;br&gt;\n"</span><span class="keyword">;<br />   echo </span><span class="string">"[...IN PROGRESS...]&lt;br&gt;&lt;br&gt;"</span><span class="keyword">;<br /><br />   </span><span class="default">$file_list </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />   </span><span class="default">$stack</span><span class="keyword">[] = </span><span class="default">$dir</span><span class="keyword">;<br />  <br />   while (</span><span class="default">$stack</span><span class="keyword">) {<br />      </span><span class="default">$current_dir </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$stack</span><span class="keyword">);<br />      if (</span><span class="default">$dh </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$current_dir</span><span class="keyword">)) {<br />          while ((</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />              if (</span><span class="default">$file </span><span class="keyword">!== </span><span class="string">'.' </span><span class="keyword">AND </span><span class="default">$file </span><span class="keyword">!== </span><span class="string">'..'</span><span class="keyword">) {<br />                  </span><span class="default">$current_file </span><span class="keyword">= </span><span class="string">"</span><span class="keyword">{</span><span class="default">$current_dir</span><span class="keyword">}</span><span class="string">/</span><span class="keyword">{</span><span class="default">$file</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">;<br />               if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$current_file</span><span class="keyword">)) {<br />                      </span><span class="comment">// BEG ADD PATH    <br />                   </span><span class="default">$mode </span><span class="keyword">= </span><span class="default">getmod</span><span class="keyword">(</span><span class="default">$current_file</span><span class="keyword">);    </span><span class="comment">//Get the mode<br />                      </span><span class="default">$HasPubRead </span><span class="keyword">= </span><span class="default">hasmod</span><span class="keyword">(</span><span class="default">$mode</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">);<br />                   if (</span><span class="default">$HasPubRead </span><span class="keyword">|| </span><span class="default">$listall</span><span class="keyword">) {    </span><span class="comment">// Can the public read this dir?<br />                  //======================================<br />                    </span><span class="default">$ch </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />                  </span><span class="default">$take </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />                       </span><span class="comment">// Change the mode:<br />                     </span><span class="keyword">if (</span><span class="default">$HasPubRead</span><span class="keyword">) {<br />                          </span><span class="default">$take </span><span class="keyword">= </span><span class="default">4</span><span class="keyword">;         </span><span class="comment">// Value for Public Read. 4 is the same in octal and decimal.<br />                          </span><span class="keyword">if (!</span><span class="default">$testrun</span><span class="keyword">) {<br />                              </span><span class="default">$ch </span><span class="keyword">= </span><span class="default">chmod</span><span class="keyword">(</span><span class="default">$current_file</span><span class="keyword">, </span><span class="default">$mode</span><span class="keyword">-</span><span class="default">$take</span><span class="keyword">); <br />                          }<br />                      } <br /><br />                    echo </span><span class="default">$current_file </span><span class="keyword">. </span><span class="string">",current=" </span><span class="keyword">. </span><span class="default">decoct</span><span class="keyword">(</span><span class="default">$mode</span><span class="keyword">) . <br />                        ((</span><span class="default">$mode</span><span class="keyword">!==</span><span class="default">$mode</span><span class="keyword">-</span><span class="default">$take</span><span class="keyword">) ? </span><span class="string">",new=" </span><span class="keyword">. </span><span class="default">decoct</span><span class="keyword">(</span><span class="default">$mode</span><span class="keyword">-</span><span class="default">$take</span><span class="keyword">) : </span><span class="string">''</span><span class="keyword">) .<br />                        (</span><span class="default">$ch </span><span class="keyword">? </span><span class="string">'' </span><span class="keyword">: </span><span class="string">',FAILED'</span><span class="keyword">) . </span><span class="string">"&lt;br&gt;\n"</span><span class="keyword">;<br />                   } </span><span class="comment">// end if hasmod<br />                   // END ADD PATH                           <br />                      </span><span class="default">$stack</span><span class="keyword">[] = </span><span class="default">$current_file</span><span class="keyword">;<br />                  } </span><span class="comment">// if if_dir<br />              </span><span class="keyword">} </span><span class="comment">//if ($file !== '.' AND $file !== '..')<br />          </span><span class="keyword">} </span><span class="comment">//while (($file = readdir($dh)) !== false)<br />      </span><span class="keyword">} </span><span class="comment">//if ($dh = opendir($current_dir))<br /></span><span class="keyword">} </span><span class="comment">// while ($stack)<br /><br />    </span><span class="keyword">echo </span><span class="string">"&lt;br&gt;COMPLETE @ " </span><span class="keyword">. </span><span class="default">date</span><span class="keyword">(</span><span class="string">"F j, Y, h:i:s A"</span><span class="keyword">) . </span><span class="string">"&lt;br&gt;\n"</span><span class="keyword">;<br />return;<br />   </span><span class="comment">//return $path_list;<br /></span><span class="keyword">} </span><span class="comment">// end function<br /><br />//-------------------------------------------------------<br />    //listall Show all folders, even one's we're not going to process?<br />    //testrun Do a test run without making any changes<br />    </span><span class="default">pathlock</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"DOCUMENT_ROOT"</span><span class="keyword">],</span><span class="default">false</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">); </span><span class="comment">// listall?=false, testrun?=true<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="72103">  <div class="votes">
    <div id="Vu72103">
    <a href="https://www.php.net/manual/vote-note.php?id=72103&amp;page=function.chmod&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd72103">
    <a href="https://www.php.net/manual/vote-note.php?id=72103&amp;page=function.chmod&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V72103" title="52% like this...">
    1
    </div>
  </div>
  <a href="function.chmod.php.html#72103" class="name">
  <strong class="user"><em>webmaster at danopia dot 5gigs dot com</em></strong></a><a class="genanchor" href="function.chmod.php.html#72103"> &para;</a><div class="date" title="2007-01-02 06:20"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom72103">
<div class="phpcode"><code><span class="html">Thanks for your code, "imoldgreg at o2 dot co dot uk". I am using it for an instalation script that has to CHMOD a bunch of files. I have found it faster to use the same connectino for each, as shown below.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">// Thanks to "imoldgreg at o2 dot co dot uk" for the base 'CHMOD via FTP' script.<br /><br /></span><span class="keyword">function </span><span class="default">chmod_open</span><span class="keyword">()<br />{<br />    </span><span class="comment">// Use your own FTP info<br />    </span><span class="default">$ftp_user_name </span><span class="keyword">= </span><span class="string">'chmod@XXXXXXXXX.com'</span><span class="keyword">;<br />    </span><span class="default">$ftp_user_pass </span><span class="keyword">= </span><span class="string">'XXXXXXXXXX'</span><span class="keyword">;<br />    </span><span class="default">$ftp_root </span><span class="keyword">= </span><span class="string">'/'</span><span class="keyword">;<br />    </span><span class="default">$ftp_server </span><span class="keyword">= </span><span class="string">'localhost'</span><span class="keyword">;<br />    </span><span class="default">$conn_id </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">$ftp_server</span><span class="keyword">);<br />    </span><span class="default">$login_result </span><span class="keyword">= </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$ftp_user_name</span><span class="keyword">, </span><span class="default">$ftp_user_pass</span><span class="keyword">);<br />    return </span><span class="default">$conn_id</span><span class="keyword">;<br />}<br /><br />function </span><span class="default">chmod_file</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$permissions</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">)<br />{<br />    if (</span><span class="default">ftp_site</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="string">'CHMOD ' </span><span class="keyword">. </span><span class="default">$permissions </span><span class="keyword">. </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">$ftp_root </span><span class="keyword">. </span><span class="default">$path</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)<br />    {<br />        return </span><span class="default">TRUE</span><span class="keyword">;<br />    }<br />    else<br />    {<br />        return </span><span class="default">FALSE</span><span class="keyword">;<br />    }<br />}<br /><br />function </span><span class="default">chmod_close</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">)<br />{<br />    </span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">);<br />}<br /><br /></span><span class="comment">// CHMOD the required setup files<br /><br />// Connect to the FTP<br /></span><span class="default">$conn_id </span><span class="keyword">= </span><span class="default">chmod_open</span><span class="keyword">();<br /><br /></span><span class="comment">// CHMOD each file and echo the results<br /></span><span class="keyword">echo </span><span class="default">chmod_file</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">777</span><span class="keyword">, </span><span class="string">'master/cache/'</span><span class="keyword">) ? </span><span class="string">'CHMODed successfully!' </span><span class="keyword">: </span><span class="string">'Error'</span><span class="keyword">;<br />echo </span><span class="default">chmod_file</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">777</span><span class="keyword">, </span><span class="string">'master/files/'</span><span class="keyword">) ? </span><span class="string">'CHMODed successfully!' </span><span class="keyword">: </span><span class="string">'Error'</span><span class="keyword">;<br />echo </span><span class="default">chmod_file</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">777</span><span class="keyword">, </span><span class="string">'master/store/'</span><span class="keyword">) ? </span><span class="string">'CHMODed successfully!' </span><span class="keyword">: </span><span class="string">'Error'</span><span class="keyword">;<br />echo </span><span class="default">chmod_file</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">766</span><span class="keyword">, </span><span class="string">'master/config.php'</span><span class="keyword">) ? </span><span class="string">'CHMODed successfully!' </span><span class="keyword">: </span><span class="string">'Error'</span><span class="keyword">;<br />echo </span><span class="default">chmod_file</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">777</span><span class="keyword">, </span><span class="string">'master/images/avatars/upload/'</span><span class="keyword">) ? </span><span class="string">'CHMODed successfully!' </span><span class="keyword">: </span><span class="string">'Error'</span><span class="keyword">;<br /><br /></span><span class="comment">// Close the connection<br /></span><span class="default">chmod_close</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;<br /></span><br />Here, the same FTP connection is used for each CHMOD command, making the execute time lower. This is essential for me, since my script is also copying a bunch of files.</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.chmod&amp;redirect=https://www.php.net/manual/ru/function.chmod.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.filesystem.php.html">Функции файловой системы</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.basename.php.html" title="basename">basename</a>
                        </li>
                                                <li class="">
                            <a href="function.chgrp.php.html" title="chgrp">chgrp</a>
                        </li>
                                                <li class="current">
                            <a href="function.chmod.php.html" title="chmod">chmod</a>
                        </li>
                                                <li class="">
                            <a href="function.chown.php.html" title="chown">chown</a>
                        </li>
                                                <li class="">
                            <a href="function.clearstatcache.php.html" title="clearstatcache">clearstatcache</a>
                        </li>
                                                <li class="">
                            <a href="function.copy.php.html" title="copy">copy</a>
                        </li>
                                                <li class="">
                            <a href="function.delete.php.html" title="delete">delete</a>
                        </li>
                                                <li class="">
                            <a href="function.dirname.php.html" title="dirname">dirname</a>
                        </li>
                                                <li class="">
                            <a href="function.disk-free-space.php.html" title="disk_&#8203;free_&#8203;space">disk_&#8203;free_&#8203;space</a>
                        </li>
                                                <li class="">
                            <a href="function.disk-total-space.php.html" title="disk_&#8203;total_&#8203;space">disk_&#8203;total_&#8203;space</a>
                        </li>
                                                <li class="">
                            <a href="function.diskfreespace.php.html" title="diskfreespace">diskfreespace</a>
                        </li>
                                                <li class="">
                            <a href="function.fclose.php.html" title="fclose">fclose</a>
                        </li>
                                                <li class="">
                            <a href="function.fdatasync.php.html" title="fdatasync">fdatasync</a>
                        </li>
                                                <li class="">
                            <a href="function.feof.php.html" title="feof">feof</a>
                        </li>
                                                <li class="">
                            <a href="function.fflush.php.html" title="fflush">fflush</a>
                        </li>
                                                <li class="">
                            <a href="function.fgetc.php.html" title="fgetc">fgetc</a>
                        </li>
                                                <li class="">
                            <a href="function.fgetcsv.php.html" title="fgetcsv">fgetcsv</a>
                        </li>
                                                <li class="">
                            <a href="function.fgets.php.html" title="fgets">fgets</a>
                        </li>
                                                <li class="">
                            <a href="function.fgetss.php.html" title="fgetss">fgetss</a>
                        </li>
                                                <li class="">
                            <a href="function.file-exists.php.html" title="file_&#8203;exists">file_&#8203;exists</a>
                        </li>
                                                <li class="">
                            <a href="function.file-get-contents.php.html" title="file_&#8203;get_&#8203;contents">file_&#8203;get_&#8203;contents</a>
                        </li>
                                                <li class="">
                            <a href="function.file-put-contents.php.html" title="file_&#8203;put_&#8203;contents">file_&#8203;put_&#8203;contents</a>
                        </li>
                                                <li class="">
                            <a href="function.file.php.html" title="file">file</a>
                        </li>
                                                <li class="">
                            <a href="function.fileatime.php.html" title="fileatime">fileatime</a>
                        </li>
                                                <li class="">
                            <a href="function.filectime.php.html" title="filectime">filectime</a>
                        </li>
                                                <li class="">
                            <a href="function.filegroup.php.html" title="filegroup">filegroup</a>
                        </li>
                                                <li class="">
                            <a href="function.fileinode.php.html" title="fileinode">fileinode</a>
                        </li>
                                                <li class="">
                            <a href="function.filemtime.php.html" title="filemtime">filemtime</a>
                        </li>
                                                <li class="">
                            <a href="function.fileowner.php.html" title="fileowner">fileowner</a>
                        </li>
                                                <li class="">
                            <a href="function.fileperms.php.html" title="fileperms">fileperms</a>
                        </li>
                                                <li class="">
                            <a href="function.filesize.php.html" title="filesize">filesize</a>
                        </li>
                                                <li class="">
                            <a href="function.filetype.php.html" title="filetype">filetype</a>
                        </li>
                                                <li class="">
                            <a href="function.flock.php.html" title="flock">flock</a>
                        </li>
                                                <li class="">
                            <a href="function.fnmatch.php.html" title="fnmatch">fnmatch</a>
                        </li>
                                                <li class="">
                            <a href="function.fopen.php.html" title="fopen">fopen</a>
                        </li>
                                                <li class="">
                            <a href="function.fpassthru.php.html" title="fpassthru">fpassthru</a>
                        </li>
                                                <li class="">
                            <a href="function.fputcsv.php.html" title="fputcsv">fputcsv</a>
                        </li>
                                                <li class="">
                            <a href="function.fputs.php.html" title="fputs">fputs</a>
                        </li>
                                                <li class="">
                            <a href="function.fread.php.html" title="fread">fread</a>
                        </li>
                                                <li class="">
                            <a href="function.fscanf.php.html" title="fscanf">fscanf</a>
                        </li>
                                                <li class="">
                            <a href="function.fseek.php.html" title="fseek">fseek</a>
                        </li>
                                                <li class="">
                            <a href="function.fstat.php.html" title="fstat">fstat</a>
                        </li>
                                                <li class="">
                            <a href="function.fsync.php.html" title="fsync">fsync</a>
                        </li>
                                                <li class="">
                            <a href="function.ftell.php.html" title="ftell">ftell</a>
                        </li>
                                                <li class="">
                            <a href="function.ftruncate.php.html" title="ftruncate">ftruncate</a>
                        </li>
                                                <li class="">
                            <a href="function.fwrite.php.html" title="fwrite">fwrite</a>
                        </li>
                                                <li class="">
                            <a href="function.glob.php.html" title="glob">glob</a>
                        </li>
                                                <li class="">
                            <a href="function.is-dir.php.html" title="is_&#8203;dir">is_&#8203;dir</a>
                        </li>
                                                <li class="">
                            <a href="function.is-executable.php.html" title="is_&#8203;executable">is_&#8203;executable</a>
                        </li>
                                                <li class="">
                            <a href="function.is-file.php.html" title="is_&#8203;file">is_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.is-link.php.html" title="is_&#8203;link">is_&#8203;link</a>
                        </li>
                                                <li class="">
                            <a href="function.is-readable.php.html" title="is_&#8203;readable">is_&#8203;readable</a>
                        </li>
                                                <li class="">
                            <a href="function.is-uploaded-file.php.html" title="is_&#8203;uploaded_&#8203;file">is_&#8203;uploaded_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.is-writable.php.html" title="is_&#8203;writable">is_&#8203;writable</a>
                        </li>
                                                <li class="">
                            <a href="function.is-writeable.php.html" title="is_&#8203;writeable">is_&#8203;writeable</a>
                        </li>
                                                <li class="">
                            <a href="function.lchgrp.php.html" title="lchgrp">lchgrp</a>
                        </li>
                                                <li class="">
                            <a href="function.lchown.php.html" title="lchown">lchown</a>
                        </li>
                                                <li class="">
                            <a href="function.link.php.html" title="link">link</a>
                        </li>
                                                <li class="">
                            <a href="function.linkinfo.php.html" title="linkinfo">linkinfo</a>
                        </li>
                                                <li class="">
                            <a href="function.lstat.php.html" title="lstat">lstat</a>
                        </li>
                                                <li class="">
                            <a href="function.mkdir.php.html" title="mkdir">mkdir</a>
                        </li>
                                                <li class="">
                            <a href="function.move-uploaded-file.php.html" title="move_&#8203;uploaded_&#8203;file">move_&#8203;uploaded_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.parse-ini-file.php.html" title="parse_&#8203;ini_&#8203;file">parse_&#8203;ini_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.parse-ini-string.php.html" title="parse_&#8203;ini_&#8203;string">parse_&#8203;ini_&#8203;string</a>
                        </li>
                                                <li class="">
                            <a href="function.pathinfo.php.html" title="pathinfo">pathinfo</a>
                        </li>
                                                <li class="">
                            <a href="function.pclose.php.html" title="pclose">pclose</a>
                        </li>
                                                <li class="">
                            <a href="function.popen.php.html" title="popen">popen</a>
                        </li>
                                                <li class="">
                            <a href="function.readfile.php.html" title="readfile">readfile</a>
                        </li>
                                                <li class="">
                            <a href="function.readlink.php.html" title="readlink">readlink</a>
                        </li>
                                                <li class="">
                            <a href="function.realpath-cache-get.php.html" title="realpath_&#8203;cache_&#8203;get">realpath_&#8203;cache_&#8203;get</a>
                        </li>
                                                <li class="">
                            <a href="function.realpath-cache-size.php.html" title="realpath_&#8203;cache_&#8203;size">realpath_&#8203;cache_&#8203;size</a>
                        </li>
                                                <li class="">
                            <a href="function.realpath.php.html" title="realpath">realpath</a>
                        </li>
                                                <li class="">
                            <a href="function.rename.php.html" title="rename">rename</a>
                        </li>
                                                <li class="">
                            <a href="function.rewind.php.html" title="rewind">rewind</a>
                        </li>
                                                <li class="">
                            <a href="function.rmdir.php.html" title="rmdir">rmdir</a>
                        </li>
                                                <li class="">
                            <a href="function.set-file-buffer.php.html" title="set_&#8203;file_&#8203;buffer">set_&#8203;file_&#8203;buffer</a>
                        </li>
                                                <li class="">
                            <a href="function.stat.php.html" title="stat">stat</a>
                        </li>
                                                <li class="">
                            <a href="function.symlink.php.html" title="symlink">symlink</a>
                        </li>
                                                <li class="">
                            <a href="function.tempnam.php.html" title="tempnam">tempnam</a>
                        </li>
                                                <li class="">
                            <a href="function.tmpfile.php.html" title="tmpfile">tmpfile</a>
                        </li>
                                                <li class="">
                            <a href="function.touch.php.html" title="touch">touch</a>
                        </li>
                                                <li class="">
                            <a href="function.umask.php.html" title="umask">umask</a>
                        </li>
                                                <li class="">
                            <a href="function.unlink.php.html" title="unlink">unlink</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
