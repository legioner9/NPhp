<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: curl_setopt - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.curl-setopt.php.html">
 <link rel="shorturl" href="https://www.php.net/curl-setopt">
 <link rel="alternate" href="https://www.php.net/curl-setopt" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.curl.php.html">
 <link rel="prev" href="function.curl-setopt-array.php.html">
 <link rel="next" href="function.curl-share-close.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.curl-setopt.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.curl-setopt.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.curl-setopt.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.curl-setopt.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.curl-setopt.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.curl-setopt.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.curl-setopt.php" hreflang="pt_BR">
 <link rel="alternate" href="function.curl-setopt.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.curl-setopt.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.curl-setopt.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.curl-share-close.php.html">
          curl_share_close &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.curl-setopt-array.php.html">
          &laquo; curl_setopt_array        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.remote.other.php.html'>Другие службы</a></li>      <li><a href='book.curl.php.html'>cURL</a></li>      <li><a href='ref.curl.php.html'>Функции cURL</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.curl-setopt.php'>English</option>
            <option value='de/function.curl-setopt.php'>German</option>
            <option value='es/function.curl-setopt.php'>Spanish</option>
            <option value='fr/function.curl-setopt.php'>French</option>
            <option value='it/function.curl-setopt.php'>Italian</option>
            <option value='ja/function.curl-setopt.php'>Japanese</option>
            <option value='pt_BR/function.curl-setopt.php'>Brazilian Portuguese</option>
            <option value='ru/function.curl-setopt.php' selected="selected">Russian</option>
            <option value='tr/function.curl-setopt.php'>Turkish</option>
            <option value='zh/function.curl-setopt.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/curl/functions/curl-setopt.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.curl-setopt%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.curl-setopt" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">curl_setopt</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.2, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">curl_setopt</span> &mdash; <span class="dc-title">Устанавливает параметр для cURL-передачи</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.curl-setopt-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>curl_setopt</strong></span>(<span class="methodparam"><span class="type"><a href="class.curlhandle.php.html" class="type CurlHandle">CurlHandle</a></span> <code class="parameter">$handle</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$option</code></span>, <span class="methodparam"><span class="type"><a href="language.types.declarations.php.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   Устанавливает параметр для указанного дескриптора сеанса cURL.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.curl-setopt-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    <dt>
<code class="parameter">handle</code>
</dt>
<dd>
<p class="para">Дескриптор cURL, полученный из <span class="function"><a href="function.curl-init.php.html" class="function">curl_init()</a></span>.</p></dd>

    
     <dt>
<code class="parameter">option</code></dt>

     <dd>

      <p class="para">
       Параметр <code class="literal">CURLOPT_XXX</code>, который нужно установить.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">value</code></dt>

     <dd>

      <p class="para">
       Значение для параметра <code class="parameter">option</code>.
      </p>
      <p class="para">
       Значение параметра <code class="parameter">value</code>
       должно быть логическим (<span class="type">bool</span>)
       для следующих значений параметра <code class="parameter">option</code>:
       <table class="doctable informaltable">
        
         <thead>
          <tr>
           <th>Параметр</th>
           <th>Устанавливаемое значение <code class="parameter">value</code></th>
           <th>Примечания</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_AUTOREFERER</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для автоматической установки поля <code class="literal">Referer:</code>
            в запросах, перенаправленных заголовком <code class="literal">Location:</code>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_COOKIESESSION</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для указания текущему сеансу начать новую «сессию» cookies. Это заставит
            модуль libcurl проигнорировать все «сессионные» cookies из предыдущего сеанса,
            которые он собирается загрузить. По умолчанию модуль libcurl всегда
            сохраняет и загружает все cookies, вне зависимости от того, являются ли они
            «сессионными» или нет. «Сессионные» cookies — это cookies без срока истечения,
            которые должны существовать только для текущей «сессии».
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_CERTINFO</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для вывода информации о сертификате SSL в поток <code class="literal">STDERR</code>
            при безопасных соединениях.
           </td>
           <td style="vertical-align: top;">
            Добавлена в cURL 7.19.1.
            Для корректной работы требует
            включённой опции <strong><code>CURLOPT_VERBOSE</code></strong>.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_CONNECT_ONLY</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> сообщает библиотеке, чтобы она провела необходимые аутентификацию прокси
            и настройку соединения, но не передавала данные. Эта опция реализована для
            HTTP, SMTP и POP3.
           </td>
           <td style="vertical-align: top;">
            Добавлена в 7.15.2.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_CRLF</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для преобразования концов строк Unix в CRLF.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_DISALLOW_USERNAME_IN_URL</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для запрета URL-адресов, содержащих имя пользователя.
            Имена пользователей по умолчанию разрешены (0).
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.61.0. Доступно с PHP 7.3.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_DNS_SHUFFLE_ADDRESSES</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для перемешивания порядка всех возвращённых адресов так, чтобы они выбирались
            в случайном порядке, когда имя разрешено и возвращено более одного IP-адреса.
            Поэтому IPv4 может быть выбран до IPv6 или наоборот.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.60.0. Доступно с PHP 7.3.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_HAPROXYPROTOCOL</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для отправки заголовка протокола HAProxy PROXY v1 в начале соединения.
            Действие по умолчанию — не отправлять заголовок.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.60.0. Доступно с PHP 7.3.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSH_COMPRESSION</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для включения встроенного сжатия SSH. Это запрос, а указание;
            сервер может это и не выполнить.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.56.0. Доступно с PHP 7.3.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_DNS_USE_GLOBAL_CACHE</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для разрешения имён через глобальный кеш DNS. Этот параметр
            не потокобезопасный. Он условно включён по умолчанию, если PHP собран
            для потоконебезопасной работы (CLI, FCGI, Apache2-Prefork, и т. д.).
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_FAILONERROR</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для подробного отчёта при неудаче, если полученный HTTP-код
            больше или равен 400. Поведение по умолчанию возвращает страницу
            как обычно, игнорируя код.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSL_FALSESTART</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для разрешения ложного старта TLS.
           </td>
           <td style="vertical-align: top;">
            Добавлено cURL 7.42.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_FILETIME</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для попытки получения даты модификации удалённого документа.
            Дату получают, вызывая функцию <span class="function"><a href="function.curl-getinfo.php.html" class="function">curl_getinfo()</a></span>
            с опцией <strong><code>CURLINFO_FILETIME</code></strong>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_FOLLOWLOCATION</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для следования любому заголовку
            <code class="literal">«Location: »</code>, отправленному сервером
            в ответе.
            Смотрите также <strong><code>CURLOPT_MAXREDIRS</code></strong>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_FORBID_REUSE</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong>, чтобы соединение принудительно закрывалось,
            когда обработка завершилась, и не попадало в пул
            открытых соединений — было недоступно для повторной передачи.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_FRESH_CONNECT</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для принудительной установки нового соединения
            вместо закешированного.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_FTP_USE_EPRT</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для отправки команд EPRT (и LPRT) при активных FTP-загрузках.
            Указывают <strong><code>false</code></strong>, чтобы отключить команды EPRT и LPRT
            и использовать только команду PORT.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_FTP_USE_EPSV</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для первоначальной пробы команды EPSV при FTP-передачах.
            Если команда не удалась, будет произведён обратный
            откат к PASV. Установите в <strong><code>false</code></strong> для отключения EPSV.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_FTP_CREATE_MISSING_DIRS</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для создания отсутствующих директорий, если FTP-операция
            обнаруживает несуществующий путь.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_FTPAPPEND</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для записи в конец удалённого файла, вместо перезаписывания.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_TCP_NODELAY</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для отключения алгоритма Нейгла, который пытается
            уменьшить количество мелких пакетов в сети.
           </td>
           <td style="vertical-align: top;">
            Доступна для версий собранных с libcurl 7.11.2 или новее.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_FTPASCII</code></strong></td>
           <td style="vertical-align: top;">
            Псевдоним <strong><code>CURLOPT_TRANSFERTEXT</code></strong>.
            Используйте его вместо этого.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_FTPLISTONLY</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для возврата только списка имён из FTP-директории.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_HEADER</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для включения заголовков в вывод.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td><strong><code>CURLINFO_HEADER_OUT</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для отслеживания строки запроса дескриптора.
           </td>
           <td style="vertical-align: top;">
            Префикс <strong><code>CURLINFO_</code></strong>
            использован преднамеренно.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_HTTP09_ALLOWED</code></strong></td>
           <td style="vertical-align: top;">
            Определяет, разрешить ли ответы HTTP/0.9. С версии модуля libcurl 7.66.0 значение по умолчанию — <strong><code>false</code></strong>;
            ранее по умолчанию было логическое <strong><code>true</code></strong>.
           </td>
           <td style="vertical-align: top;">
            Доступна с PHP 7.3.15 и 7.4.3, соответственно, если собрано с модулем libcurl &gt;= 7.64.0
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_HTTPGET</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для сброса метода HTTP-запроса на метод GET.
            Поскольку метод GET установлен по умолчанию, этот параметр необходим только
            в случае, если метод запроса был ранее изменён.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_HTTPPROXYTUNNEL</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для туннелирования через указанный HTTP-прокси.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_HTTP_CONTENT_DECODING</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>false</code></strong> для получения необработанного тела HTTP-ответа.
           </td>
           <td style="vertical-align: top;">
            Доступно, если собран с libcurl &gt;= 7.16.2.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_KEEP_SENDING_ON_ERROR</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для продолжения посылать тело запроса, если возвращаемый HTTP-код
            равен или больше 300. Действие по умолчанию — остановить отправку
            и закрыть поток или соединение. Подходит для ручной аутентификации NTLM.
            Большинству приложений эта опция не нужна.
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0, если собран с libcurl &gt;= 7.51.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_MUTE</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для полного отключения сообщений функций cURL.
           </td>
           <td style="vertical-align: top;">
            Удалена в cURL 7.15.5 (Можно использовать опцию CURLOPT_RETURNTRANSFER)
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_NETRC</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для считывания файла <var class="filename">~/.netrc</var>,
            чтобы найти логин и пароль для удалённого сайта, с которым
            устанавливается соединение.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_NOBODY</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для исключения тела ответа из вывода.
            Метод запроса устанавливается в HEAD. Смена этого параметра в <strong><code>false</code></strong>
            не меняет его обратно в GET.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_NOPROGRESS</code></strong></td>
           <td style="vertical-align: top;"><p class="para">
            <strong><code>true</code></strong> для отмены индикатора прогресса при передачах cURL.
            <blockquote class="note"><p><strong class="note">Замечание</strong>: 
             <p class="para">
              PHP автоматически устанавливает этот параметр в <strong><code>true</code></strong>, меняйте
              его только для отладочных целей.
             </p>
            </p></blockquote>
            </p></td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_NOSIGNAL</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для игнорирования любой функции cURL, посылающей сигналы
            PHP процессу. Этот параметр включён по умолчанию в многопоточных
            SAPI для корректной работы параметров времени ожидания.
           </td>
           <td style="vertical-align: top;">
            Добавлен в cURL 7.10.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PATH_AS_IS</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для игнорирования последовательностей с двумя точками.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.42.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PIPEWAIT</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для ожидания конвейера/мультиплексирования.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.43.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_POST</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для отправки запроса обычным HTTP-методом POST. Метод POST
            использует обычный тип тела запроса <code class="literal">application/x-www-form-urlencoded</code>,
            который большей частью встречается при отправке HTML-форм.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PUT</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для загрузки файла HTTP-методом PUT. Загружаемый файл должен быть
            задан с помощью параметров <strong><code>CURLOPT_INFILE</code></strong>
            и <strong><code>CURLOPT_INFILESIZE</code></strong>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_RETURNTRANSFER</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для возврата результата передачи в качестве строки из
            <span class="function"><a href="function.curl-exec.php.html" class="function">curl_exec()</a></span> вместо прямого вывода в браузер.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SASL_IR</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для разрешения отправки инициирующего ответа в первом пакете.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.31.10. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSL_ENABLE_ALPN</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>false</code></strong> для отключения ALPN в SSL-рукопожатии (если на бэкенде SSL-модуль
            libcurl собран с её поддержкой), это можно использовать при соединении http2.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.36.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSL_ENABLE_NPN</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>false</code></strong> для отключения ALPN в SSL-рукопожатии (если на бэкенде SSL
            libcurl собран с её поддержкой), это можно использовать при соединении http2.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.36.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSL_VERIFYPEER</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>false</code></strong> для остановки cURL от проверки сертификата узла сети.
            Альтернативные сертификаты для проверки могут быть указаны
            в параметре <strong><code>CURLOPT_CAINFO</code></strong> или директории с
            сертификатами, указываемой параметром <strong><code>CURLOPT_CAPATH</code></strong>.
           </td>
           <td style="vertical-align: top;">
            Начиная с версии cURL 7.10 значение по умолчанию равно <strong><code>true</code></strong>.
            Дистрибутив по умолчанию устанавливается с версией cURL 7.10.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSL_VERIFYSTATUS</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для проверки статуса сертификата.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.41.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_SSL_VERIFYPEER</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>false</code></strong> для остановки cURL от проверки сертификата пира.
            Альтернативные сертификаты для проверки могут быть
            указаны с помощью параметра <strong><code>CURLOPT_CAINFO</code></strong>,
            а каталог сертификатов может быть указан с помощью
            параметра <strong><code>CURLOPT_CAPATH</code></strong>.
            Если установлено значение false, проверка сертификата однорангового узла завершается успешно несмотря ни на что.
           </td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> по умолчанию. Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SAFE_UPLOAD</code></strong></td>
           <td style="vertical-align: top;">
            Всегда <strong><code>true</code></strong>, это отключает поддержку префикса <code class="literal">@</code> для загрузки файлов
            в <strong><code>CURLOPT_POSTFIELDS</code></strong> и означает, что значения,
            начинающиеся с <code class="literal">@</code>, могут быть безопасно переданы в качестве полей.
            Вместо этого для загрузки файлов можно использовать объект <span class="classname"><a href="class.curlfile.php.html" class="classname">CURLFile</a></span>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SUPPRESS_CONNECT_HEADERS</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для подавления заголовков ответов прокси-сервера CONNECT из пользовательских callback-функции
            <strong><code>CURLOPT_HEADERFUNCTION</code></strong> и <strong><code>CURLOPT_WRITEFUNCTION</code></strong>,
            когда установлена опция <strong><code>CURLOPT_HTTPPROXYTUNNEL</code></strong> и выполняется запрос CONNECT.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.54.0. Доступно с PHP 7.3.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_TCP_FASTOPEN</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для разрешения TCP Fast Open.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.49.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_TFTP_NO_OPTIONS</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для запрета отправки запросов TFTP-опций.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.48.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_TRANSFERTEXT</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для установки ASCII-режима при FTP-передачах. При передаче данных по протоколу LDAP
            данные возвращаются простым текстом вместо HTML. В системах Windows
            это не установит поток <code class="literal">STDOUT</code> в бинарный режим.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_UNRESTRICTED_AUTH</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для продолжения отправки логина и пароля при перенаправлениях
            (используя <strong><code>CURLOPT_FOLLOWLOCATION</code></strong>),
            даже при изменении имени хоста.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_UPLOAD</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для подготовки к загрузке файла на сервер.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_VERBOSE</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>true</code></strong> для вывода дополнительной информации. Записывает вывод в
            поток <code class="literal">STDERR</code>, или файл, указанный параметром
            <strong><code>CURLOPT_STDERR</code></strong>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

         </tbody>
        
       </table>

      </p>
      <p class="para">
       Для следующих значений параметра <code class="parameter">option</code>,
       параметр <code class="parameter">value</code> должен быть типа
       <span class="type">int</span>:
       <table class="doctable informaltable">
        
         <thead>
          <tr>
           <th>Параметр</th>
           <th>Устанавливаемое значение <code class="parameter">value</code></th>
           <th>Замечания</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_BUFFERSIZE</code></strong></td>
           <td style="vertical-align: top;">
            Размер буфера (в байтах), который будет выделяться при каждом чтении. Однако нет
            гарантии, что запрос на получение такого размера будет исполнен.
           </td>
           <td style="vertical-align: top;">
            Добавлен в версии cURL 7.10.
           </td>
          </tr>

          <tr>
           <td><strong><code>CURLOPT_CONNECTTIMEOUT</code></strong></td>
           <td style="vertical-align: top;">
            Количество секунд ожидания, отведённых на попытку соединения. Установка
            значения 0 приведёт к неограниченному ожиданию.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_CONNECTTIMEOUT_MS</code></strong></td>
           <td style="vertical-align: top;">
            Количество миллисекунд ожидания, отведённых на попытку соединения. Установка
            значения 0 приведёт к неограниченному ожиданию.
            
            Если библиотека libcurl скомпилирована со стандартным системным
            преобразователем имён, то эта часть соединения по-прежнему будет использовать
            полносекундное разрешение интервалов с минимальным допустимым
            временем ожидания в 1 секунду.
           </td>
           <td style="vertical-align: top;">
            Добавлен в версии cURL 7.16.2.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_DNS_CACHE_TIMEOUT</code></strong></td>
           <td style="vertical-align: top;">
            Количество секунд, в течение которых в памяти хранятся DNS-записи.
            По умолчанию этот параметр равен 120 (2 минуты).
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_EXPECT_100_TIMEOUT_MS</code></strong></td>
           <td style="vertical-align: top;">
            Время ожидания ответов с заголовком <code class="literal">Expect: 100-continue</code> в миллисекундах.
            По умолчанию — 1000 миллисекунд.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.36.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_HAPPY_EYEBALLS_TIMEOUT_MS</code></strong></td>
           <td style="vertical-align: top;">
            Преимущество протокола ipv6 для алгоритма Happy Eyeballs. Алгоритм Happy Eyeballs пытается
            подключиться как к адресам IPv4, так и к адресам IPv6 для хостов с двойным стеком,
            отдавая преимущество сначала IPv6 на время ожидания в миллисекундах.
            Значение по умолчанию — CURL_HET_DEFAULT, которое составляет 200 миллисекунд.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.59.0. Доступно с PHP 7.3.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_FTPSSLAUTH</code></strong></td>
           <td style="vertical-align: top;">
            Метод FTP-аутентификации (в активном режиме):
            <code class="literal">CURLFTPAUTH_SSL</code> (сначала проверяется SSL),
            <code class="literal">CURLFTPAUTH_TLS</code> (сначала проверяется TLS) или
            <code class="literal">CURLFTPAUTH_DEFAULT</code> (cURL решает сама).
           </td>
           <td style="vertical-align: top;">
            Добавлен в cURL 7.12.2.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_HEADEROPT</code></strong></td>
           <td style="vertical-align: top;">
            Что делать с заголовками. Одна из следующих опций:
            <span class="simpara">
             <strong><code>CURLHEADER_UNIFIED</code></strong>: заголовки, указанные в
             опции <strong><code>CURLOPT_HTTPHEADER</code></strong> будут использованы в запросах
             к серверам и прокси. Если разрешена эта опция,
             опция <strong><code>CURLOPT_PROXYHEADER</code></strong> не будет иметь эффекта.
            </span>
            <span class="simpara">
             <strong><code>CURLHEADER_SEPARATE</code></strong>: заголовки
             <strong><code>CURLOPT_HTTPHEADER</code></strong> будут отсылаться только
             на сервер, но не на прокси. На прокси заголовки должны посылаться
             <strong><code>CURLOPT_PROXYHEADER</code></strong>. Обратите внимание, что
             если запросы типа non-CONNECT будут слаться на прокси, то libcurl будет
             посылать как серверные, так и прокси заголовки. Если же происходит
             CONNECT, libcurl пошлёт на прокси только заголовки <strong><code>CURLOPT_PROXYHEADER</code></strong>,
             а потом заголовки <strong><code>CURLOPT_HTTPHEADER</code></strong> только на сервер.
            </span>
            <span class="simpara">
             По умолчанию <strong><code>CURLHEADER_SEPARATE</code></strong>, начиная с cURL
             7.42.1, и <strong><code>CURLHEADER_UNIFIED</code></strong> до него.
            </span>
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.37.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_HTTP_VERSION</code></strong></td>
           <td style="vertical-align: top;">
            <strong><code>CURL_HTTP_VERSION_NONE</code></strong> (значение по умолчанию; CURL сам решает, какую версию использовать),
            <strong><code>CURL_HTTP_VERSION_1_0</code></strong> (принудительно соединяться по протоколу HTTP/1.0),
            <strong><code>CURL_HTTP_VERSION_1_1</code></strong> (принудительно соединяться по протоколу HTTP/1.1),
            <strong><code>CURL_HTTP_VERSION_2_0</code></strong> (попытаться соединиться по протоколу HTTP/2.0),
            <strong><code>CURL_HTTP_VERSION_2</code></strong> (псевдоним <strong><code>CURL_HTTP_VERSION_2_0</code></strong>),
            <strong><code>CURL_HTTP_VERSION_2TLS</code></strong> (попытаться соединиться только по протоколу HTTP/2.0 через TLS (HTTPS))
            или <strong><code>CURL_HTTP_VERSION_2_PRIOR_KNOWLEDGE</code></strong> (выполнять HTTP-запросы без TLS по протоколу HTTP/2.0 без возврата к HTTP/1.1).
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_HTTPAUTH</code></strong></td>
           <td style="vertical-align: top;">
            <p class="para">
             Методы HTTP-аутентификации. Параметры:
             <strong><code>CURLAUTH_BASIC</code></strong>,
             <strong><code>CURLAUTH_DIGEST</code></strong>,
             <strong><code>CURLAUTH_GSSNEGOTIATE</code></strong>,
             <strong><code>CURLAUTH_NTLM</code></strong>,
             <strong><code>CURLAUTH_AWS_SIGV4</code></strong>,
             <strong><code>CURLAUTH_ANY</code></strong>
             и <strong><code>CURLAUTH_ANYSAFE</code></strong>.
            </p>
            <p class="para">
             Можно использовать побитовый оператор <code class="literal">|</code> (или) для комбинации
             нескольких методов вместе. В этом случае cURL опросит сервер на предмет
             поддерживаемых методов авторизации и выберет лучший из них.
            </p>
            <p class="para">
             <strong><code>CURLAUTH_ANY</code></strong> устанавливает все биты. cURL автоматически выберет
             тот, который посчитает самым безопасным.
            </p>
            <p class="para">
             <strong><code>CURLAUTH_ANYSAFE</code></strong> устанавливает все биты кроме <code class="literal">CURLAUTH_BASIC</code>.
             cURL автоматически выберет тот, который посчитает самым безопасным.
            </p>
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_INFILESIZE</code></strong></td>
           <td style="vertical-align: top;">
            Ожидаемый размер файла в байтах при загрузке файла на удалённый сервер.
            Учтите, что использование этой опции не остановит дальнейшую посылку данных,
            превышающих это значение, так как посылаемые данные зависят от результата
            <strong><code>CURLOPT_READFUNCTION</code></strong>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_LOW_SPEED_LIMIT</code></strong></td>
           <td style="vertical-align: top;">
            Верхний порог скорости передачи данных, в байтах в секунду. Проверка происходит
            в течение <strong><code>CURLOPT_LOW_SPEED_TIME</code></strong> секунд, после чего
            PHP считает передачу слишком медленной и прерывает её.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_LOW_SPEED_TIME</code></strong></td>
           <td style="vertical-align: top;">
            Максимальное количество секунд, в течение которых скорость передачи
            не должна превышать значение опции <strong><code>CURLOPT_LOW_SPEED_LIMIT</code></strong>, иначе
            PHP пометит передачу как слишком медленную и прекратит её.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_MAIL_RCPT_ALLLOWFAILS</code></strong></td>
           <td style="vertical-align: top;">
            Разрешить ошибки для команды RCPT TO для некоторых получателей.
           </td>
           <td style="vertical-align: top;">
            При отправке данных нескольким получателям cURL прерывает SMTP-диалог, если хотя бы
            для одного из получателей на команду RCPT TO была получена ошибка. Этот параметр сообщает cURL,
            чтобы он игнорировал ошибки и продолжал с оставшимися доступными получателями.
            Если все получатели вызвали ошибку команды RCPT TO и этот флаг установлен,
            cURL прервёт SMTP-диалог и вернёт ошибку, полученную от последней команды RCPT TO.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_MAXAGE_CONN</code></strong></td>
           <td style="vertical-align: top;">
            Максимальное время ожидания, в течение которого разрешено повторно
            использовать существующее соединение.
            По умолчанию максимальный срок установлен на <code class="literal">118</code> секунд.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_MAXFILESIZE_LARGE</code></strong></td>
           <td style="vertical-align: top;">
            Максимальный разрешённый размер файла в байтах для скачивания. Если размер запрошенного файла
            окажется больше этого значения,
            передача не начнётся и вернётся значение константы <strong><code>CURLE_FILESIZE_EXCEEDED</code></strong>.
            Размер файла не всегда известен до начала скачивания, и на скачивание таких таких файлов
            этот параметр не повлияет, даже если
            в итоге размер файла превышает установленный предел.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_MAXLIFETIME_CONN</code></strong></td>
           <td style="vertical-align: top;">
            Максимальное время в секундах с момента установления соединения, в течение которого
            разрешено рассматривать существующее соединение для повторной передачи.
            Если соединение будет найдено в кеше, который старше этого значения,
            оно не будет рассмотрено для повторной передачи и будет закрыто
            как только все незавершенные передачи будут завершены.
            По умолчанию — 0 секунд, что означает, что параметр выключен и все соединения
            доступны для повторной передачи.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_MAXCONNECTS</code></strong></td>
           <td style="vertical-align: top;">
            Максимальное количество постоянных соединений.
            При достижении лимита, самое старое соединение в кеше закрывается,
            чтобы предотвратить увеличение числа открытых соединений.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_MAXREDIRS</code></strong></td>
           <td style="vertical-align: top;">
            Максимальное количество принимаемых перенаправлений. Используйте этот параметр
            вместе с параметром <strong><code>CURLOPT_FOLLOWLOCATION</code></strong>.
            Значение по умолчанию <code class="literal">20</code> установлено для предотвращения бесконечных перенаправлений.
            Значение <code class="literal">-1</code> разрешает бесконечные перенаправления, а <code class="literal">0</code>
            отклоняет все перенаправления.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PORT</code></strong></td>
           <td style="vertical-align: top;">
            Альтернативный порт соединения.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_POSTREDIR</code></strong></td>
           <td style="vertical-align: top;">
            Битовая маска, содержащая 1 (301 Moved Permanently), 2 (302 Found)
            и 4 (303 See Other), чтобы задавать должен ли метод HTTP POST обрабатываться при
            включённой опции <strong><code>CURLOPT_FOLLOWLOCATION</code></strong>, если
            произошёл указанный тип перенаправления.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.19.1.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROTOCOLS</code></strong></td>
           <td style="vertical-align: top;">
            <p class="para">
             Битовая маска из значений <strong><code>CURLPROTO_*</code></strong>. Эта маска
             установит ограничение на то, какие протоколы библиотека libcurl сможет использовать при передаче.
             Это разрешает настроить библиотеку libcurl
             на работу с широким диапазоном протоколов, но по-прежнему ограничить работу
             отдельных передач, чтобы было разрешено использовать только часть из них.
             По умолчанию модуль libcurl будет принимать все поддерживаемые протоколы.
             Смотрите также параметр <strong><code>CURLOPT_REDIR_PROTOCOLS</code></strong>.
            </p>
            <p class="para">
             Корректные значения протоколов:
             <strong><code>CURLPROTO_HTTP</code></strong>,
             <strong><code>CURLPROTO_HTTPS</code></strong>,
             <strong><code>CURLPROTO_FTP</code></strong>,
             <strong><code>CURLPROTO_FTPS</code></strong>,
             <strong><code>CURLPROTO_SCP</code></strong>,
             <strong><code>CURLPROTO_SFTP</code></strong>,
             <strong><code>CURLPROTO_TELNET</code></strong>,
             <strong><code>CURLPROTO_LDAP</code></strong>,
             <strong><code>CURLPROTO_LDAPS</code></strong>,
             <strong><code>CURLPROTO_DICT</code></strong>,
             <strong><code>CURLPROTO_FILE</code></strong>,
             <strong><code>CURLPROTO_TFTP</code></strong>,
             <strong><code>CURLPROTO_MQTT</code></strong>,
             <strong><code>CURLPROTO_ALL</code></strong>
            </p>
           </td>
           <td style="vertical-align: top;">
            Добавлен в cURL 7.19.4.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXYAUTH</code></strong></td>
           <td style="vertical-align: top;">
            Методы авторизации HTTP, которые будут использованы при соединении с прокси-сервером.
            Для этой опции устанавливают те же самые битовые маски, которые были описаны в параметре
            <strong><code>CURLOPT_HTTPAUTH</code></strong>. Для авторизации прокси
            поддерживаются только значения <strong><code>CURLAUTH_BASIC</code></strong>
            и <strong><code>CURLAUTH_NTLM</code></strong>.
           </td>
           <td style="vertical-align: top;">
            Добавлен в версии cURL 7.10.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXYPORT</code></strong></td>
           <td style="vertical-align: top;">
            Номер порта прокси-сервера, к которому осуществляется
            соединение. Этот номер также может быть установлен
            с помощью параметра <strong><code>CURLOPT_PROXY</code></strong>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXYTYPE</code></strong></td>
           <td style="vertical-align: top;">
            Либо <strong><code>CURLPROXY_HTTP</code></strong> (по умолчанию), либо
            <strong><code>CURLPROXY_SOCKS4</code></strong>,
            <strong><code>CURLPROXY_SOCKS5</code></strong>,
            <strong><code>CURLPROXY_SOCKS4A</code></strong> или
            <strong><code>CURLPROXY_SOCKS5_HOSTNAME</code></strong>.
           </td>
           <td style="vertical-align: top;">
            Добавлен в версии cURL 7.10.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_REDIR_PROTOCOLS</code></strong></td>
           <td style="vertical-align: top;">
            Битовая маска из значений <strong><code>CURLPROTO_*</code></strong>.
            Эта битовая маска ограничивает протоколы,
            которые библиотека libcurl будет использовать при перенаправлении (при включённом параметре
            <strong><code>CURLOPT_FOLLOWLOCATION</code></strong>).
            Этим можно ограничить набор протоколов при перенаправлениях для
            отдельных передач. По умолчанию libcurl поддерживает все протоколы, кроме
            FILE и SCP. В версиях до 7.19.4 перенаправление
            использовалось для всех протоколов без исключения.
            Смотрите также описание параметра <strong><code>CURLOPT_PROTOCOLS</code></strong>
            для списка констант со значениями протоколов.
           </td>
           <td style="vertical-align: top;">
            Добавлен в версии cURL 7.19.4.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_RESUME_FROM</code></strong></td>
           <td style="vertical-align: top;">
            Смещение в байтах для возобновления передачи.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SOCKS5_AUTH</code></strong></td>
           <td style="vertical-align: top;">
            <p class="para">
             Метод аутентификации SOCKS5, который нужно использовать. Варианты:
             <strong><code>CURLAUTH_BASIC</code></strong>,
             <strong><code>CURLAUTH_GSSAPI</code></strong>,
             <strong><code>CURLAUTH_NONE</code></strong>.
            </p>
            <p class="para">
             Побитовый оператор <code class="literal">|</code> (или) можно использовать для объединения
             нескольких методов. Если это будет сделано, cURL будет опрашивать сервер, чтобы выяснить,
             какие методы он поддерживает, и выбрать наилучший.
            </p>
            <p class="para">
             <strong><code>CURLAUTH_BASIC</code></strong> разрешает аутентификацию по constant пользователя/пароля.
            </p>
            <p class="para">
             <strong><code>CURLAUTH_GSSAPI</code></strong> разрешает аутентификацию GSS-API.
            </p>
            <p class="para">
             <strong><code>CURLAUTH_NONE</code></strong> не разрешает аутентификацию.
            </p>
            <p class="para">
             По умолчанию <code class="literal">CURLAUTH_BASIC|CURLAUTH_GSSAPI</code>.
             Установите действительное имя пользователя и пароль с помощью параметра <strong><code>CURLOPT_PROXYUSERPWD</code></strong>.
            </p>
           </td>
           <td style="vertical-align: top;">
            Доступно с 7.3.0 и curl &gt;= 7.55.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSL_OPTIONS</code></strong></td>
           <td style="vertical-align: top;">
            Устанавливает опции поведения SSL. Битовая маска из следующих констант:
            <span class="simpara">
             <strong><code>CURLSSLOPT_ALLOW_BEAST</code></strong>: не пытаться найти обходной
             путь для изъяна в безопасности протоколов SSL3 и TLS1.0.
            </span>
            <span class="simpara">
             <strong><code>CURLSSLOPT_NO_REVOKE</code></strong>: отключить проверку
             на предмет того, отозван ли сертификат, для тех SSL-бэкендов,
             где такое поведение присутствует.
            </span>
            <span class="simpara">
             <strong><code>CURLSSLOPT_AUTO_CLIENT_CERT</code></strong>: автоматически
             находить и использовать сертификат клиента для аутентификации
             по запросу сервера.
             Эта опция поддерживается только
             модулем поставщика служб безопасности Schannel (собственный SSL-модуль Windows).
            </span>
            <span class="simpara">
             <strong><code>CURLSSLOPT_NATIVE_CA</code></strong>: использовать собственное
             хранилище доверенных центров сертификации (Certificate authority, CA)
             операционной системы для проверки сертификата.
             Работает только в Windows с установленной сборкой библиотеки OpenSSL.
             Это экспериментальная опция и её поведение может измениться в будущем.
            </span>
            <span class="simpara">
             <strong><code>CURLSSLOPT_NO_PARTIALCHAIN</code></strong>: не принимать цепочки
             «частных» сертификатов, что cURL в других случаях делает по умолчанию.
             Эта опция поддерживается только для библиотеки OpenSSL
             и приведёт к ошибке проверки сертификата, если цепочка заканчивается
             на промежуточном, а не на корневом сертификате.
            </span>
            <span class="simpara">
             <strong><code>CURLSSLOPT_REVOKE_BEST_EFFORT</code></strong>: игнорировать проверку на предмет того,
             отозван ли сертификат, в случае отсутствия или отключения точек распространения для тех SSL-бэкендов,
             где такое поведение присутствует.
             Эта опция поддерживается только модулем поставщика служб безопасности Schannel (собственный SSL-модуль Windows).
             Если указана вместе с опцией <strong><code>CURLSSLOPT_NO_REVOKE</code></strong>,
             последняя будет в приоритете.
            </span>
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.25.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSL_VERIFYHOST</code></strong></td>
           <td style="vertical-align: top;">
            Указывают значение <code class="literal">2</code>, чтобы убедиться, что поле общего имени
            или поле альтернативного имени субъекта в сертификате узла SSL соответствует указанному имени хоста.
            Значение <code class="literal">0</code> указывают, чтобы не проверять имена.
            Значение <code class="literal">1</code> не следует использовать.
            В боевом окружении значение этого параметра должно
            быть <code class="literal">2</code> (установлено по умолчанию).
           </td>
           <td style="vertical-align: top;">
            Поддержка значения <code class="literal">1</code> убрана в cURL 7.28.1
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSLVERSION</code></strong></td>
           <td style="vertical-align: top;">
            Одна из констант <strong><code>CURL_SSLVERSION_DEFAULT</code></strong> (0),
            <strong><code>CURL_SSLVERSION_TLSv1</code></strong> (1),
            <strong><code>CURL_SSLVERSION_SSLv2</code></strong> (2),
            <strong><code>CURL_SSLVERSION_SSLv3</code></strong> (3),
            <strong><code>CURL_SSLVERSION_TLSv1_0</code></strong> (4),
            <strong><code>CURL_SSLVERSION_TLSv1_1</code></strong> (5)
            <strong><code>CURL_SSLVERSION_TLSv1_2</code></strong> (6) или
            <strong><code>CURL_SSLVERSION_TLSv1_3</code></strong> (7).
            Максимальная версия TLS может быть установлена с помощью одной из констант <strong><code>CURL_SSLVERSION_MAX_*</code></strong>.
            Также можно ИЛИ одну из констант <strong><code>CURL_SSLVERSION_*</code></strong> с одной из констант <strong><code>CURL_SSLVERSION_MAX_*</code></strong>.
            <strong><code>CURL_SSLVERSION_MAX_DEFAULT</code></strong>(максимальная версия, поддерживаемая библиотекой),
            <strong><code>CURL_SSLVERSION_MAX_TLSv1_0</code></strong>,
            <strong><code>CURL_SSLVERSION_MAX_TLSv1_1</code></strong>,
            <strong><code>CURL_SSLVERSION_MAX_TLSv1_2</code></strong>, or
            <strong><code>CURL_SSLVERSION_MAX_TLSv1_3</code></strong>.
            <blockquote class="note"><p><strong class="note">Замечание</strong>: 
             <p class="para">
              Рекомендуется не устанавливать эту опцию и оставить значение по умолчанию.
              Установка в 2 или 3 опасно и допускает применение известных уязвимостей в SSLv2 и SSLv3.
             </p>
            </p></blockquote>
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_SSL_OPTIONS</code></strong></td>
           <td style="vertical-align: top;">
            Задайте параметры поведения SSL-прокси, которые являются битовой маской любой из следующих констант:
            <span class="simpara">
             <strong><code>CURLSSLOPT_ALLOW_BEAST</code></strong>: не пытаться использовать
             обходные пути для устранения уязвимости в протоколах SSL3 и TLS1.0.
            </span>
            <span class="simpara">
             <strong><code>CURLSSLOPT_NO_REVOKE</code></strong>: отключить проверку
             на предмет того, отозван ли сертификат, для тех бэкендов SSL,
             где такое поведение присутствует. (curl &gt;= 7.44.0)
            </span>
            <span class="simpara">
             <strong><code>CURLSSLOPT_NO_PARTIALCHAIN</code></strong>: не принимать «частичные»
             цепочки сертификатов, что в противном случае делается по умолчанию. (curl &gt;= 7.68.0)
            </span>
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_SSL_VERIFYHOST</code></strong></td>
           <td style="vertical-align: top;">
            Значение <code class="literal">2</code> устанавливают для проверки в полях
            имени сертификата прокси-сервера HTTPS по отношению к имени прокси-сервера.
            Когда установлено значение <code class="literal">0</code>, соединение успешно выполняется
            независимо от имён, указанных в сертификате.
            Используйте эту способность с осторожностью!
            <code class="literal">1</code> рассматривается как опция отладки в curl 7.28.0 и более ранних версиях.
            С версии curl 7.28.1 до 7.65.3 возвращено значение <strong><code>CURLE_BAD_FUNCTION_ARGUMENT</code></strong>.
            Начиная с curl 7.66.0 и далее значения <code class="literal">1</code> и <code class="literal">2</code> обрабатываются как одно и то же значение.
            В производственной среде значение этой опции должно быть <code class="literal">2</code> (значение по умолчанию).
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_SSLVERSION</code></strong></td>
           <td style="vertical-align: top;">
            Одна из <strong><code>CURL_SSLVERSION_DEFAULT</code></strong>,
            <strong><code>CURL_SSLVERSION_TLSv1</code></strong>,
            <strong><code>CURL_SSLVERSION_TLSv1_0</code></strong>,
            <strong><code>CURL_SSLVERSION_TLSv1_1</code></strong>,
            <strong><code>CURL_SSLVERSION_TLSv1_2</code></strong>,
            <strong><code>CURL_SSLVERSION_TLSv1_3</code></strong>,
            <strong><code>CURL_SSLVERSION_MAX_DEFAULT</code></strong>,
            <strong><code>CURL_SSLVERSION_MAX_TLSv1_0</code></strong>,
            <strong><code>CURL_SSLVERSION_MAX_TLSv1_1</code></strong>,
            <strong><code>CURL_SSLVERSION_MAX_TLSv1_2</code></strong>,
            <strong><code>CURL_SSLVERSION_MAX_TLSv1_3</code></strong> или
            <strong><code>CURL_SSLVERSION_SSLv3</code></strong>.
            <blockquote class="note"><p><strong class="note">Замечание</strong>: 
             <p class="para">
              Лучше всего не устанавливать это и разрешать использовать значение по умолчанию <strong><code>CURL_SSLVERSION_DEFAULT</code></strong>,
              которое попытается выяснить версию протокола удалённого SSL.
             </p>
            </p></blockquote>
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_STREAM_WEIGHT</code></strong></td>
           <td style="vertical-align: top;">
            Установить вес цифрового потока (число между 1 и 256).
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.46.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_TCP_KEEPALIVE</code></strong></td>
           <td style="vertical-align: top;">
            Если установлено значение <code class="literal">1</code>, будут отправлены пробные сообщения поддержки активности TCP. Задержку и
            частоту этих проб можно контролировать с помощью параметров <strong><code>CURLOPT_TCP_KEEPIDLE</code></strong> и
            <strong><code>CURLOPT_TCP_KEEPINTVL</code></strong>, если операционная система их
            поддерживает. Если установлено значение <code class="literal">0</code> (по умолчанию), пробные сообщения проверки активности отключены.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.25.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_TCP_KEEPIDLE</code></strong></td>
           <td style="vertical-align: top;">
            Устанавливает задержку в секундах, в течение которой операционная система будет ждать, пока соединение находится в режиме ожидания,
            перед отправкой проб проверки активности,
            если включено <strong><code>CURLOPT_TCP_KEEPALIVE</code></strong>. Не все операционные системы поддерживают эту опцию.
            По умолчанию установлено значение <code class="literal">60</code>.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.25.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_TCP_KEEPINTVL</code></strong></td>
           <td style="vertical-align: top;">
            Устанавливает интервал в секундах, в течение которого операционная система будет ожидать между
            отправкой проб проверки активности, если включено <strong><code>CURLOPT_TCP_KEEPALIVE</code></strong>.
            Не все операционные системы поддерживают эту опцию.
            По умолчанию установлено значение <code class="literal">60</code>.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.25.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_TIMECONDITION</code></strong></td>
           <td style="vertical-align: top;">
            Способ трактовки параметра <strong><code>CURLOPT_TIMEVALUE</code></strong>.
            Значение <strong><code>CURL_TIMECOND_IFMODSINCE</code></strong> указывают для
            возвращения страницы, только если она была изменена со времени,
            указанного в параметре <strong><code>CURLOPT_TIMEVALUE</code></strong>.
            Если страница не была изменена, вернётся заголовок
            <code class="literal">&quot;304 Not Modified&quot;</code>, подразумевая, что
            параметр <strong><code>CURLOPT_HEADER</code></strong> установлен в <strong><code>true</code></strong>.
            Значение <strong><code>CURL_TIMECOND_IFUNMODSINCE</code></strong> указывают для обратного эффекта.
            Значение <strong><code>CURL_TIMECOND_NONE</code></strong> — чтобы игнорировать
            опцию <strong><code>CURLOPT_TIMEVALUE</code></strong> и всегда возвращать страницу.
            По умолчанию установлено значение <strong><code>CURL_TIMECOND_NONE</code></strong>.
           </td>
           <td style="vertical-align: top;">
            До cURL 7.46.0 значение по умолчанию было <strong><code>CURL_TIMECOND_IFMODSINCE</code></strong>.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_TIMEOUT</code></strong></td>
           <td style="vertical-align: top;">
            Максимально позволенное количество секунд для выполнения
            cURL-функций.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_TIMEOUT_MS</code></strong></td>
           <td style="vertical-align: top;">
            Максимально разрешённое количество миллисекунд для выполнения
            cURL-функций.
            
            Если библиотека libcurl собрана с обычным системным
            распознавателем имён, то этот промежуток соединения по-прежнему
            будет использовать полносекундное разрешение интервалов ожидания
            с минимально разрешённым временем ожидания в одну секунду.
           </td>
           <td style="vertical-align: top;">
            Добавлен в версии cURL 7.16.2.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_TIMEVALUE</code></strong></td>
           <td style="vertical-align: top;">
            Количество секунд начиная с 1 января 1970 года. Это время
            будет использовано параметром
            <strong><code>CURLOPT_TIMECONDITION</code></strong>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_TIMEVALUE_LARGE</code></strong></td>
           <td style="vertical-align: top;">
            Время в секундах с 1 января 1970 года. Время будет использовано <strong><code>CURLOPT_TIMECONDITION</code></strong>. По умолчанию ноль.
            Разница между этой опцией и <strong><code>CURLOPT_TIMEVALUE</code></strong>
            заключается в типе аргумента. В системах, где &#039;long&#039; имеет размер всего 32 бита,
            этот параметр нужно указывать для установки дат после 2038 года.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.59.0. Доступно с PHP 7.3.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_UPKEEP_INTERVAL_MS</code></strong></td>
           <td style="vertical-align: top;">
            В некоторые протоколы встроен механизмы «поддержания соединения». Эти механизмы
            обычно отправляют небольшой объем трафика через существующие соединения,
            чтобы держать их открытыми. Эта опция определяет интервал, в течение которого будет поддерживаться соединение.
            Действующий и единственный протокол с механизмом поддержания соединения — это HTTP/2. Когда
            интервал поддержания соединения истекает, протокол HTTP/2 отправляет в соединение кадр PING.
            Значение по умолчанию – <code class="literal">60</code> секунд.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_UPLOAD_BUFFERSIZE</code></strong></td>
           <td style="vertical-align: top;">
            Предпочтительный размер буфера загрузки cURL в байтах.
            Размер буфера загрузки по умолчанию — 64 килобайта. Максимально можно установить 2 мегабайта.
            Минимально — 16 килобайтов.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_MAX_RECV_SPEED_LARGE</code></strong></td>
           <td style="vertical-align: top;">
            Если скорость скачки превысит это значение (указанное в байтах
            в секунду) в среднем в течение всей передачи, то скачка будет
            приостановлена для поддержания средней скорости меньше либо равной
            данному параметру. По умолчанию скорость не ограничивается.
           </td>
           <td style="vertical-align: top;">
            Добавлен в версии cURL 7.15.5.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_MAX_SEND_SPEED_LARGE</code></strong></td>
           <td style="vertical-align: top;">
            Если загрузка на сервер превысит это значение (указанное в байтах
            в секунду) в среднем в течение всей передачи, то загрузка будет
            приостановлена для поддержания средней скорости меньше либо равной
            данному параметру. По умолчанию скорость не ограничивается.
           </td>
           <td style="vertical-align: top;">
            Добавлен в версии cURL 7.15.5.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSH_AUTH_TYPES</code></strong></td>
           <td style="vertical-align: top;">
            Битовая маска, состоящая из одной или более констант:
            <strong><code>CURLSSH_AUTH_PUBLICKEY</code></strong>,
            <strong><code>CURLSSH_AUTH_PASSWORD</code></strong>,
            <strong><code>CURLSSH_AUTH_HOST</code></strong>,
            <strong><code>CURLSSH_AUTH_KEYBOARD</code></strong>. Установите
            <strong><code>CURLSSH_AUTH_ANY</code></strong>, чтобы libcurl сам выбрал одну из них.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.16.1.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_IPRESOLVE</code></strong></td>
           <td style="vertical-align: top;">
            Разрешает приложению выбрать, какой вид IP-адресов использовать, когда разрешаются имена хостов.
            Это интересно только для имён хостов, которые разрешаются
            несколько IP-адресов. Возможные значения:
            <strong><code>CURL_IPRESOLVE_WHATEVER</code></strong>,
            <strong><code>CURL_IPRESOLVE_V4</code></strong>,
            <strong><code>CURL_IPRESOLVE_V6</code></strong> и по умолчанию —
            <strong><code>CURL_IPRESOLVE_WHATEVER</code></strong>.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.10.8.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_FTP_FILEMETHOD</code></strong></td>
           <td style="vertical-align: top;">
            Сообщить дескриптору cURL, какой метод доступа к файлу на сервере FTP использовать. Возможные значения:
            <strong><code>CURLFTPMETHOD_DEFAULT</code></strong>,
            <strong><code>CURLFTPMETHOD_MULTICWD</code></strong>,
            <strong><code>CURLFTPMETHOD_NOCWD</code></strong>
            и <strong><code>CURLFTPMETHOD_SINGLECWD</code></strong>.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.15.1.
           </td>
          </tr>

         </tbody>
        
       </table>

      </p>
      <p class="para">
       Для следующих значений параметра <code class="parameter">option</code>,
       параметр <code class="parameter">value</code> должен быть типа
       <span class="type">string</span>:
       <table class="doctable informaltable">
        
         <thead>
          <tr>
           <th>Параметр</th>
           <th>Устанавливаемое значение <code class="parameter">value</code></th>
           <th>Замечания</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_ABSTRACT_UNIX_SOCKET</code></strong></td>
           <td style="vertical-align: top;">
            Разрешает использовать абстрактный доменный сокет Unix вместо
            установления TCP-соединения с хостом и устанавливает путь
            к указанной строке (<span class="type">string</span>). Эта опция использует ту же семантику,
            что и <strong><code>CURLOPT_UNIX_SOCKET_PATH</code></strong>. Эти два параметра
            совместно используют одно и то же хранилище, поэтому для каждого дескриптора можно установить только
            один из них.
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и cURL 7.53.0
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_ALTSVC</code></strong></td>
           <td style="vertical-align: top;">
            Передать дескриптору cURL имя файла, который будет работать
            в качестве файла Alt-Svc-кеша для чтения существующих кешированных данных
            и, возможно, также записи их обратно после передачи,
            за исключением случаев, когда для опции <strong><code>CURLOPT_ALTSVC_CTRL</code></strong>
            установлено значение <strong><code>CURLALTSVC_READONLYFILE</code></strong>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_ALTSVC_CTRL</code></strong></td>
           <td style="vertical-align: top;">
            Заполните битовую маску правильными значениями, чтобы проинструктировать дескриптор cURL,
            как обрабатывать кеш Alt-Svc при передаче.
            Дескриптор cURL принимает заголовки Alt-Svc только через HTTPS.
            Запрос к альтернативному источнику выполнится
            только если источник правильно настроен на обмен данными по протоколу HTTPS.
            Установка любого бита включит движок alt-svc. Доступны следующие опции:
            <strong><code>CURLALTSVC_H1</code></strong>,
            <strong><code>CURLALTSVC_H2</code></strong>,
            <strong><code>CURLALTSVC_H3</code></strong>
            и <strong><code>CURLALTSVC_READONLYFILE</code></strong>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_AWS_SIGV4</code></strong></td>
           <td style="vertical-align: top;">
            <p class="para">
             Обеспечивает аутентификацию подписи в заголовке HTTP(S) по протоколу AWS V4.
            </p>
            <p class="para">
             Эта опция переопределит любые другие типы аутентификации, которые были
             установлены опцией <strong><code>CURLOPT_HTTPAUTH</code></strong>.
             Этот метод нельзя комбинировать с другими типами аутентификации.
            </p>
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_CAINFO</code></strong></td>
           <td style="vertical-align: top;">
            Имя файла, содержащего один или более сертификатов, с которыми
            будут сверяться узлы. Этот параметр будет полезен только
            при совместной работе с <strong><code>CURLOPT_SSL_VERIFYPEER</code></strong>.
           </td>
           <td style="vertical-align: top;">
            Может потребоваться абсолютный путь.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_CAINFO_BLOB</code></strong></td>
           <td style="vertical-align: top;">
            Название PEM-файла, содержащего один или несколько сертификатов для проверки
            узла. Эта опция переопределяет опцию <strong><code>CURLOPT_CAINFO</code></strong>.
           </td>
           <td style="vertical-align: top;">
            Доступна начиная с PHP 8.2.0 и cURL 7.77.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_CAPATH</code></strong></td>
           <td style="vertical-align: top;">
            Директория, содержащая несколько CA-сертификатов.
            Используйте этот параметр совместно с
            <strong><code>CURLOPT_SSL_VERIFYPEER</code></strong>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_COOKIE</code></strong></td>
           <td style="vertical-align: top;">
            Содержимое заголовка <code class="literal">&quot;Cookie: &quot;</code>,
            который будет передан в HTTP-запросе.
            Обратите внимание, что несколько cookies разделяются
            точкой с запятой с последующим пробелом
            (например, &quot;<code class="literal">fruit=apple; colour=red</code>&quot;)
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_COOKIEFILE</code></strong></td>
           <td style="vertical-align: top;">
            Имя файла, содержащего cookies. Данный файл должен быть
            в формате Netscape или просто заголовками HTTP, записанными
            в файл.
            Если в качестве имени файла передана пустая строка, то cookies
            сохраняться не будут, но их обработка всё ещё будет включена.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_COOKIEJAR</code></strong></td>
           <td style="vertical-align: top;">
            Имя файла, в котором будут сохранены все внутренние cookies
            текущей передачи после закрытия дескриптора, например,
            после вызова curl_close.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_COOKIELIST</code></strong></td>
           <td style="vertical-align: top;">
            Строка cookie (т.е. одна строка в формате Netscape/Mozilla или обычный заголовок
            Set-Cookie в стиле HTTP) добавляет этот единственный cookie во внутреннее хранилище cookie.
            <code class="literal">&quot;ALL&quot;</code> удаляет все файлы cookie, хранящиеся в памяти.
            <code class="literal">&quot;SESS&quot;</code> удаляет все файлы cookie сессии, хранящиеся в памяти.
            <code class="literal">&quot;FLUSH&quot;</code> записывает все известные файлы cookie в файл, указанный в <strong><code>CURLOPT_COOKIEJAR</code></strong>.
            <code class="literal">&quot;RELOAD&quot;</code> загружает все файлы cookie из файлов, указанных в <strong><code>CURLOPT_COOKIEFILE</code></strong>.
           </td>
           <td style="vertical-align: top;">
            Доступно с cURL 7.14.1.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_CUSTOMREQUEST</code></strong></td>
           <td style="vertical-align: top;"><p class="para">
            Пользовательский метод запроса, который будет использован вместо
            <code class="literal">&quot;GET&quot;</code> или <code class="literal">&quot;HEAD&quot;</code>
            при выполнении HTTP-запроса. Это полезно при запросах
            <code class="literal">&quot;DELETE&quot;</code> или других, более редких HTTP-запросах.
            Корректными значениями будут: <code class="literal">&quot;GET&quot;</code>,
            <code class="literal">&quot;POST&quot;</code>, <code class="literal">&quot;CONNECT&quot;</code> и так далее;
            т. е. здесь не нужно вводить всю строку с HTTP-запросом. Например,
            указание <code class="literal">&quot;GET /index.html HTTP/1.0\r\n\r\n&quot;</code>
            будет неправильным.
            <blockquote class="note"><p><strong class="note">Замечание</strong>: 
             <p class="para">
              Эту опцию указывают, убедившись, что
              сервер поддерживает заданный тип запроса.
             </p>
            </p></blockquote>
            </p></td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_DEFAULT_PROTOCOL</code></strong></td>
           <td style="vertical-align: top;"><p class="para">
            Протокол по умолчанию, если он отсутствует в схеме URL.
            </p></td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.45.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_DNS_INTERFACE</code></strong></td>
           <td style="vertical-align: top;"><p class="para">
            Устанавливает имя сетевого интерфейса, к которому привязан DNS.
            Это должно быть имя интерфейса, а не адрес.
            </p></td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.33.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_DNS_LOCAL_IP4</code></strong></td>
           <td style="vertical-align: top;"><p class="para">
            Установить локальный IPv4-адрес, по которому доступен DNS.
            Адрес должен быть представлен в виде строки, содержащий одно число.
            </p></td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.33.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_DNS_LOCAL_IP6</code></strong></td>
           <td style="vertical-align: top;"><p class="para">
            Установить локальный IPv6-адрес, по которому доступен DNS.
            Адрес должен быть представлен в виде строки, содержащий одно число.
            </p></td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.33.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_EGDSOCKET</code></strong></td>
           <td style="vertical-align: top;">
            Наподобие <strong><code>CURLOPT_RANDOM_FILE</code></strong>, за исключением
            того, что имя файла устанавливается в сокет Entropy
            Gathering Daemon.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_ENCODING</code></strong></td>
           <td style="vertical-align: top;">
            Содержимое заголовка <code class="literal">&quot;Accept-Encoding: &quot;</code>.
            Это позволяет декодировать запрос. Поддерживаемыми
            кодировками являются <code class="literal">&quot;identity&quot;</code>,
            <code class="literal">&quot;deflate&quot;</code> и <code class="literal">&quot;gzip&quot;</code>.
            Если передана пустая строка, <code class="literal">&quot;&quot;</code>,
            посылается заголовок, содержащий все поддерживаемые
            типы кодировок.
           </td>
           <td style="vertical-align: top;">
            Добавлен в версии cURL 7.10.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_FTPPORT</code></strong></td>
           <td style="vertical-align: top;">
            Значение, которое будет использовано для определения
            IP-адреса для команды &quot;PORT&quot; FTP-протокола. Команда &quot;PORT&quot;
            сообщает серверу, с каким IP-адресом он должен устанавливать
            соединение. Это может быть IP-адрес, имя хоста, имя сетевого
            интерфейса (под Unix) или просто &#039;-&#039;, чтобы использовать системный
            IP-адреса по умолчанию.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_HSTS</code></strong></td>
           <td style="vertical-align: top;">
            <p class="para">
             Имя файла кеша HSTS (HTTP Strict Transport Security).
            </p>
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_HSTS_CTRL</code></strong></td>
           <td style="vertical-align: top;">
            <p class="para">
             Управляет поведением механизма HSTS (HTTP Strict Transport Security).
             Заполните битовую маску правильным набором значений, чтобы проинструктировать
             дескриптор cURL, как обрабатывать хосты HSTS при передаче с этим дескриптором.
             Константа <strong><code>CURLHSTS_ENABLE</code></strong> включает запоминаемый (in-memory) кеш HSTS.
             Если файл кеша HSTS определён,
             установка значения <strong><code>CURLHSTS_READONLYFILE</code></strong> сделает файл доступным только для чтения.
            </p>
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_INTERFACE</code></strong></td>
           <td style="vertical-align: top;">
            Имя исходящего сетевого интерфейса, который надо использовать. Может быть
            именем интерфейса, IP-адресом или именем хоста.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_KEYPASSWD</code></strong></td>
           <td style="vertical-align: top;">
            Пароль для закрытого ключа опции <strong><code>CURLOPT_SSLKEY</code></strong>
            или <strong><code>CURLOPT_SSH_PRIVATE_KEYFILE</code></strong>.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.16.1.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_KRB4LEVEL</code></strong></td>
           <td style="vertical-align: top;">
            Уровень безопасности KRB4 (Kerberos 4). Любое из следующих
            значений (в порядке от слабого к самому сильному) корректно:
            <code class="literal">&quot;clear&quot;</code>,
            <code class="literal">&quot;safe&quot;</code>,
            <code class="literal">&quot;confidential&quot;</code>,
            <code class="literal">&quot;private&quot;.</code>.
            Если указанная строка отличается от данных значений,
            будет использовано значение <code class="literal">&quot;private&quot;</code>.
            Установка этого параметра в <strong><code>null</code></strong> полностью отключит
            безопасность KRB4. На данный момент безопасность KRB4
            работает только с FTP-транзакциями.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_LOGIN_OPTIONS</code></strong></td>
           <td style="vertical-align: top;">
            Опция может быть задана для установки характерных для протокола настроек логина,
            например, механизма аутентификации &quot;AUTH=NTLM&quot; или &quot;AUTH=*&quot;,
            и должна быть задана совместно с опцией <strong><code>CURLOPT_USERNAME</code></strong>.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.34.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PINNEDPUBLICKEY</code></strong></td>
           <td style="vertical-align: top;">
            Устанавливает зафиксированный открытый ключ.
            Строка должны содержать имя файла, в котором лежит ваш зафиксированный
            открытый ключ. Ожидается формат файла &quot;PEM&quot; или &quot;DEX&quot;.
            Строка также может быть числом  в формате base64, закодированным sha256 с
            префиксом &quot;sha256//&quot; и разделённая точкой с запятой &quot;;&quot;.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.39.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_POSTFIELDS</code></strong></td>
           <td style="vertical-align: top;">
            <span class="simpara">
             Все данные, передаваемые в HTTP POST-запросе.
             Этот параметр может быть передан
             как в качестве URL-кодированной строки, наподобие
             «<code class="literal">para1=val1&amp;para2=val2&amp;...</code>», так и
             в виде массива, ключами которого будут имена полей, а значениями —
             их содержимое.
             Если параметр <code class="parameter">value</code> — массив,
             заголовок <code class="literal">Content-Type</code> будет установлен в
             значение <code class="literal">multipart/form-data</code>.
            </span>
            <span class="simpara">
             Файлы можно отправить в виде переданного в параметр <code class="parameter">value</code> массива,
             содержащего объекты класса <span class="classname"><a href="class.curlfile.php.html" class="classname">CURLFile</a></span> или <span class="classname"><a href="class.curlstringfile.php.html" class="classname">CURLStringFile</a></span>.
            </span>
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PRIVATE</code></strong></td>
           <td style="vertical-align: top;">
            Любые данные, которые должны быть связаны с этим дескриптором cURL.
            Эти данные можно выбрать подзапросом опции
            <strong><code>CURLINFO_PRIVATE</code></strong> функции
            <span class="function"><a href="function.curl-getinfo.php.html" class="function">curl_getinfo()</a></span>. Дескриптор cURL ничего не делает с этими данными.
            При работе с множественным дескриптором cURL эти закрытые данные обычно
            выступают в роли уникального ключа для определения дескриптора cURL.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.10.3.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PRE_PROXY</code></strong></td>
           <td style="vertical-align: top;">
            Задайте строку (<span class="type">string</span>), содержащую имя хоста или
            IP-адрес, который будет использован в качестве прокси-сервера, к которому подключается curl, прежде чем
            он подключится к прокси-серверу HTTP(S), указанному в
            опции <strong><code>CURLOPT_PROXY</code></strong> для предстоящего запроса.
            Предварительный прокси-сервер может быть только SOCKS-прокси, и перед ним должен стоять префикс
            <code class="literal">[scheme]://</code>, чтобы указать, какой тип socks использовать.
            Числовой адрес IPv6 должен быть написан в [скобках].
            Установка препрокси в пустую строку явно отключает использование препрокси.
            Чтобы указать номер порта в этой строке, добавьте <code class="literal">:[port]</code>
            в конец имени хоста. Номер порта прокси-сервера может быть дополнительно
            указан в опции <strong><code>CURLOPT_PROXYPORT</code></strong>.
            Если порт для прокси не указан, по умолчанию будет установлен порт 1080.
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY</code></strong></td>
           <td style="vertical-align: top;">
            HTTP-прокси, через который будут направляться запросы.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_SERVICE_NAME</code></strong></td>
           <td style="vertical-align: top;">
            Имя сервиса аутентификации прокси.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.43.0 для HTTP-прокси и в cURL 7.49.0 для SOCKS5-прокси.
            Доступно, начиная с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_CAINFO</code></strong></td>
           <td style="vertical-align: top;">
            Путь к прокси-серверу центра сертификации. Задайте путь в виде
            строки (<span class="type">string</span>) с именем файла, содержащего один или несколько сертификатов
            для проверки прокси с помощью HTTPS.
            Этот параметр предназначен для подключения к прокси-серверу HTTPS, а не к серверу HTTPS.
            По умолчанию задан системный путь, где предполагается хранить пакет cacert libcurl.
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_CAINFO_BLOB</code></strong></td>
           <td style="vertical-align: top;">
            Имя файла PEM, содержащего один или несколько сертификатов для проверки HTTPS-прокси.
            Эту опция касается подключения к HTTPS-прокси, а не к HTTPS-серверу.
            По умолчанию установлен системный путь,
            по которому предполагается хранить набор сертификатов удостоверяющих центров модуля libcurl.
           </td>
           <td style="vertical-align: top;">
            Доступно начиная с PHP 8.2.0 и libcurl &gt;= cURL 7.77.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_CAPATH</code></strong></td>
           <td style="vertical-align: top;">
            Каталог, содержащий несколько сертификатов центра сертификации для проверки прокси HTTPS.
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_CRLFILE</code></strong></td>
           <td style="vertical-align: top;">
            Задайте имя файла с помощью конкатенации CRL (списка отзыва сертификатов)
            в формате PEM для использования при проверке сертификата, которая происходит
            во время обмена SSL.
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_KEYPASSWD</code></strong></td>
           <td style="vertical-align: top;">
            Строка, которая будет использована как пароль
            для закрытого ключа опции <strong><code>CURLOPT_PROXY_SSLKEY</code></strong>.
            Пароль для загрузки сертификата не нужен, но нужен пароль для загрузки закрытого ключа.
            Этот параметр нужен для подключения к прокси-серверу HTTPS, а не к серверу HTTPS.
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_PINNEDPUBLICKEY</code></strong></td>
           <td style="vertical-align: top;">
            Установите закреплённый открытый ключ для HTTPS-прокси. Строка может быть именем файла
            вашего закреплённого открытого ключа. Ожидаемый формат файла: &quot;PEM&quot; или &quot;DER&quot;.
            Строка также может быть любым количеством закодированных в base64 хешей sha256, которым предшествует
            &quot;sha256//&quot; и разделяются &quot;;&quot;
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_SSLCERT</code></strong></td>
           <td style="vertical-align: top;">
            Имя файла клиентского сертификата для подключения к прокси HTTPS.
            Формат по умолчанию — &quot;P12&quot; в Secure Transport и &quot;PEM&quot; в других движках;
            его можно изменить с помощью <strong><code>CURLOPT_PROXY_SSLCERTTYPE</code></strong>.
            С NSS или Secure Transport это также может быть псевдоним сертификата,
            с которым надо пройти аутентификацию, так как он назван в базе данных безопасности.
            Если надо использовать файл из текущего каталога, к нему добавляют
            префикс &quot;./&quot;, чтобы избежать путаницы с псевдонимом.
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_SSLCERTTYPE</code></strong></td>
           <td style="vertical-align: top;">
            Формат сертификата клиента, который будет использован при подключении к HTTPS-прокси.
            Поддерживаемые форматы: &quot;PEM&quot; и &quot;DER&quot;, за исключением Secure Transport.
            OpenSSL (версии 0.9.3 и новее) и Secure Transport
            (в iOS 5 или новее или OS X 10.7 или новее) также поддерживают &quot;P12&quot;
            для файлов в кодировке PKCS#12. По умолчанию &quot;PEM&quot;.
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_SSL_CIPHER_LIST</code></strong></td>
           <td style="vertical-align: top;">
            Список шифров, которые будут использованы для подключения к прокси HTTPS.
            Список должен быть синтаксически правильным, он состоит из одной или нескольких строк шифров,
            разделённых двоеточиями. Запятые или пробелы также являются допустимыми разделителями,
            но обычно качестве операторов используются двоеточия, !, - и +.
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_TLS13_CIPHERS</code></strong></td>
           <td style="vertical-align: top;">
            Список наборов шифров, которые будут использованы для подключения TLS 1.3 к прокси.
            Список должен быть синтаксически правильным, он состоит из одной или нескольких
            строк набора шифров, разделённых двоеточиями. Эту опцию используют
            только тогда, когда curl собран для работы с OpenSSL 1.1.1 или новее.
            Если выбран другой бэкенд SSL, можно попытаться установить
            наборы шифров TLS 1.3 через параметр <strong><code>CURLOPT_PROXY_SSL_CIPHER_LIST</code></strong>.
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.61.0.
            Доступно при сборке с OpenSSL &gt;= 1.1.1.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_SSLKEY</code></strong></td>
           <td style="vertical-align: top;">
            Имя файла личного ключа, который будет использован для подключения к прокси HTTPS.
            Формат по умолчанию — &quot;PEM&quot;, и его можно изменить через опцию
            <strong><code>CURLOPT_PROXY_SSLKEYTYPE</code></strong>.
            (Только для iOS и Mac OS X). Этот параметр игнорируется, если curl был создан для Secure Transport.
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
            Доступно, если включён встроенный TLS.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_SSLKEYTYPE</code></strong></td>
           <td style="vertical-align: top;">
            Формат вашего закрытого ключа. Поддерживаемые форматы: &quot;PEM&quot;, &quot;DER&quot; и &quot;ENG&quot;.
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_TLSAUTH_PASSWORD</code></strong></td>
           <td style="vertical-align: top;">
            Пароль для метода аутентификации TLS, который задан
            в параметре <strong><code>CURLOPT_PROXY_TLSAUTH_TYPE</code></strong>. Требует, чтобы
            также был установлен параметр <strong><code>CURLOPT_PROXY_TLSAUTH_USERNAME</code></strong>.
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_TLSAUTH_TYPE</code></strong></td>
           <td style="vertical-align: top;">
            Метод аутентификации TLS для соединения HTTPS. Поддерживаемый метод — &quot;SRP&quot;.
            <blockquote class="note"><p><strong class="note">Замечание</strong>: 
             <p class="para">
              Аутентификация Secure Remote Password (SRP) для TLS обеспечивает взаимную аутентификацию,
              если обе стороны имеют общий секрет. Чтобы использовать TLS-SRP, вы также должны установить
              параметры <strong><code>CURLOPT_PROXY_TLSAUTH_USERNAME</code></strong> и
              <strong><code>CURLOPT_PROXY_TLSAUTH_PASSWORD</code></strong>.
             </p>
            </p></blockquote>
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXY_TLSAUTH_USERNAME</code></strong></td>
           <td style="vertical-align: top;">
            Имя пользователя, которое будет использовано для метода аутентификации TLS прокси-сервера HTTPS, указанного в параметре
            <strong><code>CURLOPT_PROXY_TLSAUTH_TYPE</code></strong>. Требует, чтобы параметр
            <strong><code>CURLOPT_PROXY_TLSAUTH_PASSWORD</code></strong> также был установлен.
           </td>
           <td style="vertical-align: top;">
            Доступно с PHP 7.3.0 и libcurl &gt;= cURL 7.52.0.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXYUSERPWD</code></strong></td>
           <td style="vertical-align: top;">
            Логин и пароль, записанные в виде
            <code class="literal">&quot;[username]:[password]&quot;</code>, которые будут использованы при
            соединении через прокси.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_RANDOM_FILE</code></strong></td>
           <td style="vertical-align: top;">
            Имя файла для инициализации генератора
            случайных чисел для SSL.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_RANGE</code></strong></td>
           <td style="vertical-align: top;">
            Диапазон данных, которые нужно загрузить, в формате
            <code class="literal">&quot;X-Y&quot;</code>, причём либо X, либо Y могут быть
            опущены. Протокол HTTP также поддерживает передачу
            нескольких диапазонов, разделённых запятыми, они задаются
            в формате <code class="literal">&quot;X-Y,N-M&quot;</code>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_REFERER</code></strong></td>
           <td style="vertical-align: top;">
            Содержимое заголовка <code class="literal">&quot;Referer: &quot;</code>, который будет
            использован в HTTP-запросе.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SASL_AUTHZID</code></strong></td>
           <td style="vertical-align: top;">
            Идентификатор авторизации (authzid) для передачи. Эту опцию можно применять только
            для механизма аутентификации PLAIN SASL, где это необязательно.
            Если идентификатор авторизации не задан, только идентификатор аутентификации (authcid),
            как определено в имени пользователя, будет отправлен на сервер (вместе с паролем).
            Сервер получит идентификатор авторизации (authzid) из идентификатора аутентификации (authcid),
            если идентификатор авторизации не был указан,
            и затем он будет использовать внутренне.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SERVICE_NAME</code></strong></td>
           <td style="vertical-align: top;">
            Имя сервиса аутентификации.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.43.0. доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSH_HOST_PUBLIC_KEY_MD5</code></strong></td>
           <td style="vertical-align: top;">
            Строка, содержащая 32 шестнадцатеричных цифры. Строка должна являться
            контрольной суммой по алгоритму MD5 открытого ключа удалённого компьютера и libcurl будет сбрасывать
            соединение к удалённому хосту до тех пор, пока контрольная сумма не будет соответствовать публичному ключу.
            Эта опция предназначена только для передачи данных с помощью SCP и SFTP.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.17.1.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSH_HOST_PUBLIC_KEY_SHA256</code></strong></td>
           <td style="vertical-align: top;">
            Закодированный в Base64 по алгоритму SHA256 хеш публичного ключа удалённого хоста.
            Передача завершится ошибкой, если заданный хеш не соответствует хешу
            удалённого хоста.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSH_PUBLIC_KEYFILE</code></strong></td>
           <td style="vertical-align: top;">
            Имя файла для вашего публичного ключа. Если не задано, то libcurl использует по
            умолчанию файл $HOME/.ssh/id_dsa.pub, если переменная окружения HOME установлена и
            файл &quot;id_dsa.pub&quot; в текущей директории, если переменная HOME не установлена.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.16.1.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSH_PRIVATE_KEYFILE</code></strong></td>
           <td style="vertical-align: top;">
            Имя файла для вашего приватного ключа. Если не задано, то libcurl использует по
            умолчанию файл $HOME/.ssh/id_dsa, если переменная окружения HOME установлена и
            файл &quot;id_dsa&quot; в текущей директории, если переменная HOME не установлена.
            Если файл защищён паролем, установите пароль с помощью
            <strong><code>CURLOPT_KEYPASSWD</code></strong>.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.16.1.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSL_CIPHER_LIST</code></strong></td>
           <td style="vertical-align: top;">
            Список шифров для SSL-передач. Например,
            <code class="literal">RC4-SHA</code> и <code class="literal">TLSv1</code> —
            корректные списки шифров.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSL_EC_CURVES</code></strong></td>
           <td style="vertical-align: top;">
            Разделённый двоеточием список основанных на эллиптических кривых алгоритмов.
            Например,
            <code class="literal">X25519:P-521</code> — это допустимый список из двух эллиптических кривых.
            Эта опция определят клиентские алгоритмы обмена во время SSL-рукопожатия,
            если дескриптор cURL на SSL-бэкенде собран с поддержкой этой опции.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSLCERT</code></strong></td>
           <td style="vertical-align: top;">
            Имя файла с корректно отформатированным PEM-сертификатом.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSLCERTPASSWD</code></strong></td>
           <td style="vertical-align: top;">
            Пароль для сертификата опции <strong><code>CURLOPT_SSLCERT</code></strong>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSLCERTTYPE</code></strong></td>
           <td style="vertical-align: top;">
            Формат сертификата. Поддерживаются форматы
            <code class="literal">&quot;PEM&quot;</code> (по умолчанию), <code class="literal">&quot;DER&quot;</code>
            и <code class="literal">&quot;ENG&quot;</code>.
            Начиная с OpenSSL 0.9.3, <code class="literal">&quot;P12&quot;</code> (для файлов, закодированных в PKCS#12)
           </td>
           <td style="vertical-align: top;">
            Добавлен в версии cURL 7.9.3.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSLENGINE</code></strong></td>
           <td style="vertical-align: top;">
            Идентификатор механизма шифрования для закрытого ключа SSL,
            указанного в параметре <strong><code>CURLOPT_SSLKEY</code></strong>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSLENGINE_DEFAULT</code></strong></td>
           <td style="vertical-align: top;">
            Идентификатор механизма шифрования для
            асимметричных операций шифрования.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSLKEY</code></strong></td>
           <td style="vertical-align: top;">
            Имя файла с закрытым ключом SSL.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSLKEYPASSWD</code></strong></td>
           <td style="vertical-align: top;"><p class="para">
            Тайный пароль для закрытого
            ключа SSL, указанного параметром
            <strong><code>CURLOPT_SSLKEY</code></strong>.
            <blockquote class="note"><p><strong class="note">Замечание</strong>: 
             <p class="para">
              Так как этот параметр содержит ценный пароль, помните,
              что содержащий его PHP-скрипт нужно хранить в безопасном месте.
             </p>
            </p></blockquote>
            </p></td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SSLKEYTYPE</code></strong></td>
           <td style="vertical-align: top;">
            Тип закрытого ключа SSL, указанного в параметре
            <strong><code>CURLOPT_SSLKEY</code></strong>. Поддерживаются следующие
            типы ключей:
            <code class="literal">&quot;PEM&quot;</code> (по умолчанию), <code class="literal">&quot;DER&quot;</code>
            и <code class="literal">&quot;ENG&quot;</code>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_TLS13_CIPHERS</code></strong></td>
           <td style="vertical-align: top;">
            Список комплектов шифров для соединения TLS 1.3. Список должен быть
            синтаксически правильным, он состоит из одной или нескольких строк набора шифров, разделённых двоеточиями.
            Эту опцию используют только тогда, когда curl собран для работы OpenSSL 1.1.1 или новее.
            Если выбран другой бэкенд SSL, можно попробовать установить
            наборы шифров TLS 1.3 через параметр <strong><code>CURLOPT_SSL_CIPHER_LIST</code></strong>.
           </td>
           <td style="vertical-align: top;">
            Доступен с PHP 7.3.0 и libcurl &gt;= cURL 7.61.0. Доступен, когда собран с библиотекой OpenSSL &gt;= 1.1.1.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_UNIX_SOCKET_PATH</code></strong></td>
           <td style="vertical-align: top;">
            Разрешает использовать доменные сокеты UNIX в качестве конечной точки для
            соединения и устанавливает путь к ним равным заданной строке (<span class="type">string</span>).
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.40.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_URL</code></strong></td>
           <td style="vertical-align: top;">
            Загружаемый URL. Данный параметр может быть также установлен
            при инициализации сеанса с помощью <span class="function"><a href="function.curl-init.php.html" class="function">curl_init()</a></span>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_USERAGENT</code></strong></td>
           <td style="vertical-align: top;">
            Содержимое заголовка <code class="literal">&quot;User-Agent: &quot;</code>, посылаемого
            в HTTP-запросе.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_USERNAME</code></strong></td>
           <td style="vertical-align: top;">
            Имя пользователя для аутентификации.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.19.1.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PASSWORD</code></strong></td>
           <td style="vertical-align: top;">
            Пароль для аутентификации.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.19.1.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_USERPWD</code></strong></td>
           <td style="vertical-align: top;">
            Логин и пароль для соединения, указанные в формате
            <code class="literal">&quot;[username]:[password]&quot;</code>.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_XOAUTH2_BEARER</code></strong></td>
           <td style="vertical-align: top;">
            Задаёт токен доступа OAuth 2.0.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.33.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

         </tbody>
        
       </table>

      </p>
      <p class="para">
       Для следующих значений параметра <code class="parameter">option</code>,
       параметр <code class="parameter">value</code> должен быть массивом:
       <table class="doctable informaltable">
        
         <thead>
          <tr>
           <th>Параметр</th>
           <th>Устанавливаемое значение <code class="parameter">value</code></th>
           <th>Замечания</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_CONNECT_TO</code></strong></td>
           <td style="vertical-align: top;">
            Соединяться с хостом на установленном порте, игнорируя URL.
            Принимает массив строк формата
            <code class="literal">HOST:PORT:CONNECT-TO-HOST:CONNECT-TO-PORT</code>.
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.49.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_HTTP200ALIASES</code></strong></td>
           <td style="vertical-align: top;">
            Массив HTTP 200 ответов, которые будут трактоваться
            корректными ответами, а не ошибочными.
           </td>
           <td style="vertical-align: top;">
            Добавлен в cURL 7.10.3.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_HTTPHEADER</code></strong></td>
           <td style="vertical-align: top;">
            Массив устанавливаемых HTTP-заголовков в формате
            <code class="code">
             array(&#039;Content-type: text/plain&#039;, &#039;Content-length: 100&#039;)
            </code>
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_POSTQUOTE</code></strong></td>
           <td style="vertical-align: top;">
            Массив FTP-команд, выполняемых на сервере, после выполнения
            FTP-запроса.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROXYHEADER</code></strong></td>
           <td style="vertical-align: top;">
            Массив пользовательских HTTP-заголовков для отправки на прокси
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.37.0. Доступно с PHP 7.0.7.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_QUOTE</code></strong></td>
           <td style="vertical-align: top;">
            Массив FTP-команд, выполняемых на сервере перед выполнением
            FTP-запроса.
           </td>
           <td style="vertical-align: top;">
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_RESOLVE</code></strong></td>
           <td style="vertical-align: top;">
            Предоставляет адрес для определённой пары хоста и порта. Массив,
            содержащий строки, состоящие из имени хоста, порта и IP-адреса,
            разделённых двоеточием. Пример:
            <code class="code">
             array(&quot;example.com:80:127.0.0.1&quot;)
            </code>
           </td>
           <td style="vertical-align: top;">
            Добавлено в cURL 7.21.3.
           </td>
          </tr>

         </tbody>
        
       </table>

      </p>
      <p class="para">
       Для следующих значений параметра <code class="parameter">option</code>
       параметр <code class="parameter">value</code> должен быть потоковым
       дескриптором (возвращаемым, например, функцией <span class="function"><a href="function.fopen.php.html" class="function">fopen()</a></span>):
       <table class="doctable informaltable">
        
         <thead>
          <tr>
           <th>Параметр</th>
           <th>Устанавливаемое значение <code class="parameter">value</code></th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_FILE</code></strong></td>
           <td style="vertical-align: top;">
            Файл, в который будет записан результат передачи. По умолчанию
            запись идёт в поток вывода <code class="literal">STDOUT</code> (окно браузера).
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_INFILE</code></strong></td>
           <td style="vertical-align: top;">
            Файл, из которого должно идти чтение данных, при загрузке на сервер.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_STDERR</code></strong></td>
           <td style="vertical-align: top;">
            Альтернативный файл для вывода ошибок, который будет использован вместо потока ошибок
            <code class="literal">STDERR</code>.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_WRITEHEADER</code></strong></td>
           <td style="vertical-align: top;">
            Файл, в который будут записаны заголовки текущей операции.
           </td>
          </tr>

         </tbody>
        
       </table>

      </p>
      <p class="para">
       Для следующих значений параметра <code class="parameter">option</code>,
       параметр <code class="parameter">value</code> должен быть правильным именем функции
       или замыканием:
       <table class="doctable informaltable">
        
         <thead>
          <tr>
           <th>Параметр</th>
           <th>Устанавливаемое значение <code class="parameter">value</code></th>
           <th>Примечания</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_HEADERFUNCTION</code></strong></td>
           <td style="vertical-align: top;">
            Callback-функция принимает два параметра.
            Первым параметром является дескриптор cURL, вторым параметром
            является строка с записываемыми заголовками. Заголовки должны
            быть записаны с помощью данной callback-функции. Должна возвратить
            количество записанных байт.
           </td>
           <td class="empty">&nbsp;</td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PASSWDFUNCTION</code></strong></td>
           <td style="vertical-align: top;">
            Callback-функция принимает три параметра.
            Первым параметром идёт дескриптор cURL, вторым параметром
            — строка с запросом пароля, третьим —
            максимальная длина пароля. Должна возвратить строку, содержащую пароль.
           </td>
           <td>Удалено, начиная с PHP 7.3.0.</td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_PROGRESSFUNCTION</code></strong></td>
           <td style="vertical-align: top;">
            <p class="para">
             Callback-функция принимает пять параметров.
             Первый является дескриптором cURL, второй — общим количеством байт,
             которое ожидается загрузить с сервера, третий — количеством уже загруженных байтов,
             четвёртый — общим количеством байтов, для которых ожидается отправка на сервер,
             и пятый — количеством уже отправленных байтов.
            </p>
            <blockquote class="note"><p><strong class="note">Замечание</strong>: 
             <p class="para">
              Callback-функция вызывается, только если опция <strong><code>CURLOPT_NOPROGRESS</code></strong>
              установлена в значение <strong><code>false</code></strong>.
             </p>
            </p></blockquote>
            <p class="para">
             Можно вернуть ненулевое значение, чтобы отменить передачу.
             В этом случае будет выдана ошибка <strong><code>CURLE_ABORTED_BY_CALLBACK</code></strong>.
            </p>
           </td>
           <td class="empty">&nbsp;</td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_READFUNCTION</code></strong></td>
           <td style="vertical-align: top;">
            Callback-функция принимает три параметра.
            Первым параметром является дескриптор cURL,
            вторым параметром — ресурс потока, переданный
            cURL через опцию <strong><code>CURLOPT_INFILE</code></strong>,
            а третьим — максимально разрешённое
            количество данных для чтения.
            Callback-функция должна возвратить строку с длиной,
            не превышающей запрошенного количества данных, обычно
            с помощью чтения из переданного потокового ресурса.
            Должна возвратить пустую строку для сигнала о конце файла
            <code class="literal">EOF</code>.
           </td>
           <td class="empty">&nbsp;</td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_WRITEFUNCTION</code></strong></td>
           <td style="vertical-align: top;">
            Callback-функция принимает два параметра.
            Первым параметром является дескриптор cURL, а
            вторым — строка с записываемыми данными.
            Данные должны быть сохранены с помощью данной функции.
            Она должна возвратить точное количество записанных байт, иначе
            закачка будет прервана с ошибкой.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_XFERINFOFUNCTION</code></strong></td>
           <td style="vertical-align: top;">
            Callback-функция, принимающая два параметра.
            Имеет схожее назначение с опцией <strong><code>CURLOPT_PROGRESSFUNCTION</code></strong>,
            но является более современным и предпочтительным вариантом от cURL.
           </td>
           <td style="vertical-align: top;">
            Добавлена в версии 7.32.0. Доступна, начиная с PHP 8.2.0.
           </td>
           <td class="empty">&nbsp;</td>
          </tr>

         </tbody>
        
       </table>

      </p>
      <p class="para">
       Другие значения:
       <table class="doctable informaltable">
        
         <thead>
          <tr>
           <th>Параметр</th>
           <th>Устанавливаемое значение <code class="parameter">value</code></th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td style="vertical-align: top;"><strong><code>CURLOPT_SHARE</code></strong></td>
           <td style="vertical-align: top;">
            Результат выполнения функции <span class="function"><a href="function.curl-share-init.php.html" class="function">curl_share_init()</a></span>.
            Разрешает обработчику cURL использовать данные из общего обработчика.
           </td>
          </tr>

         </tbody>
        
       </table>

      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.curl-setopt-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает <strong><code>true</code></strong> в случае успешного выполнения или <strong><code>false</code></strong> в случае возникновения ошибки.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.curl-setopt-changelog">
  <h3 class="title">Список изменений</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Версия</th>
       <th>Описание</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
 <td>8.0.0</td>
 <td>
  <code class="parameter">handle</code> теперь ожидает экземпляр <span class="classname"><a href="class.curlhandle.php.html" class="classname">CurlHandle</a></span>;
  раньше, ожидался ресурс (<span class="type">resource</span>).
 </td>
</tr>

      <tr>
       <td>7.3.15, 7.4.3</td>
       <td>
        Добавлен параметр <strong><code>CURLOPT_HTTP09_ALLOWED</code></strong>.
       </td>
      </tr>

      <tr>
       <td>7.3.0</td>
       <td>
        Добавлены параметры <strong><code>CURLOPT_ABSTRACT_UNIX_SOCKET</code></strong>, <strong><code>CURLOPT_KEEP_SENDING_ON_ERROR</code></strong>,
        <strong><code>CURLOPT_PRE_PROXY</code></strong>, <strong><code>CURLOPT_PROXY_CAINFO</code></strong>,
        <strong><code>CURLOPT_PROXY_CAPATH</code></strong>, <strong><code>CURLOPT_PROXY_CRLFILE</code></strong>,
        <strong><code>CURLOPT_PROXY_KEYPASSWD</code></strong>, <strong><code>CURLOPT_PROXY_PINNEDPUBLICKEY</code></strong>,
        <strong><code>CURLOPT_PROXY_SSLCERT</code></strong>, <strong><code>CURLOPT_PROXY_SSLCERTTYPE</code></strong>,
        <strong><code>CURLOPT_PROXY_SSL_CIPHER_LIST</code></strong>, <strong><code>CURLOPT_PROXY_SSLKEY</code></strong>,
        <strong><code>CURLOPT_PROXY_SSLKEYTYPE</code></strong>, <strong><code>CURLOPT_PROXY_SSL_OPTIONS</code></strong>,
        <strong><code>CURLOPT_PROXY_SSL_VERIFYHOST</code></strong>, <strong><code>CURLOPT_PROXY_SSL_VERIFYPEER</code></strong>,
        <strong><code>CURLOPT_PROXY_SSLVERSION</code></strong>, <strong><code>CURLOPT_PROXY_TLSAUTH_PASSWORD</code></strong>,
        <strong><code>CURLOPT_PROXY_TLSAUTH_TYPE</code></strong>, <strong><code>CURLOPT_PROXY_TLSAUTH_USERNAME</code></strong>,
        <strong><code>CURLOPT_SOCKS5_AUTH</code></strong>, <strong><code>CURLOPT_SUPPRESS_CONNECT_HEADERS</code></strong>,
        <strong><code>CURLOPT_DISALLOW_USERNAME_IN_URL</code></strong>, <strong><code>CURLOPT_DNS_SHUFFLE_ADDRESSES</code></strong>,
        <strong><code>CURLOPT_HAPPY_EYEBALLS_TIMEOUT_MS</code></strong>, <strong><code>CURLOPT_HAPROXYPROTOCOL</code></strong>,
        <strong><code>CURLOPT_PROXY_TLS13_CIPHERS</code></strong>, <strong><code>CURLOPT_SSH_COMPRESSION</code></strong>,
        <strong><code>CURLOPT_TIMEVALUE_LARGE</code></strong> и <strong><code>CURLOPT_TLS13_CIPHERS</code></strong>.
       </td>
      </tr>

      <tr>
       <td>7.0.7</td>
       <td>
        Добавлены параметры и их значения <strong><code>CURL_HTTP_VERSION_2</code></strong>, <strong><code>CURL_HTTP_VERSION_2_PRIOR_KNOWLEDGE</code></strong>,
        <strong><code>CURL_HTTP_VERSION_2TLS</code></strong>, <strong><code>CURL_REDIR_POST_301</code></strong>,
        <strong><code>CURL_REDIR_POST_302</code></strong>, <strong><code>CURL_REDIR_POST_303</code></strong>,
        <strong><code>CURL_REDIR_POST_ALL</code></strong>, <strong><code>CURL_VERSION_KERBEROS5</code></strong>,
        <strong><code>CURL_VERSION_PSL</code></strong>, <strong><code>CURL_VERSION_UNIX_SOCKETS</code></strong>,
        <strong><code>CURLAUTH_NEGOTIATE</code></strong>, <strong><code>CURLAUTH_NTLM_WB</code></strong>,
        <strong><code>CURLFTP_CREATE_DIR</code></strong>, <strong><code>CURLFTP_CREATE_DIR_NONE</code></strong>,
        <strong><code>CURLFTP_CREATE_DIR_RETRY</code></strong>, <strong><code>CURLHEADER_SEPARATE</code></strong>,
        <strong><code>CURLHEADER_UNIFIED</code></strong>, <strong><code>CURLMOPT_CHUNK_LENGTH_PENALTY_SIZE</code></strong>,
        <strong><code>CURLMOPT_CONTENT_LENGTH_PENALTY_SIZE</code></strong>, <strong><code>CURLMOPT_MAX_HOST_CONNECTIONS</code></strong>,
        <strong><code>CURLMOPT_MAX_PIPELINE_LENGTH</code></strong>, <strong><code>CURLMOPT_MAX_TOTAL_CONNECTIONS</code></strong>,
        <strong><code>CURLOPT_CONNECT_TO</code></strong>, <strong><code>CURLOPT_DEFAULT_PROTOCOL</code></strong>,
        <strong><code>CURLOPT_DNS_INTERFACE</code></strong>, <strong><code>CURLOPT_DNS_LOCAL_IP4</code></strong>,
        <strong><code>CURLOPT_DNS_LOCAL_IP6</code></strong>, <strong><code>CURLOPT_EXPECT_100_TIMEOUT_MS</code></strong>,
        <strong><code>CURLOPT_HEADEROPT</code></strong>, <strong><code>CURLOPT_LOGIN_OPTIONS</code></strong>,
        <strong><code>CURLOPT_PATH_AS_IS</code></strong>, <strong><code>CURLOPT_PINNEDPUBLICKEY</code></strong>,
        <strong><code>CURLOPT_PIPEWAIT</code></strong>, <strong><code>CURLOPT_PROXY_SERVICE_NAME</code></strong>,
        <strong><code>CURLOPT_PROXYHEADER</code></strong>, <strong><code>CURLOPT_SASL_IR</code></strong>,
        <strong><code>CURLOPT_SERVICE_NAME</code></strong>, <strong><code>CURLOPT_SSL_ENABLE_ALPN</code></strong>,
        <strong><code>CURLOPT_SSL_ENABLE_NPN</code></strong>, <strong><code>CURLOPT_SSL_FALSESTART</code></strong>,
        <strong><code>CURLOPT_SSL_VERIFYSTATUS</code></strong>, <strong><code>CURLOPT_STREAM_WEIGHT</code></strong>,
        <strong><code>CURLOPT_TCP_FASTOPEN</code></strong>, <strong><code>CURLOPT_TFTP_NO_OPTIONS</code></strong>,
        <strong><code>CURLOPT_UNIX_SOCKET_PATH</code></strong>, <strong><code>CURLOPT_XOAUTH2_BEARER</code></strong>,
        <strong><code>CURLPROTO_SMB</code></strong>, <strong><code>CURLPROTO_SMBS</code></strong>,
        <strong><code>CURLPROXY_HTTP_1_0</code></strong>, <strong><code>CURLSSH_AUTH_AGENT</code></strong> и
        <strong><code>CURLSSLOPT_NO_REVOKE</code></strong>.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.curl-setopt-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Пример #1 Инициализация сеанса CURL и загрузка веб-страницы</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">// Создаём новый ресурс cURL<br /></span><span style="color: #0000BB">$ch </span><span style="color: #007700">= </span><span style="color: #0000BB">curl_init</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">// Устанавливаем URL-адрес и другие параметры<br /></span><span style="color: #0000BB">curl_setopt</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch</span><span style="color: #007700">, </span><span style="color: #0000BB">CURLOPT_URL</span><span style="color: #007700">, </span><span style="color: #DD0000">"http://www.example.com/"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">curl_setopt</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch</span><span style="color: #007700">, </span><span style="color: #0000BB">CURLOPT_HEADER</span><span style="color: #007700">, </span><span style="color: #0000BB">false</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Захватываем страницу и передаём её браузеру<br /></span><span style="color: #0000BB">curl_exec</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Закрываем дескриптор cURL и освобождаем ресурсы системы<br /></span><span style="color: #0000BB">curl_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.curl-setopt-notes">
  <h3 class="title">Примечания</h3>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Передача массива в параметр <strong><code>CURLOPT_POSTFIELDS</code></strong>
    закодирует данные с типом <em>multipart/form-data</em>,
    тогда как передача URL-кодированной строки закодирует данные
    с типом <em>application/x-www-form-urlencoded</em>.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.curl-setopt-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.curl-setopt-array.php.html" class="function" rel="rdfs-seeAlso">curl_setopt_array()</a> - Устанавливает несколько параметров для сеанса cURL</span></li>
    <li class="member"><span class="classname"><a href="class.curlfile.php.html" class="classname">CURLFile</a></span></li>
    <li class="member"><span class="classname"><a href="class.curlstringfile.php.html" class="classname">CURLStringFile</a></span></li>
   </ul>
  </p>
 </div>


</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.curl-setopt&amp;redirect=https://www.php.net/manual/ru/function.curl-setopt.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">68 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="110457">  <div class="votes">
    <div id="Vu110457">
    <a href="https://www.php.net/manual/vote-note.php?id=110457&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd110457">
    <a href="https://www.php.net/manual/vote-note.php?id=110457&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V110457" title="79% like this...">
    221
    </div>
  </div>
  <a href="function.curl-setopt.php.html#110457" class="name">
  <strong class="user"><em>rmckay at webaware dot com dot au</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#110457"> &para;</a><div class="date" title="2012-10-24 12:21"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom110457">
<div class="phpcode"><code><span class="html">Please everyone, stop setting CURLOPT_SSL_VERIFYPEER to false or 0. If your PHP installation doesn't have an up-to-date CA root certificate bundle, download the one at the curl website and save it on your server:<br /><br /><a href="http://curl.haxx.se/docs/caextract.html" rel="nofollow" target="_blank">http://curl.haxx.se/docs/caextract.html</a><br /><br />Then set a path to it in your php.ini file, e.g. on Windows:<br /><br />curl.cainfo=c:\php\cacert.pem<br /><br />Turning off CURLOPT_SSL_VERIFYPEER allows man in the middle (MITM) attacks, which you don't want!</span></code></div>
  </div>
 </div>
  <div class="note" id="118967">  <div class="votes">
    <div id="Vu118967">
    <a href="https://www.php.net/manual/vote-note.php?id=118967&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd118967">
    <a href="https://www.php.net/manual/vote-note.php?id=118967&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V118967" title="78% like this...">
    50
    </div>
  </div>
  <a href="function.curl-setopt.php.html#118967" class="name">
  <strong class="user"><em>joey</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#118967"> &para;</a><div class="date" title="2016-03-09 06:54"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom118967">
<div class="phpcode"><code><span class="html">It is important that anyone working with cURL and PHP keep in mind that not all of the CURLOPT and CURLINFO constants are documented. I always recommend reading the cURL documentation directly as it sometimes contains better information. The cURL API in tends to be fubar as well so do not expect things to be where you would normally logically look for them.<br /><br />curl is especially difficult to work with when it comes to cookies. So I will talk about what I found with PHP 5.6 and curl 7.26.<br /><br />If you want to manage cookies in memory without using files including reading, writing and clearing custom cookies then continue reading.<br /><br />To start with, the way to enable in memory only cookies associated with a cURL handle you should use:<br /><br />    curl_setopt($curl, CURLOPT_COOKIEFILE, "");<br /><br />cURL likes to use magic strings in options as special commands. Rather than having an option to enable the cookie engine in memory it uses a magic string to do that. Although vaguely the documentation here mentions this however most people like me wouldn't even read that because a COOKIEFILE is the complete opposite of what we want.<br /><br />To get the cookies for a curl handle you can use:<br /><br />    curl_getinfo($curl, CURLINFO_COOKIELIST);<br /><br />This will give an array containing a string for each cookie. It is tab delimited and unfortunately you will have to parse it yourself if you want to do anything beyond copying the cookies.<br /><br />To clear the in memory cookies for a cURL handle you can use:<br /><br />    curl_setopt($curl, CURLOPT_COOKIELIST, "ALL");<br /><br />This is a magic string. There are others in the cURL documentation. If a magic string isn't used, this field should take a cookie in the same string format as in getinfo for the cookielist constant. This can be used to delete individual cookies although it's not the most elegant API for doing so.<br /><br />For copying cookies I recommend using curl_share_init.<br /><br />You can also copy cookies from one handle to another like so:<br /><br />    foreach(curl_getinfo($curl_a, CURLINFO_COOKIELIST) as $cookie_line)<br />        curl_setopt($curl, CURLOPT_COOKIELIST, $cookie_line);<br /><br />An inelegant way to delete a cookie would be to skip the one you don't want. <br /><br />I only recommend using COOKIELIST with magic strings because the cookie format is not secure or stable. You can inject tabs into at least path and name so it becomes impossible to parse reliably. If you must parse this then to keep it secure I recommend prohibiting more than 6 tabs in the content which probably isn't a big loss to most people.<br /><br />A the absolute minimum for validation I would suggest:<br /><br />    /^([^\t]+\t){5}[^\t]+$/D<br /><br />Here is the format:<br /><br />    #define SEP  "\t"  /* Tab separates the fields */<br /> <br />    char *my_cookie =<br />      "example.com"    /* Hostname */<br />      SEP "FALSE"      /* Include subdomains */<br />      SEP "/"          /* Path */<br />      SEP "FALSE"      /* Secure */<br />      SEP "0"          /* Expiry in epoch time format. 0 == Session */<br />      SEP "foo"        /* Name */<br />      SEP "bar";       /* Value */</span></code></div>
  </div>
 </div>
  <div class="note" id="75525">  <div class="votes">
    <div id="Vu75525">
    <a href="https://www.php.net/manual/vote-note.php?id=75525&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd75525">
    <a href="https://www.php.net/manual/vote-note.php?id=75525&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V75525" title="84% like this...">
    13
    </div>
  </div>
  <a href="function.curl-setopt.php.html#75525" class="name">
  <strong class="user"><em>ashw1 - at - no spam - post - dot - cz</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#75525"> &para;</a><div class="date" title="2007-06-03 04:51"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom75525">
<div class="phpcode"><code><span class="html">In case you wonder how come, that cookies don't work under Windows, I've googled for some answers, and here is the result: Under WIN you need to input absolute path of the cookie file.<br /><br />This piece of code solves it:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">if (</span><span class="default">$cookies </span><span class="keyword">!= </span><span class="string">''</span><span class="keyword">)<br />    {<br />    if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">PHP_OS</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">) == </span><span class="string">'WIN'</span><span class="keyword">)<br />        {</span><span class="default">$cookies </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'\\'</span><span class="keyword">,</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">getcwd</span><span class="keyword">().</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$cookies</span><span class="keyword">);}<br />    </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEJAR</span><span class="keyword">, </span><span class="default">$cookies</span><span class="keyword">);<br />    </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEFILE</span><span class="keyword">, </span><span class="default">$cookies</span><span class="keyword">);<br />    }<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="104597">  <div class="votes">
    <div id="Vu104597">
    <a href="https://www.php.net/manual/vote-note.php?id=104597&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd104597">
    <a href="https://www.php.net/manual/vote-note.php?id=104597&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V104597" title="76% like this...">
    32
    </div>
  </div>
  <a href="function.curl-setopt.php.html#104597" class="name">
  <strong class="user"><em>Steve Kamerman</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#104597"> &para;</a><div class="date" title="2011-06-24 11:47"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom104597">
<div class="phpcode"><code><span class="html">If you want cURL to timeout in less than one second, you can use CURLOPT_TIMEOUT_MS, although there is a bug/"feature"  on "Unix-like systems" that causes libcurl to timeout immediately if the value is &lt; 1000 ms with the error "cURL Error (28): Timeout was reached".  The explanation for this behavior is:<br /><br />"If libcurl is built to use the standard system name resolver, that portion of the transfer will still use full-second resolution for timeouts with a minimum timeout allowed of one second."<br /><br />What this means to PHP developers is "You can use this function without testing it first, because you can't tell if libcurl is using the standard system name resolver (but you can be pretty sure it is)"<br /><br />The problem is that on (Li|U)nix, when libcurl uses the standard name resolver, a SIGALRM is raised during name resolution which libcurl thinks is the timeout alarm.<br /><br />The solution is to disable signals using CURLOPT_NOSIGNAL.  Here's an example script that requests itself causing a 10-second delay so you can test timeouts:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">if (!isset(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'foo'</span><span class="keyword">])) {<br />        </span><span class="comment">// Client<br />        </span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="string">'<a href="http://localhost/test/test_timeout.php?foo=bar" rel="nofollow" target="_blank">http://localhost/test/test_timeout.php?foo=bar</a>'</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_NOSIGNAL</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_TIMEOUT_MS</span><span class="keyword">, </span><span class="default">200</span><span class="keyword">);<br />        </span><span class="default">$data </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />        </span><span class="default">$curl_errno </span><span class="keyword">= </span><span class="default">curl_errno</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />        </span><span class="default">$curl_error </span><span class="keyword">= </span><span class="default">curl_error</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />        </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /><br />        if (</span><span class="default">$curl_errno </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br />                echo </span><span class="string">"cURL Error (</span><span class="default">$curl_errno</span><span class="string">): </span><span class="default">$curl_error</span><span class="string">\n"</span><span class="keyword">;<br />        } else {<br />                echo </span><span class="string">"Data received: </span><span class="default">$data</span><span class="string">\n"</span><span class="keyword">;<br />        }<br />} else {<br />        </span><span class="comment">// Server<br />        </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">);<br />        echo </span><span class="string">"Done."</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="98491">  <div class="votes">
    <div id="Vu98491">
    <a href="https://www.php.net/manual/vote-note.php?id=98491&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd98491">
    <a href="https://www.php.net/manual/vote-note.php?id=98491&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V98491" title="79% like this...">
    14
    </div>
  </div>
  <a href="function.curl-setopt.php.html#98491" class="name">
  <strong class="user"><em>JScott jscott401 at gmail dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#98491"> &para;</a><div class="date" title="2010-06-18 07:29"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom98491">
<div class="phpcode"><code><span class="html">Some additional notes for curlopt_writefunction. I struggled with this at first because it really isn't documented very well.<br /><br />When you write a callback function and use it with curlopt_writefunction it will be called MULTIPLE times. Your function MUST return the ammount of data written to it each time. It is very picky about this. Here is a snippet from my code that may help you<br /><br /><span class="default">&lt;?php<br />curl_setopt</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">curl_handle</span><span class="keyword">, </span><span class="default">CURLOPT_WRITEFUNCTION</span><span class="keyword">, array(</span><span class="default">$this</span><span class="keyword">, </span><span class="string">"receiveResponse"</span><span class="keyword">));<br /><br /></span><span class="comment">// later on in the class I wrote my receive Response method<br /><br /></span><span class="keyword">private function </span><span class="default">receiveResponse</span><span class="keyword">(</span><span class="default">$curlHandle</span><span class="keyword">,</span><span class="default">$xmldata</span><span class="keyword">)<br />                {<br />                        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">responseString </span><span class="keyword">= </span><span class="default">$xmldata</span><span class="keyword">;<br />                        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">responseXML </span><span class="keyword">.=  </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">responseString</span><span class="keyword">;<br />                        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">length </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$xmldata</span><span class="keyword">);<br />                        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">size </span><span class="keyword">+= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">;<br />                        return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">;<br /><br />                }<br /></span><span class="default">?&gt;<br /></span><br />Now I did this for a class. If you aren't doing OOP then you will obviously need to modify this for your own use.<br /><br />CURL calls your script MULTIPLE times because the data will not always be sent all at once. Were talking internet here so its broken up into packets. You need to take your data and concatenate it all together until it is all written. I was about to pull my damn hair out because I would get broken chunks of XML back from the server and at random lengths. I finally figured out what was going on. Hope this helps</span></code></div>
  </div>
 </div>
  <div class="note" id="121874">  <div class="votes">
    <div id="Vu121874">
    <a href="https://www.php.net/manual/vote-note.php?id=121874&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd121874">
    <a href="https://www.php.net/manual/vote-note.php?id=121874&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V121874" title="80% like this...">
    3
    </div>
  </div>
  <a href="function.curl-setopt.php.html#121874" class="name">
  <strong class="user"><em>cmatiasvillanueva at gmail dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#121874"> &para;</a><div class="date" title="2017-11-15 07:54"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom121874">
<div class="phpcode"><code><span class="html">What is not mentioned in the documentation is that if you want to set  a local-port or local-port-range to establish a connection is possible by adding   CURLOPT_LOCALPORT and CURLOPT_LOCALPORTRANGE options.   <br /><br />Ex:<br />$conn=curl_init ('example.com');<br />curl_setopt($conn, CURLOPT_LOCALPORT, 35000);<br />curl_setopt($conn, CURLOPT_LOCALPORTRANGE, 200);<br /><br />CURLOPT_LOCALPORT: This sets the local port number of the socket used for the connection.<br /><br />CURLOPT_LOCALPORTRANGE:  The range argument is the number of attempts libcurl will make to find a working local port number. It starts with the given CURLOPT_LOCALPORT and adds one to the number for each retry. Setting this option to 1 or below will make libcurl do only one try for the exact port number.<br /><br />Interface can be also configured using CURLOPT_INTERFACE:<br /><br />Ex:<br /><br />curl_setopt($conn,  CURLOPT_INTERFACE, "eth1");</span></code></div>
  </div>
 </div>
  <div class="note" id="66832">  <div class="votes">
    <div id="Vu66832">
    <a href="https://www.php.net/manual/vote-note.php?id=66832&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd66832">
    <a href="https://www.php.net/manual/vote-note.php?id=66832&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V66832" title="76% like this...">
    29
    </div>
  </div>
  <a href="function.curl-setopt.php.html#66832" class="name">
  <strong class="user"><em>Philippe dot Jausions at 11abacus dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#66832"> &para;</a><div class="date" title="2006-05-30 11:31"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom66832">
<div class="phpcode"><code><span class="html">Clarification on the callback methods:<br /><br />- CURLOPT_HEADERFUNCTION is for handling header lines received *in the response*,<br />- CURLOPT_WRITEFUNCTION is for handling data received *from the response*,<br />- CURLOPT_READFUNCTION is for handling data passed along *in the request*.<br /><br />The callback "string" can be any callable function, that includes the array(&amp;$obj, 'someMethodName') format.<br /><br /> -Philippe</span></code></div>
  </div>
 </div>
  <div class="note" id="108137">  <div class="votes">
    <div id="Vu108137">
    <a href="https://www.php.net/manual/vote-note.php?id=108137&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd108137">
    <a href="https://www.php.net/manual/vote-note.php?id=108137&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V108137" title="80% like this...">
    6
    </div>
  </div>
  <a href="function.curl-setopt.php.html#108137" class="name">
  <strong class="user"><em>mw+php dot net at lw-systems dot de</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#108137"> &para;</a><div class="date" title="2012-03-31 06:45"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom108137">
<div class="phpcode"><code><span class="html">The description of the use of the CURLOPT_POSTFIELDS option should be emphasize, that using POST with HTTP/1.1 with cURL implies the use of a "Expect: 100-continue" header. Some web servers will not understand the handling of chunked transfer of post data.<br /><br />To disable this behavior one must disable the use of the "Expect:" header with<br /><br />    curl_setopt($ch, CURLOPT_HTTPHEADER,array("Expect:"));</span></code></div>
  </div>
 </div>
  <div class="note" id="96056">  <div class="votes">
    <div id="Vu96056">
    <a href="https://www.php.net/manual/vote-note.php?id=96056&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd96056">
    <a href="https://www.php.net/manual/vote-note.php?id=96056&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V96056" title="74% like this...">
    37
    </div>
  </div>
  <a href="function.curl-setopt.php.html#96056" class="name">
  <strong class="user"><em>Ed Cradock</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#96056"> &para;</a><div class="date" title="2010-02-05 10:47"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom96056">
<div class="phpcode"><code><span class="html">PUT requests are very simple, just make sure to specify a content-length header and set post fields as a string.<br /><br />Example:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">doPut</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="default">$fields</span><span class="keyword">)<br />{<br />   </span><span class="default">$fields </span><span class="keyword">= (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$fields</span><span class="keyword">)) ? </span><span class="default">http_build_query</span><span class="keyword">(</span><span class="default">$fields</span><span class="keyword">) : </span><span class="default">$fields</span><span class="keyword">;<br /><br />   if(</span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">))<br />   {<br />      </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_CUSTOMREQUEST</span><span class="keyword">, </span><span class="string">'PUT'</span><span class="keyword">);<br />      </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />      </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">, array(</span><span class="string">'Content-Length: ' </span><span class="keyword">. </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$fields</span><span class="keyword">)));<br />      </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$fields</span><span class="keyword">);<br />      </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /><br />      </span><span class="default">$status </span><span class="keyword">= </span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLINFO_HTTP_CODE</span><span class="keyword">);<br /><br />      </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /><br />      return (int) </span><span class="default">$status</span><span class="keyword">;<br />   }<br />   else<br />   {<br />      return </span><span class="default">false</span><span class="keyword">;<br />   }<br />}<br /><br />if(</span><span class="default">doPut</span><span class="keyword">(</span><span class="string">'<a href="http://example.com/api/a/b/c" rel="nofollow" target="_blank">http://example.com/api/a/b/c</a>'</span><span class="keyword">, array(</span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="string">'bar'</span><span class="keyword">)) == </span><span class="default">200</span><span class="keyword">)<br />   </span><span class="comment">// do something<br /></span><span class="keyword">else<br />   </span><span class="comment">// do something else.<br /></span><span class="default">?&gt;<br /></span><br />You can grab the request data on the other side with:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">if(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REQUEST_METHOD'</span><span class="keyword">] == </span><span class="string">'PUT'</span><span class="keyword">)<br />{<br />   </span><span class="default">parse_str</span><span class="keyword">(</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'php://input'</span><span class="keyword">), </span><span class="default">$requestData</span><span class="keyword">);<br /><br />   </span><span class="comment">// Array ( [foo] =&gt; bar )<br />   </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$requestData</span><span class="keyword">);<br /><br />   </span><span class="comment">// Do something with data...<br /></span><span class="keyword">}<br /></span><span class="default">?&gt;<br /></span><br />DELETE  can be done in exactly the same way.</span></code></div>
  </div>
 </div>
  <div class="note" id="91978">  <div class="votes">
    <div id="Vu91978">
    <a href="https://www.php.net/manual/vote-note.php?id=91978&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd91978">
    <a href="https://www.php.net/manual/vote-note.php?id=91978&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V91978" title="80% like this...">
    6
    </div>
  </div>
  <a href="function.curl-setopt.php.html#91978" class="name">
  <strong class="user"><em>Victor Jerlin</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#91978"> &para;</a><div class="date" title="2009-07-03 04:12"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom91978">
<div class="phpcode"><code><span class="html">Seems like some options not mentioned on this page, but listed on <a href="http://curl.haxx.se/libcurl/c/curl_easy_setopt.html" rel="nofollow" target="_blank">http://curl.haxx.se/libcurl/c/curl_easy_setopt.html</a> is actually supported.<br /><br />I was happy to see that I could actually use CURLOPT_FTP_CREATE_MISSING_DIRS even from PHP.</span></code></div>
  </div>
 </div>
  <div class="note" id="82418">  <div class="votes">
    <div id="Vu82418">
    <a href="https://www.php.net/manual/vote-note.php?id=82418&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd82418">
    <a href="https://www.php.net/manual/vote-note.php?id=82418&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V82418" title="76% like this...">
    26
    </div>
  </div>
  <a href="function.curl-setopt.php.html#82418" class="name">
  <strong class="user"><em>sgamon at yahoo dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#82418"> &para;</a><div class="date" title="2008-04-09 05:55"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom82418">
<div class="phpcode"><code><span class="html">If you are doing a POST, and the content length is 1,025 or greater, then curl exploits a feature of http 1.1: 100 (Continue) Status.<br /><br />See <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.2.3" rel="nofollow" target="_blank">http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.2.3</a><br /><br />* it adds a header, "Expect: 100-continue".  <br />* it then sends the request head, waits for a 100 response code, then sends the content <br /><br />Not all web servers support this though.  Various errors are returned depending on the server.  If this happens to you, suppress the "Expect" header with this command:<br /><br /><span class="default">&lt;?php<br />curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">, array(</span><span class="string">'Expect:'</span><span class="keyword">));<br /></span><span class="default">?&gt;<br /></span><br />See <a href="http://www.gnegg.ch/2007/02/the-return-of-except-100-continue/" rel="nofollow" target="_blank">http://www.gnegg.ch/2007/02/the-return-of-except-100-continue/</a></span></code></div>
  </div>
 </div>
  <div class="note" id="30906">  <div class="votes">
    <div id="Vu30906">
    <a href="https://www.php.net/manual/vote-note.php?id=30906&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd30906">
    <a href="https://www.php.net/manual/vote-note.php?id=30906&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V30906" title="76% like this...">
    14
    </div>
  </div>
  <a href="function.curl-setopt.php.html#30906" class="name">
  <strong class="user"><em>dweingart at pobox dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#30906"> &para;</a><div class="date" title="2003-04-02 03:08"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom30906">
<div class="phpcode"><code><span class="html">If you want to Curl to follow redirects and you would also like Curl to echo back any cookies that are set in the process, use this:<br /><br /><span class="default">&lt;?php curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEJAR</span><span class="keyword">, </span><span class="string">'-'</span><span class="keyword">); </span><span class="default">?&gt;<br /></span><br />'-' means stdout<br /><br />-dw</span></code></div>
  </div>
 </div>
  <div class="note" id="93686">  <div class="votes">
    <div id="Vu93686">
    <a href="https://www.php.net/manual/vote-note.php?id=93686&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd93686">
    <a href="https://www.php.net/manual/vote-note.php?id=93686&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V93686" title="75% like this...">
    18
    </div>
  </div>
  <a href="function.curl-setopt.php.html#93686" class="name">
  <strong class="user"><em>Chris at PureFormSolutions dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#93686"> &para;</a><div class="date" title="2009-09-22 03:54"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom93686">
<div class="phpcode"><code><span class="html">I've found that setting CURLOPT_HTTPHEADER more than once will clear out any headers you've set previously with CURLOPT_HTTPHEADER.<br /><br />Consider the following:<br /><span class="default">&lt;?php<br />    </span><span class="comment"># ...<br /><br />    </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$cURL</span><span class="keyword">,</span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">,array (<br />        </span><span class="string">"Content-Type: text/xml; charset=utf-8"</span><span class="keyword">,<br />        </span><span class="string">"Expect: 100-continue"<br />    </span><span class="keyword">));<br /><br />    </span><span class="comment"># ... do some other stuff ...<br /><br />    </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$cURL</span><span class="keyword">,</span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">,array (<br />        </span><span class="string">"Accept: application/json"<br />    </span><span class="keyword">));<br /><br />    </span><span class="comment"># ...<br /></span><span class="default">?&gt;<br /></span><br />Both the Content-Type and Expect I set will not be in the outgoing headers, but Accept will.</span></code></div>
  </div>
 </div>
  <div class="note" id="118586">  <div class="votes">
    <div id="Vu118586">
    <a href="https://www.php.net/manual/vote-note.php?id=118586&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd118586">
    <a href="https://www.php.net/manual/vote-note.php?id=118586&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V118586" title="74% like this...">
    15
    </div>
  </div>
  <a href="function.curl-setopt.php.html#118586" class="name">
  <strong class="user"><em>joelhy</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#118586"> &para;</a><div class="date" title="2016-01-04 10:19"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom118586">
<div class="phpcode"><code><span class="html">Please notice that CURLINFO_HEADER_OUT and CURLOPT_VERBOSE option does not work together:<br />"When CURLINFO_HEADER_OUT is set to TRUE than CURLOPT_VERBOSE does not work."(from <a href="https://bugs.php.net/bug.php?id=65348" rel="nofollow" target="_blank">https://bugs.php.net/bug.php?id=65348</a>). <br />This took me an hour or two to figure it out.</span></code></div>
  </div>
 </div>
  <div class="note" id="61395">  <div class="votes">
    <div id="Vu61395">
    <a href="https://www.php.net/manual/vote-note.php?id=61395&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd61395">
    <a href="https://www.php.net/manual/vote-note.php?id=61395&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V61395" title="75% like this...">
    16
    </div>
  </div>
  <a href="function.curl-setopt.php.html#61395" class="name">
  <strong class="user"><em>luca dot manzo at bbsitalia dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#61395"> &para;</a><div class="date" title="2006-02-02 03:55"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom61395">
<div class="phpcode"><code><span class="html">If you're getting trouble with cookie handling in curl: <br /><br />- curl manages tranparently cookies in a single curl session<br />- the option <br /><span class="default">&lt;?php curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEJAR</span><span class="keyword">, </span><span class="string">"/tmp/cookieFileName"</span><span class="keyword">); </span><span class="default">?&gt;<br /></span><br />makes curl to store the cookies in a file at the and of the curl session<br /><br />- the option <br /><span class="default">&lt;?php curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEFILE</span><span class="keyword">, </span><span class="string">"/tmp/cookieFileName"</span><span class="keyword">); </span><span class="default">?&gt;<br /></span><br />makes curl to use the given file as source for the cookies to send to the server. <br /><br />so to handle correctly cookies between different curl session, the you have to do something like this:<br /><br /><span class="default">&lt;?php<br />       $ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(); <br />       </span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">); <br />       </span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEJAR</span><span class="keyword">, </span><span class="default">COOKIE_FILE_PATH</span><span class="keyword">);<br />       </span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEFILE</span><span class="keyword">, </span><span class="default">COOKIE_FILE_PATH</span><span class="keyword">);<br /><br />       </span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">); <br />       </span><span class="default">$result </span><span class="keyword">= </span><span class="default">curl_exec </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />       </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />       return </span><span class="default">$result</span><span class="keyword">;<br /></span><span class="default">?&gt;<br /></span><br />in particular this is NECESSARY if you are using PEAR_SOAP libraries to build a webservice client over https and the remote server need to establish a session cookie. in fact each soap message is sent using a different curl session!!<br /><br />I hope this can help someone<br />Luca</span></code></div>
  </div>
 </div>
  <div class="note" id="125490">  <div class="votes">
    <div id="Vu125490">
    <a href="https://www.php.net/manual/vote-note.php?id=125490&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd125490">
    <a href="https://www.php.net/manual/vote-note.php?id=125490&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V125490" title="75% like this...">
    2
    </div>
  </div>
  <a href="function.curl-setopt.php.html#125490" class="name">
  <strong class="user"><em>qwertz182</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#125490"> &para;</a><div class="date" title="2020-11-06 11:18"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom125490">
<div class="phpcode"><code><span class="html">As the "example #2 Uploading file" says it is deprecated as of PHP 5.5.0 but doesn't tell you how it's done right,<br />here is a really easy example using the CURLFile class:<br /><br /><span class="default">&lt;?php<br />$request </span><span class="keyword">= [<br />    </span><span class="string">'firstName' </span><span class="keyword">=&gt; </span><span class="string">'John'</span><span class="keyword">,<br />    </span><span class="string">'lastName' </span><span class="keyword">=&gt; </span><span class="string">'Doe'</span><span class="keyword">,<br />    </span><span class="string">'file' </span><span class="keyword">=&gt; new </span><span class="default">CURLFile</span><span class="keyword">(</span><span class="string">'example.txt'</span><span class="keyword">, </span><span class="string">'text/plain'</span><span class="keyword">) </span><span class="comment">// or use curl_file_create()<br /></span><span class="keyword">];<br /><br /></span><span class="default">$curlOptions </span><span class="keyword">= [<br />    </span><span class="default">CURLOPT_URL </span><span class="keyword">=&gt; </span><span class="string">'<a href="http://example.com/upload.php" rel="nofollow" target="_blank">http://example.com/upload.php</a>'</span><span class="keyword">,<br />    </span><span class="default">CURLOPT_POST </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,<br />    </span><span class="default">CURLOPT_HEADER </span><span class="keyword">=&gt; </span><span class="default">false</span><span class="keyword">,<br />    </span><span class="default">CURLOPT_RETURNTRANSFER </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,<br />    </span><span class="default">CURLOPT_POSTFIELDS </span><span class="keyword">=&gt; </span><span class="default">$request</span><span class="keyword">,<br />];<br /><br /></span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br /></span><span class="default">curl_setopt_array</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">$curlOptions</span><span class="keyword">);<br /><br /></span><span class="default">$response </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />This is just like posting a html form with an input[type=file] field.<br />The result on windows could look like this:<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">// $_POST<br /></span><span class="keyword">Array<br />(<br />    [</span><span class="default">firstName</span><span class="keyword">] =&gt; </span><span class="default">John<br />    </span><span class="keyword">[</span><span class="default">lastName</span><span class="keyword">] =&gt; </span><span class="default">Doe<br /></span><span class="keyword">)<br /><br /></span><span class="comment">// $_FILES<br /></span><span class="keyword">Array<br />(<br />    [</span><span class="default">file</span><span class="keyword">] =&gt; Array<br />        (<br />            [</span><span class="default">name</span><span class="keyword">] =&gt; </span><span class="default">example</span><span class="keyword">.</span><span class="default">txt<br />            </span><span class="keyword">[</span><span class="default">type</span><span class="keyword">] =&gt; </span><span class="default">text</span><span class="keyword">/</span><span class="default">plain<br />            </span><span class="keyword">[</span><span class="default">tmp_name</span><span class="keyword">] =&gt; </span><span class="default">C</span><span class="keyword">:</span><span class="default">\wamp64\tmp\php3016</span><span class="keyword">.</span><span class="default">tmp<br />            </span><span class="keyword">[</span><span class="default">error</span><span class="keyword">] =&gt; </span><span class="default">0<br />            </span><span class="keyword">[</span><span class="default">size</span><span class="keyword">] =&gt; </span><span class="default">14<br />        </span><span class="keyword">)<br /><br />)<br /></span><span class="default">?&gt;<br /></span><br />Since the request is an array (and not a string), curl will automatically encode the data as "multipart/form-data".<br />Please be aware that if you pass an invalid file path to CURLFile, setting the CURLOPT_POSTFIELDS option will fail.<br />So if you are using curl_setopt_array for setting the options at once, according to the manual, "If an option could not be successfully set, FALSE is immediately returned, ignoring any future options in the options array.".<br />So you should make sure that the file exists or set CURLOPT_POSTFIELDS with curl_setopt() and check if it returns false and act accordingly.</span></code></div>
  </div>
 </div>
  <div class="note" id="26797">  <div class="votes">
    <div id="Vu26797">
    <a href="https://www.php.net/manual/vote-note.php?id=26797&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd26797">
    <a href="https://www.php.net/manual/vote-note.php?id=26797&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V26797" title="75% like this...">
    14
    </div>
  </div>
  <a href="function.curl-setopt.php.html#26797" class="name">
  <strong class="user"><em>yann dot corno at free dot fr</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#26797"> &para;</a><div class="date" title="2002-11-13 04:19"><strong>21 years ago</strong></div>
  <div class="text" id="Hcom26797">
<div class="phpcode"><code><span class="html">About the CURLOPT_HTTPHEADER option, it took me some time to figure out how to format the so-called 'Array'. It fact, it is a list of strings. If Curl was already defining a header item, yours will replace it. Here is an example to change the Content Type in a POST:<br /><br /><span class="default">&lt;?php curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">, Array(</span><span class="string">"Content-Type: text/xml"</span><span class="keyword">)); </span><span class="default">?&gt;<br /></span><br />Yann</span></code></div>
  </div>
 </div>
  <div class="note" id="96903">  <div class="votes">
    <div id="Vu96903">
    <a href="https://www.php.net/manual/vote-note.php?id=96903&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd96903">
    <a href="https://www.php.net/manual/vote-note.php?id=96903&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V96903" title="73% like this...">
    9
    </div>
  </div>
  <a href="function.curl-setopt.php.html#96903" class="name">
  <strong class="user"><em>anderseta at gmail dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#96903"> &para;</a><div class="date" title="2010-03-22 02:48"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom96903">
<div class="phpcode"><code><span class="html">If you wish to find the size of the file you are streaming and use it as your header this is how:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">function </span><span class="default">write_function</span><span class="keyword">(</span><span class="default">$curl_resource</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">)<br />{<br />    if(</span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$curl_resource</span><span class="keyword">, </span><span class="default">CURLINFO_SIZE_DOWNLOAD</span><span class="keyword">) &lt;= </span><span class="default">2000</span><span class="keyword">)<br />    {<br />        </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Expires: 0'</span><span class="keyword">);<br />        </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Cache-Control: must-revalidate, post-check=0, pre-check=0'</span><span class="keyword">);<br />        </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Pragma: public'</span><span class="keyword">);<br />        </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-Description: File Transfer'</span><span class="keyword">);<br />        </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Transfer-Encoding: binary"</span><span class="keyword">);<br />        </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Type: "</span><span class="keyword">.</span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$curl_resource</span><span class="keyword">, </span><span class="default">CURLINFO_CONTENT_TYPE</span><span class="keyword">).</span><span class="string">""</span><span class="keyword">);<br />        </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Length: "</span><span class="keyword">.</span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$curl_resource</span><span class="keyword">, </span><span class="default">CURLINFO_CONTENT_LENGTH_DOWNLOAD</span><span class="keyword">).</span><span class="string">""</span><span class="keyword">);<br />    }<br />    <br />    print </span><span class="default">$string</span><span class="keyword">;<br /><br />    return </span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="string">'8bit'</span><span class="keyword">);<br />}<br /><br /></span><span class="default">?&gt;<br /></span><br />1440 is the the default number of bytes curl will call the write function (BUFFERSIZE does not affect this, i actually think you can not change this value), so it means the headers are going to be set only one time.<br /><br />write_function must return the exact number of bytes of the string, so you can return a value with mb_strlen.</span></code></div>
  </div>
 </div>
  <div class="note" id="113682">  <div class="votes">
    <div id="Vu113682">
    <a href="https://www.php.net/manual/vote-note.php?id=113682&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd113682">
    <a href="https://www.php.net/manual/vote-note.php?id=113682&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V113682" title="71% like this...">
    14
    </div>
  </div>
  <a href="function.curl-setopt.php.html#113682" class="name">
  <strong class="user"><em>badman</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#113682"> &para;</a><div class="date" title="2013-11-15 10:36"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom113682">
<div class="phpcode"><code><span class="html">Many hosters use PHP safe_mode or/and open_basedir, so you can't use CURLOPT_FOLLOWLOCATION. If you try, you see message like this:<br />CURLOPT_FOLLOWLOCATION cannot be activated when safe_mode is enabled or an open_basedir is set in [you script name &amp; path] on line XXX<br /><br />First, I try to use zsalab function (<a href="http://us2.php.net/manual/en/function.curl-setopt.php#102121" rel="nofollow" target="_blank">http://us2.php.net/manual/en/function.curl-setopt.php#102121</a>) from this page, but for some reason it did not work properly. So, I wrote my own.<br /><br />It can be use instead of curl_exec. If server HTTP response codes is 30x, function will forward the request as long as the response is not different from 30x (for example, 200 Ok). Also you can use POST.<br /><br />function curlExec(/* Array */$curlOptions='', /* Array */$curlHeaders='', /* Array */$postFields='')<br />{<br />  $newUrl = '';<br />  $maxRedirection = 10;<br />  do<br />  {<br />    if ($maxRedirection&lt;1) die('Error: reached the limit of redirections');<br /><br />    $ch = curl_init();<br />    if (!empty($curlOptions)) curl_setopt_array($ch, $curlOptions);<br />    if (!empty($curlHeaders)) curl_setopt($ch, CURLOPT_HTTPHEADER, $curlHeaders);<br />    if (!empty($postFields))<br />    {<br />      curl_setopt($ch, CURLOPT_POST, 1);<br />      curl_setopt($ch, CURLOPT_POSTFIELDS, $postFields);<br />    }<br />    <br />    if (!empty($newUrl)) curl_setopt($ch, CURLOPT_URL, $newUrl); // redirect needed<br />    <br />    $curlResult = curl_exec($ch);<br />    $code = curl_getinfo($ch, CURLINFO_HTTP_CODE);<br /><br />    if ($code == 301 || $code == 302 || $code == 303 || $code == 307)<br />    {<br />      preg_match('/Location:(.*?)\n/', $curlResult, $matches);<br />      $newUrl = trim(array_pop($matches));<br />      curl_close($ch);<br /><br />      $maxRedirection--;<br />      continue;<br />    }<br />    else // no more redirection<br />    {<br />      $code = 0;<br />      curl_close($ch);<br />    }<br />  }<br />  while($code);<br />  return $curlResult;<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="80271">  <div class="votes">
    <div id="Vu80271">
    <a href="https://www.php.net/manual/vote-note.php?id=80271&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd80271">
    <a href="https://www.php.net/manual/vote-note.php?id=80271&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V80271" title="68% like this...">
    32
    </div>
  </div>
  <a href="function.curl-setopt.php.html#80271" class="name">
  <strong class="user"><em>jade dot skaggs at gmail dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#80271"> &para;</a><div class="date" title="2008-01-07 09:48"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom80271">
<div class="phpcode"><code><span class="html">After much struggling, I managed to get a SOAP request requiring HTTP authentication to work.  Here's some source that will hopefully be useful to others. <br /><br />         <span class="default">&lt;?php<br /><br />         $credentials </span><span class="keyword">= </span><span class="string">"username:password"</span><span class="keyword">;<br />         <br />         </span><span class="comment">// Read the XML to send to the Web Service<br />         </span><span class="default">$request_file </span><span class="keyword">= </span><span class="string">"./SampleRequest.xml"</span><span class="keyword">;<br />        </span><span class="default">$fh </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$request_file</span><span class="keyword">, </span><span class="string">'r'</span><span class="keyword">);<br />        </span><span class="default">$xml_data </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">, </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$request_file</span><span class="keyword">));<br />        </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">);<br />                <br />        </span><span class="default">$url </span><span class="keyword">= </span><span class="string">"<a href="http://www.example.com/services/calculation" rel="nofollow" target="_blank">http://www.example.com/services/calculation</a>"</span><span class="keyword">;<br />        </span><span class="default">$page </span><span class="keyword">= </span><span class="string">"/services/calculation"</span><span class="keyword">;<br />        </span><span class="default">$headers </span><span class="keyword">= array(<br />            </span><span class="string">"POST "</span><span class="keyword">.</span><span class="default">$page</span><span class="keyword">.</span><span class="string">" HTTP/1.0"</span><span class="keyword">,<br />            </span><span class="string">"Content-type: text/xml;charset=\"utf-8\""</span><span class="keyword">,<br />            </span><span class="string">"Accept: text/xml"</span><span class="keyword">,<br />            </span><span class="string">"Cache-Control: no-cache"</span><span class="keyword">,<br />            </span><span class="string">"Pragma: no-cache"</span><span class="keyword">,<br />            </span><span class="string">"SOAPAction: \"run\""</span><span class="keyword">,<br />            </span><span class="string">"Content-length: "</span><span class="keyword">.</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$xml_data</span><span class="keyword">),<br />            </span><span class="string">"Authorization: Basic " </span><span class="keyword">. </span><span class="default">base64_encode</span><span class="keyword">(</span><span class="default">$credentials</span><span class="keyword">)<br />        );<br />       <br />        </span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_TIMEOUT</span><span class="keyword">, </span><span class="default">60</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">, </span><span class="default">$headers</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_USERAGENT</span><span class="keyword">, </span><span class="default">$defined_vars</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">]);<br />        <br />        </span><span class="comment">// Apply the XML to our curl call<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POST</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$xml_data</span><span class="keyword">); <br /><br />        </span><span class="default">$data </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">); <br /><br />        if (</span><span class="default">curl_errno</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">)) {<br />            print </span><span class="string">"Error: " </span><span class="keyword">. </span><span class="default">curl_error</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />        } else {<br />            </span><span class="comment">// Show me the result<br />            </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />            </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />        }<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="116866">  <div class="votes">
    <div id="Vu116866">
    <a href="https://www.php.net/manual/vote-note.php?id=116866&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116866">
    <a href="https://www.php.net/manual/vote-note.php?id=116866&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116866" title="72% like this...">
    8
    </div>
  </div>
  <a href="function.curl-setopt.php.html#116866" class="name">
  <strong class="user"><em>jancister at gmail dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#116866"> &para;</a><div class="date" title="2015-03-12 04:09"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom116866">
<div class="phpcode"><code><span class="html">Please note that if you want to handle progress using CURLOPT_PROGRESSFUNCTION option, you need to take into consideration what version of PHP are you using. Since version 5.5.0, compatibility-breaking change was introduced in number/order of the arguments passed to the callback function, and cURL resource is now passed as first argument.<br /><br />Prior to version 5.5.0:<br /><span class="default">&lt;?php<br /></span><span class="comment">// ...<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">CURLOPT_PROGRESSFUNCTION</span><span class="keyword">, </span><span class="string">'progressCallback'</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">CURLOPT_NOPROGRESS</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br /></span><span class="comment">// ...<br /></span><span class="keyword">function </span><span class="default">progressCallback</span><span class="keyword">(</span><span class="default">$download_size </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$downloaded </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$upload_size </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$uploaded </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)<br />{<br />    </span><span class="comment">// Handle progress<br /></span><span class="keyword">}<br /></span><span class="default">?&gt;<br /></span><br />From version 5.5.0:<br /><span class="default">&lt;?php<br /></span><span class="comment">// ...<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">CURLOPT_PROGRESSFUNCTION</span><span class="keyword">, </span><span class="string">'progressCallback'</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">CURLOPT_NOPROGRESS</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br /></span><span class="comment">// ...<br /></span><span class="keyword">function </span><span class="default">progressCallback</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">$download_size </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$downloaded </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$upload_size </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$uploaded </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)<br />{<br />    </span><span class="comment">// Handle progress<br /></span><span class="keyword">}<br /></span><span class="default">?&gt;<br /></span><br />However, if your code needs to be compatible with PHP version both before and after 5.5.0, consider adding a version check:<br /><span class="default">&lt;?php<br /></span><span class="comment">// ...<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">CURLOPT_PROGRESSFUNCTION</span><span class="keyword">, </span><span class="string">'progressCallback'</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">CURLOPT_NOPROGRESS</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br /></span><span class="comment">// ...<br /></span><span class="keyword">function </span><span class="default">progressCallback</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">$download_size </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$downloaded </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$upload_size </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$uploaded </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)<br />{<br />   </span><span class="comment">/**<br />    * $resource parameter was added in version 5.5.0 breaking backwards compatibility;<br />    * if we are using PHP version lower than 5.5.0, we need to shift the arguments<br />    * @see <a href="http://php.net/manual/en/function.curl-setopt.php#refsect1-function.curl-setopt-changelog" rel="nofollow" target="_blank">http://php.net/manual/en/function.curl-setopt.php#refsect1-function.curl-setopt-changelog</a><br />    */<br />    </span><span class="keyword">if (</span><span class="default">version_compare</span><span class="keyword">(</span><span class="default">PHP_VERSION</span><span class="keyword">, </span><span class="string">'5.5.0'</span><span class="keyword">) &lt; </span><span class="default">0</span><span class="keyword">) {<br />        </span><span class="default">$uploaded </span><span class="keyword">= </span><span class="default">$upload_size</span><span class="keyword">;<br />        </span><span class="default">$upload_size </span><span class="keyword">= </span><span class="default">$downloaded</span><span class="keyword">;<br />        </span><span class="default">$downloaded </span><span class="keyword">= </span><span class="default">$download_size</span><span class="keyword">;<br />        </span><span class="default">$download_size </span><span class="keyword">= </span><span class="default">$resource</span><span class="keyword">;<br />    }<br /><br />    </span><span class="comment">// Handle progress<br /></span><span class="keyword">}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="99082">  <div class="votes">
    <div id="Vu99082">
    <a href="https://www.php.net/manual/vote-note.php?id=99082&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd99082">
    <a href="https://www.php.net/manual/vote-note.php?id=99082&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V99082" title="69% like this...">
    21
    </div>
  </div>
  <a href="function.curl-setopt.php.html#99082" class="name">
  <strong class="user"><em>joeterranova at gmail dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#99082"> &para;</a><div class="date" title="2010-07-26 12:57"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom99082">
<div class="phpcode"><code><span class="html">It appears that setting CURLOPT_FILE before setting CURLOPT_RETURNTRANSFER doesn't work, presumably because CURLOPT_FILE depends on CURLOPT_RETURNTRANSFER being set.<br /><br />So do this:<br /><br /><span class="default">&lt;?php<br />curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FILE</span><span class="keyword">, </span><span class="default">$fp</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />not this:<br /><br /><span class="default">&lt;?php<br />curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FILE</span><span class="keyword">, </span><span class="default">$fp</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="59993">  <div class="votes">
    <div id="Vu59993">
    <a href="https://www.php.net/manual/vote-note.php?id=59993&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd59993">
    <a href="https://www.php.net/manual/vote-note.php?id=59993&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V59993" title="72% like this...">
    5
    </div>
  </div>
  <a href="function.curl-setopt.php.html#59993" class="name">
  <strong class="user"><em>skyogre __at__ yandex __dot__ ru</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#59993"> &para;</a><div class="date" title="2005-12-22 02:13"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom59993">
<div class="phpcode"><code><span class="html">There is really a problem of transmitting $_POST data with curl in php 4+ at least.<br />I improved the encoding function by Alejandro Moreno to work properly with mulltidimensional arrays.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">data_encode</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$keyprefix </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">, </span><span class="default">$keypostfix </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">) {<br />  </span><span class="default">assert</span><span class="keyword">( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">) );<br />  </span><span class="default">$vars</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">;<br />  foreach(</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />    if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) </span><span class="default">$vars </span><span class="keyword">.= </span><span class="default">data_encode</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$keyprefix</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="default">$keypostfix</span><span class="keyword">.</span><span class="default">urlencode</span><span class="keyword">(</span><span class="string">"["</span><span class="keyword">), </span><span class="default">urlencode</span><span class="keyword">(</span><span class="string">"]"</span><span class="keyword">));<br />    else </span><span class="default">$vars </span><span class="keyword">.= </span><span class="default">$keyprefix</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="default">$keypostfix</span><span class="keyword">.</span><span class="string">"="</span><span class="keyword">.</span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">).</span><span class="string">"&amp;"</span><span class="keyword">;<br />  }<br />  return </span><span class="default">$vars</span><span class="keyword">;<br />}<br /><br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">substr</span><span class="keyword">(</span><span class="default">data_encode</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">), </span><span class="default">0</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">) );<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="87341">  <div class="votes">
    <div id="Vu87341">
    <a href="https://www.php.net/manual/vote-note.php?id=87341&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd87341">
    <a href="https://www.php.net/manual/vote-note.php?id=87341&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V87341" title="71% like this...">
    9
    </div>
  </div>
  <a href="function.curl-setopt.php.html#87341" class="name">
  <strong class="user"><em>fnjordy at gmail dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#87341"> &para;</a><div class="date" title="2008-11-30 11:28"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom87341">
<div class="phpcode"><code><span class="html">Note that CURLOPT_RETURNTRANSFER when used with CURLOPT_WRITEFUNCTION has effectively three settings: default, true, and false.<br /><br />default - callbacks will be called as expected.<br />true - content will be returned but callback function will not be called.<br />false - content will be output and callback function will not be called.<br /><br />Note that CURLOPT_HEADERFUNCTION callbacks are always called.</span></code></div>
  </div>
 </div>
  <div class="note" id="110162">  <div class="votes">
    <div id="Vu110162">
    <a href="https://www.php.net/manual/vote-note.php?id=110162&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd110162">
    <a href="https://www.php.net/manual/vote-note.php?id=110162&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V110162" title="71% like this...">
    3
    </div>
  </div>
  <a href="function.curl-setopt.php.html#110162" class="name">
  <strong class="user"><em>juozaspo at gmail dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#110162"> &para;</a><div class="date" title="2012-09-25 08:47"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom110162">
<div class="phpcode"><code><span class="html">I've created an example that gets the file on url passed to script and outputs it to the browser. <br /><br /><span class="default">&lt;?php<br /></span><span class="comment">//get the file (e.g. image) and output it to the browser<br /></span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(); </span><span class="comment">//open curl handle<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'url'</span><span class="keyword">]); </span><span class="comment">//set an url<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">); </span><span class="comment">//do not output directly, use variable<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_BINARYTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">); </span><span class="comment">//do a binary transfer<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FAILONERROR</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">); </span><span class="comment">//stop if an error occurred<br /></span><span class="default">$file</span><span class="keyword">=</span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">); </span><span class="comment">//store the content in variable<br /></span><span class="keyword">if(!</span><span class="default">curl_errno</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">))<br />{<br />    </span><span class="comment">//send out headers and output<br />    </span><span class="default">header </span><span class="keyword">(</span><span class="string">"Content-type: "</span><span class="keyword">.</span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLINFO_CONTENT_TYPE</span><span class="keyword">).</span><span class="string">""</span><span class="keyword">);<br />    </span><span class="default">header </span><span class="keyword">(</span><span class="string">"Content-Length: "</span><span class="keyword">.</span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLINFO_CONTENT_LENGTH_DOWNLOAD</span><span class="keyword">).</span><span class="string">""</span><span class="keyword">);<br />    echo </span><span class="default">$file</span><span class="keyword">;<br />} else echo </span><span class="string">'Curl error: ' </span><span class="keyword">. </span><span class="default">curl_error</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /></span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">); </span><span class="comment">//close curl handle<br /></span><span class="default">?&gt;<br /></span><br />p.s. Make sure that there're no new lines before and after code or script may not work.</span></code></div>
  </div>
 </div>
  <div class="note" id="108333">  <div class="votes">
    <div id="Vu108333">
    <a href="https://www.php.net/manual/vote-note.php?id=108333&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd108333">
    <a href="https://www.php.net/manual/vote-note.php?id=108333&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V108333" title="71% like this...">
    3
    </div>
  </div>
  <a href="function.curl-setopt.php.html#108333" class="name">
  <strong class="user"><em>Joey Hewitt</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#108333"> &para;</a><div class="date" title="2012-04-17 10:52"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom108333">
<div class="phpcode"><code><span class="html">Note that if you put a certificate chain in a PEM file, the certificates need to be ordered so that each certificate is followed by its issuer (i.e., root last.)<br /><br />Source: <a href="http://publib.boulder.ibm.com/tividd/td/ITIM/SC32-1493-00/en_US/HTML/im451_config09.htm" rel="nofollow" target="_blank">http://publib.boulder.ibm.com/tividd/td/ITIM/SC32-1493-00/en_US/HTML/im451_config09.htm</a></span></code></div>
  </div>
 </div>
  <div class="note" id="103232">  <div class="votes">
    <div id="Vu103232">
    <a href="https://www.php.net/manual/vote-note.php?id=103232&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd103232">
    <a href="https://www.php.net/manual/vote-note.php?id=103232&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V103232" title="68% like this...">
    11
    </div>
  </div>
  <a href="function.curl-setopt.php.html#103232" class="name">
  <strong class="user"><em>PHP at RHaworth dot net</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#103232"> &para;</a><div class="date" title="2011-04-02 02:31"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom103232">
<div class="phpcode"><code><span class="html">When CURLOPT_FOLLOWLOCATION and CURLOPT_HEADER are both true and redirect/s have happened then the header returned by curl_exec() will contain all the headers in the redirect chain in the order they were encountered.</span></code></div>
  </div>
 </div>
  <div class="note" id="60142">  <div class="votes">
    <div id="Vu60142">
    <a href="https://www.php.net/manual/vote-note.php?id=60142&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd60142">
    <a href="https://www.php.net/manual/vote-note.php?id=60142&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V60142" title="70% like this...">
    7
    </div>
  </div>
  <a href="function.curl-setopt.php.html#60142" class="name">
  <strong class="user"><em>Dustin Hawkins</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#60142"> &para;</a><div class="date" title="2005-12-27 02:24"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom60142">
<div class="phpcode"><code><span class="html">To further expand upon use of CURLOPT_CAPATH and CURLOPT_CAINFO...<br /><br />In my case I wanted to prevent curl from talking to any HTTPS server except my own using a self signed certificate. To do this, you'll need openssl installed and access to the HTTPS Server Certificate (server.crt by default on apache)<br /><br />You can then use a command simiar to this to translate your apache certificate into one that curl likes.<br /><br />$ openssl x509 -in server.crt -out outcert.pem -text<br /><br />Then set CURLOPT_CAINFO equal to the the full path to outcert.pem and turn on CURLOPT_SSL_VERIFYPEER.<br /><br />If you want to use the CURLOPT_CAPATH option, you should create a directory for all the valid certificates you have created, then use the c_rehash script that is included with openssl to "prepare" the directory.<br /><br />If you dont use the c_rehash utility, curl will ignore any file in the directory you set.</span></code></div>
  </div>
 </div>
  <div class="note" id="87112">  <div class="votes">
    <div id="Vu87112">
    <a href="https://www.php.net/manual/vote-note.php?id=87112&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd87112">
    <a href="https://www.php.net/manual/vote-note.php?id=87112&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V87112" title="68% like this...">
    14
    </div>
  </div>
  <a href="function.curl-setopt.php.html#87112" class="name">
  <strong class="user"><em>saidk at phirebranding dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#87112"> &para;</a><div class="date" title="2008-11-19 01:31"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom87112">
<div class="phpcode"><code><span class="html">Passing in PHP's $_SESSION into your cURL call:<br /><br /><span class="default">&lt;?php<br />session_start</span><span class="keyword">();<br /></span><span class="default">$strCookie </span><span class="keyword">= </span><span class="string">'PHPSESSID=' </span><span class="keyword">. </span><span class="default">$_COOKIE</span><span class="keyword">[</span><span class="string">'PHPSESSID'</span><span class="keyword">] . </span><span class="string">'; path=/'</span><span class="keyword">;<br /></span><span class="default">session_write_close</span><span class="keyword">();<br /><br /></span><span class="default">$curl_handle </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="string">'enter_external_url_here'</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">( </span><span class="default">$curl_handle</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIE</span><span class="keyword">, </span><span class="default">$strCookie </span><span class="keyword">);<br /></span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$curl_handle</span><span class="keyword">);<br /></span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$curl_handle</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />This worked great for me.  I was calling pages from the same server and needed to keep the $_SESSION variables.  This passes them over.  If you want to test, just print_r($_SESSION);<br /><br />Enjoy!</span></code></div>
  </div>
 </div>
  <div class="note" id="114475">  <div class="votes">
    <div id="Vu114475">
    <a href="https://www.php.net/manual/vote-note.php?id=114475&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd114475">
    <a href="https://www.php.net/manual/vote-note.php?id=114475&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V114475" title="69% like this...">
    5
    </div>
  </div>
  <a href="function.curl-setopt.php.html#114475" class="name">
  <strong class="user"><em>Martin K.</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#114475"> &para;</a><div class="date" title="2014-02-24 05:36"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom114475">
<div class="phpcode"><code><span class="html">If you only want to enable cookie handling and you don't need to save the cookies for a separate session, just set CURLOPT_COOKIEFILE to an empty string.  I was given the advice to use php://memory but that did not seem to have the same effect.<br /><br />Although this is stated in the documentation I thought it was worth reiterating since it cause me so much trouble.</span></code></div>
  </div>
 </div>
  <div class="note" id="78046">  <div class="votes">
    <div id="Vu78046">
    <a href="https://www.php.net/manual/vote-note.php?id=78046&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd78046">
    <a href="https://www.php.net/manual/vote-note.php?id=78046&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V78046" title="68% like this...">
    12
    </div>
  </div>
  <a href="function.curl-setopt.php.html#78046" class="name">
  <strong class="user"><em>Ojas Ojasvi</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#78046"> &para;</a><div class="date" title="2007-09-25 10:52"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom78046">
<div class="phpcode"><code><span class="html"><span class="default">&lt;?php<br /></span><span class="comment">/*<br />* Author: Ojas Ojasvi<br />* Released: September 25, 2007<br />* Description: An example of the disguise_curl() function in order to grab contents from a website while remaining fully camouflaged by using a fake user agent and fake headers.<br />*/<br /><br /></span><span class="default">$url </span><span class="keyword">= </span><span class="string">'<a href="http://www.php.net" rel="nofollow" target="_blank">http://www.php.net</a>'</span><span class="keyword">;<br /><br /></span><span class="comment">// disguises the curl using fake headers and a fake user agent.<br /></span><span class="keyword">function </span><span class="default">disguise_curl</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">)<br />{<br />  </span><span class="default">$curl </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br /><br />  </span><span class="comment">// Setup headers - I used the same headers from Firefox version 2.0.0.6<br />  // below was split up because php.net said the line was too long. :/<br />  </span><span class="default">$header</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"Accept: text/xml,application/xml,application/xhtml+xml,"</span><span class="keyword">;<br />  </span><span class="default">$header</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] .= </span><span class="string">"text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5"</span><span class="keyword">;<br />  </span><span class="default">$header</span><span class="keyword">[] = </span><span class="string">"Cache-Control: max-age=0"</span><span class="keyword">;<br />  </span><span class="default">$header</span><span class="keyword">[] = </span><span class="string">"Connection: keep-alive"</span><span class="keyword">;<br />  </span><span class="default">$header</span><span class="keyword">[] = </span><span class="string">"Keep-Alive: 300"</span><span class="keyword">;<br />  </span><span class="default">$header</span><span class="keyword">[] = </span><span class="string">"Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7"</span><span class="keyword">;<br />  </span><span class="default">$header</span><span class="keyword">[] = </span><span class="string">"Accept-Language: en-us,en;q=0.5"</span><span class="keyword">;<br />  </span><span class="default">$header</span><span class="keyword">[] = </span><span class="string">"Pragma: "</span><span class="keyword">; </span><span class="comment">// browsers keep this blank.<br /><br />  </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">);<br />  </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">, </span><span class="default">CURLOPT_USERAGENT</span><span class="keyword">, </span><span class="string">'Googlebot/2.1 (+<a href="http://www.google.com/bot.html" rel="nofollow" target="_blank">http://www.google.com/bot.html</a>)'</span><span class="keyword">);<br />  </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">, </span><span class="default">$header</span><span class="keyword">);<br />  </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">, </span><span class="default">CURLOPT_REFERER</span><span class="keyword">, </span><span class="string">'<a href="http://www.google.com" rel="nofollow" target="_blank">http://www.google.com</a>'</span><span class="keyword">);<br />  </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">, </span><span class="default">CURLOPT_ENCODING</span><span class="keyword">, </span><span class="string">'gzip,deflate'</span><span class="keyword">);<br />  </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">, </span><span class="default">CURLOPT_AUTOREFERER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />  </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />  </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">, </span><span class="default">CURLOPT_TIMEOUT</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);<br /><br />  </span><span class="default">$html </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">); </span><span class="comment">// execute the curl command<br />  </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">); </span><span class="comment">// close the connection<br /><br />  </span><span class="keyword">return </span><span class="default">$html</span><span class="keyword">; </span><span class="comment">// and finally, return $html<br /></span><span class="keyword">}<br /><br /></span><span class="comment">// uses the function and displays the text off the website<br /></span><span class="default">$text </span><span class="keyword">= </span><span class="default">disguise_curl</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);<br />echo </span><span class="default">$text</span><span class="keyword">;<br /></span><span class="default">?&gt;<br /></span><br />Ojas Ojasvi</span></code></div>
  </div>
 </div>
  <div class="note" id="116223">  <div class="votes">
    <div id="Vu116223">
    <a href="https://www.php.net/manual/vote-note.php?id=116223&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116223">
    <a href="https://www.php.net/manual/vote-note.php?id=116223&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116223" title="68% like this...">
    7
    </div>
  </div>
  <a href="function.curl-setopt.php.html#116223" class="name">
  <strong class="user"><em>Aaron Wells</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#116223"> &para;</a><div class="date" title="2014-11-24 11:34"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom116223">
<div class="phpcode"><code><span class="html">If you use cURL to fetch user-supplied URLs (for instance, in a web-based RSS aggregator), be aware of the risk of server-side request forgery (SSRF). This is an attack where the user takes advantage of the fact that cURL requests are sent from the web server itself, to reach network locations they wouldn't be able to reach from outside the network.<br /><br />For instance, they could enter a "<a href="http://localhost" rel="nofollow" target="_blank">http://localhost</a>" URL, and access things on the web server via "localhost". Or, "<a href="ftp://localhost" rel="nofollow" target="_blank">ftp://localhost</a>". cURL supports a lot of protocols!<br /><br />If you are using CURLOPT_FOLLOWLOCATION, the malicious URL could be in a redirect from the original request. cURL also will follow redirect headers to other protocols! (303 See Other; Location: <a href="ftp://localhost" rel="nofollow" target="_blank">ftp://localhost</a>).<br /><br />So if you're using cURL with user-supplied URLs, at the very least use CURLOPT_PROTOCOLS (which also sets CURLOPT_REDIR_PROTOCOLS), and either disable CURLOPT_FOLLOWLOCATION or use the "SafeCurl" library to safely follow redirects.</span></code></div>
  </div>
 </div>
  <div class="note" id="64447">  <div class="votes">
    <div id="Vu64447">
    <a href="https://www.php.net/manual/vote-note.php?id=64447&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd64447">
    <a href="https://www.php.net/manual/vote-note.php?id=64447&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V64447" title="68% like this...">
    11
    </div>
  </div>
  <a href="function.curl-setopt.php.html#64447" class="name">
  <strong class="user"><em>mr at coder dot tv</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#64447"> &para;</a><div class="date" title="2006-04-14 07:22"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom64447">
<div class="phpcode"><code><span class="html">Sometimes you can't use CURLOPT_COOKIEJAR and CURLOPT_COOKIEFILE becoz of the server php-settings(They say u may grab any files from server using these options). Here is the solution<br />1)Don't use CURLOPT_FOLLOWLOCATION<br />2)Use curl_setopt($ch, CURLOPT_HEADER, 1)<br />3)Grab from the header cookies like this:<br />preg_match_all('|Set-Cookie: (.*);|U', $content, $results);    <br />$cookies = implode(';', $results[1]);<br />4)Set them using curl_setopt($ch, CURLOPT_COOKIE,  $cookies);<br /><br />Good Luck, Yevgen</span></code></div>
  </div>
 </div>
  <div class="note" id="123340">  <div class="votes">
    <div id="Vu123340">
    <a href="https://www.php.net/manual/vote-note.php?id=123340&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123340">
    <a href="https://www.php.net/manual/vote-note.php?id=123340&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123340" title="66% like this...">
    2
    </div>
  </div>
  <a href="function.curl-setopt.php.html#123340" class="name">
  <strong class="user"><em>eric dot van dot eldik at peercode dot nl</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#123340"> &para;</a><div class="date" title="2018-11-13 01:21"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom123340">
<div class="phpcode"><code><span class="html">When you get this error using a PUT request: "SSL read: error:00000000:lib(0):func(0):reason(0), errno 104")<br /><br />It could be caused by:<br /><span class="default">&lt;?php<br />curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_PUT</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />Instead try:<br /><span class="default">&lt;?php<br />curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_CUSTOMREQUEST</span><span class="keyword">, </span><span class="string">"PUT"</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="102519">  <div class="votes">
    <div id="Vu102519">
    <a href="https://www.php.net/manual/vote-note.php?id=102519&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd102519">
    <a href="https://www.php.net/manual/vote-note.php?id=102519&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V102519" title="66% like this...">
    8
    </div>
  </div>
  <a href="function.curl-setopt.php.html#102519" class="name">
  <strong class="user"><em>S\</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#102519"> &para;</a><div class="date" title="2011-02-18 11:04"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom102519">
<div class="phpcode"><code><span class="html">When using CURLOPT_POSTFIELDS with an array as parameter, you have to pay high attention to user input. Unvalidated user input will lead to serious security issues.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">/**<br /> * test.php:<br /> */<br /></span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="string">'<a href="http://example.com" rel="nofollow" target="_blank">http://example.com</a>'</span><span class="keyword">);<br /><br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POST</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, array(<br />    </span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'bar'</span><span class="keyword">]<br />));<br /><br /></span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;<br /></span><br />Requesting "test.php?bar=@/home/user/test.png" will send "test.png" to example.com. <br />Make sure you remove the leading "@" from user input.</span></code></div>
  </div>
 </div>
  <div class="note" id="97383">  <div class="votes">
    <div id="Vu97383">
    <a href="https://www.php.net/manual/vote-note.php?id=97383&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd97383">
    <a href="https://www.php.net/manual/vote-note.php?id=97383&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V97383" title="66% like this...">
    3
    </div>
  </div>
  <a href="function.curl-setopt.php.html#97383" class="name">
  <strong class="user"><em>clint at fewbar dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#97383"> &para;</a><div class="date" title="2010-04-16 02:56"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom97383">
<div class="phpcode"><code><span class="html">If you have turned on conditional gets on a curl handle, and then for a subsequent request, you don't have a good setting for CURLOPT_TIMEVALUE , you can disable If-Modified-Since checking with:<br /><br /><span class="default">&lt;?php<br /><br />$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$foo</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_TIMEVALUE</span><span class="keyword">, </span><span class="default">filemtime</span><span class="keyword">(</span><span class="default">$foo_path</span><span class="keyword">));<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_TIMECONDITION</span><span class="keyword">, </span><span class="default">CURLOPT_TIMECOND_IFMODIFIEDSINCE</span><span class="keyword">);<br /></span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /></span><span class="comment">// Reuse same curl handle<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$bar</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_TIMEVALUE</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">); </span><span class="comment">// don't know mtime<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_TIMECONDITION</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">); </span><span class="comment">// set it to 0, turns it off<br /></span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="102090">  <div class="votes">
    <div id="Vu102090">
    <a href="https://www.php.net/manual/vote-note.php?id=102090&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd102090">
    <a href="https://www.php.net/manual/vote-note.php?id=102090&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V102090" title="66% like this...">
    2
    </div>
  </div>
  <a href="function.curl-setopt.php.html#102090" class="name">
  <strong class="user"><em>gskluzacek at gmail dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#102090"> &para;</a><div class="date" title="2011-01-26 01:42"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom102090">
<div class="phpcode"><code><span class="html">FYI... unless you specifically set the user agent, no user agent will be sent in your request as there is no default value like some of the other options.<br /><br />As others have said, not sending a user agent may cause you to not  get the results that you expected, e.g., 0 byte length content, different content, etc.</span></code></div>
  </div>
 </div>
  <div class="note" id="74709">  <div class="votes">
    <div id="Vu74709">
    <a href="https://www.php.net/manual/vote-note.php?id=74709&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd74709">
    <a href="https://www.php.net/manual/vote-note.php?id=74709&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V74709" title="66% like this...">
    4
    </div>
  </div>
  <a href="function.curl-setopt.php.html#74709" class="name">
  <strong class="user"><em>rob at infoglobe dot net</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#74709"> &para;</a><div class="date" title="2007-04-24 09:01"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom74709">
<div class="phpcode"><code><span class="html">Options not included in the above, but that work (Taken from the libcurl.a C documentation)<br /><br />CURLOPT_FTP_SSL <br /><br />Pass a long using one of the values from below, to make libcurl use your desired level of SSL for the ftp transfer. (Added in 7.11.0) <br /><br />CURLFTPSSL_NONE <br /><br />Don't attempt to use SSL. <br /><br />CURLFTPSSL_TRY <br /><br />Try using SSL, proceed as normal otherwise. <br /><br />CURLFTPSSL_CONTROL <br /><br />Require SSL for the control connection or fail with CURLE_FTP_SSL_FAILED. <br /><br />CURLFTPSSL_ALL <br /><br />Require SSL for all communication or fail with CURLE_FTP_SSL_FAILED.</span></code></div>
  </div>
 </div>
  <div class="note" id="121973">  <div class="votes">
    <div id="Vu121973">
    <a href="https://www.php.net/manual/vote-note.php?id=121973&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd121973">
    <a href="https://www.php.net/manual/vote-note.php?id=121973&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V121973" title="64% like this...">
    5
    </div>
  </div>
  <a href="function.curl-setopt.php.html#121973" class="name">
  <strong class="user"><em>ohcc at 163 dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#121973"> &para;</a><div class="date" title="2017-12-04 02:59"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom121973">
<div class="phpcode"><code><span class="html">This is howto upload an existing file to an FTP server with cURL in PHP.<br /><br />You should remember that CURLOPT_URL should contain the file's basename to save on the FTP server. For example, if you upload hello.txt to <a href="ftp://www.wuxiancheng.cn/text/," rel="nofollow" target="_blank">ftp://www.wuxiancheng.cn/text/,</a> CURLOPT_URL should be <a href="ftp://www.wuxiancheng.cn/text/hello.txt" rel="nofollow" target="_blank">ftp://www.wuxiancheng.cn/text/hello.txt</a> rather than <a href="ftp://www.wuxiancheng.cn/text/," rel="nofollow" target="_blank">ftp://www.wuxiancheng.cn/text/,</a> otherwise you will get an error message like "Uploading to a URL without a file name! " when you call curl_error();<br /><br /><span class="default">&lt;?php<br />    $ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br />    </span><span class="default">$filepath </span><span class="keyword">= </span><span class="string">'D:\Web\www\wuxiancheng.cn\hello.txt'</span><span class="keyword">;<br />    </span><span class="default">$basename </span><span class="keyword">= </span><span class="default">pathInfo</span><span class="keyword">(</span><span class="default">$filepath</span><span class="keyword">, </span><span class="default">PATHINFO_BASENAME</span><span class="keyword">);<br />    </span><span class="default">$filesize </span><span class="keyword">= </span><span class="default">fileSize</span><span class="keyword">(</span><span class="default">$filepath</span><span class="keyword">);<br />    </span><span class="default">curl_setopt_array</span><span class="keyword">(<br />        </span><span class="default">$ch</span><span class="keyword">,<br />        array(<br />            </span><span class="default">CURLOPT_URL </span><span class="keyword">=&gt; </span><span class="string">'<a href="ftp://www.wuxiancheng.cn/text/" rel="nofollow" target="_blank">ftp://www.wuxiancheng.cn/text/</a>' </span><span class="keyword">. </span><span class="default">$basename</span><span class="keyword">,<br />            </span><span class="default">CURLOPT_USERPWD </span><span class="keyword">=&gt; </span><span class="string">'USERNAME:PASSWORD'</span><span class="keyword">,<br />            </span><span class="default">CURLOPT_PROTOCOLS </span><span class="keyword">=&gt; </span><span class="default">CURLPROTO_FTP</span><span class="keyword">,<br />            </span><span class="default">CURLOPT_UPLOAD </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,<br />            </span><span class="default">CURLOPT_INFILE </span><span class="keyword">=&gt; </span><span class="default">$filepath</span><span class="keyword">,<br />            </span><span class="default">CURLOPT_INFILESIZE </span><span class="keyword">=&gt; </span><span class="default">$filesize</span><span class="keyword">,<br />            </span><span class="default">CURLOPT_RETURNTRANSFER </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,<br />            </span><span class="default">CURLOPT_HEADER </span><span class="keyword">=&gt; </span><span class="default">false</span><span class="keyword">,<br />        )<br />    );<br />    </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />    </span><span class="default">$message </span><span class="keyword">= </span><span class="default">curl_errno</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">) === </span><span class="default">CURLE_OK </span><span class="keyword">? </span><span class="string">'success' </span><span class="keyword">: </span><span class="string">'failure'</span><span class="keyword">;<br />    echo </span><span class="default">$message</span><span class="keyword">;<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="95027">  <div class="votes">
    <div id="Vu95027">
    <a href="https://www.php.net/manual/vote-note.php?id=95027&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd95027">
    <a href="https://www.php.net/manual/vote-note.php?id=95027&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V95027" title="65% like this...">
    7
    </div>
  </div>
  <a href="function.curl-setopt.php.html#95027" class="name">
  <strong class="user"><em>Pawel Antczak</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#95027"> &para;</a><div class="date" title="2009-12-09 12:07"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom95027">
<div class="phpcode"><code><span class="html">Hello. <br />During problems with "CURLOPT_FOLLOWLOCATION cannot be activated when in safe_mode or an open_basedir is set" <br />I was looking for solution. <br />I've found few methods on this page, but none of them was good enough, so I made one.<br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">curl_redirect_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, &amp;</span><span class="default">$redirects</span><span class="keyword">, </span><span class="default">$curlopt_header </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />    </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />    </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />    </span><span class="default">$data </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />    </span><span class="default">$http_code </span><span class="keyword">= </span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLINFO_HTTP_CODE</span><span class="keyword">);<br />    if (</span><span class="default">$http_code </span><span class="keyword">== </span><span class="default">301 </span><span class="keyword">|| </span><span class="default">$http_code </span><span class="keyword">== </span><span class="default">302</span><span class="keyword">) {<br />        list(</span><span class="default">$header</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\r\n\r\n"</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />        </span><span class="default">$matches </span><span class="keyword">= array();<br />        </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/(Location:|URI:)(.*?)\n/'</span><span class="keyword">, </span><span class="default">$header</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />        </span><span class="default">$url </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">));<br />        </span><span class="default">$url_parsed </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);<br />        if (isset(</span><span class="default">$url_parsed</span><span class="keyword">)) {<br />            </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">);<br />            </span><span class="default">$redirects</span><span class="keyword">++;<br />            return </span><span class="default">curl_redirect_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">$redirects</span><span class="keyword">);<br />        }<br />    }<br />    if (</span><span class="default">$curlopt_header</span><span class="keyword">)<br />        return </span><span class="default">$data</span><span class="keyword">;<br />    else {<br />        list(,</span><span class="default">$body</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\r\n\r\n"</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />        return </span><span class="default">$body</span><span class="keyword">;<br />    }<br />}<br /></span><span class="default">?&gt;<br /></span><br />Main issue in existing functions was lack of information, how many redirects was done. <br />This one will count it. <br />First parameter as usual. <br />Second should be already initialized integer, it will be incremented by number of done redirects. <br />You can set CURLOPT_HEADER if You need it.</span></code></div>
  </div>
 </div>
  <div class="note" id="53445">  <div class="votes">
    <div id="Vu53445">
    <a href="https://www.php.net/manual/vote-note.php?id=53445&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd53445">
    <a href="https://www.php.net/manual/vote-note.php?id=53445&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V53445" title="66% like this...">
    3
    </div>
  </div>
  <a href="function.curl-setopt.php.html#53445" class="name">
  <strong class="user"><em>michaeledwards.com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#53445"> &para;</a><div class="date" title="2005-06-01 02:57"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom53445">
<div class="phpcode"><code><span class="html">Problems can occur if you mix CURLOPT_URL with a 'Host:' header in CURLOPT_HEADERS on redirects because cURL will combine the host you explicitly stated in the 'Host:' header with the host from the Location: header of the redirect response. <br /><br />In short, don't do this:<br /><br /><span class="default">&lt;?php<br />$host </span><span class="keyword">= </span><span class="string">"www.example.com"</span><span class="keyword">;<br /></span><span class="default">$url </span><span class="keyword">= </span><span class="string">"<a href="http://" rel="nofollow" target="_blank">http://</a></span><span class="default">$host</span><span class="string">/"</span><span class="keyword">;<br /><br /></span><span class="default">$headers </span><span class="keyword">= array(</span><span class="string">"Host: </span><span class="default">$host</span><span class="string">"</span><span class="keyword">);<br /><br /></span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br /><br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">, </span><span class="default">$headers</span><span class="keyword">);<br /><br />Do </span><span class="default">this instead</span><span class="keyword">:<br /><br /></span><span class="default">$host </span><span class="keyword">= </span><span class="string">"www.example.com"</span><span class="keyword">;<br /></span><span class="default">$url </span><span class="keyword">= </span><span class="string">"<a href="http://" rel="nofollow" target="_blank">http://</a></span><span class="default">$host</span><span class="string">/"</span><span class="keyword">;<br /><br /></span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br /><br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="110442">  <div class="votes">
    <div id="Vu110442">
    <a href="https://www.php.net/manual/vote-note.php?id=110442&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd110442">
    <a href="https://www.php.net/manual/vote-note.php?id=110442&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V110442" title="63% like this...">
    10
    </div>
  </div>
  <a href="function.curl-setopt.php.html#110442" class="name">
  <strong class="user"><em>regan dot corey at gmail dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#110442"> &para;</a><div class="date" title="2012-10-22 10:22"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom110442">
<div class="phpcode"><code><span class="html">I spent a couple of days trying to POST a multi-dimensional array of form fields, including a file upload, to a remote server to update a product. Here are the breakthroughs that FINALLY allowed the script to run as desired.<br /><br />Firstly, the HTML form used input names like these:<br />&lt;input type="text" name="product[name]" /&gt;<br />&lt;input type="text" name="product[cost]" /&gt;<br />&lt;input type="file" name="product[thumbnail]" /&gt;<br />in conjunction with two other form inputs not part of the product array<br />&lt;input type="text" name="method" value="put" /&gt;<br />&lt;input type="text" name="mode" /&gt;<br /><br />I used several cURL options, but the only two (other than URL) that mattered were:<br />curl_setopt($handle, CURLOPT_POST, true);<br />curl_setopt($handle, CURLOPT_POSTFIELDS, $postfields);<br />Pretty standard so far.<br />Note: headers didn't need to be set, cURL automatically sets headers (like content-type: multipart/form-data; content-length...) when you pass an array into CURLOPT_POSTFIELDS.<br />Note: even though this is supposed to be a PUT command through an HTTP POST form, no special PUT options needed to be passed natively through cURL. Options such as<br />curl_setopt($handle, CURLOPT_HTTPHEADER, array('X-HTTP-Method-Override: PUT', 'Content-Length: ' . strlen($fields)));<br />or<br />curl_setopt($handle, CURLOPT_PUT, true);<br />or<br />curl_setopt($handle, CURLOPT_CUSTOMREQUEST, "PUT);<br />were not needed to make the code work.<br /><br />The fields I wanted to pass through cURL were arranged into an array something like this:<br />$postfields = array("method" =&gt; $_POST["method"],<br />                    "mode" =&gt; $_POST["mode"],<br />                    "product" =&gt; array("name" =&gt; $_POST["product"], <br />                                        "cost" =&gt; $_POST["product"]["cost"], <br />                                        "thumbnail" =&gt; "@{$_FILES["thumbnail"]["tmp_name"]};type={$_FILES["thumbnail"]["type"]}")<br />                    );<br /><br />-Notice how the @ precedes the temporary filename, this creates a link so PHP will upload/transfer an actual file instead of just the file name, which would happen if the @ isn't included.<br />-Notice how I forcefully set the mime-type of the file to upload. I was having issues where images filetypes were defaulting to octet-stream instead of image/png or image/jpeg or whatever the type of the selected image.<br /><br />I then tried passing $postfields straight into curl_setopt($this-&gt;handle, CURLOPT_POSTFIELDS, $postfields); but it didn't work.<br />I tried using http_build_query($postfields); but that didn't work properly either.<br />In both cases either the file wouldn't be treated as an actual file and the form data wasn't being sent properly. The problem was HTTP's methods of transmitting arrays. While PHP and other languages can figure out how to handle arrays passed via forms, HTTP isn't quite as sofisticated. I had to rewrite the $postfields array like so:<br />$postfields = array("method" =&gt; $_POST["method"],<br />                    "mode" =&gt; $_POST["mode"],<br />                    "product[name]" =&gt; $_POST["product"], <br />                    "product[cost]" =&gt; $_POST["product"]["cost"], <br />                    "product[thumbnail]" =&gt; "@{$_FILES["thumbnail"]["tmp_name"]}");<br />curl_setopt($handle, CURLOPT_POSTFIELDS, $postfields);<br /><br />This, without the use of http_build_query, solved all of my problems. Now the receiving host outputs both $_POST and $_FILES vars correctly.</span></code></div>
  </div>
 </div>
  <div class="note" id="102121">  <div class="votes">
    <div id="Vu102121">
    <a href="https://www.php.net/manual/vote-note.php?id=102121&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd102121">
    <a href="https://www.php.net/manual/vote-note.php?id=102121&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V102121" title="64% like this...">
    8
    </div>
  </div>
  <a href="function.curl-setopt.php.html#102121" class="name">
  <strong class="user"><em>zsalab</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#102121"> &para;</a><div class="date" title="2011-01-27 05:12"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom102121">
<div class="phpcode"><code><span class="html">Handling redirections with curl if safe_mode or open_basedir is enabled. The function working transparent, no problem with header and returntransfer options. You can handle the max redirection with the optional second argument (the function is set the variable to zero if max redirection exceeded).<br />Second parameter values:<br />- maxredirect is null or not set: redirect maximum five time, after raise PHP warning<br />- maxredirect is greather then zero: no raiser error, but parameter variable set to zero<br />- maxredirect is less or equal zero: no follow redirections<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">curl_exec_follow</span><span class="keyword">(</span><span class="comment">/*resource*/ </span><span class="default">$ch</span><span class="keyword">, </span><span class="comment">/*int*/ </span><span class="keyword">&amp;</span><span class="default">$maxredirect </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br />    </span><span class="default">$mr </span><span class="keyword">= </span><span class="default">$maxredirect </span><span class="keyword">=== </span><span class="default">null </span><span class="keyword">? </span><span class="default">5 </span><span class="keyword">: </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$maxredirect</span><span class="keyword">);<br />    if (</span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'open_basedir'</span><span class="keyword">) == </span><span class="string">'' </span><span class="keyword">&amp;&amp; </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'safe_mode' </span><span class="keyword">== </span><span class="string">'Off'</span><span class="keyword">)) {<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FOLLOWLOCATION</span><span class="keyword">, </span><span class="default">$mr </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_MAXREDIRS</span><span class="keyword">, </span><span class="default">$mr</span><span class="keyword">);<br />    } else {<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FOLLOWLOCATION</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br />        if (</span><span class="default">$mr </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br />            </span><span class="default">$newurl </span><span class="keyword">= </span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLINFO_EFFECTIVE_URL</span><span class="keyword">);<br /><br />            </span><span class="default">$rch </span><span class="keyword">= </span><span class="default">curl_copy_handle</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />            </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$rch</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />            </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$rch</span><span class="keyword">, </span><span class="default">CURLOPT_NOBODY</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />            </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$rch</span><span class="keyword">, </span><span class="default">CURLOPT_FORBID_REUSE</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br />            </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$rch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />            do {<br />                </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$rch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$newurl</span><span class="keyword">);<br />                </span><span class="default">$header </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$rch</span><span class="keyword">);<br />                if (</span><span class="default">curl_errno</span><span class="keyword">(</span><span class="default">$rch</span><span class="keyword">)) {<br />                    </span><span class="default">$code </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />                } else {<br />                    </span><span class="default">$code </span><span class="keyword">= </span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$rch</span><span class="keyword">, </span><span class="default">CURLINFO_HTTP_CODE</span><span class="keyword">);<br />                    if (</span><span class="default">$code </span><span class="keyword">== </span><span class="default">301 </span><span class="keyword">|| </span><span class="default">$code </span><span class="keyword">== </span><span class="default">302</span><span class="keyword">) {<br />                        </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Location:(.*?)\n/'</span><span class="keyword">, </span><span class="default">$header</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />                        </span><span class="default">$newurl </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">));<br />                    } else {<br />                        </span><span class="default">$code </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />                    }<br />                }<br />            } while (</span><span class="default">$code </span><span class="keyword">&amp;&amp; --</span><span class="default">$mr</span><span class="keyword">);<br />            </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$rch</span><span class="keyword">);<br />            if (!</span><span class="default">$mr</span><span class="keyword">) {<br />                if (</span><span class="default">$maxredirect </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">) {<br />                    </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Too many redirects. When following redirects, libcurl hit the maximum amount.'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />                } else {<br />                    </span><span class="default">$maxredirect </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />                }<br />                return </span><span class="default">false</span><span class="keyword">;<br />            }<br />            </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$newurl</span><span class="keyword">);<br />        }<br />    }<br />    return </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="107146">  <div class="votes">
    <div id="Vu107146">
    <a href="https://www.php.net/manual/vote-note.php?id=107146&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd107146">
    <a href="https://www.php.net/manual/vote-note.php?id=107146&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V107146" title="63% like this...">
    9
    </div>
  </div>
  <a href="function.curl-setopt.php.html#107146" class="name">
  <strong class="user"><em>Adam Monsen</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#107146"> &para;</a><div class="date" title="2012-01-10 04:36"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom107146">
<div class="phpcode"><code><span class="html">CURLOPT_POST must be left unset if you want the Content-Type header set to "multipart/form-data" (e.g., when CURLOPT_POSTFIELDS is an array). If you set CURLOPT_POSTFIELDS to an array and have CURLOPT_POST set to TRUE, Content-Length will be -1 and most sane servers will reject the request. If you set CURLOPT_POSTFIELDS to an array and have CURLOPT_POST set to FALSE, cURL will send a GET request.</span></code></div>
  </div>
 </div>
  <div class="note" id="81581">  <div class="votes">
    <div id="Vu81581">
    <a href="https://www.php.net/manual/vote-note.php?id=81581&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd81581">
    <a href="https://www.php.net/manual/vote-note.php?id=81581&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V81581" title="64% like this...">
    8
    </div>
  </div>
  <a href="function.curl-setopt.php.html#81581" class="name">
  <strong class="user"><em>c00lways at gmail dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#81581"> &para;</a><div class="date" title="2008-03-04 01:16"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom81581">
<div class="phpcode"><code><span class="html">if you would like to send xml request to a server (lets say, making a soap proxy),<br />you have to set<br /><br /><span class="default">&lt;?php<br />curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">, Array(</span><span class="string">"Content-Type: text/xml"</span><span class="keyword">));<br /></span><span class="default">?&gt;<br /></span><br />makesure you watch for cache issue:<br />the below code will prevent cache...<br /><br /><span class="default">&lt;?php<br />curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FORBID_REUSE</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FRESH_CONNECT</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />hope it helps ;)</span></code></div>
  </div>
 </div>
  <div class="note" id="101139">  <div class="votes">
    <div id="Vu101139">
    <a href="https://www.php.net/manual/vote-note.php?id=101139&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd101139">
    <a href="https://www.php.net/manual/vote-note.php?id=101139&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V101139" title="64% like this...">
    4
    </div>
  </div>
  <a href="function.curl-setopt.php.html#101139" class="name">
  <strong class="user"><em>scy-phpmanual at scytale dot name</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#101139"> &para;</a><div class="date" title="2010-11-29 04:01"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom101139">
<div class="phpcode"><code><span class="html">In order to reset CURLOPT_HTTPHEADER, set it to array(). The cURL C API says you should set it to NULL, but that doesn’t work in the PHP wrapper.</span></code></div>
  </div>
 </div>
  <div class="note" id="93108">  <div class="votes">
    <div id="Vu93108">
    <a href="https://www.php.net/manual/vote-note.php?id=93108&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd93108">
    <a href="https://www.php.net/manual/vote-note.php?id=93108&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V93108" title="63% like this...">
    6
    </div>
  </div>
  <a href="function.curl-setopt.php.html#93108" class="name">
  <strong class="user"><em>rob</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#93108"> &para;</a><div class="date" title="2009-08-23 09:07"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom93108">
<div class="phpcode"><code><span class="html">Whats not mentioned in the documentation is that you have to set CURLOPT_COOKIEJAR to a file for the CURL handle to actually use cookies, if it is not set then cookies will not be parsed.</span></code></div>
  </div>
 </div>
  <div class="note" id="120765">  <div class="votes">
    <div id="Vu120765">
    <a href="https://www.php.net/manual/vote-note.php?id=120765&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd120765">
    <a href="https://www.php.net/manual/vote-note.php?id=120765&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V120765" title="62% like this...">
    4
    </div>
  </div>
  <a href="function.curl-setopt.php.html#120765" class="name">
  <strong class="user"><em>markandrewslade at gmail dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#120765"> &para;</a><div class="date" title="2017-03-07 03:22"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom120765">
<div class="phpcode"><code><span class="html">Contrary to the documentation, CURLOPT_STDERR should be set to a handle to the file you want to write to, not the file's location.</span></code></div>
  </div>
 </div>
  <div class="note" id="42201">  <div class="votes">
    <div id="Vu42201">
    <a href="https://www.php.net/manual/vote-note.php?id=42201&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd42201">
    <a href="https://www.php.net/manual/vote-note.php?id=42201&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V42201" title="64% like this...">
    4
    </div>
  </div>
  <a href="function.curl-setopt.php.html#42201" class="name">
  <strong class="user"><em>ron at ttvavanti dot nl</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#42201"> &para;</a><div class="date" title="2004-05-07 08:00"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom42201">
<div class="phpcode"><code><span class="html">If you specify a CAINFO, note that the file must be in PEM format! (If not, it won't work).<br />Using Openssl you can use: <br />openssl x509 -in &lt;cert&gt; -inform d -outform PEM -out cert.pem <br />To create a pem formatted certificate from a binary certificate (the one you get if you download the ca somewhere).</span></code></div>
  </div>
 </div>
  <div class="note" id="84916">  <div class="votes">
    <div id="Vu84916">
    <a href="https://www.php.net/manual/vote-note.php?id=84916&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd84916">
    <a href="https://www.php.net/manual/vote-note.php?id=84916&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V84916" title="62% like this...">
    4
    </div>
  </div>
  <a href="function.curl-setopt.php.html#84916" class="name">
  <strong class="user"><em>fred at themancan dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#84916"> &para;</a><div class="date" title="2008-08-05 04:28"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom84916">
<div class="phpcode"><code><span class="html">To find what encoding a given HTTP POST request uses is easy -- passing an array to CURLOPT_POSTFIELDS results in  multipart/form-data:<br /><br /><span class="default">&lt;?php<br />curl_setopt</span><span class="keyword">(</span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, array(</span><span class="string">'field1' </span><span class="keyword">=&gt; </span><span class="string">'value'</span><span class="keyword">));<br /></span><span class="default">?&gt;<br /></span><br />Passing a URL-encoded string will result in application/x-www-form-urlencoded:<br /><br /><span class="default">&lt;?php<br />curl_setopt</span><span class="keyword">(</span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, array(</span><span class="string">'field1=value&amp;field2=value2'</span><span class="keyword">));<br /></span><span class="default">?&gt;<br /></span><br />I ran across this when integrating with both a warehouse system and an email system; neither would accept multipart/form-data, but both happily accepted application/x-www-form-urlencoded.</span></code></div>
  </div>
 </div>
  <div class="note" id="57005">  <div class="votes">
    <div id="Vu57005">
    <a href="https://www.php.net/manual/vote-note.php?id=57005&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd57005">
    <a href="https://www.php.net/manual/vote-note.php?id=57005&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V57005" title="61% like this...">
    3
    </div>
  </div>
  <a href="function.curl-setopt.php.html#57005" class="name">
  <strong class="user"><em>ROXORT at TGNOOB dot FR</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#57005"> &para;</a><div class="date" title="2005-09-21 07:09"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom57005">
<div class="phpcode"><code><span class="html"><span class="default">&lt;?php<br /></span><span class="comment">/*<br />  Here is a script that is usefull to :<br />  - login to a POST form,<br />  - store a session cookie,<br />  - download a file once logged in.<br />*/<br /><br />// INIT CURL<br /></span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br /><br /></span><span class="comment">// SET URL FOR THE POST FORM LOGIN<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="string">'<a href="http://www.example.com/Members/Login.php" rel="nofollow" target="_blank">http://www.example.com/Members/Login.php</a>'</span><span class="keyword">);<br /><br /></span><span class="comment">// ENABLE HTTP POST<br /></span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POST</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /><br /></span><span class="comment">// SET POST PARAMETERS : FORM VALUES FOR EACH FIELD<br /></span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="string">'fieldname1=fieldvalue1&amp;fieldname2=fieldvalue2'</span><span class="keyword">);<br /><br /></span><span class="comment">// IMITATE CLASSIC BROWSER'S BEHAVIOUR : HANDLE COOKIES<br /></span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEJAR</span><span class="keyword">, </span><span class="string">'cookie.txt'</span><span class="keyword">);<br /><br /></span><span class="comment"># Setting CURLOPT_RETURNTRANSFER variable to 1 will force cURL<br /># not to print out the results of its query.<br /># Instead, it will return the results as a string return value<br /># from curl_exec() instead of the usual true/false.<br /></span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /><br /></span><span class="comment">// EXECUTE 1st REQUEST (FORM LOGIN)<br /></span><span class="default">$store </span><span class="keyword">= </span><span class="default">curl_exec </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /><br /></span><span class="comment">// SET FILE TO DOWNLOAD<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="string">'<a href="http://www.example.com/Members/Downloads/AnnualReport.pdf" rel="nofollow" target="_blank">http://www.example.com/Members/Downloads/AnnualReport.pdf</a>'</span><span class="keyword">);<br /><br /></span><span class="comment">// EXECUTE 2nd REQUEST (FILE DOWNLOAD)<br /></span><span class="default">$content </span><span class="keyword">= </span><span class="default">curl_exec </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /><br /></span><span class="comment">// CLOSE CURL<br /></span><span class="default">curl_close </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">); <br /><br /></span><span class="comment">/*<br />  At this point you can do do whatever you want<br />  with the downloaded file stored in $content :<br />  display it, save it as file, and so on.<br />*/<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="71313">  <div class="votes">
    <div id="Vu71313">
    <a href="https://www.php.net/manual/vote-note.php?id=71313&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd71313">
    <a href="https://www.php.net/manual/vote-note.php?id=71313&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V71313" title="61% like this...">
    4
    </div>
  </div>
  <a href="function.curl-setopt.php.html#71313" class="name">
  <strong class="user"><em>eion at bigfoot dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#71313"> &para;</a><div class="date" title="2006-11-21 08:40"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom71313">
<div class="phpcode"><code><span class="html">If you are trying to use CURLOPT_FOLLOWLOCATION and you get this warning:<br />Warning: curl_setopt() [function.curl-setopt]: CURLOPT_FOLLOWLOCATION cannot be activated when in safe_mode or an open_basedir is set...<br /><br />then you will want to read <a href="http://www.php.net/ChangeLog-4.php" rel="nofollow" target="_blank">http://www.php.net/ChangeLog-4.php</a> which says "Disabled CURLOPT_FOLLOWLOCATION in curl when open_basedir or safe_mode are enabled." as of PHP 4.4.4/5.1.5.  This is due to the fact that curl is not part of PHP and doesn't know the values of open_basedir or safe_mode, so you could comprimise your webserver operating in safe_mode by redirecting (using header('Location: ...')) to "file://" urls, which curl would have gladly retrieved.<br /><br />Until the curl extension is changed in PHP or curl (if it ever will) to deal with "Location:" headers, here is a far from perfect remake of the curl_exec function that I am using.<br /><br />Since there's no curl_getopt function equivalent, you'll have to tweak the function to make it work for your specific use.  As it is here, it returns the body of the response and not the header.  It also doesn't deal with redirection urls with username and passwords in them.<br /><br /><span class="default">&lt;?php<br />    </span><span class="keyword">function </span><span class="default">curl_redir_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">)<br />    {<br />        static </span><span class="default">$curl_loops </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />        static </span><span class="default">$curl_max_loops </span><span class="keyword">= </span><span class="default">20</span><span class="keyword">;<br />        if (</span><span class="default">$curl_loops</span><span class="keyword">++ &gt;= </span><span class="default">$curl_max_loops</span><span class="keyword">)<br />        {<br />            </span><span class="default">$curl_loops </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />            return </span><span class="default">FALSE</span><span class="keyword">;<br />        }<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />        </span><span class="default">$data </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />        list(</span><span class="default">$header</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n\n"</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />        </span><span class="default">$http_code </span><span class="keyword">= </span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLINFO_HTTP_CODE</span><span class="keyword">);<br />        if (</span><span class="default">$http_code </span><span class="keyword">== </span><span class="default">301 </span><span class="keyword">|| </span><span class="default">$http_code </span><span class="keyword">== </span><span class="default">302</span><span class="keyword">)<br />        {<br />            </span><span class="default">$matches </span><span class="keyword">= array();<br />            </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Location:(.*?)\n/'</span><span class="keyword">, </span><span class="default">$header</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />            </span><span class="default">$url </span><span class="keyword">= @</span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">)));<br />            if (!</span><span class="default">$url</span><span class="keyword">)<br />            {<br />                </span><span class="comment">//couldn't process the url to redirect to<br />                </span><span class="default">$curl_loops </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />                return </span><span class="default">$data</span><span class="keyword">;<br />            }<br />            </span><span class="default">$last_url </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLINFO_EFFECTIVE_URL</span><span class="keyword">));<br />            if (!</span><span class="default">$url</span><span class="keyword">[</span><span class="string">'scheme'</span><span class="keyword">])<br />                </span><span class="default">$url</span><span class="keyword">[</span><span class="string">'scheme'</span><span class="keyword">] = </span><span class="default">$last_url</span><span class="keyword">[</span><span class="string">'scheme'</span><span class="keyword">];<br />            if (!</span><span class="default">$url</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">])<br />                </span><span class="default">$url</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">] = </span><span class="default">$last_url</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">];<br />            if (!</span><span class="default">$url</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">])<br />                </span><span class="default">$url</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">] = </span><span class="default">$last_url</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">];<br />            </span><span class="default">$new_url </span><span class="keyword">= </span><span class="default">$url</span><span class="keyword">[</span><span class="string">'scheme'</span><span class="keyword">] . </span><span class="string">'://' </span><span class="keyword">. </span><span class="default">$url</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">] . </span><span class="default">$url</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">] . (</span><span class="default">$url</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">]?</span><span class="string">'?'</span><span class="keyword">.</span><span class="default">$url</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">]:</span><span class="string">''</span><span class="keyword">);<br />            </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$new_url</span><span class="keyword">);<br />            </span><span class="default">debug</span><span class="keyword">(</span><span class="string">'Redirecting to'</span><span class="keyword">, </span><span class="default">$new_url</span><span class="keyword">);<br />            return </span><span class="default">curl_redir_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />        } else {<br />            </span><span class="default">$curl_loops</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />            return </span><span class="default">$data</span><span class="keyword">;<br />        }<br />    }<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="112326">  <div class="votes">
    <div id="Vu112326">
    <a href="https://www.php.net/manual/vote-note.php?id=112326&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd112326">
    <a href="https://www.php.net/manual/vote-note.php?id=112326&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V112326" title="60% like this...">
    3
    </div>
  </div>
  <a href="function.curl-setopt.php.html#112326" class="name">
  <strong class="user"><em>shiplu at programmer dot net</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#112326"> &para;</a><div class="date" title="2013-06-01 06:23"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom112326">
<div class="phpcode"><code><span class="html">CURLOPT_POST should be set before CURLOPT_POSTFIELDS. Otherwise you might encounter 411 Length required error.<br /><br />Following code generates "411 Length Required" on nginx/1.1.15<br /><span class="default">&lt;?php<br />curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$postfields</span><span class="keyword">); <br /></span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POST</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />But this one works.<br /><br /><span class="default">&lt;?php<br />curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POST</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$postfields</span><span class="keyword">); <br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="93351">  <div class="votes">
    <div id="Vu93351">
    <a href="https://www.php.net/manual/vote-note.php?id=93351&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd93351">
    <a href="https://www.php.net/manual/vote-note.php?id=93351&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V93351" title="60% like this...">
    1
    </div>
  </div>
  <a href="function.curl-setopt.php.html#93351" class="name">
  <strong class="user"><em>Tyranoweb</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#93351"> &para;</a><div class="date" title="2009-09-04 02:42"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom93351">
<div class="phpcode"><code><span class="html">There is a function to send POST data in page with five parameters :<br /><br />$post must be an array<br />$page is the page where POST datas will be send.<br />$n must be true to continue if they are php redirection (Location: )<br />$session must be define true if you want to use cookies <br />$referer must be a link to get a wrong referer or only to have a referer.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">curl_data_post</span><span class="keyword">(</span><span class="default">$post</span><span class="keyword">, </span><span class="default">$page</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">, </span><span class="default">$session</span><span class="keyword">, </span><span class="default">$referer</span><span class="keyword">)<br />    {<br />        if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$post</span><span class="keyword">))<br />        {<br />         return </span><span class="default">false</span><span class="keyword">;<br />        }<br />        <br />        </span><span class="default">$DATA_POST </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$DATA_POST</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$DATA_POST</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$page</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$DATA_POST</span><span class="keyword">, </span><span class="default">CURLOPT_POST</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />        if(</span><span class="default">$n</span><span class="keyword">)<br />        {<br />         </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$DATA_POST</span><span class="keyword">, </span><span class="default">CURLOPT_FOLLOWLOCATION</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />        }<br />        if(</span><span class="default">$session</span><span class="keyword">)<br />        {<br />         </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$DATA_POST</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEFILE</span><span class="keyword">, </span><span class="string">'cookiefile.txt'</span><span class="keyword">);<br />         </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$DATA_POST</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEJAR</span><span class="keyword">, </span><span class="string">'cookiefile.txt'</span><span class="keyword">); <br />        }<br />        <br />        if(</span><span class="default">$referer</span><span class="keyword">)<br />        {<br />         </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$DATA_POST</span><span class="keyword">, </span><span class="default">CURLOPT_REFERER</span><span class="keyword">, </span><span class="default">$referer</span><span class="keyword">); <br />        }<br />        <br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$DATA_POST</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$post</span><span class="keyword">);<br />        </span><span class="default">$data </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$DATA_POST</span><span class="keyword">);<br />        if(</span><span class="default">$data </span><span class="keyword">== </span><span class="default">false</span><span class="keyword">)<br />        {<br />         echo</span><span class="string">'Warning : ' </span><span class="keyword">. </span><span class="default">curl_error</span><span class="keyword">(</span><span class="default">$DATA_POST</span><span class="keyword">);<br />         </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$DATA_POST</span><span class="keyword">);<br />         return </span><span class="default">false</span><span class="keyword">;<br />        }<br />        else<br />        {<br />         </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$DATA_POST</span><span class="keyword">);<br />         return </span><span class="default">$data</span><span class="keyword">;<br />        }<br />    }<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="69115">  <div class="votes">
    <div id="Vu69115">
    <a href="https://www.php.net/manual/vote-note.php?id=69115&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd69115">
    <a href="https://www.php.net/manual/vote-note.php?id=69115&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V69115" title="60% like this...">
    1
    </div>
  </div>
  <a href="function.curl-setopt.php.html#69115" class="name">
  <strong class="user"><em>php at miggy dot org</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#69115"> &para;</a><div class="date" title="2006-08-23 10:35"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom69115">
<div class="phpcode"><code><span class="html">Note that if you want to use a proxy and use it as a _cache_, you'll have to do:<br /><br /><span class="default">&lt;?php curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">, array(</span><span class="string">"Pragma: "</span><span class="keyword">)); </span><span class="default">?&gt;<br /></span><br />else by default Curl puts a "Pragma: no-cache" header in and thus force cache misses for all requests.</span></code></div>
  </div>
 </div>
  <div class="note" id="122274">  <div class="votes">
    <div id="Vu122274">
    <a href="https://www.php.net/manual/vote-note.php?id=122274&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122274">
    <a href="https://www.php.net/manual/vote-note.php?id=122274&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122274" title="57% like this...">
    1
    </div>
  </div>
  <a href="function.curl-setopt.php.html#122274" class="name">
  <strong class="user"><em>joel at mojamail dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#122274"> &para;</a><div class="date" title="2018-01-16 11:57"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom122274">
<div class="phpcode"><code><span class="html">In the long documentation, it's easy to miss the fact that CURLOPT_POSTFIELDS will set the Content-Type to "multipart/form-data" (instead of the usual "application/x-www-form-urlencoded") IFF you supply an array (instead of a query string)!<br /><br />Some servers will return weird errors (like "SSL read: error:00000000:lib(0):func(0):reason(0), errno 104") for the wrong Content-Type, and you may waste many hours of time trying to figure out why!</span></code></div>
  </div>
 </div>
  <div class="note" id="109634">  <div class="votes">
    <div id="Vu109634">
    <a href="https://www.php.net/manual/vote-note.php?id=109634&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd109634">
    <a href="https://www.php.net/manual/vote-note.php?id=109634&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V109634" title="56% like this...">
    3
    </div>
  </div>
  <a href="function.curl-setopt.php.html#109634" class="name">
  <strong class="user"><em>qeremy [atta] gmail [dotta] com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#109634"> &para;</a><div class="date" title="2012-08-03 08:57"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom109634">
<div class="phpcode"><code><span class="html">If you are trying to update something on your server and you need to handle this update operation by PUT;<br /><br /><span class="default">&lt;?php<br />curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_CUSTOMREQUEST</span><span class="keyword">, </span><span class="string">"PUT"</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_PUT</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />are "useless" without;<br /><br /><span class="default">&lt;?php<br />curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">, array(</span><span class="string">'X-HTTP-Method-Override: PUT'</span><span class="keyword">));<br /></span><span class="default">?&gt;<br /></span><br />Example;<br /><br />Updating a book data in database identified by "id 1";<br /><br />--cURL Part--<br /><span class="default">&lt;?php<br />$data </span><span class="keyword">= </span><span class="default">http_build_query</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">);<br /></span><span class="comment">// or<br /></span><span class="default">$data </span><span class="keyword">= </span><span class="default">http_build_query</span><span class="keyword">(array(<br />   </span><span class="string">'name'  </span><span class="keyword">=&gt; </span><span class="string">'PHP in Action'</span><span class="keyword">,<br />   </span><span class="string">'price' </span><span class="keyword">=&gt; </span><span class="default">10.9<br /></span><span class="keyword">));<br /><br /></span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="string">"<a href="http://api.localhost/rest/books/1" rel="nofollow" target="_blank">http://api.localhost/rest/books/1</a>"</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="comment">// curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "PUT"); // no need anymore<br />// or<br />// curl_setopt($ch, CURLOPT_PUT, 1); // no need anymore<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">, array(</span><span class="string">'X-HTTP-Method-Override: PUT'</span><span class="keyword">));<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">);<br /></span><span class="default">$ce </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /></span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$ce</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />--API class--<br /><span class="default">&lt;?php<br /></span><span class="keyword">public function </span><span class="default">putAction</span><span class="keyword">() {<br />    echo </span><span class="string">"putAction() -&gt; id: "</span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_getParam</span><span class="keyword">(</span><span class="string">'id'</span><span class="keyword">) .</span><span class="string">"\n"</span><span class="keyword">;<br />    </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">);<br />    </span><span class="comment">// do stuff with post data<br />    </span><span class="keyword">...<br /></span><span class="default">?&gt;<br /></span><br />--Output--<br />putAction() -&gt; id: 15<br />Array<br />(<br />    [name] =&gt; PHP in Action<br />    [price] =&gt; 10.9<br />)<br /><br />---Keywords--<br />rest, restfull api, restfull put, curl put, curl customrequest put</span></code></div>
  </div>
 </div>
  <div class="note" id="91510">  <div class="votes">
    <div id="Vu91510">
    <a href="https://www.php.net/manual/vote-note.php?id=91510&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd91510">
    <a href="https://www.php.net/manual/vote-note.php?id=91510&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V91510" title="57% like this...">
    1
    </div>
  </div>
  <a href="function.curl-setopt.php.html#91510" class="name">
  <strong class="user"><em>Andrew</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#91510"> &para;</a><div class="date" title="2009-06-14 04:56"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom91510">
<div class="phpcode"><code><span class="html">I noticed that if you want to get current cookie file after curl_exec() - you need to close current curl handle (like it said in manual), but if you want cookies to be dumped to file after any curl_exec (without curl_close) you can:<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">#call it normally<br /></span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(); <br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">); <br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEFILE</span><span class="keyword">, </span><span class="string">"cookiefile"</span><span class="keyword">); <br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEJAR</span><span class="keyword">, </span><span class="string">"cookiefile"</span><span class="keyword">); <br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FOLLOWLOCATION</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">); <br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="string">'<a href="http://www.example.com/" rel="nofollow" target="_blank">http://www.example.com/</a>'</span><span class="keyword">); <br /></span><span class="default">$result1 </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">); <br /><br /></span><span class="comment">#and then  make a temp copy<br /></span><span class="default">$ch_temp</span><span class="keyword">=</span><span class="default">curl_copy_handle</span><span class="keyword">(</span><span class="default">ch</span><span class="keyword">);<br /></span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /></span><span class="default">$ch</span><span class="keyword">=</span><span class="default">$ch_temp</span><span class="keyword">;<br /></span><span class="default">?&gt;<br /></span><br />Only this way, if you close $ch_temp - cookies wont be dumped.</span></code></div>
  </div>
 </div>
  <div class="note" id="108162">  <div class="votes">
    <div id="Vu108162">
    <a href="https://www.php.net/manual/vote-note.php?id=108162&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd108162">
    <a href="https://www.php.net/manual/vote-note.php?id=108162&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V108162" title="56% like this...">
    2
    </div>
  </div>
  <a href="function.curl-setopt.php.html#108162" class="name">
  <strong class="user"><em>anonymous</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#108162"> &para;</a><div class="date" title="2012-04-03 03:55"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom108162">
<div class="phpcode"><code><span class="html">This may be not obvious, but if you specify the CURLOPT_POSTFIELDS and don't specify the CURLOPT_POST - it will still send POST, not GET (as you might think - since GET is default).<br />So the line:<br /><br />curl_setopt($ch, CURLOPT_POSTFIELDS, $data);<br /><br />is synonym to:<br /><br />curl_setopt($ch, CURLOPT_POST, 1);<br />curl_setopt($ch, CURLOPT_POSTFIELDS, $data);<br /><br />Even if you set the options like this (in this order):<br /><br />curl_setopt($ch, CURLOPT_POST, 0);<br />curl_setopt($ch, CURLOPT_POSTFIELDS, $data);<br /><br />it will send POST, since CURLOPT_POSTFIELDS is latter.<br />So if you want GET - make sure you don't have CURLOPT_POSTFIELDS specified somewhere.</span></code></div>
  </div>
 </div>
  <div class="note" id="84374">  <div class="votes">
    <div id="Vu84374">
    <a href="https://www.php.net/manual/vote-note.php?id=84374&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd84374">
    <a href="https://www.php.net/manual/vote-note.php?id=84374&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V84374" title="55% like this...">
    3
    </div>
  </div>
  <a href="function.curl-setopt.php.html#84374" class="name">
  <strong class="user"><em>ac at an dot y-co dot de</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#84374"> &para;</a><div class="date" title="2008-07-10 10:08"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom84374">
<div class="phpcode"><code><span class="html">If you want to connect to a server which requires that you identify yourself with a certificate, use following code. Your certificate and servers certificate are signed by an authority whose certificate is in ca.ctr.<br /><br /><span class="default">&lt;?php<br />curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_VERBOSE</span><span class="keyword">, </span><span class="string">'1'</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_SSL_VERIFYHOST</span><span class="keyword">, </span><span class="string">'2'</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_SSL_VERIFYPEER</span><span class="keyword">, </span><span class="string">'1'</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_CAINFO</span><span class="keyword">,  </span><span class="default">getcwd</span><span class="keyword">().</span><span class="string">'/cert/ca.crt'</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_SSLCERT</span><span class="keyword">, </span><span class="default">getcwd</span><span class="keyword">().</span><span class="string">'/cert/mycert.pem'</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_SSLCERTPASSWD</span><span class="keyword">, </span><span class="string">'password'</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />If your original certificate is in .pfx format, you have to convert it to .pem using following commands<br /># openssl pkcs12 -in mycert.pfx -out mycert.key<br /># openssl rsa -in mycert.key -out mycert.pem<br /># openssl x509 -in mycert.key &gt;&gt; mycert.pem</span></code></div>
  </div>
 </div>
  <div class="note" id="112113">  <div class="votes">
    <div id="Vu112113">
    <a href="https://www.php.net/manual/vote-note.php?id=112113&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd112113">
    <a href="https://www.php.net/manual/vote-note.php?id=112113&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V112113" title="53% like this...">
    2
    </div>
  </div>
  <a href="function.curl-setopt.php.html#112113" class="name">
  <strong class="user"><em>Madcat</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#112113"> &para;</a><div class="date" title="2013-05-06 03:14"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom112113">
<div class="phpcode"><code><span class="html">If you have a mixture of strings starting with @ (at character) and files in CURLOPT_POSTFIELDS you have a problem (such as posting a tweet with attached media) because curl tries to interpret anything starting with @ as a file.<br /><br /><span class="default">&lt;?php<br /><br />$postfields </span><span class="keyword">= array(<br />    </span><span class="string">'upload_file' </span><span class="keyword">=&gt; </span><span class="string">'@file_to_upload.png'</span><span class="keyword">,<br />    </span><span class="string">'upload_text' </span><span class="keyword">=&gt; </span><span class="string">'@text_to_upload'<br /></span><span class="keyword">);<br /><br /></span><span class="default">$curl </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="string">'<a href="http://example.com/upload-test" rel="nofollow" target="_blank">http://example.com/upload-test</a>'</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$postfields</span><span class="keyword">);<br /></span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">);<br /></span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;<br /></span><br />To get around this, prepend the text string with the NULL character like so:<br /><br /><span class="default">&lt;?php<br />    $postfields </span><span class="keyword">= array(<br />        </span><span class="string">'upload_file' </span><span class="keyword">=&gt; </span><span class="string">'@file_to_upload.png'</span><span class="keyword">,<br />        </span><span class="string">'upload_text' </span><span class="keyword">=&gt; </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"\0%s"</span><span class="keyword">, </span><span class="string">'@text_to_upload'</span><span class="keyword">)<br />    );<br /></span><span class="default">?&gt;<br /></span><br />Original source: <a href="http://bit.ly/AntMle" rel="nofollow" target="_blank">http://bit.ly/AntMle</a></span></code></div>
  </div>
 </div>
  <div class="note" id="83937">  <div class="votes">
    <div id="Vu83937">
    <a href="https://www.php.net/manual/vote-note.php?id=83937&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd83937">
    <a href="https://www.php.net/manual/vote-note.php?id=83937&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V83937" title="54% like this...">
    1
    </div>
  </div>
  <a href="function.curl-setopt.php.html#83937" class="name">
  <strong class="user"><em>Salil Kothadia</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#83937"> &para;</a><div class="date" title="2008-06-19 09:02"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom83937">
<div class="phpcode"><code><span class="html">In PHP5, for the "CURLOPT_POSTFIELDS" option, we can use:<br /><br /><span class="default">&lt;?php<br />$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="default">$URI</span><span class="keyword">);<br /></span><span class="default">$Post </span><span class="keyword">= </span><span class="default">http_build_query</span><span class="keyword">(</span><span class="default">$PostData</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$Post</span><span class="keyword">);<br /></span><span class="default">$Output </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /></span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="92522">  <div class="votes">
    <div id="Vu92522">
    <a href="https://www.php.net/manual/vote-note.php?id=92522&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd92522">
    <a href="https://www.php.net/manual/vote-note.php?id=92522&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V92522" title="53% like this...">
    1
    </div>
  </div>
  <a href="function.curl-setopt.php.html#92522" class="name">
  <strong class="user"><em>Sylvain R</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#92522"> &para;</a><div class="date" title="2009-07-28 03:05"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom92522">
<div class="phpcode"><code><span class="html">When you are using CURLOPT_FILE to download directly into a file you must close the file handler after the curl_close() otherwise the file will be incomplete and you will not be able to use it until the end of the execution of the php process.<br /><br /><span class="default">&lt;?php<br /><br />$fh </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'/tmp/foo'</span><span class="keyword">, </span><span class="string">'w'</span><span class="keyword">);<br /></span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="string">'<a href="http://example.com/foo" rel="nofollow" target="_blank">http://example.com/foo</a>'</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FILE</span><span class="keyword">, </span><span class="default">$fh</span><span class="keyword">);<br /></span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /></span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /><br /></span><span class="comment"># at this point your file is not complete and corrupted<br /><br /></span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">);<br /><br /></span><span class="comment"># now you can use your file;<br /><br /></span><span class="default">read_file</span><span class="keyword">(</span><span class="string">'/tmp/foo'</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="97206">  <div class="votes">
    <div id="Vu97206">
    <a href="https://www.php.net/manual/vote-note.php?id=97206&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd97206">
    <a href="https://www.php.net/manual/vote-note.php?id=97206&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V97206" title="52% like this...">
    2
    </div>
  </div>
  <a href="function.curl-setopt.php.html#97206" class="name">
  <strong class="user"><em>julien veneziano</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#97206"> &para;</a><div class="date" title="2010-04-08 03:56"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom97206">
<div class="phpcode"><code><span class="html">If you need to send deta in a DELETE request, use:<br /><br /><span class="default">&lt;?php<br />$request_body </span><span class="keyword">= </span><span class="string">'some data'</span><span class="keyword">;<br /></span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="string">'<a href="http://www.example.com" rel="nofollow" target="_blank">http://www.example.com</a>'</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$request_body</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FOLLOWLOCATION</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">); <br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />        </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_CUSTOMREQUEST</span><span class="keyword">, </span><span class="string">"DELETE"</span><span class="keyword">);<br />        </span><span class="default">$response </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$response</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="109319">  <div class="votes">
    <div id="Vu109319">
    <a href="https://www.php.net/manual/vote-note.php?id=109319&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd109319">
    <a href="https://www.php.net/manual/vote-note.php?id=109319&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V109319" title="52% like this...">
    1
    </div>
  </div>
  <a href="function.curl-setopt.php.html#109319" class="name">
  <strong class="user"><em>adrian at foeder dot de</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#109319"> &para;</a><div class="date" title="2012-07-06 07:37"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom109319">
<div class="phpcode"><code><span class="html">if you want to do a GET request with additional body data it will become tricky not to implicitly change the request to a POST, like many notes below correctly state.<br />So to do the analogy of command line's<br /><br />curl -XGET '<a href="http://example.org?foo=bar" rel="nofollow" target="_blank">http://example.org?foo=bar</a>' -d '&lt;baz&gt;some additional data&lt;/baz&gt;'<br /><br />in PHP you'll do, besides your other necessary stuff,<br /><br /><span class="default">&lt;?php<br />    curl_setopt</span><span class="keyword">(</span><span class="default">$curlHandle</span><span class="keyword">, </span><span class="default">CURLOPT_CUSTOMREQUEST</span><span class="keyword">, </span><span class="string">'GET'</span><span class="keyword">);<br />    </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$curlHandle</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="string">'&lt;baz&gt;some additional data&lt;/baz&gt;'</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />during my experiments, every other "similar" way, like e.g. CURLOPT_HTTPGET, didn't send the additional data or fell into POST.</span></code></div>
  </div>
 </div>
  <div class="note" id="128774">  <div class="votes">
    <div id="Vu128774">
    <a href="https://www.php.net/manual/vote-note.php?id=128774&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd128774">
    <a href="https://www.php.net/manual/vote-note.php?id=128774&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V128774" title="100% like this...">
    1
    </div>
  </div>
  <a href="function.curl-setopt.php.html#128774" class="name">
  <strong class="user"><em>alexchexes at gmail dot com</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#128774"> &para;</a><div class="date" title="2023-08-02 02:06"><strong>6 months ago</strong></div>
  <div class="text" id="Hcom128774">
<div class="phpcode"><code><span class="html">If you want cURL to successfully write cookies to a file specified with CURLOPT_COOKIEJAR, ensure that cURL has the necessary permissions to modify the file if it already exists.<br /><br />I spent nearly a day trying to understand why cURL wasn't saving cookies to an existing file, even though I could easily modify the exact same file using file_put_contents(). Moreover, cURL itself could create the same file and save cookies, but only if it didn't previously exist.<br /><br />Ultimately, the issue was related to file ownership. I was working within WSL2, inside a symlinked Windows directory. The [automount]"metadata" in wsl.conf was not set, causing every file created from PHP to have the default owner, which differed from the user running PHP.<br /><br />Once I configured wsl.conf and then changed the ownership of the entire directory to match the user running PHP, cookies were successfully written to any file without any issues.</span></code></div>
  </div>
 </div>
  <div class="note" id="128365">  <div class="votes">
    <div id="Vu128365">
    <a href="https://www.php.net/manual/vote-note.php?id=128365&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd128365">
    <a href="https://www.php.net/manual/vote-note.php?id=128365&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V128365" title="100% like this...">
    1
    </div>
  </div>
  <a href="function.curl-setopt.php.html#128365" class="name">
  <strong class="user"><em>Niki Romagnoli</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#128365"> &para;</a><div class="date" title="2023-04-04 11:44"><strong>10 months ago</strong></div>
  <div class="text" id="Hcom128365">
<div class="phpcode"><code><span class="html">Set order when using CURLOPT_POST and CURLOPT_POSTFIELDS *matters*.<br />Setting CURL_POST to true will ERASE any previous CURLOPT_POSTFIELDS using an array. Result is request be a POST with empty body.<br /><br />CURLOPT_POSTFIELDS will set CURLOPT_POST to true for you, no need for repeat.<br />If you really need to set both, then either:<br />  - set CURLOPT_POST *before* CURLOPT_POSTFIELDS<br />  - or don't use array and convert CURLOPT_POSTFIELDS to URL-encoded string, it will not be affected this way (ie. <span class="default">&lt;?php curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">http_build_query</span><span class="keyword">(</span><span class="default">$yourArray</span><span class="keyword">)); </span><span class="default">?&gt;</span> )</span></code></div>
  </div>
 </div>
  <div class="note" id="88538">  <div class="votes">
    <div id="Vu88538">
    <a href="https://www.php.net/manual/vote-note.php?id=88538&amp;page=function.curl-setopt&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd88538">
    <a href="https://www.php.net/manual/vote-note.php?id=88538&amp;page=function.curl-setopt&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V88538" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.curl-setopt.php.html#88538" class="name">
  <strong class="user"><em>urkle at outoforder dot cc</em></strong></a><a class="genanchor" href="function.curl-setopt.php.html#88538"> &para;</a><div class="date" title="2009-01-28 06:49"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom88538">
<div class="phpcode"><code><span class="html">To send a post as a different content-type (ie.. application/json or text/xml) add this setopt call<br /><br /><span class="default">&lt;?php<br />curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">,array(</span><span class="string">'Content-Type: application/json'</span><span class="keyword">));<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.curl-setopt&amp;redirect=https://www.php.net/manual/ru/function.curl-setopt.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.curl.php.html">Функции cURL</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.curl-close.php.html" title="curl_&#8203;close">curl_&#8203;close</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-copy-handle.php.html" title="curl_&#8203;copy_&#8203;handle">curl_&#8203;copy_&#8203;handle</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-errno.php.html" title="curl_&#8203;errno">curl_&#8203;errno</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-error.php.html" title="curl_&#8203;error">curl_&#8203;error</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-escape.php.html" title="curl_&#8203;escape">curl_&#8203;escape</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-exec.php.html" title="curl_&#8203;exec">curl_&#8203;exec</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-getinfo.php.html" title="curl_&#8203;getinfo">curl_&#8203;getinfo</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-init.php.html" title="curl_&#8203;init">curl_&#8203;init</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-multi-add-handle.php.html" title="curl_&#8203;multi_&#8203;add_&#8203;handle">curl_&#8203;multi_&#8203;add_&#8203;handle</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-multi-close.php.html" title="curl_&#8203;multi_&#8203;close">curl_&#8203;multi_&#8203;close</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-multi-errno.php.html" title="curl_&#8203;multi_&#8203;errno">curl_&#8203;multi_&#8203;errno</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-multi-exec.php.html" title="curl_&#8203;multi_&#8203;exec">curl_&#8203;multi_&#8203;exec</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-multi-getcontent.php.html" title="curl_&#8203;multi_&#8203;getcontent">curl_&#8203;multi_&#8203;getcontent</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-multi-info-read.php.html" title="curl_&#8203;multi_&#8203;info_&#8203;read">curl_&#8203;multi_&#8203;info_&#8203;read</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-multi-init.php.html" title="curl_&#8203;multi_&#8203;init">curl_&#8203;multi_&#8203;init</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-multi-remove-handle.php.html" title="curl_&#8203;multi_&#8203;remove_&#8203;handle">curl_&#8203;multi_&#8203;remove_&#8203;handle</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-multi-select.php.html" title="curl_&#8203;multi_&#8203;select">curl_&#8203;multi_&#8203;select</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-multi-setopt.php.html" title="curl_&#8203;multi_&#8203;setopt">curl_&#8203;multi_&#8203;setopt</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-multi-strerror.php.html" title="curl_&#8203;multi_&#8203;strerror">curl_&#8203;multi_&#8203;strerror</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-pause.php.html" title="curl_&#8203;pause">curl_&#8203;pause</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-reset.php.html" title="curl_&#8203;reset">curl_&#8203;reset</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-setopt-array.php.html" title="curl_&#8203;setopt_&#8203;array">curl_&#8203;setopt_&#8203;array</a>
                        </li>
                                                <li class="current">
                            <a href="function.curl-setopt.php.html" title="curl_&#8203;setopt">curl_&#8203;setopt</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-share-close.php.html" title="curl_&#8203;share_&#8203;close">curl_&#8203;share_&#8203;close</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-share-errno.php.html" title="curl_&#8203;share_&#8203;errno">curl_&#8203;share_&#8203;errno</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-share-init.php.html" title="curl_&#8203;share_&#8203;init">curl_&#8203;share_&#8203;init</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-share-setopt.php.html" title="curl_&#8203;share_&#8203;setopt">curl_&#8203;share_&#8203;setopt</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-share-strerror.php.html" title="curl_&#8203;share_&#8203;strerror">curl_&#8203;share_&#8203;strerror</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-strerror.php.html" title="curl_&#8203;strerror">curl_&#8203;strerror</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-unescape.php.html" title="curl_&#8203;unescape">curl_&#8203;unescape</a>
                        </li>
                                                <li class="">
                            <a href="function.curl_upkeep.php.html" title="curl_&#8203;upkeep">curl_&#8203;upkeep</a>
                        </li>
                                                <li class="">
                            <a href="function.curl-version.php.html" title="curl_&#8203;version">curl_&#8203;version</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
