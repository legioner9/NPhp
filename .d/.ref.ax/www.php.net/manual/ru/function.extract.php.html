<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: extract - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.extract.php.html">
 <link rel="shorturl" href="https://www.php.net/extract">
 <link rel="alternate" href="https://www.php.net/extract" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.array.php.html">
 <link rel="prev" href="function.end.php.html">
 <link rel="next" href="function.in-array.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.extract.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.extract.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.extract.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.extract.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.extract.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.extract.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.extract.php" hreflang="pt_BR">
 <link rel="alternate" href="function.extract.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.extract.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.extract.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.in-array.php.html">
          in_array &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.end.php.html">
          &laquo; end        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.basic.vartype.php.html'>Модули, относящиеся к переменным и типам</a></li>      <li><a href='book.array.php.html'>Массивы</a></li>      <li><a href='ref.array.php.html'>Функции для работы с массивами</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.extract.php'>English</option>
            <option value='de/function.extract.php'>German</option>
            <option value='es/function.extract.php'>Spanish</option>
            <option value='fr/function.extract.php'>French</option>
            <option value='it/function.extract.php'>Italian</option>
            <option value='ja/function.extract.php'>Japanese</option>
            <option value='pt_BR/function.extract.php'>Brazilian Portuguese</option>
            <option value='ru/function.extract.php' selected="selected">Russian</option>
            <option value='tr/function.extract.php'>Turkish</option>
            <option value='zh/function.extract.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/array/functions/extract.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.extract%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.extract" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">extract</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">extract</span> &mdash; <span class="dc-title">Импортирует переменные массива в текущую таблицу символов</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.extract-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>extract</strong></span>(<span class="methodparam"><span class="type">array</span> <code class="parameter reference">&$array</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code><span class="initializer"> = <strong><code>EXTR_OVERWRITE</code></strong></span></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$prefix</code><span class="initializer"> = &quot;&quot;</span></span>): <span class="type">int</span></div>

  <p class="para rdfs-comment">
   Импортирует переменные массива в текущую таблицу символов.
  </p>
  <p class="para">
   Функция проверяет каждый ключ массива, чтобы увидеть, содержит ли он допустимое имя переменной.
   Будут также проверены совпадения (коллизии) с существующими переменными
   в таблице символов.
  </p>
  <div class="warning"><strong class="warning">Внимание</strong>
   <p class="para">
    Не вызывайте функцию <span class="function"><strong>extract()</strong></span> с ненадёжными данными
    наподобие пользовательского ввода
    (например, с суперглобальными переменными <var class="varname"><a href="reserved.variables.get.php.html" class="classname">$_GET</a></var>, <var class="varname"><a href="reserved.variables.files.php.html" class="classname">$_FILES</a></var>).
   </p>
  </div>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.extract-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">array</code></dt>

     <dd>

      <p class="para">
       Ассоциативный массив. Функция трактует ключи массива
       как имена переменных, а значения — как значения
       переменных. Для каждой пары ключ/значение будет создана
       переменная в текущей таблице символов с учётом
       флагов (<code class="parameter">flags</code>)
       и параметров префикса (<code class="parameter">prefix</code>).
      </p>
      <p class="para">
       Без флагов <strong><code>EXTR_PREFIX_ALL</code></strong>
       или <strong><code>EXTR_PREFIX_INVALID</code></strong> функция работает
       только с ассоциативными массивами;
       индексный массив не даст результатов.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">flags</code></dt>

     <dd>

      <p class="para">
       Параметр <code class="parameter">flags</code> определяет способ
       трактовки неправильных/числовых ключей и коллизий. Разрешено
       указывать одно из следующих значений:
       <dl>
        
         <dt>
<strong><code>EXTR_OVERWRITE</code></strong></dt>

         <dd>

          <span class="simpara">
           Если переменная с таким именем существует, она будет перезаписана.
          </span>
         </dd>

        
        
         <dt>
<strong><code>EXTR_SKIP</code></strong></dt>

         <dd>

          <span class="simpara">
           Если переменная с таким именем существует, её текущее значение
           не будет перезаписано.
          </span>
         </dd>

        
        
         <dt>
<strong><code>EXTR_PREFIX_SAME</code></strong></dt>

         <dd>

          <span class="simpara">Если переменная с таким именем существует, к её имени
           будет добавлен префикс, определённый параметром
           <code class="parameter">prefix</code>.
          </span>
         </dd>

        
        
         <dt>
<strong><code>EXTR_PREFIX_ALL</code></strong></dt>

         <dd>

          <span class="simpara">
           Добавить префикс <code class="parameter">prefix</code> ко всем именам переменных.
          </span>
         </dd>

        
        
         <dt>
<strong><code>EXTR_PREFIX_INVALID</code></strong></dt>

         <dd>

          <span class="simpara">
           Добавить префикс <code class="parameter">prefix</code> только к
           некорректным/числовым именам переменных.
          </span>
         </dd>

        
        
         <dt>
<strong><code>EXTR_IF_EXISTS</code></strong></dt>

         <dd>

          <span class="simpara">
           Перезаписать только те переменные, которые содержатся
           в текущей таблице символов, иначе ничего не делать.
           Это полезно для определения списка
           допустимых переменных и извлечения только тех
           из них, которые разработчик уже определил, например, из массива
           наподобие <var class="varname"><a href="reserved.variables.request.php.html" class="classname">$_REQUEST</a></var>.
          </span>
         </dd>

        
        
         <dt>
<strong><code>EXTR_PREFIX_IF_EXISTS</code></strong></dt>

         <dd>

          <span class="simpara">
           Создать только префикс-версии переменных, если версия
           переменной без префикса уже содержится в текущей таблице символов.
          </span>
         </dd>

        
        
         <dt>
<strong><code>EXTR_REFS</code></strong></dt>

         <dd>

          <span class="simpara">
           Извлечь переменные как ссылки. Это фактически означает, что
           значения импортированных переменных всё ещё будут ссылаться
           на значения массива <code class="parameter">array</code>.
           Разрешено указывать этот флаг отдельно или
           комбинировать его с другими значениями
           параметра <code class="parameter">flags</code> через побитовое «ИЛИ».
          </span>
         </dd>

        
       </dl>

      </p>
      <p class="para">
       Если параметр <code class="parameter">flags</code> не задан, он
       трактуется как флаг <strong><code>EXTR_OVERWRITE</code></strong>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">prefix</code></dt>

     <dd>

      <p class="para">
       Обратите внимание, что префикс (<code class="parameter">prefix</code>)
       нужен, только если параметру <code class="parameter">flags</code>
       установлено значение <strong><code>EXTR_PREFIX_SAME</code></strong>,
       <strong><code>EXTR_PREFIX_ALL</code></strong>,
       <strong><code>EXTR_PREFIX_INVALID</code></strong>
       или <strong><code>EXTR_PREFIX_IF_EXISTS</code></strong>. Если
       в результате добавления префикса не будет получено
       допустимое имя переменной, она не будет импортирована
       в текущую таблицу символов.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.extract-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает количество переменных, успешно импортированных в таблицу символов.
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.extract-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Пример #1 Пример использования функции <span class="function"><strong>extract()</strong></span></strong></p>
    <div class="example-contents"><p>
     Функцию <span class="function"><strong>extract()</strong></span> также вызывают
     для импорта в таблицу символов переменных,
     содержащихся в ассоциативном массиве, возвращаемом функцией
     <span class="function"><a href="function.wddx-deserialize.php.html" class="function">wddx_deserialize()</a></span>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">/* Предположим, что переменная $var_array — это массив, который вернула<br />   функция wddx_deserialize */<br /><br /></span><span style="color: #0000BB">$size </span><span style="color: #007700">= </span><span style="color: #DD0000">"large"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$var_array </span><span style="color: #007700">= array(<br />     </span><span style="color: #DD0000">"color" </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"blue"</span><span style="color: #007700">,<br />     </span><span style="color: #DD0000">"size"  </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"medium"</span><span style="color: #007700">,<br />     </span><span style="color: #DD0000">"shape" </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"sphere"<br /></span><span style="color: #007700">);<br /></span><span style="color: #0000BB">extract</span><span style="color: #007700">(</span><span style="color: #0000BB">$var_array</span><span style="color: #007700">, </span><span style="color: #0000BB">EXTR_PREFIX_SAME</span><span style="color: #007700">, </span><span style="color: #DD0000">"wddx"</span><span style="color: #007700">);<br /><br />echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$color</span><span style="color: #DD0000">, </span><span style="color: #0000BB">$size</span><span style="color: #DD0000">, </span><span style="color: #0000BB">$shape</span><span style="color: #DD0000">, </span><span style="color: #0000BB">$wddx_size</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
blue, large, sphere, medium
</pre></div>
    </div>
    <div class="example-contents"><p>
     Переменная <var class="varname">$size</var> не была перезаписана,
     потому что был установлен флаг <strong><code>EXTR_PREFIX_SAME</code></strong>,
     поэтому была создана переменная <var class="varname">$wddx_size</var>.
     Если был бы определён флаг <strong><code>EXTR_SKIP</code></strong>,
     тогда переменная <var class="varname">$wddx_size</var> не была бы создана.
     Флаг <strong><code>EXTR_OVERWRITE</code></strong> привёл бы к тому,
     что переменной <var class="varname">$size</var> было бы присвоено
     значение «medium», а флаг <strong><code>EXTR_PREFIX_ALL</code></strong>
     был бы причиной того, что были бы созданы
     переменные <var class="varname">$wddx_color</var>,
     <var class="varname">$wddx_size</var> и <var class="varname">$wddx_shape</var>.
    </p></div>
   </div>
  </p>
 </div>

 <div class="refsect1 notes" id="refsect1-function.extract-notes">
  <h3 class="title">Примечания</h3>
  <div class="warning"><strong class="warning">Внимание</strong>
   <p class="para">
    Не стоит вызывать функцию <span class="function"><strong>extract()</strong></span>
    с ненадёжными данными наподобие пользовательского ввода
    (например, с суперглобальными переменными <var class="varname"><a href="reserved.variables.get.php.html" class="classname">$_GET</a></var>, <var class="varname"><a href="reserved.variables.files.php.html" class="classname">$_FILES</a></var>).
    Когда это всё-таки делают, проверяют, что значение параметра <code class="parameter">flags</code>
    задано неперезаписывающим флагом наподобие
    <strong><code>EXTR_SKIP</code></strong>, и помнят,
    что переменные нужно извлекать в том же порядке, который определён
    в директиве <a href="ini.core.php.html#ini.variables-order" class="link">variables_order</a>
    файла <a href="ini.php.html" class="link"><var class="filename">php.ini</var></a>.
   </p>
  </div>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.extract-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.compact.php.html" class="function" rel="rdfs-seeAlso">compact()</a> - Создаёт массив, содержащий названия переменных и их значения</span></li>
    <li class="member"><span class="function"><a href="function.list.php.html" class="function" rel="rdfs-seeAlso">list()</a> - Присваивает переменным значения похожим на массивы синтаксисом</span></li>
   </ul>
  </p>
 </div>

</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.extract&amp;redirect=https://www.php.net/manual/ru/function.extract.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">31 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="50549">  <div class="votes">
    <div id="Vu50549">
    <a href="https://www.php.net/manual/vote-note.php?id=50549&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd50549">
    <a href="https://www.php.net/manual/vote-note.php?id=50549&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V50549" title="73% like this...">
    21
    </div>
  </div>
  <a href="function.extract.php.html#50549" class="name">
  <strong class="user"><em>Michael Newton</em></strong></a><a class="genanchor" href="function.extract.php.html#50549"> &para;</a><div class="date" title="2005-03-02 05:23"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom50549">
<div class="phpcode"><code><span class="html">They say "If the result is not a valid variable name, it is not imported into the symbol table."<br /><br />What they should say is that if _any_ of the results have invalid names, _none_ of the variables get extracted.<br /><br />Under 4.3.10 on Windows 2000, I was pulling some mySQL records, but needed to convert two fields into IP addresses:<br />&lt;?<br />extract(mysql_fetch_assoc(mysql_query('SELECT * FROM foo')));<br />extract(mysql_fetch_assoc(mysql_query('SELECT INET_NTOA(bar) AS bar, INET_NTOA(baz) FROM foo')));<br />?&gt;<br /><br />I had forgotten the second AS modifier in the SQL query.  Because it couldn't extract a variable called INET_NTOA(baz) into the symbol table, it didn't do either of them.<br /><br />(BTW I don't normally stack functions up like that!  Just to make a short example!)</span></code></div>
  </div>
 </div>
  <div class="note" id="122772">  <div class="votes">
    <div id="Vu122772">
    <a href="https://www.php.net/manual/vote-note.php?id=122772&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122772">
    <a href="https://www.php.net/manual/vote-note.php?id=122772&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122772" title="71% like this...">
    6
    </div>
  </div>
  <a href="function.extract.php.html#122772" class="name">
  <strong class="user"><em>mrkhoa99 at gmail dot com</em></strong></a><a class="genanchor" href="function.extract.php.html#122772"> &para;</a><div class="date" title="2018-05-29 03:29"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom122772">
<div class="phpcode"><code><span class="html">We can use extract () function for Template Engine:<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">#Template.php<br /><br /></span><span class="keyword">class </span><span class="default">Template<br /></span><span class="keyword">{<br />    protected </span><span class="default">$viewVars</span><span class="keyword">;<br /><br />    public function </span><span class="default">renderPage</span><span class="keyword">(</span><span class="default">$tpl</span><span class="keyword">)<br />    {<br />        </span><span class="default">ob_start</span><span class="keyword">();<br />        </span><span class="default">extract</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">viewVars</span><span class="keyword">, </span><span class="default">EXTR_SKIP</span><span class="keyword">);<br />        include </span><span class="default">$tpl</span><span class="keyword">;<br />        return </span><span class="default">ob_end_flush</span><span class="keyword">();<br />    }<br /><br />    public function </span><span class="default">assign</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)<br />    {<br />        foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />            </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">viewVars</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />        }<br />        return </span><span class="default">$this</span><span class="keyword">;<br />    }<br />}<br /><br /></span><span class="default">$template </span><span class="keyword">= new </span><span class="default">Template</span><span class="keyword">();<br /></span><span class="default">$template</span><span class="keyword">-&gt;</span><span class="default">assign</span><span class="keyword">(<br />   [ </span><span class="string">'pageHeader' </span><span class="keyword">=&gt; </span><span class="string">'Page Header'</span><span class="keyword">, </span><span class="string">'content' </span><span class="keyword">=&gt; </span><span class="string">'This is the content page'</span><span class="keyword">]<br />);<br /></span><span class="default">$template</span><span class="keyword">-&gt;</span><span class="default">renderPage</span><span class="keyword">(</span><span class="string">'tpl.php'</span><span class="keyword">);<br /><br /></span><span class="comment">#tpl.php<br /><br /></span><span class="keyword">&lt;</span><span class="default">h1</span><span class="keyword">&gt;&lt;?= </span><span class="default">$pageHeader</span><span class="keyword">; </span><span class="default">?&gt;</span>&lt;/h1&gt;<br />&lt;p&gt;<span class="default">&lt;?= $content </span><span class="keyword">;</span><span class="default">?&gt;</span>&lt;/p&gt;<br /><br />Output:<br /><br />Page Header<br />This is the content page</span></code></div>
  </div>
 </div>
  <div class="note" id="112165">  <div class="votes">
    <div id="Vu112165">
    <a href="https://www.php.net/manual/vote-note.php?id=112165&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd112165">
    <a href="https://www.php.net/manual/vote-note.php?id=112165&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V112165" title="68% like this...">
    8
    </div>
  </div>
  <a href="function.extract.php.html#112165" class="name">
  <strong class="user"><em>FredLawl</em></strong></a><a class="genanchor" href="function.extract.php.html#112165"> &para;</a><div class="date" title="2013-05-13 02:56"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom112165">
<div class="phpcode"><code><span class="html">It is possible to use this as a way to create public attributes for a class.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">Foo </span><span class="keyword">{<br /><br />  public function </span><span class="default">__construct </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br /><br />      </span><span class="default">extract</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">EXTR_REFS</span><span class="keyword">);<br />      foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />          </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$key </span><span class="keyword">= $</span><span class="default">$key</span><span class="keyword">;<br />          </span><span class="comment">// Do: $this-&gt;key = $key; if $key is not a string.<br />      </span><span class="keyword">}<br /><br />  }<br /><br />}<br /><br /></span><span class="default">$array </span><span class="keyword">= array(<br />    </span><span class="string">'valueOne'      </span><span class="keyword">=&gt; </span><span class="string">'Test Value 1'</span><span class="keyword">,<br />    </span><span class="string">'valueTwo'      </span><span class="keyword">=&gt; </span><span class="string">'Test Value 2'</span><span class="keyword">,<br />    </span><span class="string">'valueThree'    </span><span class="keyword">=&gt; </span><span class="string">'Test Value 3'<br /></span><span class="keyword">);<br /><br /></span><span class="default">$foo </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br /><br /></span><span class="comment">// Works<br /></span><span class="keyword">echo </span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">valueOne</span><span class="keyword">; </span><span class="comment">// Test Value 1<br /></span><span class="keyword">echo </span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">valueTwo</span><span class="keyword">; </span><span class="comment">// Test Value 2<br /><br />// Does not work!<br /></span><span class="keyword">echo </span><span class="default">$foo</span><span class="keyword">::</span><span class="default">$valueOne</span><span class="keyword">; </span><span class="comment">// Fatal error:  Access to undeclared static property: Test::$valueOne<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="74649">  <div class="votes">
    <div id="Vu74649">
    <a href="https://www.php.net/manual/vote-note.php?id=74649&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd74649">
    <a href="https://www.php.net/manual/vote-note.php?id=74649&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V74649" title="65% like this...">
    6
    </div>
  </div>
  <a href="function.extract.php.html#74649" class="name">
  <strong class="user"><em>Dan O&#039;Donnell</em></strong></a><a class="genanchor" href="function.extract.php.html#74649"> &para;</a><div class="date" title="2007-04-21 12:25"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom74649">
<div class="phpcode"><code><span class="html">Following up on ktwombley at gmail dot com's post:<br /><br />Presumably one easy way of dealing with this security issue is to use the EXTR_IF_EXISTS flag and make sure <br /><br />a) your define acceptable input variables beforehand (i.e. as empty variables)<br />b) Sanitise any user input to avoid unacceptable variable content. <br /><br />If you do these two things, then I'm not sure I see the difference between extract($_REQUEST,EXTR_IF_EXISTS); and assigning each of the variables by hand.<br /><br />I'm not talking here about the idea of storing the variables in a database, just the immediately necessary steps to allow you to use extract on REQUEST arrays with relative safety.</span></code></div>
  </div>
 </div>
  <div class="note" id="115757">  <div class="votes">
    <div id="Vu115757">
    <a href="https://www.php.net/manual/vote-note.php?id=115757&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd115757">
    <a href="https://www.php.net/manual/vote-note.php?id=115757&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V115757" title="57% like this...">
    10
    </div>
  </div>
  <a href="function.extract.php.html#115757" class="name">
  <strong class="user"><em>dmikam</em></strong></a><a class="genanchor" href="function.extract.php.html#115757"> &para;</a><div class="date" title="2014-09-18 10:18"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom115757">
<div class="phpcode"><code><span class="html">I have made some tests to compare the speed of next constructions:<br /><span class="default">&lt;?php<br /><br />extract</span><span class="keyword">(</span><span class="default">$ARRAY</span><span class="keyword">);<br /><br /></span><span class="comment">// vs. <br /><br /></span><span class="keyword">foreach(</span><span class="default">$ARRAY </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) <br />    $</span><span class="default">$key </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">; <br /></span><span class="default">?&gt;<br /></span><br />Surprisingly for me extract is 20%-80% slower then foreach construction. I don't really understand why, but it's so.</span></code></div>
  </div>
 </div>
  <div class="note" id="114095">  <div class="votes">
    <div id="Vu114095">
    <a href="https://www.php.net/manual/vote-note.php?id=114095&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd114095">
    <a href="https://www.php.net/manual/vote-note.php?id=114095&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V114095" title="60% like this...">
    7
    </div>
  </div>
  <a href="function.extract.php.html#114095" class="name">
  <strong class="user"><em>CertaiN</em></strong></a><a class="genanchor" href="function.extract.php.html#114095"> &para;</a><div class="date" title="2014-01-10 04:37"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom114095">
<div class="phpcode"><code><span class="html">[New Version]<br />This function is very useful for filtering complicated array structure.<br />Also, Some integer bitmasks and invalid UTF-8 sequence detection are available.<br /><br />Code:<br /><span class="default">&lt;?php<br /></span><span class="comment">/**<br /> * @param  integer $type    Constant like INPUT_XXX.<br /> * @param  array   $default Default structure of the specified super global var.<br /> *                          Following bitmasks are available:<br /> *  + FILTER_STRUCT_FORCE_ARRAY - Force 1 dimensional array.<br /> *  + FILTER_STRUCT_TRIM        - Trim by ASCII control chars.<br /> *  + FILTER_STRUCT_FULL_TRIM   - Trim by ASCII control chars,<br /> *                                full-width and no-break space.<br /> * @return array            The value of the filtered super global var.<br /> */<br /></span><span class="default">define</span><span class="keyword">(</span><span class="string">'FILTER_STRUCT_FORCE_ARRAY'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">define</span><span class="keyword">(</span><span class="string">'FILTER_STRUCT_TRIM'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br /></span><span class="default">define</span><span class="keyword">(</span><span class="string">'FILTER_STRUCT_FULL_TRIM'</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br />function </span><span class="default">filter_struct_utf8</span><span class="keyword">(</span><span class="default">$type</span><span class="keyword">, array </span><span class="default">$default</span><span class="keyword">) {<br />    static </span><span class="default">$func </span><span class="keyword">= </span><span class="default">__FUNCTION__</span><span class="keyword">;<br />    static </span><span class="default">$trim </span><span class="keyword">= </span><span class="string">"[\\x0-\x20\x7f]"</span><span class="keyword">;<br />    static </span><span class="default">$ftrim </span><span class="keyword">= </span><span class="string">"[\\x0-\x20\x7f\xc2\xa0\xe3\x80\x80]"</span><span class="keyword">;<br />    static </span><span class="default">$recursive_static </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />    if (!</span><span class="default">$recursive </span><span class="keyword">= </span><span class="default">$recursive_static</span><span class="keyword">) {<br />        </span><span class="default">$types </span><span class="keyword">= array(<br />            </span><span class="default">INPUT_GET </span><span class="keyword">=&gt; </span><span class="default">$_GET</span><span class="keyword">,<br />            </span><span class="default">INPUT_POST </span><span class="keyword">=&gt; </span><span class="default">$_POST</span><span class="keyword">,<br />            </span><span class="default">INPUT_COOKIE </span><span class="keyword">=&gt; </span><span class="default">$_COOKIE</span><span class="keyword">,<br />            </span><span class="default">INPUT_REQUEST </span><span class="keyword">=&gt; </span><span class="default">$_REQUEST</span><span class="keyword">,<br />        );<br />        if (!isset(</span><span class="default">$types</span><span class="keyword">[(int)</span><span class="default">$type</span><span class="keyword">])) {<br />            throw new </span><span class="default">LogicException</span><span class="keyword">(</span><span class="string">'unknown super global var type'</span><span class="keyword">);<br />        }<br />        </span><span class="default">$var </span><span class="keyword">= </span><span class="default">$types</span><span class="keyword">[(int)</span><span class="default">$type</span><span class="keyword">];<br />        </span><span class="default">$recursive_static </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />    } else {<br />        </span><span class="default">$var </span><span class="keyword">= </span><span class="default">$type</span><span class="keyword">;<br />    }<br />    </span><span class="default">$ret </span><span class="keyword">= array();<br />    foreach (</span><span class="default">$default </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />        if (</span><span class="default">$is_int </span><span class="keyword">= </span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />            if (!(</span><span class="default">$value </span><span class="keyword">| (<br />                </span><span class="default">FILTER_STRUCT_FORCE_ARRAY </span><span class="keyword">|<br />                </span><span class="default">FILTER_STRUCT_FULL_TRIM </span><span class="keyword">| <br />                </span><span class="default">FILTER_STRUCT_TRIM<br />            </span><span class="keyword">))) {<br />                </span><span class="default">$recursive_static </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />                throw new </span><span class="default">LogicException</span><span class="keyword">(</span><span class="string">'unknown bitmask'</span><span class="keyword">);<br />            }<br />            if (</span><span class="default">$value </span><span class="keyword">&amp; </span><span class="default">FILTER_STRUCT_FORCE_ARRAY</span><span class="keyword">) {<br />                </span><span class="default">$tmp </span><span class="keyword">= array();<br />                if (isset(</span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])) {<br />                    foreach ((array)</span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />                        if (!</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'//u'</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">)){<br />                            continue;<br />                        }<br />                        </span><span class="default">$value </span><span class="keyword">&amp;= </span><span class="default">FILTER_STRUCT_FULL_TRIM </span><span class="keyword">| </span><span class="default">FILTER_STRUCT_TRIM</span><span class="keyword">;<br />                        </span><span class="default">$tmp </span><span class="keyword">+= array(</span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">? </span><span class="default">$value </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">);<br />                    }<br />                }<br />                </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$tmp</span><span class="keyword">;<br />            }<br />        }<br />        if (</span><span class="default">$isset </span><span class="keyword">= isset(</span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) and </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />            </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$func</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$value</span><span class="keyword">);<br />        } elseif (!</span><span class="default">$isset </span><span class="keyword">|| </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])) {<br />            </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">null</span><span class="keyword">;<br />        } elseif (</span><span class="default">$is_int </span><span class="keyword">&amp;&amp; </span><span class="default">$value </span><span class="keyword">&amp; </span><span class="default">FILTER_STRUCT_FULL_TRIM</span><span class="keyword">) {<br />            </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/\A</span><span class="keyword">{</span><span class="default">$ftrim</span><span class="keyword">}</span><span class="string">++|</span><span class="keyword">{</span><span class="default">$ftrim</span><span class="keyword">}</span><span class="string">++\z/u"</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />        } elseif (</span><span class="default">$is_int </span><span class="keyword">&amp;&amp; </span><span class="default">$value </span><span class="keyword">&amp; </span><span class="default">FILTER_STRUCT_TRIM</span><span class="keyword">) {<br />            </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/\A</span><span class="keyword">{</span><span class="default">$trim</span><span class="keyword">}</span><span class="string">++|</span><span class="keyword">{</span><span class="default">$trim</span><span class="keyword">}</span><span class="string">++\z/u"</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />        } else {<br />            </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'//u'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />        }<br />        if (</span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] === </span><span class="default">null</span><span class="keyword">) {<br />            </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$is_int </span><span class="keyword">? </span><span class="string">'' </span><span class="keyword">: </span><span class="default">$value</span><span class="keyword">;<br />        }<br />    }<br />    if (!</span><span class="default">$recursive</span><span class="keyword">) {<br />        </span><span class="default">$recursive_static </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />    }<br />    return </span><span class="default">$ret</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="81805">  <div class="votes">
    <div id="Vu81805">
    <a href="https://www.php.net/manual/vote-note.php?id=81805&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd81805">
    <a href="https://www.php.net/manual/vote-note.php?id=81805&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V81805" title="66% like this...">
    1
    </div>
  </div>
  <a href="function.extract.php.html#81805" class="name">
  <strong class="user"><em>Hayley Watson</em></strong></a><a class="genanchor" href="function.extract.php.html#81805"> &para;</a><div class="date" title="2008-03-13 03:18"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom81805">
<div class="phpcode"><code><span class="html">Dan O'Donnell's suggestion needs a third requirement to work as described:<br /><br />c) No other variables are defined - especially variables that contain potentially sensitive information.<br /><br />Without that condition the difference between extract() and assigning variables by hand (and the resulting security implications) should be obvious.<br /><br />The only valid security step there is (b) - but you should be doing that anyway.</span></code></div>
  </div>
 </div>
  <div class="note" id="62727">  <div class="votes">
    <div id="Vu62727">
    <a href="https://www.php.net/manual/vote-note.php?id=62727&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd62727">
    <a href="https://www.php.net/manual/vote-note.php?id=62727&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V62727" title="66% like this...">
    1
    </div>
  </div>
  <a href="function.extract.php.html#62727" class="name">
  <strong class="user"><em>owk dot ch199_ph at gadz dot org</em></strong></a><a class="genanchor" href="function.extract.php.html#62727"> &para;</a><div class="date" title="2006-03-08 04:21"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom62727">
<div class="phpcode"><code><span class="html">And if you want with PHP 5 an easy way to extract $V by reference, try this :<br /><span class="default">&lt;?php<br />    </span><span class="keyword">foreach (</span><span class="default">$V </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; &amp;</span><span class="default">$v</span><span class="keyword">) {<br />        $</span><span class="default">$k </span><span class="keyword">=&amp; </span><span class="default">$v</span><span class="keyword">;<br />    }<br /></span><span class="default">?&gt;<br /></span>It can be used to create special kind of "free args" functions that let you choose when you call them the way you send variables, and which ones. They are moreover very fast to call thanks to references :<br /><span class="default">&lt;?php<br />    </span><span class="keyword">function </span><span class="default">free_args </span><span class="keyword">(&amp;</span><span class="default">$V</span><span class="keyword">) {<br />        foreach (</span><span class="default">$V </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; &amp;</span><span class="default">$v</span><span class="keyword">) {<br />            $</span><span class="default">$k </span><span class="keyword">=&amp; </span><span class="default">$v</span><span class="keyword">;<br />        }<br />        unset (</span><span class="default">$k</span><span class="keyword">);  unset (</span><span class="default">$v</span><span class="keyword">);  unset (</span><span class="default">$V</span><span class="keyword">);<br /><br />        </span><span class="comment">// be careful that if you need to extract $k, $v or $V variables you should find other names for them in the lines above (ie. $__k, $__v and $__V)<br />    </span><span class="keyword">}<br /><br />    </span><span class="default">$huge_text </span><span class="keyword">= </span><span class="string">'...'</span><span class="keyword">;<br /><br />    </span><span class="default">$a </span><span class="keyword">= array (</span><span class="string">'arg1' </span><span class="keyword">=&gt; </span><span class="string">'val1'</span><span class="keyword">, </span><span class="string">'arg2' </span><span class="keyword">=&gt; &amp;</span><span class="default">$huge_text</span><span class="keyword">); </span><span class="comment">// in this call, only $arg2 will be a true reference in the function<br />    </span><span class="default">free_args </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span>Be warned that you can't write : "<span class="default">&lt;?php free_args </span><span class="keyword">(array (</span><span class="string">'arg1' </span><span class="keyword">=&gt; </span><span class="string">'val1'</span><span class="keyword">)); </span><span class="default">?&gt;</span>" because the array can't be referenced by the function, as it's not yet created when the function starts.</span></code></div>
  </div>
 </div>
  <div class="note" id="81859">  <div class="votes">
    <div id="Vu81859">
    <a href="https://www.php.net/manual/vote-note.php?id=81859&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd81859">
    <a href="https://www.php.net/manual/vote-note.php?id=81859&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V81859" title="63% like this...">
    3
    </div>
  </div>
  <a href="function.extract.php.html#81859" class="name">
  <strong class="user"><em>benjaminATwebbutvecklarnaDOTse</em></strong></a><a class="genanchor" href="function.extract.php.html#81859"> &para;</a><div class="date" title="2008-03-16 06:19"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom81859">
<div class="phpcode"><code><span class="html">Re: anon at anon dot org, about extract() and null values<br /><br />Personally I've found use extracting multiple resultsets from db where the latter would overwrite the previous when a variable is not null ( and optionally if its not &gt;0 )<br /><br />It would be useful if $extract_type was extended on top of these two:<br /><br />EXTR_OVERWRITE<br />EXTR_SKIP<br /><br />with something like this:<br /><br />EXTR_OVERWRITE_NULL <br /> - If there is a collision, overwrite the existing variable if it is null <br /><br />EXTR_OVERWRITE_0<br /> - Same thing but == 0 or null<br /><br />EXTR_SKIP_NULL<br /> - If there is a collision, skip the new variable if the existing is not null<br /><br />EXTR_SKIP_0<br /> - Same thing but == 0 or null<br /><br />Those ought to cover a few good cases that aren't covered now.</span></code></div>
  </div>
 </div>
  <div class="note" id="116525">  <div class="votes">
    <div id="Vu116525">
    <a href="https://www.php.net/manual/vote-note.php?id=116525&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116525">
    <a href="https://www.php.net/manual/vote-note.php?id=116525&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116525" title="61% like this...">
    4
    </div>
  </div>
  <a href="function.extract.php.html#116525" class="name">
  <strong class="user"><em>bob</em></strong></a><a class="genanchor" href="function.extract.php.html#116525"> &para;</a><div class="date" title="2015-01-18 08:35"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom116525">
<div class="phpcode"><code><span class="html">Note that extract() will only create or overwrite variables in the current scope, so<br />&lt;?<br />function test(){<br /> $a=Array('b'=&gt;1,'c'=&gt;2);<br /> extract($a);<br />}<br />test();<br />exit("$b");<br />?&gt;<br />will produce no output, whereas<br />&lt;?<br />function test(){<br /> global $b;<br /> $a=Array('b'=&gt;1,'c'=&gt;2);<br /> extract($a);<br />}<br />test();<br />exit("$b");<br />?&gt;<br />will output 1.</span></code></div>
  </div>
 </div>
  <div class="note" id="114096">  <div class="votes">
    <div id="Vu114096">
    <a href="https://www.php.net/manual/vote-note.php?id=114096&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd114096">
    <a href="https://www.php.net/manual/vote-note.php?id=114096&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V114096" title="57% like this...">
    8
    </div>
  </div>
  <a href="function.extract.php.html#114096" class="name">
  <strong class="user"><em>CertaiN</em></strong></a><a class="genanchor" href="function.extract.php.html#114096"> &para;</a><div class="date" title="2014-01-10 04:38"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom114096">
<div class="phpcode"><code><span class="html">[New Version]<br /><br />Example Usage:<br /><span class="default">&lt;?php<br />$_GET</span><span class="keyword">[</span><span class="string">'A'</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">] = </span><span class="string">'  CORRECT(including some spaces)    '</span><span class="keyword">;<br /></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'A'</span><span class="keyword">][</span><span class="string">'b'</span><span class="keyword">] = </span><span class="string">'  CORRECT(including some spaces)    '</span><span class="keyword">;<br /></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'A'</span><span class="keyword">][</span><span class="string">'c'</span><span class="keyword">] = </span><span class="string">"Invalid UTF-8 sequence: \xe3\xe3\xe3"</span><span class="keyword">;<br /></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'A'</span><span class="keyword">][</span><span class="string">'d'</span><span class="keyword">][</span><span class="string">'invalid_structure'</span><span class="keyword">] = </span><span class="string">'INVALID'</span><span class="keyword">;<br /><br /></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'B'</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">] = </span><span class="string">'  CORRECT(including some spaces)    '</span><span class="keyword">;<br /></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'B'</span><span class="keyword">][</span><span class="string">'b'</span><span class="keyword">] = </span><span class="string">"Invalid UTF-8 sequence: \xe3\xe3\xe3"</span><span class="keyword">;<br /></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'B'</span><span class="keyword">][</span><span class="string">'c'</span><span class="keyword">][</span><span class="string">'invalid_structure'</span><span class="keyword">] = </span><span class="string">'INVALID'</span><span class="keyword">;<br /></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'B'</span><span class="keyword">][</span><span class="string">"Invalid UTF-8 sequence: \xe3\xe3\xe3"</span><span class="keyword">] = </span><span class="string">'INVALID'</span><span class="keyword">;<br /><br /></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'C'</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">] = </span><span class="string">'  CORRECT(including some spaces)    '</span><span class="keyword">;<br /></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'C'</span><span class="keyword">][</span><span class="string">'b'</span><span class="keyword">] = </span><span class="string">"Invalid UTF-8 sequence: \xe3\xe3\xe3"</span><span class="keyword">;<br /></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'C'</span><span class="keyword">][</span><span class="string">'c'</span><span class="keyword">][</span><span class="string">'invalid_structure'</span><span class="keyword">] = </span><span class="string">'INVALID'</span><span class="keyword">;<br /></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'C'</span><span class="keyword">][</span><span class="string">"Invalid UTF-8 sequence: \xe3\xe3\xe3"</span><span class="keyword">] = </span><span class="string">'INVALID'</span><span class="keyword">;<br /><br /></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'unneeded_item'</span><span class="keyword">] = </span><span class="string">'UNNEEDED'</span><span class="keyword">;<br /><br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_struct_utf8</span><span class="keyword">(</span><span class="default">INPUT_GET</span><span class="keyword">, array(<br />    </span><span class="string">'A' </span><span class="keyword">=&gt; array(<br />        </span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="string">''</span><span class="keyword">,<br />        </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">FILTER_STRUCT_TRIM</span><span class="keyword">,<br />        </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="string">''</span><span class="keyword">,<br />        </span><span class="string">'d' </span><span class="keyword">=&gt; </span><span class="string">''</span><span class="keyword">,<br />    ),<br />    </span><span class="string">'B' </span><span class="keyword">=&gt; </span><span class="default">FILTER_STRUCT_FORCE_ARRAY</span><span class="keyword">,<br />    </span><span class="string">'C' </span><span class="keyword">=&gt; </span><span class="default">FILTER_STRUCT_FORCE_ARRAY </span><span class="keyword">| </span><span class="default">FILTER_STRUCT_TRIM</span><span class="keyword">,<br />)));<br /></span><span class="default">?&gt;<br /></span><br />Example Result:<br />array(3) {<br />  ["A"]=&gt;<br />  array(4) {<br />    ["a"]=&gt;<br />    string(36) "  CORRECT(including some spaces)    "<br />    ["b"]=&gt;<br />    string(30) "CORRECT(including some spaces)"<br />    ["c"]=&gt;<br />    string(0) ""<br />    ["d"]=&gt;<br />    string(0) ""<br />  }<br />  ["B"]=&gt;<br />  array(3) {<br />    ["a"]=&gt;<br />    string(36) "  CORRECT(including some spaces)    "<br />    ["b"]=&gt;<br />    string(0) ""<br />    ["c"]=&gt;<br />    string(0) ""<br />  }<br />  ["C"]=&gt;<br />  array(3) {<br />    ["a"]=&gt;<br />    string(30) "CORRECT(including some spaces)"<br />    ["b"]=&gt;<br />    string(0) ""<br />    ["c"]=&gt;<br />    string(0) ""<br />  }<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="63234">  <div class="votes">
    <div id="Vu63234">
    <a href="https://www.php.net/manual/vote-note.php?id=63234&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd63234">
    <a href="https://www.php.net/manual/vote-note.php?id=63234&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V63234" title="62% like this...">
    4
    </div>
  </div>
  <a href="function.extract.php.html#63234" class="name">
  <strong class="user"><em>nicolas zeh</em></strong></a><a class="genanchor" href="function.extract.php.html#63234"> &para;</a><div class="date" title="2006-03-16 09:24"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom63234">
<div class="phpcode"><code><span class="html">This function provides exactly the same functionality as extract except that a parameter was added defining the extract target.<br />This function can be used if your PHP installation does not support the required Flags or more important if you would like to extract arrays to another destination as to $GLOBALS, i.e. other arrays or objects.<br />The only difference to extract is that extract_to moves the array pointer of $arr to the end as $arr is passed by reference to support the EXTR_REFS flag.<br /><br /><span class="default">&lt;?php<br />    </span><span class="keyword">if( !</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'EXTR_PREFIX_ALL'</span><span class="keyword">) ) </span><span class="default">define</span><span class="keyword">(</span><span class="string">'EXTR_PREFIX_ALL'</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br />    if( !</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'EXTR_PREFIX_INVALID'</span><span class="keyword">) ) </span><span class="default">define</span><span class="keyword">(</span><span class="string">'EXTR_PREFIX_INVALID'</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br />    if( !</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'EXTR_IF_EXISTS'</span><span class="keyword">) ) </span><span class="default">define</span><span class="keyword">(</span><span class="string">'EXTR_IF_EXISTS'</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br />    if( !</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'EXTR_PREFIX_IF_EXISTS'</span><span class="keyword">) ) </span><span class="default">define</span><span class="keyword">(</span><span class="string">'EXTR_PREFIX_IF_EXISTS'</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">);<br />    if( !</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'EXTR_REFS'</span><span class="keyword">) ) </span><span class="default">define</span><span class="keyword">(</span><span class="string">'EXTR_REFS'</span><span class="keyword">, </span><span class="default">256</span><span class="keyword">);<br />    <br />    <br />    function </span><span class="default">extract_to</span><span class="keyword">( &amp;</span><span class="default">$arr</span><span class="keyword">, &amp;</span><span class="default">$to</span><span class="keyword">, </span><span class="default">$type</span><span class="keyword">=</span><span class="default">EXTR_OVERWRITE</span><span class="keyword">, </span><span class="default">$prefix</span><span class="keyword">=</span><span class="default">false </span><span class="keyword">){<br />        <br />        if( !</span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$arr </span><span class="keyword">) ) return </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"extract_to(): First argument should be an array"</span><span class="keyword">, </span><span class="default">E_USER_WARNING </span><span class="keyword">);<br />        <br />        if( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$to </span><span class="keyword">) ) </span><span class="default">$t</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />        else if( </span><span class="default">is_object</span><span class="keyword">( </span><span class="default">$to </span><span class="keyword">) ) </span><span class="default">$t</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br />        else return </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"extract_to(): Second argument should be an array or object"</span><span class="keyword">, </span><span class="default">E_USER_WARNING </span><span class="keyword">);<br />        <br />        if( </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_SAME </span><span class="keyword">|| </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_ALL </span><span class="keyword">|| </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_INVALID </span><span class="keyword">|| </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_IF_EXISTS </span><span class="keyword">)<br />            if( </span><span class="default">$prefix</span><span class="keyword">===</span><span class="default">false </span><span class="keyword">) return </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"extract_to(): Prefix expected to be specified"</span><span class="keyword">, </span><span class="default">E_USER_WARNING </span><span class="keyword">); <br />            else </span><span class="default">$prefix </span><span class="keyword">.= </span><span class="string">'_'</span><span class="keyword">;<br />        <br />        </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />        foreach( </span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$val </span><span class="keyword">){<br />            <br />            </span><span class="default">$nkey </span><span class="keyword">= </span><span class="default">$key</span><span class="keyword">;<br />            </span><span class="default">$isset </span><span class="keyword">= </span><span class="default">$t</span><span class="keyword">==</span><span class="default">1 </span><span class="keyword">? isset( </span><span class="default">$to</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] ) : isset( </span><span class="default">$to</span><span class="keyword">-&gt;</span><span class="default">$key </span><span class="keyword">);<br />            <br />            if( ( </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_SKIP </span><span class="keyword">&amp;&amp; </span><span class="default">$isset </span><span class="keyword">) <br />                || ( </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_IF_EXISTS </span><span class="keyword">&amp;&amp; !</span><span class="default">$isset </span><span class="keyword">) )<br />                    continue;<br />            <br />            else if( ( </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_SAME </span><span class="keyword">&amp;&amp; </span><span class="default">$isset </span><span class="keyword">)<br />                || ( </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_ALL </span><span class="keyword">)<br />                || ( </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_INVALID </span><span class="keyword">&amp;&amp; !</span><span class="default">preg_match</span><span class="keyword">( </span><span class="string">'#^[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*$#'</span><span class="keyword">, </span><span class="default">$key </span><span class="keyword">) ) )<br />                    </span><span class="default">$nkey </span><span class="keyword">= </span><span class="default">$prefix</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">;<br />                    <br />            else if( </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_IF_EXISTS </span><span class="keyword">)<br />                if( </span><span class="default">$isset </span><span class="keyword">) </span><span class="default">$nkey </span><span class="keyword">= </span><span class="default">$prefix</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">;<br />                else continue;<br /><br />            if( !</span><span class="default">preg_match</span><span class="keyword">( </span><span class="string">'#^[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*$#'</span><span class="keyword">, </span><span class="default">$nkey </span><span class="keyword">) ) continue;<br />            <br />            if( </span><span class="default">$t</span><span class="keyword">==</span><span class="default">1 </span><span class="keyword">)<br />                if( </span><span class="default">$type </span><span class="keyword">&amp; </span><span class="default">EXTR_REFS </span><span class="keyword">) </span><span class="default">$to</span><span class="keyword">-&gt;</span><span class="default">$nkey </span><span class="keyword">= &amp;</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />                else </span><span class="default">$to</span><span class="keyword">-&gt;</span><span class="default">$nkey </span><span class="keyword">= </span><span class="default">$val</span><span class="keyword">;<br />            else <br />                if( </span><span class="default">$type </span><span class="keyword">&amp; </span><span class="default">EXTR_REFS </span><span class="keyword">) </span><span class="default">$to</span><span class="keyword">[</span><span class="default">$nkey</span><span class="keyword">] = &amp;</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />                else </span><span class="default">$to</span><span class="keyword">[</span><span class="default">$nkey</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />            <br />            </span><span class="default">$i</span><span class="keyword">++;<br />        }<br />        <br />        return </span><span class="default">$i</span><span class="keyword">;<br />    }<br />    <br />    </span><span class="comment">// e.g.:<br />    </span><span class="default">extract_to</span><span class="keyword">( </span><span class="default">$myarray</span><span class="keyword">, </span><span class="default">$myobject</span><span class="keyword">, </span><span class="default">EXTR_IF_EXISTS </span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="59152">  <div class="votes">
    <div id="Vu59152">
    <a href="https://www.php.net/manual/vote-note.php?id=59152&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd59152">
    <a href="https://www.php.net/manual/vote-note.php?id=59152&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V59152" title="62% like this...">
    4
    </div>
  </div>
  <a href="function.extract.php.html#59152" class="name">
  <strong class="user"><em>Csaba at alum dot mit dot edu</em></strong></a><a class="genanchor" href="function.extract.php.html#59152"> &para;</a><div class="date" title="2005-11-27 11:41"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom59152">
<div class="phpcode"><code><span class="html">Sometimes you may want to extract only a named subset of the key/value pairs in an array.  This keeps things more orderly and could prevent an unrelated variable from getting clobbered from an errant key.  For example,<br /><br />$things = 'unsaid';<br />$REQUEST = array(He=&gt;This, said=&gt;1, my=&gt;is, info=&gt;2, had=&gt;a,<br />                 very=&gt;3, important=&gt;test, things=&gt;4);<br />$aVarToExtract = array(my, important, info);<br />extract (array_intersect_key ($REQUEST, array_flip($aVarToExtract)));<br /><br />will extract<br />$my = 'is';<br />$important = 'test';<br />$info = 2;<br /><br />but will leave certain<br />$things = 'unsaid'<br /><br />Csaba Gabor from Vienna<br />NB.  Of course the composite request coming in from a web page is in $_REQUEST.</span></code></div>
  </div>
 </div>
  <div class="note" id="106374">  <div class="votes">
    <div id="Vu106374">
    <a href="https://www.php.net/manual/vote-note.php?id=106374&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd106374">
    <a href="https://www.php.net/manual/vote-note.php?id=106374&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V106374" title="58% like this...">
    6
    </div>
  </div>
  <a href="function.extract.php.html#106374" class="name">
  <strong class="user"><em>Robc</em></strong></a><a class="genanchor" href="function.extract.php.html#106374"> &para;</a><div class="date" title="2011-11-01 06:30"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom106374">
<div class="phpcode"><code><span class="html">When extracting from a row after a database query using for example:<br /><br />$row = mysql_fetch_array($result, MYSQL_ASSOC)<br />extract($row);<br /><br />I find that the resultant variables may not match the variable type in the database.  In particular I have found integers in the database may gettype() to string on the extracted variable.</span></code></div>
  </div>
 </div>
  <div class="note" id="112068">  <div class="votes">
    <div id="Vu112068">
    <a href="https://www.php.net/manual/vote-note.php?id=112068&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd112068">
    <a href="https://www.php.net/manual/vote-note.php?id=112068&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V112068" title="57% like this...">
    7
    </div>
  </div>
  <a href="function.extract.php.html#112068" class="name">
  <strong class="user"><em>dotslash.lu at gmail.com</em></strong></a><a class="genanchor" href="function.extract.php.html#112068"> &para;</a><div class="date" title="2013-04-29 12:55"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom112068">
<div class="phpcode"><code><span class="html">You can't extract a numeric indexed array(e.g. non-assoc array).<br /><span class="default">&lt;?php<br />$a </span><span class="keyword">= array(<br />  </span><span class="default">1</span><span class="keyword">,<br />  </span><span class="default">2<br /></span><span class="keyword">);<br /></span><span class="default">extract</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br /></span><span class="default">var_dump</span><span class="keyword">(${</span><span class="default">1</span><span class="keyword">});<br /></span><span class="default">?&gt;<br /></span><br />result:<br />PHP Notice:  Undefined variable: 1 in /Users/Lutashi/t.php on line 7<br /><br />Notice: Undefined variable: 1 in /Users/Lutashi/t.php on line 7<br />NULL</span></code></div>
  </div>
 </div>
  <div class="note" id="122850">  <div class="votes">
    <div id="Vu122850">
    <a href="https://www.php.net/manual/vote-note.php?id=122850&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122850">
    <a href="https://www.php.net/manual/vote-note.php?id=122850&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122850" title="60% like this...">
    2
    </div>
  </div>
  <a href="function.extract.php.html#122850" class="name">
  <strong class="user"><em>phatsk+php at gmail dot com</em></strong></a><a class="genanchor" href="function.extract.php.html#122850"> &para;</a><div class="date" title="2018-06-18 06:59"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom122850">
<div class="phpcode"><code><span class="html">Using extract's return parameter can lead to unintended results, particularly with EXTR_REFS:<br /><br /><span class="default">&lt;?php<br /><br />$my_data </span><span class="keyword">= [<br />    </span><span class="string">'count' </span><span class="keyword">=&gt; </span><span class="default">15</span><span class="keyword">,<br />    </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'foo'</span><span class="keyword">,<br />];<br /><br /></span><span class="default">$count </span><span class="keyword">= </span><span class="default">extract</span><span class="keyword">( </span><span class="default">$my_data</span><span class="keyword">, </span><span class="default">EXTR_REFS </span><span class="keyword">);<br /><br />echo </span><span class="default">$my_data</span><span class="keyword">[</span><span class="string">'count'</span><span class="keyword">]; </span><span class="comment">// 2, not 15.</span></span></code></div>
  </div>
 </div>
  <div class="note" id="46221">  <div class="votes">
    <div id="Vu46221">
    <a href="https://www.php.net/manual/vote-note.php?id=46221&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd46221">
    <a href="https://www.php.net/manual/vote-note.php?id=46221&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V46221" title="62% like this...">
    2
    </div>
  </div>
  <a href="function.extract.php.html#46221" class="name">
  <strong class="user"><em>Adam Monsen &lt;adamm at wazamatta dot com&gt;</em></strong></a><a class="genanchor" href="function.extract.php.html#46221"> &para;</a><div class="date" title="2004-10-02 05:03"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom46221">
<div class="phpcode"><code><span class="html">As shown in the example, if your 'prefix' is used, a single underscore is added to the name of the extracted variable. Meaning, a prefix of 'p' becomes a prefix of 'p_', so 'blarg' prefixed would be 'p_blarg'.<br /><br />If you're not sure what variables you've created through extraction, you can call get_defined_vars() to see all defined variables in the current scope.</span></code></div>
  </div>
 </div>
  <div class="note" id="122980">  <div class="votes">
    <div id="Vu122980">
    <a href="https://www.php.net/manual/vote-note.php?id=122980&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122980">
    <a href="https://www.php.net/manual/vote-note.php?id=122980&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122980" title="60% like this...">
    1
    </div>
  </div>
  <a href="function.extract.php.html#122980" class="name">
  <strong class="user"><em>amolocaleb at gmail dot com</em></strong></a><a class="genanchor" href="function.extract.php.html#122980"> &para;</a><div class="date" title="2018-07-26 05:14"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom122980">
<div class="phpcode"><code><span class="html">If an object is typecasted into an array and "extracted",only the public properties will be accessible.Methods are of course omitted.<br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">Test</span><span class="keyword">{<br />    public </span><span class="default">$name </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br /><br />    protected </span><span class="default">$age </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">;<br /><br />    public </span><span class="default">$status </span><span class="keyword">= </span><span class="string">'disabled'</span><span class="keyword">;<br /><br />    private </span><span class="default">$isTrue </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br /><br />    public function </span><span class="default">__construct</span><span class="keyword">()<br />    {<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="string">'Amolo'</span><span class="keyword">;<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">status </span><span class="keyword">= </span><span class="string">'active'</span><span class="keyword">;<br />    }<br /><br />    public function </span><span class="default">getName</span><span class="keyword">()<br />    {<br />        return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">;<br />    }<br /><br />    public function </span><span class="default">getAge</span><span class="keyword">()<br />    {<br />        return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">age</span><span class="keyword">;<br />    }<br /><br />    public function </span><span class="default">getStatus</span><span class="keyword">()<br />    {<br />        return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">status</span><span class="keyword">;<br />    }<br /><br />}<br /><br /></span><span class="default">$obj </span><span class="keyword">= (array) new </span><span class="default">Test</span><span class="keyword">();<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">);<br /></span><span class="comment">/* array(4) { ["name"]=&gt; string(5) "Amolo" ["*age"]=&gt; int(10) ["status"]=&gt; string(6) "active" ["TestisTrue"]=&gt; bool(false) } */<br /></span><span class="default">extract</span><span class="keyword">((array)new </span><span class="default">Test</span><span class="keyword">());<br />echo  </span><span class="default">$name</span><span class="keyword">; </span><span class="comment">//Amolo<br /></span><span class="keyword">echo  </span><span class="default">$status</span><span class="keyword">; </span><span class="comment">//active<br /></span><span class="keyword">echo </span><span class="default">$age</span><span class="keyword">;</span><span class="comment">//Notice: Undefined variable: age<br /></span><span class="keyword">echo </span><span class="default">$isTrue</span><span class="keyword">;</span><span class="comment">//Notice: Undefined variable: isTrue</span></span></code></div>
  </div>
 </div>
  <div class="note" id="69323">  <div class="votes">
    <div id="Vu69323">
    <a href="https://www.php.net/manual/vote-note.php?id=69323&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd69323">
    <a href="https://www.php.net/manual/vote-note.php?id=69323&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V69323" title="59% like this...">
    4
    </div>
  </div>
  <a href="function.extract.php.html#69323" class="name">
  <strong class="user"><em>ktwombley at gmail dot com</em></strong></a><a class="genanchor" href="function.extract.php.html#69323"> &para;</a><div class="date" title="2006-08-31 10:05"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom69323">
<div class="phpcode"><code><span class="html">It's really easy to open gaping security holes using extract() on $_REQUEST, $_GET, etc. You have to be really sure of what you're doing, and use the proper flags on extract() to avoid clobbering important variables.<br /><br />For instance, the submission by kake26 at gmail dot com will not only perfectly emulate register globals (that's bad), but it'll store it in a database and recall the same variables every time the script runs (essentially allowing an attacker to attack your script every time it runs via one attack). Oops!<br /><br />To fix it, you'd have to get creative with flags. Maybe you could use EXTR_PREFIX_ALL instead of EXTR_OVERWRITE, for example. Of course, you should also sanitize the form elements to ensure there's no php code in them, and also to make sure any very important variables aren't in the form data. (like the classic $is_admin = true attack)</span></code></div>
  </div>
 </div>
  <div class="note" id="50215">  <div class="votes">
    <div id="Vu50215">
    <a href="https://www.php.net/manual/vote-note.php?id=50215&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd50215">
    <a href="https://www.php.net/manual/vote-note.php?id=50215&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V50215" title="60% like this...">
    2
    </div>
  </div>
  <a href="function.extract.php.html#50215" class="name"><strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.extract.php.html#50215"> &para;</a><div class="date" title="2005-02-21 07:31"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom50215">
<div class="phpcode"><code><span class="html">To make this perfectly clear (hopefully), an underscore is always added when the string is prefixed.<br />extract(array("color" =&gt; "blue"),EXTR_PREFIX_ALL,'');// note: prefix is empty<br />is the same as<br />$color='_blue';</span></code></div>
  </div>
 </div>
  <div class="note" id="73852">  <div class="votes">
    <div id="Vu73852">
    <a href="https://www.php.net/manual/vote-note.php?id=73852&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd73852">
    <a href="https://www.php.net/manual/vote-note.php?id=73852&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V73852" title="58% like this...">
    2
    </div>
  </div>
  <a href="function.extract.php.html#73852" class="name">
  <strong class="user"><em>Dutchdavey</em></strong></a><a class="genanchor" href="function.extract.php.html#73852"> &para;</a><div class="date" title="2007-03-13 12:26"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom73852">
<div class="phpcode"><code><span class="html">I would draw your attention to the user note at the very end of this page regarding PREFIXES. The user points out that php adds a '_' to your prefixes.</span></code></div>
  </div>
 </div>
  <div class="note" id="53378">  <div class="votes">
    <div id="Vu53378">
    <a href="https://www.php.net/manual/vote-note.php?id=53378&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd53378">
    <a href="https://www.php.net/manual/vote-note.php?id=53378&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V53378" title="55% like this...">
    1
    </div>
  </div>
  <a href="function.extract.php.html#53378" class="name">
  <strong class="user"><em>anon at anon dot org</em></strong></a><a class="genanchor" href="function.extract.php.html#53378"> &para;</a><div class="date" title="2005-05-30 12:02"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom53378">
<div class="phpcode"><code><span class="html">A warning about extract() and null values.<br /><br />This might be an actual Zend2 Engine bug, but it's bad programming practice, so I'm sharing it here instead.<br /><br />I often work in envrionments where E_STRICT (which would prevent errors like this) isn't on, and I don't have access to change it. I also use a very simple template class that in a nutshell works like this:<br /><br />$t = new Template('somefile.php');<br />$t-&gt;title = $title;<br />$t-&gt;body = $body;<br />$t-&gt;display();<br /><br />display() more or less looks like this:<br /><br />function display(){<br />    extract(get_object_vars($this),EXTR_REFS);<br />    ob_start(); include $this-&gt;templateFileName;<br />    return ob_get_clean();<br />}<br /><br />If any of the assigned values are null (let's say that in this case $title wasn't initialized above) it causes the engine to do all sorts of incredibly whacky stuff like certifiably lose track of variables in an incredibly inconsistent way. I traced the problem down to the fact that it's using the EXTR_REFS flag. I assume that in PHP's internal variable storage or reference counting mechanism, that trying to extract null references makes it lose track or count of something or rather.<br /><br />In a nutshell, if you start getting wierd behavior when using extract() make sure that the array or object you are trying to get variables out of doesn't contain null keys or values!</span></code></div>
  </div>
 </div>
  <div class="note" id="126029">  <div class="votes">
    <div id="Vu126029">
    <a href="https://www.php.net/manual/vote-note.php?id=126029&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd126029">
    <a href="https://www.php.net/manual/vote-note.php?id=126029&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V126029" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.extract.php.html#126029" class="name">
  <strong class="user"><em>darrenforster99 at gmail dot com</em></strong></a><a class="genanchor" href="function.extract.php.html#126029"> &para;</a><div class="date" title="2021-04-22 07:38"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom126029">
<div class="phpcode"><code><span class="html">In response to Dan O'Donnell's note:<br /><br />"Presumably one easy way of dealing with this security issue is to use the EXTR_IF_EXISTS flag and make sure"<br /><br />Not necessarily - even using the EXTR_IF_EXISTS flag could be extremely dangerous - imagine this code running...<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">global </span><span class="default">$sql </span><span class="keyword">;<br /><br />function </span><span class="default">runSql </span><span class="keyword">()<br />{<br />  </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$conn</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="default">$sql</span><span class="keyword">);<br />  </span><span class="default">$conn</span><span class="keyword">-&gt; </span><span class="default">close</span><span class="keyword">();<br />  return </span><span class="default">$result</span><span class="keyword">;<br />}<br /><br />function </span><span class="default">extractGet </span><span class="keyword">()<br />{<br />  </span><span class="default">$name </span><span class="keyword">= </span><span class="string">'' </span><span class="keyword">;<br />  </span><span class="default">$address </span><span class="keyword">= </span><span class="string">'' </span><span class="keyword">;<br />  foreach ( </span><span class="default">$_GET </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">)<br />    </span><span class="default">$_GET</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">urldecode </span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">) ;<br />  </span><span class="default">extract</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">,</span><span class="default">EXTR_IF_EXISTS</span><span class="keyword">);<br />  </span><span class="default">$sql </span><span class="keyword">= </span><span class="default">str_replace </span><span class="keyword">( </span><span class="string">'{NAME}'</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">, </span><span class="default">$sql </span><span class="keyword">) ;<br />  </span><span class="default">$sql </span><span class="keyword">= </span><span class="default">str_replace </span><span class="keyword">( </span><span class="string">'{ADDRESS}'</span><span class="keyword">, </span><span class="default">$address</span><span class="keyword">, </span><span class="default">$sql </span><span class="keyword">) ;<br />}<br /><br />function </span><span class="default">outputResult </span><span class="keyword">( </span><span class="default">$res </span><span class="keyword">)<br />{<br />  echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">.</span><span class="default">print_r </span><span class="keyword">( </span><span class="default">$res</span><span class="keyword">-&gt;</span><span class="default">fetch_array</span><span class="keyword">(</span><span class="default">MYSQLI_NUM</span><span class="keyword">) ).</span><span class="string">'&lt;/pre&gt;' </span><span class="keyword">;<br />}<br /><br /></span><span class="default">$sql </span><span class="keyword">= </span><span class="string">'SELECT postcode FROM Customers WHERE name={NAME} AND address={ADDRESS}'</span><span class="keyword">;<br /></span><span class="default">extractGet </span><span class="keyword">() ;<br /></span><span class="default">$res </span><span class="keyword">= </span><span class="default">runSql </span><span class="keyword">() ;<br /></span><span class="default">outputResult </span><span class="keyword">( </span><span class="default">$res </span><span class="keyword">) ;<br /></span><span class="default">?&gt;<br /></span><br />Now can you see a massive security issue here...<br /><br />seems all well and good if we had a url like <br /><br />mycode.php?name=joe%20bloggs&amp;address=20%20Any%20Street<br /><br />as that would specifically find joe bloggs of 20 any street.<br /><br />however what if someone typed in<br /><br />mycode.php?sql=SELECT%20password%20FROM%20Customers<br /><br />or even worse<br /><br />mycode.php?sql=DELETE%20from%20Customers<br /><br />The problem here is that even though as far as you're aware you defined both name and address as the only two empty variables within that function - you may have forgotten about global variables, and these global variables could cause major security issues<br /><br />In the example above $sql is defined as "SELECT postcode FROM Customers WHERE name={NAME} AND address={ADDRESS}" which seems all well and good, and safe, and then later on str_replace in the extractGet function replaces {NAME} and {ADDRESS} with the name and address variables from $_GET - but if GET contains an SQL variable then that would overwrite the global $sql variable before the str_replace function - and if the str_replace function finds no matches it just returns the original string - in the above two examples the SQL string would be "SELECT password FROM Customers" which in the example outputResult just prints the data retrieved from the database and so in this stage it could print all the customers passwords (hopefully encrypted!) to the screen (oops!) or in the second example the SQL string would be "DELETE from Customers" - with no WHERE clause that would delete all the data from the Customers table and of course a combination of<br /><br />SELECT table_name FROM information_schema.tables<br /><br />and<br /><br />DROP TABLE &lt;table_name&gt;<br /><br />could be a real disaster!<br /><br />Of course, this is only a basic example, but it could be quite easy to forget about global variables and these global variables could quite easily be used with extract to cause serious security risks if GET, REQUEST or POST is sent to extract!</span></code></div>
  </div>
 </div>
  <div class="note" id="96370">  <div class="votes">
    <div id="Vu96370">
    <a href="https://www.php.net/manual/vote-note.php?id=96370&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd96370">
    <a href="https://www.php.net/manual/vote-note.php?id=96370&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V96370" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.extract.php.html#96370" class="name">
  <strong class="user"><em>auto493097 at hushmail dot com</em></strong></a><a class="genanchor" href="function.extract.php.html#96370"> &para;</a><div class="date" title="2010-02-23 10:07"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom96370">
<div class="phpcode"><code><span class="html">I use XDebug with NetbeansIDE to for analyzing and developing PHP Code. When debugging an extract statement no new variables appeared in the variable's list. Although all variables created by extract could be examined by explicit watch items and single variables appeared as soon as an PHP script makes use of them I am not sure weather it is a wrong configuration, a feature or a bug in XDebug.</span></code></div>
  </div>
 </div>
  <div class="note" id="47481">  <div class="votes">
    <div id="Vu47481">
    <a href="https://www.php.net/manual/vote-note.php?id=47481&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd47481">
    <a href="https://www.php.net/manual/vote-note.php?id=47481&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V47481" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.extract.php.html#47481" class="name">
  <strong class="user"><em>Aaron Stone</em></strong></a><a class="genanchor" href="function.extract.php.html#47481"> &para;</a><div class="date" title="2004-11-17 10:44"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom47481">
<div class="phpcode"><code><span class="html">If you are working porting an older application, and taking the advice above, extracting only _SERVER, _SESSING, _COOKIE, _POST, _GET, you have forgotten to extract _FILES. Putting _FILES last and using EXTR_SKIP doesn't work because the name of the file upload box is already set as a variable containing only the temporary name of the uploaded file from one of the earlier extracts (I haven't tested to see which one specifically, however). A workaround is to put _FILES last and use EXTR_OVERWRITE. This allows extract to replace that temp-name-only variable with the full array of file upload information.</span></code></div>
  </div>
 </div>
  <div class="note" id="50955">  <div class="votes">
    <div id="Vu50955">
    <a href="https://www.php.net/manual/vote-note.php?id=50955&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd50955">
    <a href="https://www.php.net/manual/vote-note.php?id=50955&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V50955" title="42% like this...">
    -2
    </div>
  </div>
  <a href="function.extract.php.html#50955" class="name">
  <strong class="user"><em>pg dot perfection at gmail dot com</em></strong></a><a class="genanchor" href="function.extract.php.html#50955"> &para;</a><div class="date" title="2005-03-14 02:33"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom50955">
<div class="phpcode"><code><span class="html">Here is a little example of how an extraction method should look like when it needs to work recursive (work on nested_arrays too)...<br /><br />Note that this is only an example, it can be done more easily, and more advanced too.<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">/**<br /> * A nested version of the extract () function.<br /> *<br /> * @param    array    $array        The array which to extract the variables from<br /> * @param    int        $type        The type to use to overwrite (follows the same as extract () on PHP 5.0.3<br /> * @param    string    $prefix        The prefix to be used for a variable when necessary<br /> */<br /></span><span class="keyword">function </span><span class="default">extract_nested </span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$type </span><span class="keyword">= </span><span class="default">EXTR_OVERWRITE</span><span class="keyword">, </span><span class="default">$prefix </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">)<br />{<br />    </span><span class="comment">/**<br />     *  Is the array really an array?<br />     */<br />    </span><span class="keyword">if (!</span><span class="default">is_array </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">))<br />    {<br />        return </span><span class="default">trigger_error </span><span class="keyword">(</span><span class="string">'extract_nested (): First argument should be an array'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />    }<br /><br />    </span><span class="comment">/**<br />     *  If the prefix is set, check if the prefix matches an acceptable regex pattern <br />     * (the one used for variables)<br />     */<br />    </span><span class="keyword">if (!empty (</span><span class="default">$prefix</span><span class="keyword">) &amp;&amp; !</span><span class="default">preg_match </span><span class="keyword">(</span><span class="string">'#^[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*$#'</span><span class="keyword">, </span><span class="default">$prefix</span><span class="keyword">))<br />    {<br />        return </span><span class="default">trigger_error </span><span class="keyword">(</span><span class="string">'extract_nested (): Third argument should start with a letter or an underscore'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />    }<br /><br />    </span><span class="comment">/**<br />     * Check if a prefix is necessary. If so and it is empty return an error.<br />     */<br />    </span><span class="keyword">if ((</span><span class="default">$type </span><span class="keyword">== </span><span class="default">EXTR_PREFIX_SAME </span><span class="keyword">|| </span><span class="default">$type </span><span class="keyword">== </span><span class="default">EXTR_PREFIX_ALL </span><span class="keyword">|| </span><span class="default">$type </span><span class="keyword">== </span><span class="default">EXTR_PREFIX_IF_EXISTS</span><span class="keyword">) &amp;&amp; empty (</span><span class="default">$prefix</span><span class="keyword">))<br />    {<br />        return </span><span class="default">trigger_error </span><span class="keyword">(</span><span class="string">'extract_nested (): Prefix expected to be specified'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />    }<br /><br />    </span><span class="comment">/**<br />     * Make sure the prefix is oke<br />     */<br />    </span><span class="default">$prefix </span><span class="keyword">= </span><span class="default">$prefix </span><span class="keyword">. </span><span class="string">'_'</span><span class="keyword">;<br /><br />    </span><span class="comment">/**<br />     *  Loop thru the array<br />     */<br />    </span><span class="keyword">foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />    {<br />        </span><span class="comment">/**<br />         *  If the key isn't an array extract it as we need to do<br />         */<br />        </span><span class="keyword">if (!</span><span class="default">is_array </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br />        {<br />            switch (</span><span class="default">$type</span><span class="keyword">)<br />            {<br />                default:<br />                case </span><span class="default">EXTR_OVERWRITE</span><span class="keyword">:<br />                    </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />                break;<br />                case </span><span class="default">EXTR_SKIP</span><span class="keyword">:<br />                    </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = isset (</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) ? </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] : </span><span class="default">$val</span><span class="keyword">;<br />                break;<br />                case </span><span class="default">EXTR_PREFIX_SAME</span><span class="keyword">:<br />                    if (isset (</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br />                    {<br />                        </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$prefix </span><span class="keyword">. </span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />                    }<br />                    else<br />                    {<br />                        </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />                    }<br />                break;<br />                case </span><span class="default">EXTR_PREFIX_ALL</span><span class="keyword">:<br />                    </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$prefix </span><span class="keyword">. </span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />                break;<br />                case </span><span class="default">EXTR_PREFIX_INVALID</span><span class="keyword">:<br />                    if (!</span><span class="default">preg_match </span><span class="keyword">(</span><span class="string">'#^[a-zA-Z_\x7f-\xff]$#'</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">}))<br />                    {<br />                        </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$prefix </span><span class="keyword">. </span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />                    }<br />                    else<br />                    {<br />                        </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />                    }<br />                break;<br />                case </span><span class="default">EXTR_IF_EXISTS</span><span class="keyword">:<br />                    if (isset (</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br />                    {<br />                        </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />                    }<br />                break;<br />                case </span><span class="default">EXTR_PREFIX_IF_EXISTS</span><span class="keyword">:<br />                    if (isset (</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br />                    {<br />                        </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$prefix </span><span class="keyword">. </span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />                    }<br />                break;<br />                case </span><span class="default">EXTR_REFS</span><span class="keyword">:<br />                    </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] =&amp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />                break;<br />            }<br />        }<br />        </span><span class="comment">/**<br />         *  The key is an array... use the function on that index<br />         */<br />        </span><span class="keyword">else<br />        {<br />            </span><span class="default">extract_nested </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$type</span><span class="keyword">, </span><span class="default">$prefix</span><span class="keyword">);<br />        }<br />    }<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="93113">  <div class="votes">
    <div id="Vu93113">
    <a href="https://www.php.net/manual/vote-note.php?id=93113&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd93113">
    <a href="https://www.php.net/manual/vote-note.php?id=93113&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V93113" title="37% like this...">
    -4
    </div>
  </div>
  <a href="function.extract.php.html#93113" class="name">
  <strong class="user"><em>danbettles at yahoo dot co dot uk</em></strong></a><a class="genanchor" href="function.extract.php.html#93113"> &para;</a><div class="date" title="2009-08-24 04:04"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom93113">
<div class="phpcode"><code><span class="html">When using EXTR_PREFIX_ALL - and probably all the other EXTR_PREFIX_* constants - and a numerically-indexed array, extract() will add an underscore ("_") between the prefix and the index.<br /><br /><span class="default">&lt;?php<br /><br />extract</span><span class="keyword">(array(</span><span class="string">'foo'</span><span class="keyword">, </span><span class="string">'bar'</span><span class="keyword">), </span><span class="default">EXTR_PREFIX_ALL</span><span class="keyword">, </span><span class="string">'var'</span><span class="keyword">);<br /><br /></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">get_defined_vars</span><span class="keyword">());  </span><span class="comment">// Reveals $var_0 = 'foo' and $var_1 = 'bar'<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="60946">  <div class="votes">
    <div id="Vu60946">
    <a href="https://www.php.net/manual/vote-note.php?id=60946&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd60946">
    <a href="https://www.php.net/manual/vote-note.php?id=60946&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V60946" title="33% like this...">
    -6
    </div>
  </div>
  <a href="function.extract.php.html#60946" class="name">
  <strong class="user"><em>moslehi&lt;atsign&gt;gmail&lt;d0t&gt;c0m</em></strong></a><a class="genanchor" href="function.extract.php.html#60946"> &para;</a><div class="date" title="2006-01-20 01:32"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom60946">
<div class="phpcode"><code><span class="html">Experimentally I found that calling extract() also shows the number of keys if the key is set and is not numeric ! Maybe there was a better definition than mine  . Please have a look to this scripts :<br /><br /><span class="default">&lt;?PHP <br />$var</span><span class="keyword">[</span><span class="string">"i"</span><span class="keyword">] = </span><span class="string">"a"</span><span class="keyword">;<br /></span><span class="default">$var</span><span class="keyword">[</span><span class="string">"j"</span><span class="keyword">] = </span><span class="string">"b"</span><span class="keyword">;<br /></span><span class="default">$var</span><span class="keyword">[</span><span class="string">"k"</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br />echo </span><span class="default">extract</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">); </span><span class="comment">// returns 3<br /></span><span class="default">?&gt;<br /></span><br /><span class="default">&lt;?PHP <br />$var2</span><span class="keyword">[</span><span class="string">"i"</span><span class="keyword">] = </span><span class="string">"a"</span><span class="keyword">;<br /></span><span class="default">$var2</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = </span><span class="string">"b"</span><span class="keyword">;<br /></span><span class="default">$var2</span><span class="keyword">[] = </span><span class="default">1</span><span class="keyword">;<br />echo </span><span class="default">extract</span><span class="keyword">(</span><span class="default">$var2</span><span class="keyword">); </span><span class="comment">// returns 1<br /></span><span class="default">?&gt;<br /></span><br />(Arash Moslehi)</span></code></div>
  </div>
 </div>
  <div class="note" id="81862">  <div class="votes">
    <div id="Vu81862">
    <a href="https://www.php.net/manual/vote-note.php?id=81862&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd81862">
    <a href="https://www.php.net/manual/vote-note.php?id=81862&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V81862" title="31% like this...">
    -6
    </div>
  </div>
  <a href="function.extract.php.html#81862" class="name">
  <strong class="user"><em>benjaminATwebbutvecklarnaDOTse</em></strong></a><a class="genanchor" href="function.extract.php.html#81862"> &para;</a><div class="date" title="2008-03-16 07:15"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom81862">
<div class="phpcode"><code><span class="html">In the meantime, I'm using this:<br /><br />// extract alternative<br /># extracts variables where new value is above the threshold or if old value is on or below the threshold (or var is not defined)<br /># an associative array is obviously the sane thing to pass<br />#<br /># I am absolutely certain someone will find obvious problems or errors with this <br /># I haven't even tried to compare other values than 0 so if you need to do that and surely finds obvious flaws, <br /># please mail me, I'd really like to know. <br /># benjaminATwebbutvecklarnaDOTse<br /><br />// usage example:<br /># thrextract(mysql_fetch_assoc(mysql_query("SELECT preset_this,preset_that FROM site_preset WHERE ID = $site_id")));<br /># thrextract(mysql_fetch_assoc(mysql_query("SELECT preset_this,preset_that FROM category_preset WHERE ID = $category_id"))); <br /><br />function thrextract($arr,$thr = 0){<br />    foreach($arr as $key =&gt; $var){<br />        global $$key;<br />        if($var &gt; $thr or $$key &lt;= $thr) $$key = $var;<br />    }<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="52436">  <div class="votes">
    <div id="Vu52436">
    <a href="https://www.php.net/manual/vote-note.php?id=52436&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd52436">
    <a href="https://www.php.net/manual/vote-note.php?id=52436&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V52436" title="24% like this...">
    -15
    </div>
  </div>
  <a href="function.extract.php.html#52436" class="name">
  <strong class="user"><em>kake26 at gmail dot com</em></strong></a><a class="genanchor" href="function.extract.php.html#52436"> &para;</a><div class="date" title="2005-04-30 08:59"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom52436">
<div class="phpcode"><code><span class="html">The following is a neat use for extract to store and manipulate large amounts of form data from. I basically loop through the $_POST and implode it seperating the key and value pairs by a space. Then store it in a db, the reversing function basically explodes the string to a array. Then converts the indexed array to a associative array then uses extract to seal the deal and make it easily available within a program. My main reason for sharing these are the fact I make some big web applications that store allot of forum data in a DB and these functions make it very easy to quickly and easily store and recall the data. I've contributed it because I spent many hours creating this code and recall going "I wish someone had previously submitted it to the page notes". Would have saved me allot of time and agony and I'm sure I'm not the only person that could really benefit from it, so I decided to share.<br /><br /><span class="default">&lt;?php<br />$stack </span><span class="keyword">= array();<br />foreach (</span><span class="default">$_POST </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br /></span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$stack</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />}<br /></span><span class="comment">// store it<br /></span><span class="default">$block </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$stack</span><span class="keyword">); </span><span class="comment">// yeilds a space delimited string<br />// insert query to store string in DB here, like the one below<br /></span><span class="default">$query </span><span class="keyword">= </span><span class="string">"INSERT INTO `sometable` VALUES('"</span><span class="keyword">.</span><span class="default">$seluser</span><span class="keyword">.</span><span class="string">"','"</span><span class="keyword">.</span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">$block</span><span class="keyword">).</span><span class="string">"');"</span><span class="keyword">;<br /></span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">) or die(</span><span class="string">"Query failed for block insert: " </span><span class="keyword">. </span><span class="default">mysql_error</span><span class="keyword">());<br /></span><span class="comment">// note $seluser in my case is a user ID associated with that block<br />// in one of my web apps<br /></span><span class="default">?&gt;<br /></span><br />The nice thing is with the above we can quickly create a string of key and value pairs from the data the script got. Without really caring what their names are. You know how if register globals are on you say $someformvar rather than $_POST["someformvar"]; , basically the code below reads this previous created block returns it to that state. Sort of like presistant register globals.<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">// insert query to grab the previously stored string here<br /></span><span class="default">$query </span><span class="keyword">= </span><span class="string">"SELECT * FROM `sometable` WHERE `blockid` = '"</span><span class="keyword">.</span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">$bid</span><span class="keyword">).</span><span class="string">"';"</span><span class="keyword">;<br /></span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">) or die(</span><span class="string">"Query failed read: " </span><span class="keyword">. </span><span class="default">mysql_error</span><span class="keyword">());<br /></span><span class="default">$sql </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">MYSQL_ASSOC</span><span class="keyword">);<br /></span><span class="default">$array </span><span class="keyword">= </span><span class="default">eplode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$sql</span><span class="keyword">[</span><span class="string">"data"</span><span class="keyword">]); <br />for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">+=</span><span class="default">2</span><span class="keyword">) { <br /></span><span class="default">$myassoc</span><span class="keyword">[</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]] = isset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">])?</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">]:</span><span class="default">NULL</span><span class="keyword">; <br />}<br /></span><span class="default">extract</span><span class="keyword">(</span><span class="default">$myassoc</span><span class="keyword">, </span><span class="default">EXTR_OVERWRITE</span><span class="keyword">);<br /></span><span class="comment">// now you're key and value pairs from $_POST have been restored<br />// instead of $_POST<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="98446">  <div class="votes">
    <div id="Vu98446">
    <a href="https://www.php.net/manual/vote-note.php?id=98446&amp;page=function.extract&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd98446">
    <a href="https://www.php.net/manual/vote-note.php?id=98446&amp;page=function.extract&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V98446" title="12% like this...">
    -23
    </div>
  </div>
  <a href="function.extract.php.html#98446" class="name">
  <strong class="user"><em>Rodrigo</em></strong></a><a class="genanchor" href="function.extract.php.html#98446"> &para;</a><div class="date" title="2010-06-15 09:41"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom98446">
<div class="phpcode"><code><span class="html">Here's a way to use extract in $_FILES arrays without using register_gloabals on.<br /><br />I started to use extract a few weeks ago, and my codes hasn't been so clean since then. The use of the arrays $_POST and $_GET is ok, but one missed doublequote causes a lot of trouble. <br /><br />Besides I teach PHP in a school, and this function has made my examples easier.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">if(isset(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"file"</span><span class="keyword">])){<br />    </span><span class="default">extract</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">);<br />    </span><span class="default">extract</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br />    echo </span><span class="default">$name</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />    echo </span><span class="default">$tmp_name</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />    echo </span><span class="default">$size</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "<a href="http://www.w3.org/TR/html4/loose.dtd" rel="nofollow" target="_blank">http://www.w3.org/TR/html4/loose.dtd</a>"&gt;<br />&lt;html&gt;<br />&lt;head&gt;<br />&lt;title&gt;Documento sin t&amp;iacute;tulo&lt;/title&gt;<br />&lt;meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"&gt;<br />&lt;/head&gt;<br /><br />&lt;body&gt;<br />&lt;form action="" method="post" enctype="multipart/form-data" name="form1"&gt;<br />  &lt;p&gt;<br />    &lt;input type="file" name="file"&gt;<br />&lt;/p&gt;<br />  &lt;p&gt;<br />    &lt;input type="submit" name="Submit" value="Enviar"&gt;<br />&lt;/p&gt;<br />&lt;/form&gt;<br />&lt;/body&gt;<br />&lt;/html&gt;<br /><br />Hope this can help anyone.</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.extract&amp;redirect=https://www.php.net/manual/ru/function.extract.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.array.php.html">Функции для работы с массивами</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.array-change-key-case.php.html" title="array_&#8203;change_&#8203;key_&#8203;case">array_&#8203;change_&#8203;key_&#8203;case</a>
                        </li>
                                                <li class="">
                            <a href="function.array-chunk.php.html" title="array_&#8203;chunk">array_&#8203;chunk</a>
                        </li>
                                                <li class="">
                            <a href="function.array-column.php.html" title="array_&#8203;column">array_&#8203;column</a>
                        </li>
                                                <li class="">
                            <a href="function.array-combine.php.html" title="array_&#8203;combine">array_&#8203;combine</a>
                        </li>
                                                <li class="">
                            <a href="function.array-count-values.php.html" title="array_&#8203;count_&#8203;values">array_&#8203;count_&#8203;values</a>
                        </li>
                                                <li class="">
                            <a href="function.array-diff-assoc.php.html" title="array_&#8203;diff_&#8203;assoc">array_&#8203;diff_&#8203;assoc</a>
                        </li>
                                                <li class="">
                            <a href="function.array-diff-key.php.html" title="array_&#8203;diff_&#8203;key">array_&#8203;diff_&#8203;key</a>
                        </li>
                                                <li class="">
                            <a href="function.array-diff-uassoc.php.html" title="array_&#8203;diff_&#8203;uassoc">array_&#8203;diff_&#8203;uassoc</a>
                        </li>
                                                <li class="">
                            <a href="function.array-diff-ukey.php.html" title="array_&#8203;diff_&#8203;ukey">array_&#8203;diff_&#8203;ukey</a>
                        </li>
                                                <li class="">
                            <a href="function.array-diff.php.html" title="array_&#8203;diff">array_&#8203;diff</a>
                        </li>
                                                <li class="">
                            <a href="function.array-fill-keys.php.html" title="array_&#8203;fill_&#8203;keys">array_&#8203;fill_&#8203;keys</a>
                        </li>
                                                <li class="">
                            <a href="function.array-fill.php.html" title="array_&#8203;fill">array_&#8203;fill</a>
                        </li>
                                                <li class="">
                            <a href="function.array-filter.php.html" title="array_&#8203;filter">array_&#8203;filter</a>
                        </li>
                                                <li class="">
                            <a href="function.array-flip.php.html" title="array_&#8203;flip">array_&#8203;flip</a>
                        </li>
                                                <li class="">
                            <a href="function.array-intersect-assoc.php.html" title="array_&#8203;intersect_&#8203;assoc">array_&#8203;intersect_&#8203;assoc</a>
                        </li>
                                                <li class="">
                            <a href="function.array-intersect-key.php.html" title="array_&#8203;intersect_&#8203;key">array_&#8203;intersect_&#8203;key</a>
                        </li>
                                                <li class="">
                            <a href="function.array-intersect-uassoc.php.html" title="array_&#8203;intersect_&#8203;uassoc">array_&#8203;intersect_&#8203;uassoc</a>
                        </li>
                                                <li class="">
                            <a href="function.array-intersect-ukey.php.html" title="array_&#8203;intersect_&#8203;ukey">array_&#8203;intersect_&#8203;ukey</a>
                        </li>
                                                <li class="">
                            <a href="function.array-intersect.php.html" title="array_&#8203;intersect">array_&#8203;intersect</a>
                        </li>
                                                <li class="">
                            <a href="function.array-is-list.php.html" title="array_&#8203;is_&#8203;list">array_&#8203;is_&#8203;list</a>
                        </li>
                                                <li class="">
                            <a href="function.array-key-exists.php.html" title="array_&#8203;key_&#8203;exists">array_&#8203;key_&#8203;exists</a>
                        </li>
                                                <li class="">
                            <a href="function.array-key-first.php.html" title="array_&#8203;key_&#8203;first">array_&#8203;key_&#8203;first</a>
                        </li>
                                                <li class="">
                            <a href="function.array-key-last.php.html" title="array_&#8203;key_&#8203;last">array_&#8203;key_&#8203;last</a>
                        </li>
                                                <li class="">
                            <a href="function.array-keys.php.html" title="array_&#8203;keys">array_&#8203;keys</a>
                        </li>
                                                <li class="">
                            <a href="function.array-map.php.html" title="array_&#8203;map">array_&#8203;map</a>
                        </li>
                                                <li class="">
                            <a href="function.array-merge-recursive.php.html" title="array_&#8203;merge_&#8203;recursive">array_&#8203;merge_&#8203;recursive</a>
                        </li>
                                                <li class="">
                            <a href="function.array-merge.php.html" title="array_&#8203;merge">array_&#8203;merge</a>
                        </li>
                                                <li class="">
                            <a href="function.array-multisort.php.html" title="array_&#8203;multisort">array_&#8203;multisort</a>
                        </li>
                                                <li class="">
                            <a href="function.array-pad.php.html" title="array_&#8203;pad">array_&#8203;pad</a>
                        </li>
                                                <li class="">
                            <a href="function.array-pop.php.html" title="array_&#8203;pop">array_&#8203;pop</a>
                        </li>
                                                <li class="">
                            <a href="function.array-product.php.html" title="array_&#8203;product">array_&#8203;product</a>
                        </li>
                                                <li class="">
                            <a href="function.array-push.php.html" title="array_&#8203;push">array_&#8203;push</a>
                        </li>
                                                <li class="">
                            <a href="function.array-rand.php.html" title="array_&#8203;rand">array_&#8203;rand</a>
                        </li>
                                                <li class="">
                            <a href="function.array-reduce.php.html" title="array_&#8203;reduce">array_&#8203;reduce</a>
                        </li>
                                                <li class="">
                            <a href="function.array-replace-recursive.php.html" title="array_&#8203;replace_&#8203;recursive">array_&#8203;replace_&#8203;recursive</a>
                        </li>
                                                <li class="">
                            <a href="function.array-replace.php.html" title="array_&#8203;replace">array_&#8203;replace</a>
                        </li>
                                                <li class="">
                            <a href="function.array-reverse.php.html" title="array_&#8203;reverse">array_&#8203;reverse</a>
                        </li>
                                                <li class="">
                            <a href="function.array-search.php.html" title="array_&#8203;search">array_&#8203;search</a>
                        </li>
                                                <li class="">
                            <a href="function.array-shift.php.html" title="array_&#8203;shift">array_&#8203;shift</a>
                        </li>
                                                <li class="">
                            <a href="function.array-slice.php.html" title="array_&#8203;slice">array_&#8203;slice</a>
                        </li>
                                                <li class="">
                            <a href="function.array-splice.php.html" title="array_&#8203;splice">array_&#8203;splice</a>
                        </li>
                                                <li class="">
                            <a href="function.array-sum.php.html" title="array_&#8203;sum">array_&#8203;sum</a>
                        </li>
                                                <li class="">
                            <a href="function.array-udiff-assoc.php.html" title="array_&#8203;udiff_&#8203;assoc">array_&#8203;udiff_&#8203;assoc</a>
                        </li>
                                                <li class="">
                            <a href="function.array-udiff-uassoc.php.html" title="array_&#8203;udiff_&#8203;uassoc">array_&#8203;udiff_&#8203;uassoc</a>
                        </li>
                                                <li class="">
                            <a href="function.array-udiff.php.html" title="array_&#8203;udiff">array_&#8203;udiff</a>
                        </li>
                                                <li class="">
                            <a href="function.array-uintersect-assoc.php.html" title="array_&#8203;uintersect_&#8203;assoc">array_&#8203;uintersect_&#8203;assoc</a>
                        </li>
                                                <li class="">
                            <a href="function.array-uintersect-uassoc.php.html" title="array_&#8203;uintersect_&#8203;uassoc">array_&#8203;uintersect_&#8203;uassoc</a>
                        </li>
                                                <li class="">
                            <a href="function.array-uintersect.php.html" title="array_&#8203;uintersect">array_&#8203;uintersect</a>
                        </li>
                                                <li class="">
                            <a href="function.array-unique.php.html" title="array_&#8203;unique">array_&#8203;unique</a>
                        </li>
                                                <li class="">
                            <a href="function.array-unshift.php.html" title="array_&#8203;unshift">array_&#8203;unshift</a>
                        </li>
                                                <li class="">
                            <a href="function.array-values.php.html" title="array_&#8203;values">array_&#8203;values</a>
                        </li>
                                                <li class="">
                            <a href="function.array-walk-recursive.php.html" title="array_&#8203;walk_&#8203;recursive">array_&#8203;walk_&#8203;recursive</a>
                        </li>
                                                <li class="">
                            <a href="function.array-walk.php.html" title="array_&#8203;walk">array_&#8203;walk</a>
                        </li>
                                                <li class="">
                            <a href="function.array.php.html" title="array">array</a>
                        </li>
                                                <li class="">
                            <a href="function.arsort.php.html" title="arsort">arsort</a>
                        </li>
                                                <li class="">
                            <a href="function.asort.php.html" title="asort">asort</a>
                        </li>
                                                <li class="">
                            <a href="function.compact.php.html" title="compact">compact</a>
                        </li>
                                                <li class="">
                            <a href="function.count.php.html" title="count">count</a>
                        </li>
                                                <li class="">
                            <a href="function.current.php.html" title="current">current</a>
                        </li>
                                                <li class="">
                            <a href="function.end.php.html" title="end">end</a>
                        </li>
                                                <li class="current">
                            <a href="function.extract.php.html" title="extract">extract</a>
                        </li>
                                                <li class="">
                            <a href="function.in-array.php.html" title="in_&#8203;array">in_&#8203;array</a>
                        </li>
                                                <li class="">
                            <a href="function.key-exists.php.html" title="key_&#8203;exists">key_&#8203;exists</a>
                        </li>
                                                <li class="">
                            <a href="function.key.php.html" title="key">key</a>
                        </li>
                                                <li class="">
                            <a href="function.krsort.php.html" title="krsort">krsort</a>
                        </li>
                                                <li class="">
                            <a href="function.ksort.php.html" title="ksort">ksort</a>
                        </li>
                                                <li class="">
                            <a href="function.list.php.html" title="list">list</a>
                        </li>
                                                <li class="">
                            <a href="function.natcasesort.php.html" title="natcasesort">natcasesort</a>
                        </li>
                                                <li class="">
                            <a href="function.natsort.php.html" title="natsort">natsort</a>
                        </li>
                                                <li class="">
                            <a href="function.next.php.html" title="next">next</a>
                        </li>
                                                <li class="">
                            <a href="function.pos.php.html" title="pos">pos</a>
                        </li>
                                                <li class="">
                            <a href="function.prev.php.html" title="prev">prev</a>
                        </li>
                                                <li class="">
                            <a href="function.range.php.html" title="range">range</a>
                        </li>
                                                <li class="">
                            <a href="function.reset.php.html" title="reset">reset</a>
                        </li>
                                                <li class="">
                            <a href="function.rsort.php.html" title="rsort">rsort</a>
                        </li>
                                                <li class="">
                            <a href="function.shuffle.php.html" title="shuffle">shuffle</a>
                        </li>
                                                <li class="">
                            <a href="function.sizeof.php.html" title="sizeof">sizeof</a>
                        </li>
                                                <li class="">
                            <a href="function.sort.php.html" title="sort">sort</a>
                        </li>
                                                <li class="">
                            <a href="function.uasort.php.html" title="uasort">uasort</a>
                        </li>
                                                <li class="">
                            <a href="function.uksort.php.html" title="uksort">uksort</a>
                        </li>
                                                <li class="">
                            <a href="function.usort.php.html" title="usort">usort</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                        <li>
                <span class="header">Deprecated</span>
                <ul class="child-menu-list">
                                    <li class="">
                        <a href="function.each.php.html" title="each">each</a>
                    </li>
                                </ul>
            </li>
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
