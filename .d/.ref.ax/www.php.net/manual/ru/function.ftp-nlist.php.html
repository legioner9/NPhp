<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: ftp_nlist - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.ftp-nlist.php.html">
 <link rel="shorturl" href="https://www.php.net/ftp-nlist">
 <link rel="alternate" href="https://www.php.net/ftp-nlist" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.ftp.php.html">
 <link rel="prev" href="function.ftp-nb-put.php.html">
 <link rel="next" href="function.ftp-pasv.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.ftp-nlist.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.ftp-nlist.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.ftp-nlist.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.ftp-nlist.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.ftp-nlist.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.ftp-nlist.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.ftp-nlist.php" hreflang="pt_BR">
 <link rel="alternate" href="function.ftp-nlist.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.ftp-nlist.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.ftp-nlist.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.ftp-pasv.php.html">
          ftp_pasv &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.ftp-nb-put.php.html">
          &laquo; ftp_nb_put        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.remote.other.php.html'>Другие службы</a></li>      <li><a href='book.ftp.php.html'>FTP</a></li>      <li><a href='ref.ftp.php.html'>Функции FTP</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.ftp-nlist.php'>English</option>
            <option value='de/function.ftp-nlist.php'>German</option>
            <option value='es/function.ftp-nlist.php'>Spanish</option>
            <option value='fr/function.ftp-nlist.php'>French</option>
            <option value='it/function.ftp-nlist.php'>Italian</option>
            <option value='ja/function.ftp-nlist.php'>Japanese</option>
            <option value='pt_BR/function.ftp-nlist.php'>Brazilian Portuguese</option>
            <option value='ru/function.ftp-nlist.php' selected="selected">Russian</option>
            <option value='tr/function.ftp-nlist.php'>Turkish</option>
            <option value='zh/function.ftp-nlist.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/ftp/functions/ftp-nlist.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.ftp-nlist%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.ftp-nlist" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ftp_nlist</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">ftp_nlist</span> &mdash; <span class="dc-title">Возвращает список файлов в заданной директории</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.ftp-nlist-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>ftp_nlist</strong></span>(<span class="methodparam"><span class="type"><a href="class.ftp-connection.php.html" class="type FTP\Connection">FTP\Connection</a></span> <code class="parameter">$ftp</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$directory</code></span>): <span class="type"><span class="type">array</span>|<span class="type"><span class="type false">false</span></span></span></div>

 </div>

 <div class="refsect1 parameters" id="refsect1-function.ftp-nlist-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">ftp</code></dt>

     <dd>

       <p class="para">An <span class="classname"><a href="class.ftp-connection.php.html" class="classname">FTP\Connection</a></span> instance.</p>
     </dd>

    
    
     <dt>
<code class="parameter">directory</code></dt>

     <dd>

      <p class="para">
       Имя директории для получения списка файлов. Этот параметр также может
       включать аргументы, например <code class="literal">ftp_nlist($conn_id, &quot;-la /your/dir&quot;);</code>.
       Обратите внимание, что этот параметр не проходит экранирование
       спецсимволов, так что могут возникнуть проблемы с именами,
       содержащими пробелы и прочие подобные символы.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.ftp-nlist-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает массив имён файлов в директории или <strong><code>false</code></strong> при возникновении
   ошибки.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.ftp-nlist-changelog">
  <h3 class="title">Список изменений</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Версия</th>
      <th>Описание</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
 <td>8.1.0</td>
 <td>
  Параметр <code class="parameter">ftp</code> теперь ожидает экземпляр <span class="classname"><a href="class.ftp-connection.php.html" class="classname">FTP\Connection</a></span>;
  ранее ожидался ресурс (<a href="language.types.resource.php.html" class="link">resource</a>).
 </td>
</tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-function.ftp-nlist-examples">
  <h3 class="title">Примеры</h3>
  <div class="example" id="">
   <p><strong>Пример #1 Пример использования <span class="function"><strong>ftp_nlist()</strong></span></strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">// установка соединения<br /></span><span style="color: #0000BB">$ftp </span><span style="color: #007700">= </span><span style="color: #0000BB">ftp_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$ftp_server</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// проверка имени пользователя и пароля<br /></span><span style="color: #0000BB">$login_result </span><span style="color: #007700">= </span><span style="color: #0000BB">ftp_login</span><span style="color: #007700">(</span><span style="color: #0000BB">$ftp</span><span style="color: #007700">, </span><span style="color: #0000BB">$ftp_user_name</span><span style="color: #007700">, </span><span style="color: #0000BB">$ftp_user_pass</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// получить содержимое текущей директории<br /></span><span style="color: #0000BB">$contents </span><span style="color: #007700">= </span><span style="color: #0000BB">ftp_nlist</span><span style="color: #007700">(</span><span style="color: #0000BB">$v</span><span style="color: #007700">, </span><span style="color: #DD0000">"."</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// вывод $contents<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$contents</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

     <div class="example-contents"><p>
      Приведённый выше пример выведет:
     </p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [0]=&gt;
  string(11) &quot;public_html&quot;
  [1]=&gt;
  string(10) &quot;public_ftp&quot;
  [2]=&gt;
  string(3) &quot;www&quot;
</pre></div>
     </div>
    </div>
   </div>

   <div class="refsect1 seealso" id="refsect1-function.ftp-nlist-seealso">
    <h3 class="title">Смотрите также</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="function.ftp-rawlist.php.html" class="function" rel="rdfs-seeAlso">ftp_rawlist()</a> - Возвращает подробный список файлов в заданной директории</span></li>
      <li class="member"><span class="function"><a href="function.ftp-mlsd.php.html" class="function" rel="rdfs-seeAlso">ftp_mlsd()</a> - Возвращает список файлов в заданной директории</span></li>
     </ul>
    </p>
   </div>

</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.ftp-nlist&amp;redirect=https://www.php.net/manual/ru/function.ftp-nlist.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">37 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="95371">  <div class="votes">
    <div id="Vu95371">
    <a href="https://www.php.net/manual/vote-note.php?id=95371&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd95371">
    <a href="https://www.php.net/manual/vote-note.php?id=95371&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V95371" title="80% like this...">
    73
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#95371" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#95371"> &para;</a><div class="date" title="2009-12-29 09:39"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom95371">
<div class="phpcode"><code><span class="html">Some complain that ftp_nlist, always return FALSE. I did experience this behavior myself, until I used ftp_pasv, which is useful if your client is behind a firewall (which most clients are now), then ftp_nlist worked just fine. I don't really know what are all the implications of using ftp_pasv, but if you read or experience that ftp_nlist, ftp_get, ftp_nb_get doesn't work, try adding the following:<br /><br />ftp_pasv($conn_id,true);</span></code></div>
  </div>
 </div>
  <div class="note" id="36515">  <div class="votes">
    <div id="Vu36515">
    <a href="https://www.php.net/manual/vote-note.php?id=36515&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd36515">
    <a href="https://www.php.net/manual/vote-note.php?id=36515&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V36515" title="78% like this...">
    11
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#36515" class="name">
  <strong class="user"><em>tobrien at florahill dot vic dot edu dot au</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#36515"> &para;</a><div class="date" title="2003-10-13 08:27"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom36515">
<div class="phpcode"><code><span class="html">ftp_nlist() or ftp_rawlist() takes ages then returns nothing...<br /><br />If you are having this issue, you may need to enable PASV mode FTP transfers using the ftp_pasv() function.<br /><br />Example...<br /><br /><span class="default">&lt;?php<br />$ftp_host </span><span class="keyword">= </span><span class="string">"yourFTPHost"</span><span class="keyword">;<br /></span><span class="default">$ftp_user </span><span class="keyword">= </span><span class="string">"yourUsername"</span><span class="keyword">;<br /></span><span class="default">$ftp_password </span><span class="keyword">= </span><span class="string">"yourPassword"</span><span class="keyword">;<br /><br /></span><span class="comment">//Connect<br /></span><span class="keyword">echo </span><span class="string">"&lt;br /&gt;Connecting to </span><span class="default">$ftp_host</span><span class="string"> via FTP..."</span><span class="keyword">;<br /></span><span class="default">$conn </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">$ftp_host</span><span class="keyword">);<br /></span><span class="default">$login </span><span class="keyword">= </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$conn</span><span class="keyword">, </span><span class="default">$ftp_user</span><span class="keyword">, </span><span class="default">$ftp_password</span><span class="keyword">);<br /><br /></span><span class="comment">//<br />//Enable PASV ( Note: must be done after ftp_login() )<br />//<br /></span><span class="default">$mode </span><span class="keyword">= </span><span class="default">ftp_pasv</span><span class="keyword">(</span><span class="default">$conn</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">);<br /><br /></span><span class="comment">//Login OK ?<br /></span><span class="keyword">if ((!</span><span class="default">$conn</span><span class="keyword">) || (!</span><span class="default">$login</span><span class="keyword">) || (!</span><span class="default">$mode</span><span class="keyword">)) {<br />   die(</span><span class="string">"FTP connection has failed !"</span><span class="keyword">);<br />}<br />echo </span><span class="string">"&lt;br /&gt;Login Ok.&lt;br /&gt;"</span><span class="keyword">;<br /><br /></span><span class="comment">//<br />//Now run ftp_nlist()<br />//<br /></span><span class="default">$file_list </span><span class="keyword">= </span><span class="default">ftp_nlist</span><span class="keyword">(</span><span class="default">$conn</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">);<br />foreach (</span><span class="default">$file_list </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">)<br />{<br />  echo </span><span class="string">"&lt;br&gt;</span><span class="default">$file</span><span class="string">"</span><span class="keyword">;<br />}<br /><br /></span><span class="comment">//close<br /></span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$conn</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="122449">  <div class="votes">
    <div id="Vu122449">
    <a href="https://www.php.net/manual/vote-note.php?id=122449&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122449">
    <a href="https://www.php.net/manual/vote-note.php?id=122449&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122449" title="75% like this...">
    2
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#122449" class="name">
  <strong class="user"><em>gerben at gerbs dot net</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#122449"> &para;</a><div class="date" title="2018-02-26 06:39"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom122449">
<div class="phpcode"><code><span class="html">Be aware that since PHP 7.2 a new function is available, that returns the list of files as an array with all details ready to use: <a href="http://php.net/manual/en/function.ftp-mlsd.php" rel="nofollow" target="_blank">http://php.net/manual/en/function.ftp-mlsd.php</a></span></code></div>
  </div>
 </div>
  <div class="note" id="101135">  <div class="votes">
    <div id="Vu101135">
    <a href="https://www.php.net/manual/vote-note.php?id=101135&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd101135">
    <a href="https://www.php.net/manual/vote-note.php?id=101135&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V101135" title="70% like this...">
    7
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#101135" class="name">
  <strong class="user"><em>zgardner at allofe dot com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#101135"> &para;</a><div class="date" title="2010-11-28 05:46"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom101135">
<div class="phpcode"><code><span class="html">While running WAMP (Vista, Apache 2.21, MySQL 5.1.36, PHP 5.3) and recursively downloading files from a LAMP FTP server (Ubuntu 8.04, Apache 2.2.8, MySQL 5.1.51a, PHP 5.2.4, VSFPTD), I would find that my script stops downloading files after a while. I traced it to the call to ftp_nlist halting the script.<br /><br />To solve this, I did a ftp_pasv($ftp, true). There's nothing in the VSFTPD, Apache, or PHP error logs on either the client or the server. Very strange.</span></code></div>
  </div>
 </div>
  <div class="note" id="108501">  <div class="votes">
    <div id="Vu108501">
    <a href="https://www.php.net/manual/vote-note.php?id=108501&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd108501">
    <a href="https://www.php.net/manual/vote-note.php?id=108501&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V108501" title="63% like this...">
    6
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#108501" class="name">
  <strong class="user"><em>Jacob Slomp</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#108501"> &para;</a><div class="date" title="2012-05-02 03:58"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom108501">
<div class="phpcode"><code><span class="html">Hi,<br /><br />I wrote this function to get the file list, I tested it only with php5 with linux ftp. And works fine for me.<br /><br />it will return an array with the name, type (file/folder), owner, owner_id and rights.<br /><br /><span class="default">&lt;?php<br />    </span><span class="keyword">function </span><span class="default">ftp_get_filelist</span><span class="keyword">(</span><span class="default">$con</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">){<br />        </span><span class="default">$files </span><span class="keyword">= array();<br />        </span><span class="default">$contents </span><span class="keyword">= </span><span class="default">ftp_rawlist </span><span class="keyword">(</span><span class="default">$con</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">);<br />        </span><span class="default">$a </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br /><br />        if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$contents</span><span class="keyword">)){<br />            foreach(</span><span class="default">$contents </span><span class="keyword">as </span><span class="default">$line</span><span class="keyword">){<br /><br />                </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"#([drwx\-]+)([\s]+)([0-9]+)([\s]+)([0-9]+)([\s]+)([a-zA-Z0-9\.]+)([\s]+)([0-9]+)([\s]+)([a-zA-Z]+)([\s ]+)([0-9]+)([\s]+)([0-9]+):([0-9]+)([\s]+)([a-zA-Z0-9\.\-\_ ]+)#si"</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">, </span><span class="default">$out</span><span class="keyword">);<br /><br />                if(</span><span class="default">$out</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] != </span><span class="default">1 </span><span class="keyword">&amp;&amp; (</span><span class="default">$out</span><span class="keyword">[</span><span class="default">18</span><span class="keyword">] == </span><span class="string">"." </span><span class="keyword">|| </span><span class="default">$out</span><span class="keyword">[</span><span class="default">18</span><span class="keyword">] == </span><span class="string">".."</span><span class="keyword">)){<br />                    </span><span class="comment">// do nothing<br />                </span><span class="keyword">} else {<br />                    </span><span class="default">$a</span><span class="keyword">++;<br />                    </span><span class="default">$files</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">][</span><span class="string">'rights'</span><span class="keyword">] = </span><span class="default">$out</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />                    </span><span class="default">$files</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">][</span><span class="string">'type'</span><span class="keyword">] = </span><span class="default">$out</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] == </span><span class="default">1 </span><span class="keyword">? </span><span class="string">"file"</span><span class="keyword">:</span><span class="string">"folder"</span><span class="keyword">;<br />                    </span><span class="default">$files</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">][</span><span class="string">'owner_id'</span><span class="keyword">] = </span><span class="default">$out</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">];<br />                    </span><span class="default">$files</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">][</span><span class="string">'owner'</span><span class="keyword">] = </span><span class="default">$out</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">];<br />                    </span><span class="default">$files</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">][</span><span class="string">'date_modified'</span><span class="keyword">] = </span><span class="default">$out</span><span class="keyword">[</span><span class="default">11</span><span class="keyword">].</span><span class="string">" "</span><span class="keyword">.</span><span class="default">$out</span><span class="keyword">[</span><span class="default">13</span><span class="keyword">] . </span><span class="string">" "</span><span class="keyword">.</span><span class="default">$out</span><span class="keyword">[</span><span class="default">13</span><span class="keyword">].</span><span class="string">":"</span><span class="keyword">.</span><span class="default">$out</span><span class="keyword">[</span><span class="default">16</span><span class="keyword">].</span><span class="string">""</span><span class="keyword">;<br />                    </span><span class="default">$files</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="default">$out</span><span class="keyword">[</span><span class="default">18</span><span class="keyword">];<br />                }<br />            }<br />        }<br />        return </span><span class="default">$files</span><span class="keyword">;<br />    }<br /></span><span class="default">?&gt;<br /></span><br />Greets,<br /><br />Jacob</span></code></div>
  </div>
 </div>
  <div class="note" id="58528">  <div class="votes">
    <div id="Vu58528">
    <a href="https://www.php.net/manual/vote-note.php?id=58528&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd58528">
    <a href="https://www.php.net/manual/vote-note.php?id=58528&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V58528" title="66% like this...">
    1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#58528" class="name">
  <strong class="user"><em>turigeza on yahoo com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#58528"> &para;</a><div class="date" title="2005-11-07 07:10"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom58528">
<div class="phpcode"><code><span class="html">Recursive directory delete using ftp_nlist() ...<br /><span class="default">&lt;?php <br /></span><span class="keyword">function </span><span class="default">ftp_rmdirr</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$handle</span><span class="keyword">)<br />    {<br />    if (!(@</span><span class="default">ftp_rmdir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">) || @</span><span class="default">ftp_delete</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">)))<br />        {<br />        </span><span class="default">$list </span><span class="keyword">= </span><span class="default">ftp_nlist</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">);<br />        if (!empty(</span><span class="default">$list</span><span class="keyword">))<br />            foreach(</span><span class="default">$list </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">)<br />                </span><span class="default">ftp_rmdirr</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$handle</span><span class="keyword">);<br />        }<br />    @</span><span class="default">ftp_rmdir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">);<br />    }<br /></span><span class="default">?&gt;<br /></span>It would be very useful if it was built into php. After all most of the time we want to remove non empty directories too. I bet everyone out there dealing with the file system had faced this problem.</span></code></div>
  </div>
 </div>
  <div class="note" id="34042">  <div class="votes">
    <div id="Vu34042">
    <a href="https://www.php.net/manual/vote-note.php?id=34042&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd34042">
    <a href="https://www.php.net/manual/vote-note.php?id=34042&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V34042" title="66% like this...">
    1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#34042" class="name">
  <strong class="user"><em>aRc</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#34042"> &para;</a><div class="date" title="2003-07-14 12:46"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom34042">
<div class="phpcode"><code><span class="html">in windows, ftp_nlist will die on a directory with a space in it's name.  to get around this, use ftp_chdir:<br /><br />//change directory<br />ftp_chdir($conn, "directory with spaces");<br />//then blindly list<br />$contents = ftp_nlist($conn, "");</span></code></div>
  </div>
 </div>
  <div class="note" id="119023">  <div class="votes">
    <div id="Vu119023">
    <a href="https://www.php.net/manual/vote-note.php?id=119023&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd119023">
    <a href="https://www.php.net/manual/vote-note.php?id=119023&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V119023" title="57% like this...">
    1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#119023" class="name">
  <strong class="user"><em>fsa at dwarf dot dk</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#119023"> &para;</a><div class="date" title="2016-03-18 09:19"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom119023">
<div class="phpcode"><code><span class="html">So I wrote a simple function using ftp_nlist() to recursively list only files in a specified directory.<br /><br />/**<br /> * Returns a list of files in the given directory, excluding directories.<br /> *<br /> * @param resource $ftp_stream<br /> *   The link identifier of the FTP connection.<br /> * @param string   $directory<br /> *   The directory to be listed.<br /> *   Note that this parameter isn't escaped so there may be some issues with filenames containing spaces and other characters.<br /> * @param bool     $recursive<br /> *   (optional) If set to TRUE, the issued command will be done recursively.<br /> *<br /> * @return array<br /> *   Returns an array of filenames from the specified directory.<br /> */<br />function ftp_files_list($ftp_stream, $directory, $recursive = false) {<br />  $files = array();<br /><br />  $list = ftp_nlist($ftp_stream, $directory);<br />  if (is_array($list)) {<br />    // Strip away dot directories.<br />    $list = array_slice($list, 2);<br /><br />    foreach ($list as $filename) {<br />      $path = $directory . '/' . $filename;<br />      // If size equals -1 it's a directory.<br />      if (ftp_size($ftp_stream, $path) === -1) {<br />        if ($recursive) {<br />          $files = array_merge($files, ftp_files_list($ftp_stream, $path, $recursive));<br />        }<br />      } else {<br />        // Strip away root directory path to ensure all file paths are relative.<br />        $files[] = substr($path, strpos($path, '/') + 1);<br />      }<br />    }<br />  }<br /><br />  return $files;<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="76641">  <div class="votes">
    <div id="Vu76641">
    <a href="https://www.php.net/manual/vote-note.php?id=76641&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd76641">
    <a href="https://www.php.net/manual/vote-note.php?id=76641&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V76641" title="57% like this...">
    1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#76641" class="name">
  <strong class="user"><em>bintjes at gmail dot com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#76641"> &para;</a><div class="date" title="2007-07-24 02:51"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom76641">
<div class="phpcode"><code><span class="html">I've made a recursive function to list all files from folders and subfolders using ftp_rawlist() . I used the function below from ari,  parse_rawlist() <br /><br />function list_all_files($conn_id, $path){<br />    $buff = ftp_rawlist($conn_id, $path);<br />    $res = parse_rawlist( $buff) ;<br />    static $flist = array();<br />    if(count($res)&gt;0){<br />        foreach($res as $result){<br />            // verify if is dir , if not add to the  list of files<br />            if($result['size']== 0){<br />                // recursively call the function if this file is a folder<br />                list_all_files($conn_id, $path.'/'.$result['name']);<br />            }<br />            else{<br />            // this is a file, add to final list<br />                $flist[] = $result;<br />            }     <br />        }<br />    }<br />    return $flist;<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="62306">  <div class="votes">
    <div id="Vu62306">
    <a href="https://www.php.net/manual/vote-note.php?id=62306&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd62306">
    <a href="https://www.php.net/manual/vote-note.php?id=62306&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V62306" title="57% like this...">
    1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#62306" class="name">
  <strong class="user"><em>franck569 at free dot fr</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#62306"> &para;</a><div class="date" title="2006-02-24 10:32"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom62306">
<div class="phpcode"><code><span class="html">better version of turigeza on yahoo com ftp_rmdirr() function.<br /><br />This return true or false if the path will be removed :<br /><br />function ftp_rmdirr($handle, $path)<br />{<br />    if(!@ftp_delete($handle, $path))<br />    {<br />        $list = @ftp_nlist($handle, $path);<br />        if(!empty($list))<br />            foreach($list as $value)<br />                ftp_rmdirr($handle, $value);<br />    }<br />    <br />    if(@ftp_rmdir($handle, $path))<br />        return true;<br />    else<br />        return false;<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="102969">  <div class="votes">
    <div id="Vu102969">
    <a href="https://www.php.net/manual/vote-note.php?id=102969&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd102969">
    <a href="https://www.php.net/manual/vote-note.php?id=102969&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V102969" title="55% like this...">
    1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#102969" class="name">
  <strong class="user"><em>vijay dot mahrra at fronter dot com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#102969"> &para;</a><div class="date" title="2011-03-17 02:35"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom102969">
<div class="phpcode"><code><span class="html">We needed to get a list of all files in all subdirectories and couldn't see a method to do this so we wrote our own:<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">/**<br /> * ftpRecursiveFileListing<br /> *<br /> * Get a recursive listing of all files in all subfolders given an ftp handle and path<br /> *<br /> * @param resource $ftpConnection  the ftp connection handle<br /> * @param string $path  the folder/directory path<br /> * @return array $allFiles the list of files in the format: directory =&gt; $filename<br /> * @author Niklas Berglund<br /> * @author Vijay Mahrra<br /> */<br /></span><span class="keyword">function </span><span class="default">ftpRecursiveFileListing</span><span class="keyword">(</span><span class="default">$ftpConnection</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">) {<br />    static </span><span class="default">$allFiles </span><span class="keyword">= array();<br />    </span><span class="default">$contents </span><span class="keyword">= </span><span class="default">ftp_nlist</span><span class="keyword">(</span><span class="default">$ftpConnection</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">);<br /><br />    foreach(</span><span class="default">$contents </span><span class="keyword">as </span><span class="default">$currentFile</span><span class="keyword">) {<br />        </span><span class="comment">// assuming its a folder if there's no dot in the name<br />        </span><span class="keyword">if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$currentFile</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">) === </span><span class="default">false</span><span class="keyword">) {<br />            </span><span class="default">ftpRecursiveFileListing</span><span class="keyword">(</span><span class="default">$ftpConnection</span><span class="keyword">, </span><span class="default">$currentFile</span><span class="keyword">);<br />        }<br />        </span><span class="default">$allFiles</span><span class="keyword">[</span><span class="default">$path</span><span class="keyword">][] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$currentFile</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">);<br />    }<br />    return </span><span class="default">$allFiles</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="83021">  <div class="votes">
    <div id="Vu83021">
    <a href="https://www.php.net/manual/vote-note.php?id=83021&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd83021">
    <a href="https://www.php.net/manual/vote-note.php?id=83021&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V83021" title="55% like this...">
    1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#83021" class="name">
  <strong class="user"><em>juhakala at gmail dot com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#83021"> &para;</a><div class="date" title="2008-05-07 03:23"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom83021">
<div class="phpcode"><code><span class="html">I noticed that this function won't work if working path is different, because $dir keeps value of whole path string. That's why adding basename()-function strips the path and this function will work also sub folders, not only in root folder.<br /><br />function ftp_is_dir($dir) {<br />  global $ftp_connect;<br />  if (ftp_chdir($ftp_connect, basename($dir))) {<br />    ftp_chdir($ftp_connect, '..');<br />    return true;<br />  } else {<br />    return false;<br />  }<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="68574">  <div class="votes">
    <div id="Vu68574">
    <a href="https://www.php.net/manual/vote-note.php?id=68574&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd68574">
    <a href="https://www.php.net/manual/vote-note.php?id=68574&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V68574" title="55% like this...">
    1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#68574" class="name">
  <strong class="user"><em>nekrostar at gmx dot net</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#68574"> &para;</a><div class="date" title="2006-08-02 04:08"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom68574">
<div class="phpcode"><code><span class="html">This function returns an array with the directory path and all files and subdirs which are in this<br /><br />    function ftp_searchdir($conn_id, $dir)<br />    {<br />        if( !@ftp_is_dir( $conn_id, $dir ) ) {<br />            die( 'No such directory on the ftp-server' );<br />        }<br />        if( strrchr( $dir, '/' ) != '/' ) {<br />            $dir = $dir.'/';<br />        }<br />        $dirlist[0] = $dir;<br />        $list = ftp_nlist( $conn_id, $dir );<br />        foreach( $list as $path ) {<br />            $path = './'.$path;<br />            if( $path != $dir.'.' &amp;&amp; $path != $dir.'..') {<br />                if( ftp_is_dir( $conn_id, $path ) ) {<br />                        $temp = ftp_searchdir( $conn_id, ($path), 1 );<br />                        $dirlist = array_merge( $dirlist, $temp );<br />                } else {<br />                    $dirlist[] = $path;<br />                }<br />            }<br /><br />        }<br />        ftp_chdir( $conn_id, '/../' );<br />        <br />        return $dirlist;<br /><br />    }<br />----------------------------------------------------------------------<br />    //Looks if a directory ($dir) is isset<br />    //returns true or false<br /><br />    function ftp_is_dir( $conn_id,  $dir )<br />    {<br />        if( @ftp_chdir( $conn_id, $dir ) ) {<br />            ftp_chdir( $conn_id, '/../' );<br />            return true;<br />        } else {<br />            return false;<br />        }<br />    }</span></code></div>
  </div>
 </div>
  <div class="note" id="54307">  <div class="votes">
    <div id="Vu54307">
    <a href="https://www.php.net/manual/vote-note.php?id=54307&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd54307">
    <a href="https://www.php.net/manual/vote-note.php?id=54307&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V54307" title="55% like this...">
    1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#54307" class="name">
  <strong class="user"><em>dreamsavior at gmail dot com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#54307"> &para;</a><div class="date" title="2005-06-29 09:19"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom54307">
<div class="phpcode"><code><span class="html">Here is the function that would checking whether the given path is directory or not, using ftp_nlist;<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">is_ftp_dir</span><span class="keyword">(</span><span class="default">$itempath</span><span class="keyword">, </span><span class="default">$ftp_server</span><span class="keyword">, </span><span class="default">$ftp_user_name</span><span class="keyword">=</span><span class="string">'anonymous'</span><span class="keyword">, </span><span class="default">$ftp_user_pass</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">) {<br />    if (empty(</span><span class="default">$ftp_user_name</span><span class="keyword">)) {<br />        </span><span class="default">$ftp_user_name </span><span class="keyword">= </span><span class="string">"anonymous"</span><span class="keyword">;<br />    }<br />    if (</span><span class="default">$itempath</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]!==</span><span class="string">"/"</span><span class="keyword">) {<br />        </span><span class="default">$itempath </span><span class="keyword">= </span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$itempath</span><span class="keyword">;<br />    }<br /><br />    </span><span class="default">$conn_id </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">$ftp_server</span><span class="keyword">);<br />    </span><span class="default">$login_result </span><span class="keyword">= </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$ftp_user_name</span><span class="keyword">, </span><span class="default">$ftp_user_pass</span><span class="keyword">);<br /><br />    </span><span class="default">$contents </span><span class="keyword">= </span><span class="default">ftp_nlist</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="string">"</span><span class="default">$itempath</span><span class="string">"</span><span class="keyword">);<br /><br />    if (!empty(</span><span class="default">$contents</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])) {<br />        </span><span class="default">$check </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$itempath</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$contents</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />        if (!empty(</span><span class="default">$check</span><span class="keyword">)) {<br />            return </span><span class="default">true</span><span class="keyword">;<br />        }<br />    }<br />    </span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">);<br />}<br /><br /></span><span class="comment">// example :<br />    </span><span class="keyword">if (</span><span class="default">is_ftp_dir</span><span class="keyword">(</span><span class="string">"/pub/ftp/unknownitem"</span><span class="keyword">, </span><span class="string">"ftp.nowhere"</span><span class="keyword">, </span><span class="string">'username'</span><span class="keyword">, </span><span class="string">'verysecret'')) {<br />        // do something related to directory handling action<br />    } else {<br />        // The target item is a file ...<br />    }<br /><br />?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="66094">  <div class="votes">
    <div id="Vu66094">
    <a href="https://www.php.net/manual/vote-note.php?id=66094&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd66094">
    <a href="https://www.php.net/manual/vote-note.php?id=66094&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V66094" title="54% like this...">
    3
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#66094" class="name">
  <strong class="user"><em>mail at martinauer dot net</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#66094"> &para;</a><div class="date" title="2006-05-14 10:27"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom66094">
<div class="phpcode"><code><span class="html">Beware:<br />The array will contain complete paths, not just filenames. At least in PHP 4.3.11 when I tried <br /><br />ftp_nlist("www.example.com/docs/some/thing")<br /><br />it dumped something like this:<br /><br />  [0]=&gt;<br />  string(41) "www.example.com/docs/some/thing/file1.htm"<br />  [1]=&gt;<br />  string(41) "www.example.com/docs/some/thing/file2.htm"<br />  [2]=&gt;<br />  string(41) "www.example.com/docs/some/thing/file3.htm"<br />  [3]=&gt;<br />  string(41) "www.example.com/docs/some/thing/file4.htm"<br />  [4]=&gt;<br />  string(41) "www.example.com/docs/some/thing/file5.htm"</span></code></div>
  </div>
 </div>
  <div class="note" id="127771">  <div class="votes">
    <div id="Vu127771">
    <a href="https://www.php.net/manual/vote-note.php?id=127771&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd127771">
    <a href="https://www.php.net/manual/vote-note.php?id=127771&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V127771" title="no votes...">
    0
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#127771" class="name">
  <strong class="user"><em>rmaslo at archa dot cz</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#127771"> &para;</a><div class="date" title="2022-10-19 07:25"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom127771">
<div class="phpcode"><code><span class="html">Some FTP servers convert accented characters to character "?". You can try:<br /><br /><span class="default">&lt;?php<br />$ftp </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">$ftp_server</span><span class="keyword">);<br /></span><span class="default">$login_result </span><span class="keyword">= </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$ftp</span><span class="keyword">, </span><span class="default">$ftp_user_name</span><span class="keyword">, </span><span class="default">$ftp_user_pass</span><span class="keyword">);<br /></span><span class="default">ftp_raw</span><span class="keyword">(</span><span class="default">$ftp</span><span class="keyword">, </span><span class="string">'OPTS UTF8 ON'</span><span class="keyword">); </span><span class="comment">//Sets the server to return results in UTF<br /></span><span class="default">$contents </span><span class="keyword">= </span><span class="default">ftp_nlist</span><span class="keyword">(</span><span class="default">$ftp</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">);<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$contents</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="69140">  <div class="votes">
    <div id="Vu69140">
    <a href="https://www.php.net/manual/vote-note.php?id=69140&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd69140">
    <a href="https://www.php.net/manual/vote-note.php?id=69140&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V69140" title="100% like this...">
    2
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#69140" class="name">
  <strong class="user"><em>artiom1st at yahoo dot com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#69140"> &para;</a><div class="date" title="2006-08-24 07:26"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom69140">
<div class="phpcode"><code><span class="html">Sometimes, you won't be able to get folder content because of NAT or Firewall issues on your server. As a result you need to put ftp connection into a passive mode:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">// set up basic connection<br /></span><span class="default">$conn_id </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">$ftp_server</span><span class="keyword">);<br /><br /></span><span class="comment">// login with username and password<br /></span><span class="default">$login_result </span><span class="keyword">= </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$ftp_user_name</span><span class="keyword">, </span><span class="default">$ftp_user_pass</span><span class="keyword">);<br /><br /></span><span class="comment">// enabling passive mode<br /></span><span class="default">ftp_pasv</span><span class="keyword">( </span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">true </span><span class="keyword">);<br /><br /></span><span class="comment">// get contents of the current directory<br /></span><span class="default">$contents </span><span class="keyword">= </span><span class="default">ftp_nlist</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">);<br /><br /></span><span class="comment">// output $contents<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$contents</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="77228">  <div class="votes">
    <div id="Vu77228">
    <a href="https://www.php.net/manual/vote-note.php?id=77228&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd77228">
    <a href="https://www.php.net/manual/vote-note.php?id=77228&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V77228" title="100% like this...">
    1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#77228" class="name">
  <strong class="user"><em>wim dot dupre at skynet dot be</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#77228"> &para;</a><div class="date" title="2007-08-20 05:59"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom77228">
<div class="phpcode"><code><span class="html">php 5.2.2 on MAC OS 1.4 (Tiger) seems to defaut to active ftp. to get ftp_nlist functioning, i needed to force ftp to passive.<br />the default behaviour with PHP 5.2.3 on windows XP seems to be passive ftp.<br /><br />greetz,<br /><br />wim</span></code></div>
  </div>
 </div>
  <div class="note" id="77128">  <div class="votes">
    <div id="Vu77128">
    <a href="https://www.php.net/manual/vote-note.php?id=77128&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd77128">
    <a href="https://www.php.net/manual/vote-note.php?id=77128&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V77128" title="100% like this...">
    1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#77128" class="name">
  <strong class="user"><em>ralph at ralphje dot nl</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#77128"> &para;</a><div class="date" title="2007-08-16 03:13"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom77128">
<div class="phpcode"><code><span class="html">If you receive an error due some open_basedir restrictions, use the following:<br /><br /><span class="default">&lt;?php<br />putenv</span><span class="keyword">(</span><span class="string">'TMPDIR=/tmp/'</span><span class="keyword">);<br /></span><span class="default">$filelist </span><span class="keyword">= </span><span class="default">ftp_nlist</span><span class="keyword">(</span><span class="default">$ftp</span><span class="keyword">, </span><span class="string">"./accounts"</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />(if /tmp/ is an allowed directory within open_basedir)<br /><br />It took me a while to find this out.</span></code></div>
  </div>
 </div>
  <div class="note" id="71696">  <div class="votes">
    <div id="Vu71696">
    <a href="https://www.php.net/manual/vote-note.php?id=71696&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd71696">
    <a href="https://www.php.net/manual/vote-note.php?id=71696&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V71696" title="100% like this...">
    1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#71696" class="name">
  <strong class="user"><em>kip at friendchip dot com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#71696"> &para;</a><div class="date" title="2006-12-12 04:48"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom71696">
<div class="phpcode"><code><span class="html">If you're just after an ftp version of is_dir you can see if ftp_chdir returns true or false.</span></code></div>
  </div>
 </div>
  <div class="note" id="69107">  <div class="votes">
    <div id="Vu69107">
    <a href="https://www.php.net/manual/vote-note.php?id=69107&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd69107">
    <a href="https://www.php.net/manual/vote-note.php?id=69107&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V69107" title="100% like this...">
    1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#69107" class="name">
  <strong class="user"><em>sksafarath at impelsys dot com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#69107"> &para;</a><div class="date" title="2006-08-23 04:17"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom69107">
<div class="phpcode"><code><span class="html">If we are giving second parameter as full directory  path then it wil return the list of files with full path, If we want to list only files you can do as following code<br />// set up basic connection<br />$conn_id = ftp_connect($ftp_server);<br /><br />// login with username and password<br />$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);<br />//if u want to display the files from /home/test/<br />//change directory point to /home/test using<br />ftp_chdir($conn_id, "test");<br />//then pass second parameter as null which will give the list of files.<br />// get contents of the current directory<br />$contents = ftp_nlist($conn_id, "");<br /><br />Note: This is working for me in PHP5</span></code></div>
  </div>
 </div>
  <div class="note" id="77078">  <div class="votes">
    <div id="Vu77078">
    <a href="https://www.php.net/manual/vote-note.php?id=77078&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd77078">
    <a href="https://www.php.net/manual/vote-note.php?id=77078&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V77078" title="no votes...">
    0
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#77078" class="name">
  <strong class="user"><em>AndyM</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#77078"> &para;</a><div class="date" title="2007-08-13 09:13"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom77078">
<div class="phpcode"><code><span class="html">Be careful tom at crysis-online dot com - your suggested method seems to be server dependent. I'm currently trying to talk to a proftpd server and the size returned is -1 for all files it seems.</span></code></div>
  </div>
 </div>
  <div class="note" id="77007">  <div class="votes">
    <div id="Vu77007">
    <a href="https://www.php.net/manual/vote-note.php?id=77007&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd77007">
    <a href="https://www.php.net/manual/vote-note.php?id=77007&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V77007" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#77007" class="name">
  <strong class="user"><em>tom at crysis-online dot com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#77007"> &para;</a><div class="date" title="2007-08-09 04:12"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom77007">
<div class="phpcode"><code><span class="html">This function is way faster than those below for checking if an object is a file or folder.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">is_ftp_dir</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$ftp_connection</span><span class="keyword">){<br />    if(</span><span class="default">ftp_size</span><span class="keyword">(</span><span class="default">$ftp_connection</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">) == </span><span class="string">'-1'</span><span class="keyword">){<br />        return </span><span class="default">true</span><span class="keyword">; </span><span class="comment">// Is directory<br />    </span><span class="keyword">}else{<br />        return </span><span class="default">false</span><span class="keyword">; </span><span class="comment">// Is file<br />    </span><span class="keyword">}<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="72875">  <div class="votes">
    <div id="Vu72875">
    <a href="https://www.php.net/manual/vote-note.php?id=72875&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd72875">
    <a href="https://www.php.net/manual/vote-note.php?id=72875&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V72875" title="no votes...">
    0
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#72875" class="name">
  <strong class="user"><em>nigel (at) amanwithapencil (dot) com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#72875"> &para;</a><div class="date" title="2007-02-03 08:26"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom72875">
<div class="phpcode"><code><span class="html">Further to kip's post, this works:<br /><br />if (!ftp_chdir($conn, $folder))<br />{<br />    ftp_mkdir($conn, $folder);<br />    ftp_chdir($conn, $folder);<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="70166">  <div class="votes">
    <div id="Vu70166">
    <a href="https://www.php.net/manual/vote-note.php?id=70166&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd70166">
    <a href="https://www.php.net/manual/vote-note.php?id=70166&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V70166" title="no votes...">
    0
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#70166" class="name">
  <strong class="user"><em>fx dot menard at pleasenospam dot free dot fr</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#70166"> &para;</a><div class="date" title="2006-10-05 02:35"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom70166">
<div class="phpcode"><code><span class="html">A derived use of ftp_nlist function: determine if a given path exists and is a directory or a plain file (this is not easy with basic ftp functions). This code doesn't issue any warning or error. It makes use of ls option -d for efficiency, and -F to append a slash if the retrieved path is a directory.<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">// returns information on a given ftp path<br />// 0 if path does not exist<br />// 1 if path is a file<br />// 2 if path is a directory<br /></span><span class="keyword">function </span><span class="default">ftp_pathtype</span><span class="keyword">( </span><span class="default">$conn</span><span class="keyword">, </span><span class="default">$path </span><span class="keyword">)<br />{<br />    </span><span class="default">$res </span><span class="keyword">= </span><span class="default">ftp_nlist</span><span class="keyword">( </span><span class="default">$conn</span><span class="keyword">, </span><span class="string">"-dF " </span><span class="keyword">. </span><span class="default">$path </span><span class="keyword">);<br />    if ( isset( </span><span class="default">$res</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] ) and<br />         </span><span class="default">strlen</span><span class="keyword">( </span><span class="default">$res</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] ) )<br />    {<br />        if ( </span><span class="default">$res</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][ </span><span class="default">strlen</span><span class="keyword">( </span><span class="default">$res</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] )-</span><span class="default">1 </span><span class="keyword">] === </span><span class="string">"/" </span><span class="keyword">)<br />            </span><span class="comment">// a directory<br />            </span><span class="keyword">return </span><span class="default">2</span><span class="keyword">;<br />        else<br />            return </span><span class="default">1</span><span class="keyword">;<br />    } else<br />        return </span><span class="default">0</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="68751">  <div class="votes">
    <div id="Vu68751">
    <a href="https://www.php.net/manual/vote-note.php?id=68751&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd68751">
    <a href="https://www.php.net/manual/vote-note.php?id=68751&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V68751" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#68751" class="name">
  <strong class="user"><em>robtherat at gmx dot de</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#68751"> &para;</a><div class="date" title="2006-08-09 06:00"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom68751">
<div class="phpcode"><code><span class="html">The function from nekrostar at gmx dot net does not work for me, so I've tryed to do it my way. For checking if a found file is a directory or not I use the ftp_size function.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">ftplistdir</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$dir</span><span class="keyword">){<br />    </span><span class="default">$fold_no </span><span class="keyword">= array(</span><span class="string">"."</span><span class="keyword">, </span><span class="string">".."</span><span class="keyword">, </span><span class="string">"cgi-data"</span><span class="keyword">, </span><span class="string">"comp"</span><span class="keyword">, </span><span class="string">"zuern"</span><span class="keyword">, </span><span class="string">"counter"</span><span class="keyword">); <br />    </span><span class="default">$list </span><span class="keyword">= </span><span class="default">ftp_nlist</span><span class="keyword">( </span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$dir </span><span class="keyword">);<br />    foreach(</span><span class="default">$list </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">){<br />        if (</span><span class="default">ftp_size</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$dir </span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">)== -</span><span class="default">1</span><span class="keyword">){<br />            if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$fold_no</span><span class="keyword">)) { <br />                print </span><span class="default">$file </span><span class="keyword">.</span><span class="string">" Ueberspringe ausgeschlossenes Verzeichnis.&lt;br&gt;"</span><span class="keyword">; <br />            } else { <br />                </span><span class="default">$geslist</span><span class="keyword">[]= </span><span class="default">$dir </span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">;<br />                </span><span class="default">$temp</span><span class="keyword">=</span><span class="default">ftplistdir</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$dir </span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">);<br />                </span><span class="default">$geslist</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$geslist</span><span class="keyword">, </span><span class="default">$temp</span><span class="keyword">);<br />            }<br />        }else{<br />            </span><span class="default">$geslist</span><span class="keyword">[]= </span><span class="default">$dir </span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">;<br />        }<br />    }<br />    return </span><span class="default">$geslist</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span>I hope it's usefull for anyone<br />Robert</span></code></div>
  </div>
 </div>
  <div class="note" id="20060">  <div class="votes">
    <div id="Vu20060">
    <a href="https://www.php.net/manual/vote-note.php?id=20060&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd20060">
    <a href="https://www.php.net/manual/vote-note.php?id=20060&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V20060" title="100% like this...">
    1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#20060" class="name">
  <strong class="user"><em>ryan at wonko dot com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#20060"> &para;</a><div class="date" title="2002-03-20 07:31"><strong>21 years ago</strong></div>
  <div class="text" id="Hcom20060">
<div class="phpcode"><code><span class="html">A note to developers using PHP on Windows servers: as of PHP 4.1.2, ftp_nlist() is broken in the Windows build of PHP. It will return nothing at all, even if the same code works fine on UNIX. So if you're going crazy trying to figure out why the function isn't returning anything, stop wasting your time, you're not doing anything wrong. Hopefully this will get fixed in future versions, although it's apparently been an issue since at least 4.0.6.<br /><br />More info on this bug is at <a href="http://bugs.php.net/bug.php?id=16057" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=16057</a></span></code></div>
  </div>
 </div>
  <div class="note" id="46011">  <div class="votes">
    <div id="Vu46011">
    <a href="https://www.php.net/manual/vote-note.php?id=46011&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd46011">
    <a href="https://www.php.net/manual/vote-note.php?id=46011&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V46011" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#46011" class="name">
  <strong class="user"><em>webmaster at torbox dot info</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#46011"> &para;</a><div class="date" title="2004-09-26 09:16"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom46011">
<div class="phpcode"><code><span class="html">To use custom LIST - flags, for example<br />LIST -aF ../*/<br />(listing protected pub dirs)<br />You can use<br /><span class="default">&lt;?php<br />$list </span><span class="keyword">= </span><span class="default">ftp_nlist</span><span class="keyword">(</span><span class="default">$ftp</span><span class="keyword">, </span><span class="string">"-aF ../*/"</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span>Took me a while to clever that one out :-)</span></code></div>
  </div>
 </div>
  <div class="note" id="40332">  <div class="votes">
    <div id="Vu40332">
    <a href="https://www.php.net/manual/vote-note.php?id=40332&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd40332">
    <a href="https://www.php.net/manual/vote-note.php?id=40332&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V40332" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#40332" class="name">
  <strong class="user"><em>micksam7 at neodecoder dot com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#40332"> &para;</a><div class="date" title="2004-02-29 02:40"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom40332">
<div class="phpcode"><code><span class="html">A little correction to king_killa at juggalos4life dot com's note, it isn't ftp_res, it's ftp_size.<br /><br />By the way, here is a complete function that will get all the files on a server, then write them to a array.<br /><br /><span class="default">&lt;?php<br />$ftp1 </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="string">'ftp.nowhere1230404.foo'</span><span class="keyword">) or die(</span><span class="string">"Couldn't connect to server"</span><span class="keyword">);<br /></span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$ftp1</span><span class="keyword">,</span><span class="string">'foo'</span><span class="keyword">,</span><span class="string">'bar'</span><span class="keyword">);<br /></span><span class="default">ftp_pasv</span><span class="keyword">(</span><span class="default">$ftp1</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">); </span><span class="comment">//Passive Mode is better for this<br /><br />//Get them file!<br /></span><span class="keyword">echo </span><span class="string">"Collecting Files on Neodecoder&lt;br&gt;"</span><span class="keyword">;<br /></span><span class="comment">//Set defaults just in case. PHP complains anyway if we don't.<br /></span><span class="default">$dir </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br /><br />function </span><span class="default">filecollect</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">,</span><span class="default">$filelist</span><span class="keyword">) {<br />global </span><span class="default">$ftp1</span><span class="keyword">; </span><span class="comment">//Get our ftp<br /></span><span class="default">$files </span><span class="keyword">= </span><span class="default">ftp_nlist</span><span class="keyword">(</span><span class="default">$ftp1</span><span class="keyword">,</span><span class="default">$dir</span><span class="keyword">); </span><span class="comment">//get files in directory<br /></span><span class="keyword">foreach (</span><span class="default">$files </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">) {<br /> </span><span class="default">$isfile </span><span class="keyword">= </span><span class="default">ftp_size</span><span class="keyword">(</span><span class="default">$ftp1</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">); <br /> if(</span><span class="default">$isfile </span><span class="keyword">== </span><span class="string">"-1"</span><span class="keyword">) { </span><span class="comment">//Is a file or directory?<br />  </span><span class="default">$filelist </span><span class="keyword">= </span><span class="default">filecollect</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">,</span><span class="default">$filelist</span><span class="keyword">,</span><span class="default">$num</span><span class="keyword">); </span><span class="comment">//If a folder, do a filecollect on it<br /> </span><span class="keyword">}<br /> else {<br />  </span><span class="default">$filelist</span><span class="keyword">[(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$filelist</span><span class="keyword">)+</span><span class="default">1</span><span class="keyword">)] = </span><span class="default">$file</span><span class="keyword">; </span><span class="comment">//If not, add it as a file to the file list<br /> </span><span class="keyword">}<br />}<br />return </span><span class="default">$filelist</span><span class="keyword">;<br />}<br /><br /></span><span class="default">$filelist </span><span class="keyword">= </span><span class="default">filecollect</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">,</span><span class="default">$filelist</span><span class="keyword">);<br /><br />echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br /></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$filelist</span><span class="keyword">);<br />echo </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br /></span><span class="default">?&gt;<br /></span><br />This is really handy if your trying to transfer all the files from a ftp server to another server. Which, is why I made the script in the first place. heh..</span></code></div>
  </div>
 </div>
  <div class="note" id="32633">  <div class="votes">
    <div id="Vu32633">
    <a href="https://www.php.net/manual/vote-note.php?id=32633&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd32633">
    <a href="https://www.php.net/manual/vote-note.php?id=32633&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V32633" title="no votes...">
    0
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#32633" class="name">
  <strong class="user"><em>neodeus at allesamarsch dot com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#32633"> &para;</a><div class="date" title="2003-06-03 10:10"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom32633">
<div class="phpcode"><code><span class="html">This is an Example tp read out a Complete FTP Server ( beginn at your root dir )<br />    function files($dir)<br />    {<br />        /*<br />        if(!isset($dir) || empty($dir))<br />        {<br />            $dir=ftp_pwd($this-&gt;conn_id);<br />        }<br />        */<br />        unset($list);<br />        unset($files);<br />        unset($folders);<br />        unset($folder);<br />        unset($file);<br />        @ftp_chdir($this-&gt;conn_id, $dir);<br />        $dir = ftp_pwd($this-&gt;conn_id);<br />        $list=Array(); <br />        $list=ftp_nlist($this-&gt;conn_id, "$dir"); <br />        $files = Array();<br />        $folders = Array();<br />        for($i = 0; $i != sizeof($list); $i++)<br />        {<br />            $entry = str_replace("//", "", $list[$i]);<br />            if(@ftp_chdir($this-&gt;conn_id, $entry))<br />            {<br />                $folders[] = $entry;<br />                ftp_chdir($this-&gt;conn_id, $dir);<br />            }<br />            else<br />            {<br />                $files[] = $entry;<br />            }<br />        }<br />        print "\t&lt;b&gt; Dateien in ".$dir." :&lt;/b&gt;&lt;br&gt;&lt;br&gt;";<br />        foreach($files as $file)<br />        {<br />            print $file."&lt;br&gt;";<br />        }<br />        print "\t&lt;b&gt;Ordner in ".$dir." :&lt;/b&gt; &lt;br&gt;&lt;br&gt;";<br />        foreach ($folders as $folder)<br />        {<br />            print "\t".$folder."&lt;br&gt;";<br />            ftp_chdir($this-&gt;conn_id, $dir);<br />            $this-&gt;files($folder);<br />        }<br />    }</span></code></div>
  </div>
 </div>
  <div class="note" id="31668">  <div class="votes">
    <div id="Vu31668">
    <a href="https://www.php.net/manual/vote-note.php?id=31668&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd31668">
    <a href="https://www.php.net/manual/vote-note.php?id=31668&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V31668" title="no votes...">
    0
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#31668" class="name">
  <strong class="user"><em>louis at ewens dot com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#31668"> &para;</a><div class="date" title="2003-04-29 04:03"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom31668">
<div class="phpcode"><code><span class="html">If you do a wildcard or other search for a particular file and the file doesn't exist, Solaris FTP servers send back "search*.xml: No such file or directory" as a single element in the response array. This makes it hard to check for the presence of a file.<br /><br />One possible work-around is to parse your own raw directory listing. Or you could check for the error verbatim. But different servers could return different values. A simpler way to compensate is to use the ftp_size command to validate the returned file:<br /><br />if ( ($filelist = ftp_nlist( $this-&gt;conn_id, $filesearch )) === FALSE )<br />{<br />       Error( "Could not get file list" );<br />       return FALSE;<br />}<br />// File actually exists? Catches invalid FTP server list responses<br />if ( !count($filelist) || ftp_size( $this-&gt;conn_id, $filelist[0] ) == -1 )<br />{<br />       Error( "No valid files" );<br />       return FALSE;<br />}<br />// File is really there, fetch it or whatever else you want to do</span></code></div>
  </div>
 </div>
  <div class="note" id="72920">  <div class="votes">
    <div id="Vu72920">
    <a href="https://www.php.net/manual/vote-note.php?id=72920&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd72920">
    <a href="https://www.php.net/manual/vote-note.php?id=72920&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V72920" title="0% like this...">
    -1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#72920" class="name">
  <strong class="user"><em>nigel (at) amanwithapencil (dot) com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#72920"> &para;</a><div class="date" title="2007-02-04 04:02"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom72920">
<div class="phpcode"><code><span class="html">Actually, this works better (suppresses the error when ftp_chdir() fails)!:<br /><br />if (!@ftp_chdir($ftp_conn, $userfolder))<br />{<br />    ftp_mkdir($ftp_conn, $userfolder);<br />    ftp_chdir($ftp_conn, $userfolder);<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="29420">  <div class="votes">
    <div id="Vu29420">
    <a href="https://www.php.net/manual/vote-note.php?id=29420&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd29420">
    <a href="https://www.php.net/manual/vote-note.php?id=29420&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V29420" title="no votes...">
    0
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#29420" class="name">
  <strong class="user"><em>rfr at ajato dot com dot br</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#29420"> &para;</a><div class="date" title="2003-02-12 08:25"><strong>21 years ago</strong></div>
  <div class="text" id="Hcom29420">
<div class="phpcode"><code><span class="html">There are some FTP servers that just dont accept the ftp_nlist command, they return a bool variable. but I think all of them accept the LIST command which is the ftp_rawlist command. So yu have to parse rawlist to nlist. I found a code here posted by "fredrik" but it shows a bug if the files at the ftp server have spaces oon theeir name... so here its a better function:<br />function rawlist_2_nlist($list) <br />{ <br />    $newlist = array();<br />    reset($list); <br />    while (list(,$row) = each($list)) <br />    {<br />        $buf="";<br />        if ($row[0]=='d'||$row[0]=='-'){ <br />        $buf = substr($row,55);<br />        $newlist[]=$buf;<br />        }<br />    }<br /><br />return $newlist; <br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="48303">  <div class="votes">
    <div id="Vu48303">
    <a href="https://www.php.net/manual/vote-note.php?id=48303&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd48303">
    <a href="https://www.php.net/manual/vote-note.php?id=48303&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V48303" title="0% like this...">
    -1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#48303" class="name">
  <strong class="user"><em>ds at over dot hu</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#48303"> &para;</a><div class="date" title="2004-12-18 08:43"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom48303">
<div class="phpcode"><code><span class="html">Another file filecollect script, with static.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">function </span><span class="default">filecollect</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">,</span><span class="default">$dir</span><span class="keyword">=</span><span class="string">'.'</span><span class="keyword">) {<br />  static </span><span class="default">$flist</span><span class="keyword">=array();<br />  if (</span><span class="default">$files </span><span class="keyword">= </span><span class="default">ftp_nlist</span><span class="keyword">(</span><span class="default">$cid</span><span class="keyword">,</span><span class="default">$dir</span><span class="keyword">)){<br />    foreach (</span><span class="default">$files </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">) {<br />      if (</span><span class="default">ftp_size</span><span class="keyword">(</span><span class="default">$cid</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">) == </span><span class="string">"-1"</span><span class="keyword">){<br />        </span><span class="default">filecollect</span><span class="keyword">(</span><span class="default">$cid</span><span class="keyword">,</span><span class="default">$file</span><span class="keyword">);<br />      } else </span><span class="default">$flist</span><span class="keyword">[] = </span><span class="default">$file</span><span class="keyword">;<br />    }<br />  }<br />  return </span><span class="default">$flist</span><span class="keyword">;<br />}<br /><br /></span><span class="default">$conn_id </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="string">'ftp.nowhere.com'</span><span class="keyword">) or die(</span><span class="string">"Couldn't connect to server"</span><span class="keyword">);<br />  if (@</span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="string">'anonymous'</span><span class="keyword">, </span><span class="string">'pass@nowhere.com'</span><span class="keyword">)){<br />    </span><span class="default">$filelist </span><span class="keyword">= </span><span class="default">filecollect</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">);<br />    echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />      </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$filelist</span><span class="keyword">);<br />    echo </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />  }<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="78447">  <div class="votes">
    <div id="Vu78447">
    <a href="https://www.php.net/manual/vote-note.php?id=78447&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd78447">
    <a href="https://www.php.net/manual/vote-note.php?id=78447&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V78447" title="0% like this...">
    -2
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#78447" class="name">
  <strong class="user"><em>webmaster at weltvolk dot de</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#78447"> &para;</a><div class="date" title="2007-10-12 06:28"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom78447">
<div class="phpcode"><code><span class="html">In order to make file/folder separation work on remote servers that do not support ftp_size() it's better to use the function ftp_is_dir() mentioned below:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">//identify directories<br /><br /></span><span class="keyword">function </span><span class="default">ftp_is_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br />  global </span><span class="default">$ftp_connect</span><span class="keyword">;<br />  if (</span><span class="default">ftp_chdir</span><span class="keyword">(</span><span class="default">$ftp_connect</span><span class="keyword">, </span><span class="default">$dir</span><span class="keyword">)) {<br />    </span><span class="default">ftp_chdir</span><span class="keyword">(</span><span class="default">$ftp_connect</span><span class="keyword">, </span><span class="string">'..'</span><span class="keyword">);<br />    return </span><span class="default">true</span><span class="keyword">;<br />  } else {<br />    return </span><span class="default">false</span><span class="keyword">;<br />  }<br />}<br /></span><span class="default">$ftp_nlist </span><span class="keyword">= </span><span class="default">ftp_nlist</span><span class="keyword">(</span><span class="default">$ftp_connect</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">);<br /><br /></span><span class="comment">//alphabetical sorting<br /><br /></span><span class="default">sort</span><span class="keyword">(</span><span class="default">$ftp_nlist</span><span class="keyword">);<br />foreach (</span><span class="default">$ftp_nlist </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">) {<br /><br /></span><span class="comment">//1. ftp_is_dir() is true =&gt; directory<br />  </span><span class="keyword">if (</span><span class="default">ftp_is_dir</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br /><br /></span><span class="comment">//output as [ directory ]<br />      </span><span class="keyword">echo </span><span class="string">"[ " </span><span class="keyword">. </span><span class="default">$v </span><span class="keyword">. </span><span class="string">" ]&lt;br /&gt;\n"</span><span class="keyword">;<br />  }<br />}<br />foreach (</span><span class="default">$ftp_nlist </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">) {<br /><br /></span><span class="comment">//2. ftp_is_dir() is false =&gt; file<br />  </span><span class="keyword">if (!</span><span class="default">ftp_is_dir</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br /><br /></span><span class="comment">//output as file<br />      </span><span class="keyword">echo </span><span class="string">"" </span><span class="keyword">. </span><span class="default">$v </span><span class="keyword">. </span><span class="string">"&lt;br /&gt;\n"</span><span class="keyword">;<br />  }<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="78280">  <div class="votes">
    <div id="Vu78280">
    <a href="https://www.php.net/manual/vote-note.php?id=78280&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd78280">
    <a href="https://www.php.net/manual/vote-note.php?id=78280&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V78280" title="33% like this...">
    -2
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#78280" class="name">
  <strong class="user"><em>webmaster at weltvolk dot de</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#78280"> &para;</a><div class="date" title="2007-10-05 02:24"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom78280">
<div class="phpcode"><code><span class="html">How to get the file list in alphabetical order with all directories at the top:<br /><br /><span class="default">&lt;?php<br />$ftp_nlist </span><span class="keyword">= </span><span class="default">ftp_nlist</span><span class="keyword">(</span><span class="default">$ftp_connect</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">);<br /><br /></span><span class="comment">//alphabetical sorting<br /><br /></span><span class="default">sort</span><span class="keyword">(</span><span class="default">$ftp_nlist</span><span class="keyword">);<br />foreach (</span><span class="default">$ftp_nlist </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">) {<br /><br /></span><span class="comment">//1. Size is '-1' =&gt; directory<br />  </span><span class="keyword">if (</span><span class="default">ftp_size</span><span class="keyword">(</span><span class="default">$ftp_connect</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">) == -</span><span class="default">1</span><span class="keyword">) {<br /><br /></span><span class="comment">//output as [ directory ]<br />      </span><span class="keyword">echo </span><span class="string">"[ " </span><span class="keyword">. </span><span class="default">$v </span><span class="keyword">. </span><span class="string">" ]&lt;br /&gt;\n"</span><span class="keyword">;<br />  }<br />}<br />foreach (</span><span class="default">$ftp_nlist </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">) {<br /><br /></span><span class="comment">//2. Size is not '-1' =&gt; file<br />  </span><span class="keyword">if (!(</span><span class="default">ftp_size</span><span class="keyword">(</span><span class="default">$ftp_connect</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">) == -</span><span class="default">1</span><span class="keyword">)) {<br /><br /></span><span class="comment">//output as file<br />      </span><span class="keyword">echo </span><span class="string">"" </span><span class="keyword">. </span><span class="default">$v </span><span class="keyword">. </span><span class="string">"&lt;br /&gt;\n"</span><span class="keyword">;<br />  }<br />}<br /></span><span class="default">?&gt;<br /></span><br />Result looks like:<br /><br />[ a_mydirectory ]<br />[ b_mydirectory ]<br />[ c_mydirectory ]<br />...<br />a_myfile.htm<br />b_myfile.css<br />c_myfile.php<br />...</span></code></div>
  </div>
 </div>
  <div class="note" id="9583">  <div class="votes">
    <div id="Vu9583">
    <a href="https://www.php.net/manual/vote-note.php?id=9583&amp;page=function.ftp-nlist&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd9583">
    <a href="https://www.php.net/manual/vote-note.php?id=9583&amp;page=function.ftp-nlist&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V9583" title="33% like this...">
    -1
    </div>
  </div>
  <a href="function.ftp-nlist.php.html#9583" class="name">
  <strong class="user"><em>markw at altexa dot com</em></strong></a><a class="genanchor" href="function.ftp-nlist.php.html#9583"> &para;</a><div class="date" title="2000-11-13 12:33"><strong>23 years ago</strong></div>
  <div class="text" id="Hcom9583">
<div class="phpcode"><code><span class="html">You can do a wildcard file listing with ftp_nlist, as in:<br /><br />$list=ftp_nlist($conn_id, "$dir/*.txt");</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.ftp-nlist&amp;redirect=https://www.php.net/manual/ru/function.ftp-nlist.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.ftp.php.html">Функции FTP</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.ftp-alloc.php.html" title="ftp_&#8203;alloc">ftp_&#8203;alloc</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-append.php.html" title="ftp_&#8203;append">ftp_&#8203;append</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-cdup.php.html" title="ftp_&#8203;cdup">ftp_&#8203;cdup</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-chdir.php.html" title="ftp_&#8203;chdir">ftp_&#8203;chdir</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-chmod.php.html" title="ftp_&#8203;chmod">ftp_&#8203;chmod</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-close.php.html" title="ftp_&#8203;close">ftp_&#8203;close</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-connect.php.html" title="ftp_&#8203;connect">ftp_&#8203;connect</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-delete.php.html" title="ftp_&#8203;delete">ftp_&#8203;delete</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-exec.php.html" title="ftp_&#8203;exec">ftp_&#8203;exec</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-fget.php.html" title="ftp_&#8203;fget">ftp_&#8203;fget</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-fput.php.html" title="ftp_&#8203;fput">ftp_&#8203;fput</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-get-option.php.html" title="ftp_&#8203;get_&#8203;option">ftp_&#8203;get_&#8203;option</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-get.php.html" title="ftp_&#8203;get">ftp_&#8203;get</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-login.php.html" title="ftp_&#8203;login">ftp_&#8203;login</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-mdtm.php.html" title="ftp_&#8203;mdtm">ftp_&#8203;mdtm</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-mkdir.php.html" title="ftp_&#8203;mkdir">ftp_&#8203;mkdir</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-mlsd.php.html" title="ftp_&#8203;mlsd">ftp_&#8203;mlsd</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-nb-continue.php.html" title="ftp_&#8203;nb_&#8203;continue">ftp_&#8203;nb_&#8203;continue</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-nb-fget.php.html" title="ftp_&#8203;nb_&#8203;fget">ftp_&#8203;nb_&#8203;fget</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-nb-fput.php.html" title="ftp_&#8203;nb_&#8203;fput">ftp_&#8203;nb_&#8203;fput</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-nb-get.php.html" title="ftp_&#8203;nb_&#8203;get">ftp_&#8203;nb_&#8203;get</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-nb-put.php.html" title="ftp_&#8203;nb_&#8203;put">ftp_&#8203;nb_&#8203;put</a>
                        </li>
                                                <li class="current">
                            <a href="function.ftp-nlist.php.html" title="ftp_&#8203;nlist">ftp_&#8203;nlist</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-pasv.php.html" title="ftp_&#8203;pasv">ftp_&#8203;pasv</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-put.php.html" title="ftp_&#8203;put">ftp_&#8203;put</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-pwd.php.html" title="ftp_&#8203;pwd">ftp_&#8203;pwd</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-quit.php.html" title="ftp_&#8203;quit">ftp_&#8203;quit</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-raw.php.html" title="ftp_&#8203;raw">ftp_&#8203;raw</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-rawlist.php.html" title="ftp_&#8203;rawlist">ftp_&#8203;rawlist</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-rename.php.html" title="ftp_&#8203;rename">ftp_&#8203;rename</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-rmdir.php.html" title="ftp_&#8203;rmdir">ftp_&#8203;rmdir</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-set-option.php.html" title="ftp_&#8203;set_&#8203;option">ftp_&#8203;set_&#8203;option</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-site.php.html" title="ftp_&#8203;site">ftp_&#8203;site</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-size.php.html" title="ftp_&#8203;size">ftp_&#8203;size</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-ssl-connect.php.html" title="ftp_&#8203;ssl_&#8203;connect">ftp_&#8203;ssl_&#8203;connect</a>
                        </li>
                                                <li class="">
                            <a href="function.ftp-systype.php.html" title="ftp_&#8203;systype">ftp_&#8203;systype</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
