<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: get_headers - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.get-headers.php.html">
 <link rel="shorturl" href="https://www.php.net/get-headers">
 <link rel="alternate" href="https://www.php.net/get-headers" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.url.php.html">
 <link rel="prev" href="function.base64-encode.php.html">
 <link rel="next" href="function.get-meta-tags.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.get-headers.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.get-headers.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.get-headers.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.get-headers.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.get-headers.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.get-headers.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.get-headers.php" hreflang="pt_BR">
 <link rel="alternate" href="function.get-headers.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.get-headers.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.get-headers.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.get-meta-tags.php.html">
          get_meta_tags &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.base64-encode.php.html">
          &laquo; base64_encode        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.basic.other.php.html'>Другие базовые модули</a></li>      <li><a href='book.url.php.html'>URL</a></li>      <li><a href='ref.url.php.html'>Функции URL</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.get-headers.php'>English</option>
            <option value='de/function.get-headers.php'>German</option>
            <option value='es/function.get-headers.php'>Spanish</option>
            <option value='fr/function.get-headers.php'>French</option>
            <option value='it/function.get-headers.php'>Italian</option>
            <option value='ja/function.get-headers.php'>Japanese</option>
            <option value='pt_BR/function.get-headers.php'>Brazilian Portuguese</option>
            <option value='ru/function.get-headers.php' selected="selected">Russian</option>
            <option value='tr/function.get-headers.php'>Turkish</option>
            <option value='zh/function.get-headers.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/url/functions/get-headers.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.get-headers%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.get-headers" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">get_headers</h1>
  <p class="verinfo">(PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">get_headers</span> &mdash; <span class="dc-title">Возвращает все заголовки из ответа сервера на HTTP-запрос</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.get-headers-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>get_headers</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$url</code></span>, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$associative</code><span class="initializer"> = <strong><code>false</code></strong></span></span>, <span class="methodparam"><span class="type">?</span><span class="type"><span class="type">resource</span><span class="type"></span></span> <code class="parameter">$context</code><span class="initializer"> = <strong><code>null</code></strong></span></span>): <span class="type"><span class="type">array</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>get_headers()</strong></span> возвращает массив с заголовками из ответа
   сервера на HTTP-запрос.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.get-headers-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">url</code></dt>

     <dd>

      <p class="para">
       Целевой URL.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">associative</code></dt>

     <dd>

      <p class="para">
       Если необязательный параметр <code class="parameter">associative</code>
       установлен в ненулевое значение, <span class="function"><strong>get_headers()</strong></span>
       разберёт ответ сервера и установит ключи для возвращаемого массива.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">context</code></dt>

     <dd>

      <p class="para">
       Корректный контекст ресурса, созданный с помощью
       <span class="function"><a href="function.stream-context-create.php.html" class="function">stream_context_create()</a></span> или <strong><code>null</code></strong>, чтобы
       использовать контекст ресурса по умолчанию.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.get-headers-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает индексированный или ассоциативный массив с заголовками ответа
   или <strong><code>false</code></strong> при возникновении ошибки.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.get-headers-changelog">
  <h3 class="title">Список изменений</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Версия</th>
       <th>Описание</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>8.0.0</td>
       <td>
        Тип параметра <code class="parameter">associative</code> был изменён с целого числа (<span class="type">int</span>) на логическое значение (<span class="type">bool</span>).
       </td>
      </tr>

      <tr>
       <td>7.1.0</td>
       <td>
        Добавлен параметр <code class="parameter">context</code>.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.get-headers-examples">
 <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Пример #1 Пример использования <span class="function"><strong>get_headers()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$url </span><span style="color: #007700">= </span><span style="color: #DD0000">'http://www.example.com'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">get_headers</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">get_headers</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">, </span><span style="color: #0000BB">true</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Вывод приведённого примера будет похож на:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; HTTP/1.1 200 OK
    [1] =&gt; Date: Sat, 29 May 2004 12:28:13 GMT
    [2] =&gt; Server: Apache/1.3.27 (Unix)  (Red-Hat/Linux)
    [3] =&gt; Last-Modified: Wed, 08 Jan 2003 23:11:55 GMT
    [4] =&gt; ETag: &quot;3f80f-1b6-3e1cb03b&quot;
    [5] =&gt; Accept-Ranges: bytes
    [6] =&gt; Content-Length: 438
    [7] =&gt; Connection: close
    [8] =&gt; Content-Type: text/html
)

Array
(
    [0] =&gt; HTTP/1.1 200 OK
    [Date] =&gt; Sat, 29 May 2004 12:28:14 GMT
    [Server] =&gt; Apache/1.3.27 (Unix)  (Red-Hat/Linux)
    [Last-Modified] =&gt; Wed, 08 Jan 2003 23:11:55 GMT
    [ETag] =&gt; &quot;3f80f-1b6-3e1cb03b&quot;
    [Accept-Ranges] =&gt; bytes
    [Content-Length] =&gt; 438
    [Connection] =&gt; close
    [Content-Type] =&gt; text/html
)
</pre></div>
    </div>
   </div>
   <div class="example" id="">
    <p><strong>Пример #2 Пример использования запроса HEAD в функции<span class="function"><strong>get_headers()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// По умолчанию функция get_headers использует GET-запрос для получения заголовков. Если<br />// вы хотите вместо него отправить HEAD-запрос, то это можно сделать, используя контекста потока:<br /></span><span style="color: #0000BB">$context </span><span style="color: #007700">= </span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">(<br />    [<br />        </span><span style="color: #DD0000">'http' </span><span style="color: #007700">=&gt; array(<br />            </span><span style="color: #DD0000">'method' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'HEAD'<br />        </span><span style="color: #007700">)<br />    ]<br />);<br /></span><span style="color: #0000BB">$headers </span><span style="color: #007700">= </span><span style="color: #0000BB">get_headers</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://example.com'</span><span style="color: #007700">, </span><span style="color: #0000BB">false</span><span style="color: #007700">, </span><span style="color: #0000BB">$context</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.get-headers-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.apache-request-headers.php.html" class="function" rel="rdfs-seeAlso">apache_request_headers()</a> - Получает список всех заголовков HTTP-запроса</span></li>
   </ul>
  </p>
 </div>


</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.get-headers&amp;redirect=https://www.php.net/manual/ru/function.get-headers.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">17 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="97684">  <div class="votes">
    <div id="Vu97684">
    <a href="https://www.php.net/manual/vote-note.php?id=97684&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd97684">
    <a href="https://www.php.net/manual/vote-note.php?id=97684&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V97684" title="73% like this...">
    59
    </div>
  </div>
  <a href="function.get-headers.php.html#97684" class="name">
  <strong class="user"><em>nick at innovaweb dot co dot uk</em></strong></a><a class="genanchor" href="function.get-headers.php.html#97684"> &para;</a><div class="date" title="2010-05-02 05:28"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom97684">
<div class="phpcode"><code><span class="html">Seems like there are some people who are looking for only the 3-digit HTTP response code  - here is a quick and nasty solution:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">get_http_response_code</span><span class="keyword">(</span><span class="default">$theURL</span><span class="keyword">) {<br />    </span><span class="default">$headers </span><span class="keyword">= </span><span class="default">get_headers</span><span class="keyword">(</span><span class="default">$theURL</span><span class="keyword">);<br />    return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$headers</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">9</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br />}<br /></span><span class="default">?&gt;<br /></span><br />How easy is that? Echo the function containing the URL you want to check the response code for, and voilà. Custom redirects, alternative for blocked is_file() or flie_exists() functions (like I seem to have on my servers) hence the cheap workaround. But hey - it works!<br /><br />Pudding</span></code></div>
  </div>
 </div>
  <div class="note" id="55216">  <div class="votes">
    <div id="Vu55216">
    <a href="https://www.php.net/manual/vote-note.php?id=55216&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd55216">
    <a href="https://www.php.net/manual/vote-note.php?id=55216&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V55216" title="71% like this...">
    3
    </div>
  </div>
  <a href="function.get-headers.php.html#55216" class="name">
  <strong class="user"><em>sey at sey dot prometheus-designs dot net</em></strong></a><a class="genanchor" href="function.get-headers.php.html#55216"> &para;</a><div class="date" title="2005-07-27 04:10"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom55216">
<div class="phpcode"><code><span class="html">The replacement updated get_headers function by aeontech at gmail dot com improperly formats dates when $format = 1.<br /><br />Replace:<br />&lt;?<br />else {<br />$headers[strtolower($h2[0])] = trim($h2[1]);<br />}<br />?&gt;<br /><br />With:<br />&lt;?<br />else {    <br />$foo = implode( ':', $h2 );<br />$foo = preg_replace( '/[a-zA-Z- ]*: /', '', $foo );<br />$headers[strtolower($h2[0])] = trim( $foo );<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="120075">  <div class="votes">
    <div id="Vu120075">
    <a href="https://www.php.net/manual/vote-note.php?id=120075&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd120075">
    <a href="https://www.php.net/manual/vote-note.php?id=120075&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V120075" title="65% like this...">
    6
    </div>
  </div>
  <a href="function.get-headers.php.html#120075" class="name">
  <strong class="user"><em>bunny at bunny dot hu</em></strong></a><a class="genanchor" href="function.get-headers.php.html#120075"> &para;</a><div class="date" title="2016-10-22 02:26"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom120075">
<div class="phpcode"><code><span class="html">If the URL redirected and the new target is also redirected, we got the Locations in array. Also we got the HTTP codes in a number indexed values. <br /><br />Here a PART of the header (not all), how it is look like with this redirection chain ( the id=4 is the landing page):<br />/test.php?id=1 -&gt; /test.php?id=2 -&gt; /test.php?id=3 -&gt; /test.php?id=4<br /><br />array <br />(<br />    [0] =&gt; HTTP/1.1 302 Moved Temporarily<br /><br />    [Location] =&gt; Array<br />        (<br />            [0] =&gt; /test.php?id=2<br />            [1] =&gt; /test.php?id=3<br />            [2] =&gt; /test.php?id=4<br />        )<br /><br />    [1] =&gt; HTTP/1.1 302 Moved Temporarily<br />    [2] =&gt; HTTP/1.1 302 Moved Temporarily<br />    [3] =&gt; HTTP/1.1 200 OK<br />)<br /><br />In a typical situation we need only the landing page information, so here is a small code to get it:<br /><br />$result = array();<br />$header = get_headers($url, 1);<br />foreach ($header as $key=&gt;$value) {<br />    if (is_array($value)) {<br />        $value = end($value);<br />    }<br />    $result[$key] = $value;<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="112652">  <div class="votes">
    <div id="Vu112652">
    <a href="https://www.php.net/manual/vote-note.php?id=112652&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd112652">
    <a href="https://www.php.net/manual/vote-note.php?id=112652&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V112652" title="61% like this...">
    10
    </div>
  </div>
  <a href="function.get-headers.php.html#112652" class="name">
  <strong class="user"><em>Jim Greene</em></strong></a><a class="genanchor" href="function.get-headers.php.html#112652"> &para;</a><div class="date" title="2013-07-09 02:47"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom112652">
<div class="phpcode"><code><span class="html">I know you're not supposed to reference other notes, but sincere props to Nick at Innovaweb's comment, for which I base this addition to his idea:<br /><br />If you use that function, it will return a string, which is great if you are checking for only files that return 404, or 200, or whatnot.  If you cast the string value to an integer, you can perform mathematical comparison on it.  <br /><br />For example:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">get_http_response_code</span><span class="keyword">(</span><span class="default">$theURL</span><span class="keyword">) {<br />    </span><span class="default">$headers </span><span class="keyword">= </span><span class="default">get_headers</span><span class="keyword">(</span><span class="default">$theURL</span><span class="keyword">);<br />    return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$headers</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">9</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br />}<br /><br />if(</span><span class="default">intval</span><span class="keyword">(</span><span class="default">get_http_response_code</span><span class="keyword">(</span><span class="string">'filename.jpg'</span><span class="keyword">)) &lt; </span><span class="default">400</span><span class="keyword">){<br /></span><span class="comment">// File exists, huzzah!<br /></span><span class="keyword">}<br /></span><span class="default">?&gt;<br /></span><br />Rule of thumb is if the response is less than 400, then the file's there, even if it doesn't return 200.</span></code></div>
  </div>
 </div>
  <div class="note" id="116753">  <div class="votes">
    <div id="Vu116753">
    <a href="https://www.php.net/manual/vote-note.php?id=116753&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116753">
    <a href="https://www.php.net/manual/vote-note.php?id=116753&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116753" title="64% like this...">
    5
    </div>
  </div>
  <a href="function.get-headers.php.html#116753" class="name">
  <strong class="user"><em>cees at cornelisdigitaal dot nl</em></strong></a><a class="genanchor" href="function.get-headers.php.html#116753"> &para;</a><div class="date" title="2015-02-23 09:20"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom116753">
<div class="phpcode"><code><span class="html">@Jim Greene:<br /><br />if the URL does not exist, it returns incomplete headers, making the substring default to rubbish.<br /><br />The integer value of rubbish is always 0. So your lower than 400 does not always means it exists!</span></code></div>
  </div>
 </div>
  <div class="note" id="123234">  <div class="votes">
    <div id="Vu123234">
    <a href="https://www.php.net/manual/vote-note.php?id=123234&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123234">
    <a href="https://www.php.net/manual/vote-note.php?id=123234&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123234" title="62% like this...">
    6
    </div>
  </div>
  <a href="function.get-headers.php.html#123234" class="name">
  <strong class="user"><em>mcilva</em></strong></a><a class="genanchor" href="function.get-headers.php.html#123234"> &para;</a><div class="date" title="2018-10-15 05:17"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom123234">
<div class="phpcode"><code><span class="html">How to check if a url points to a valid video<br /><br /><span class="default">&lt;?php <br /></span><span class="keyword">function </span><span class="default">isVideo</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">){<br />    </span><span class="default">$url </span><span class="keyword">= </span><span class="default">get_headers</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />    if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">[</span><span class="string">'Content-Type'</span><span class="keyword">])){ </span><span class="comment">//In some responses Content-type is an array<br />        </span><span class="default">$video </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">[</span><span class="string">'Content-Type'</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">],</span><span class="string">'video'</span><span class="keyword">);<br />    }else{<br />        </span><span class="default">$video </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">[</span><span class="string">'Content-Type'</span><span class="keyword">],</span><span class="string">'video'</span><span class="keyword">);<br />    }<br />    if(</span><span class="default">$video </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">)<br />        return </span><span class="default">true</span><span class="keyword">;<br />    <br />    return </span><span class="default">false</span><span class="keyword">;<br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="113741">  <div class="votes">
    <div id="Vu113741">
    <a href="https://www.php.net/manual/vote-note.php?id=113741&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd113741">
    <a href="https://www.php.net/manual/vote-note.php?id=113741&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V113741" title="62% like this...">
    7
    </div>
  </div>
  <a href="function.get-headers.php.html#113741" class="name">
  <strong class="user"><em>Kubo2</em></strong></a><a class="genanchor" href="function.get-headers.php.html#113741"> &para;</a><div class="date" title="2013-11-24 09:55"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom113741">
<div class="phpcode"><code><span class="html">If you don't want to display Warning when get_headers() function fails, you can simply add at-sign (@) before it.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">// in failure, Warning will be hidden and false returned<br /></span><span class="default">$withoutWarning </span><span class="keyword">= @</span><span class="default">get_headers</span><span class="keyword">(</span><span class="string">"<a href="http://www.some-domain.com" rel="nofollow" target="_blank">http://www.some-domain.com</a>"</span><span class="keyword">);<br /><br /></span><span class="comment">// in  failure, Warning displays and false will be returned, too<br /></span><span class="default">$withWarning </span><span class="keyword">= </span><span class="default">get_headers</span><span class="keyword">(</span><span class="string">"<a href="http://www.some-domain.com" rel="nofollow" target="_blank">http://www.some-domain.com</a>"</span><span class="keyword">);<br /><br /></span><span class="comment">// bool(false)<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$withoutWarning</span><span class="keyword">);<br /></span><span class="comment">// bool(false)<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$withWarning</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="100113">  <div class="votes">
    <div id="Vu100113">
    <a href="https://www.php.net/manual/vote-note.php?id=100113&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd100113">
    <a href="https://www.php.net/manual/vote-note.php?id=100113&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V100113" title="61% like this...">
    8
    </div>
  </div>
  <a href="function.get-headers.php.html#100113" class="name">
  <strong class="user"><em>Weboide</em></strong></a><a class="genanchor" href="function.get-headers.php.html#100113"> &para;</a><div class="date" title="2010-09-25 06:13"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom100113">
<div class="phpcode"><code><span class="html">Note that get_headers **WILL follow redirections** (HTTP redirections). New headers will be appended to the array if $format=0. If $format=1 each redundant header will be an array of multiple values, one for each redirection.<br /><br />For example:<br /><br /><span class="default">&lt;?php<br />$url </span><span class="keyword">= </span><span class="string">'<a href="http://google.com" rel="nofollow" target="_blank">http://google.com</a>'</span><span class="keyword">;<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">get_headers</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">));<br /></span><span class="comment">/*array(18) {<br />  [0]=&gt;  string(30) "HTTP/1.0 301 Moved Permanently"<br />  [1]=&gt;  string(32) "Location: <a href="http://www.google.com/" rel="nofollow" target="_blank">http://www.google.com/</a>"<br />  [2]=&gt;  string(38) "Content-Type: text/html; charset=UTF-8"<br />  [3]=&gt;  string(35) "Date: Sun, 26 Sep 2010 00:59:50 GMT"<br />  [4]=&gt;  string(38) "Expires: Tue, 26 Oct 2010 00:59:50 GMT"<br />  [5]=&gt;  string(38) "Cache-Control: public, max-age=2592000"<br />....<br />  string(15) "HTTP/1.0 200 OK"<br />  [10]=&gt;  string(35) "Date: Sun, 26 Sep 2010 00:59:51 GMT"<br />  [11]=&gt;  string(11) "Expires: -1"<br />  [12]=&gt;  string(33) "Cache-Control: private, max-age=0"<br />.....<br />}*/<br /><br />/*===========================*/<br /><br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">get_headers</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">));<br /></span><span class="comment">/*array(11) {<br />  [0]=&gt;<br />  string(30) "HTTP/1.0 301 Moved Permanently"<br />  ["Location"]=&gt;  string(22) "<a href="http://www.google.com/" rel="nofollow" target="_blank">http://www.google.com/</a>"<br />  ["Content-Type"]=&gt;  array(2) {<br />    [0]=&gt;    string(24) "text/html; charset=UTF-8"<br />    [1]=&gt;    string(29) "text/html; charset=ISO-8859-1"<br />  }<br />  ["Date"]=&gt;  array(2) {<br />    [0]=&gt;    string(29) "Sun, 26 Sep 2010 01:03:39 GMT"<br />    [1]=&gt;    string(29) "Sun, 26 Sep 2010 01:03:39 GMT"<br />  }<br />  ["Expires"]=&gt;  array(2) {<br />    [0]=&gt;    string(29) "Tue, 26 Oct 2010 01:03:39 GMT"<br />    [1]=&gt;    string(2) "-1"<br />  }<br />  ["Cache-Control"]=&gt;  array(2) {<br />    [0]=&gt;    string(23) "public, max-age=2592000"<br />    [1]=&gt;    string(18) "private, max-age=0"<br />  }<br />.....<br />}*/<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="117189">  <div class="votes">
    <div id="Vu117189">
    <a href="https://www.php.net/manual/vote-note.php?id=117189&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117189">
    <a href="https://www.php.net/manual/vote-note.php?id=117189&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117189" title="60% like this...">
    5
    </div>
  </div>
  <a href="function.get-headers.php.html#117189" class="name">
  <strong class="user"><em>pegasus at vaultwiki dot org</em></strong></a><a class="genanchor" href="function.get-headers.php.html#117189"> &para;</a><div class="date" title="2015-04-29 02:41"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom117189">
<div class="phpcode"><code><span class="html">Note that get_headers should not be used against a URL that was gathered via user input. The timeout option in the stream context only affects the idle time between data in the stream. It does not affect connection time or the overall time of the request. <br /><br />(Unfortunately, this is not mentioned in the docs for the timeout option, but has been discussed in a number of code discussions elsewhere, and I have done my own tests to confirm the conclusions of those discussions.)<br /><br />Thus it is very easy for a user to give you a URL that acts like a Slowloris attack - feeding your get_headers function 1 header only often enough to avoid the stream timeout.<br /><br />If you are publishing your code, even default_socket_timeout cannot be relied on to remedy this, because it is broken for the HTTPS protocol on many but the more recent versions of PHP: <a href="https://bugs.php.net/bug.php?id=41631" rel="nofollow" target="_blank">https://bugs.php.net/bug.php?id=41631</a><br /><br />With get_headers accepting user input, it can be very easy for an attacker to make all of your PHP child processes become busy.<br /><br />Instead, use cURL functions to get headers for a URL provided by the user and parse those headers manually, as CURLOPT_TIMEOUT applies to the entire request.</span></code></div>
  </div>
 </div>
  <div class="note" id="56770">  <div class="votes">
    <div id="Vu56770">
    <a href="https://www.php.net/manual/vote-note.php?id=56770&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd56770">
    <a href="https://www.php.net/manual/vote-note.php?id=56770&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V56770" title="62% like this...">
    2
    </div>
  </div>
  <a href="function.get-headers.php.html#56770" class="name">
  <strong class="user"><em>stuart at sixletterwords dot com</em></strong></a><a class="genanchor" href="function.get-headers.php.html#56770"> &para;</a><div class="date" title="2005-09-14 12:52"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom56770">
<div class="phpcode"><code><span class="html">hey, i came across this afew weeks ago and used the function in an app for recording info about domains that my company owns, and found that the status this returns was wrong most of the time (400 bad request or void for sites that were clearly online). then looking into it i noticed the problem was that it wasn't able to get the correct info about sites with redirections. but thats not the full problem because everything on my server was returning the wrong status too. i searched around on php.net for other info and found that fsockopen's example worked better and only needed some tweeking.<br /><br />heres the function i put together from it and a small change.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">if(!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'get_headers'</span><span class="keyword">)) {<br />   function </span><span class="default">get_headers</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="default">$format</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">,</span><span class="default">$httpn</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">){<br />    </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fsockopen</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">, </span><span class="default">$errno</span><span class="keyword">, </span><span class="default">$errstr</span><span class="keyword">, </span><span class="default">30</span><span class="keyword">);<br />    if (</span><span class="default">$fp</span><span class="keyword">) {<br />       </span><span class="default">$out </span><span class="keyword">= </span><span class="string">"GET / HTTP/1.1\r\n"</span><span class="keyword">;<br />       </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">"Host: </span><span class="default">$url</span><span class="string">\r\n"</span><span class="keyword">;<br />       </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">"Connection: Close\r\n\r\n"</span><span class="keyword">;<br />       </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$out</span><span class="keyword">);<br />       while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">)) {<br />           </span><span class="default">$var</span><span class="keyword">.=</span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1280</span><span class="keyword">);<br />       }<br /><br />    </span><span class="default">$var</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"&lt;"</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">);<br />    </span><span class="default">$var</span><span class="keyword">=</span><span class="default">$var</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />    </span><span class="default">$var</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">);<br />    </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />    return </span><span class="default">$var</span><span class="keyword">;<br />    }<br />    }<br />}<br /></span><span class="default">?&gt;<br /></span><br />this returns an array of the header (only problem being that if the site doesn't have correct html it'll pull in some content too).<br /><br />hope this'll help someone else.</span></code></div>
  </div>
 </div>
  <div class="note" id="119497">  <div class="votes">
    <div id="Vu119497">
    <a href="https://www.php.net/manual/vote-note.php?id=119497&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd119497">
    <a href="https://www.php.net/manual/vote-note.php?id=119497&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V119497" title="57% like this...">
    4
    </div>
  </div>
  <a href="function.get-headers.php.html#119497" class="name">
  <strong class="user"><em>sidnash56 at gmail dot com</em></strong></a><a class="genanchor" href="function.get-headers.php.html#119497"> &para;</a><div class="date" title="2016-06-21 11:30"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom119497">
<div class="phpcode"><code><span class="html">To check URL validity, this has been working nicely for me:<br /><br />function url_valid(&amp;$url) {<br />  $file_headers = @get_headers($url);<br />  if ($file_headers === false) return false; // when server not found<br />  foreach($file_headers as $header) { // parse all headers:<br />    // corrects $url when 301/302 redirect(s) lead(s) to 200:<br />    if(preg_match("/^Location: (http.+)$/",$header,$m)) $url=$m[1]; <br />    // grabs the last $header $code, in case of redirect(s):<br />    if(preg_match("/^HTTP.+\s(\d\d\d)\s/",$header,$m)) $code=$m[1]; <br />  } // End foreach...<br />  if($code==200) return true; // $code 200 == all OK<br />  else return false; // All else has failed, so this must be a bad link<br />} // End function url_exists</span></code></div>
  </div>
 </div>
  <div class="note" id="95917">  <div class="votes">
    <div id="Vu95917">
    <a href="https://www.php.net/manual/vote-note.php?id=95917&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd95917">
    <a href="https://www.php.net/manual/vote-note.php?id=95917&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V95917" title="60% like this...">
    1
    </div>
  </div>
  <a href="function.get-headers.php.html#95917" class="name">
  <strong class="user"><em>php at hm2k dot org</em></strong></a><a class="genanchor" href="function.get-headers.php.html#95917"> &para;</a><div class="date" title="2010-01-28 10:20"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom95917">
<div class="phpcode"><code><span class="html"><span class="default">&lt;?php<br /></span><span class="comment">/**<br /> * Fetches all the real headers sent by the server in response to a HTTP request without redirects<br /> *<br /> * @link      <a href="http://php.net/function.get_headers" rel="nofollow" target="_blank">http://php.net/function.get_headers</a><br /> * @link      <a href="http://bugs.php.net/bug.php?id=50719" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=50719</a> <br /> */<br /><br /></span><span class="keyword">function </span><span class="default">get_real_headers</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="default">$format</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">,</span><span class="default">$follow_redirect</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />  if (!</span><span class="default">$follow_redirect</span><span class="keyword">) {<br />    </span><span class="comment">//set new default options<br />    </span><span class="default">$opts </span><span class="keyword">= array(</span><span class="string">'http' </span><span class="keyword">=&gt;<br />        array(</span><span class="string">'max_redirects'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="string">'ignore_errors'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">)<br />    );<br />    </span><span class="default">stream_context_get_default</span><span class="keyword">(</span><span class="default">$opts</span><span class="keyword">);<br />  }<br />  </span><span class="comment">//get headers<br />    </span><span class="default">$headers</span><span class="keyword">=</span><span class="default">get_headers</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="default">$format</span><span class="keyword">);<br />    </span><span class="comment">//restore default options<br />  </span><span class="keyword">if (isset(</span><span class="default">$opts</span><span class="keyword">)) {<br />    </span><span class="default">$opts </span><span class="keyword">= array(</span><span class="string">'http' </span><span class="keyword">=&gt;<br />        array(</span><span class="string">'max_redirects'</span><span class="keyword">=&gt;</span><span class="default">20</span><span class="keyword">,</span><span class="string">'ignore_errors'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">)<br />    );<br />    </span><span class="default">stream_context_get_default</span><span class="keyword">(</span><span class="default">$opts</span><span class="keyword">);<br />  }<br />  </span><span class="comment">//return<br />    </span><span class="keyword">return </span><span class="default">$headers</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="83976">  <div class="votes">
    <div id="Vu83976">
    <a href="https://www.php.net/manual/vote-note.php?id=83976&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd83976">
    <a href="https://www.php.net/manual/vote-note.php?id=83976&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V83976" title="60% like this...">
    1
    </div>
  </div>
  <a href="function.get-headers.php.html#83976" class="name">
  <strong class="user"><em>info at marc-gutt dot de</em></strong></a><a class="genanchor" href="function.get-headers.php.html#83976"> &para;</a><div class="date" title="2008-06-21 05:04"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom83976">
<div class="phpcode"><code><span class="html">Should be the same than the original get_headers():<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'get_headers'</span><span class="keyword">)) {<br />function </span><span class="default">get_headers</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />    </span><span class="default">$headers </span><span class="keyword">= array();<br />    </span><span class="default">$url </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);<br />    </span><span class="default">$host </span><span class="keyword">= isset(</span><span class="default">$url</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">]) ? </span><span class="default">$url</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">] : </span><span class="string">''</span><span class="keyword">;<br />    </span><span class="default">$port </span><span class="keyword">= isset(</span><span class="default">$url</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">]) ? </span><span class="default">$url</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">] : </span><span class="default">80</span><span class="keyword">;<br />    </span><span class="default">$path </span><span class="keyword">= (isset(</span><span class="default">$url</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">]) ? </span><span class="default">$url</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">] : </span><span class="string">'/'</span><span class="keyword">) . (isset(</span><span class="default">$url</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">]) ? </span><span class="string">'?' </span><span class="keyword">. </span><span class="default">$url</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">] : </span><span class="string">''</span><span class="keyword">);<br />    </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fsockopen</span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">, </span><span class="default">$port</span><span class="keyword">, </span><span class="default">$errno</span><span class="keyword">, </span><span class="default">$errstr</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br />    if (</span><span class="default">$fp</span><span class="keyword">)<br />    {<br />        </span><span class="default">$hdr </span><span class="keyword">= </span><span class="string">"GET </span><span class="default">$path</span><span class="string"> HTTP/1.1\r\n"</span><span class="keyword">;<br />        </span><span class="default">$hdr </span><span class="keyword">.= </span><span class="string">"Host: </span><span class="default">$host</span><span class="string"> \r\n"</span><span class="keyword">;<br />        </span><span class="default">$hdr </span><span class="keyword">.= </span><span class="string">"Connection: Close\r\n\r\n"</span><span class="keyword">;<br />        </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$hdr</span><span class="keyword">);<br />        while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">) &amp;&amp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1024</span><span class="keyword">)))<br />        {<br />            if (</span><span class="default">$line </span><span class="keyword">== </span><span class="string">"\r\n"</span><span class="keyword">) break;<br />            list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">': '</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />            if (</span><span class="default">$format</span><span class="keyword">)<br />                if (</span><span class="default">$val</span><span class="keyword">) </span><span class="default">$headers</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />                else </span><span class="default">$headers</span><span class="keyword">[] = </span><span class="default">$key</span><span class="keyword">;<br />            else </span><span class="default">$headers</span><span class="keyword">[] = </span><span class="default">$line</span><span class="keyword">;<br />        }<br />        </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />        return </span><span class="default">$headers</span><span class="keyword">;<br />    }<br />    return </span><span class="default">false</span><span class="keyword">;<br />}<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="71114">  <div class="votes">
    <div id="Vu71114">
    <a href="https://www.php.net/manual/vote-note.php?id=71114&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd71114">
    <a href="https://www.php.net/manual/vote-note.php?id=71114&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V71114" title="60% like this...">
    1
    </div>
  </div>
  <a href="function.get-headers.php.html#71114" class="name"><strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.get-headers.php.html#71114"> &para;</a><div class="date" title="2006-11-13 12:29"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom71114">
<div class="phpcode"><code><span class="html">I've noticed it.<br />Some Server will simply return the false reply header if you sent 'HEAD' request instead of 'GET'. The 'GET' request header always receiving the most actual HTTP header instead of 'HEAD' request header. But If you don't mind for a fast but risky method then 'HEAD' request is better for you.<br /><br />btw ... this is get header with additional information such as User, Pass &amp; Refferer. ... <br /><span class="default">&lt;?php<br />    </span><span class="keyword">function </span><span class="default">get_headers_x</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="default">$format</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$user</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">, </span><span class="default">$pass</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">, </span><span class="default">$referer</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">) {<br />        if (!empty(</span><span class="default">$user</span><span class="keyword">)) {<br />            </span><span class="default">$authentification </span><span class="keyword">= </span><span class="default">base64_encode</span><span class="keyword">(</span><span class="default">$user</span><span class="keyword">.</span><span class="string">':'</span><span class="keyword">.</span><span class="default">$pass</span><span class="keyword">);<br />            </span><span class="default">$authline </span><span class="keyword">= </span><span class="string">"Authorization: Basic </span><span class="default">$authentification</span><span class="string">\r\n"</span><span class="keyword">;<br />        }<br /><br />        if (!empty(</span><span class="default">$referer</span><span class="keyword">)) {<br />            </span><span class="default">$refererline </span><span class="keyword">= </span><span class="string">"Referer: </span><span class="default">$referer</span><span class="string">\r\n"</span><span class="keyword">;<br />        }<br /><br />        </span><span class="default">$url_info</span><span class="keyword">=</span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);<br />        </span><span class="default">$port </span><span class="keyword">= isset(</span><span class="default">$url_info</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">]) ? </span><span class="default">$url_info</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">] : </span><span class="default">80</span><span class="keyword">;<br />        </span><span class="default">$fp</span><span class="keyword">=</span><span class="default">fsockopen</span><span class="keyword">(</span><span class="default">$url_info</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">], </span><span class="default">$port</span><span class="keyword">, </span><span class="default">$errno</span><span class="keyword">, </span><span class="default">$errstr</span><span class="keyword">, </span><span class="default">30</span><span class="keyword">);<br />        if(</span><span class="default">$fp</span><span class="keyword">) {<br />            </span><span class="default">$head </span><span class="keyword">= </span><span class="string">"GET "</span><span class="keyword">.@</span><span class="default">$url_info</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">].</span><span class="string">"?"</span><span class="keyword">.@</span><span class="default">$url_info</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">].</span><span class="string">" HTTP/1.0\r\n"</span><span class="keyword">;<br />            if (!empty(</span><span class="default">$url_info</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">])) {<br />                </span><span class="default">$head </span><span class="keyword">.= </span><span class="string">"Host: "</span><span class="keyword">.@</span><span class="default">$url_info</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">].</span><span class="string">":"</span><span class="keyword">.</span><span class="default">$url_info</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">].</span><span class="string">"\r\n"</span><span class="keyword">;<br />            } else {<br />                </span><span class="default">$head </span><span class="keyword">.= </span><span class="string">"Host: "</span><span class="keyword">.@</span><span class="default">$url_info</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">].</span><span class="string">"\r\n"</span><span class="keyword">;<br />            }<br />            </span><span class="default">$head </span><span class="keyword">.= </span><span class="string">"Connection: Close\r\n"</span><span class="keyword">;<br />            </span><span class="default">$head </span><span class="keyword">.= </span><span class="string">"Accept: */*\r\n"</span><span class="keyword">;<br />            </span><span class="default">$head </span><span class="keyword">.= </span><span class="default">$refererline</span><span class="keyword">;<br />            </span><span class="default">$head </span><span class="keyword">.= </span><span class="default">$authline</span><span class="keyword">;<br />            </span><span class="default">$head </span><span class="keyword">.= </span><span class="string">"\r\n"</span><span class="keyword">;<br /><br />            </span><span class="default">fputs</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$head</span><span class="keyword">);       <br />            while(!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">) or (</span><span class="default">$eoheader</span><span class="keyword">==</span><span class="default">true</span><span class="keyword">)) {<br />                if(</span><span class="default">$header</span><span class="keyword">=</span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1024</span><span class="keyword">)) {<br />                    if (</span><span class="default">$header </span><span class="keyword">== </span><span class="string">"\r\n"</span><span class="keyword">) {<br />                        </span><span class="default">$eoheader </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />                        break;<br />                    } else {<br />                        </span><span class="default">$header </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">);<br />                    }<br /><br />                    if(</span><span class="default">$format </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) {<br />                    </span><span class="default">$key </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">':'</span><span class="keyword">,</span><span class="default">$header</span><span class="keyword">));<br />                        if(</span><span class="default">$key </span><span class="keyword">== </span><span class="default">$header</span><span class="keyword">) {<br />                            </span><span class="default">$headers</span><span class="keyword">[] = </span><span class="default">$header</span><span class="keyword">;<br />                        } else {<br />                            </span><span class="default">$headers</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">)+</span><span class="default">2</span><span class="keyword">);<br />                        }<br />                    unset(</span><span class="default">$key</span><span class="keyword">);<br />                    } else {<br />                        </span><span class="default">$headers</span><span class="keyword">[] = </span><span class="default">$header</span><span class="keyword">;<br />                    }<br />                } <br />            }<br />            return </span><span class="default">$headers</span><span class="keyword">;<br /><br />        } else {<br />            return </span><span class="default">false</span><span class="keyword">;<br />        }<br />    }<br /></span><span class="default">?&gt;<br /></span><br />Regards.<br />Donovan</span></code></div>
  </div>
 </div>
  <div class="note" id="55190">  <div class="votes">
    <div id="Vu55190">
    <a href="https://www.php.net/manual/vote-note.php?id=55190&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd55190">
    <a href="https://www.php.net/manual/vote-note.php?id=55190&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V55190" title="57% like this...">
    1
    </div>
  </div>
  <a href="function.get-headers.php.html#55190" class="name">
  <strong class="user"><em>drfickle2 at yahoo dot com</em></strong></a><a class="genanchor" href="function.get-headers.php.html#55190"> &para;</a><div class="date" title="2005-07-27 05:01"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom55190">
<div class="phpcode"><code><span class="html">aeontech, this the below change adds support for SSL connections. Thanks for the code!<br /><br />        if (isset($url_info['scheme']) &amp;&amp; $url_info['scheme'] == 'https') {<br />            $port = 443;<br />            $fp=fsockopen('ssl://'.$url_info['host'], $port, $errno, $errstr, 30);<br />        } else {<br />           $port = isset($url_info['port']) ? $url_info['port'] : 80;<br />            $fp=fsockopen($url_info['host'], $port, $errno, $errstr, 30);<br />        }</span></code></div>
  </div>
 </div>
  <div class="note" id="107531">  <div class="votes">
    <div id="Vu107531">
    <a href="https://www.php.net/manual/vote-note.php?id=107531&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd107531">
    <a href="https://www.php.net/manual/vote-note.php?id=107531&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V107531" title="53% like this...">
    2
    </div>
  </div>
  <a href="function.get-headers.php.html#107531" class="name">
  <strong class="user"><em>Backslider</em></strong></a><a class="genanchor" href="function.get-headers.php.html#107531"> &para;</a><div class="date" title="2012-02-15 07:06"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom107531">
<div class="phpcode"><code><span class="html">It should be noted that rather than returning "false" on failure, this function (and others) return a big phat WARNING that will halt your script in its tracks if you do not have error reporting /warning turned off.<br /><br />Thats just insane!  Any function that does something like fetch a URL should simply return false, without a warning, if the URL fails for whatever reason other than it is badly formatted.</span></code></div>
  </div>
 </div>
  <div class="note" id="83648">  <div class="votes">
    <div id="Vu83648">
    <a href="https://www.php.net/manual/vote-note.php?id=83648&amp;page=function.get-headers&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd83648">
    <a href="https://www.php.net/manual/vote-note.php?id=83648&amp;page=function.get-headers&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V83648" title="53% like this...">
    1
    </div>
  </div>
  <a href="function.get-headers.php.html#83648" class="name">
  <strong class="user"><em>php dot sirlancelot at spamgourmet dot com</em></strong></a><a class="genanchor" href="function.get-headers.php.html#83648"> &para;</a><div class="date" title="2008-06-05 01:59"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom83648">
<div class="phpcode"><code><span class="html">I tried to replicate the native behavior as much as possible for systems that don't have the get_headers() function. Here it is:<br /><span class="default">&lt;?php<br /></span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'get_headers'</span><span class="keyword">)) {<br />function </span><span class="default">get_headers</span><span class="keyword">(</span><span class="default">$Url</span><span class="keyword">, </span><span class="default">$Format</span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$Depth</span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br />    if (</span><span class="default">$Depth </span><span class="keyword">&gt; </span><span class="default">5</span><span class="keyword">) return;<br />    </span><span class="default">$Parts </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$Url</span><span class="keyword">);<br />    if (!</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="string">'path'</span><span class="keyword">, </span><span class="default">$Parts</span><span class="keyword">))   </span><span class="default">$Parts</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">] = </span><span class="string">'/'</span><span class="keyword">;<br />    if (!</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="string">'port'</span><span class="keyword">, </span><span class="default">$Parts</span><span class="keyword">))   </span><span class="default">$Parts</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">] = </span><span class="default">80</span><span class="keyword">;<br />    if (!</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="string">'scheme'</span><span class="keyword">, </span><span class="default">$Parts</span><span class="keyword">)) </span><span class="default">$Parts</span><span class="keyword">[</span><span class="string">'scheme'</span><span class="keyword">] = </span><span class="string">'http'</span><span class="keyword">;<br /><br />    </span><span class="default">$Return </span><span class="keyword">= array();<br />    </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fsockopen</span><span class="keyword">(</span><span class="default">$Parts</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">], </span><span class="default">$Parts</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">], </span><span class="default">$errno</span><span class="keyword">, </span><span class="default">$errstr</span><span class="keyword">, </span><span class="default">30</span><span class="keyword">);<br />    if (</span><span class="default">$fp</span><span class="keyword">) {<br />        </span><span class="default">$Out </span><span class="keyword">= </span><span class="string">'GET '</span><span class="keyword">.</span><span class="default">$Parts</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">].(isset(</span><span class="default">$Parts</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">]) ? </span><span class="string">'?'</span><span class="keyword">.@</span><span class="default">$Parts</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">] : </span><span class="string">''</span><span class="keyword">).</span><span class="string">" HTTP/1.1\r\n"</span><span class="keyword">.<br />               </span><span class="string">'Host: '</span><span class="keyword">.</span><span class="default">$Parts</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">].(</span><span class="default">$Parts</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">] != </span><span class="default">80 </span><span class="keyword">? </span><span class="string">':'</span><span class="keyword">.</span><span class="default">$Parts</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">] : </span><span class="string">''</span><span class="keyword">).</span><span class="string">"\r\n"</span><span class="keyword">.<br />               </span><span class="string">'Connection: Close'</span><span class="keyword">.</span><span class="string">"\r\n"</span><span class="keyword">;<br />        </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$Out</span><span class="keyword">.</span><span class="string">"\r\n"</span><span class="keyword">);<br />        </span><span class="default">$Redirect </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">; </span><span class="default">$RedirectUrl </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />        while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">) &amp;&amp; </span><span class="default">$InLine </span><span class="keyword">= </span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1280</span><span class="keyword">)) {<br />            if (</span><span class="default">$InLine </span><span class="keyword">== </span><span class="string">"\r\n"</span><span class="keyword">) break;<br />            </span><span class="default">$InLine </span><span class="keyword">= </span><span class="default">rtrim</span><span class="keyword">(</span><span class="default">$InLine</span><span class="keyword">);<br /><br />            list(</span><span class="default">$Key</span><span class="keyword">, </span><span class="default">$Value</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">': '</span><span class="keyword">, </span><span class="default">$InLine</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />            if (</span><span class="default">$Key </span><span class="keyword">== </span><span class="default">$InLine</span><span class="keyword">) {<br />                if (</span><span class="default">$Format </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">)<br />                        </span><span class="default">$Return</span><span class="keyword">[</span><span class="default">$Depth</span><span class="keyword">] = </span><span class="default">$InLine</span><span class="keyword">;<br />                else    </span><span class="default">$Return</span><span class="keyword">[] = </span><span class="default">$InLine</span><span class="keyword">;<br /><br />                if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$InLine</span><span class="keyword">, </span><span class="string">'Moved'</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">) </span><span class="default">$Redirect </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />            } else {<br />                if (</span><span class="default">$Key </span><span class="keyword">== </span><span class="string">'Location'</span><span class="keyword">) </span><span class="default">$RedirectUrl </span><span class="keyword">= </span><span class="default">$Value</span><span class="keyword">;<br />                if (</span><span class="default">$Format </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">)<br />                        </span><span class="default">$Return</span><span class="keyword">[</span><span class="default">$Key</span><span class="keyword">] = </span><span class="default">$Value</span><span class="keyword">;<br />                else    </span><span class="default">$Return</span><span class="keyword">[] = </span><span class="default">$Key</span><span class="keyword">.</span><span class="string">': '</span><span class="keyword">.</span><span class="default">$Value</span><span class="keyword">;<br />            }<br />        }<br />        </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />        if (</span><span class="default">$Redirect </span><span class="keyword">&amp;&amp; !empty(</span><span class="default">$RedirectUrl</span><span class="keyword">)) {<br />            </span><span class="default">$NewParts </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$RedirectUrl</span><span class="keyword">);<br />            if (!</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="string">'host'</span><span class="keyword">, </span><span class="default">$NewParts</span><span class="keyword">))   </span><span class="default">$RedirectUrl </span><span class="keyword">= </span><span class="default">$Parts</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">].</span><span class="default">$RedirectUrl</span><span class="keyword">;<br />            if (!</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="string">'scheme'</span><span class="keyword">, </span><span class="default">$NewParts</span><span class="keyword">)) </span><span class="default">$RedirectUrl </span><span class="keyword">= </span><span class="default">$Parts</span><span class="keyword">[</span><span class="string">'scheme'</span><span class="keyword">].</span><span class="string">'://'</span><span class="keyword">.</span><span class="default">$RedirectUrl</span><span class="keyword">;<br />            </span><span class="default">$RedirectHeaders </span><span class="keyword">= </span><span class="default">get_headers</span><span class="keyword">(</span><span class="default">$RedirectUrl</span><span class="keyword">, </span><span class="default">$Format</span><span class="keyword">, </span><span class="default">$Depth</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br />            if (</span><span class="default">$RedirectHeaders</span><span class="keyword">) </span><span class="default">$Return </span><span class="keyword">= </span><span class="default">array_merge_recursive</span><span class="keyword">(</span><span class="default">$Return</span><span class="keyword">, </span><span class="default">$RedirectHeaders</span><span class="keyword">);<br />        }<br />        return </span><span class="default">$Return</span><span class="keyword">;<br />    }<br />    return </span><span class="default">false</span><span class="keyword">;<br />}}<br /></span><span class="default">?&gt;<br /></span>The function will handle up to five redirects.<br />Enjoy!</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.get-headers&amp;redirect=https://www.php.net/manual/ru/function.get-headers.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.url.php.html">Функции URL</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.base64-decode.php.html" title="base64_&#8203;decode">base64_&#8203;decode</a>
                        </li>
                                                <li class="">
                            <a href="function.base64-encode.php.html" title="base64_&#8203;encode">base64_&#8203;encode</a>
                        </li>
                                                <li class="current">
                            <a href="function.get-headers.php.html" title="get_&#8203;headers">get_&#8203;headers</a>
                        </li>
                                                <li class="">
                            <a href="function.get-meta-tags.php.html" title="get_&#8203;meta_&#8203;tags">get_&#8203;meta_&#8203;tags</a>
                        </li>
                                                <li class="">
                            <a href="function.http-build-query.php.html" title="http_&#8203;build_&#8203;query">http_&#8203;build_&#8203;query</a>
                        </li>
                                                <li class="">
                            <a href="function.parse-url.php.html" title="parse_&#8203;url">parse_&#8203;url</a>
                        </li>
                                                <li class="">
                            <a href="function.rawurldecode.php.html" title="rawurldecode">rawurldecode</a>
                        </li>
                                                <li class="">
                            <a href="function.rawurlencode.php.html" title="rawurlencode">rawurlencode</a>
                        </li>
                                                <li class="">
                            <a href="function.urldecode.php.html" title="urldecode">urldecode</a>
                        </li>
                                                <li class="">
                            <a href="function.urlencode.php.html" title="urlencode">urlencode</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
