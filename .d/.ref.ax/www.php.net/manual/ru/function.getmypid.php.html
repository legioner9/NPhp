<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: getmypid - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.getmypid.php.html">
 <link rel="shorturl" href="https://www.php.net/getmypid">
 <link rel="alternate" href="https://www.php.net/getmypid" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.info.php.html">
 <link rel="prev" href="function.getmyinode.php.html">
 <link rel="next" href="function.getmyuid.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.getmypid.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.getmypid.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.getmypid.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.getmypid.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.getmypid.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.getmypid.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.getmypid.php" hreflang="pt_BR">
 <link rel="alternate" href="function.getmypid.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.getmypid.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.getmypid.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.getmyuid.php.html">
          getmyuid &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.getmyinode.php.html">
          &laquo; getmyinode        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.basic.php.php.html'>Изменение поведения PHP</a></li>      <li><a href='book.info.php.html'>Опции/информация PHP</a></li>      <li><a href='ref.info.php.html'>Опции PHP/информационные функции</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.getmypid.php'>English</option>
            <option value='de/function.getmypid.php'>German</option>
            <option value='es/function.getmypid.php'>Spanish</option>
            <option value='fr/function.getmypid.php'>French</option>
            <option value='it/function.getmypid.php'>Italian</option>
            <option value='ja/function.getmypid.php'>Japanese</option>
            <option value='pt_BR/function.getmypid.php'>Brazilian Portuguese</option>
            <option value='ru/function.getmypid.php' selected="selected">Russian</option>
            <option value='tr/function.getmypid.php'>Turkish</option>
            <option value='zh/function.getmypid.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/info/functions/getmypid.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.getmypid%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.getmypid" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">getmypid</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">getmypid</span> &mdash; <span class="dc-title">
   Получение ID процесса PHP
  </span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.getmypid-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>getmypid</strong></span>(): <span class="type"><span class="type">int</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   Получает идентификатор процесса PHP.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.getmypid-parameters">
  <h3 class="title">Список параметров</h3>
  
<p class="para">
 У этой функции нет параметров.
</p>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.getmypid-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает идентификатор процесса PHP или <strong><code>false</code></strong> в случае возникновения ошибки.
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.getmypid-notes">
  <h3 class="title">Примечания</h3>
  <div class="warning"><strong class="warning">Внимание</strong>
   <p class="para">
    Идентификаторы процессов в системе не уникальны, поэтому являются слабым источником энтропии.
    Мы не рекомендуем полагаться на pid в контекстах, влияющих на безопасность.
   </p>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.getmypid-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.getmygid.php.html" class="function" rel="rdfs-seeAlso">getmygid()</a> - Получить GID владельца скрипта PHP</span></li>
    <li class="member"><span class="function"><a href="function.getmyuid.php.html" class="function" rel="rdfs-seeAlso">getmyuid()</a> - Получение UID владельца скрипта PHP</span></li>
    <li class="member"><span class="function"><a href="function.get-current-user.php.html" class="function" rel="rdfs-seeAlso">get_current_user()</a> - Получает имя владельца текущего скрипта PHP</span></li>
    <li class="member"><span class="function"><a href="function.getmyinode.php.html" class="function" rel="rdfs-seeAlso">getmyinode()</a> - Получает значение inode текущего скрипта</span></li>
    <li class="member"><span class="function"><a href="function.getlastmod.php.html" class="function" rel="rdfs-seeAlso">getlastmod()</a> - Получает время последней модификации страницы</span></li>
   </ul>
  </p>
 </div>


</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.getmypid&amp;redirect=https://www.php.net/manual/ru/function.getmypid.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">14 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="112782">  <div class="votes">
    <div id="Vu112782">
    <a href="https://www.php.net/manual/vote-note.php?id=112782&amp;page=function.getmypid&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd112782">
    <a href="https://www.php.net/manual/vote-note.php?id=112782&amp;page=function.getmypid&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V112782" title="75% like this...">
    38
    </div>
  </div>
  <a href="function.getmypid.php.html#112782" class="name">
  <strong class="user"><em>Radu Cristescu</em></strong></a><a class="genanchor" href="function.getmypid.php.html#112782"> &para;</a><div class="date" title="2013-07-22 06:44"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom112782">
<div class="phpcode"><code><span class="html">The lock-file mechanism in Kevin Trass's note is incorrect because it is subject to race conditions.<br /><br />For locks you need an atomic way of verifying if a lock file exists and creating it if it doesn't exist. Between file_exists and file_put_contents, another process could be faster than us to write the lock.<br /><br />The only filesystem operation that matches the above requirements that I know of is symlink().<br /><br />Thus, if you need a lock-file mechanism, here's the code. This won't work on a system without /proc (so there go Windows, BSD, OS X, and possibly others), but it can be adapted to work around that deficiency (say, by linking to your pid file like in my script, then operating through the symlink like in Kevin's solution).<br /><br />#!/usr/bin/php<br /><span class="default">&lt;?php<br /><br />define</span><span class="keyword">(</span><span class="string">'LOCK_FILE'</span><span class="keyword">, </span><span class="string">"/var/run/" </span><span class="keyword">. </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="string">".php"</span><span class="keyword">) . </span><span class="string">".lock"</span><span class="keyword">);<br /><br />if (!</span><span class="default">tryLock</span><span class="keyword">())<br />    die(</span><span class="string">"Already running.\n"</span><span class="keyword">);<br /><br /></span><span class="comment"># remove the lock on exit (Control+C doesn't count as 'exit'?)<br /></span><span class="default">register_shutdown_function</span><span class="keyword">(</span><span class="string">'unlink'</span><span class="keyword">, </span><span class="default">LOCK_FILE</span><span class="keyword">);<br /><br /></span><span class="comment"># The rest of your script goes here....<br /></span><span class="keyword">echo </span><span class="string">"Hello world!\n"</span><span class="keyword">;<br /></span><span class="default">sleep</span><span class="keyword">(</span><span class="default">30</span><span class="keyword">);<br /><br />exit(</span><span class="default">0</span><span class="keyword">);<br /><br />function </span><span class="default">tryLock</span><span class="keyword">()<br />{<br />    </span><span class="comment"># If lock file exists, check if stale.  If exists and is not stale, return TRUE<br />    # Else, create lock file and return FALSE.<br /><br />    </span><span class="keyword">if (@</span><span class="default">symlink</span><span class="keyword">(</span><span class="string">"/proc/" </span><span class="keyword">. </span><span class="default">getmypid</span><span class="keyword">(), </span><span class="default">LOCK_FILE</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">) </span><span class="comment"># the @ in front of 'symlink' is to suppress the NOTICE you get if the LOCK_FILE exists<br />        </span><span class="keyword">return </span><span class="default">true</span><span class="keyword">;<br /><br />    </span><span class="comment"># link already exists<br />    # check if it's stale<br />    </span><span class="keyword">if (</span><span class="default">is_link</span><span class="keyword">(</span><span class="default">LOCK_FILE</span><span class="keyword">) &amp;&amp; !</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">LOCK_FILE</span><span class="keyword">))<br />    {<br />        </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">LOCK_FILE</span><span class="keyword">);<br />        </span><span class="comment"># try to lock again<br />        </span><span class="keyword">return </span><span class="default">tryLock</span><span class="keyword">();<br />    }<br /><br />    return </span><span class="default">false</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="103807">  <div class="votes">
    <div id="Vu103807">
    <a href="https://www.php.net/manual/vote-note.php?id=103807&amp;page=function.getmypid&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd103807">
    <a href="https://www.php.net/manual/vote-note.php?id=103807&amp;page=function.getmypid&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V103807" title="58% like this...">
    2
    </div>
  </div>
  <a href="function.getmypid.php.html#103807" class="name">
  <strong class="user"><em>Robert Mays Jr</em></strong></a><a class="genanchor" href="function.getmypid.php.html#103807"> &para;</a><div class="date" title="2011-05-04 09:39"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom103807">
<div class="phpcode"><code><span class="html">All of the examples above require you to have shell command execution turned on- this example uses only PHP functions and should work on any system (posix is included by default)-<br /><br />the key is posix_getsid which will return FALSE if the processes does not exist.<br /><br /><span class="default">&lt;?php <br />$lockfile </span><span class="keyword">= </span><span class="default">sys_get_temp_dir</span><span class="keyword">() . </span><span class="string">'/myScript.lock'</span><span class="keyword">; <br /></span><span class="default">$pid </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$lockfile</span><span class="keyword">); <br />if (</span><span class="default">posix_getsid</span><span class="keyword">(</span><span class="default">$pid</span><span class="keyword">) === </span><span class="default">false</span><span class="keyword">) { <br />   print </span><span class="string">"process has died! restarting...\n"</span><span class="keyword">; <br />   </span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="default">$lockfile</span><span class="keyword">, </span><span class="default">getmypid</span><span class="keyword">()); </span><span class="comment">// create lockfile <br /></span><span class="keyword">} else { <br />   print </span><span class="string">"PID is still alive! can not run twice!\n"</span><span class="keyword">; <br />   exit; <br />} <br /></span><span class="default">?&gt;</span> <br /><br />:-) perfect if you need to make sure a cron job or shell script has ended before it can be started again.<br /><br />This works across users- if the cron job is started as 'root' your 'web user' can see if the process is still alive (useful for system status pages)</span></code></div>
  </div>
 </div>
  <div class="note" id="93753">  <div class="votes">
    <div id="Vu93753">
    <a href="https://www.php.net/manual/vote-note.php?id=93753&amp;page=function.getmypid&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd93753">
    <a href="https://www.php.net/manual/vote-note.php?id=93753&amp;page=function.getmypid&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V93753" title="53% like this...">
    2
    </div>
  </div>
  <a href="function.getmypid.php.html#93753" class="name">
  <strong class="user"><em>Kevin Traas (ktraas- at -gmail dot com)</em></strong></a><a class="genanchor" href="function.getmypid.php.html#93753"> &para;</a><div class="date" title="2009-09-25 01:51"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom93753">
<div class="phpcode"><code><span class="html">Looking to create a lock-file mechanism for a cmd-line script?<br /><br />Enjoy!<br /><br />#!/usr/bin/php<br /><span class="default">&lt;?php<br /><br />define</span><span class="keyword">( </span><span class="string">'LOCK_FILE'</span><span class="keyword">, </span><span class="string">"/var/run/"</span><span class="keyword">.</span><span class="default">basename</span><span class="keyword">( </span><span class="default">$argv</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="string">".php" </span><span class="keyword">).</span><span class="string">".lock" </span><span class="keyword">);<br />if( </span><span class="default">isLocked</span><span class="keyword">() ) die( </span><span class="string">"Already running.\n" </span><span class="keyword">);<br /><br /></span><span class="comment"># The rest of your script goes here....<br /></span><span class="keyword">echo </span><span class="string">"Hello world!\n"</span><span class="keyword">;<br /></span><span class="default">sleep</span><span class="keyword">(</span><span class="default">30</span><span class="keyword">);<br /><br /></span><span class="default">unlink</span><span class="keyword">( </span><span class="default">LOCK_FILE </span><span class="keyword">);<br />exit(</span><span class="default">0</span><span class="keyword">);<br /><br />function </span><span class="default">isLocked</span><span class="keyword">()<br />{<br />    </span><span class="comment"># If lock file exists, check if stale.  If exists and is not stale, return TRUE<br />    # Else, create lock file and return FALSE.<br /><br />    </span><span class="keyword">if( </span><span class="default">file_exists</span><span class="keyword">( </span><span class="default">LOCK_FILE </span><span class="keyword">) )<br />    {<br />        </span><span class="comment"># check if it's stale<br />        </span><span class="default">$lockingPID </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">( </span><span class="default">file_get_contents</span><span class="keyword">( </span><span class="default">LOCK_FILE </span><span class="keyword">) );<br /><br />       </span><span class="comment"># Get all active PIDs.<br />        </span><span class="default">$pids </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">( </span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">trim</span><span class="keyword">( `</span><span class="string">ps -e | awk '{print $1}'</span><span class="keyword">` ) );<br /><br />        </span><span class="comment"># If PID is still active, return true<br />        </span><span class="keyword">if( </span><span class="default">in_array</span><span class="keyword">( </span><span class="default">$lockingPID</span><span class="keyword">, </span><span class="default">$pids </span><span class="keyword">) )  return </span><span class="default">true</span><span class="keyword">;<br /><br />        </span><span class="comment"># Lock-file is stale, so kill it.  Then move on to re-creating it.<br />        </span><span class="keyword">echo </span><span class="string">"Removing stale lock file.\n"</span><span class="keyword">;<br />        </span><span class="default">unlink</span><span class="keyword">( </span><span class="default">LOCK_FILE </span><span class="keyword">);<br />    }<br />    <br />    </span><span class="default">file_put_contents</span><span class="keyword">( </span><span class="default">LOCK_FILE</span><span class="keyword">, </span><span class="default">getmypid</span><span class="keyword">() . </span><span class="string">"\n" </span><span class="keyword">);<br />    return </span><span class="default">false</span><span class="keyword">;<br /><br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="113055">  <div class="votes">
    <div id="Vu113055">
    <a href="https://www.php.net/manual/vote-note.php?id=113055&amp;page=function.getmypid&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd113055">
    <a href="https://www.php.net/manual/vote-note.php?id=113055&amp;page=function.getmypid&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V113055" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.getmypid.php.html#113055" class="name">
  <strong class="user"><em>brospam at gmail dot com</em></strong></a><a class="genanchor" href="function.getmypid.php.html#113055"> &para;</a><div class="date" title="2013-08-23 10:19"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom113055">
<div class="phpcode"><code><span class="html">My lockfile system<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">isLocked</span><span class="keyword">(){<br />    if(</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">LOCK_FILE</span><span class="keyword">)) {<br />        </span><span class="default">$lockingPID </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">LOCK_FILE</span><span class="keyword">)); <br />        </span><span class="default">$test</span><span class="keyword">=</span><span class="default">trim</span><span class="keyword">(`</span><span class="string">ps -p </span><span class="default">$lockingPID</span><span class="string"> -o pid=</span><span class="keyword">`);<br />        if(!empty(</span><span class="default">$test</span><span class="keyword">)) return </span><span class="default">true</span><span class="keyword">; <br />        echo </span><span class="string">"Removing stale lock file.\n"</span><span class="keyword">; <br />        </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">LOCK_FILE</span><span class="keyword">);<br />    }<br />    </span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="default">LOCK_FILE</span><span class="keyword">, </span><span class="default">getmypid</span><span class="keyword">().</span><span class="string">"\n"</span><span class="keyword">); <br />    return </span><span class="default">false</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="36859">  <div class="votes">
    <div id="Vu36859">
    <a href="https://www.php.net/manual/vote-note.php?id=36859&amp;page=function.getmypid&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd36859">
    <a href="https://www.php.net/manual/vote-note.php?id=36859&amp;page=function.getmypid&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V36859" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.getmypid.php.html#36859" class="name">
  <strong class="user"><em>brooke at jump dot net</em></strong></a><a class="genanchor" href="function.getmypid.php.html#36859"> &para;</a><div class="date" title="2003-10-24 05:49"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom36859">
<div class="phpcode"><code><span class="html">One good use for this is deciding on a concurrency-safe temporary file or directory name. You can be assured that no two processes on the same server have the same PID, so this is enough to avoid collisions. For example:<br /><br /><span class="default">&lt;?php<br />$tmpfile </span><span class="keyword">= </span><span class="string">"/tmp/foo_"</span><span class="keyword">.</span><span class="default">getmypid</span><span class="keyword">();<br /></span><span class="comment">// Use $tmpfile...<br />// Use $tmpfile...<br />// Use $tmpfile...<br /></span><span class="default">unlink </span><span class="keyword">(</span><span class="default">$tmpfile</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />If you are sharing /tmp over the network (which is odd....) then you can, of course, mix in the PHP server's IP address.</span></code></div>
  </div>
 </div>
  <div class="note" id="104275">  <div class="votes">
    <div id="Vu104275">
    <a href="https://www.php.net/manual/vote-note.php?id=104275&amp;page=function.getmypid&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd104275">
    <a href="https://www.php.net/manual/vote-note.php?id=104275&amp;page=function.getmypid&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V104275" title="45% like this...">
    -1
    </div>
  </div>
  <a href="function.getmypid.php.html#104275" class="name">
  <strong class="user"><em>wouter99999 at gmail dot com</em></strong></a><a class="genanchor" href="function.getmypid.php.html#104275"> &para;</a><div class="date" title="2011-06-05 03:03"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom104275">
<div class="phpcode"><code><span class="html">On windows, ps is not available. Instead, to view a list of running processes, you can use exec('tasklist'); To kill processes you can use exec('taskkill); Enter taskkill /? for more information.</span></code></div>
  </div>
 </div>
  <div class="note" id="94531">  <div class="votes">
    <div id="Vu94531">
    <a href="https://www.php.net/manual/vote-note.php?id=94531&amp;page=function.getmypid&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd94531">
    <a href="https://www.php.net/manual/vote-note.php?id=94531&amp;page=function.getmypid&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V94531" title="42% like this...">
    -1
    </div>
  </div>
  <a href="function.getmypid.php.html#94531" class="name">
  <strong class="user"><em>Erickson Reyes ercbluemonday at yahoo dot com</em></strong></a><a class="genanchor" href="function.getmypid.php.html#94531"> &para;</a><div class="date" title="2009-11-10 05:01"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom94531">
<div class="phpcode"><code><span class="html">We also had this challenge in our company to prevent a php script in a cron job from overlapping each other. <br /><br />We made this solution<br /><br /><span class="default">&lt;?php<br />        </span><span class="comment">// Initialize variables<br />    </span><span class="default">$found            </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />    </span><span class="default">$file                 </span><span class="keyword">= </span><span class="default">basename</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">);<br />    </span><span class="default">$commands    </span><span class="keyword">= array();<br /><br />        </span><span class="comment">// Get running processes.<br />    </span><span class="default">exec</span><span class="keyword">(</span><span class="string">"ps w"</span><span class="keyword">, </span><span class="default">$commands</span><span class="keyword">);<br /><br />        </span><span class="comment">// If processes are found<br />    </span><span class="keyword">if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$commands</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">) {<br /><br />        foreach (</span><span class="default">$commands </span><span class="keyword">as </span><span class="default">$command</span><span class="keyword">) {<br />            if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$command</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">) === </span><span class="default">false</span><span class="keyword">) {<br />                               </span><span class="comment">// Do nothin'<br />            </span><span class="keyword">}<br />            else {<br />                               </span><span class="comment">// Let's count how many times the file is found.<br />                </span><span class="default">$found</span><span class="keyword">++;<br />            }<br />        }<br />    }<br /><br />        </span><span class="comment">// If the instance of the file is found more than once.<br />    </span><span class="keyword">if (</span><span class="default">$found </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">) {<br />        echo </span><span class="string">"Another process is running.\n"</span><span class="keyword">;<br />        die();<br />    }<br /><br />        </span><span class="comment">/**<br />        * <br />        * Regular process here...<br />        * <br />        */<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="59889">  <div class="votes">
    <div id="Vu59889">
    <a href="https://www.php.net/manual/vote-note.php?id=59889&amp;page=function.getmypid&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd59889">
    <a href="https://www.php.net/manual/vote-note.php?id=59889&amp;page=function.getmypid&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V59889" title="44% like this...">
    -2
    </div>
  </div>
  <a href="function.getmypid.php.html#59889" class="name">
  <strong class="user"><em>kroczu at interia dot pl</em></strong></a><a class="genanchor" href="function.getmypid.php.html#59889"> &para;</a><div class="date" title="2005-12-19 04:59"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom59889">
<div class="phpcode"><code><span class="html"><span class="default">&lt;?php<br /></span><span class="comment">/*<br /><br />mixed getpidinfo(mixed pid [, string system_ps_command_options])<br /><br />this function gets PID-info from system ps command and return it in useful assoc-array,<br />or return false and trigger warning if PID doesn't exists<br /><br />$pidifo=getpidinfo(12345);<br /><br />print_r($pidifo);<br /><br />Array<br />(<br />    [USER] =&gt; user<br />    [PID] =&gt; 12345<br />    [%CPU] =&gt; 0.0<br />    [%MEM] =&gt; 0.0<br />    [VSZ] =&gt; 1720<br />    [RSS] =&gt; 8<br />    [TT] =&gt; ??<br />    [STAT] =&gt; Is<br />    [STARTED] =&gt; 6:00PM<br />    [TIME] =&gt; 0:00.01<br />    [COMMAND] =&gt; php someproces.php &gt; logfile<br />)<br /><br />*/<br /><br />//////////////////////////////////////////////<br /><br /></span><span class="keyword">function </span><span class="default">getpidinfo</span><span class="keyword">(</span><span class="default">$pid</span><span class="keyword">, </span><span class="default">$ps_opt</span><span class="keyword">=</span><span class="string">"aux"</span><span class="keyword">){<br /><br />   </span><span class="default">$ps</span><span class="keyword">=</span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">"ps "</span><span class="keyword">.</span><span class="default">$ps_opt</span><span class="keyword">.</span><span class="string">"p "</span><span class="keyword">.</span><span class="default">$pid</span><span class="keyword">);<br />   </span><span class="default">$ps</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$ps</span><span class="keyword">);<br />   <br />   if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$ps</span><span class="keyword">)&lt;</span><span class="default">2</span><span class="keyword">){<br />      </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"PID "</span><span class="keyword">.</span><span class="default">$pid</span><span class="keyword">.</span><span class="string">" doesn't exists"</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />      return </span><span class="default">false</span><span class="keyword">;<br />   }<br /><br />   foreach(</span><span class="default">$ps </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$val</span><span class="keyword">){<br />      </span><span class="default">$ps</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">" +"</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">, </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$ps</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])));<br />   }<br /><br />   foreach(</span><span class="default">$ps</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$val</span><span class="keyword">){<br />      </span><span class="default">$pidinfo</span><span class="keyword">[</span><span class="default">$val</span><span class="keyword">] = </span><span class="default">$ps</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">];<br />      unset(</span><span class="default">$ps</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]);<br />   }<br />   <br />   if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$ps</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])){<br />      </span><span class="default">$pidinfo</span><span class="keyword">[</span><span class="default">$val</span><span class="keyword">].=</span><span class="string">" "</span><span class="keyword">.</span><span class="default">implode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">$ps</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br />   }<br />   return </span><span class="default">$pidinfo</span><span class="keyword">;<br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="109333">  <div class="votes">
    <div id="Vu109333">
    <a href="https://www.php.net/manual/vote-note.php?id=109333&amp;page=function.getmypid&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd109333">
    <a href="https://www.php.net/manual/vote-note.php?id=109333&amp;page=function.getmypid&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V109333" title="41% like this...">
    -2
    </div>
  </div>
  <a href="function.getmypid.php.html#109333" class="name">
  <strong class="user"><em>eight_hf at live dot fr</em></strong></a><a class="genanchor" href="function.getmypid.php.html#109333"> &para;</a><div class="date" title="2012-07-07 12:19"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom109333">
<div class="phpcode"><code><span class="html">On Linux you can check if a process is still running by verifying if the PID exists in the /proc directory :<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">if(</span><span class="default">file_exists</span><span class="keyword">(</span><span class="string">'/proc/'</span><span class="keyword">.</span><span class="default">$pid</span><span class="keyword">))<br />{<br />    echo </span><span class="string">'The process is still running.'</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="107022">  <div class="votes">
    <div id="Vu107022">
    <a href="https://www.php.net/manual/vote-note.php?id=107022&amp;page=function.getmypid&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd107022">
    <a href="https://www.php.net/manual/vote-note.php?id=107022&amp;page=function.getmypid&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V107022" title="33% like this...">
    -2
    </div>
  </div>
  <a href="function.getmypid.php.html#107022" class="name">
  <strong class="user"><em>pdc at example dot com</em></strong></a><a class="genanchor" href="function.getmypid.php.html#107022"> &para;</a><div class="date" title="2011-12-29 12:50"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom107022">
<div class="phpcode"><code><span class="html">Here is how you'd use exec on a posix system to accomplish counting processes quickly.<br /><br />I want to know how many processes are running with 'update.php' in the command:<br /><br />ps aux|grep "[u]pdate.php"|wc -l<br /><br />(the trick of using [u]pdate.php instead of update.php makes sure that the grep command itself is not matched).  Be sure to use quotes in the command, or it won't work either.<br /><br />So, the code:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">countProcesses</span><span class="keyword">(</span><span class="default">$scriptName</span><span class="keyword">)<br />{<br />    </span><span class="comment">// ps aux|grep "[u]pdate.php"|wc -l<br />    </span><span class="default">$first    </span><span class="keyword">=    </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$scriptName</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />    </span><span class="default">$rest    </span><span class="keyword">=    </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$scriptName</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />    <br />    </span><span class="default">$name    </span><span class="keyword">=    </span><span class="string">'"['</span><span class="keyword">.</span><span class="default">$first</span><span class="keyword">.</span><span class="string">']'</span><span class="keyword">.</span><span class="default">$rest</span><span class="keyword">.</span><span class="string">'"'</span><span class="keyword">;<br />    </span><span class="default">$cmd    </span><span class="keyword">=    </span><span class="string">"ps aux | grep </span><span class="default">$name</span><span class="string"> | wc -l"</span><span class="keyword">;<br />            <br />    </span><span class="default">$result    </span><span class="keyword">=    </span><span class="default">exec</span><span class="keyword">(</span><span class="default">$cmd</span><span class="keyword">);<br />            <br />    return </span><span class="default">$result</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="51148">  <div class="votes">
    <div id="Vu51148">
    <a href="https://www.php.net/manual/vote-note.php?id=51148&amp;page=function.getmypid&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd51148">
    <a href="https://www.php.net/manual/vote-note.php?id=51148&amp;page=function.getmypid&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V51148" title="33% like this...">
    -2
    </div>
  </div>
  <a href="function.getmypid.php.html#51148" class="name">
  <strong class="user"><em>Pure-PHP</em></strong></a><a class="genanchor" href="function.getmypid.php.html#51148"> &para;</a><div class="date" title="2005-03-21 02:26"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom51148">
<div class="phpcode"><code><span class="html">You can use this function also to avoid more than one instance of your app.<br /><br />You can also use this class.<br /><a href="http://www.pure-php.de/node/20" rel="nofollow" target="_blank">http://www.pure-php.de/node/20</a><br /><br />Usage:<br /><br /><span class="default">&lt;?php<br /><br />inlude</span><span class="keyword">(</span><span class="string">"ProcessHandler.class.php"</span><span class="keyword">);<br /><br />if(</span><span class="default">ProcessHandler</span><span class="keyword">::</span><span class="default">isActive</span><span class="keyword">()){<br />   die(</span><span class="string">"Already running!\n"</span><span class="keyword">;);<br />}else{<br />   </span><span class="default">ProcessHandler</span><span class="keyword">::</span><span class="default">activate</span><span class="keyword">();<br />   </span><span class="comment">//run my app<br /></span><span class="keyword">}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="118865">  <div class="votes">
    <div id="Vu118865">
    <a href="https://www.php.net/manual/vote-note.php?id=118865&amp;page=function.getmypid&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd118865">
    <a href="https://www.php.net/manual/vote-note.php?id=118865&amp;page=function.getmypid&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V118865" title="28% like this...">
    -3
    </div>
  </div>
  <a href="function.getmypid.php.html#118865" class="name">
  <strong class="user"><em>martijn at nowhere dot com</em></strong></a><a class="genanchor" href="function.getmypid.php.html#118865"> &para;</a><div class="date" title="2016-02-18 03:42"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom118865">
<div class="phpcode"><code><span class="html">On windows, you can get a list of PID's using this single line statement: <span class="default">&lt;?php $pids </span><span class="keyword">= </span><span class="default">array_column</span><span class="keyword">(</span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'str_getcsv'</span><span class="keyword">, </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">,</span><span class="default">trim</span><span class="keyword">(`</span><span class="string">tasklist /FO csv /NH</span><span class="keyword">`))), </span><span class="default">1</span><span class="keyword">); </span><span class="default">?&gt;</span>.</span></code></div>
  </div>
 </div>
  <div class="note" id="95303">  <div class="votes">
    <div id="Vu95303">
    <a href="https://www.php.net/manual/vote-note.php?id=95303&amp;page=function.getmypid&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd95303">
    <a href="https://www.php.net/manual/vote-note.php?id=95303&amp;page=function.getmypid&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V95303" title="25% like this...">
    -4
    </div>
  </div>
  <a href="function.getmypid.php.html#95303" class="name">
  <strong class="user"><em>james at voodoo dot co dot uk</em></strong></a><a class="genanchor" href="function.getmypid.php.html#95303"> &para;</a><div class="date" title="2009-12-25 01:50"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom95303">
<div class="phpcode"><code><span class="html">The 'ps' command has an option that can make filtering for a specific process more efficient.  Using this the work of looking for matching processes can be made neater:<br /><br /><span class="default">&lt;?php<br />    </span><span class="comment">/*<br />    Return an array of the pids of the processes that are running for the specific command<br />    e.g.<br />        returnPids('myprocess.php');<br />    */<br />    </span><span class="keyword">function </span><span class="default">returnPids</span><span class="keyword">(</span><span class="default">$command</span><span class="keyword">) {<br />        </span><span class="default">exec</span><span class="keyword">(</span><span class="string">"ps -C </span><span class="default">$command</span><span class="string"> -o pid="</span><span class="keyword">,</span><span class="default">$pids</span><span class="keyword">);<br />        foreach (</span><span class="default">$pids </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) </span><span class="default">$pids</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]=</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />        return </span><span class="default">$pids</span><span class="keyword">;<br />    }    <br /><br />    </span><span class="comment">/*<br />    Returns an array of the pids for processes that are like me, i.e. my program running<br />    */<br />    </span><span class="keyword">function </span><span class="default">returnMyPids</span><span class="keyword">() {<br />        return </span><span class="default">returnPids</span><span class="keyword">(</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"SCRIPT_NAME"</span><span class="keyword">]));<br />    }<br /></span><span class="default">?&gt;<br /></span><br />e.g. to bomb out if I'm running already<br /><br />if (count(returnMyPids())&gt;1) exit;</span></code></div>
  </div>
 </div>
  <div class="note" id="96007">  <div class="votes">
    <div id="Vu96007">
    <a href="https://www.php.net/manual/vote-note.php?id=96007&amp;page=function.getmypid&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd96007">
    <a href="https://www.php.net/manual/vote-note.php?id=96007&amp;page=function.getmypid&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V96007" title="20% like this...">
    -3
    </div>
  </div>
  <a href="function.getmypid.php.html#96007" class="name">
  <strong class="user"><em>gabe at fijiwebdesign dot com</em></strong></a><a class="genanchor" href="function.getmypid.php.html#96007"> &para;</a><div class="date" title="2010-02-02 09:53"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom96007">
<div class="phpcode"><code><span class="html">Based on what james at voodoo dot co dot uk said, but modified for CLI scripts (ie: there is no $_SERVER). <br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">/**<br /> * Check for a current process by filename<br /> * @param $file[optional] Filename<br /> * @return Boolean<br /> */<br /></span><span class="keyword">function </span><span class="default">processExists</span><span class="keyword">(</span><span class="default">$file </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br /><br />    </span><span class="default">$exists     </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />    </span><span class="default">$file       </span><span class="keyword">= </span><span class="default">$file </span><span class="keyword">? </span><span class="default">$file </span><span class="keyword">: </span><span class="default">__FILE__</span><span class="keyword">;<br /><br />    </span><span class="comment">// Check if file is in process list<br />    </span><span class="default">exec</span><span class="keyword">(</span><span class="string">"ps -C </span><span class="default">$file</span><span class="string"> -o pid="</span><span class="keyword">, </span><span class="default">$pids</span><span class="keyword">);<br />    if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$pids</span><span class="keyword">) &gt; </span><span class="default">1</span><span class="keyword">) {<br />        </span><span class="default">$exists </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />    }<br />    return </span><span class="default">$exists</span><span class="keyword">;<br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.getmypid&amp;redirect=https://www.php.net/manual/ru/function.getmypid.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.info.php.html">Опции PHP/информационные функции</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.assert.php.html" title="assert">assert</a>
                        </li>
                                                <li class="">
                            <a href="function.cli-get-process-title.php.html" title="cli_&#8203;get_&#8203;process_&#8203;title">cli_&#8203;get_&#8203;process_&#8203;title</a>
                        </li>
                                                <li class="">
                            <a href="function.cli-set-process-title.php.html" title="cli_&#8203;set_&#8203;process_&#8203;title">cli_&#8203;set_&#8203;process_&#8203;title</a>
                        </li>
                                                <li class="">
                            <a href="function.dl.php.html" title="dl">dl</a>
                        </li>
                                                <li class="">
                            <a href="function.extension-loaded.php.html" title="extension_&#8203;loaded">extension_&#8203;loaded</a>
                        </li>
                                                <li class="">
                            <a href="function.gc-collect-cycles.php.html" title="gc_&#8203;collect_&#8203;cycles">gc_&#8203;collect_&#8203;cycles</a>
                        </li>
                                                <li class="">
                            <a href="function.gc-disable.php.html" title="gc_&#8203;disable">gc_&#8203;disable</a>
                        </li>
                                                <li class="">
                            <a href="function.gc-enable.php.html" title="gc_&#8203;enable">gc_&#8203;enable</a>
                        </li>
                                                <li class="">
                            <a href="function.gc-enabled.php.html" title="gc_&#8203;enabled">gc_&#8203;enabled</a>
                        </li>
                                                <li class="">
                            <a href="function.gc-mem-caches.php.html" title="gc_&#8203;mem_&#8203;caches">gc_&#8203;mem_&#8203;caches</a>
                        </li>
                                                <li class="">
                            <a href="function.gc-status.php.html" title="gc_&#8203;status">gc_&#8203;status</a>
                        </li>
                                                <li class="">
                            <a href="function.get-cfg-var.php.html" title="get_&#8203;cfg_&#8203;var">get_&#8203;cfg_&#8203;var</a>
                        </li>
                                                <li class="">
                            <a href="function.get-current-user.php.html" title="get_&#8203;current_&#8203;user">get_&#8203;current_&#8203;user</a>
                        </li>
                                                <li class="">
                            <a href="function.get-defined-constants.php.html" title="get_&#8203;defined_&#8203;constants">get_&#8203;defined_&#8203;constants</a>
                        </li>
                                                <li class="">
                            <a href="function.get-extension-funcs.php.html" title="get_&#8203;extension_&#8203;funcs">get_&#8203;extension_&#8203;funcs</a>
                        </li>
                                                <li class="">
                            <a href="function.get-include-path.php.html" title="get_&#8203;include_&#8203;path">get_&#8203;include_&#8203;path</a>
                        </li>
                                                <li class="">
                            <a href="function.get-included-files.php.html" title="get_&#8203;included_&#8203;files">get_&#8203;included_&#8203;files</a>
                        </li>
                                                <li class="">
                            <a href="function.get-loaded-extensions.php.html" title="get_&#8203;loaded_&#8203;extensions">get_&#8203;loaded_&#8203;extensions</a>
                        </li>
                                                <li class="">
                            <a href="function.get-required-files.php.html" title="get_&#8203;required_&#8203;files">get_&#8203;required_&#8203;files</a>
                        </li>
                                                <li class="">
                            <a href="function.get-resources.php.html" title="get_&#8203;resources">get_&#8203;resources</a>
                        </li>
                                                <li class="">
                            <a href="function.getenv.php.html" title="getenv">getenv</a>
                        </li>
                                                <li class="">
                            <a href="function.getlastmod.php.html" title="getlastmod">getlastmod</a>
                        </li>
                                                <li class="">
                            <a href="function.getmygid.php.html" title="getmygid">getmygid</a>
                        </li>
                                                <li class="">
                            <a href="function.getmyinode.php.html" title="getmyinode">getmyinode</a>
                        </li>
                                                <li class="current">
                            <a href="function.getmypid.php.html" title="getmypid">getmypid</a>
                        </li>
                                                <li class="">
                            <a href="function.getmyuid.php.html" title="getmyuid">getmyuid</a>
                        </li>
                                                <li class="">
                            <a href="function.getopt.php.html" title="getopt">getopt</a>
                        </li>
                                                <li class="">
                            <a href="function.getrusage.php.html" title="getrusage">getrusage</a>
                        </li>
                                                <li class="">
                            <a href="function.ini-alter.php.html" title="ini_&#8203;alter">ini_&#8203;alter</a>
                        </li>
                                                <li class="">
                            <a href="function.ini-get-all.php.html" title="ini_&#8203;get_&#8203;all">ini_&#8203;get_&#8203;all</a>
                        </li>
                                                <li class="">
                            <a href="function.ini-get.php.html" title="ini_&#8203;get">ini_&#8203;get</a>
                        </li>
                                                <li class="">
                            <a href="function.ini-parse-quantity.php.html" title="ini_&#8203;parse_&#8203;quantity">ini_&#8203;parse_&#8203;quantity</a>
                        </li>
                                                <li class="">
                            <a href="function.ini-restore.php.html" title="ini_&#8203;restore">ini_&#8203;restore</a>
                        </li>
                                                <li class="">
                            <a href="function.ini-set.php.html" title="ini_&#8203;set">ini_&#8203;set</a>
                        </li>
                                                <li class="">
                            <a href="function.memory-get-peak-usage.php.html" title="memory_&#8203;get_&#8203;peak_&#8203;usage">memory_&#8203;get_&#8203;peak_&#8203;usage</a>
                        </li>
                                                <li class="">
                            <a href="function.memory-get-usage.php.html" title="memory_&#8203;get_&#8203;usage">memory_&#8203;get_&#8203;usage</a>
                        </li>
                                                <li class="">
                            <a href="function.memory-reset-peak-usage.php.html" title="memory_&#8203;reset_&#8203;peak_&#8203;usage">memory_&#8203;reset_&#8203;peak_&#8203;usage</a>
                        </li>
                                                <li class="">
                            <a href="function.php-ini-loaded-file.php.html" title="php_&#8203;ini_&#8203;loaded_&#8203;file">php_&#8203;ini_&#8203;loaded_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.php-ini-scanned-files.php.html" title="php_&#8203;ini_&#8203;scanned_&#8203;files">php_&#8203;ini_&#8203;scanned_&#8203;files</a>
                        </li>
                                                <li class="">
                            <a href="function.php-sapi-name.php.html" title="php_&#8203;sapi_&#8203;name">php_&#8203;sapi_&#8203;name</a>
                        </li>
                                                <li class="">
                            <a href="function.php-uname.php.html" title="php_&#8203;uname">php_&#8203;uname</a>
                        </li>
                                                <li class="">
                            <a href="function.phpcredits.php.html" title="phpcredits">phpcredits</a>
                        </li>
                                                <li class="">
                            <a href="function.phpinfo.php.html" title="phpinfo">phpinfo</a>
                        </li>
                                                <li class="">
                            <a href="function.phpversion.php.html" title="phpversion">phpversion</a>
                        </li>
                                                <li class="">
                            <a href="function.putenv.php.html" title="putenv">putenv</a>
                        </li>
                                                <li class="">
                            <a href="function.set-include-path.php.html" title="set_&#8203;include_&#8203;path">set_&#8203;include_&#8203;path</a>
                        </li>
                                                <li class="">
                            <a href="function.set-time-limit.php.html" title="set_&#8203;time_&#8203;limit">set_&#8203;time_&#8203;limit</a>
                        </li>
                                                <li class="">
                            <a href="function.sys-get-temp-dir.php.html" title="sys_&#8203;get_&#8203;temp_&#8203;dir">sys_&#8203;get_&#8203;temp_&#8203;dir</a>
                        </li>
                                                <li class="">
                            <a href="function.version-compare.php.html" title="version_&#8203;compare">version_&#8203;compare</a>
                        </li>
                                                <li class="">
                            <a href="function.zend-thread-id.php.html" title="zend_&#8203;thread_&#8203;id">zend_&#8203;thread_&#8203;id</a>
                        </li>
                                                <li class="">
                            <a href="function.zend-version.php.html" title="zend_&#8203;version">zend_&#8203;version</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                        <li>
                <span class="header">Deprecated</span>
                <ul class="child-menu-list">
                                    <li class="">
                        <a href="function.assert-options.php.html" title="assert_&#8203;options">assert_&#8203;options</a>
                    </li>
                                    <li class="">
                        <a href="function.get-magic-quotes-gpc.php.html" title="get_&#8203;magic_&#8203;quotes_&#8203;gpc">get_&#8203;magic_&#8203;quotes_&#8203;gpc</a>
                    </li>
                                    <li class="">
                        <a href="function.get-magic-quotes-runtime.php.html" title="get_&#8203;magic_&#8203;quotes_&#8203;runtime">get_&#8203;magic_&#8203;quotes_&#8203;runtime</a>
                    </li>
                                    <li class="">
                        <a href="function.restore-include-path.php.html" title="restore_&#8203;include_&#8203;path">restore_&#8203;include_&#8203;path</a>
                    </li>
                                </ul>
            </li>
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
