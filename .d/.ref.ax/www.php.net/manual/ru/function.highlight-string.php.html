<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: highlight_string - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.highlight-string.php.html">
 <link rel="shorturl" href="https://www.php.net/highlight-string">
 <link rel="alternate" href="https://www.php.net/highlight-string" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.misc.php.html">
 <link rel="prev" href="function.highlight-file.php.html">
 <link rel="next" href="function.hrtime.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.highlight-string.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.highlight-string.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.highlight-string.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.highlight-string.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.highlight-string.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.highlight-string.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.highlight-string.php" hreflang="pt_BR">
 <link rel="alternate" href="function.highlight-string.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.highlight-string.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.highlight-string.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.hrtime.php.html">
          hrtime &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.highlight-file.php.html">
          &laquo; highlight_file        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.basic.other.php.html'>Другие базовые модули</a></li>      <li><a href='book.misc.php.html'>Misc.</a></li>      <li><a href='ref.misc.php.html'>Разные функции</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.highlight-string.php'>English</option>
            <option value='de/function.highlight-string.php'>German</option>
            <option value='es/function.highlight-string.php'>Spanish</option>
            <option value='fr/function.highlight-string.php'>French</option>
            <option value='it/function.highlight-string.php'>Italian</option>
            <option value='ja/function.highlight-string.php'>Japanese</option>
            <option value='pt_BR/function.highlight-string.php'>Brazilian Portuguese</option>
            <option value='ru/function.highlight-string.php' selected="selected">Russian</option>
            <option value='tr/function.highlight-string.php'>Turkish</option>
            <option value='zh/function.highlight-string.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/misc/functions/highlight-string.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.highlight-string%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.highlight-string" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">highlight_string</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">highlight_string</span> &mdash; <span class="dc-title">Подсвечивает синтаксис строки</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.highlight-string-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>highlight_string</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$return</code><span class="initializer"> = <strong><code>false</code></strong></span></span>): <span class="type"><span class="type">string</span>|<span class="type">bool</span></span></div>

  <p class="simpara">
   Выводит или возвращает HTML-разметку для версии c подсветкой синтаксиса PHP-кода,
   применяя цвета, которые определены во встроенном обработчике подсветки синтаксиса PHP.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.highlight-string-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">string</code></dt>

     <dd>

      <p class="para">
       PHP-код, который нужно подсветить. Код должен включать открывающий тег.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">return</code></dt>

     <dd>

      <p class="para">
       Параметру устанавливают значение <strong><code>true</code></strong>, чтобы функция возвращала
       подсвеченный код.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.highlight-string-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Если параметр <code class="parameter">return</code> равен <strong><code>true</code></strong>, то вместо вывода
   в виде строки возвращается код с подсветкой синтаксиса. В противном случае
   возвращает <strong><code>true</code></strong> или <strong><code>false</code></strong> в случае возникновения ошибки.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.highlight-string-changelog">
  <h3 class="title">Список изменений</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Версия</th>
       <th>Описание</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>8.3.0</td>
       <td>
        Изменился результирующий HTML.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.highlight-string-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Пример #1 Пример использования функции <span class="function"><strong>highlight_string()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br />highlight_string</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;?php phpinfo(); ?&gt;'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
&lt;code&gt;&lt;span style=&quot;color: #000000&quot;&gt;
&lt;span style=&quot;color: #0000BB&quot;&gt;&amp;lt;?php phpinfo&lt;/span&gt;&lt;span style=&quot;color: #007700&quot;&gt;(); &lt;/span&gt;&lt;span style=&quot;color: #0000BB&quot;&gt;?&amp;gt;&lt;/span&gt;
&lt;/span&gt;
&lt;/code&gt;
</pre></div>
    </div>
    
<div class="example-contents"><p>
 Результат выполнения приведённого примера в PHP 8.3:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
&lt;pre&gt;&lt;code style=&quot;color: #000000&quot;&gt;&lt;span style=&quot;color: #0000BB&quot;&gt;&amp;lt;?php phpinfo&lt;/span&gt;&lt;span style=&quot;color: #007700&quot;&gt;(); &lt;/span&gt;&lt;span style=&quot;color: #0000BB&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.highlight-string-notes">
  <h3 class="title">Примечания</h3>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: <p class="para">Поскольку
в сигнатуре функции есть параметр <code class="parameter">return</code>,
она будет использовать внутреннюю буферизацию вывода, поэтому эту функцию нельзя
указывать в качестве callback-функции при вызове функции <span class="function"><a href="function.ob-start.php.html" class="function">ob_start()</a></span>.</p></p></blockquote>
  <p class="para">
   В будущем возможно изменение сгенерированной HTML-разметки.
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.highlight-string-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.highlight-file.php.html" class="function" rel="rdfs-seeAlso">highlight_file()</a> - Подсвечивает синтаксис файла</span></li>
    <li class="member"><a href="misc.configuration.php.html#ini.syntax-highlighting" class="link">Подсветка директив INI</a></li>
   </ul>
  </p>
 </div>


</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.highlight-string&amp;redirect=https://www.php.net/manual/ru/function.highlight-string.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">29 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="118550">  <div class="votes">
    <div id="Vu118550">
    <a href="https://www.php.net/manual/vote-note.php?id=118550&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd118550">
    <a href="https://www.php.net/manual/vote-note.php?id=118550&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V118550" title="86% like this...">
    28
    </div>
  </div>
  <a href="function.highlight-string.php.html#118550" class="name">
  <strong class="user"><em>stanislav dot eckert at vizson dot de</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#118550"> &para;</a><div class="date" title="2015-12-26 03:50"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom118550">
<div class="phpcode"><code><span class="html">You can change the colors of the highlighting, like this: <br /><br /><span class="default">&lt;?php<br />ini_set</span><span class="keyword">(</span><span class="string">"highlight.comment"</span><span class="keyword">, </span><span class="string">"#008000"</span><span class="keyword">);<br /></span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.default"</span><span class="keyword">, </span><span class="string">"#000000"</span><span class="keyword">);<br /></span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.html"</span><span class="keyword">, </span><span class="string">"#808080"</span><span class="keyword">);<br /></span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.keyword"</span><span class="keyword">, </span><span class="string">"#0000BB; font-weight: bold"</span><span class="keyword">);<br /></span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.string"</span><span class="keyword">, </span><span class="string">"#DD0000"</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />Like you see in the example above, you can even add additional styles like bold text, since the values are set directly to the DOM attribute "style".<br /><br />Also, this function highlights only text, if it begins with the prefix "&lt;?php". But this function can highlight other similar formats too (not perfectly, but better than nothing), like HTML, XML, C++, JavaScript, etc. I use following function to highlight different file types and it works quite good:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">highlightText</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">)<br />{<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="string">"&lt;?php " </span><span class="keyword">. </span><span class="default">$text</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);  </span><span class="comment">// highlight_string() requires opening PHP tag or otherwise it will not colorize the text<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|^\\&lt;code\\&gt;\\&lt;span style\\=\"color\\: #[a-fA-F0-9]{0,6}\"\\&gt;|"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);  </span><span class="comment">// remove prefix<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|\\&lt;/code\\&gt;\$|"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);  </span><span class="comment">// remove suffix 1<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);  </span><span class="comment">// remove line breaks<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|\\&lt;/span\\&gt;\$|"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);  </span><span class="comment">// remove suffix 2<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);  </span><span class="comment">// remove line breaks<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|^(\\&lt;span style\\=\"color\\: #[a-fA-F0-9]{0,6}\"\\&gt;)(&amp;lt;\\?php&amp;nbsp;)(.*?)(\\&lt;/span\\&gt;)|"</span><span class="keyword">, </span><span class="string">"\$1\$3\$4"</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);  </span><span class="comment">// remove custom added "&lt;?php "<br /><br />    </span><span class="keyword">return </span><span class="default">$text</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span><br />Note, that it will remove the &lt;code&gt; tag too, so you get the formatted text directly, which gives you more freedom to work with the result.<br /><br />I personally suggest to combine both things to have a nice highlighting function for different file types with different highlight coloring sets:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">highlightText</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$fileExt</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">)<br />{<br />    if (</span><span class="default">$fileExt </span><span class="keyword">== </span><span class="string">"php"</span><span class="keyword">)<br />    {<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.comment"</span><span class="keyword">, </span><span class="string">"#008000"</span><span class="keyword">);<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.default"</span><span class="keyword">, </span><span class="string">"#000000"</span><span class="keyword">);<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.html"</span><span class="keyword">, </span><span class="string">"#808080"</span><span class="keyword">);<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.keyword"</span><span class="keyword">, </span><span class="string">"#0000BB; font-weight: bold"</span><span class="keyword">);<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.string"</span><span class="keyword">, </span><span class="string">"#DD0000"</span><span class="keyword">);<br />    }<br />    else if (</span><span class="default">$fileExt </span><span class="keyword">== </span><span class="string">"html"</span><span class="keyword">)<br />    {<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.comment"</span><span class="keyword">, </span><span class="string">"green"</span><span class="keyword">);<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.default"</span><span class="keyword">, </span><span class="string">"#CC0000"</span><span class="keyword">);<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.html"</span><span class="keyword">, </span><span class="string">"#000000"</span><span class="keyword">);<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.keyword"</span><span class="keyword">, </span><span class="string">"black; font-weight: bold"</span><span class="keyword">);<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.string"</span><span class="keyword">, </span><span class="string">"#0000FF"</span><span class="keyword">);<br />    }<br />    </span><span class="comment">// ...<br /><br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="string">"&lt;?php " </span><span class="keyword">. </span><span class="default">$text</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);  </span><span class="comment">// highlight_string() requires opening PHP tag or otherwise it will not colorize the text<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|^\\&lt;code\\&gt;\\&lt;span style\\=\"color\\: #[a-fA-F0-9]{0,6}\"\\&gt;|"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);  </span><span class="comment">// remove prefix<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|\\&lt;/code\\&gt;\$|"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);  </span><span class="comment">// remove suffix 1<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);  </span><span class="comment">// remove line breaks<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|\\&lt;/span\\&gt;\$|"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);  </span><span class="comment">// remove suffix 2<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);  </span><span class="comment">// remove line breaks<br />    </span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|^(\\&lt;span style\\=\"color\\: #[a-fA-F0-9]{0,6}\"\\&gt;)(&amp;lt;\\?php&amp;nbsp;)(.*?)(\\&lt;/span\\&gt;)|"</span><span class="keyword">, </span><span class="string">"\$1\$3\$4"</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);  </span><span class="comment">// remove custom added "&lt;?php "<br /><br />    </span><span class="keyword">return </span><span class="default">$text</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="128657">  <div class="votes">
    <div id="Vu128657">
    <a href="https://www.php.net/manual/vote-note.php?id=128657&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd128657">
    <a href="https://www.php.net/manual/vote-note.php?id=128657&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V128657" title="80% like this...">
    3
    </div>
  </div>
  <a href="function.highlight-string.php.html#128657" class="name">
  <strong class="user"><em>will at lolcat dot ca</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#128657"> &para;</a><div class="date" title="2023-07-04 02:00"><strong>7 months ago</strong></div>
  <div class="text" id="Hcom128657">
<div class="phpcode"><code><span class="html">Here is the best way to highlight code if you want classes instead of inline styles:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">highlightcode</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">){<br />    <br />    </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.comment"</span><span class="keyword">, </span><span class="string">"c-comment"</span><span class="keyword">);<br />    </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.default"</span><span class="keyword">, </span><span class="string">"c-default"</span><span class="keyword">);<br />    </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.html"</span><span class="keyword">, </span><span class="string">"c-default"</span><span class="keyword">);<br />    </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.keyword"</span><span class="keyword">, </span><span class="string">"c-keyword"</span><span class="keyword">);<br />    </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.string"</span><span class="keyword">, </span><span class="string">"c-string"</span><span class="keyword">);<br />    <br />    </span><span class="default">$text </span><span class="keyword">=<br />        </span><span class="default">trim</span><span class="keyword">(<br />            </span><span class="default">str_replace</span><span class="keyword">(<br />                </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">,<br />                </span><span class="string">"\n"</span><span class="keyword">, </span><span class="comment">// replace &lt;br&gt; with newlines<br />                </span><span class="default">str_replace</span><span class="keyword">(<br />                    [<br />                        </span><span class="comment">// leading &lt;?php garbage<br />                        </span><span class="string">"&lt;span style=\"color: c-default\"&gt;\n&amp;lt;?php&amp;nbsp;"</span><span class="keyword">,<br />                        </span><span class="string">"&lt;code&gt;"</span><span class="keyword">,<br />                        </span><span class="string">"&lt;/code&gt;"<br />                    </span><span class="keyword">],<br />                    </span><span class="string">""</span><span class="keyword">,<br />                    </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="string">"&lt;?php " </span><span class="keyword">. </span><span class="default">$text</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">)<br />                )<br />            )<br />        );<br />    <br />    </span><span class="comment">// replace colors<br />    </span><span class="default">$classes </span><span class="keyword">= [</span><span class="string">"c-comment"</span><span class="keyword">, </span><span class="string">"c-default"</span><span class="keyword">, </span><span class="string">"c-keyword"</span><span class="keyword">, </span><span class="string">"c-string"</span><span class="keyword">];<br />    <br />    foreach(</span><span class="default">$classes </span><span class="keyword">as </span><span class="default">$class</span><span class="keyword">){<br />        <br />        </span><span class="default">$text </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'&lt;span style="color: ' </span><span class="keyword">. </span><span class="default">$class </span><span class="keyword">. </span><span class="string">'"&gt;'</span><span class="keyword">, </span><span class="string">'&lt;span class="' </span><span class="keyword">. </span><span class="default">$class </span><span class="keyword">. </span><span class="string">'"&gt;'</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br />    }<br />    <br />    return </span><span class="default">$text</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span><br />Generates output that looks like this:<br /><br />&lt;span class="c-keyword"&gt;if(&lt;/span&gt;condition&lt;span class="c-keyword"&gt;){<br />&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo&amp;nbsp;&lt;/span&gt;&lt;span class="c-string"&gt;"HTML&amp;nbsp;here"&lt;/span&gt;&lt;span class="c-keyword"&gt;;<br />}&lt;/span&gt;<br /><br />Hope this helps.</span></code></div>
  </div>
 </div>
  <div class="note" id="123534">  <div class="votes">
    <div id="Vu123534">
    <a href="https://www.php.net/manual/vote-note.php?id=123534&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123534">
    <a href="https://www.php.net/manual/vote-note.php?id=123534&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123534" title="75% like this...">
    2
    </div>
  </div>
  <a href="function.highlight-string.php.html#123534" class="name">
  <strong class="user"><em>pyetrosafe at gmail dot com</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#123534"> &para;</a><div class="date" title="2019-01-19 07:11"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom123534">
<div class="phpcode"><code><span class="html">I read the note from "stanislav dot eckert at vizson dot de" and I really enjoyed the function he created.<br />For my use I made some adaptations leaving the function more practical and allowing the passage and multiple parameters at a time, I also modified the style of the &lt;code&gt; element with a black background and margins.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">// Combined of the highlight_string and var_export<br /></span><span class="keyword">function </span><span class="default">hl_export</span><span class="keyword">()<br />{<br />    try {<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.comment"</span><span class="keyword">, </span><span class="string">"#008000"</span><span class="keyword">);<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.default"</span><span class="keyword">, </span><span class="string">"#FFFFFF"</span><span class="keyword">);<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.html"</span><span class="keyword">, </span><span class="string">"#808080"</span><span class="keyword">);<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.keyword"</span><span class="keyword">, </span><span class="string">"#0099FF; font-weight: bold"</span><span class="keyword">);<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"highlight.string"</span><span class="keyword">, </span><span class="string">"#99FF99"</span><span class="keyword">);<br /><br />        </span><span class="default">$vars </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br /><br />        foreach ( </span><span class="default">$vars </span><span class="keyword">as </span><span class="default">$var </span><span class="keyword">) {<br />            </span><span class="default">$output </span><span class="keyword">= </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />            </span><span class="default">$output </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$output</span><span class="keyword">);<br />            </span><span class="default">$output </span><span class="keyword">= </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="string">"&lt;?php " </span><span class="keyword">. </span><span class="default">$output</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);  </span><span class="comment">// highlight_string() requires opening PHP tag or otherwise it will not colorize the text<br />            </span><span class="default">$output </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|\\&lt;code\\&gt;|"</span><span class="keyword">, </span><span class="string">"&lt;code style='background-color: #000000; padding: 10px; margin: 10px; display: block; font: 12px Consolas;'&gt;"</span><span class="keyword">, </span><span class="default">$output</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);  </span><span class="comment">// edit prefix<br />            </span><span class="default">$output </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|(\\&lt;span style\\=\"color\\: #[a-fA-F0-9]{0,6}\"\\&gt;)(&amp;lt;\\?php&amp;nbsp;)(.*?)(\\&lt;/span\\&gt;)|"</span><span class="keyword">, </span><span class="string">"\$1\$3\$4"</span><span class="keyword">, </span><span class="default">$output</span><span class="keyword">);  </span><span class="comment">// remove custom added "&lt;?php "<br />            </span><span class="keyword">echo </span><span class="default">$output</span><span class="keyword">;<br />        }<br />    } catch (</span><span class="default">Exception $e</span><span class="keyword">) {<br />        echo </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">();<br />    }<br />}<br /><br /></span><span class="comment">// Debug multiple vars at once.<br /></span><span class="default">$var1 </span><span class="keyword">= </span><span class="string">'Example String'</span><span class="keyword">;<br /></span><span class="default">$var2 </span><span class="keyword">= </span><span class="default">1987</span><span class="keyword">;<br /></span><span class="default">$var3 </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br /></span><span class="default">$var4 </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br /></span><span class="default">$var5 </span><span class="keyword">= array(</span><span class="string">'Array'</span><span class="keyword">, </span><span class="string">'05'</span><span class="keyword">, </span><span class="default">05</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">);<br /><br /></span><span class="default">hl_export</span><span class="keyword">( </span><span class="default">$var1</span><span class="keyword">, </span><span class="default">$var2</span><span class="keyword">, </span><span class="default">$var3</span><span class="keyword">, </span><span class="default">$var4</span><span class="keyword">, </span><span class="default">$var5 </span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="77620">  <div class="votes">
    <div id="Vu77620">
    <a href="https://www.php.net/manual/vote-note.php?id=77620&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd77620">
    <a href="https://www.php.net/manual/vote-note.php?id=77620&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V77620" title="68% like this...">
    7
    </div>
  </div>
  <a href="function.highlight-string.php.html#77620" class="name">
  <strong class="user"><em>www.phella.net</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#77620"> &para;</a><div class="date" title="2007-09-05 08:47"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom77620">
<div class="phpcode"><code><span class="html">When you quote highlighted PHP code in your website you need to escape quotes. If you quote a lot it may be annoyning. Here is tiny snippet how to make quoting tidy and clean. Write your code like this:<br /><br />&lt;?code()?&gt;<br />  $string = 'Here I put my code';<br />&lt;?code()?&gt;<br /><br />And somewhere else define the function:<br /><br />&lt;?<br />  function code()<br />  {<br />    static $on=false;<br />    if (!$on) ob_start();<br />    else<br />    {<br />      $buffer= "&lt;?\n".ob_get_contents()."?&gt;";<br />      ob_end_clean();<br />      highlight_string($buffer);<br />    }<br />    $on=!$on;<br />  }<br />?&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="56642">  <div class="votes">
    <div id="Vu56642">
    <a href="https://www.php.net/manual/vote-note.php?id=56642&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd56642">
    <a href="https://www.php.net/manual/vote-note.php?id=56642&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V56642" title="66% like this...">
    1
    </div>
  </div>
  <a href="function.highlight-string.php.html#56642" class="name">
  <strong class="user"><em>vouksh at vouksh dot info</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#56642"> &para;</a><div class="date" title="2005-09-10 10:27"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom56642">
<div class="phpcode"><code><span class="html">Fully working, XHTML 1.1 ready xhtml_highlight function. I included the stripslashes, because of some problems I had with out it. It should be safe to leave it in there, but if you experience problems, feel free to take it out.<br /><br />&lt;?<br />function xhtml_highlight($str) {<br />    $hlt = highlight_string(stripslashes($str), true);<br />    $fon = str_replace(array('&lt;font ', '&lt;/font&gt;'), array('&lt;span ', '&lt;/span&gt;'), $hlt);<br />    $ret = preg_replace('#color="(.*?)"#', 'style="color: \\1"', $fon);<br />    echo $ret;<br />    return true;<br />}<br />?&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="50069">  <div class="votes">
    <div id="Vu50069">
    <a href="https://www.php.net/manual/vote-note.php?id=50069&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd50069">
    <a href="https://www.php.net/manual/vote-note.php?id=50069&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V50069" title="60% like this...">
    5
    </div>
  </div>
  <a href="function.highlight-string.php.html#50069" class="name">
  <strong class="user"><em>admin [at] develogix [dot] com</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#50069"> &para;</a><div class="date" title="2005-02-16 11:15"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom50069">
<div class="phpcode"><code><span class="html">I've been working on a good replacement for the highlight_string() function; and here is what I've come up with so far:<br /><br />&lt;?<br />function get_sourcecode_string($str, $return = false, $counting = true, $first_line_num = '1', $font_color = '#666'){<br />    $str = highlight_string($str, TRUE);<br />    $replace = array(<br />        '&lt;font' =&gt; '&lt;span',<br />        'color="' =&gt; 'style="color: ',<br />        '&lt;/font&gt;' =&gt; '&lt;/span&gt;',<br />        '&lt;code&gt;' =&gt; '',<br />        '&lt;/code&gt;' =&gt; '',<br />        '&lt;span style="color: #FF8000"&gt;' =&gt;<br />            '&lt;span style="color: '.$font_color.'"&gt;'<br />        );<br />    foreach ($replace as $html =&gt; $xhtml){<br />        $str = str_replace($html, $xhtml, $str);<br />    }<br />    // delete the first &lt;span style="color:#000000;"&gt; and the corresponding &lt;/span&gt;<br />    $str = substr($str, 30, -9);<br />                <br />    $arr_html      = explode('&lt;br /&gt;', $str);<br />    $total_lines   = count($arr_html);    <br />    $out           = '';<br />    $line_counter  = 0;<br />    $last_line_num = $first_line_num + $total_lines;<br />    <br />    foreach ($arr_html as $line){<br />        $line = str_replace(chr(13), '', $line);<br />        $current_line = $first_line_num + $line_counter;<br />        if ($counting){<br />            $out .= '&lt;span style="color:'.$font_color.'"&gt;'<br />                  . str_repeat('&amp;nbsp;', strlen($last_line_num) - strlen($current_line))<br />                  . $current_line<br />                  . ': &lt;/span&gt;';<br />        }<br />        $out .= $line<br />              . '&lt;br /&gt;'."\n";<br />        $line_counter++;<br />    }<br />    $out = '&lt;code&gt;'."\n".$out.'&lt;/code&gt;."\n"';<br /><br />    if ($return){return $out;}<br />    else {echo $out;}<br />}<br />?&gt;<br /><br />This function outputs valid XHTML 1.1 code by replacing font tags with span tags. You can also specify whether you want it to return or echo, output a line-count, the color of the line-count, and the starting line-count number.<br /><br />Usage:<br />&lt;?<br />// $str = string with php<br />// $return = true (return) / false (echo)<br />//    default of false<br />// $counting = true (count) / false (don't count)<br />//    default of true<br />// $start = starting count number<br />//    default of '1'<br />// $color = count color with preceding #<br />//    defalut of '#666'<br />get_sourcecode_string($str, $return,   $counting, $start, $color);<br />?&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="84661">  <div class="votes">
    <div id="Vu84661">
    <a href="https://www.php.net/manual/vote-note.php?id=84661&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd84661">
    <a href="https://www.php.net/manual/vote-note.php?id=84661&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V84661" title="57% like this...">
    2
    </div>
  </div>
  <a href="function.highlight-string.php.html#84661" class="name">
  <strong class="user"><em>Dmitry S</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#84661"> &para;</a><div class="date" title="2008-07-24 01:38"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom84661">
<div class="phpcode"><code><span class="html">Alternative XML syntax highlighting.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">xml_highlight</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)<br />{        <br />    </span><span class="default">$s </span><span class="keyword">= </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br />    </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"#&amp;lt;([/]*?)(.*)([\s]*?)&amp;gt;#sU"</span><span class="keyword">,<br />        </span><span class="string">"&lt;font color=\"#0000FF\"&gt;&amp;lt;\\1\\2\\3&amp;gt;&lt;/font&gt;"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />    </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"#&amp;lt;([\?])(.*)([\?])&amp;gt;#sU"</span><span class="keyword">,<br />        </span><span class="string">"&lt;font color=\"#800000\"&gt;&amp;lt;\\1\\2\\3&amp;gt;&lt;/font&gt;"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />    </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"#&amp;lt;([^\s\?/=])(.*)([\[\s/]|&amp;gt;)#iU"</span><span class="keyword">,<br />        </span><span class="string">"&amp;lt;&lt;font color=\"#808000\"&gt;\\1\\2&lt;/font&gt;\\3"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />    </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"#&amp;lt;([/])([^\s]*?)([\s\]]*?)&amp;gt;#iU"</span><span class="keyword">,<br />        </span><span class="string">"&amp;lt;\\1&lt;font color=\"#808000\"&gt;\\2&lt;/font&gt;\\3&amp;gt;"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />    </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"#([^\s]*?)\=(&amp;quot;|')(.*)(&amp;quot;|')#isU"</span><span class="keyword">,<br />        </span><span class="string">"&lt;font color=\"#800080\"&gt;\\1&lt;/font&gt;=&lt;font color=\"#FF00FF\"&gt;\\2\\3\\4&lt;/font&gt;"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />    </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"#&amp;lt;(.*)(\[)(.*)(\])&amp;gt;#isU"</span><span class="keyword">,<br />        </span><span class="string">"&amp;lt;\\1&lt;font color=\"#800080\"&gt;\\2\\3\\4&lt;/font&gt;&amp;gt;"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />    return </span><span class="default">nl2br</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="47214">  <div class="votes">
    <div id="Vu47214">
    <a href="https://www.php.net/manual/vote-note.php?id=47214&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd47214">
    <a href="https://www.php.net/manual/vote-note.php?id=47214&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V47214" title="56% like this...">
    2
    </div>
  </div>
  <a href="function.highlight-string.php.html#47214" class="name">
  <strong class="user"><em>manithu at fahr-zur-hoelle dot org</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#47214"> &para;</a><div class="date" title="2004-11-06 11:10"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom47214">
<div class="phpcode"><code><span class="html">This function will return highlighted, xhtml 1.1 valid code (replaces &lt;font&gt; with &lt;span&gt; elements and color with style attributes):<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">function </span><span class="default">xhtml_highlight</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />    </span><span class="default">$str </span><span class="keyword">= </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />    </span><span class="comment">//replace &lt;code&gt;&lt;font color=""&gt;&lt;/font&gt;&lt;/code&gt;<br />    </span><span class="default">$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#&lt;font color="([^\']*)"&gt;([^\']*)&lt;/font&gt;#'</span><span class="keyword">, </span><span class="string">'&lt;span style="color: \\1"&gt;\\2&lt;/span&gt;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />    </span><span class="comment">//replace other &lt;font&gt; elements<br />    </span><span class="keyword">return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#&lt;font color="([^\']*)"&gt;([^\']*)&lt;/font&gt;#U'</span><span class="keyword">, </span><span class="string">'&lt;span style="color: \\1"&gt;\\2&lt;/span&gt;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="49506">  <div class="votes">
    <div id="Vu49506">
    <a href="https://www.php.net/manual/vote-note.php?id=49506&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd49506">
    <a href="https://www.php.net/manual/vote-note.php?id=49506&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V49506" title="57% like this...">
    1
    </div>
  </div>
  <a href="function.highlight-string.php.html#49506" class="name">
  <strong class="user"><em>gaggge at gmail dot com</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#49506"> &para;</a><div class="date" title="2005-01-30 08:26"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom49506">
<div class="phpcode"><code><span class="html">This is a little function for highlighting bbcode-stylish PHP code from a mysql database.<br />(Like this: [php]<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="string">"test"</span><span class="keyword">; </span><span class="default">?&gt;</span>[/php])<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">bbcode</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)<br />{<br />    </span><span class="default">$s </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"]\n"</span><span class="keyword">, </span><span class="string">"]"</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);<br />    </span><span class="default">$match </span><span class="keyword">= array(</span><span class="string">'#\[php\](.*?)\[\/php\]#se'</span><span class="keyword">);<br />    </span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">"'&lt;div&gt;'.highlight_string(stripslashes('$1'), true).'&lt;/div&gt;'"</span><span class="keyword">);<br />    return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="73624">  <div class="votes">
    <div id="Vu73624">
    <a href="https://www.php.net/manual/vote-note.php?id=73624&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd73624">
    <a href="https://www.php.net/manual/vote-note.php?id=73624&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V73624" title="55% like this...">
    1
    </div>
  </div>
  <a href="function.highlight-string.php.html#73624" class="name">
  <strong class="user"><em>Pyerre</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#73624"> &para;</a><div class="date" title="2007-03-04 01:29"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom73624">
<div class="phpcode"><code><span class="html">This fonction replaces every space with the html code &amp;nbsp; (non-breaking space)<br />this is not very good because text will not go to the line and causes a big width<br />for example in a bordered div, text will go across the border<br /><br />my solution : <br />echo str_replace("&amp;nbsp;", " ",highlight_string("Arise, you children of the fatherland",true));<br />echo str_replace("&amp;nbsp;", " ",highlight_file("test.php",true));</span></code></div>
  </div>
 </div>
  <div class="note" id="60251">  <div class="votes">
    <div id="Vu60251">
    <a href="https://www.php.net/manual/vote-note.php?id=60251&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd60251">
    <a href="https://www.php.net/manual/vote-note.php?id=60251&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V60251" title="55% like this...">
    1
    </div>
  </div>
  <a href="function.highlight-string.php.html#60251" class="name">
  <strong class="user"><em>stalker at ruun dot de</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#60251"> &para;</a><div class="date" title="2005-12-31 01:37"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom60251">
<div class="phpcode"><code><span class="html">to vouksh: I expanded your functions a bit:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">xhtmlHighlightString</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$return</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br />   </span><span class="default">$hlt </span><span class="keyword">= </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">), </span><span class="default">true</span><span class="keyword">);<br />   </span><span class="default">$fon </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'&lt;font '</span><span class="keyword">, </span><span class="string">'&lt;/font&gt;'</span><span class="keyword">), array(</span><span class="string">'&lt;span '</span><span class="keyword">, </span><span class="string">'&lt;/span&gt;'</span><span class="keyword">), </span><span class="default">$hlt</span><span class="keyword">);<br />   </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#color="(.*?)"#'</span><span class="keyword">, </span><span class="string">'style="color: \\1"'</span><span class="keyword">, </span><span class="default">$fon</span><span class="keyword">);<br />   if(</span><span class="default">$return</span><span class="keyword">)<br />     return </span><span class="default">$ret</span><span class="keyword">;<br />   echo </span><span class="default">$ret</span><span class="keyword">;<br />   return </span><span class="default">true</span><span class="keyword">;<br />}<br />function </span><span class="default">xhtmlHighlightFile</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,</span><span class="default">$return</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br />   </span><span class="default">$hlt </span><span class="keyword">= </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />   </span><span class="default">$fon </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'&lt;font '</span><span class="keyword">, </span><span class="string">'&lt;/font&gt;'</span><span class="keyword">), array(</span><span class="string">'&lt;span '</span><span class="keyword">, </span><span class="string">'&lt;/span&gt;'</span><span class="keyword">), </span><span class="default">$hlt</span><span class="keyword">);<br />   </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#color="(.*?)"#'</span><span class="keyword">, </span><span class="string">'style="color: \\1"'</span><span class="keyword">, </span><span class="default">$fon</span><span class="keyword">);<br />   if(</span><span class="default">$return</span><span class="keyword">)<br />     return </span><span class="default">$ret</span><span class="keyword">;<br />   echo </span><span class="default">$ret</span><span class="keyword">;<br />   return </span><span class="default">true</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="83460">  <div class="votes">
    <div id="Vu83460">
    <a href="https://www.php.net/manual/vote-note.php?id=83460&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd83460">
    <a href="https://www.php.net/manual/vote-note.php?id=83460&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V83460" title="53% like this...">
    1
    </div>
  </div>
  <a href="function.highlight-string.php.html#83460" class="name">
  <strong class="user"><em>Dobromir Velev</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#83460"> &para;</a><div class="date" title="2008-05-27 04:04"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom83460">
<div class="phpcode"><code><span class="html">Here is an improved version of Dimitry's xml_highlight function.<br />I fixed a bug which replaced the first character of the tags name,<br />and added a line to replace the tabs and spaces with<br />non-breaking space symbols to keep the identation.<br /><br />&lt;?<br />function xml_highlight($s){<br />  $s = preg_replace("|&lt;([^/?])(.*)\s(.*)&gt;|isU", "[1]&lt;[2]\\1\\2[/2] [5]\\3[/5]&gt;[/1]", $s);<br />  $s = preg_replace("|&lt;/(.*)&gt;|isU", "[1]&lt;/[2]\\1[/2]&gt;[/1]", $s);<br />  $s = preg_replace("|&lt;\?(.*)\?&gt;|isU","[3]&lt;?\\1?&gt;[/3]", $s);<br />  $s = preg_replace("|\=\"(.*)\"|isU", "[6]=[/6][4]\"\\1\"[/4]",$s);<br />  $s = htmlspecialchars($s);<br />  $s = str_replace("\t","&amp;nbsp;&amp;nbsp;",$s);<br />  $s = str_replace(" ","&amp;nbsp;",$s);<br />  $replace = array(1=&gt;'0000FF', 2=&gt;'0000FF', 3=&gt;'800000', 4=&gt;'FF00FF', 5=&gt;'FF0000', 6=&gt;'0000FF');<br />  foreach($replace as $k=&gt;$v) {<br />    $s = preg_replace("|\[".$k."\](.*)\[/".$k."\]|isU", "&lt;font color=\"#".$v."\"&gt;\\1&lt;/font&gt;", $s);<br />  }<br /><br />  return nl2br($s);<br />}<br />?&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="117261">  <div class="votes">
    <div id="Vu117261">
    <a href="https://www.php.net/manual/vote-note.php?id=117261&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117261">
    <a href="https://www.php.net/manual/vote-note.php?id=117261&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117261" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.highlight-string.php.html#117261" class="name">
  <strong class="user"><em>stanislav dot eckert at vizson dot de</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#117261"> &para;</a><div class="date" title="2015-05-11 03:18"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom117261">
<div class="phpcode"><code><span class="html">The documentation says for the first parameter "The PHP code to be highlighted. This should include the opening tag. ". But it seems that the code should not only but *must* start with PHP's opening tag or otherwise the function will still modify but will not highlight the code.</span></code></div>
  </div>
 </div>
  <div class="note" id="90378">  <div class="votes">
    <div id="Vu90378">
    <a href="https://www.php.net/manual/vote-note.php?id=90378&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd90378">
    <a href="https://www.php.net/manual/vote-note.php?id=90378&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V90378" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.highlight-string.php.html#90378" class="name">
  <strong class="user"><em>Mean^_^</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#90378"> &para;</a><div class="date" title="2009-04-18 09:45"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom90378">
<div class="phpcode"><code><span class="html">[EDIT BY danbrown AT php DOT net: The following note contains a user-supplied version of a syntax highlighter.]<br /><br />&lt;style type="text/css"&gt;<br />.linenum{<br />    text-align:right;<br />    background:#FDECE1;<br />    border:1px solid #cc6666;<br />    padding:0px 1px 0px 1px;<br />    font-family:Courier New, Courier;<br />    float:left;<br />    width:17px;<br />    margin:3px 0px 30px 0px;<br />    }<br /><br />code    {/* safari/konq hack */<br />    font-family:Courier New, Courier;<br />}<br /><br />.linetext{<br />    width:700px;<br />    text-align:left;<br />    background:white;<br />    border:1px solid #cc6666;<br />    border-left:0px;<br />    padding:0px 1px 0px 8px;<br />    font-family:Courier New, Courier;<br />    float:left;<br />    margin:3px 0px 30px 0px;<br />    }<br /><br />br.clear    {<br />    clear:both;<br />}<br /><br />&lt;/style&gt;<br /><span class="default">&lt;?php<br /><br /> </span><span class="keyword">function </span><span class="default">printCode</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">, </span><span class="default">$lines_number </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)    {<br />               <br />         if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">)) </span><span class="default">$codeE </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">);<br />        </span><span class="default">$count_lines </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$codeE</span><span class="keyword">);<br />        <br />        </span><span class="default">$r1 </span><span class="keyword">= </span><span class="string">"Code:&lt;br /&gt;"</span><span class="keyword">;<br /><br />         if (</span><span class="default">$lines_number</span><span class="keyword">){            <br />                </span><span class="default">$r1 </span><span class="keyword">.= </span><span class="string">"&lt;div class=\"linenum\"&gt;"</span><span class="keyword">;<br />                foreach(</span><span class="default">$codeE </span><span class="keyword">as </span><span class="default">$line </span><span class="keyword">=&gt;</span><span class="default">$c</span><span class="keyword">) {     <br />                    if(</span><span class="default">$count_lines</span><span class="keyword">==</span><span class="string">'1'</span><span class="keyword">)<br />                        </span><span class="default">$r1 </span><span class="keyword">.= </span><span class="string">"1&lt;br&gt;"</span><span class="keyword">;<br />                    else<br />                        </span><span class="default">$r1 </span><span class="keyword">.= (</span><span class="default">$line </span><span class="keyword">== (</span><span class="default">$count_lines </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">)) ? </span><span class="string">"" </span><span class="keyword">:  (</span><span class="default">$line</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">).</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">; <br />                 } <br />                 </span><span class="default">$r1 </span><span class="keyword">.= </span><span class="string">"&lt;/div&gt;"</span><span class="keyword">;<br />         }<br /><br />         </span><span class="default">$r2 </span><span class="keyword">= </span><span class="string">"&lt;div class=\"linetext\"&gt;"</span><span class="keyword">;<br />         </span><span class="default">$r2 </span><span class="keyword">.= </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />         </span><span class="default">$r2 </span><span class="keyword">.= </span><span class="string">"&lt;/div&gt;"</span><span class="keyword">;<br /><br />        </span><span class="default">$r </span><span class="keyword">.= </span><span class="default">$r1</span><span class="keyword">.</span><span class="default">$r2</span><span class="keyword">;<br /><br />        echo </span><span class="string">"&lt;div class=\"code\"&gt;"</span><span class="keyword">.</span><span class="default">$r</span><span class="keyword">.</span><span class="string">"&lt;/div&gt;\n"</span><span class="keyword">;<br />    }<br /><br />    </span><span class="default">printCode</span><span class="keyword">(</span><span class="string">'&lt;?php echo "PHP Code" ?&gt;    '</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />by mean<br />Share idea.<br />good luck ^_^</span></code></div>
  </div>
 </div>
  <div class="note" id="83824">  <div class="votes">
    <div id="Vu83824">
    <a href="https://www.php.net/manual/vote-note.php?id=83824&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd83824">
    <a href="https://www.php.net/manual/vote-note.php?id=83824&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V83824" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.highlight-string.php.html#83824" class="name">
  <strong class="user"><em>fsx dot nr01 at gmail dot com</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#83824"> &para;</a><div class="date" title="2008-06-13 09:22"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom83824">
<div class="phpcode"><code><span class="html">Here is an improved version of the code highlighter w/ linenumbers from 'vanessaschissato at gmail dot com' - <a href="http://nl.php.net/manual/en/function.highlight-string.php#70456" rel="nofollow" target="_blank">http://nl.php.net/manual/en/function.highlight-string.php#70456</a><br /><br /><span class="default">&lt;?php<br /><br />    </span><span class="keyword">function </span><span class="default">printCode</span><span class="keyword">(</span><span class="default">$source_code</span><span class="keyword">)<br />    {<br /><br />        if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$source_code</span><span class="keyword">))<br />            return </span><span class="default">false</span><span class="keyword">;<br />       <br />        </span><span class="default">$source_code </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">"\r\n"</span><span class="keyword">, </span><span class="string">"\r"</span><span class="keyword">), </span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$source_code</span><span class="keyword">));<br />        </span><span class="default">$line_count </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br /><br />        foreach (</span><span class="default">$source_code </span><span class="keyword">as </span><span class="default">$code_line</span><span class="keyword">)<br />        {<br />            </span><span class="default">$formatted_code </span><span class="keyword">.= </span><span class="string">'&lt;tr&gt;&lt;td&gt;'</span><span class="keyword">.</span><span class="default">$line_count</span><span class="keyword">.</span><span class="string">'&lt;/td&gt;'</span><span class="keyword">;<br />            </span><span class="default">$line_count</span><span class="keyword">++;<br />           <br />            if (</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">'&lt;\?(php)?[^[:graph:]]'</span><span class="keyword">, </span><span class="default">$code_line</span><span class="keyword">))<br />                </span><span class="default">$formatted_code </span><span class="keyword">.= </span><span class="string">'&lt;td&gt;'</span><span class="keyword">. </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'&lt;code&gt;'</span><span class="keyword">, </span><span class="string">'&lt;/code&gt;'</span><span class="keyword">), </span><span class="string">''</span><span class="keyword">, </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$code_line</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">)).</span><span class="string">'&lt;/td&gt;&lt;/tr&gt;'</span><span class="keyword">;<br />            else<br />                </span><span class="default">$formatted_code </span><span class="keyword">.= </span><span class="string">'&lt;td&gt;'</span><span class="keyword">.</span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">'(&amp;lt;\?php&amp;nbsp;)+'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'&lt;code&gt;'</span><span class="keyword">, </span><span class="string">'&lt;/code&gt;'</span><span class="keyword">), </span><span class="string">''</span><span class="keyword">, </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="string">'&lt;?php '</span><span class="keyword">.</span><span class="default">$code_line</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">))).</span><span class="string">'&lt;/td&gt;&lt;/tr&gt;'</span><span class="keyword">;<br />        }<br /><br />        return </span><span class="string">'&lt;table style="font: 1em Consolas, \'andale mono\', \'monotype.com\', \'lucida console\', monospace;"&gt;'</span><span class="keyword">.</span><span class="default">$formatted_code</span><span class="keyword">.</span><span class="string">'&lt;/table&gt;'</span><span class="keyword">;<br />    }<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="81257">  <div class="votes">
    <div id="Vu81257">
    <a href="https://www.php.net/manual/vote-note.php?id=81257&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd81257">
    <a href="https://www.php.net/manual/vote-note.php?id=81257&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V81257" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.highlight-string.php.html#81257" class="name">
  <strong class="user"><em>Daniel</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#81257"> &para;</a><div class="date" title="2008-02-20 02:49"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom81257">
<div class="phpcode"><code><span class="html">Well, Just a little something I wrote which highlights an HTML code...It'll be going through many changes in the next few days.... until then =) enjoy<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">/*************************************\<br /> CODE PANE 1.0 - SILVERWINGS - D. Suissa<br />\*************************************/<br /><br /></span><span class="keyword">class </span><span class="default">HTMLcolorizer</span><span class="keyword">{<br />    private </span><span class="default">$pointer </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="comment">//Cursor position.<br />    </span><span class="keyword">private </span><span class="default">$content </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">; </span><span class="comment">//content of document.<br />    </span><span class="keyword">private </span><span class="default">$colorized </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />    function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">){<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content </span><span class="keyword">= </span><span class="default">$content</span><span class="keyword">;<br />    }<br />    function </span><span class="default">colorComment</span><span class="keyword">(</span><span class="default">$position</span><span class="keyword">){<br />        </span><span class="default">$buffer </span><span class="keyword">= </span><span class="string">"&amp;lt;&lt;span class='HTMLComment'&gt;"</span><span class="keyword">;<br />        for(</span><span class="default">$position</span><span class="keyword">+=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$position </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">) &amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">"&gt;" </span><span class="keyword">;</span><span class="default">$position</span><span class="keyword">++){<br />            </span><span class="default">$buffer</span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">];<br />        }<br />        </span><span class="default">$buffer </span><span class="keyword">.= </span><span class="string">"&lt;/span&gt;&amp;gt;"</span><span class="keyword">;<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">colorized </span><span class="keyword">.= </span><span class="default">$buffer</span><span class="keyword">;<br />        return </span><span class="default">$position</span><span class="keyword">;<br />    }<br />    function </span><span class="default">colorTag</span><span class="keyword">(</span><span class="default">$position</span><span class="keyword">){<br />        </span><span class="default">$buffer </span><span class="keyword">= </span><span class="string">"&amp;lt;&lt;span class='tagName'&gt;"</span><span class="keyword">;<br />        </span><span class="default">$coloredTagName </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />        </span><span class="comment">//As long as we're in the tag scope<br />        </span><span class="keyword">for(</span><span class="default">$position</span><span class="keyword">+=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$position </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">) &amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">"&gt;" </span><span class="keyword">;</span><span class="default">$position</span><span class="keyword">++){<br />            if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] == </span><span class="string">" " </span><span class="keyword">&amp;&amp; !</span><span class="default">$coloredTagName</span><span class="keyword">){<br />                </span><span class="default">$coloredTagName </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />                </span><span class="default">$buffer</span><span class="keyword">.=</span><span class="string">"&lt;/span&gt;"</span><span class="keyword">;<br />            }else if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">" " </span><span class="keyword">&amp;&amp; </span><span class="default">$coloredTagName</span><span class="keyword">){<br />                </span><span class="comment">//Expect attribute<br />                </span><span class="default">$attribute </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />                </span><span class="comment">//While we're in the tag<br />                </span><span class="keyword">for(;</span><span class="default">$position </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">) &amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">"&gt;" </span><span class="keyword">;</span><span class="default">$position</span><span class="keyword">++){<br />                    if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">"="</span><span class="keyword">){<br />                        </span><span class="default">$attribute </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">];<br />                    }else{<br />                        </span><span class="default">$value</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;<br />                        </span><span class="default">$buffer </span><span class="keyword">.= </span><span class="string">"&lt;span class='tagAttribute'&gt;"</span><span class="keyword">.</span><span class="default">$attribute</span><span class="keyword">.</span><span class="string">"&lt;/span&gt;="</span><span class="keyword">;<br />                        </span><span class="default">$attribute </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">; </span><span class="comment">//initialize it<br />                        </span><span class="default">$inQuote </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />                        </span><span class="default">$QuoteType </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />                        for(</span><span class="default">$position</span><span class="keyword">+=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$position </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">) &amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">"&gt;" </span><span class="keyword">&amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">" "  </span><span class="keyword">;</span><span class="default">$position</span><span class="keyword">++){<br />                            if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] == </span><span class="string">'"' </span><span class="keyword">|| </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] == </span><span class="string">"'"</span><span class="keyword">){<br />                                </span><span class="default">$inQuote </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />                                </span><span class="default">$QuoteType </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">];<br />                                </span><span class="default">$value</span><span class="keyword">.=</span><span class="default">$QuoteType</span><span class="keyword">;<br />                                </span><span class="comment">//Read Until next quotation mark.<br />                                </span><span class="keyword">for(</span><span class="default">$position</span><span class="keyword">+=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$position </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">) &amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">"&gt;" </span><span class="keyword">&amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="default">$QuoteType  </span><span class="keyword">;</span><span class="default">$position</span><span class="keyword">++){<br />                                    </span><span class="default">$value </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">];<br />                                }    <br />                                </span><span class="default">$value</span><span class="keyword">.=</span><span class="default">$QuoteType</span><span class="keyword">;<br />                            }else{</span><span class="comment">//No Quotation marks.<br />                                </span><span class="default">$value </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">];<br />                            }                            <br />                        }<br />                        </span><span class="default">$buffer </span><span class="keyword">.= </span><span class="string">"&lt;span class='tagValue'&gt;"</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">.</span><span class="string">"&lt;/span&gt;"</span><span class="keyword">;<br />                        break;            <br />                    }<br />                    <br />                }<br />                if(</span><span class="default">$attribute </span><span class="keyword">!= </span><span class="string">""</span><span class="keyword">){</span><span class="default">$buffer</span><span class="keyword">.=</span><span class="string">"&lt;span class='tagAttribute'&gt;"</span><span class="keyword">.</span><span class="default">$attribute</span><span class="keyword">.</span><span class="string">"&lt;/span&gt;"</span><span class="keyword">;}<br />            }<br />            if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] == </span><span class="string">"&gt;" </span><span class="keyword">){break;}else{</span><span class="default">$buffer</span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">];}<br />            <br />        }<br />        </span><span class="comment">//In case there were no attributes.<br />        </span><span class="keyword">if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] == </span><span class="string">"&gt;" </span><span class="keyword">&amp;&amp; !</span><span class="default">$coloredTagName</span><span class="keyword">){<br />            </span><span class="default">$buffer</span><span class="keyword">.=</span><span class="string">"&lt;/span&gt;&amp;gt;"</span><span class="keyword">;<br />            </span><span class="default">$position</span><span class="keyword">++;<br />        }<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">colorized </span><span class="keyword">.= </span><span class="default">$buffer</span><span class="keyword">;<br />        return --</span><span class="default">$position</span><span class="keyword">;<br />    }<br />    function </span><span class="default">colorize</span><span class="keyword">(){<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">colorized</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;<br />        </span><span class="default">$inTag </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />        for(</span><span class="default">$pointer </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;</span><span class="default">$pointer</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">);</span><span class="default">$pointer</span><span class="keyword">++){<br />            </span><span class="default">$thisChar </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$pointer</span><span class="keyword">];<br />            </span><span class="default">$nextChar </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$pointer</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">];<br />            if(</span><span class="default">$thisChar </span><span class="keyword">== </span><span class="string">"&lt;"</span><span class="keyword">){<br />                if(</span><span class="default">$nextChar </span><span class="keyword">== </span><span class="string">"!"</span><span class="keyword">){<br />                    </span><span class="default">$pointer </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">colorComment</span><span class="keyword">(</span><span class="default">$pointer</span><span class="keyword">);<br />                }else if(</span><span class="default">$nextChar </span><span class="keyword">== </span><span class="string">"?"</span><span class="keyword">){<br />                    </span><span class="comment">//colorPHP();<br />                </span><span class="keyword">}else{<br />                    </span><span class="default">$pointer </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">colorTag</span><span class="keyword">(</span><span class="default">$pointer</span><span class="keyword">);<br />                }<br />            }else{<br />                </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">colorized </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$pointer</span><span class="keyword">];<br />            }<br />        }<br />        return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">colorized</span><span class="keyword">;<br />    }<br />}<br /></span><span class="default">$curDocName </span><span class="keyword">= </span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'doc'</span><span class="keyword">];<br /></span><span class="default">$docHandle </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$curDocName</span><span class="keyword">,</span><span class="string">"r"</span><span class="keyword">);<br /></span><span class="default">$docStrContent </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$docHandle</span><span class="keyword">,</span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$curDocName</span><span class="keyword">));<br /></span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$docHandle</span><span class="keyword">);<br /></span><span class="default">$HTMLinspector </span><span class="keyword">= new </span><span class="default">HTMLcolorizer</span><span class="keyword">(</span><span class="default">$docStrContent</span><span class="keyword">);<br /></span><span class="default">$document </span><span class="keyword">= </span><span class="default">$HTMLinspector</span><span class="keyword">-&gt;</span><span class="default">colorize</span><span class="keyword">();<br /></span><span class="default">?&gt;<br /></span><br />&lt;html&gt;<br />    &lt;head&gt;<br />        &lt;style type="text/css"&gt;<br />        /**********************\<br />         * MOZILLA FIREFOX STYLE<br />        \**********************/<br />        /*pre{font-family:Tahoma;font-size:px;}*/<br />        .tagName{color:purple;}<br />        .tagAttribute{color:red;}<br />        .tagValue{color:blue;}<br />        .HTMLComment{font-style:italic;color:green;}<br />        &lt;/style&gt;<br />    &lt;/head&gt;<br />    &lt;body&gt;<br />    <span class="default">&lt;?php<br />        </span><span class="keyword">echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">.</span><span class="default">$document</span><span class="keyword">.</span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />    </span><span class="default">?&gt;<br /></span>    &lt;/body&gt;<br />&lt;/html&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="79869">  <div class="votes">
    <div id="Vu79869">
    <a href="https://www.php.net/manual/vote-note.php?id=79869&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd79869">
    <a href="https://www.php.net/manual/vote-note.php?id=79869&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V79869" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.highlight-string.php.html#79869" class="name">
  <strong class="user"><em>wm at tellinya dot com</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#79869"> &para;</a><div class="date" title="2007-12-17 04:32"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom79869">
<div class="phpcode"><code><span class="html">I wanted to build a better function and exclude operators {}=- from keywords span class. I also wanted to link functions used in my PHP code directly to the PHP site.<br />A lot more changes and tweaks have been made and the output is much better!<br /><br />Find the function here :<br /><a href="http://www.tellinya.com/art2/262/highligh-php-syntax/" rel="nofollow" target="_blank">http://www.tellinya.com/art2/262/highligh-php-syntax/</a><br />and ditch the old PHP one permanently.<br />Tested and built on PHP 5.2.0.<br /><br />Looking forward to any input.</span></code></div>
  </div>
 </div>
  <div class="note" id="54015">  <div class="votes">
    <div id="Vu54015">
    <a href="https://www.php.net/manual/vote-note.php?id=54015&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd54015">
    <a href="https://www.php.net/manual/vote-note.php?id=54015&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V54015" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.highlight-string.php.html#54015" class="name">
  <strong class="user"><em>zer0</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#54015"> &para;</a><div class="date" title="2005-06-20 09:18"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom54015">
<div class="phpcode"><code><span class="html">Concerning my code below:<br /><br />I'm sorry, I completely forgot about str_ireplace being for PHP 5 for some reason. Also, there was another error I missed (too many late nights ;)). Here's the corrected code:<br /><br /><span class="default">&lt;?php<br />    </span><span class="keyword">function </span><span class="default">highlight_code</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">, </span><span class="default">$inline</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">, </span><span class="default">$return</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) </span><span class="comment">// Pre php 4 support for capturing highlight<br />    </span><span class="keyword">{<br />        (string) </span><span class="default">$highlight </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />        if ( </span><span class="default">version_compare</span><span class="keyword">(</span><span class="default">PHP_VERSION</span><span class="keyword">, </span><span class="string">"4.2.0"</span><span class="keyword">, </span><span class="string">"&lt;"</span><span class="keyword">) === </span><span class="default">1 </span><span class="keyword">)<br />        {<br />            </span><span class="default">ob_start</span><span class="keyword">(); </span><span class="comment">// start output buffering to capture contents of highlight<br />            </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">);<br />            </span><span class="default">$highlight </span><span class="keyword">= </span><span class="default">ob_get_contents</span><span class="keyword">(); </span><span class="comment">// capture output<br />            </span><span class="default">ob_end_clean</span><span class="keyword">(); </span><span class="comment">// clear buffer cleanly<br />        </span><span class="keyword">}<br />        else<br />        {<br />            </span><span class="default">$highlight</span><span class="keyword">=</span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />        }<br />        <br />        </span><span class="comment"># Using preg_replace will allow PHP 4 in on the fun<br />        </span><span class="keyword">if ( </span><span class="default">$inline </span><span class="keyword">=== </span><span class="default">true </span><span class="keyword">)<br />            </span><span class="default">$highlight</span><span class="keyword">=</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/&lt;code&gt;/i"</span><span class="keyword">,</span><span class="string">"&lt;code class=\"inline\"&gt;"</span><span class="keyword">,</span><span class="default">$highlight</span><span class="keyword">);<br />        else<br />            </span><span class="default">$highlight</span><span class="keyword">=</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/&lt;code&gt;/i"</span><span class="keyword">,</span><span class="string">"&lt;code class=\"block\"&gt;"</span><span class="keyword">,</span><span class="default">$highlight</span><span class="keyword">);            <br />        <br />        if ( </span><span class="default">$return </span><span class="keyword">=== </span><span class="default">true </span><span class="keyword">)<br />        {<br />            return </span><span class="default">$highlight</span><span class="keyword">;<br />        }<br />        else<br />        {<br />            echo </span><span class="default">$highlight</span><span class="keyword">;<br />        }<br />    }<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="53845">  <div class="votes">
    <div id="Vu53845">
    <a href="https://www.php.net/manual/vote-note.php?id=53845&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd53845">
    <a href="https://www.php.net/manual/vote-note.php?id=53845&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V53845" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.highlight-string.php.html#53845" class="name">
  <strong class="user"><em>Sam Wilson</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#53845"> &para;</a><div class="date" title="2005-06-14 11:32"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom53845">
<div class="phpcode"><code><span class="html">manithu at fahr-zur-hoelle dot org forgot only one thing:  to fix the break tags.  The addidtion of the following should do it.<br /><br /><span class="default">&lt;?php<br />$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"&lt;br&gt;"</span><span class="keyword">, </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="53800">  <div class="votes">
    <div id="Vu53800">
    <a href="https://www.php.net/manual/vote-note.php?id=53800&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd53800">
    <a href="https://www.php.net/manual/vote-note.php?id=53800&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V53800" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.highlight-string.php.html#53800" class="name">
  <strong class="user"><em>bpgordon at gmail dot com</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#53800"> &para;</a><div class="date" title="2005-06-13 01:04"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom53800">
<div class="phpcode"><code><span class="html">On dleavitt AT ucsc DOT edu's comment:<br /><br />You might want to use md5($html_string) instead of "piggusmaloy" as a generally good programming practice. Just in case "piggusmaloy" is actually in $html_string.</span></code></div>
  </div>
 </div>
  <div class="note" id="53351">  <div class="votes">
    <div id="Vu53351">
    <a href="https://www.php.net/manual/vote-note.php?id=53351&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd53351">
    <a href="https://www.php.net/manual/vote-note.php?id=53351&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V53351" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.highlight-string.php.html#53351" class="name">
  <strong class="user"><em>trixsey at animania dot nu</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#53351"> &para;</a><div class="date" title="2005-05-29 04:02"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom53351">
<div class="phpcode"><code><span class="html">A neat function I made. Syntax coloring, row numbers, varying background colors per row in the table.<br /><br />&lt;?<br />function showCode($code) {<br />    $html = highlight_string($code, true);<br />    $html = str_replace("\n", "", $html);<br />    $rows = explode("&lt;br /&gt;", $html);<br /><br />    $row_num = array();<br />    $i = 1;<br /><br />    foreach($rows as $row) {<br />        if($i &lt; 10) {<br />            $i = "0".$i;<br />        }<br /><br />        if($i==1) {<br />            $row_num[] = "&lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;font color=\"#000000\"&gt;&lt;code&gt;$i&lt;/code&gt;&lt;/font&gt;\t$row&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;";<br />        }<br /><br />        if($i!=1) {<br />            if(is_int($i/2)) {<br />                $row_num[] = "&lt;tr bgcolor=\"#F9F9F9\"&gt;&lt;td&gt;&lt;code&gt;&lt;font color=\"#000000\"&gt;$i&lt;/font&gt;\t$row&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;";<br />            } else {<br />                $row_num[] = "&lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;font color=\"#000000\"&gt;$i&lt;/font&gt;\t$row&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;";<br />            }<br />        }<br /><br />        $i++;<br />    }<br />    return "&lt;pre&gt;\nFilename: &lt;b&gt;$_GET[file]&lt;/b&gt;\n&lt;table<br />    style=\"border:1px #000000 solid\"&gt;".implode($row_num)."&lt;/table&gt;&lt;/pre&gt;";<br />}<br />?&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="51762">  <div class="votes">
    <div id="Vu51762">
    <a href="https://www.php.net/manual/vote-note.php?id=51762&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd51762">
    <a href="https://www.php.net/manual/vote-note.php?id=51762&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V51762" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.highlight-string.php.html#51762" class="name">
  <strong class="user"><em>support at superhp dot de</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#51762"> &para;</a><div class="date" title="2005-04-10 04:58"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom51762">
<div class="phpcode"><code><span class="html">With this function you can highlight php code with line numbers:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">highlight_php</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)<br />{<br />  </span><span class="default">$Line </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);<br /><br />  for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$Line</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++)<br />  {<br />    </span><span class="default">$line </span><span class="keyword">.= </span><span class="string">"&amp;nbsp;"</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">.</span><span class="string">"&amp;nbsp;&lt;br&gt;"</span><span class="keyword">;<br />  }<br />    <br />  </span><span class="default">ob_start</span><span class="keyword">();<br />  </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br />  </span><span class="default">$Code</span><span class="keyword">=</span><span class="default">ob_get_contents</span><span class="keyword">();<br />  </span><span class="default">ob_end_clean</span><span class="keyword">();<br />  <br />  </span><span class="default">$header</span><span class="keyword">=</span><span class="string">'&lt;table border="0" cellpadding="0" cellspacing="0" width="95%" style="border-style: solid; border-width:1px; border-color: white black black white"&gt;<br />    &lt;tr&gt;<br />      &lt;td width="100%" colspan="2"  style="border-style: solid; border-width:1px; border-color: white; background-color: #99ccff; font-family:Arial; color:white; font-weight:bold;"&gt;Php-Code:&lt;/td&gt;<br />    &lt;/tr&gt;<br />    &lt;tr&gt;<br />      &lt;td width="3%" valign="top" style="background-color: #99ccff; border-style: solid; border-width:1px; border-color: white;"&gt;&lt;code&gt;'</span><span class="keyword">.</span><span class="default">$line</span><span class="keyword">.</span><span class="string">'&lt;/code&gt;&lt;/td&gt;<br />      &lt;td width="97%" valign="top" style="background-color: white;"&gt;&lt;div style="white-space: nowrap; overflow: auto;"&gt;&lt;code&gt;'</span><span class="keyword">;<br /><br />  </span><span class="default">$footer</span><span class="keyword">=</span><span class="default">$Code</span><span class="keyword">.</span><span class="string">'&lt;/div&gt;&lt;/code&gt;&lt;/td&gt;<br />    &lt;/tr&gt;<br />  &lt;/table&gt;'</span><span class="keyword">;<br /><br />  return </span><span class="default">$header</span><span class="keyword">.</span><span class="default">$footer</span><span class="keyword">;<br />} </span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="48742">  <div class="votes">
    <div id="Vu48742">
    <a href="https://www.php.net/manual/vote-note.php?id=48742&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd48742">
    <a href="https://www.php.net/manual/vote-note.php?id=48742&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V48742" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.highlight-string.php.html#48742" class="name">
  <strong class="user"><em>admin at bwongar dot com</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#48742"> &para;</a><div class="date" title="2005-01-05 03:11"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom48742">
<div class="phpcode"><code><span class="html">I didn't get the expected results from the other XHTML_highlight function, so I developed my own and it is much more efficient. The older one uses a preg_replace to replace the contents of the tag to within a span tag. The only preg_replace in my function pulls the color attribute, and puts it within a str_replace'd span tag.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">xhtml_highlight</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />    </span><span class="default">$str </span><span class="keyword">= </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />    </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'&lt;font '</span><span class="keyword">, </span><span class="string">'&lt;/font&gt;'</span><span class="keyword">), array(</span><span class="string">'&lt;span '</span><span class="keyword">, </span><span class="string">'&lt;/span&gt;'</span><span class="keyword">), </span><span class="default">$str</span><span class="keyword">);<br />    return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#color="(.*?)"#'</span><span class="keyword">, </span><span class="string">'style="color: \\1"'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="64715">  <div class="votes">
    <div id="Vu64715">
    <a href="https://www.php.net/manual/vote-note.php?id=64715&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd64715">
    <a href="https://www.php.net/manual/vote-note.php?id=64715&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V64715" title="42% like this...">
    -1
    </div>
  </div>
  <a href="function.highlight-string.php.html#64715" class="name">
  <strong class="user"><em>peter at int8 dot com</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#64715"> &para;</a><div class="date" title="2006-04-19 04:43"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom64715">
<div class="phpcode"><code><span class="html">This hasn't been mentioned, but it appears that PHP opening and closing tags are required to be part of the code snippet.<br /><span class="default">&lt;?php highlight_string</span><span class="keyword">(</span><span class="string">"&lt;? \$var = 15; ?&gt;"</span><span class="keyword">); </span><span class="default">?&gt;<br /></span>works, while<br /><span class="default">&lt;?php highlight_string</span><span class="keyword">(</span><span class="string">"\$var = 15;"</span><span class="keyword">); </span><span class="default">?&gt;<br /></span>does not. This is unforunate for those of use who want to show tiny code snippets, but there you go. Earlier versions of this function did not have this requirement, if I remember correctly.</span></code></div>
  </div>
 </div>
  <div class="note" id="74249">  <div class="votes">
    <div id="Vu74249">
    <a href="https://www.php.net/manual/vote-note.php?id=74249&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd74249">
    <a href="https://www.php.net/manual/vote-note.php?id=74249&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V74249" title="40% like this...">
    -1
    </div>
  </div>
  <a href="function.highlight-string.php.html#74249" class="name">
  <strong class="user"><em>supremacy2k at gmail dot com</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#74249"> &para;</a><div class="date" title="2007-03-31 04:06"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom74249">
<div class="phpcode"><code><span class="html">A simplification of functions vanessaschissato at gmail dot com at 17-Oct-2006 05:04.<br /><br />Since it had trouble keeping the code intact. (It removed /* )<br /><br />function showCode($code) {<br /> $code = highlight_string($code, true);<br /> $code = explode("&lt;br /&gt;", $code);<br /> <br /> $i = "1";<br /> foreach ($code as $line =&gt; $syntax) {<br />  echo "&lt;font color='black'&gt;".$i."&lt;/font&gt; ".$syntax."&lt;br&gt;";<br />  $i++;<br /> }<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="70059">  <div class="votes">
    <div id="Vu70059">
    <a href="https://www.php.net/manual/vote-note.php?id=70059&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd70059">
    <a href="https://www.php.net/manual/vote-note.php?id=70059&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V70059" title="40% like this...">
    -1
    </div>
  </div>
  <a href="function.highlight-string.php.html#70059" class="name">
  <strong class="user"><em>tyler dot reed at brokeguysinc dot com</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#70059"> &para;</a><div class="date" title="2006-10-01 06:11"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom70059">
<div class="phpcode"><code><span class="html">This is a little chunk of code that i use to show the source of a file, i took part of the idea from a example i found on another php function page.<br /><br />This code takes a php file and highlights it and places a line number next to it.  Great for on the fly debugging.<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">// Get a file into an array<br /></span><span class="default">$lines </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="string">'index.php'</span><span class="keyword">);<br /><br /></span><span class="comment">// Loop through our array, show HTML source as HTML source; and line numbers too.<br /></span><span class="keyword">echo(</span><span class="string">'&lt;table border=0 cellpadding=0 cellspacing=0&gt;'</span><span class="keyword">);<br />foreach (</span><span class="default">$lines </span><span class="keyword">as </span><span class="default">$line_num </span><span class="keyword">=&gt; </span><span class="default">$line</span><span class="keyword">) {<br />    echo(</span><span class="string">'&lt;tr&gt;'</span><span class="keyword">);<br />    echo(</span><span class="string">'&lt;td bgcolor = "#cccccc"&gt;'</span><span class="keyword">);<br />    echo(</span><span class="string">'&lt;code&gt;' </span><span class="keyword">. (</span><span class="default">$line_num </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">) . </span><span class="string">'&lt;/code&gt;'</span><span class="keyword">);<br />    echo(</span><span class="string">'&lt;/td&gt;'</span><span class="keyword">);<br />    echo(</span><span class="string">'&lt;td&gt;'</span><span class="keyword">);          <br />    </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">);<br />    echo(</span><span class="string">'&lt;/td&gt;'</span><span class="keyword">);<br />    echo(</span><span class="string">'&lt;/tr&gt;'</span><span class="keyword">);<br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="53896">  <div class="votes">
    <div id="Vu53896">
    <a href="https://www.php.net/manual/vote-note.php?id=53896&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd53896">
    <a href="https://www.php.net/manual/vote-note.php?id=53896&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V53896" title="33% like this...">
    -2
    </div>
  </div>
  <a href="function.highlight-string.php.html#53896" class="name">
  <strong class="user"><em>zero</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#53896"> &para;</a><div class="date" title="2005-06-16 03:55"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom53896">
<div class="phpcode"><code><span class="html">In some cases, I found that it's useful to have highlight_string format &lt;code&gt;...&lt;/code&gt; inline as part of a paragraph, and other times, as a block for demonstrating multiple lines of code. I made this function to help out.<br /><br /><span class="default">&lt;?php<br />    </span><span class="keyword">function </span><span class="default">highlight_code</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">, </span><span class="default">$inline</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">, </span><span class="default">$return</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) </span><span class="comment">// Pre php 4 support for capturing highlight<br />    </span><span class="keyword">{<br />        (string) </span><span class="default">$highlight </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />        if ( </span><span class="default">version_compare</span><span class="keyword">(</span><span class="default">phpversion</span><span class="keyword">(), </span><span class="string">"4.2.0"</span><span class="keyword">, </span><span class="string">"&lt;"</span><span class="keyword">) === </span><span class="default">1 </span><span class="keyword">)<br />        {<br />            </span><span class="default">ob_start</span><span class="keyword">(); </span><span class="comment">// start output buffering to capture contents of highlight<br />            </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">);<br />            </span><span class="default">$highlight </span><span class="keyword">= </span><span class="default">ob_get_contents</span><span class="keyword">(); </span><span class="comment">// capture output<br />            </span><span class="default">ob_end_clean</span><span class="keyword">(); </span><span class="comment">// clear buffer cleanly<br />        </span><span class="keyword">}<br />        else<br />        {<br />            </span><span class="default">$highlight</span><span class="keyword">=</span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />        }<br />        <br />        </span><span class="comment">## The classes below need to correspond to a stylesheet!<br />        </span><span class="keyword">if ( </span><span class="default">$inline </span><span class="keyword">=== </span><span class="default">true </span><span class="keyword">)<br />          </span><span class="default">$highlight</span><span class="keyword">=</span><span class="default">str_ireplace</span><span class="keyword">(</span><span class="string">"&lt;code&gt;"</span><span class="keyword">,</span><span class="string">"&lt;code class=\"inline\"&gt;"</span><span class="keyword">,</span><span class="default">$highlight</span><span class="keyword">);<br />        else<br />          </span><span class="default">$highlight</span><span class="keyword">=</span><span class="default">str_ireplace</span><span class="keyword">(</span><span class="string">"&lt;code&gt;"</span><span class="keyword">,</span><span class="string">"&lt;code class=\"block\"&gt;"</span><span class="keyword">,</span><span class="default">$highlight</span><span class="keyword">);<br />            <br />        <br />        if ( </span><span class="default">$return </span><span class="keyword">=== </span><span class="default">true </span><span class="keyword">)<br />        {<br />            return </span><span class="default">$highlight</span><span class="keyword">;<br />        }<br />        else<br />        {<br />            echo </span><span class="default">$highlight</span><span class="keyword">;<br />        }<br />    }<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="113249">  <div class="votes">
    <div id="Vu113249">
    <a href="https://www.php.net/manual/vote-note.php?id=113249&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd113249">
    <a href="https://www.php.net/manual/vote-note.php?id=113249&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V113249" title="20% like this...">
    -3
    </div>
  </div>
  <a href="function.highlight-string.php.html#113249" class="name">
  <strong class="user"><em>joshuaeasy4u at gmail dot com</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#113249"> &para;</a><div class="date" title="2013-09-17 09:19"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom113249">
<div class="phpcode"><code><span class="html"><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">printCode</span><span class="keyword">(</span><span class="default">$source_code</span><span class="keyword">)<br />{<br />if ( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$source_code</span><span class="keyword">))<br />return </span><span class="default">false</span><span class="keyword">;<br /></span><span class="default">$source_code</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">,</span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">"\r\n"</span><span class="keyword">,</span><span class="string">"\r"</span><span class="keyword">),</span><span class="string">"\n"</span><span class="keyword">,</span><span class="default">$source_code</span><span class="keyword">));<br /></span><span class="default">$line_count</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br />foreach ( </span><span class="default">$source_code </span><span class="keyword">as </span><span class="default">$code_line</span><span class="keyword">)<br />{<br /></span><span class="default">$formatted_code </span><span class="keyword">.=</span><span class="string">'&lt;tr&gt;&lt;td&gt;'</span><span class="keyword">.</span><span class="default">$line_count</span><span class="keyword">.</span><span class="string">'&lt;/td&gt;'</span><span class="keyword">;<br /></span><span class="default">$line_count</span><span class="keyword">++;<br />if ( </span><span class="default">ereg</span><span class="keyword">(</span><span class="string">'&lt;\?(php)?[^[:graph:]]'</span><span class="keyword">,</span><span class="default">$code_line</span><span class="keyword">))<br /></span><span class="default">$formatted_code</span><span class="keyword">.=</span><span class="string">'&lt;td&gt;'</span><span class="keyword">.</span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'&lt;code&gt;'</span><span class="keyword">,</span><span class="string">'&lt;/code&gt;'</span><span class="keyword">),</span><span class="string">''</span><span class="keyword">,</span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$code_line</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">)).</span><span class="string">'&lt;/td&gt;&lt;/tr&gt;'</span><span class="keyword">;<br />else<br /></span><span class="default">$formatted_code </span><span class="keyword">.=</span><span class="string">'&lt;td&gt;'</span><span class="keyword">.</span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">'(&amp;lt;\?php&amp;nbsp;)+'</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'&lt;code&gt;'</span><span class="keyword">,</span><span class="string">'&lt;/code&gt;'</span><span class="keyword">),</span><span class="string">''</span><span class="keyword">,</span><span class="default">highlight_string</span><span class="keyword">(</span><span class="string">'&lt;?php '</span><span class="keyword">.</span><span class="default">$code_line</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">))).</span><span class="string">'&lt;/td&gt;&lt;/tr&gt;'</span><span class="keyword">;<br />}<br />return </span><span class="string">'&lt;table style="font: 1em Consolas, \'andale mono\', \' monotype.com\', \'lucida console\', monospace;"&gt;'</span><span class="keyword">.</span><span class="default">$formatted_code</span><span class="keyword">.</span><span class="string">'&lt;/table&gt;'</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="83136">  <div class="votes">
    <div id="Vu83136">
    <a href="https://www.php.net/manual/vote-note.php?id=83136&amp;page=function.highlight-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd83136">
    <a href="https://www.php.net/manual/vote-note.php?id=83136&amp;page=function.highlight-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V83136" title="14% like this...">
    -5
    </div>
  </div>
  <a href="function.highlight-string.php.html#83136" class="name">
  <strong class="user"><em>Dmitry S</em></strong></a><a class="genanchor" href="function.highlight-string.php.html#83136"> &para;</a><div class="date" title="2008-05-12 06:29"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom83136">
<div class="phpcode"><code><span class="html">The simple XML syntax highlighting.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">xml_highlight</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)<br />{<br />     </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|&lt;[^/?](.*)\s(.*)&gt;|isU"</span><span class="keyword">,</span><span class="string">"[1]&lt;[2]\\1[/2] [5]\\2[/5]&gt;[/1]"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />     </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|&lt;/(.*)&gt;|isU"</span><span class="keyword">,</span><span class="string">"[1]&lt;/[2]\\1[/2]&gt;[/1]"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />     </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|&lt;\?(.*)\?&gt;|isU"</span><span class="keyword">,</span><span class="string">"[3]&lt;?\\1?&gt;[/3]"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />     </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|\=\"(.*)\"|isU"</span><span class="keyword">,</span><span class="string">"[6]=[/6][4]\"\\1\"[/4]"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />     </span><span class="default">$s </span><span class="keyword">= </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br />     </span><span class="default">$replace </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="string">'0000FF'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">=&gt;</span><span class="string">'808000'</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">=&gt;</span><span class="string">'800000'</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">=&gt;</span><span class="string">'FF00FF'</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">=&gt;</span><span class="string">'FF0000'</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">=&gt;</span><span class="string">'0000FF'</span><span class="keyword">);<br />     foreach(</span><span class="default">$replace </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">)<br />     {<br />          </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|\["</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">.</span><span class="string">"\](.*)\[/"</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">.</span><span class="string">"\]|isU"</span><span class="keyword">,</span><span class="string">"&lt;font color=\""</span><span class="keyword">.</span><span class="default">$v</span><span class="keyword">.</span><span class="string">"\"&gt;\\1&lt;/font&gt;"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />     }<br />    return </span><span class="default">nl2br</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.highlight-string&amp;redirect=https://www.php.net/manual/ru/function.highlight-string.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.misc.php.html">Разные функции</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.connection-aborted.php.html" title="connection_&#8203;aborted">connection_&#8203;aborted</a>
                        </li>
                                                <li class="">
                            <a href="function.connection-status.php.html" title="connection_&#8203;status">connection_&#8203;status</a>
                        </li>
                                                <li class="">
                            <a href="function.constant.php.html" title="constant">constant</a>
                        </li>
                                                <li class="">
                            <a href="function.define.php.html" title="define">define</a>
                        </li>
                                                <li class="">
                            <a href="function.defined.php.html" title="defined">defined</a>
                        </li>
                                                <li class="">
                            <a href="function.die.php.html" title="die">die</a>
                        </li>
                                                <li class="">
                            <a href="function.eval.php.html" title="eval">eval</a>
                        </li>
                                                <li class="">
                            <a href="function.exit.php.html" title="exit">exit</a>
                        </li>
                                                <li class="">
                            <a href="function.get-browser.php.html" title="get_&#8203;browser">get_&#8203;browser</a>
                        </li>
                                                <li class="">
                            <a href="function.halt-compiler.php.html" title="_&#8203;_&#8203;halt_&#8203;compiler">_&#8203;_&#8203;halt_&#8203;compiler</a>
                        </li>
                                                <li class="">
                            <a href="function.highlight-file.php.html" title="highlight_&#8203;file">highlight_&#8203;file</a>
                        </li>
                                                <li class="current">
                            <a href="function.highlight-string.php.html" title="highlight_&#8203;string">highlight_&#8203;string</a>
                        </li>
                                                <li class="">
                            <a href="function.hrtime.php.html" title="hrtime">hrtime</a>
                        </li>
                                                <li class="">
                            <a href="function.ignore-user-abort.php.html" title="ignore_&#8203;user_&#8203;abort">ignore_&#8203;user_&#8203;abort</a>
                        </li>
                                                <li class="">
                            <a href="function.pack.php.html" title="pack">pack</a>
                        </li>
                                                <li class="">
                            <a href="function.php-strip-whitespace.php.html" title="php_&#8203;strip_&#8203;whitespace">php_&#8203;strip_&#8203;whitespace</a>
                        </li>
                                                <li class="">
                            <a href="function.sapi-windows-cp-conv.php.html" title="sapi_&#8203;windows_&#8203;cp_&#8203;conv">sapi_&#8203;windows_&#8203;cp_&#8203;conv</a>
                        </li>
                                                <li class="">
                            <a href="function.sapi-windows-cp-get.php.html" title="sapi_&#8203;windows_&#8203;cp_&#8203;get">sapi_&#8203;windows_&#8203;cp_&#8203;get</a>
                        </li>
                                                <li class="">
                            <a href="function.sapi-windows-cp-is-utf8.php.html" title="sapi_&#8203;windows_&#8203;cp_&#8203;is_&#8203;utf8">sapi_&#8203;windows_&#8203;cp_&#8203;is_&#8203;utf8</a>
                        </li>
                                                <li class="">
                            <a href="function.sapi-windows-cp-set.php.html" title="sapi_&#8203;windows_&#8203;cp_&#8203;set">sapi_&#8203;windows_&#8203;cp_&#8203;set</a>
                        </li>
                                                <li class="">
                            <a href="function.sapi-windows-generate-ctrl-event.php.html" title="sapi_&#8203;windows_&#8203;generate_&#8203;ctrl_&#8203;event">sapi_&#8203;windows_&#8203;generate_&#8203;ctrl_&#8203;event</a>
                        </li>
                                                <li class="">
                            <a href="function.sapi-windows-set-ctrl-handler.php.html" title="sapi_&#8203;windows_&#8203;set_&#8203;ctrl_&#8203;handler">sapi_&#8203;windows_&#8203;set_&#8203;ctrl_&#8203;handler</a>
                        </li>
                                                <li class="">
                            <a href="function.sapi-windows-vt100-support.php.html" title="sapi_&#8203;windows_&#8203;vt100_&#8203;support">sapi_&#8203;windows_&#8203;vt100_&#8203;support</a>
                        </li>
                                                <li class="">
                            <a href="function.show-source.php.html" title="show_&#8203;source">show_&#8203;source</a>
                        </li>
                                                <li class="">
                            <a href="function.sleep.php.html" title="sleep">sleep</a>
                        </li>
                                                <li class="">
                            <a href="function.sys-getloadavg.php.html" title="sys_&#8203;getloadavg">sys_&#8203;getloadavg</a>
                        </li>
                                                <li class="">
                            <a href="function.time-nanosleep.php.html" title="time_&#8203;nanosleep">time_&#8203;nanosleep</a>
                        </li>
                                                <li class="">
                            <a href="function.time-sleep-until.php.html" title="time_&#8203;sleep_&#8203;until">time_&#8203;sleep_&#8203;until</a>
                        </li>
                                                <li class="">
                            <a href="function.uniqid.php.html" title="uniqid">uniqid</a>
                        </li>
                                                <li class="">
                            <a href="function.unpack.php.html" title="unpack">unpack</a>
                        </li>
                                                <li class="">
                            <a href="function.usleep.php.html" title="usleep">usleep</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
