<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: mb_substr - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.mb-substr.php.html">
 <link rel="shorturl" href="https://www.php.net/mb-substr">
 <link rel="alternate" href="https://www.php.net/mb-substr" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.mbstring.php.html">
 <link rel="prev" href="function.mb-substr-count.php.html">
 <link rel="next" href="book.pspell.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.mb-substr.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.mb-substr.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.mb-substr.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.mb-substr.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.mb-substr.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.mb-substr.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.mb-substr.php" hreflang="pt_BR">
 <link rel="alternate" href="function.mb-substr.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.mb-substr.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.mb-substr.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="book.pspell.php.html">
          Pspell &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.mb-substr-count.php.html">
          &laquo; mb_substr_count        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.international.php.html'>Поддержка языков и кодировок</a></li>      <li><a href='book.mbstring.php.html'>Многобайтовые строки</a></li>      <li><a href='ref.mbstring.php.html'>Функции для работы с многобайтовыми строками</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.mb-substr.php'>English</option>
            <option value='de/function.mb-substr.php'>German</option>
            <option value='es/function.mb-substr.php'>Spanish</option>
            <option value='fr/function.mb-substr.php'>French</option>
            <option value='it/function.mb-substr.php'>Italian</option>
            <option value='ja/function.mb-substr.php'>Japanese</option>
            <option value='pt_BR/function.mb-substr.php'>Brazilian Portuguese</option>
            <option value='ru/function.mb-substr.php' selected="selected">Russian</option>
            <option value='tr/function.mb-substr.php'>Turkish</option>
            <option value='zh/function.mb-substr.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/mbstring/functions/mb-substr.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.mb-substr%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.mb-substr" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mb_substr</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.6, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">mb_substr</span> &mdash; <span class="dc-title">Возвращает часть строки</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.mb-substr-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>mb_substr</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">int</span> <code class="parameter">$start</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">int</span><span class="type"></span></span> <code class="parameter">$length</code><span class="initializer"> = <strong><code>null</code></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$encoding</code><span class="initializer"> = <strong><code>null</code></strong></span></span><br>): <span class="type">string</span></div>

  <p class="para rdfs-comment">
   Выполняет многобайтовую безопасную операцию <span class="function"><a href="function.substr.php.html" class="function">substr()</a></span>,
   основываясь на количестве символов. Позиция отсчитывается от начала
   строки (<span class="type">string</span>) <code class="parameter">string</code>. Позиция первого символа — 0,
   второго — 1 и т. д.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mb-substr-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">string</code></dt>

     <dd>

      <p class="para">
       Строка, из которой извлекается подстрока.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">start</code></dt>

     <dd>

      <p class="para">
       Если значение параметра <code class="parameter">start</code> неотрицательное, возвращённая строка
       начнётся с позиции <code class="parameter">start</code> от начала строки
       <code class="parameter">string</code>, считая с нуля.
       Например, в строке «<code class="literal">abcdef</code>», символ в позиции <code class="literal">0</code> — это
       «<code class="literal">a</code>», символ в позиции <code class="literal">2</code> — «<code class="literal">c</code>» и т. д.
      </p>
      <p class="para">
       Если значение параметра <code class="parameter">start</code> отрицательное, возвращаемая строка начнётся
       с <code class="parameter">start</code>-го символа с конца
       строки <code class="parameter">string</code>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">length</code></dt>

     <dd>

      <p class="para">
       Максимальное количество символов подстроки, возвращаемых из строки <code class="parameter">string</code>.
       Если не указан или равен <code class="literal">NULL</code> — извлекаются
       все символы до конца строки.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">encoding</code></dt>

     <dd>

      <p class="para">Параметр <code class="parameter">encoding</code> —
это кодировка символов. Если он опущен или равен <strong><code>null</code></strong>, для него будет установлена внутренняя кодировка символов.</p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.mb-substr-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает часть строки <code class="parameter">string</code>,
   заданную параметрами <code class="parameter">start</code> и <code class="parameter">length</code>.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.mb-substr-changelog">
  <h3 class="title">Список изменений</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Версия</th>
      <th>Описание</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
 <td>8.0.0</td>
 <td>
  Теперь параметр <code class="parameter">encoding</code> может принимать значение <strong><code>null</code></strong>.
 </td>
</tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 seealso" id="refsect1-function.mb-substr-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.mb-strcut.php.html" class="function" rel="rdfs-seeAlso">mb_strcut()</a> - Получает часть строки</span></li>
    <li class="member"><span class="function"><a href="function.mb-internal-encoding.php.html" class="function" rel="rdfs-seeAlso">mb_internal_encoding()</a> - Устанавливает/получает внутреннюю кодировку скрипта</span></li>
   </ul>
  </p>
 </div>


</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.mb-substr&amp;redirect=https://www.php.net/manual/ru/function.mb-substr.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">9 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="117764">  <div class="votes">
    <div id="Vu117764">
    <a href="https://www.php.net/manual/vote-note.php?id=117764&amp;page=function.mb-substr&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117764">
    <a href="https://www.php.net/manual/vote-note.php?id=117764&amp;page=function.mb-substr&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117764" title="58% like this...">
    11
    </div>
  </div>
  <a href="function.mb-substr.php.html#117764" class="name">
  <strong class="user"><em>qbolec at gmail dot com</em></strong></a><a class="genanchor" href="function.mb-substr.php.html#117764"> &para;</a><div class="date" title="2015-08-05 03:10"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom117764">
<div class="phpcode"><code><span class="html">As you often need to iterate over UTF-8 characters inside a string, you might be tempted to use mb_substr($text,$i,1).<br />The problem with this is that there is no "magic" way to find $i-th character inside UTF-8 string, other than reading it byte by byte from the begining. Thus a loop which calls mb_substr($text,$i,1) N times for all possible N values of $i, will take much longer than expected. The larger the $i gets, the longer is the search for $i-th letter. As characters are between 1 to 6 bytes long, one can convince oneself, that the execution time of such loop is actually Theta(N^2), which can be really slow even for moderately long texts.<br />One way to work around it is to first split your text into an array of letters using some smart preprocessing, and only then iterate over the array.<br />Here is the idea:<br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">Strings<br /></span><span class="keyword">{<br />  public static function </span><span class="default">len</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">){<br />    return </span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="string">'UTF-8'</span><span class="keyword">);<br />  }<br />  public static function </span><span class="default">charAt</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">){<br />    return </span><span class="default">self</span><span class="keyword">::</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />  }<br />  public static function </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">){<br />    if(</span><span class="default">$y</span><span class="keyword">===</span><span class="default">NULL</span><span class="keyword">){<br />      </span><span class="default">$y</span><span class="keyword">=</span><span class="default">self</span><span class="keyword">::</span><span class="default">len</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />    }<br />    return </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">,</span><span class="string">'UTF-8'</span><span class="keyword">);<br />  }<br />  public static function </span><span class="default">letters</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">){<br />    </span><span class="default">$len </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">len</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />    if(</span><span class="default">$len</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">){<br />      return array();<br />    }else if(</span><span class="default">$len </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">){<br />      return array(</span><span class="default">$a</span><span class="keyword">);<br />    }else{<br />      return </span><span class="default">Arrays</span><span class="keyword">::</span><span class="default">concat</span><span class="keyword">(<br />        </span><span class="default">self</span><span class="keyword">::</span><span class="default">letters</span><span class="keyword">(</span><span class="default">self</span><span class="keyword">::</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$len</span><span class="keyword">&gt;&gt;</span><span class="default">1</span><span class="keyword">)),<br />        </span><span class="default">self</span><span class="keyword">::</span><span class="default">letters</span><span class="keyword">(</span><span class="default">self</span><span class="keyword">::</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$len</span><span class="keyword">&gt;&gt;</span><span class="default">1</span><span class="keyword">))<br />      );<br />    }<br />  }<br /></span><span class="default">?&gt;<br /></span>As you can see, the Strings::letters($text) split the text recursively into two parts. Each level of the recursion requires time linear in the length of the string, and there is logarithmic number of levels, so the total runtime is O(N log N), which is still more than theoretically optimal O(N), but sadly this is the best idea I've got.</span></code></div>
  </div>
 </div>
  <div class="note" id="50275">  <div class="votes">
    <div id="Vu50275">
    <a href="https://www.php.net/manual/vote-note.php?id=50275&amp;page=function.mb-substr&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd50275">
    <a href="https://www.php.net/manual/vote-note.php?id=50275&amp;page=function.mb-substr&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V50275" title="60% like this...">
    6
    </div>
  </div>
  <a href="function.mb-substr.php.html#50275" class="name">
  <strong class="user"><em>drraf at tlen dot pl</em></strong></a><a class="genanchor" href="function.mb-substr.php.html#50275"> &para;</a><div class="date" title="2005-02-23 06:44"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom50275">
<div class="phpcode"><code><span class="html">Note: If borders are out of string - mb_string() returns empty _string_, when function substr() returns _boolean_ false in this case.<br />Keep this in mind when using "===" comparisions.<br /><br />Example code:<br /><span class="default">&lt;?php<br /><br />var_dump</span><span class="keyword">( </span><span class="default">substr</span><span class="keyword">( </span><span class="string">'abc'</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">) ); </span><span class="comment">// returns "false"<br /></span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">mb_substr</span><span class="keyword">( </span><span class="string">'abc'</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">) ); </span><span class="comment">// returns ""<br /><br /></span><span class="default">?&gt;<br /></span><br />It's especially confusing when using mbstring with function overloading turned on.</span></code></div>
  </div>
 </div>
  <div class="note" id="106737">  <div class="votes">
    <div id="Vu106737">
    <a href="https://www.php.net/manual/vote-note.php?id=106737&amp;page=function.mb-substr&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd106737">
    <a href="https://www.php.net/manual/vote-note.php?id=106737&amp;page=function.mb-substr&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V106737" title="55% like this...">
    3
    </div>
  </div>
  <a href="function.mb-substr.php.html#106737" class="name">
  <strong class="user"><em>p dot assenov at aip-solutions dot com</em></strong></a><a class="genanchor" href="function.mb-substr.php.html#106737"> &para;</a><div class="date" title="2011-12-02 09:17"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom106737">
<div class="phpcode"><code><span class="html">I'm trying to capitalize only the first character of the string and tried some of the examples above but they didn't work. It seems mb_substr() cannot calculate the length of the string in multi-byte encoding (UTF-8) and it should be set explicitly. Here is the corrected version:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">mb_ucfirst</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$enc </span><span class="keyword">= </span><span class="string">'utf-8'</span><span class="keyword">) {<br />    return </span><span class="default">mb_strtoupper</span><span class="keyword">(</span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$enc</span><span class="keyword">), </span><span class="default">$enc</span><span class="keyword">).</span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$enc</span><span class="keyword">), </span><span class="default">$enc</span><span class="keyword">);<br />}<br /></span><span class="default">?&gt;<br /></span><br />cheers!</span></code></div>
  </div>
 </div>
  <div class="note" id="55405">  <div class="votes">
    <div id="Vu55405">
    <a href="https://www.php.net/manual/vote-note.php?id=55405&amp;page=function.mb-substr&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd55405">
    <a href="https://www.php.net/manual/vote-note.php?id=55405&amp;page=function.mb-substr&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V55405" title="53% like this...">
    4
    </div>
  </div>
  <a href="function.mb-substr.php.html#55405" class="name">
  <strong class="user"><em>xiaogil at yahoo dot fr</em></strong></a><a class="genanchor" href="function.mb-substr.php.html#55405"> &para;</a><div class="date" title="2005-08-02 08:33"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom55405">
<div class="phpcode"><code><span class="html">Thanks Darien from /freenode #php for the following example (a little bit changed).<br /><br />It just prints the 6th character of $string.<br />You can replace the digits by the same in japanese, chinese or whatever language to make a test, it works perfect.<br /><br /><span class="default">&lt;?php<br />mb_internal_encoding</span><span class="keyword">(</span><span class="string">"UTF-8"</span><span class="keyword">);<br /></span><span class="default">$string </span><span class="keyword">= </span><span class="string">"0123456789"</span><span class="keyword">;<br /></span><span class="default">$mystring </span><span class="keyword">= </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />echo </span><span class="default">$mystring</span><span class="keyword">;<br /></span><span class="default">?&gt;<br /></span><br />(I couldn't replace 0123456789 by chinese numbers for example here, because it's automatically converted into latin digits on this website, look : <br />&amp;#38646;&amp;#19968;&amp;#20108;&amp;#19977;&amp;#22235;<br />&amp;#20116;&amp;#20845;&amp;#19971;&amp;#20843;&amp;#20061;)<br /><br />gilv</span></code></div>
  </div>
 </div>
  <div class="note" id="129132">  <div class="votes">
    <div id="Vu129132">
    <a href="https://www.php.net/manual/vote-note.php?id=129132&amp;page=function.mb-substr&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd129132">
    <a href="https://www.php.net/manual/vote-note.php?id=129132&amp;page=function.mb-substr&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V129132" title="0% like this...">
    -1
    </div>
  </div>
  <a href="function.mb-substr.php.html#129132" class="name">
  <strong class="user"><em>boulahdidraid18 at gmail dot com</em></strong></a><a class="genanchor" href="function.mb-substr.php.html#129132"> &para;</a><div class="date" title="2023-12-30 11:28"><strong>1 month ago</strong></div>
  <div class="text" id="Hcom129132">
<div class="phpcode"><code><span class="html">Here is an example demonstrating the difference between `substr` and `mb_substr` functions:<br /><br />1- When working with non UTF-8 characters, both functions behave the same and give the same output:<br /><br />$str = 'abcdef';<br />echo substr($s, 0, 3); // abc<br />echo mb_substr($s, 0, 3); // abc<br /><br />2- When working with UTF-8 characters, each function will behave differently and give a different result:<br /><br />2.A- The 'substr' function works on the byte-level and with single-byte encoded characters only (doesn't support multibyte encoding). <br /><br />For example:<br /><br />$str_utf8 = utf8_encode("déjà_vu");<br /><br />If we do this:<br /><br />echo substr($str_utf8, 0, 3); // dé<br />echo substr($str_utf8, 0, 2); // d�<br /><br />=&gt; That's because the special character "é" (and "à") is internally coded with two bytes:<br /><br />PHP will start reading the first byte at index 0, which represents `d`, then move to the second byte, which is a part of the two-byte encoding of the character ` é `,  and since the length is set to 2, PHP will stop here and doesn't continue reading the third byte, so it doesn't recognize the character ` é ` and prints � instead of é.<br /><br />2.B- The 'mb_substr' function works on the character-level and supports multibyte encoded characters. This means, PHP counts the number of characters only and doesn't take into consideration the number of bytes of their encoding, for example:<br /><br />$str_utf8 = utf8_encode("déjà_vu");<br /><br />echo mb_substr($str_utf8, 0, 4, "UTF-8"); // Déjà<br />echo mb_substr($str_utf8, 1, 4, "UTF-8"); // éjà_<br />echo mb_substr($str_utf8, 6, 4, "UTF-8"); // u<br />echo mb_substr($str_utf8, 7, 4, "UTF-8"); // ''<br />echo mb_substr($str_utf8, -2, "UTF-8"); // vu<br />echo mb_substr($str_utf8, -2, 1, "UTF-8"); // v<br />echo mb_substr($str_utf8, -2, 3, "UTF-8"); // vu</span></code></div>
  </div>
 </div>
  <div class="note" id="112070">  <div class="votes">
    <div id="Vu112070">
    <a href="https://www.php.net/manual/vote-note.php?id=112070&amp;page=function.mb-substr&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd112070">
    <a href="https://www.php.net/manual/vote-note.php?id=112070&amp;page=function.mb-substr&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V112070" title="47% like this...">
    -1
    </div>
  </div>
  <a href="function.mb-substr.php.html#112070" class="name">
  <strong class="user"><em>desmatic at gmail dot com</em></strong></a><a class="genanchor" href="function.mb-substr.php.html#112070"> &para;</a><div class="date" title="2013-04-29 03:51"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom112070">
<div class="phpcode"><code><span class="html">quick and dirty loop through multibyte string<br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">get_character_classes</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">"UTF-8"</span><span class="keyword">) {<br />    </span><span class="default">$current_encoding </span><span class="keyword">= </span><span class="default">mb_internal_encoding</span><span class="keyword">();<br />    </span><span class="default">mb_internal_encoding</span><span class="keyword">(</span><span class="default">$encoding</span><span class="keyword">);<br />    </span><span class="default">$has </span><span class="keyword">= array();<br />    </span><span class="default">$stringlength </span><span class="keyword">= </span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br />    for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$stringlength</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />        </span><span class="default">$c </span><span class="keyword">= </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />        if ((</span><span class="default">$c </span><span class="keyword">&gt;= </span><span class="string">"0"</span><span class="keyword">) &amp;&amp; (</span><span class="default">$c </span><span class="keyword">&lt;= </span><span class="string">"9"</span><span class="keyword">)) {<br />            </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'numeric'</span><span class="keyword">] = </span><span class="string">"numeric"</span><span class="keyword">;<br />        } else if ((</span><span class="default">$c </span><span class="keyword">&gt;= </span><span class="string">"a"</span><span class="keyword">) &amp;&amp; (</span><span class="default">$c </span><span class="keyword">&lt;= </span><span class="string">"z"</span><span class="keyword">)) {<br />            </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'alpha'</span><span class="keyword">] = </span><span class="string">"alpha"</span><span class="keyword">;<br />            </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'alphalower'</span><span class="keyword">] = </span><span class="string">'alphalower'</span><span class="keyword">;<br />        } else if ((</span><span class="default">$c </span><span class="keyword">&gt;= </span><span class="string">"A"</span><span class="keyword">) &amp;&amp; (</span><span class="default">$c </span><span class="keyword">&lt;= </span><span class="string">"Z"</span><span class="keyword">)) {<br />            </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'alpha'</span><span class="keyword">] = </span><span class="string">"alpha"</span><span class="keyword">;<br />            </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'alphaupper'</span><span class="keyword">] = </span><span class="string">"alphaupper"</span><span class="keyword">;<br />        } else if ((</span><span class="default">$c </span><span class="keyword">== </span><span class="string">"$"</span><span class="keyword">) || (</span><span class="default">$c </span><span class="keyword">== </span><span class="string">"£"</span><span class="keyword">)) {<br />            </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'currency'</span><span class="keyword">] = </span><span class="string">"currency"</span><span class="keyword">;<br />        } else if ((</span><span class="default">$c </span><span class="keyword">== </span><span class="string">"."</span><span class="keyword">) &amp;&amp; (</span><span class="default">$has</span><span class="keyword">[</span><span class="string">'decimal'</span><span class="keyword">])) {<br />            </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'decimals'</span><span class="keyword">] = </span><span class="string">"decimals"</span><span class="keyword">;<br />        } else if (</span><span class="default">$c </span><span class="keyword">== </span><span class="string">"."</span><span class="keyword">) {<br />            </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'decimal'</span><span class="keyword">] = </span><span class="string">"decimal"</span><span class="keyword">;<br />        } else if (</span><span class="default">$c </span><span class="keyword">== </span><span class="string">","</span><span class="keyword">) {<br />            </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'comma'</span><span class="keyword">] = </span><span class="string">"comma"</span><span class="keyword">;<br />        } else if (</span><span class="default">$c </span><span class="keyword">== </span><span class="string">"-"</span><span class="keyword">) {<br />            </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'dash'</span><span class="keyword">] = </span><span class="string">"dash"</span><span class="keyword">;<br />        } else if (</span><span class="default">$c </span><span class="keyword">== </span><span class="string">" "</span><span class="keyword">) {<br />            </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'space'</span><span class="keyword">] = </span><span class="string">"space"</span><span class="keyword">;<br />        } else if (</span><span class="default">$c </span><span class="keyword">== </span><span class="string">"/"</span><span class="keyword">) {<br />            </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'slash'</span><span class="keyword">] = </span><span class="string">"slash"</span><span class="keyword">;<br />        } else if (</span><span class="default">$c </span><span class="keyword">== </span><span class="string">":"</span><span class="keyword">) {<br />            </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'colon'</span><span class="keyword">] = </span><span class="string">"colon"</span><span class="keyword">;<br />        } else if ((</span><span class="default">$c </span><span class="keyword">&gt;= </span><span class="string">" "</span><span class="keyword">) &amp;&amp; (</span><span class="default">$c </span><span class="keyword">&lt;= </span><span class="string">"~"</span><span class="keyword">)) {<br />            </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'ascii'</span><span class="keyword">] = </span><span class="string">"ascii"</span><span class="keyword">;<br />        } else {<br />            </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'binary'</span><span class="keyword">] = </span><span class="string">"binary"</span><span class="keyword">;<br />        }<br />    }<br />    </span><span class="default">mb_internal_encoding</span><span class="keyword">(</span><span class="default">$current_encoding</span><span class="keyword">);<br />    <br />    return </span><span class="default">$has</span><span class="keyword">;<br />}<br /><br /></span><span class="default">$string </span><span class="keyword">= </span><span class="string">"1234asdfA£^_{}|}~žščř"</span><span class="keyword">;<br />echo </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">get_character_classes</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">), </span><span class="default">true</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />Array<br />(<br />    [numeric] =&gt; numeric<br />    [alpha] =&gt; alpha<br />    [alphalower] =&gt; alphalower<br />    [alphaupper] =&gt; alphaupper<br />    [currency] =&gt; currency<br />    [ascii] =&gt; ascii<br />    [binary] =&gt; binary<br />)</span></code></div>
  </div>
 </div>
  <div class="note" id="113329">  <div class="votes">
    <div id="Vu113329">
    <a href="https://www.php.net/manual/vote-note.php?id=113329&amp;page=function.mb-substr&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd113329">
    <a href="https://www.php.net/manual/vote-note.php?id=113329&amp;page=function.mb-substr&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V113329" title="42% like this...">
    -3
    </div>
  </div>
  <a href="function.mb-substr.php.html#113329" class="name">
  <strong class="user"><em>sanjuro at 1up-games dot com</em></strong></a><a class="genanchor" href="function.mb-substr.php.html#113329"> &para;</a><div class="date" title="2013-09-27 06:18"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom113329">
<div class="phpcode"><code><span class="html">A serious pitfall when using mb_substr() set to HTML-ENTITIES encoding is that the function performs a number of conversions before returning the value, the worst one being that html special characters are not just counted but decoded.<br /><br /><span class="default">&lt;?php<br /><br />mb_internal_encoding</span><span class="keyword">(</span><span class="string">"ISO-8859-1"</span><span class="keyword">); echo </span><span class="default">mb_internal_encoding</span><span class="keyword">(),</span><span class="string">"\n&lt;br&gt;&lt;br&gt;\n"</span><span class="keyword">;<br /><br /></span><span class="default">$a</span><span class="keyword">=</span><span class="string">'j&amp;uuml;st &amp;#228; &amp;quot; simple &amp;quot; &amp;#26085;&amp;#26412; &amp;lt;b&amp;gt;test&amp;lt;/b&amp;gt;'</span><span class="keyword">;<br /><br />echo </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">),</span><span class="string">"\n&lt;br&gt;&lt;br&gt;\n"</span><span class="keyword">;<br /></span><span class="comment">// page source: j&amp;uuml;st &amp;#228; &amp;quot; simple &amp;quot; &amp;#26085;&amp;#26412; &amp;lt;b&amp;gt;test&amp;lt;/b&amp;gt;<br /><br /></span><span class="keyword">echo </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">),</span><span class="string">'HTML-ENTITIES'</span><span class="keyword">);<br /></span><span class="comment">// page source: j&amp;uuml;st &amp;auml; " simple " &amp;#26085;&amp;#26412; &lt;b&gt;test&lt;/b&gt;<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="119517">  <div class="votes">
    <div id="Vu119517">
    <a href="https://www.php.net/manual/vote-note.php?id=119517&amp;page=function.mb-substr&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd119517">
    <a href="https://www.php.net/manual/vote-note.php?id=119517&amp;page=function.mb-substr&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V119517" title="38% like this...">
    -4
    </div>
  </div>
  <a href="function.mb-substr.php.html#119517" class="name">
  <strong class="user"><em>qdinar at gmail dot com</em></strong></a><a class="genanchor" href="function.mb-substr.php.html#119517"> &para;</a><div class="date" title="2016-06-27 04:06"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom119517">
<div class="phpcode"><code><span class="html">you can make mb_substr working faster with long strings with usage of ucs-2 encoding.<br /><br /><span class="default">&lt;?php<br /><br />header</span><span class="keyword">(</span><span class="string">'Content-Type: text/html; charset=utf-8'</span><span class="keyword">);<br />echo </span><span class="string">'&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" &gt;'</span><span class="keyword">;<br /><br />function </span><span class="default">test</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">=</span><span class="string">'utf8'</span><span class="keyword">){<br />    </span><span class="default">$t1</span><span class="keyword">=</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />    </span><span class="default">$textlen</span><span class="keyword">=</span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br />    </span><span class="default">$substr_len</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">;<br />    for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$textlen</span><span class="keyword">-</span><span class="default">$substr_len</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />        </span><span class="default">$substr</span><span class="keyword">=</span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">$substr_len</span><span class="keyword">);<br />    }<br />    echo </span><span class="string">'mb_substr, '</span><span class="keyword">.</span><span class="default">$encoding</span><span class="keyword">.</span><span class="string">': '</span><span class="keyword">.(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">)-</span><span class="default">$t1</span><span class="keyword">);<br />    echo </span><span class="string">' . check: '</span><span class="keyword">;<br />    if(</span><span class="default">$encoding</span><span class="keyword">==</span><span class="string">'ucs2'</span><span class="keyword">){<br />        </span><span class="default">$substr</span><span class="keyword">=</span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$substr</span><span class="keyword">,</span><span class="string">'utf-8'</span><span class="keyword">,</span><span class="string">'ucs2'</span><span class="keyword">);<br />    }<br />    </span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">$substr </span><span class="keyword">);<br />    echo </span><span class="string">' . &lt;br&gt;'</span><span class="keyword">;<br />    echo </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />}<br /><br /></span><span class="default">$corpus_short</span><span class="keyword">=</span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">'тест Тест '</span><span class="keyword">,</span><span class="default">1000</span><span class="keyword">);<br /></span><span class="comment">// it works likewise slowly with "test Test" with utf8<br /></span><span class="default">mb_internal_encoding</span><span class="keyword">(</span><span class="string">'utf-8'</span><span class="keyword">);<br /></span><span class="default">test</span><span class="keyword">(</span><span class="default">$corpus_short</span><span class="keyword">);<br /><br /></span><span class="default">$corpus_short_ucs2</span><span class="keyword">=</span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$corpus_short</span><span class="keyword">,</span><span class="string">'ucs2'</span><span class="keyword">,</span><span class="string">'utf-8'</span><span class="keyword">);<br /></span><span class="default">mb_internal_encoding</span><span class="keyword">(</span><span class="string">'ucs2'</span><span class="keyword">);<br /></span><span class="default">test</span><span class="keyword">(</span><span class="default">$corpus_short_ucs2</span><span class="keyword">,</span><span class="string">'ucs2'</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;<br /></span><br />output:<br /><br />mb_substr, utf8: 0.26480984687805 . check: string(5) "ст " .<br /><br />mb_substr, ucs2: 0.0048871040344238 . check: string(5) "ст " .</span></code></div>
  </div>
 </div>
  <div class="note" id="86473">  <div class="votes">
    <div id="Vu86473">
    <a href="https://www.php.net/manual/vote-note.php?id=86473&amp;page=function.mb-substr&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd86473">
    <a href="https://www.php.net/manual/vote-note.php?id=86473&amp;page=function.mb-substr&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V86473" title="27% like this...">
    -16
    </div>
  </div>
  <a href="function.mb-substr.php.html#86473" class="name">
  <strong class="user"><em>projektas at gmail dot com</em></strong></a><a class="genanchor" href="function.mb-substr.php.html#86473"> &para;</a><div class="date" title="2008-10-21 06:29"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom86473">
<div class="phpcode"><code><span class="html">First letter in upper case &lt;hr /&gt;<br /><br /><span class="default">&lt;?php<br />header </span><span class="keyword">(</span><span class="string">'Content-type: text/html; charset=utf-8'</span><span class="keyword">);<br /><br />if (isset(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'check'</span><span class="keyword">]) &amp;&amp; !empty(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'check'</span><span class="keyword">])) {<br />    echo </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">ucfirst_utf8</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'check'</span><span class="keyword">]));<br />} else {<br />    echo </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">ucfirst_utf8</span><span class="keyword">(</span><span class="string">'Žąsinų'</span><span class="keyword">));<br />}<br /><br />function </span><span class="default">ucfirst_utf8</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />    if (</span><span class="default">mb_check_encoding</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="string">'UTF-8'</span><span class="keyword">)) {<br />        </span><span class="default">$first </span><span class="keyword">= </span><span class="default">mb_substr</span><span class="keyword">(<br />            </span><span class="default">mb_strtoupper</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="string">"utf-8"</span><span class="keyword">),</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="string">'utf-8'<br />        </span><span class="keyword">);<br />        return </span><span class="default">$first</span><span class="keyword">.</span><span class="default">mb_substr</span><span class="keyword">(<br />            </span><span class="default">mb_strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="string">"utf-8"</span><span class="keyword">),</span><span class="default">1</span><span class="keyword">,</span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">),</span><span class="string">'utf-8'<br />        </span><span class="keyword">);<br />    } else {<br />        return </span><span class="default">$str</span><span class="keyword">;<br />    }<br />}<br /></span><span class="default">?&gt;<br /></span><br />&lt;form method="post" action="" &gt;<br />    &lt;input type="input" name="check" /&gt;<br />    &lt;input type="submit" /&gt;<br />&lt;/form&gt;</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.mb-substr&amp;redirect=https://www.php.net/manual/ru/function.mb-substr.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.mbstring.php.html">Функции для работы с многобайтовыми строками</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.mb-check-encoding.php.html" title="mb_&#8203;check_&#8203;encoding">mb_&#8203;check_&#8203;encoding</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-chr.php.html" title="mb_&#8203;chr">mb_&#8203;chr</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-convert-case.php.html" title="mb_&#8203;convert_&#8203;case">mb_&#8203;convert_&#8203;case</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-convert-encoding.php.html" title="mb_&#8203;convert_&#8203;encoding">mb_&#8203;convert_&#8203;encoding</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-convert-kana.php.html" title="mb_&#8203;convert_&#8203;kana">mb_&#8203;convert_&#8203;kana</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-convert-variables.php.html" title="mb_&#8203;convert_&#8203;variables">mb_&#8203;convert_&#8203;variables</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-decode-mimeheader.php.html" title="mb_&#8203;decode_&#8203;mimeheader">mb_&#8203;decode_&#8203;mimeheader</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-decode-numericentity.php.html" title="mb_&#8203;decode_&#8203;numericentity">mb_&#8203;decode_&#8203;numericentity</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-detect-encoding.php.html" title="mb_&#8203;detect_&#8203;encoding">mb_&#8203;detect_&#8203;encoding</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-detect-order.php.html" title="mb_&#8203;detect_&#8203;order">mb_&#8203;detect_&#8203;order</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-encode-mimeheader.php.html" title="mb_&#8203;encode_&#8203;mimeheader">mb_&#8203;encode_&#8203;mimeheader</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-encode-numericentity.php.html" title="mb_&#8203;encode_&#8203;numericentity">mb_&#8203;encode_&#8203;numericentity</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-encoding-aliases.php.html" title="mb_&#8203;encoding_&#8203;aliases">mb_&#8203;encoding_&#8203;aliases</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-ereg-match.php.html" title="mb_&#8203;ereg_&#8203;match">mb_&#8203;ereg_&#8203;match</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-ereg-replace-callback.php.html" title="mb_&#8203;ereg_&#8203;replace_&#8203;callback">mb_&#8203;ereg_&#8203;replace_&#8203;callback</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-ereg-replace.php.html" title="mb_&#8203;ereg_&#8203;replace">mb_&#8203;ereg_&#8203;replace</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-ereg-search-getpos.php.html" title="mb_&#8203;ereg_&#8203;search_&#8203;getpos">mb_&#8203;ereg_&#8203;search_&#8203;getpos</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-ereg-search-getregs.php.html" title="mb_&#8203;ereg_&#8203;search_&#8203;getregs">mb_&#8203;ereg_&#8203;search_&#8203;getregs</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-ereg-search-init.php.html" title="mb_&#8203;ereg_&#8203;search_&#8203;init">mb_&#8203;ereg_&#8203;search_&#8203;init</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-ereg-search-pos.php.html" title="mb_&#8203;ereg_&#8203;search_&#8203;pos">mb_&#8203;ereg_&#8203;search_&#8203;pos</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-ereg-search-regs.php.html" title="mb_&#8203;ereg_&#8203;search_&#8203;regs">mb_&#8203;ereg_&#8203;search_&#8203;regs</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-ereg-search-setpos.php.html" title="mb_&#8203;ereg_&#8203;search_&#8203;setpos">mb_&#8203;ereg_&#8203;search_&#8203;setpos</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-ereg-search.php.html" title="mb_&#8203;ereg_&#8203;search">mb_&#8203;ereg_&#8203;search</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-ereg.php.html" title="mb_&#8203;ereg">mb_&#8203;ereg</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-eregi-replace.php.html" title="mb_&#8203;eregi_&#8203;replace">mb_&#8203;eregi_&#8203;replace</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-eregi.php.html" title="mb_&#8203;eregi">mb_&#8203;eregi</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-get-info.php.html" title="mb_&#8203;get_&#8203;info">mb_&#8203;get_&#8203;info</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-http-input.php.html" title="mb_&#8203;http_&#8203;input">mb_&#8203;http_&#8203;input</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-http-output.php.html" title="mb_&#8203;http_&#8203;output">mb_&#8203;http_&#8203;output</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-internal-encoding.php.html" title="mb_&#8203;internal_&#8203;encoding">mb_&#8203;internal_&#8203;encoding</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-language.php.html" title="mb_&#8203;language">mb_&#8203;language</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-list-encodings.php.html" title="mb_&#8203;list_&#8203;encodings">mb_&#8203;list_&#8203;encodings</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-ord.php.html" title="mb_&#8203;ord">mb_&#8203;ord</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-output-handler.php.html" title="mb_&#8203;output_&#8203;handler">mb_&#8203;output_&#8203;handler</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-parse-str.php.html" title="mb_&#8203;parse_&#8203;str">mb_&#8203;parse_&#8203;str</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-preferred-mime-name.php.html" title="mb_&#8203;preferred_&#8203;mime_&#8203;name">mb_&#8203;preferred_&#8203;mime_&#8203;name</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-regex-encoding.php.html" title="mb_&#8203;regex_&#8203;encoding">mb_&#8203;regex_&#8203;encoding</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-regex-set-options.php.html" title="mb_&#8203;regex_&#8203;set_&#8203;options">mb_&#8203;regex_&#8203;set_&#8203;options</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-scrub.php.html" title="mb_&#8203;scrub">mb_&#8203;scrub</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-send-mail.php.html" title="mb_&#8203;send_&#8203;mail">mb_&#8203;send_&#8203;mail</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-split.php.html" title="mb_&#8203;split">mb_&#8203;split</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-str-pad.php.html" title="mb_&#8203;str_&#8203;pad">mb_&#8203;str_&#8203;pad</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-str-split.php.html" title="mb_&#8203;str_&#8203;split">mb_&#8203;str_&#8203;split</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-strcut.php.html" title="mb_&#8203;strcut">mb_&#8203;strcut</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-strimwidth.php.html" title="mb_&#8203;strimwidth">mb_&#8203;strimwidth</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-stripos.php.html" title="mb_&#8203;stripos">mb_&#8203;stripos</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-stristr.php.html" title="mb_&#8203;stristr">mb_&#8203;stristr</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-strlen.php.html" title="mb_&#8203;strlen">mb_&#8203;strlen</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-strpos.php.html" title="mb_&#8203;strpos">mb_&#8203;strpos</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-strrchr.php.html" title="mb_&#8203;strrchr">mb_&#8203;strrchr</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-strrichr.php.html" title="mb_&#8203;strrichr">mb_&#8203;strrichr</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-strripos.php.html" title="mb_&#8203;strripos">mb_&#8203;strripos</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-strrpos.php.html" title="mb_&#8203;strrpos">mb_&#8203;strrpos</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-strstr.php.html" title="mb_&#8203;strstr">mb_&#8203;strstr</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-strtolower.php.html" title="mb_&#8203;strtolower">mb_&#8203;strtolower</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-strtoupper.php.html" title="mb_&#8203;strtoupper">mb_&#8203;strtoupper</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-strwidth.php.html" title="mb_&#8203;strwidth">mb_&#8203;strwidth</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-substitute-character.php.html" title="mb_&#8203;substitute_&#8203;character">mb_&#8203;substitute_&#8203;character</a>
                        </li>
                                                <li class="">
                            <a href="function.mb-substr-count.php.html" title="mb_&#8203;substr_&#8203;count">mb_&#8203;substr_&#8203;count</a>
                        </li>
                                                <li class="current">
                            <a href="function.mb-substr.php.html" title="mb_&#8203;substr">mb_&#8203;substr</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
