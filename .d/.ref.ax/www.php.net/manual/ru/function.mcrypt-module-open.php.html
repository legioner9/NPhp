<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: mcrypt_module_open - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.mcrypt-module-open.php.html">
 <link rel="shorturl" href="https://www.php.net/mcrypt-module-open">
 <link rel="alternate" href="https://www.php.net/mcrypt-module-open" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.mcrypt.php.html">
 <link rel="prev" href="function.mcrypt-module-is-block-mode.php.html">
 <link rel="next" href="function.mcrypt-module-self-test.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.mcrypt-module-open.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.mcrypt-module-open.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.mcrypt-module-open.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.mcrypt-module-open.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.mcrypt-module-open.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.mcrypt-module-open.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.mcrypt-module-open.php" hreflang="pt_BR">
 <link rel="alternate" href="function.mcrypt-module-open.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.mcrypt-module-open.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.mcrypt-module-open.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.mcrypt-module-self-test.php.html">
          mcrypt_module_self_test &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.mcrypt-module-is-block-mode.php.html">
          &laquo; mcrypt_module_is_block_mode        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.crypto.php.html'>Криптографические модули</a></li>      <li><a href='book.mcrypt.php.html'>Mcrypt</a></li>      <li><a href='ref.mcrypt.php.html'>Mcrypt</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.mcrypt-module-open.php'>English</option>
            <option value='de/function.mcrypt-module-open.php'>German</option>
            <option value='es/function.mcrypt-module-open.php'>Spanish</option>
            <option value='fr/function.mcrypt-module-open.php'>French</option>
            <option value='it/function.mcrypt-module-open.php'>Italian</option>
            <option value='ja/function.mcrypt-module-open.php'>Japanese</option>
            <option value='pt_BR/function.mcrypt-module-open.php'>Brazilian Portuguese</option>
            <option value='ru/function.mcrypt-module-open.php' selected="selected">Russian</option>
            <option value='tr/function.mcrypt-module-open.php'>Turkish</option>
            <option value='zh/function.mcrypt-module-open.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/mcrypt/functions/mcrypt-module-open.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.mcrypt-module-open%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.mcrypt-module-open" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mcrypt_module_open</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.2, PHP 5, PHP 7 &lt; 7.2.0, PECL mcrypt &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">mcrypt_module_open</span> &mdash; <span class="dc-title">Открывает модуль шифрования с использованием указанных алгоритма и режима</span></p>

 </div>
 <div id="function.mcrypt-module-open-refsynopsisdiv">
  <div class="warning"><strong class="warning">Внимание</strong><p class="simpara">Эта функция объявлена
<em>УСТАРЕВШЕЙ</em> начиная с PHP 7.1.0 и была
<em>УДАЛЕНА</em> в версии PHP 7.2.0. Использовать эту
функцию крайне не рекомендуется.</p></div>
 </div>
 <div class="refsect1 description" id="refsect1-function.mcrypt-module-open-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>mcrypt_module_open</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$algorithm</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$algorithm_directory</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$mode</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$mode_directory</code></span><br>): <span class="type">resource</span></div>

  <p class="para rdfs-comment">
   Открывает модуль шифрования с использованием указанных алгоритма и режима.
   Имя алгоритма задаётся его именем, например <code class="literal">&quot;twofish&quot;</code>, или
   с помощью константы <strong><code>MCRYPT_ciphername</code></strong>.  Закрыть модуль
   можно с помощью функции <span class="function"><a href="function.mcrypt-module-close.php.html" class="function">mcrypt_module_close()</a></span>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mcrypt-module-open-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">algorithm</code></dt>

     <dd>

      <p class="para">Одна из констант <strong><code>MCRYPT_ciphername</code></strong> или название алгоритма в виде строки.</p>
     </dd>

    
    
     <dt>
<code class="parameter">algorithm_directory</code></dt>

     <dd>

      <p class="para">
       Параметр <code class="parameter">algorithm_directory</code> используется для
       задания местонахождения модуля шифрования. Если передать пустую строку, то
       (<code class="literal">&quot;&quot;</code>), то будет использовано значение директивы
       <code class="literal">mcrypt.algorithms_dir</code> из <var class="filename">php.ini</var>. Если же оно тоже не
       задано, то будет использована стандартная директория с которой
       компилировался libmcrypt (обычно <var class="filename">/usr/local/lib/libmcrypt</var>).
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">mode</code></dt>

     <dd>

      <p class="para">Одна из констант <strong><code>MCRYPT_MODE_modename</code></strong>, либо одна из следующих строк: &quot;ecb&quot;, &quot;cbc&quot;, &quot;cfb&quot;, &quot;ofb&quot;, &quot;nofb&quot; и &quot;stream&quot;.</p>
     </dd>

    
    
     <dt>
<code class="parameter">mode_directory</code></dt>

     <dd>

      <p class="para">
       Параметр <code class="parameter">mode_directory</code> используется для
       задания местонахождения модуля режима. Если передать пустую строку, то
       (<code class="literal">&quot;&quot;</code>), то будет использовано значение директивы
       <code class="literal">mcrypt.modes_dir</code> из <var class="filename">php.ini</var>. Если же оно тоже не
       задано, то будет использована стандартная директория, с которой
       компилировался libmcrypt (обычно <var class="filename">/usr/local/lib/libmcrypt</var>).
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.mcrypt-module-open-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Обычно возвращается дескриптор шифрования или <strong><code>false</code></strong> в случае возникновения ошибки.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.mcrypt-module-open-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="example-2767">
    <p><strong>Пример #1 Пример использования <span class="function"><strong>mcrypt_module_open()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />    $td </span><span style="color: #007700">= </span><span style="color: #0000BB">mcrypt_module_open</span><span style="color: #007700">(</span><span style="color: #0000BB">MCRYPT_DES</span><span style="color: #007700">, </span><span style="color: #DD0000">''</span><span style="color: #007700">,<br />        </span><span style="color: #0000BB">MCRYPT_MODE_ECB</span><span style="color: #007700">, </span><span style="color: #DD0000">'/usr/lib/mcrypt-modes'</span><span style="color: #007700">);<br /><br />    </span><span style="color: #0000BB">$td </span><span style="color: #007700">= </span><span style="color: #0000BB">mcrypt_module_open</span><span style="color: #007700">(</span><span style="color: #DD0000">'rijndael-256'</span><span style="color: #007700">, </span><span style="color: #DD0000">''</span><span style="color: #007700">, </span><span style="color: #DD0000">'ofb'</span><span style="color: #007700">, </span><span style="color: #DD0000">''</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
  <p class="para">
   В первой строке примера мы пробуем открыть шифр <code class="literal">DES</code> из
   директории по умолчанию и использовать режим <code class="literal">ECB</code> из директории
   <var class="filename">/usr/lib/mcrypt-modes</var>. Во втором примере используем
   строковые имена шифра и режима, что работает только с модулем, собранным
   с библиотекой libmcrypt 2.4.x or 2.5.x.
  </p>

  <p class="para">
   <div class="example" id="example-2770">
    <p><strong>Пример #2 Пример использования <span class="function"><strong>mcrypt_module_open()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />    </span><span style="color: #FF8000">/* Открываем модуль шифрования */<br />    </span><span style="color: #0000BB">$td </span><span style="color: #007700">= </span><span style="color: #0000BB">mcrypt_module_open</span><span style="color: #007700">(</span><span style="color: #DD0000">'rijndael-256'</span><span style="color: #007700">, </span><span style="color: #DD0000">''</span><span style="color: #007700">, </span><span style="color: #DD0000">'ofb'</span><span style="color: #007700">, </span><span style="color: #DD0000">''</span><span style="color: #007700">);<br /><br />    </span><span style="color: #FF8000">/* Создаём инициализирующий вектор и определяем длину ключа.<br />     * Для Windows используем MCRYPT_RAND */<br />    </span><span style="color: #0000BB">$iv </span><span style="color: #007700">= </span><span style="color: #0000BB">mcrypt_create_iv</span><span style="color: #007700">(</span><span style="color: #0000BB">mcrypt_enc_get_iv_size</span><span style="color: #007700">(</span><span style="color: #0000BB">$td</span><span style="color: #007700">), </span><span style="color: #0000BB">MCRYPT_DEV_RANDOM</span><span style="color: #007700">);<br />    </span><span style="color: #0000BB">$ks </span><span style="color: #007700">= </span><span style="color: #0000BB">mcrypt_enc_get_key_size</span><span style="color: #007700">(</span><span style="color: #0000BB">$td</span><span style="color: #007700">);<br /><br />    </span><span style="color: #FF8000">/* Создаём ключ */<br />    </span><span style="color: #0000BB">$key </span><span style="color: #007700">= </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">md5</span><span style="color: #007700">(</span><span style="color: #DD0000">'very secret key'</span><span style="color: #007700">), </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">$ks</span><span style="color: #007700">);<br /><br />    </span><span style="color: #FF8000">/* Инициализируем шифрование */<br />    </span><span style="color: #0000BB">mcrypt_generic_init</span><span style="color: #007700">(</span><span style="color: #0000BB">$td</span><span style="color: #007700">, </span><span style="color: #0000BB">$key</span><span style="color: #007700">, </span><span style="color: #0000BB">$iv</span><span style="color: #007700">);<br /><br />    </span><span style="color: #FF8000">/* Шифруем данные */<br />    </span><span style="color: #0000BB">$encrypted </span><span style="color: #007700">= </span><span style="color: #0000BB">mcrypt_generic</span><span style="color: #007700">(</span><span style="color: #0000BB">$td</span><span style="color: #007700">, </span><span style="color: #DD0000">'This is very important data'</span><span style="color: #007700">);<br /><br />    </span><span style="color: #FF8000">/* Деинициализируем обработчик шифрования */<br />    </span><span style="color: #0000BB">mcrypt_generic_deinit</span><span style="color: #007700">(</span><span style="color: #0000BB">$td</span><span style="color: #007700">);<br /><br />    </span><span style="color: #FF8000">/* Инициализируем модуль дешифровки */<br />    </span><span style="color: #0000BB">mcrypt_generic_init</span><span style="color: #007700">(</span><span style="color: #0000BB">$td</span><span style="color: #007700">, </span><span style="color: #0000BB">$key</span><span style="color: #007700">, </span><span style="color: #0000BB">$iv</span><span style="color: #007700">);<br /><br />    </span><span style="color: #FF8000">/* Дешифруем данные */<br />    </span><span style="color: #0000BB">$decrypted </span><span style="color: #007700">= </span><span style="color: #0000BB">mdecrypt_generic</span><span style="color: #007700">(</span><span style="color: #0000BB">$td</span><span style="color: #007700">, </span><span style="color: #0000BB">$encrypted</span><span style="color: #007700">);<br /><br />    </span><span style="color: #FF8000">/* Деинициализируем обработчик дешифровки и закрываем модуль */<br />    </span><span style="color: #0000BB">mcrypt_generic_deinit</span><span style="color: #007700">(</span><span style="color: #0000BB">$td</span><span style="color: #007700">);<br />    </span><span style="color: #0000BB">mcrypt_module_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$td</span><span style="color: #007700">);<br /><br />    </span><span style="color: #FF8000">/* Печатаем строку */<br />    </span><span style="color: #007700">echo </span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$decrypted</span><span style="color: #007700">) . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.mcrypt-module-open-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.mcrypt-module-close.php.html" class="function" rel="rdfs-seeAlso">mcrypt_module_close()</a> - Закрывает модуль mcrypt</span></li>
    <li class="member"><span class="function"><a href="function.mcrypt-generic.php.html" class="function" rel="rdfs-seeAlso">mcrypt_generic()</a> - Функция шифрует данные</span></li>
    <li class="member"><span class="function"><a href="function.mdecrypt-generic.php.html" class="function" rel="rdfs-seeAlso">mdecrypt_generic()</a> - Дешифровка данных</span></li>
    <li class="member"><span class="function"><a href="function.mcrypt-generic-init.php.html" class="function" rel="rdfs-seeAlso">mcrypt_generic_init()</a> - Функция инициализирует все буферы, необходимые для шифрования</span></li>
    <li class="member"><span class="function"><a href="function.mcrypt-generic-deinit.php.html" class="function" rel="rdfs-seeAlso">mcrypt_generic_deinit()</a> - Эта функция деинициализирует модуль шифрования</span></li>
   </ul>
  </p>
 </div>

</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.mcrypt-module-open&amp;redirect=https://www.php.net/manual/ru/function.mcrypt-module-open.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">7 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="34611">  <div class="votes">
    <div id="Vu34611">
    <a href="https://www.php.net/manual/vote-note.php?id=34611&amp;page=function.mcrypt-module-open&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd34611">
    <a href="https://www.php.net/manual/vote-note.php?id=34611&amp;page=function.mcrypt-module-open&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V34611" title="75% like this...">
    2
    </div>
  </div>
  <a href="function.mcrypt-module-open.php.html#34611" class="name"><strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.mcrypt-module-open.php.html#34611"> &para;</a><div class="date" title="2003-07-31 08:14"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom34611">
<div class="phpcode"><code><span class="html">Doing a trim($decrypted) will remove the null padding that may occur as a result of decryption.<br /><br />The problem is if you're encrypting something like a MSWord document which can commonly end with nulls. The result $decrypted will be smaller than the original cleartext - which will then fail to open in MSOffice.<br /><br />To get around this, make sure you store the length of the original cleartext, and when you decrypt it, do:<br /><br />$decrypted = substr(mdecrypt_generic($td, $encrypted), 0, $originalLength);</span></code></div>
  </div>
 </div>
  <div class="note" id="110495">  <div class="votes">
    <div id="Vu110495">
    <a href="https://www.php.net/manual/vote-note.php?id=110495&amp;page=function.mcrypt-module-open&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd110495">
    <a href="https://www.php.net/manual/vote-note.php?id=110495&amp;page=function.mcrypt-module-open&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V110495" title="100% like this...">
    2
    </div>
  </div>
  <a href="function.mcrypt-module-open.php.html#110495" class="name">
  <strong class="user"><em>Mark</em></strong></a><a class="genanchor" href="function.mcrypt-module-open.php.html#110495"> &para;</a><div class="date" title="2012-10-29 02:11"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom110495">
<div class="phpcode"><code><span class="html">for errors like<br />' mcrypt_module_open(): Could not open encryption module in '<br /><br />Make sure you're using the right name. The page giving the list of ciphers is NOT the right way to say each cipher (shown here <a href="http://www.php.net/manual/en/mcrypt.ciphers.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/mcrypt.ciphers.php</a>).<br /><br />In order to see what ones are supported, try phpinfo(); and look under mcrypt to find something like this<br /><br />mcrypt support =&gt; enabled<br />mcrypt_filter support =&gt; enabled<br />Version =&gt; 2.5.8<br />Api No =&gt; 20021217<br />Supported ciphers =&gt; cast-128 gost rijndael-128 twofish arcfour cast-256 loki97 rijndael-192 saferplus wake blowfish-compat des rijndael-256<br /> serpent xtea blowfish enigma rc2 tripledes <br />Supported modes =&gt; cbc cfb ctr ecb ncfb nofb ofb stream</span></code></div>
  </div>
 </div>
  <div class="note" id="79135">  <div class="votes">
    <div id="Vu79135">
    <a href="https://www.php.net/manual/vote-note.php?id=79135&amp;page=function.mcrypt-module-open&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd79135">
    <a href="https://www.php.net/manual/vote-note.php?id=79135&amp;page=function.mcrypt-module-open&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V79135" title="52% like this...">
    1
    </div>
  </div>
  <a href="function.mcrypt-module-open.php.html#79135" class="name">
  <strong class="user"><em>dinamic at gmail dot com</em></strong></a><a class="genanchor" href="function.mcrypt-module-open.php.html#79135"> &para;</a><div class="date" title="2007-11-13 03:05"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom79135">
<div class="phpcode"><code><span class="html">Also it should be pointed that md5() and/or sha1() should not be used while forming your key for the mcrypt. This is so because hex encoding uses a set of only 16 characters [0-9a-f], which is equivalent to 4 bits, and thus halve the strength of your encryption: 4 x 32 = 128-bit.<br /><br />I have re-wrote the example shown, so here is my suggestion to get real 256-bit encryption:<br /><br /><span class="default">&lt;?php<br />$key1 </span><span class="keyword">= </span><span class="string">"this is a secret key"</span><span class="keyword">;<br /></span><span class="default">$key2 </span><span class="keyword">= </span><span class="string">"this is the second secret key"</span><span class="keyword">;<br /></span><span class="default">$input </span><span class="keyword">= </span><span class="string">"Let us meet at 9 o'clock at the secret place."</span><span class="keyword">;<br /></span><span class="default">$length </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">);<br /><br />    </span><span class="comment">/* Open the cipher */<br />    </span><span class="default">$td </span><span class="keyword">= </span><span class="default">mcrypt_module_open</span><span class="keyword">(</span><span class="string">'rijndael-256'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="string">'cbc'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);<br /><br />    </span><span class="comment">/* Create the IV and determine the keysize length, use MCRYPT_RAND<br />     * on Windows instead */<br />    </span><span class="default">$iv </span><span class="keyword">= </span><span class="default">mcrypt_create_iv</span><span class="keyword">(</span><span class="default">mcrypt_enc_get_iv_size</span><span class="keyword">(</span><span class="default">$td</span><span class="keyword">), </span><span class="default">MCRYPT_RAND</span><span class="keyword">);<br />    </span><span class="default">$ks </span><span class="keyword">= </span><span class="default">mcrypt_enc_get_key_size</span><span class="keyword">(</span><span class="default">$td</span><span class="keyword">);<br /><br />    </span><span class="comment">/* Create key */<br />    </span><span class="default">$key1 </span><span class="keyword">= </span><span class="default">md5</span><span class="keyword">(</span><span class="default">$key1</span><span class="keyword">);<br />    </span><span class="default">$key2 </span><span class="keyword">= </span><span class="default">md5</span><span class="keyword">(</span><span class="default">$key2</span><span class="keyword">);<br /><br />    </span><span class="default">$key </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$key1</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$ks</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">) . </span><span class="default">substr</span><span class="keyword">(</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$key2</span><span class="keyword">), (</span><span class="default">round</span><span class="keyword">(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$key2</span><span class="keyword">) / </span><span class="default">2</span><span class="keyword">)), </span><span class="default">$ks</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">);<br /><br />    </span><span class="default">$key </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">.</span><span class="default">$key1</span><span class="keyword">.</span><span class="default">$key2</span><span class="keyword">.</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$key1</span><span class="keyword">),</span><span class="default">0</span><span class="keyword">,</span><span class="default">$ks</span><span class="keyword">);<br /><br />    </span><span class="comment">/* Intialize encryption */<br />    </span><span class="default">mcrypt_generic_init</span><span class="keyword">(</span><span class="default">$td</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$iv</span><span class="keyword">);<br /><br />    </span><span class="comment">/* Encrypt data */<br />    </span><span class="default">$encrypted </span><span class="keyword">= </span><span class="default">mcrypt_generic</span><span class="keyword">(</span><span class="default">$td</span><span class="keyword">, </span><span class="default">$input</span><span class="keyword">);<br /><br />    </span><span class="comment">/* Terminate encryption handler */<br />    </span><span class="default">mcrypt_generic_deinit</span><span class="keyword">(</span><span class="default">$td</span><span class="keyword">);<br /><br />    </span><span class="comment">/* Initialize encryption module for decryption */<br />    </span><span class="default">mcrypt_generic_init</span><span class="keyword">(</span><span class="default">$td</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$iv</span><span class="keyword">);<br /><br />    </span><span class="comment">/* Decrypt encrypted string */<br />    </span><span class="default">$decrypted </span><span class="keyword">= </span><span class="default">mdecrypt_generic</span><span class="keyword">(</span><span class="default">$td</span><span class="keyword">, </span><span class="default">$encrypted</span><span class="keyword">);<br /><br />    </span><span class="comment">/* Terminate decryption handle and close module */<br />    </span><span class="default">mcrypt_generic_deinit</span><span class="keyword">(</span><span class="default">$td</span><span class="keyword">);<br />    </span><span class="default">mcrypt_module_close</span><span class="keyword">(</span><span class="default">$td</span><span class="keyword">);<br /><br />    </span><span class="comment">/* Show string */<br />    </span><span class="keyword">echo </span><span class="string">"Text: "</span><span class="keyword">.</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$decrypted</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">) . </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />    echo </span><span class="string">"Encoded: "</span><span class="keyword">.</span><span class="default">$encrypted </span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />    echo </span><span class="string">"&lt;br&gt;key1: </span><span class="default">$key1</span><span class="string"> &lt;br&gt;key2: </span><span class="default">$key2</span><span class="string">&lt;br&gt;created key: </span><span class="default">$key</span><span class="string">"</span><span class="keyword">;<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="89937">  <div class="votes">
    <div id="Vu89937">
    <a href="https://www.php.net/manual/vote-note.php?id=89937&amp;page=function.mcrypt-module-open&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd89937">
    <a href="https://www.php.net/manual/vote-note.php?id=89937&amp;page=function.mcrypt-module-open&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V89937" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.mcrypt-module-open.php.html#89937" class="name">
  <strong class="user"><em>royconejo</em></strong></a><a class="genanchor" href="function.mcrypt-module-open.php.html#89937"> &para;</a><div class="date" title="2009-03-29 09:01"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom89937">
<div class="phpcode"><code><span class="html">about the previous comments on hex formatting and capitalization as a way to improve the key:<br /><br />this would seem pretty obvious, but it is a choice to be limited to only hex characters ([0-9a-z]); you can get the original RAW output from md5() or sha1() and not the default readable hex formatting.<br /><br />the result of a raw output will be 16 o 20 (depending on the hash function being used) series of chars in the range 0-255. way better than [0-9a-z] and even [0-9a-zA-Z].<br /><br />16 or 20 is generally lower than the maximum key lenght ($ks in the example), but you can append two or more keys together:<br /><br /><span class="default">&lt;?php<br />$human_key1 </span><span class="keyword">= </span><span class="string">'something very secret'</span><span class="keyword">;<br /></span><span class="default">$human_key2 </span><span class="keyword">= </span><span class="string">'something else very secret'</span><span class="keyword">;<br /><br /></span><span class="comment">// 40 bytes binary key using two "human readable" keys and sha1.<br /></span><span class="default">$bigger_binary_key </span><span class="keyword">= </span><span class="default">sha1</span><span class="keyword">(</span><span class="default">$human_key1</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">) . </span><span class="default">sha1</span><span class="keyword">(</span><span class="default">$human_key2</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br /><br /></span><span class="comment">// then just use it as you would (extract taken from the example)<br /></span><span class="default">$key </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$bigger_binary_key</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$ks</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />... or you can automatically split one large "human key" into two or more parts, hash those parts with sha1 (raw output!) and merge them together again (in original order or rearrange, salt, transform them as you like) to get a binary key of 40, 60, 80 or more chars depending on the number of parts the secret key has been splitted =)</span></code></div>
  </div>
 </div>
  <div class="note" id="118861">  <div class="votes">
    <div id="Vu118861">
    <a href="https://www.php.net/manual/vote-note.php?id=118861&amp;page=function.mcrypt-module-open&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd118861">
    <a href="https://www.php.net/manual/vote-note.php?id=118861&amp;page=function.mcrypt-module-open&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V118861" title="0% like this...">
    -1
    </div>
  </div>
  <a href="function.mcrypt-module-open.php.html#118861" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.mcrypt-module-open.php.html#118861"> &para;</a><div class="date" title="2016-02-18 10:34"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom118861">
<div class="phpcode"><code><span class="html">Follow up to anonymous with Windows' mcrypt_module_open() errors:<br /><br /><span class="default">&lt;?php<br />$M </span><span class="keyword">= </span><span class="default">mcrypt_list_modes</span><span class="keyword">();<br /></span><span class="default">$A </span><span class="keyword">= </span><span class="default">mcrypt_list_algorithms</span><span class="keyword">();<br />foreach (</span><span class="default">$M </span><span class="keyword">as </span><span class="default">$m</span><span class="keyword">)<br />    foreach (</span><span class="default">$A </span><span class="keyword">as </span><span class="default">$a</span><span class="keyword">) {<br />        </span><span class="default">$t </span><span class="keyword">= @</span><span class="default">mcrypt_module_open</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$m</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">);<br />        print </span><span class="string">"</span><span class="default">$m</span><span class="string">, </span><span class="default">$a</span><span class="string"> = "</span><span class="keyword">;<br />        print (</span><span class="default">$t</span><span class="keyword">)?</span><span class="string">"ok"</span><span class="keyword">:</span><span class="string">"nope"</span><span class="keyword">;<br />        print </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />    }<br /></span><span class="default">?&gt;<br /></span><br />This will show that not all modes work with all algorithmns. Cygwin also has no 'libmcrypt.dll' and it too will work with only some combinations.<br /><br />(First tries just happened to be one of the ones that did not work!)</span></code></div>
  </div>
 </div>
  <div class="note" id="92339">  <div class="votes">
    <div id="Vu92339">
    <a href="https://www.php.net/manual/vote-note.php?id=92339&amp;page=function.mcrypt-module-open&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd92339">
    <a href="https://www.php.net/manual/vote-note.php?id=92339&amp;page=function.mcrypt-module-open&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V92339" title="0% like this...">
    -1
    </div>
  </div>
  <a href="function.mcrypt-module-open.php.html#92339" class="name">
  <strong class="user"><em>lehmann*at*arcor-so.net</em></strong></a><a class="genanchor" href="function.mcrypt-module-open.php.html#92339"> &para;</a><div class="date" title="2009-07-20 08:10"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom92339">
<div class="phpcode"><code><span class="html">Keep in mind that the mcrypt functions do not implement padding like e.g. pkcs#5. This causes the problem with zero bytes at the end and the sting cannot be correctly decoded in other environments.<br /><br />For an example how to add pkcs 5 padding, see ref.mcrypt.php</span></code></div>
  </div>
 </div>
  <div class="note" id="84517">  <div class="votes">
    <div id="Vu84517">
    <a href="https://www.php.net/manual/vote-note.php?id=84517&amp;page=function.mcrypt-module-open&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd84517">
    <a href="https://www.php.net/manual/vote-note.php?id=84517&amp;page=function.mcrypt-module-open&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V84517" title="0% like this...">
    -2
    </div>
  </div>
  <a href="function.mcrypt-module-open.php.html#84517" class="name">
  <strong class="user"><em>ash</em></strong></a><a class="genanchor" href="function.mcrypt-module-open.php.html#84517"> &para;</a><div class="date" title="2008-07-17 03:07"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom84517">
<div class="phpcode"><code><span class="html">A slight improvement of dinamic's function to create a key:<br /><br />I think the weak point is that capitals are always used in the same part of the string. The following code capitalizes random characters of the string, making the key less predictable:<br /><br /><span class="default">&lt;?php<br />$key </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$key1</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$ks</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">) . </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$key2</span><span class="keyword">, (</span><span class="default">round</span><span class="keyword">(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$key2</span><span class="keyword">) / </span><span class="default">2</span><span class="keyword">)), </span><span class="default">$ks</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">);<br /></span><span class="default">$key </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">.</span><span class="default">$key1</span><span class="keyword">.</span><span class="default">$key2</span><span class="keyword">.</span><span class="default">$key1</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$ks</span><span class="keyword">);<br /><br /></span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">);<br /><br /></span><span class="default">$limit </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$buffer</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br /></span><span class="default">srand</span><span class="keyword">((float)</span><span class="default">microtime</span><span class="keyword">() * </span><span class="default">1000000</span><span class="keyword">);<br /><br /></span><span class="default">$end </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$limit</span><span class="keyword">);<br /></span><span class="default">$a </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br /><br /></span><span class="comment">// replace random chars with capitals<br /></span><span class="keyword">while (</span><span class="default">$a </span><span class="keyword">&lt; </span><span class="default">$end</span><span class="keyword">) {    <br />    list(</span><span class="default">$usec</span><span class="keyword">, </span><span class="default">$sec</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="default">microtime</span><span class="keyword">());<br />        </span><span class="default">$seed </span><span class="keyword">= ((float)</span><span class="default">$sec</span><span class="keyword">) + ((float) </span><span class="default">$usec </span><span class="keyword">* </span><span class="default">100000</span><span class="keyword">);<br />    </span><span class="default">mt_srand</span><span class="keyword">(</span><span class="default">$seed</span><span class="keyword">);<br />    <br />    </span><span class="default">$index </span><span class="keyword">= </span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$limit</span><span class="keyword">);<br />    <br />    </span><span class="default">$buffer</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] = </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$buffer</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">]);<br />    </span><span class="default">$a</span><span class="keyword">++;<br />}<br /><br /></span><span class="default">$key </span><span class="keyword">= </span><span class="default">join</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">, </span><span class="default">$buffer</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.mcrypt-module-open&amp;redirect=https://www.php.net/manual/ru/function.mcrypt-module-open.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.mcrypt.php.html">Mcrypt</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.mcrypt-create-iv.php.html" title="mcrypt_&#8203;create_&#8203;iv">mcrypt_&#8203;create_&#8203;iv</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-decrypt.php.html" title="mcrypt_&#8203;decrypt">mcrypt_&#8203;decrypt</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-enc-get-algorithms-name.php.html" title="mcrypt_&#8203;enc_&#8203;get_&#8203;algorithms_&#8203;name">mcrypt_&#8203;enc_&#8203;get_&#8203;algorithms_&#8203;name</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-enc-get-block-size.php.html" title="mcrypt_&#8203;enc_&#8203;get_&#8203;block_&#8203;size">mcrypt_&#8203;enc_&#8203;get_&#8203;block_&#8203;size</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-enc-get-iv-size.php.html" title="mcrypt_&#8203;enc_&#8203;get_&#8203;iv_&#8203;size">mcrypt_&#8203;enc_&#8203;get_&#8203;iv_&#8203;size</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-enc-get-key-size.php.html" title="mcrypt_&#8203;enc_&#8203;get_&#8203;key_&#8203;size">mcrypt_&#8203;enc_&#8203;get_&#8203;key_&#8203;size</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-enc-get-modes-name.php.html" title="mcrypt_&#8203;enc_&#8203;get_&#8203;modes_&#8203;name">mcrypt_&#8203;enc_&#8203;get_&#8203;modes_&#8203;name</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-enc-get-supported-key-sizes.php.html" title="mcrypt_&#8203;enc_&#8203;get_&#8203;supported_&#8203;key_&#8203;sizes">mcrypt_&#8203;enc_&#8203;get_&#8203;supported_&#8203;key_&#8203;sizes</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-enc-is-block-algorithm-mode.php.html" title="mcrypt_&#8203;enc_&#8203;is_&#8203;block_&#8203;algorithm_&#8203;mode">mcrypt_&#8203;enc_&#8203;is_&#8203;block_&#8203;algorithm_&#8203;mode</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-enc-is-block-algorithm.php.html" title="mcrypt_&#8203;enc_&#8203;is_&#8203;block_&#8203;algorithm">mcrypt_&#8203;enc_&#8203;is_&#8203;block_&#8203;algorithm</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-enc-is-block-mode.php.html" title="mcrypt_&#8203;enc_&#8203;is_&#8203;block_&#8203;mode">mcrypt_&#8203;enc_&#8203;is_&#8203;block_&#8203;mode</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-enc-self-test.php.html" title="mcrypt_&#8203;enc_&#8203;self_&#8203;test">mcrypt_&#8203;enc_&#8203;self_&#8203;test</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-encrypt.php.html" title="mcrypt_&#8203;encrypt">mcrypt_&#8203;encrypt</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-generic-deinit.php.html" title="mcrypt_&#8203;generic_&#8203;deinit">mcrypt_&#8203;generic_&#8203;deinit</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-generic-init.php.html" title="mcrypt_&#8203;generic_&#8203;init">mcrypt_&#8203;generic_&#8203;init</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-generic.php.html" title="mcrypt_&#8203;generic">mcrypt_&#8203;generic</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-get-block-size.php.html" title="mcrypt_&#8203;get_&#8203;block_&#8203;size">mcrypt_&#8203;get_&#8203;block_&#8203;size</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-get-cipher-name.php.html" title="mcrypt_&#8203;get_&#8203;cipher_&#8203;name">mcrypt_&#8203;get_&#8203;cipher_&#8203;name</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-get-iv-size.php.html" title="mcrypt_&#8203;get_&#8203;iv_&#8203;size">mcrypt_&#8203;get_&#8203;iv_&#8203;size</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-get-key-size.php.html" title="mcrypt_&#8203;get_&#8203;key_&#8203;size">mcrypt_&#8203;get_&#8203;key_&#8203;size</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-list-algorithms.php.html" title="mcrypt_&#8203;list_&#8203;algorithms">mcrypt_&#8203;list_&#8203;algorithms</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-list-modes.php.html" title="mcrypt_&#8203;list_&#8203;modes">mcrypt_&#8203;list_&#8203;modes</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-module-close.php.html" title="mcrypt_&#8203;module_&#8203;close">mcrypt_&#8203;module_&#8203;close</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-module-get-algo-block-size.php.html" title="mcrypt_&#8203;module_&#8203;get_&#8203;algo_&#8203;block_&#8203;size">mcrypt_&#8203;module_&#8203;get_&#8203;algo_&#8203;block_&#8203;size</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-module-get-algo-key-size.php.html" title="mcrypt_&#8203;module_&#8203;get_&#8203;algo_&#8203;key_&#8203;size">mcrypt_&#8203;module_&#8203;get_&#8203;algo_&#8203;key_&#8203;size</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-module-get-supported-key-sizes.php.html" title="mcrypt_&#8203;module_&#8203;get_&#8203;supported_&#8203;key_&#8203;sizes">mcrypt_&#8203;module_&#8203;get_&#8203;supported_&#8203;key_&#8203;sizes</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-module-is-block-algorithm-mode.php.html" title="mcrypt_&#8203;module_&#8203;is_&#8203;block_&#8203;algorithm_&#8203;mode">mcrypt_&#8203;module_&#8203;is_&#8203;block_&#8203;algorithm_&#8203;mode</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-module-is-block-algorithm.php.html" title="mcrypt_&#8203;module_&#8203;is_&#8203;block_&#8203;algorithm">mcrypt_&#8203;module_&#8203;is_&#8203;block_&#8203;algorithm</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-module-is-block-mode.php.html" title="mcrypt_&#8203;module_&#8203;is_&#8203;block_&#8203;mode">mcrypt_&#8203;module_&#8203;is_&#8203;block_&#8203;mode</a>
                        </li>
                                                <li class="current">
                            <a href="function.mcrypt-module-open.php.html" title="mcrypt_&#8203;module_&#8203;open">mcrypt_&#8203;module_&#8203;open</a>
                        </li>
                                                <li class="">
                            <a href="function.mcrypt-module-self-test.php.html" title="mcrypt_&#8203;module_&#8203;self_&#8203;test">mcrypt_&#8203;module_&#8203;self_&#8203;test</a>
                        </li>
                                                <li class="">
                            <a href="function.mdecrypt-generic.php.html" title="mdecrypt_&#8203;generic">mdecrypt_&#8203;generic</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
