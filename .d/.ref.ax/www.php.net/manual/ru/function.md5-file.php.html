<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: md5_file - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.md5-file.php.html">
 <link rel="shorturl" href="https://www.php.net/md5-file">
 <link rel="alternate" href="https://www.php.net/md5-file" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.strings.php.html">
 <link rel="prev" href="function.ltrim.php.html">
 <link rel="next" href="function.md5.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.md5-file.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.md5-file.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.md5-file.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.md5-file.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.md5-file.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.md5-file.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.md5-file.php" hreflang="pt_BR">
 <link rel="alternate" href="function.md5-file.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.md5-file.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.md5-file.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.md5.php.html">
          md5 &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.ltrim.php.html">
          &laquo; ltrim        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.basic.text.php.html'>Обработка текста</a></li>      <li><a href='book.strings.php.html'>Строки</a></li>      <li><a href='ref.strings.php.html'>Функции для работы со строками</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.md5-file.php'>English</option>
            <option value='de/function.md5-file.php'>German</option>
            <option value='es/function.md5-file.php'>Spanish</option>
            <option value='fr/function.md5-file.php'>French</option>
            <option value='it/function.md5-file.php'>Italian</option>
            <option value='ja/function.md5-file.php'>Japanese</option>
            <option value='pt_BR/function.md5-file.php'>Brazilian Portuguese</option>
            <option value='ru/function.md5-file.php' selected="selected">Russian</option>
            <option value='tr/function.md5-file.php'>Turkish</option>
            <option value='zh/function.md5-file.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/strings/functions/md5-file.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.md5-file%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.md5-file" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">md5_file</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.2.0, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">md5_file</span> &mdash; <span class="dc-title">Возвращает MD5-хеш файла</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.md5-file-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>md5_file</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$binary</code><span class="initializer"> = <strong><code>false</code></strong></span></span>): <span class="type"><span class="type">string</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   Вычисляет MD5-хеш файла, имя которого задано аргументом
   <code class="parameter">filename</code>, используя <a href="http://www.faqs.org/rfcs/rfc1321" class="link external">&raquo;&nbsp;алгоритм MD5 RSA Data Security,
   Inc.</a> и возвращает этот хеш. Хеш представляет собой 32-значное
   шестнадцатеричное число.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.md5-file-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       Имя файла
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">binary</code></dt>

     <dd>

      <p class="para">
       Если имеет значение <strong><code>true</code></strong>, то возвращается бинарная строка из 16 символов.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.md5-file-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает строку в случае успешного выполнения, иначе <strong><code>false</code></strong>.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.md5-file-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Пример #1 Пример использования <span class="function"><strong>md5_file()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$file </span><span style="color: #007700">= </span><span style="color: #DD0000">'php-5.3.0alpha2-Win32-VC9-x64.zip'</span><span style="color: #007700">;<br /><br />echo </span><span style="color: #DD0000">'MD5-хеш файла ' </span><span style="color: #007700">. </span><span style="color: #0000BB">$file </span><span style="color: #007700">. </span><span style="color: #DD0000">': ' </span><span style="color: #007700">. </span><span style="color: #0000BB">md5_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.md5-file-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.md5.php.html" class="function" rel="rdfs-seeAlso">md5()</a> - Возвращает MD5-хеш строки</span></li>
    <li class="member"><span class="function"><a href="function.sha1-file.php.html" class="function" rel="rdfs-seeAlso">sha1_file()</a> - Возвращает SHA1-хеш файла</span></li>
    <li class="member"><span class="function"><a href="function.crc32.php.html" class="function" rel="rdfs-seeAlso">crc32()</a> - Вычисляет полином CRC32 для строки</span></li>
   </ul>
  </p>
 </div>

</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.md5-file&amp;redirect=https://www.php.net/manual/ru/function.md5-file.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">5 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="94494">  <div class="votes">
    <div id="Vu94494">
    <a href="https://www.php.net/manual/vote-note.php?id=94494&amp;page=function.md5-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd94494">
    <a href="https://www.php.net/manual/vote-note.php?id=94494&amp;page=function.md5-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V94494" title="74% like this...">
    95
    </div>
  </div>
  <a href="function.md5-file.php.html#94494" class="name">
  <strong class="user"><em>Chris</em></strong></a><a class="genanchor" href="function.md5-file.php.html#94494"> &para;</a><div class="date" title="2009-11-08 07:24"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom94494">
<div class="phpcode"><code><span class="html">If you just need to find out if two files are identical, comparing file hashes can be inefficient, especially on large files.  There's no reason to read two whole files and do all the math if the second byte of each file is different.  If you don't need to store the hash value for later use, there may not be a need to calculate the hash value just to compare files.  This can be much faster:<br /><br /><span class="default">&lt;?php<br />define</span><span class="keyword">(</span><span class="string">'READ_LEN'</span><span class="keyword">, </span><span class="default">4096</span><span class="keyword">);<br /><br />if(</span><span class="default">files_identical</span><span class="keyword">(</span><span class="string">'file1.txt'</span><span class="keyword">, </span><span class="string">'file2.txt'</span><span class="keyword">))<br />    echo </span><span class="string">'files identical'</span><span class="keyword">;<br />else<br />    echo </span><span class="string">'files not identical'</span><span class="keyword">;<br /><br /></span><span class="comment">//   pass two file names<br />//   returns TRUE if files are the same, FALSE otherwise<br /></span><span class="keyword">function </span><span class="default">files_identical</span><span class="keyword">(</span><span class="default">$fn1</span><span class="keyword">, </span><span class="default">$fn2</span><span class="keyword">) {<br />    if(</span><span class="default">filetype</span><span class="keyword">(</span><span class="default">$fn1</span><span class="keyword">) !== </span><span class="default">filetype</span><span class="keyword">(</span><span class="default">$fn2</span><span class="keyword">))<br />        return </span><span class="default">FALSE</span><span class="keyword">;<br /><br />    if(</span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$fn1</span><span class="keyword">) !== </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$fn2</span><span class="keyword">))<br />        return </span><span class="default">FALSE</span><span class="keyword">;<br /><br />    if(!</span><span class="default">$fp1 </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$fn1</span><span class="keyword">, </span><span class="string">'rb'</span><span class="keyword">))<br />        return </span><span class="default">FALSE</span><span class="keyword">;<br /><br />    if(!</span><span class="default">$fp2 </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$fn2</span><span class="keyword">, </span><span class="string">'rb'</span><span class="keyword">)) {<br />        </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp1</span><span class="keyword">);<br />        return </span><span class="default">FALSE</span><span class="keyword">;<br />    }<br /><br />    </span><span class="default">$same </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">;<br />    while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp1</span><span class="keyword">) and !</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp2</span><span class="keyword">))<br />        if(</span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fp1</span><span class="keyword">, </span><span class="default">READ_LEN</span><span class="keyword">) !== </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fp2</span><span class="keyword">, </span><span class="default">READ_LEN</span><span class="keyword">)) {<br />            </span><span class="default">$same </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />            break;<br />        }<br /><br />    if(</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp1</span><span class="keyword">) !== </span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp2</span><span class="keyword">))<br />        </span><span class="default">$same </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br /><br />    </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp1</span><span class="keyword">);<br />    </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp2</span><span class="keyword">);<br /><br />    return </span><span class="default">$same</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="107508">  <div class="votes">
    <div id="Vu107508">
    <a href="https://www.php.net/manual/vote-note.php?id=107508&amp;page=function.md5-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd107508">
    <a href="https://www.php.net/manual/vote-note.php?id=107508&amp;page=function.md5-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V107508" title="54% like this...">
    5
    </div>
  </div>
  <a href="function.md5-file.php.html#107508" class="name">
  <strong class="user"><em>lukasamd at gmail dot com</em></strong></a><a class="genanchor" href="function.md5-file.php.html#107508"> &para;</a><div class="date" title="2012-02-14 10:35"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom107508">
<div class="phpcode"><code><span class="html">It's faster to use md5sum than openssl md5:<br /><br /><span class="default">&lt;?php<br />$begin </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br /><br /></span><span class="default">$file_path </span><span class="keyword">= </span><span class="string">'../backup_file1.tar.gz'</span><span class="keyword">;<br /></span><span class="default">$result </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"  "</span><span class="keyword">, </span><span class="default">exec</span><span class="keyword">(</span><span class="string">"md5sum </span><span class="default">$file_path</span><span class="string">"</span><span class="keyword">));<br />echo </span><span class="string">"Hash = "</span><span class="keyword">.</span><span class="default">$result</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br /><br /></span><span class="comment"># Here 7 other big files (20-300 MB)<br /><br /></span><span class="default">$end </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$begin</span><span class="keyword">;<br />echo </span><span class="string">"Time = </span><span class="default">$end</span><span class="string">"</span><span class="keyword">;<br /></span><span class="comment"># Time = 4.4475841522217 <br /><br />#Method with openssl<br /># Time = 12.1463856900543<br /></span><span class="default">?&gt;<br /></span><br />About 3x faster</span></code></div>
  </div>
 </div>
  <div class="note" id="81751">  <div class="votes">
    <div id="Vu81751">
    <a href="https://www.php.net/manual/vote-note.php?id=81751&amp;page=function.md5-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd81751">
    <a href="https://www.php.net/manual/vote-note.php?id=81751&amp;page=function.md5-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V81751" title="46% like this...">
    -3
    </div>
  </div>
  <a href="function.md5-file.php.html#81751" class="name">
  <strong class="user"><em>smartin</em></strong></a><a class="genanchor" href="function.md5-file.php.html#81751"> &para;</a><div class="date" title="2008-03-12 04:58"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom81751">
<div class="phpcode"><code><span class="html">In response to using exec instead for performance (Nov 13 2007 post), It looks like the performance depends on the size of the file.  See the results below using the same script from the original post.  The first hash is with md5_file and the second is with openssl md5.<br /><br />With a 1MB file:<br />Hash = df1555ec0c2d7fcad3a03770f9aa238a; time = 0.005006<br />Hash = df1555ec0c2d7fcad3a03770f9aa238a; time = 0.01498<br /><br />With a 2MB file:<br /><br />Hash = 4387904830a4245a8ab767e5937d722c; time = 0.010393<br />Hash = 4387904830a4245a8ab767e5937d722c; time = 0.016691<br /><br />With a 10MB file:<br /><br />Hash = b89f948e98f3a113dc13fdbd3bdb17ef; time = 0.241907<br />Hash = b89f948e98f3a113dc13fdbd3bdb17ef; time = 0.037597<br /><br />Performance seems to change proportionally with the file size.  Judging from the previous post's default file name (.mov) he/she was probably dealing with a large file.  These are just quick tests and far from a perfect benchmark, but you might want to test your own files before assuming that the openssl solution is faster (ie, if working with small text files vs. movies, etc)</span></code></div>
  </div>
 </div>
  <div class="note" id="75393">  <div class="votes">
    <div id="Vu75393">
    <a href="https://www.php.net/manual/vote-note.php?id=75393&amp;page=function.md5-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd75393">
    <a href="https://www.php.net/manual/vote-note.php?id=75393&amp;page=function.md5-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V75393" title="42% like this...">
    -7
    </div>
  </div>
  <a href="function.md5-file.php.html#75393" class="name">
  <strong class="user"><em>potsed [at] gmail [dot] com</em></strong></a><a class="genanchor" href="function.md5-file.php.html#75393"> &para;</a><div class="date" title="2007-05-27 04:12"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom75393">
<div class="phpcode"><code><span class="html">Heres a function to give an md5 for an entire directory..<br /><br />function MD5_DIR($dir)<br />{<br />    if (!is_dir($dir))<br />    {<br />        return false;<br />    }<br />    <br />    $filemd5s = array();<br />    $d = dir($dir);<br /><br />    while (false !== ($entry = $d-&gt;read()))<br />    {<br />        if ($entry != '.' &amp;&amp; $entry != '..')<br />        {<br />             if (is_dir($dir.'/'.$entry))<br />             {<br />                 $filemd5s[] = MD5_DIR($dir.'/'.$entry);<br />             }<br />             else<br />             {<br />                 $filemd5s[] = md5_file($dir.'/'.$entry);<br />             }<br />         }<br />    }<br />    $d-&gt;close();<br />    return md5(implode('', $filemd5s));<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="47429">  <div class="votes">
    <div id="Vu47429">
    <a href="https://www.php.net/manual/vote-note.php?id=47429&amp;page=function.md5-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd47429">
    <a href="https://www.php.net/manual/vote-note.php?id=47429&amp;page=function.md5-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V47429" title="31% like this...">
    -19
    </div>
  </div>
  <a href="function.md5-file.php.html#47429" class="name">
  <strong class="user"><em>richard at interlink dot com dot au</em></strong></a><a class="genanchor" href="function.md5-file.php.html#47429"> &para;</a><div class="date" title="2004-11-16 12:57"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom47429">
<div class="phpcode"><code><span class="html">For those of you with PHP 4 that want to output the "raw" 128 bit hash, all you need to do is send it to pack to convert the hex string into the raw output.<br /><br />ie:<br />$filename="checkthisfile.bin";<br />$rawhash=pack("H*",md5_file($filename));</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.md5-file&amp;redirect=https://www.php.net/manual/ru/function.md5-file.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.strings.php.html">Функции для работы со строками</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.addcslashes.php.html" title="addcslashes">addcslashes</a>
                        </li>
                                                <li class="">
                            <a href="function.addslashes.php.html" title="addslashes">addslashes</a>
                        </li>
                                                <li class="">
                            <a href="function.bin2hex.php.html" title="bin2hex">bin2hex</a>
                        </li>
                                                <li class="">
                            <a href="function.chop.php.html" title="chop">chop</a>
                        </li>
                                                <li class="">
                            <a href="function.chr.php.html" title="chr">chr</a>
                        </li>
                                                <li class="">
                            <a href="function.chunk-split.php.html" title="chunk_&#8203;split">chunk_&#8203;split</a>
                        </li>
                                                <li class="">
                            <a href="function.convert-uudecode.php.html" title="convert_&#8203;uudecode">convert_&#8203;uudecode</a>
                        </li>
                                                <li class="">
                            <a href="function.convert-uuencode.php.html" title="convert_&#8203;uuencode">convert_&#8203;uuencode</a>
                        </li>
                                                <li class="">
                            <a href="function.count-chars.php.html" title="count_&#8203;chars">count_&#8203;chars</a>
                        </li>
                                                <li class="">
                            <a href="function.crc32.php.html" title="crc32">crc32</a>
                        </li>
                                                <li class="">
                            <a href="function.crypt.php.html" title="crypt">crypt</a>
                        </li>
                                                <li class="">
                            <a href="function.echo.php.html" title="echo">echo</a>
                        </li>
                                                <li class="">
                            <a href="function.explode.php.html" title="explode">explode</a>
                        </li>
                                                <li class="">
                            <a href="function.fprintf.php.html" title="fprintf">fprintf</a>
                        </li>
                                                <li class="">
                            <a href="function.get-html-translation-table.php.html" title="get_&#8203;html_&#8203;translation_&#8203;table">get_&#8203;html_&#8203;translation_&#8203;table</a>
                        </li>
                                                <li class="">
                            <a href="function.hebrev.php.html" title="hebrev">hebrev</a>
                        </li>
                                                <li class="">
                            <a href="function.hex2bin.php.html" title="hex2bin">hex2bin</a>
                        </li>
                                                <li class="">
                            <a href="function.html-entity-decode.php.html" title="html_&#8203;entity_&#8203;decode">html_&#8203;entity_&#8203;decode</a>
                        </li>
                                                <li class="">
                            <a href="function.htmlentities.php.html" title="htmlentities">htmlentities</a>
                        </li>
                                                <li class="">
                            <a href="function.htmlspecialchars-decode.php.html" title="htmlspecialchars_&#8203;decode">htmlspecialchars_&#8203;decode</a>
                        </li>
                                                <li class="">
                            <a href="function.htmlspecialchars.php.html" title="htmlspecialchars">htmlspecialchars</a>
                        </li>
                                                <li class="">
                            <a href="function.implode.php.html" title="implode">implode</a>
                        </li>
                                                <li class="">
                            <a href="function.join.php.html" title="join">join</a>
                        </li>
                                                <li class="">
                            <a href="function.lcfirst.php.html" title="lcfirst">lcfirst</a>
                        </li>
                                                <li class="">
                            <a href="function.levenshtein.php.html" title="levenshtein">levenshtein</a>
                        </li>
                                                <li class="">
                            <a href="function.localeconv.php.html" title="localeconv">localeconv</a>
                        </li>
                                                <li class="">
                            <a href="function.ltrim.php.html" title="ltrim">ltrim</a>
                        </li>
                                                <li class="current">
                            <a href="function.md5-file.php.html" title="md5_&#8203;file">md5_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.md5.php.html" title="md5">md5</a>
                        </li>
                                                <li class="">
                            <a href="function.metaphone.php.html" title="metaphone">metaphone</a>
                        </li>
                                                <li class="">
                            <a href="function.money-format.php.html" title="money_&#8203;format">money_&#8203;format</a>
                        </li>
                                                <li class="">
                            <a href="function.nl-langinfo.php.html" title="nl_&#8203;langinfo">nl_&#8203;langinfo</a>
                        </li>
                                                <li class="">
                            <a href="function.nl2br.php.html" title="nl2br">nl2br</a>
                        </li>
                                                <li class="">
                            <a href="function.number-format.php.html" title="number_&#8203;format">number_&#8203;format</a>
                        </li>
                                                <li class="">
                            <a href="function.ord.php.html" title="ord">ord</a>
                        </li>
                                                <li class="">
                            <a href="function.parse-str.php.html" title="parse_&#8203;str">parse_&#8203;str</a>
                        </li>
                                                <li class="">
                            <a href="function.print.php.html" title="print">print</a>
                        </li>
                                                <li class="">
                            <a href="function.printf.php.html" title="printf">printf</a>
                        </li>
                                                <li class="">
                            <a href="function.quoted-printable-decode.php.html" title="quoted_&#8203;printable_&#8203;decode">quoted_&#8203;printable_&#8203;decode</a>
                        </li>
                                                <li class="">
                            <a href="function.quoted-printable-encode.php.html" title="quoted_&#8203;printable_&#8203;encode">quoted_&#8203;printable_&#8203;encode</a>
                        </li>
                                                <li class="">
                            <a href="function.quotemeta.php.html" title="quotemeta">quotemeta</a>
                        </li>
                                                <li class="">
                            <a href="function.rtrim.php.html" title="rtrim">rtrim</a>
                        </li>
                                                <li class="">
                            <a href="function.setlocale.php.html" title="setlocale">setlocale</a>
                        </li>
                                                <li class="">
                            <a href="function.sha1-file.php.html" title="sha1_&#8203;file">sha1_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.sha1.php.html" title="sha1">sha1</a>
                        </li>
                                                <li class="">
                            <a href="function.similar-text.php.html" title="similar_&#8203;text">similar_&#8203;text</a>
                        </li>
                                                <li class="">
                            <a href="function.soundex.php.html" title="soundex">soundex</a>
                        </li>
                                                <li class="">
                            <a href="function.sprintf.php.html" title="sprintf">sprintf</a>
                        </li>
                                                <li class="">
                            <a href="function.sscanf.php.html" title="sscanf">sscanf</a>
                        </li>
                                                <li class="">
                            <a href="function.str-contains.php.html" title="str_&#8203;contains">str_&#8203;contains</a>
                        </li>
                                                <li class="">
                            <a href="function.str-decrement.php.html" title="str_&#8203;decrement">str_&#8203;decrement</a>
                        </li>
                                                <li class="">
                            <a href="function.str-ends-with.php.html" title="str_&#8203;ends_&#8203;with">str_&#8203;ends_&#8203;with</a>
                        </li>
                                                <li class="">
                            <a href="function.str-getcsv.php.html" title="str_&#8203;getcsv">str_&#8203;getcsv</a>
                        </li>
                                                <li class="">
                            <a href="function.str-increment.php.html" title="str_&#8203;increment">str_&#8203;increment</a>
                        </li>
                                                <li class="">
                            <a href="function.str-ireplace.php.html" title="str_&#8203;ireplace">str_&#8203;ireplace</a>
                        </li>
                                                <li class="">
                            <a href="function.str-pad.php.html" title="str_&#8203;pad">str_&#8203;pad</a>
                        </li>
                                                <li class="">
                            <a href="function.str-repeat.php.html" title="str_&#8203;repeat">str_&#8203;repeat</a>
                        </li>
                                                <li class="">
                            <a href="function.str-replace.php.html" title="str_&#8203;replace">str_&#8203;replace</a>
                        </li>
                                                <li class="">
                            <a href="function.str-rot13.php.html" title="str_&#8203;rot13">str_&#8203;rot13</a>
                        </li>
                                                <li class="">
                            <a href="function.str-shuffle.php.html" title="str_&#8203;shuffle">str_&#8203;shuffle</a>
                        </li>
                                                <li class="">
                            <a href="function.str-split.php.html" title="str_&#8203;split">str_&#8203;split</a>
                        </li>
                                                <li class="">
                            <a href="function.str-starts-with.php.html" title="str_&#8203;starts_&#8203;with">str_&#8203;starts_&#8203;with</a>
                        </li>
                                                <li class="">
                            <a href="function.str-word-count.php.html" title="str_&#8203;word_&#8203;count">str_&#8203;word_&#8203;count</a>
                        </li>
                                                <li class="">
                            <a href="function.strcasecmp.php.html" title="strcasecmp">strcasecmp</a>
                        </li>
                                                <li class="">
                            <a href="function.strchr.php.html" title="strchr">strchr</a>
                        </li>
                                                <li class="">
                            <a href="function.strcmp.php.html" title="strcmp">strcmp</a>
                        </li>
                                                <li class="">
                            <a href="function.strcoll.php.html" title="strcoll">strcoll</a>
                        </li>
                                                <li class="">
                            <a href="function.strcspn.php.html" title="strcspn">strcspn</a>
                        </li>
                                                <li class="">
                            <a href="function.strip-tags.php.html" title="strip_&#8203;tags">strip_&#8203;tags</a>
                        </li>
                                                <li class="">
                            <a href="function.stripcslashes.php.html" title="stripcslashes">stripcslashes</a>
                        </li>
                                                <li class="">
                            <a href="function.stripos.php.html" title="stripos">stripos</a>
                        </li>
                                                <li class="">
                            <a href="function.stripslashes.php.html" title="stripslashes">stripslashes</a>
                        </li>
                                                <li class="">
                            <a href="function.stristr.php.html" title="stristr">stristr</a>
                        </li>
                                                <li class="">
                            <a href="function.strlen.php.html" title="strlen">strlen</a>
                        </li>
                                                <li class="">
                            <a href="function.strnatcasecmp.php.html" title="strnatcasecmp">strnatcasecmp</a>
                        </li>
                                                <li class="">
                            <a href="function.strnatcmp.php.html" title="strnatcmp">strnatcmp</a>
                        </li>
                                                <li class="">
                            <a href="function.strncasecmp.php.html" title="strncasecmp">strncasecmp</a>
                        </li>
                                                <li class="">
                            <a href="function.strncmp.php.html" title="strncmp">strncmp</a>
                        </li>
                                                <li class="">
                            <a href="function.strpbrk.php.html" title="strpbrk">strpbrk</a>
                        </li>
                                                <li class="">
                            <a href="function.strpos.php.html" title="strpos">strpos</a>
                        </li>
                                                <li class="">
                            <a href="function.strrchr.php.html" title="strrchr">strrchr</a>
                        </li>
                                                <li class="">
                            <a href="function.strrev.php.html" title="strrev">strrev</a>
                        </li>
                                                <li class="">
                            <a href="function.strripos.php.html" title="strripos">strripos</a>
                        </li>
                                                <li class="">
                            <a href="function.strrpos.php.html" title="strrpos">strrpos</a>
                        </li>
                                                <li class="">
                            <a href="function.strspn.php.html" title="strspn">strspn</a>
                        </li>
                                                <li class="">
                            <a href="function.strstr.php.html" title="strstr">strstr</a>
                        </li>
                                                <li class="">
                            <a href="function.strtok.php.html" title="strtok">strtok</a>
                        </li>
                                                <li class="">
                            <a href="function.strtolower.php.html" title="strtolower">strtolower</a>
                        </li>
                                                <li class="">
                            <a href="function.strtoupper.php.html" title="strtoupper">strtoupper</a>
                        </li>
                                                <li class="">
                            <a href="function.strtr.php.html" title="strtr">strtr</a>
                        </li>
                                                <li class="">
                            <a href="function.substr-compare.php.html" title="substr_&#8203;compare">substr_&#8203;compare</a>
                        </li>
                                                <li class="">
                            <a href="function.substr-count.php.html" title="substr_&#8203;count">substr_&#8203;count</a>
                        </li>
                                                <li class="">
                            <a href="function.substr-replace.php.html" title="substr_&#8203;replace">substr_&#8203;replace</a>
                        </li>
                                                <li class="">
                            <a href="function.substr.php.html" title="substr">substr</a>
                        </li>
                                                <li class="">
                            <a href="function.trim.php.html" title="trim">trim</a>
                        </li>
                                                <li class="">
                            <a href="function.ucfirst.php.html" title="ucfirst">ucfirst</a>
                        </li>
                                                <li class="">
                            <a href="function.ucwords.php.html" title="ucwords">ucwords</a>
                        </li>
                                                <li class="">
                            <a href="function.vfprintf.php.html" title="vfprintf">vfprintf</a>
                        </li>
                                                <li class="">
                            <a href="function.vprintf.php.html" title="vprintf">vprintf</a>
                        </li>
                                                <li class="">
                            <a href="function.vsprintf.php.html" title="vsprintf">vsprintf</a>
                        </li>
                                                <li class="">
                            <a href="function.wordwrap.php.html" title="wordwrap">wordwrap</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                        <li>
                <span class="header">Deprecated</span>
                <ul class="child-menu-list">
                                    <li class="">
                        <a href="function.convert-cyr-string.php.html" title="convert_&#8203;cyr_&#8203;string">convert_&#8203;cyr_&#8203;string</a>
                    </li>
                                    <li class="">
                        <a href="function.hebrevc.php.html" title="hebrevc">hebrevc</a>
                    </li>
                                    <li class="">
                        <a href="function.utf8-decode.php.html" title="utf8_&#8203;decode">utf8_&#8203;decode</a>
                    </li>
                                    <li class="">
                        <a href="function.utf8-encode.php.html" title="utf8_&#8203;encode">utf8_&#8203;encode</a>
                    </li>
                                </ul>
            </li>
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
