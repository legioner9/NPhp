<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: move_uploaded_file - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.move-uploaded-file.php.html">
 <link rel="shorturl" href="https://www.php.net/move-uploaded-file">
 <link rel="alternate" href="https://www.php.net/move-uploaded-file" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.filesystem.php.html">
 <link rel="prev" href="function.mkdir.php.html">
 <link rel="next" href="function.parse-ini-file.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.move-uploaded-file.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.move-uploaded-file.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.move-uploaded-file.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.move-uploaded-file.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.move-uploaded-file.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.move-uploaded-file.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.move-uploaded-file.php" hreflang="pt_BR">
 <link rel="alternate" href="function.move-uploaded-file.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.move-uploaded-file.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.move-uploaded-file.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.parse-ini-file.php.html">
          parse_ini_file &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.mkdir.php.html">
          &laquo; mkdir        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.fileprocess.file.php.html'>Модули для работы с файловой системой</a></li>      <li><a href='book.filesystem.php.html'>Файловая система</a></li>      <li><a href='ref.filesystem.php.html'>Функции файловой системы</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.move-uploaded-file.php'>English</option>
            <option value='de/function.move-uploaded-file.php'>German</option>
            <option value='es/function.move-uploaded-file.php'>Spanish</option>
            <option value='fr/function.move-uploaded-file.php'>French</option>
            <option value='it/function.move-uploaded-file.php'>Italian</option>
            <option value='ja/function.move-uploaded-file.php'>Japanese</option>
            <option value='pt_BR/function.move-uploaded-file.php'>Brazilian Portuguese</option>
            <option value='ru/function.move-uploaded-file.php' selected="selected">Russian</option>
            <option value='tr/function.move-uploaded-file.php'>Turkish</option>
            <option value='zh/function.move-uploaded-file.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/filesystem/functions/move-uploaded-file.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.move-uploaded-file%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.move-uploaded-file" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">move_uploaded_file</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.3, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">move_uploaded_file</span> &mdash; <span class="dc-title">Перемещает загруженный файл в новое место</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.move-uploaded-file-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>move_uploaded_file</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$from</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$to</code></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   Эта функция проверяет, является ли файл <code class="parameter">from</code>
   загруженным на сервер (переданным по протоколу HTTP POST). Если файл
   действительно загружен на сервер, он будет перемещён в место, указанное
   в аргументе <code class="parameter">to</code>.
  </p>
  <p class="para">
   Такая проверка особенно важна в том случае, если существует шанс того,
   что какие-либо действия, производимые над загруженным файлом, могут
   открыть его содержимое пользователю или даже другим пользователям системы.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.move-uploaded-file-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">from</code></dt>

     <dd>

      <p class="para">
       Путь к загруженному файлу.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">to</code></dt>

     <dd>

      <p class="para">
       Путь, по которому необходимо переместить файл.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.move-uploaded-file-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   В случае успешного выполнения возвращает <strong><code>true</code></strong>.
  </p>
  <p class="para">
   Если <code class="parameter">from</code> не является загруженным файлом,
   никаких действий не предпринимается и
   <span class="function"><strong>move_uploaded_file()</strong></span> возвращает <strong><code>false</code></strong>.
  </p>
  <p class="para">
   Если <code class="parameter">from</code> является загруженным файлом, но
   не может быть перемещён по каким-либо причинам, никаких действий не
   предпринимается и <span class="function"><strong>move_uploaded_file()</strong></span> возвращает <strong><code>false</code></strong>.
   Кроме того, отображается предупреждение.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.move-uploaded-file-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Пример #1 Загрузка нескольких файлов</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$uploads_dir </span><span style="color: #007700">= </span><span style="color: #DD0000">'/uploads'</span><span style="color: #007700">;<br />foreach (</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"pictures"</span><span style="color: #007700">][</span><span style="color: #DD0000">"error"</span><span style="color: #007700">] as </span><span style="color: #0000BB">$key </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">$error</span><span style="color: #007700">) {<br />    if (</span><span style="color: #0000BB">$error </span><span style="color: #007700">== </span><span style="color: #0000BB">UPLOAD_ERR_OK</span><span style="color: #007700">) {<br />        </span><span style="color: #0000BB">$tmp_name </span><span style="color: #007700">= </span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"pictures"</span><span style="color: #007700">][</span><span style="color: #DD0000">"tmp_name"</span><span style="color: #007700">][</span><span style="color: #0000BB">$key</span><span style="color: #007700">];<br />        </span><span style="color: #FF8000">// basename() может предотвратить атаку на файловую систему;<br />        // может быть целесообразным дополнительно проверить имя файла<br />        </span><span style="color: #0000BB">$name </span><span style="color: #007700">= </span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"pictures"</span><span style="color: #007700">][</span><span style="color: #DD0000">"name"</span><span style="color: #007700">][</span><span style="color: #0000BB">$key</span><span style="color: #007700">]);<br />        </span><span style="color: #0000BB">move_uploaded_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$tmp_name</span><span style="color: #007700">, </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$uploads_dir</span><span style="color: #DD0000">/</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br />    }<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.move-uploaded-file-notes">
  <h3 class="title">Примечания</h3>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Функция <span class="function"><strong>move_uploaded_file()</strong></span> принимает во внимание
    <a href="ini.core.php.html#ini.open-basedir" class="link">open_basedir</a>.
    Тем не менее, ограничения накладываются лишь на параметр
    <code class="parameter">to</code>, чтобы разрешить перемещение загруженных
    файлов, так как параметр <code class="parameter">from</code> может
    конфликтовать с этими ограничениями. <span class="function"><strong>move_uploaded_file()</strong></span> гарантирует
    безопасность этой операции, работая лишь с теми файлами, которые были
    загружены через PHP.
   </p>
  </p></blockquote>
  <div class="warning"><strong class="warning">Внимание</strong>
   <p class="para">
    Если результирующий файл уже существует, он будет перезаписан.
   </p>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.move-uploaded-file-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.is-uploaded-file.php.html" class="function" rel="rdfs-seeAlso">is_uploaded_file()</a> - Определяет, был ли файл загружен при помощи HTTP POST</span></li>
    <li class="member"><span class="function"><a href="function.rename.php.html" class="function" rel="rdfs-seeAlso">rename()</a> - Переименовывает файл или директорию</span></li>
    <li class="member">Простой пример использования этой функции можно найти в разделе &quot;<a href="features.file-upload.php.html" class="link">Загрузка файлов на сервер</a>&quot;</li>
   </ul>
  </p>
 </div>

</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.move-uploaded-file&amp;redirect=https://www.php.net/manual/ru/function.move-uploaded-file.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">19 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="111412">  <div class="votes">
    <div id="Vu111412">
    <a href="https://www.php.net/manual/vote-note.php?id=111412&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd111412">
    <a href="https://www.php.net/manual/vote-note.php?id=111412&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V111412" title="66% like this...">
    211
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#111412" class="name">
  <strong class="user"><em>Yousef Ismaeil Cliprz</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#111412"> &para;</a><div class="date" title="2013-02-17 10:59"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom111412">
<div class="phpcode"><code><span class="html">Security tips you must know before use this function :<br /><br />First : make sure that the file is not empty.<br /><br />Second : make sure the file name in English characters, numbers and (_-.) symbols, For more protection.<br /><br />You can use below function as in example<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">/**<br /> * Check $_FILES[][name]<br /> *<br /> * @param (string) $filename - Uploaded file name.<br /> * @author Yousef Ismaeil Cliprz<br /> */<br /></span><span class="keyword">function </span><span class="default">check_file_uploaded_name </span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)<br />{<br />    (bool) ((</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"`^[-0-9A-Z_\.]+$`i"</span><span class="keyword">,</span><span class="default">$filename</span><span class="keyword">)) ? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">);<br />}<br /><br /></span><span class="default">?&gt;<br /></span><br />Third : make sure that the file name not bigger than 250 characters.<br /><br />as in example :<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">/**<br /> * Check $_FILES[][name] length.<br /> *<br /> * @param (string) $filename - Uploaded file name.<br /> * @author Yousef Ismaeil Cliprz.<br /> */<br /></span><span class="keyword">function </span><span class="default">check_file_uploaded_length </span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)<br />{<br />    return (bool) ((</span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">,</span><span class="string">"UTF-8"</span><span class="keyword">) &gt; </span><span class="default">225</span><span class="keyword">) ? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">);<br />}<br /><br /></span><span class="default">?&gt;<br /></span><br />Fourth: Check File extensions and Mime Types that you want to allow in your project. You can use : pathinfo() <a href="http://php.net/pathinfo" rel="nofollow" target="_blank">http://php.net/pathinfo</a><br /><br />or you can use regular expression for check File extensions as in example<br /><br />#^(gif|jpg|jpeg|jpe|png)$#i<br /><br />or use in_array checking as<br /><br /><span class="default">&lt;?php<br /><br />$ext_type </span><span class="keyword">= array(</span><span class="string">'gif'</span><span class="keyword">,</span><span class="string">'jpg'</span><span class="keyword">,</span><span class="string">'jpe'</span><span class="keyword">,</span><span class="string">'jpeg'</span><span class="keyword">,</span><span class="string">'png'</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;<br /></span><br />You have multi choices to checking extensions and Mime types.<br /><br />Fifth: Check file size and make sure the limit of php.ini to upload files is what you want, You can start from <a href="http://www.php.net/manual/en/ini.core.php#ini.file-uploads" rel="nofollow" target="_blank">http://www.php.net/manual/en/ini.core.php#ini.file-uploads</a><br /><br />And last but not least : Check the file content if have a bad codes or something like this function <a href="http://php.net/manual/en/function.file-get-contents.php." rel="nofollow" target="_blank">http://php.net/manual/en/function.file-get-contents.php.</a><br /><br />You can use .htaccess to stop working some scripts as in example php file in your upload path.<br /><br />use :<br /><br />AddHandler cgi-script .php .pl .jsp .asp .sh .cgi<br />Options -ExecCGI  <br /><br />Do not forget this steps for your project protection.</span></code></div>
  </div>
 </div>
  <div class="note" id="105026">  <div class="votes">
    <div id="Vu105026">
    <a href="https://www.php.net/manual/vote-note.php?id=105026&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd105026">
    <a href="https://www.php.net/manual/vote-note.php?id=105026&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V105026" title="66% like this...">
    102
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#105026" class="name">
  <strong class="user"><em>matthias dot dailey at gmail dot com</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#105026"> &para;</a><div class="date" title="2011-07-22 01:26"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom105026">
<div class="phpcode"><code><span class="html">The destination directory must exist; move_uploaded_file() will not automatically create it for you.</span></code></div>
  </div>
 </div>
  <div class="note" id="128697">  <div class="votes">
    <div id="Vu128697">
    <a href="https://www.php.net/manual/vote-note.php?id=128697&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd128697">
    <a href="https://www.php.net/manual/vote-note.php?id=128697&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V128697" title="71% like this...">
    3
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#128697" class="name">
  <strong class="user"><em>chelidze dot givia at gmail dot com</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#128697"> &para;</a><div class="date" title="2023-07-06 02:54"><strong>7 months ago</strong></div>
  <div class="text" id="Hcom128697">
<div class="phpcode"><code><span class="html">When using move_uploaded_file(). If the user uploads an image with a name that already exists, move_uploaded_file() will overwrite it. It's a good practice to store images in directories that you generate upon creating ur card/user/product etc...<br /><br /><span class="default">&lt;?php<br />    </span><span class="keyword">function </span><span class="default">generateDir</span><span class="keyword">(</span><span class="default">int $n</span><span class="keyword">): </span><span class="default">string </span><span class="keyword">{<br />         </span><span class="default">$characters</span><span class="keyword">=</span><span class="string">"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"</span><span class="keyword">;<br />        </span><span class="default">$dir </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />        for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$n</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />            </span><span class="default">$index </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$characters</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">);<br />            </span><span class="default">$dir </span><span class="keyword">.= </span><span class="default">$characters</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">];<br />        }<br />        return </span><span class="default">$dir</span><span class="keyword">;<br />    }<br /><br />    </span><span class="default">$image </span><span class="keyword">= </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"image"</span><span class="keyword">];<br />    </span><span class="default">$imagePath </span><span class="keyword">= </span><span class="string">'images/'</span><span class="keyword">. </span><span class="default">generateDir</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">) .</span><span class="string">'/'</span><span class="keyword">. </span><span class="default">$image</span><span class="keyword">[</span><span class="string">"name"</span><span class="keyword">];<br /><br />    </span><span class="comment">// Make the directory first or else it will not proceed with the upload.<br />    </span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$imagePath</span><span class="keyword">);<br />    <br />    </span><span class="comment">// some error handling etc...<br /><br />    </span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">[</span><span class="string">"tmp_name"</span><span class="keyword">],  </span><span class="default">$imagePath</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="86332">  <div class="votes">
    <div id="Vu86332">
    <a href="https://www.php.net/manual/vote-note.php?id=86332&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd86332">
    <a href="https://www.php.net/manual/vote-note.php?id=86332&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V86332" title="58% like this...">
    34
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#86332" class="name">
  <strong class="user"><em>Dan Delaney</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#86332"> &para;</a><div class="date" title="2008-10-13 01:41"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom86332">
<div class="phpcode"><code><span class="html">For those using PHP on Windows and IIS, you SHOULD set the "upload_tmp_dir" value in php.ini to some directory around where your websites directory is, create that directory, and then set the same permissions on it that you have set for your websites directory. Otherwise, when you upload a file and it goes into C:\WINDOWS\Temp, then you move it to your website directory, its permissions will NOT be set correctly. This will cause you problems if you then want to manipulate that file with something like ImageMagick's convert utility.</span></code></div>
  </div>
 </div>
  <div class="note" id="64418">  <div class="votes">
    <div id="Vu64418">
    <a href="https://www.php.net/manual/vote-note.php?id=64418&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd64418">
    <a href="https://www.php.net/manual/vote-note.php?id=64418&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V64418" title="53% like this...">
    6
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#64418" class="name">
  <strong class="user"><em>Zarel</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#64418"> &para;</a><div class="date" title="2006-04-13 06:12"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom64418">
<div class="phpcode"><code><span class="html">nouncad at mayetlite dot com posted a function that uploaded a file, and would rename it if it already existed, to filename[n].ext<br /><br />It only worked for files with extensions exactly three letters long, so I fixed that (and made a few other improvements while I was at it).<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">// Usage: uploadfile($_FILE['file']['name'],'temp/',$_FILE['file']['tmp_name'])<br /></span><span class="keyword">function </span><span class="default">uploadfile</span><span class="keyword">(</span><span class="default">$origin</span><span class="keyword">, </span><span class="default">$dest</span><span class="keyword">, </span><span class="default">$tmp_name</span><span class="keyword">)<br />{<br />  </span><span class="default">$origin </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$origin</span><span class="keyword">));<br />  </span><span class="default">$fulldest </span><span class="keyword">= </span><span class="default">$dest</span><span class="keyword">.</span><span class="default">$origin</span><span class="keyword">;<br />  </span><span class="default">$filename </span><span class="keyword">= </span><span class="default">$origin</span><span class="keyword">;<br />  for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$fulldest</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br />  {<br />    </span><span class="default">$fileext </span><span class="keyword">= (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$origin</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">)===</span><span class="default">false</span><span class="keyword">?</span><span class="string">''</span><span class="keyword">:</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">substr</span><span class="keyword">(</span><span class="default">strrchr</span><span class="keyword">(</span><span class="default">$origin</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">));<br />    </span><span class="default">$filename </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$origin</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$origin</span><span class="keyword">)-</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$fileext</span><span class="keyword">)).</span><span class="string">'['</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">.</span><span class="string">']'</span><span class="keyword">.</span><span class="default">$fileext</span><span class="keyword">;<br />    </span><span class="default">$fulldest </span><span class="keyword">= </span><span class="default">$dest</span><span class="keyword">.</span><span class="default">$newfilename</span><span class="keyword">;<br />  }<br />  <br />  if (</span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$tmp_name</span><span class="keyword">, </span><span class="default">$fulldest</span><span class="keyword">))<br />    return </span><span class="default">$filename</span><span class="keyword">;<br />  return </span><span class="default">false</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="85149">  <div class="votes">
    <div id="Vu85149">
    <a href="https://www.php.net/manual/vote-note.php?id=85149&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd85149">
    <a href="https://www.php.net/manual/vote-note.php?id=85149&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V85149" title="52% like this...">
    4
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#85149" class="name">
  <strong class="user"><em>Florian S. in H. an der E. [.de]</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#85149"> &para;</a><div class="date" title="2008-08-17 02:02"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom85149">
<div class="phpcode"><code><span class="html">move_uploaded_file (on my setup) always makes files 0600 ("rw- --- ---") and owned by the user running the webserver (owner AND group).<br />Even though the directory has a sticky bit set to the group permissions!<br />I couldn't find any settings to change this via php.ini or even using "umask()".<br /><br />I want my regular user on the server to be able to "tar cjf" the directory .. which would fail on files totally owned by the webserver-process-user;<br />the "copy(from, to)" function obeys the sticky-bit though!</span></code></div>
  </div>
 </div>
  <div class="note" id="123705">  <div class="votes">
    <div id="Vu123705">
    <a href="https://www.php.net/manual/vote-note.php?id=123705&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123705">
    <a href="https://www.php.net/manual/vote-note.php?id=123705&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123705" title="51% like this...">
    1
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#123705" class="name">
  <strong class="user"><em>Juliano P. Santos</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#123705"> &para;</a><div class="date" title="2019-03-19 10:25"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom123705">
<div class="phpcode"><code><span class="html">For those which will use inotify-tools to start an event when move_uploaded_file put the file in a specific directory, be aware that move_uploaded_file will trigger the create event, and not the move event of inotify-tools.</span></code></div>
  </div>
 </div>
  <div class="note" id="69555">  <div class="votes">
    <div id="Vu69555">
    <a href="https://www.php.net/manual/vote-note.php?id=69555&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd69555">
    <a href="https://www.php.net/manual/vote-note.php?id=69555&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V69555" title="52% like this...">
    3
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#69555" class="name">
  <strong class="user"><em>shacker at birdhouse dot org</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#69555"> &para;</a><div class="date" title="2006-09-10 12:28"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom69555">
<div class="phpcode"><code><span class="html">If you're dealing with files uploaded through some external FTP source and need to move them to a final destination, searching php.net for "mv" or "move" won't get you what you want. You want the rename() function. <br /><br /><a href="http://www.php.net/manual/en/function.rename.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/function.rename.php</a><br /><br />(move_uploaded_file() won't work, since the POST vars won't be present.)</span></code></div>
  </div>
 </div>
  <div class="note" id="128556">  <div class="votes">
    <div id="Vu128556">
    <a href="https://www.php.net/manual/vote-note.php?id=128556&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd128556">
    <a href="https://www.php.net/manual/vote-note.php?id=128556&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V128556" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#128556" class="name">
  <strong class="user"><em>benbrown3882 at gmail dot com</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#128556"> &para;</a><div class="date" title="2023-05-19 04:04"><strong>8 months ago</strong></div>
  <div class="text" id="Hcom128556">
<div class="phpcode"><code><span class="html">Ensure the upload temporary directory and the destination directory have "write" permissions for Other.</span></code></div>
  </div>
 </div>
  <div class="note" id="76452">  <div class="votes">
    <div id="Vu76452">
    <a href="https://www.php.net/manual/vote-note.php?id=76452&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd76452">
    <a href="https://www.php.net/manual/vote-note.php?id=76452&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V76452" title="50% like this...">
    1
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#76452" class="name">
  <strong class="user"><em>nlgordon at iastate dot edu</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#76452"> &para;</a><div class="date" title="2007-07-16 11:29"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom76452">
<div class="phpcode"><code><span class="html">Just a helpful comment.  If you have open_basedir set then you must set upload_tmp_dir to somewhere within the open_basedir.  Otherwise the file upload will be denied.  move_uploaded_file might be open_basedir aware, but the rest of the upload process isn't.</span></code></div>
  </div>
 </div>
  <div class="note" id="57959">  <div class="votes">
    <div id="Vu57959">
    <a href="https://www.php.net/manual/vote-note.php?id=57959&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd57959">
    <a href="https://www.php.net/manual/vote-note.php?id=57959&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V57959" title="48% like this...">
    -2
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#57959" class="name">
  <strong class="user"><em>jest3r at mtonic dot net</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#57959"> &para;</a><div class="date" title="2005-10-19 09:10"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom57959">
<div class="phpcode"><code><span class="html">It seems that move_uploaded_file use the GROUP permissions of the parent directory of the tmp file location, whereas a simple "copy" uses the group of the apache process. This could create a security nighmare if your tmp file location is owned by root:wheel</span></code></div>
  </div>
 </div>
  <div class="note" id="69096">  <div class="votes">
    <div id="Vu69096">
    <a href="https://www.php.net/manual/vote-note.php?id=69096&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd69096">
    <a href="https://www.php.net/manual/vote-note.php?id=69096&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V69096" title="46% like this...">
    -5
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#69096" class="name">
  <strong class="user"><em>Rob Szarka</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#69096"> &para;</a><div class="date" title="2006-08-22 06:18"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom69096">
<div class="phpcode"><code><span class="html">Apparently the warning above might better be written "If the destination file already exists, it will be overwritten ... regardless of the destination file's permissions."<br /><br />In other words, move_uploaded_file() executes as if it's root, not the user under which the web server is operating or the owner of the script that's executing.</span></code></div>
  </div>
 </div>
  <div class="note" id="116451">  <div class="votes">
    <div id="Vu116451">
    <a href="https://www.php.net/manual/vote-note.php?id=116451&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116451">
    <a href="https://www.php.net/manual/vote-note.php?id=116451&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116451" title="43% like this...">
    -11
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#116451" class="name">
  <strong class="user"><em>Tom</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#116451"> &para;</a><div class="date" title="2015-01-05 03:33"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom116451">
<div class="phpcode"><code><span class="html">Nowhere does it say how to get the error/warning message when this fails.<br /><br />The only way I know of doing it is something like this:<br /><br />   if (move_uploaded_file($_FILES["file1"]["tmp_name"], $target_file)) {<br />      echo "&lt;P&gt;FILE UPLOADED TO: $target_file&lt;/P&gt;";<br />   } else {<br />      echo "&lt;P&gt;MOVE UPLOADED FILE FAILED!&lt;/P&gt;";<br />      print_r(error_get_last());<br />   }</span></code></div>
  </div>
 </div>
  <div class="note" id="85371">  <div class="votes">
    <div id="Vu85371">
    <a href="https://www.php.net/manual/vote-note.php?id=85371&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd85371">
    <a href="https://www.php.net/manual/vote-note.php?id=85371&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V85371" title="41% like this...">
    -5
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#85371" class="name">
  <strong class="user"><em>Mark Kazemier</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#85371"> &para;</a><div class="date" title="2008-08-27 09:36"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom85371">
<div class="phpcode"><code><span class="html">I have the same problem as the person two comments below me. When I use the move_uploaded_file function the permissions for the file are set to 0600. No matter what configurations you set.<br /><br />I searched the internet and I found more people with the same problems, but no solutions. I set the umask of apache to 013 and still the files were set to 0600. <br /><br />The copy function solves the problem. Another way to solve this problem is using the chmod function after uploading.</span></code></div>
  </div>
 </div>
  <div class="note" id="75654">  <div class="votes">
    <div id="Vu75654">
    <a href="https://www.php.net/manual/vote-note.php?id=75654&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd75654">
    <a href="https://www.php.net/manual/vote-note.php?id=75654&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V75654" title="42% like this...">
    -11
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#75654" class="name">
  <strong class="user"><em>bogusred</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#75654"> &para;</a><div class="date" title="2007-06-10 01:58"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom75654">
<div class="phpcode"><code><span class="html">If you have a directory in a *nix environment where you store all of your file uploads and your php script only seems to work when permissions for that directory are set to 777, here's how to fix it so that you can have the security benefits of 755 while still allowing your php scripts to work, including the move_uploaded_file().<br /><br />through shell access, navigate to the directory that contains your uploads folder and run the following 2 commands:<br />chown -R nobody uploaddir<br />chmod -R 755 uploaddir<br /><br />Replace 'uploaddir' with the name of your uploads directory. The first command changes the owner of the directory and files to 'nobody' which is what php operates under. The second changes the folder and files to only allow user access to writing. This is much more secure.<br /><br />Hopefully this will help someone out there who had the same problem as me.</span></code></div>
  </div>
 </div>
  <div class="note" id="99456">  <div class="votes">
    <div id="Vu99456">
    <a href="https://www.php.net/manual/vote-note.php?id=99456&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd99456">
    <a href="https://www.php.net/manual/vote-note.php?id=99456&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V99456" title="39% like this...">
    -5
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#99456" class="name">
  <strong class="user"><em>Ray.Paseur sometimes uses Gmail</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#99456"> &para;</a><div class="date" title="2010-08-18 08:42"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom99456">
<div class="phpcode"><code><span class="html">You can only move the uploaded file once.  You can use copy() if you need the file in more than one place.<br /><span class="default">&lt;?php </span><span class="comment">// RAY_temp_upload_example.php<br /></span><span class="default">error_reporting</span><span class="keyword">(</span><span class="default">E_ALL</span><span class="keyword">);<br />echo </span><span class="string">"&lt;pre&gt;" </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br /><br /></span><span class="comment">// IF A FILE HAS BEEN UPLOADED<br /></span><span class="keyword">if (!empty(</span><span class="default">$_FILES</span><span class="keyword">))<br />{<br />    </span><span class="comment">// SHOW THE UPLOADED FILES<br />    </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">);<br /><br />    </span><span class="comment">// TRY TO MOVE THE FILE TWICE - SECOND MOVE RETURNS FALSE<br />    </span><span class="keyword">if (!</span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"userfile"</span><span class="keyword">][</span><span class="string">"tmp_name"</span><span class="keyword">], </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"userfile"</span><span class="keyword">][</span><span class="string">"name"</span><span class="keyword">])) echo </span><span class="string">"CANNOT MOVE </span><span class="keyword">{</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"userfile"</span><span class="keyword">][</span><span class="string">"name"</span><span class="keyword">]}</span><span class="string">" </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br />    if (!</span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"userfile"</span><span class="keyword">][</span><span class="string">"tmp_name"</span><span class="keyword">], </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"userfile"</span><span class="keyword">][</span><span class="string">"name"</span><span class="keyword">])) echo </span><span class="string">"CANNOT MOVE </span><span class="keyword">{</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"userfile"</span><span class="keyword">][</span><span class="string">"name"</span><span class="keyword">]}</span><span class="string">" </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br /><br />    </span><span class="comment">// SHOW THE UPLOADED FILES AFTER THE MOVE - NO VISIBLE CHANGE<br />    </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">);<br />}<br /><br /></span><span class="comment">// END OF PHP, PUT UP THE HTML FORM TO GET THE FILE<br /></span><span class="default">?&gt;<br /></span>&lt;!-- The data encoding type, enctype, MUST be specified as below --&gt;<br />&lt;form enctype="multipart/form-data" method="POST"&gt;<br />    &lt;!-- MAX_FILE_SIZE must precede the file input field --&gt;<br />    &lt;input type="hidden" name="MAX_FILE_SIZE" value="300000" /&gt;<br />    &lt;!-- Name of input element determines name in $_FILES array --&gt;<br />    Send this file: &lt;input name="userfile" type="file" /&gt;<br />    &lt;input type="submit" value="Send File" /&gt;<br />&lt;/form&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="103791">  <div class="votes">
    <div id="Vu103791">
    <a href="https://www.php.net/manual/vote-note.php?id=103791&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd103791">
    <a href="https://www.php.net/manual/vote-note.php?id=103791&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V103791" title="38% like this...">
    -9
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#103791" class="name">
  <strong class="user"><em>labsy at seznam dot org</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#103791"> &para;</a><div class="date" title="2011-05-03 04:07"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom103791">
<div class="phpcode"><code><span class="html">A note for PHP on Windows IIS platform:<br />PHP does obviously not like directory traversing among partitions, so if you set upload_tmp_dir to be on different partition as php-cgi.exe or php.exe is, upload_tmp_dir will NOT be accessible for file uploads! You will get ERROR 6 on any attempt to upload file, and file size will be 0.<br />Resolution is to have upload_tmp_dir set to a path under PHP install folder.<br />...and make sure this folder (and also session_save_path folder) has at least read/write permissions granted to AppPool owner (usually NETWORK SERVICE) and IIS web user (by default IUSR_).</span></code></div>
  </div>
 </div>
  <div class="note" id="103190">  <div class="votes">
    <div id="Vu103190">
    <a href="https://www.php.net/manual/vote-note.php?id=103190&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd103190">
    <a href="https://www.php.net/manual/vote-note.php?id=103190&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V103190" title="37% like this...">
    -7
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#103190" class="name">
  <strong class="user"><em>wilcobeekhuizen at gmail dot com</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#103190"> &para;</a><div class="date" title="2011-03-30 12:55"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom103190">
<div class="phpcode"><code><span class="html">When uploading a file with a very long filename, for example 255 characters, move_uploaded_file fails. The longest file I've succesfully uploaded has a 247 character filename. So, although you can create a 250 character filename locally the server may not be able to move it.</span></code></div>
  </div>
 </div>
  <div class="note" id="94141">  <div class="votes">
    <div id="Vu94141">
    <a href="https://www.php.net/manual/vote-note.php?id=94141&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd94141">
    <a href="https://www.php.net/manual/vote-note.php?id=94141&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V94141" title="31% like this...">
    -6
    </div>
  </div>
  <a href="function.move-uploaded-file.php.html#94141" class="name">
  <strong class="user"><em>chatchaw at tot dot co dot th</em></strong></a><a class="genanchor" href="function.move-uploaded-file.php.html#94141"> &para;</a><div class="date" title="2009-10-19 12:03"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom94141">
<div class="phpcode"><code><span class="html">When you use move_uploaded_file function to upload a file with utf-8  filename to linux system, you probably check your result by browsing to see the file in the target directory so please make sure that your terminal emulator or your samba configuration is set the character encoding to utf-8 otherwise  your file will be shown as ?????? (unreadable character).</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.move-uploaded-file&amp;redirect=https://www.php.net/manual/ru/function.move-uploaded-file.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.filesystem.php.html">Функции файловой системы</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.basename.php.html" title="basename">basename</a>
                        </li>
                                                <li class="">
                            <a href="function.chgrp.php.html" title="chgrp">chgrp</a>
                        </li>
                                                <li class="">
                            <a href="function.chmod.php.html" title="chmod">chmod</a>
                        </li>
                                                <li class="">
                            <a href="function.chown.php.html" title="chown">chown</a>
                        </li>
                                                <li class="">
                            <a href="function.clearstatcache.php.html" title="clearstatcache">clearstatcache</a>
                        </li>
                                                <li class="">
                            <a href="function.copy.php.html" title="copy">copy</a>
                        </li>
                                                <li class="">
                            <a href="function.delete.php.html" title="delete">delete</a>
                        </li>
                                                <li class="">
                            <a href="function.dirname.php.html" title="dirname">dirname</a>
                        </li>
                                                <li class="">
                            <a href="function.disk-free-space.php.html" title="disk_&#8203;free_&#8203;space">disk_&#8203;free_&#8203;space</a>
                        </li>
                                                <li class="">
                            <a href="function.disk-total-space.php.html" title="disk_&#8203;total_&#8203;space">disk_&#8203;total_&#8203;space</a>
                        </li>
                                                <li class="">
                            <a href="function.diskfreespace.php.html" title="diskfreespace">diskfreespace</a>
                        </li>
                                                <li class="">
                            <a href="function.fclose.php.html" title="fclose">fclose</a>
                        </li>
                                                <li class="">
                            <a href="function.fdatasync.php.html" title="fdatasync">fdatasync</a>
                        </li>
                                                <li class="">
                            <a href="function.feof.php.html" title="feof">feof</a>
                        </li>
                                                <li class="">
                            <a href="function.fflush.php.html" title="fflush">fflush</a>
                        </li>
                                                <li class="">
                            <a href="function.fgetc.php.html" title="fgetc">fgetc</a>
                        </li>
                                                <li class="">
                            <a href="function.fgetcsv.php.html" title="fgetcsv">fgetcsv</a>
                        </li>
                                                <li class="">
                            <a href="function.fgets.php.html" title="fgets">fgets</a>
                        </li>
                                                <li class="">
                            <a href="function.fgetss.php.html" title="fgetss">fgetss</a>
                        </li>
                                                <li class="">
                            <a href="function.file-exists.php.html" title="file_&#8203;exists">file_&#8203;exists</a>
                        </li>
                                                <li class="">
                            <a href="function.file-get-contents.php.html" title="file_&#8203;get_&#8203;contents">file_&#8203;get_&#8203;contents</a>
                        </li>
                                                <li class="">
                            <a href="function.file-put-contents.php.html" title="file_&#8203;put_&#8203;contents">file_&#8203;put_&#8203;contents</a>
                        </li>
                                                <li class="">
                            <a href="function.file.php.html" title="file">file</a>
                        </li>
                                                <li class="">
                            <a href="function.fileatime.php.html" title="fileatime">fileatime</a>
                        </li>
                                                <li class="">
                            <a href="function.filectime.php.html" title="filectime">filectime</a>
                        </li>
                                                <li class="">
                            <a href="function.filegroup.php.html" title="filegroup">filegroup</a>
                        </li>
                                                <li class="">
                            <a href="function.fileinode.php.html" title="fileinode">fileinode</a>
                        </li>
                                                <li class="">
                            <a href="function.filemtime.php.html" title="filemtime">filemtime</a>
                        </li>
                                                <li class="">
                            <a href="function.fileowner.php.html" title="fileowner">fileowner</a>
                        </li>
                                                <li class="">
                            <a href="function.fileperms.php.html" title="fileperms">fileperms</a>
                        </li>
                                                <li class="">
                            <a href="function.filesize.php.html" title="filesize">filesize</a>
                        </li>
                                                <li class="">
                            <a href="function.filetype.php.html" title="filetype">filetype</a>
                        </li>
                                                <li class="">
                            <a href="function.flock.php.html" title="flock">flock</a>
                        </li>
                                                <li class="">
                            <a href="function.fnmatch.php.html" title="fnmatch">fnmatch</a>
                        </li>
                                                <li class="">
                            <a href="function.fopen.php.html" title="fopen">fopen</a>
                        </li>
                                                <li class="">
                            <a href="function.fpassthru.php.html" title="fpassthru">fpassthru</a>
                        </li>
                                                <li class="">
                            <a href="function.fputcsv.php.html" title="fputcsv">fputcsv</a>
                        </li>
                                                <li class="">
                            <a href="function.fputs.php.html" title="fputs">fputs</a>
                        </li>
                                                <li class="">
                            <a href="function.fread.php.html" title="fread">fread</a>
                        </li>
                                                <li class="">
                            <a href="function.fscanf.php.html" title="fscanf">fscanf</a>
                        </li>
                                                <li class="">
                            <a href="function.fseek.php.html" title="fseek">fseek</a>
                        </li>
                                                <li class="">
                            <a href="function.fstat.php.html" title="fstat">fstat</a>
                        </li>
                                                <li class="">
                            <a href="function.fsync.php.html" title="fsync">fsync</a>
                        </li>
                                                <li class="">
                            <a href="function.ftell.php.html" title="ftell">ftell</a>
                        </li>
                                                <li class="">
                            <a href="function.ftruncate.php.html" title="ftruncate">ftruncate</a>
                        </li>
                                                <li class="">
                            <a href="function.fwrite.php.html" title="fwrite">fwrite</a>
                        </li>
                                                <li class="">
                            <a href="function.glob.php.html" title="glob">glob</a>
                        </li>
                                                <li class="">
                            <a href="function.is-dir.php.html" title="is_&#8203;dir">is_&#8203;dir</a>
                        </li>
                                                <li class="">
                            <a href="function.is-executable.php.html" title="is_&#8203;executable">is_&#8203;executable</a>
                        </li>
                                                <li class="">
                            <a href="function.is-file.php.html" title="is_&#8203;file">is_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.is-link.php.html" title="is_&#8203;link">is_&#8203;link</a>
                        </li>
                                                <li class="">
                            <a href="function.is-readable.php.html" title="is_&#8203;readable">is_&#8203;readable</a>
                        </li>
                                                <li class="">
                            <a href="function.is-uploaded-file.php.html" title="is_&#8203;uploaded_&#8203;file">is_&#8203;uploaded_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.is-writable.php.html" title="is_&#8203;writable">is_&#8203;writable</a>
                        </li>
                                                <li class="">
                            <a href="function.is-writeable.php.html" title="is_&#8203;writeable">is_&#8203;writeable</a>
                        </li>
                                                <li class="">
                            <a href="function.lchgrp.php.html" title="lchgrp">lchgrp</a>
                        </li>
                                                <li class="">
                            <a href="function.lchown.php.html" title="lchown">lchown</a>
                        </li>
                                                <li class="">
                            <a href="function.link.php.html" title="link">link</a>
                        </li>
                                                <li class="">
                            <a href="function.linkinfo.php.html" title="linkinfo">linkinfo</a>
                        </li>
                                                <li class="">
                            <a href="function.lstat.php.html" title="lstat">lstat</a>
                        </li>
                                                <li class="">
                            <a href="function.mkdir.php.html" title="mkdir">mkdir</a>
                        </li>
                                                <li class="current">
                            <a href="function.move-uploaded-file.php.html" title="move_&#8203;uploaded_&#8203;file">move_&#8203;uploaded_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.parse-ini-file.php.html" title="parse_&#8203;ini_&#8203;file">parse_&#8203;ini_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.parse-ini-string.php.html" title="parse_&#8203;ini_&#8203;string">parse_&#8203;ini_&#8203;string</a>
                        </li>
                                                <li class="">
                            <a href="function.pathinfo.php.html" title="pathinfo">pathinfo</a>
                        </li>
                                                <li class="">
                            <a href="function.pclose.php.html" title="pclose">pclose</a>
                        </li>
                                                <li class="">
                            <a href="function.popen.php.html" title="popen">popen</a>
                        </li>
                                                <li class="">
                            <a href="function.readfile.php.html" title="readfile">readfile</a>
                        </li>
                                                <li class="">
                            <a href="function.readlink.php.html" title="readlink">readlink</a>
                        </li>
                                                <li class="">
                            <a href="function.realpath-cache-get.php.html" title="realpath_&#8203;cache_&#8203;get">realpath_&#8203;cache_&#8203;get</a>
                        </li>
                                                <li class="">
                            <a href="function.realpath-cache-size.php.html" title="realpath_&#8203;cache_&#8203;size">realpath_&#8203;cache_&#8203;size</a>
                        </li>
                                                <li class="">
                            <a href="function.realpath.php.html" title="realpath">realpath</a>
                        </li>
                                                <li class="">
                            <a href="function.rename.php.html" title="rename">rename</a>
                        </li>
                                                <li class="">
                            <a href="function.rewind.php.html" title="rewind">rewind</a>
                        </li>
                                                <li class="">
                            <a href="function.rmdir.php.html" title="rmdir">rmdir</a>
                        </li>
                                                <li class="">
                            <a href="function.set-file-buffer.php.html" title="set_&#8203;file_&#8203;buffer">set_&#8203;file_&#8203;buffer</a>
                        </li>
                                                <li class="">
                            <a href="function.stat.php.html" title="stat">stat</a>
                        </li>
                                                <li class="">
                            <a href="function.symlink.php.html" title="symlink">symlink</a>
                        </li>
                                                <li class="">
                            <a href="function.tempnam.php.html" title="tempnam">tempnam</a>
                        </li>
                                                <li class="">
                            <a href="function.tmpfile.php.html" title="tmpfile">tmpfile</a>
                        </li>
                                                <li class="">
                            <a href="function.touch.php.html" title="touch">touch</a>
                        </li>
                                                <li class="">
                            <a href="function.umask.php.html" title="umask">umask</a>
                        </li>
                                                <li class="">
                            <a href="function.unlink.php.html" title="unlink">unlink</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
