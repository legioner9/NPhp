<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: mysql_close - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.mysql-close.php.html">
 <link rel="shorturl" href="https://www.php.net/mysql-close">
 <link rel="alternate" href="https://www.php.net/mysql-close" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.mysql.php.html">
 <link rel="prev" href="function.mysql-client-encoding.php.html">
 <link rel="next" href="function.mysql-connect.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.mysql-close.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.mysql-close.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.mysql-close.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.mysql-close.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.mysql-close.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.mysql-close.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.mysql-close.php" hreflang="pt_BR">
 <link rel="alternate" href="function.mysql-close.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.mysql-close.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.mysql-close.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.mysql-connect.php.html">
          mysql_connect &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.mysql-client-encoding.php.html">
          &laquo; mysql_client_encoding        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.database.php.html'>Модули для работы с базами данных</a></li>      <li><a href='refs.database.vendors.php.html'>Модули для работы с базами данных отдельных производителей</a></li>      <li><a href='set.mysqlinfo.php.html'>MySQL</a></li>      <li><a href='book.mysql.php.html'>MySQL (Original)</a></li>      <li><a href='ref.mysql.php.html'>MySQL</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.mysql-close.php'>English</option>
            <option value='de/function.mysql-close.php'>German</option>
            <option value='es/function.mysql-close.php'>Spanish</option>
            <option value='fr/function.mysql-close.php'>French</option>
            <option value='it/function.mysql-close.php'>Italian</option>
            <option value='ja/function.mysql-close.php'>Japanese</option>
            <option value='pt_BR/function.mysql-close.php'>Brazilian Portuguese</option>
            <option value='ru/function.mysql-close.php' selected="selected">Russian</option>
            <option value='tr/function.mysql-close.php'>Turkish</option>
            <option value='zh/function.mysql-close.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/mysql/functions/mysql-close.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.mysql-close%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.mysql-close" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mysql_close</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">mysql_close</span> &mdash; <span class="dc-title">Закрывает соединение с сервером MySQL</span></p>

 </div>

 <div id="function.mysql-close-refsynopsisdiv">
  <div class="warning"><strong class="warning">Внимание</strong>
   <p class="para">Данный модуль устарел начиная с версии PHP 5.5.0, и удалён в PHP 7.0.0.
Используйте вместо него <a href="book.mysqli.php.html" class="link">MySQLi</a> или <a href="ref.pdo-mysql.php.html" class="link">PDO_MySQL</a>.
Смотрите также инструкцию <a href="mysqlinfo.api.choosing.php.html" class="link">MySQL: выбор API</a>.
Альтернативы для этой функции:</p>
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="mysqli.close.php.html" class="function">mysqli_close()</a></span></li>
    <li class="member">PDO: Присвоить значение <strong><code>null</code></strong> объекту PDO</li>
   </ul>
  </div>
 </div>

 <div class="refsect1 description" id="refsect1-function.mysql-close-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>mysql_close</strong></span>(<span class="methodparam"><span class="type">resource</span> <code class="parameter">$link_identifier</code><span class="initializer"> = NULL</span></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>mysql_close()</strong></span> закрывает непостоянное соединение с
   базой данных MySQL, на которое указывает переданный дескриптор.
   Если параметр <code class="parameter">link_identifier</code> не указан,
   закрывается последнее открытое (текущее) соединение.
  </p>
  <p class="para">
Открытые непостоянные соединения MySQL и результирующие наборы автоматически удаляются сразу по окончании работы PHP-скрипта. Следовательно, закрывать соединения и очищать результирующие наборы не обязательно, но рекомендуется, так как это сразу же освободит ресурсы базы данных и память, занимаемую результатами выборки, что может положительно сказаться на производительности. Больше информации можно почерпнуть в разделе
<a href="language.types.resource.php.html#language.types.resource.self-destruct" class="link">Освобождение ресурсов</a></p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mysql-close-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    <dt>

<code class="parameter">link_identifier</code></dt>
<dd>
<p class="para">Соединение MySQL. Если
не указано, то будет использовано последнее соединение, открытое
<span class="function"><a href="function.mysql-connect.php.html" class="function">mysql_connect()</a></span>. Если соединение не найдено или
не установлено, то будет сгенерирована ошибка уровня
<strong><code>E_WARNING</code></strong>.</p></dd>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.mysql-close-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает <strong><code>true</code></strong> в случае успешного выполнения или <strong><code>false</code></strong> в случае возникновения ошибки.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.mysql-close-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="example-5260">
    <p><strong>Пример #1 Пример использования <span class="function"><strong>mysql_close()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$link </span><span style="color: #007700">= </span><span style="color: #0000BB">mysql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">, </span><span style="color: #DD0000">'mysql_user'</span><span style="color: #007700">, </span><span style="color: #DD0000">'mysql_password'</span><span style="color: #007700">);<br />if (!</span><span style="color: #0000BB">$link</span><span style="color: #007700">) {<br />    die(</span><span style="color: #DD0000">'Ошибка соединения: ' </span><span style="color: #007700">. </span><span style="color: #0000BB">mysql_error</span><span style="color: #007700">());<br />}<br />echo </span><span style="color: #DD0000">'Успешно соединились'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">mysql_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
Успешно соединились
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.mysql-close-notes">
  <h3 class="title">Примечания</h3>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    <span class="function"><strong>mysql_close()</strong></span> не закрывает постоянные
    соединения, созданные функцией <span class="function"><a href="function.mysql-pconnect.php.html" class="function">mysql_pconnect()</a></span>.
    Для дополнительной информации смотрите руководство по <a href="features.persistent-connections.php.html" class="link">постоянным соединениям</a>.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.mysql-close-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.mysql-connect.php.html" class="function" rel="rdfs-seeAlso">mysql_connect()</a> - Открывает соединение с сервером MySQL</span></li>
    <li class="member"><span class="function"><a href="function.mysql-free-result.php.html" class="function" rel="rdfs-seeAlso">mysql_free_result()</a> - Освобождает память от результата запроса</span></li>
   </ul>
  </p>
 </div>

</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.mysql-close&amp;redirect=https://www.php.net/manual/ru/function.mysql-close.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">6 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="59685">  <div class="votes">
    <div id="Vu59685">
    <a href="https://www.php.net/manual/vote-note.php?id=59685&amp;page=function.mysql-close&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd59685">
    <a href="https://www.php.net/manual/vote-note.php?id=59685&amp;page=function.mysql-close&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V59685" title="57% like this...">
    7
    </div>
  </div>
  <a href="function.mysql-close.php.html#59685" class="name">
  <strong class="user"><em>bbodelcampo at yahoo dot co dot uk</em></strong></a><a class="genanchor" href="function.mysql-close.php.html#59685"> &para;</a><div class="date" title="2005-12-13 05:20"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom59685">
<div class="phpcode"><code><span class="html">A little note about multiple simultaneous connections to different hosts...<br /><br />I work on a site that pulls content primarily from one db but uses a db on a foreign server to verify licensing.  One might expect the following to work:<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">// Open the connection to the primary db<br /></span><span class="default">$res1 </span><span class="keyword">= </span><span class="default">mysql_connect</span><span class="keyword">(</span><span class="default">$host1</span><span class="keyword">, </span><span class="default">$user1</span><span class="keyword">, </span><span class="default">$pass1</span><span class="keyword">);<br /></span><span class="default">mysql_select_db</span><span class="keyword">(</span><span class="default">$db1</span><span class="keyword">);<br /><br /></span><span class="comment">// Open connection to the license server<br /></span><span class="default">$res2 </span><span class="keyword">= </span><span class="default">mysql_connect</span><span class="keyword">(</span><span class="default">$host2</span><span class="keyword">, </span><span class="default">$user2</span><span class="keyword">, </span><span class="default">$pass2</span><span class="keyword">);<br /></span><span class="default">mysql_select_db</span><span class="keyword">(</span><span class="default">$db2</span><span class="keyword">, </span><span class="default">$res2</span><span class="keyword">);<br /><br /></span><span class="comment">// Pull license data and close when done<br /></span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$check_sql</span><span class="keyword">, </span><span class="default">$res2</span><span class="keyword">);<br /></span><span class="comment">// ...<br /></span><span class="default">mysql_close</span><span class="keyword">(</span><span class="default">$res2</span><span class="keyword">);<br /><br /></span><span class="comment">// Now pull content from the primary db<br />// Not specifying the resource should default to the last open db<br /></span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">); <br /></span><span class="comment">// ...<br /></span><span class="default">?&gt;<br /></span><br />Turns out this last query, since it cant find an active connection, will try to connect with mysql_connect() with no paramaters.  But if instead you do it as mysql_query($query, $res1), or alternatively, run the mysql_connect for this host again then it works fine.  Thus, it doesnt seem to be possible to have code with an overarching "global" db connection interspersed with temporary connections to another host/db....</span></code></div>
  </div>
 </div>
  <div class="note" id="47865">  <div class="votes">
    <div id="Vu47865">
    <a href="https://www.php.net/manual/vote-note.php?id=47865&amp;page=function.mysql-close&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd47865">
    <a href="https://www.php.net/manual/vote-note.php?id=47865&amp;page=function.mysql-close&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V47865" title="45% like this...">
    -3
    </div>
  </div>
  <a href="function.mysql-close.php.html#47865" class="name">
  <strong class="user"><em>beer_nomaed _AT_ hotmail _DOT_ com</em></strong></a><a class="genanchor" href="function.mysql-close.php.html#47865"> &para;</a><div class="date" title="2004-12-03 01:26"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom47865">
<div class="phpcode"><code><span class="html">Be careful when using multiple links to connect to same database (with same username). Unless you specify explicitly in mysql_connect() to create a new link, it will return an already open link. If that would be closed by mysql_close(), it will also (obviously) close the other connection, since the link is the same.<br />Had lot of trouble figuring it out, since in &lt;=4.3.6 there was a bug which didn't close the connection, but after the patch to &gt;=4.3.7, all my application broke down because of a single script that did this.</span></code></div>
  </div>
 </div>
  <div class="note" id="98827">  <div class="votes">
    <div id="Vu98827">
    <a href="https://www.php.net/manual/vote-note.php?id=98827&amp;page=function.mysql-close&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd98827">
    <a href="https://www.php.net/manual/vote-note.php?id=98827&amp;page=function.mysql-close&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V98827" title="39% like this...">
    -5
    </div>
  </div>
  <a href="function.mysql-close.php.html#98827" class="name">
  <strong class="user"><em>mdes[SPAM]saintes at gmail dot com</em></strong></a><a class="genanchor" href="function.mysql-close.php.html#98827"> &para;</a><div class="date" title="2010-07-09 09:12"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom98827">
<div class="phpcode"><code><span class="html">i just came over a problem that i had with apache.<br /><br />It crashs and said :<br /><br />"Parent: child process exited with status 3221225477 -- Restarting."<br /><br />the error came from the extesion php_mysql.dll<br /><br />i didn't understand what was the reason of that crash..<br /><br />Then, i debug the script that i had downloaded and i noticed that that was the function mysql_close() which caused the problem.<br /><br />The solution is, to send to it the link identifier which is optionnal in the description but cause a crash with no commentary.<br /><br />Thanks to agneady.</span></code></div>
  </div>
 </div>
  <div class="note" id="97520">  <div class="votes">
    <div id="Vu97520">
    <a href="https://www.php.net/manual/vote-note.php?id=97520&amp;page=function.mysql-close&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd97520">
    <a href="https://www.php.net/manual/vote-note.php?id=97520&amp;page=function.mysql-close&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V97520" title="37% like this...">
    -7
    </div>
  </div>
  <a href="function.mysql-close.php.html#97520" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.mysql-close.php.html#97520"> &para;</a><div class="date" title="2010-04-23 02:26"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom97520">
<div class="phpcode"><code><span class="html">At least with PHP5.3.2 and Windows connecting by tcp, you should always use this mysql_close() function to close and free up the tcp socket being used by PHP.  Garbage collection after script execution does not close the tcp socket on its own.  The socket would otherwise remain in 'wait' state for approximately 30 seconds, and any additional page loads/connection attempts would only add to the total number of open tcp connections.  This wait time does not appear to be configurable via PHP settings.</span></code></div>
  </div>
 </div>
  <div class="note" id="102544">  <div class="votes">
    <div id="Vu102544">
    <a href="https://www.php.net/manual/vote-note.php?id=102544&amp;page=function.mysql-close&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd102544">
    <a href="https://www.php.net/manual/vote-note.php?id=102544&amp;page=function.mysql-close&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V102544" title="39% like this...">
    -9
    </div>
  </div>
  <a href="function.mysql-close.php.html#102544" class="name">
  <strong class="user"><em>omega99999 at gmail dot com</em></strong></a><a class="genanchor" href="function.mysql-close.php.html#102544"> &para;</a><div class="date" title="2011-02-20 01:44"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom102544">
<div class="phpcode"><code><span class="html">The variable is definitely not optional in 5.3... Caused me a bit of a headache when I was debugging until I realized it was the close function that was causing a hang. So if using just:<br /><br /><span class="default">&lt;?php<br />mysql_connect</span><span class="keyword">(&lt;...&gt;);<br /><br /></span><span class="default">mysql_close</span><span class="keyword">();<br /></span><span class="default">?&gt;<br /></span><br />Use:<br /><br /><span class="default">&lt;?php<br />$connection </span><span class="keyword">= </span><span class="default">mysql_connect</span><span class="keyword">(&lt;...&gt;);<br /><br /></span><span class="default">mysql_close</span><span class="keyword">(</span><span class="default">$connection</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />(where $connection is any variable of your choice)</span></code></div>
  </div>
 </div>
  <div class="note" id="52383">  <div class="votes">
    <div id="Vu52383">
    <a href="https://www.php.net/manual/vote-note.php?id=52383&amp;page=function.mysql-close&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd52383">
    <a href="https://www.php.net/manual/vote-note.php?id=52383&amp;page=function.mysql-close&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V52383" title="37% like this...">
    -8
    </div>
  </div>
  <a href="function.mysql-close.php.html#52383" class="name">
  <strong class="user"><em>levi at alliancesoftware dot com dot au</em></strong></a><a class="genanchor" href="function.mysql-close.php.html#52383"> &para;</a><div class="date" title="2005-04-29 12:03"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom52383">
<div class="phpcode"><code><span class="html">As at 5.0.x and 4.3.x: This function should never be used with shared links; instead you should set your link variables to null.<br />(This explains red's and beer's () problems in previous comments)<br /><br />  Here is how shared links work:<br />  - Each link is a resource. mysql_connect() by default looks for a resource with the same paramaters. If one exists, it will return the existing resource. <br />  - Every assignment of that resource to a variable increases the resource's reference count.<br />  - When the reference is decremented to zero, the underlying TCP/socket connection is closed.<br />    - Every assignment of a variable away from that resource decrements the reference count. (This includes a function level variable going out of scope)<br />    - mysql_close() also decrements the reference count.<br /><br />Note the last two points: mysql_close() _and_ reassignment of a variable decrement the link's reference count.<br /><br />A common mistake is a function like:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">dothings</span><span class="keyword">() {<br />  </span><span class="default">$link </span><span class="keyword">= </span><span class="default">mysql_open</span><span class="keyword">(...);<br />  </span><span class="comment">// .. do some queries ..<br />  </span><span class="default">mysql_close</span><span class="keyword">(</span><span class="default">$link</span><span class="keyword">)<br />  </span><span class="default">$link </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span><br />this will decrement the counter twice, possibly closing the underlying connection and causing errors in other parts of the program.<br /><br /><a href="http://bugs.php.net/bug.php?id=30525" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=30525</a> "this is not a bug but just how it works"</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.mysql-close&amp;redirect=https://www.php.net/manual/ru/function.mysql-close.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.mysql.php.html">MySQL</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.mysql-affected-rows.php.html" title="mysql_&#8203;affected_&#8203;rows">mysql_&#8203;affected_&#8203;rows</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-client-encoding.php.html" title="mysql_&#8203;client_&#8203;encoding">mysql_&#8203;client_&#8203;encoding</a>
                        </li>
                                                <li class="current">
                            <a href="function.mysql-close.php.html" title="mysql_&#8203;close">mysql_&#8203;close</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-connect.php.html" title="mysql_&#8203;connect">mysql_&#8203;connect</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-create-db.php.html" title="mysql_&#8203;create_&#8203;db">mysql_&#8203;create_&#8203;db</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-data-seek.php.html" title="mysql_&#8203;data_&#8203;seek">mysql_&#8203;data_&#8203;seek</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-db-name.php.html" title="mysql_&#8203;db_&#8203;name">mysql_&#8203;db_&#8203;name</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-db-query.php.html" title="mysql_&#8203;db_&#8203;query">mysql_&#8203;db_&#8203;query</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-drop-db.php.html" title="mysql_&#8203;drop_&#8203;db">mysql_&#8203;drop_&#8203;db</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-errno.php.html" title="mysql_&#8203;errno">mysql_&#8203;errno</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-error.php.html" title="mysql_&#8203;error">mysql_&#8203;error</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-escape-string.php.html" title="mysql_&#8203;escape_&#8203;string">mysql_&#8203;escape_&#8203;string</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-fetch-array.php.html" title="mysql_&#8203;fetch_&#8203;array">mysql_&#8203;fetch_&#8203;array</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-fetch-assoc.php.html" title="mysql_&#8203;fetch_&#8203;assoc">mysql_&#8203;fetch_&#8203;assoc</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-fetch-field.php.html" title="mysql_&#8203;fetch_&#8203;field">mysql_&#8203;fetch_&#8203;field</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-fetch-lengths.php.html" title="mysql_&#8203;fetch_&#8203;lengths">mysql_&#8203;fetch_&#8203;lengths</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-fetch-object.php.html" title="mysql_&#8203;fetch_&#8203;object">mysql_&#8203;fetch_&#8203;object</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-fetch-row.php.html" title="mysql_&#8203;fetch_&#8203;row">mysql_&#8203;fetch_&#8203;row</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-field-flags.php.html" title="mysql_&#8203;field_&#8203;flags">mysql_&#8203;field_&#8203;flags</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-field-len.php.html" title="mysql_&#8203;field_&#8203;len">mysql_&#8203;field_&#8203;len</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-field-name.php.html" title="mysql_&#8203;field_&#8203;name">mysql_&#8203;field_&#8203;name</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-field-seek.php.html" title="mysql_&#8203;field_&#8203;seek">mysql_&#8203;field_&#8203;seek</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-field-table.php.html" title="mysql_&#8203;field_&#8203;table">mysql_&#8203;field_&#8203;table</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-field-type.php.html" title="mysql_&#8203;field_&#8203;type">mysql_&#8203;field_&#8203;type</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-free-result.php.html" title="mysql_&#8203;free_&#8203;result">mysql_&#8203;free_&#8203;result</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-get-client-info.php.html" title="mysql_&#8203;get_&#8203;client_&#8203;info">mysql_&#8203;get_&#8203;client_&#8203;info</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-get-host-info.php.html" title="mysql_&#8203;get_&#8203;host_&#8203;info">mysql_&#8203;get_&#8203;host_&#8203;info</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-get-proto-info.php.html" title="mysql_&#8203;get_&#8203;proto_&#8203;info">mysql_&#8203;get_&#8203;proto_&#8203;info</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-get-server-info.php.html" title="mysql_&#8203;get_&#8203;server_&#8203;info">mysql_&#8203;get_&#8203;server_&#8203;info</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-info.php.html" title="mysql_&#8203;info">mysql_&#8203;info</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-insert-id.php.html" title="mysql_&#8203;insert_&#8203;id">mysql_&#8203;insert_&#8203;id</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-list-dbs.php.html" title="mysql_&#8203;list_&#8203;dbs">mysql_&#8203;list_&#8203;dbs</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-list-fields.php.html" title="mysql_&#8203;list_&#8203;fields">mysql_&#8203;list_&#8203;fields</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-list-processes.php.html" title="mysql_&#8203;list_&#8203;processes">mysql_&#8203;list_&#8203;processes</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-list-tables.php.html" title="mysql_&#8203;list_&#8203;tables">mysql_&#8203;list_&#8203;tables</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-num-fields.php.html" title="mysql_&#8203;num_&#8203;fields">mysql_&#8203;num_&#8203;fields</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-num-rows.php.html" title="mysql_&#8203;num_&#8203;rows">mysql_&#8203;num_&#8203;rows</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-pconnect.php.html" title="mysql_&#8203;pconnect">mysql_&#8203;pconnect</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-ping.php.html" title="mysql_&#8203;ping">mysql_&#8203;ping</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-query.php.html" title="mysql_&#8203;query">mysql_&#8203;query</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-real-escape-string.php.html" title="mysql_&#8203;real_&#8203;escape_&#8203;string">mysql_&#8203;real_&#8203;escape_&#8203;string</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-result.php.html" title="mysql_&#8203;result">mysql_&#8203;result</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-select-db.php.html" title="mysql_&#8203;select_&#8203;db">mysql_&#8203;select_&#8203;db</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-set-charset.php.html" title="mysql_&#8203;set_&#8203;charset">mysql_&#8203;set_&#8203;charset</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-stat.php.html" title="mysql_&#8203;stat">mysql_&#8203;stat</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-tablename.php.html" title="mysql_&#8203;tablename">mysql_&#8203;tablename</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-thread-id.php.html" title="mysql_&#8203;thread_&#8203;id">mysql_&#8203;thread_&#8203;id</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-unbuffered-query.php.html" title="mysql_&#8203;unbuffered_&#8203;query">mysql_&#8203;unbuffered_&#8203;query</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
