<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: mysql_real_escape_string - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.mysql-real-escape-string.php.html">
 <link rel="shorturl" href="https://www.php.net/mysql-real-escape-string">
 <link rel="alternate" href="https://www.php.net/mysql-real-escape-string" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.mysql.php.html">
 <link rel="prev" href="function.mysql-query.php.html">
 <link rel="next" href="function.mysql-result.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.mysql-real-escape-string.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.mysql-real-escape-string.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.mysql-real-escape-string.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.mysql-real-escape-string.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.mysql-real-escape-string.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.mysql-real-escape-string.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.mysql-real-escape-string.php" hreflang="pt_BR">
 <link rel="alternate" href="function.mysql-real-escape-string.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.mysql-real-escape-string.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.mysql-real-escape-string.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.mysql-result.php.html">
          mysql_result &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.mysql-query.php.html">
          &laquo; mysql_query        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.database.php.html'>Модули для работы с базами данных</a></li>      <li><a href='refs.database.vendors.php.html'>Модули для работы с базами данных отдельных производителей</a></li>      <li><a href='set.mysqlinfo.php.html'>MySQL</a></li>      <li><a href='book.mysql.php.html'>MySQL (Original)</a></li>      <li><a href='ref.mysql.php.html'>MySQL</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.mysql-real-escape-string.php'>English</option>
            <option value='de/function.mysql-real-escape-string.php'>German</option>
            <option value='es/function.mysql-real-escape-string.php'>Spanish</option>
            <option value='fr/function.mysql-real-escape-string.php'>French</option>
            <option value='it/function.mysql-real-escape-string.php'>Italian</option>
            <option value='ja/function.mysql-real-escape-string.php'>Japanese</option>
            <option value='pt_BR/function.mysql-real-escape-string.php'>Brazilian Portuguese</option>
            <option value='ru/function.mysql-real-escape-string.php' selected="selected">Russian</option>
            <option value='tr/function.mysql-real-escape-string.php'>Turkish</option>
            <option value='zh/function.mysql-real-escape-string.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/mysql/functions/mysql-real-escape-string.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.mysql-real-escape-string%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.mysql-real-escape-string" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mysql_real_escape_string</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.3.0, PHP 5)</p><p class="refpurpose"><span class="refname">mysql_real_escape_string</span> &mdash; <span class="dc-title">Экранирует специальные символы в строках для использования в выражениях SQL</span></p>

 </div>

 <div id="function.mysql-real-escape-string-refsynopsisdiv">
  <div class="warning"><strong class="warning">Внимание</strong>
   <p class="para">Данный модуль устарел начиная с версии PHP 5.5.0, и удалён в PHP 7.0.0.
Используйте вместо него <a href="book.mysqli.php.html" class="link">MySQLi</a> или <a href="ref.pdo-mysql.php.html" class="link">PDO_MySQL</a>.
Смотрите также инструкцию <a href="mysqlinfo.api.choosing.php.html" class="link">MySQL: выбор API</a>.
Альтернативы для этой функции:</p>
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="mysqli.real-escape-string.php.html" class="function">mysqli_real_escape_string()</a></span></li>
    <li class="member"><span class="methodname"><a href="pdo.quote.php.html" class="methodname">PDO::quote()</a></span></li>
   </ul>
  </div>
 </div>

 <div class="refsect1 description" id="refsect1-function.mysql-real-escape-string-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>mysql_real_escape_string</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$unescaped_string</code></span>, <span class="methodparam"><span class="type">resource</span> <code class="parameter">$link_identifier</code><span class="initializer"> = NULL</span></span>): <span class="type">string</span></div>

  <p class="para rdfs-comment">
   Экранирует специальные символы в <code class="parameter">unescaped_string</code>,
   принимая во внимание кодировку соединения, таким образом, что результат
   можно безопасно использовать в SQL-запросе в функции <span class="function"><a href="function.mysql-query.php.html" class="function">mysql_query()</a></span>.
   Если вставляются бинарные данные, то к ним так же необходимо применять эту функцию.
  </p>
  <p class="para">
   <span class="function"><strong>mysql_real_escape_string()</strong></span> вызывает библиотечную функцию MySQL
   mysql_real_escape_string, которая добавляет обратную косую черту к следующим символам:
   <code class="literal">\x00</code>, <code class="literal">\n</code>, <code class="literal">\r</code>, <code class="literal">\</code>,
   <code class="literal">&#039;</code>, <code class="literal">&quot;</code> и <code class="literal">\x1a</code>.
  </p>
  <p class="para">
   Эта функция должна всегда (за несколькими исключениями) использоваться для того,
   чтобы обезопасить данные, вставляемые в запрос перед отправкой его в MySQL.
  </p>

  <div class="caution"><strong class="caution">Предостережение</strong>
   <h1 class="title">Безопасность: кодировка символов по умолчанию</h1>
   <p class="para">
    Кодировка символов должна устанавливаться как на сервере, так и с помощью функции
    <span class="function"><a href="function.mysql-set-charset.php.html" class="function">mysql_set_charset()</a></span>, чтобы влиять на поведение
    <span class="function"><strong>mysql_real_escape_string()</strong></span>. Подробнее описано в разделе <a href="mysqlinfo.concepts.charset.php.html" class="link">кодировка символов</a>.
   </p>
  </div>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mysql-real-escape-string-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">unescaped_string</code></dt>

     <dd>

      <p class="para">
       Экранируемая строка.
      </p>
     </dd>

    
    <dt>

<code class="parameter">link_identifier</code></dt>
<dd>
<p class="para">Соединение MySQL. Если идентификатор соединения не был указан,
будет использовано последнее соединение, открытое <span class="function"><a href="function.mysql-connect.php.html" class="function">mysql_connect()</a></span>. Если такое соединение не было найдено,
функция попытается создать таковое, как если бы <span class="function"><a href="function.mysql-connect.php.html" class="function">mysql_connect()</a></span> была вызвана без параметров.
Если соединение не было найдено и не смогло быть создано, генерируется ошибка уровня <strong><code>E_WARNING</code></strong>.</p></dd>


   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.mysql-real-escape-string-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает строку, в которой экранированы все необходимые символы,
   или <strong><code>false</code></strong> в случае возникновения ошибки.
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.mysql-real-escape-string-errors">
  <h3 class="title">Ошибки</h3>
  <p class="para">
   Запуск этой функции без существующего соединения с MySQL вызовет ошибку уровня
   <strong><code>E_WARNING</code></strong>. Данную функцию можно запускать только если есть
   соединение с MySQL.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.mysql-real-escape-string-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="example-5389">
    <p><strong>Пример #1 Простой пример использования <span class="function"><strong>mysql_real_escape_string()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// Соединение<br /></span><span style="color: #0000BB">$link </span><span style="color: #007700">= </span><span style="color: #0000BB">mysql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'mysql_host'</span><span style="color: #007700">, </span><span style="color: #DD0000">'mysql_user'</span><span style="color: #007700">, </span><span style="color: #DD0000">'mysql_password'</span><span style="color: #007700">)<br />    OR die(</span><span style="color: #0000BB">mysql_error</span><span style="color: #007700">());<br /><br /></span><span style="color: #FF8000">// Запрос<br /></span><span style="color: #0000BB">$query </span><span style="color: #007700">= </span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT * FROM users WHERE user='%s' AND password='%s'"</span><span style="color: #007700">,<br />            </span><span style="color: #0000BB">mysql_real_escape_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$user</span><span style="color: #007700">),<br />            </span><span style="color: #0000BB">mysql_real_escape_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$password</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5392">
    <p><strong>Пример #2 Пример использования <span class="function"><strong>mysql_real_escape_string()</strong></span> без наличия
     соединения</strong></p>
    <div class="example-contents"><p>
     Этот пример показывает, что произойдёт, если вызвать эту функцию без наличия
     соединения с MySQL.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// Коннекта к MySQL нет<br /><br /></span><span style="color: #0000BB">$lastname  </span><span style="color: #007700">= </span><span style="color: #DD0000">"O'Reilly"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$_lastname </span><span style="color: #007700">= </span><span style="color: #0000BB">mysql_real_escape_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$lastname</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$query </span><span style="color: #007700">= </span><span style="color: #DD0000">"SELECT * FROM actors WHERE last_name = '</span><span style="color: #0000BB">$_lastname</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$_lastname</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Вывод приведённого примера будет похож на:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
Warning: mysql_real_escape_string(): No such file or directory in /this/test/script.php on line 5
Warning: mysql_real_escape_string(): A link to the server could not be established in /this/test/script.php on line 5

bool(false)
string(41) &quot;SELECT * FROM actors WHERE last_name = &#039;&#039;&quot;
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="reflectionproperty.gettype.example.basic">
    <p><strong>Пример #3 Пример взлома с использованием SQL-инъекции</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// Мы никак не проверили переменную $_POST['password'],<br />// а она может содержать совсем не то, что мы ожидали. Например:<br /></span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">] = </span><span style="color: #DD0000">'aidan'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'password'</span><span style="color: #007700">] = </span><span style="color: #DD0000">"' OR ''='"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// посылаем запрос, чтобы проверить имя и пароль пользователя<br /></span><span style="color: #0000BB">$query </span><span style="color: #007700">= </span><span style="color: #DD0000">"SELECT * FROM users WHERE user='</span><span style="color: #007700">{</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">]}</span><span style="color: #DD0000">' AND password='</span><span style="color: #007700">{</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'password'</span><span style="color: #007700">]}</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">mysql_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// посмотрим, какой запрос будет отправлен в MySQL:<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">$query</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

     <div class="example-contents"><p>
      Запрос, который будет отправлен в MySQL:
     </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
SELECT * FROM users WHERE user=&#039;aidan&#039; AND password=&#039;&#039; OR &#039;&#039;=&#039;&#039;
</pre></div>
    </div>
    <div class="example-contents"><p>
     Это позволит кому угодно войти в систему без пароля.
    </p></div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.mysql-real-escape-string-notes">
  <h3 class="title">Примечания</h3>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Функцию <span class="function"><strong>mysql_real_escape_string()</strong></span> можно использовать
    только после того, как установлено соединение с MySQL. В противном
    случае возникнет ошибка уровня <strong><code>E_WARNING</code></strong>, а функция
    возвратит <strong><code>false</code></strong>. Если <code class="parameter">link_identifier</code> не указан,
    используется последнее открытое соединение.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Если не пользоваться этой функцией, то запрос становится уязвимым для
    <a href="security.database.sql-injection.php.html" class="link">взлома с помощью SQL-инъекций</a>.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <span class="simpara">
    <span class="function"><strong>mysql_real_escape_string()</strong></span> не экранирует символы
    <code class="literal">%</code> и <code class="literal">_</code>. Эти знаки являются масками
    групп символов в операторах MySQL <code class="literal">LIKE</code>,
    <code class="literal">GRANT</code> и <code class="literal">REVOKE</code>.
   </span>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.mysql-real-escape-string-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.mysql-set-charset.php.html" class="function" rel="rdfs-seeAlso">mysql_set_charset()</a> - Устанавливает кодировку клиента</span></li>
    <li class="member"><span class="function"><a href="function.mysql-client-encoding.php.html" class="function" rel="rdfs-seeAlso">mysql_client_encoding()</a> - Возвращает кодировку соединения</span></li>
   </ul>
  </p>
 </div>

</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.mysql-real-escape-string&amp;redirect=https://www.php.net/manual/ru/function.mysql-real-escape-string.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">10 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="101248">  <div class="votes">
    <div id="Vu101248">
    <a href="https://www.php.net/manual/vote-note.php?id=101248&amp;page=function.mysql-real-escape-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd101248">
    <a href="https://www.php.net/manual/vote-note.php?id=101248&amp;page=function.mysql-real-escape-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V101248" title="72% like this...">
    181
    </div>
  </div>
  <a href="function.mysql-real-escape-string.php.html#101248" class="name">
  <strong class="user"><em>feedr</em></strong></a><a class="genanchor" href="function.mysql-real-escape-string.php.html#101248"> &para;</a><div class="date" title="2010-12-05 08:38"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom101248">
<div class="phpcode"><code><span class="html">Just a little function which mimics the original mysql_real_escape_string but which doesn't need an active mysql connection. Could be implemented as a static function in a database class. Hope it helps someone.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">mysql_escape_mimic</span><span class="keyword">(</span><span class="default">$inp</span><span class="keyword">) {<br />    if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$inp</span><span class="keyword">))<br />        return </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">__METHOD__</span><span class="keyword">, </span><span class="default">$inp</span><span class="keyword">);<br /><br />    if(!empty(</span><span class="default">$inp</span><span class="keyword">) &amp;&amp; </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$inp</span><span class="keyword">)) {<br />        return </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'\\'</span><span class="keyword">, </span><span class="string">"\0"</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">, </span><span class="string">"\r"</span><span class="keyword">, </span><span class="string">"'"</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">, </span><span class="string">"\x1a"</span><span class="keyword">), array(</span><span class="string">'\\\\'</span><span class="keyword">, </span><span class="string">'\\0'</span><span class="keyword">, </span><span class="string">'\\n'</span><span class="keyword">, </span><span class="string">'\\r'</span><span class="keyword">, </span><span class="string">"\\'"</span><span class="keyword">, </span><span class="string">'\\"'</span><span class="keyword">, </span><span class="string">'\\Z'</span><span class="keyword">), </span><span class="default">$inp</span><span class="keyword">);<br />    }<br /><br />    return </span><span class="default">$inp</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="108125">  <div class="votes">
    <div id="Vu108125">
    <a href="https://www.php.net/manual/vote-note.php?id=108125&amp;page=function.mysql-real-escape-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd108125">
    <a href="https://www.php.net/manual/vote-note.php?id=108125&amp;page=function.mysql-real-escape-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V108125" title="66% like this...">
    24
    </div>
  </div>
  <a href="function.mysql-real-escape-string.php.html#108125" class="name">
  <strong class="user"><em>Walter Tross</em></strong></a><a class="genanchor" href="function.mysql-real-escape-string.php.html#108125"> &para;</a><div class="date" title="2012-03-30 02:20"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom108125">
<div class="phpcode"><code><span class="html">For further information:<br /><a href="http://dev.mysql.com/doc/refman/5.5/en/mysql-real-escape-string.html" rel="nofollow" target="_blank">http://dev.mysql.com/doc/refman/5.5/en/mysql-real-escape-string.html</a><br />(replace your MySQL version in the URL)</span></code></div>
  </div>
 </div>
  <div class="note" id="66836">  <div class="votes">
    <div id="Vu66836">
    <a href="https://www.php.net/manual/vote-note.php?id=66836&amp;page=function.mysql-real-escape-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd66836">
    <a href="https://www.php.net/manual/vote-note.php?id=66836&amp;page=function.mysql-real-escape-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V66836" title="63% like this...">
    30
    </div>
  </div>
  <a href="function.mysql-real-escape-string.php.html#66836" class="name">
  <strong class="user"><em>nicolas</em></strong></a><a class="genanchor" href="function.mysql-real-escape-string.php.html#66836"> &para;</a><div class="date" title="2006-05-30 01:38"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom66836">
<div class="phpcode"><code><span class="html">Note that mysql_real_escape_string doesn't prepend backslashes to \x00, \n, \r, and and \x1a as mentionned in the documentation, but actually replaces the character with a MySQL acceptable representation for queries (e.g. \n is replaced with the '\n' litteral). (\, ', and " are escaped as documented) This doesn't change how you should use this function, but I think it's good to know.</span></code></div>
  </div>
 </div>
  <div class="note" id="110413">  <div class="votes">
    <div id="Vu110413">
    <a href="https://www.php.net/manual/vote-note.php?id=110413&amp;page=function.mysql-real-escape-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd110413">
    <a href="https://www.php.net/manual/vote-note.php?id=110413&amp;page=function.mysql-real-escape-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V110413" title="53% like this...">
    8
    </div>
  </div>
  <a href="function.mysql-real-escape-string.php.html#110413" class="name">
  <strong class="user"><em>sam at numbsafari dot com</em></strong></a><a class="genanchor" href="function.mysql-real-escape-string.php.html#110413"> &para;</a><div class="date" title="2012-10-19 05:33"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom110413">
<div class="phpcode"><code><span class="html">No discussion of escaping is complete without telling everyone that you should basically never use external input to generate interpreted code. This goes for SQL statements, or anything you would call any sort of "eval" function on.<br /><br />So, instead of using this terribly broken function, use parametric prepared statements instead.<br /><br />Honestly, using user provided data to compose SQL statements should be considered professional negligence and you should be held accountable by your employer or client for not using parametric prepared statements.<br /><br />What does that mean?<br /><br />It means instead of building a SQL statement like this:<br /><br />"INSERT INTO X (A) VALUES(".$_POST["a"].")"<br /><br />You should use mysqli's prepare() function (<a href="http://php.net/manual/en/mysqli.prepare.php" rel="nofollow" target="_blank">http://php.net/manual/en/mysqli.prepare.php</a>) to execute a statement that looks like this:<br /><br />"INSERT INTO X (A) VALUES(?)"<br /><br />NB: This doesn't mean you should never generate dynamic SQL statements. What it means is that you should never use user-provided data to generate those statements. Any user-provided data should be passed through as parameters to the statement after it has been prepared.<br /><br />So, for example, if you are building up a little framework and want to do an insert to a table based on the request URI, it's in your best interest to not take the $_SERVER['REQUEST_URI'] value (or any part of it) and directly concatenate that with your query. Instead,  you should parse out the portion of the $_SERVER['REQUEST_URI'] value that you want, and map that through some kind of function or associative array to a non-user provided value. If the mapping produces no value, you know that something is wrong with the user provided data.<br /><br />Failing to follow this has been the cause of a number of SQL-injection problems in the Ruby On Rails framework, even though it uses parametric prepared statements. This is how GitHub was hacked at one point. So, no language is immune to this problem. That's why this is a general best practice and not something specific to PHP and why you should REALLY adopt it.<br /><br />Also, you should still do some kind of validation of the data provided by users, even when using parametric prepared statements. This is because that user-provided data will often become part of some generated HTML, and you want to ensure that the user provided data isn't going to cause security problems in the browser.</span></code></div>
  </div>
 </div>
  <div class="note" id="126328">  <div class="votes">
    <div id="Vu126328">
    <a href="https://www.php.net/manual/vote-note.php?id=126328&amp;page=function.mysql-real-escape-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd126328">
    <a href="https://www.php.net/manual/vote-note.php?id=126328&amp;page=function.mysql-real-escape-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V126328" title="0% like this...">
    -1
    </div>
  </div>
  <a href="function.mysql-real-escape-string.php.html#126328" class="name">
  <strong class="user"><em>rohankumar dot 1524 at gmail dot com</em></strong></a><a class="genanchor" href="function.mysql-real-escape-string.php.html#126328"> &para;</a><div class="date" title="2021-08-11 07:26"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom126328">
<div class="phpcode"><code><span class="html">There is requirement for old projects which are using `mysql_escape_string`, and upgrading the PHP version to 7 and above. Basically this happens in maintenance projects where we don't know how many files the functions are used in application. We can use [mysqli.real-escape-string][1] for the function:<br /><br />If you have a typical connection file like `conn.php`<br /><br />    $conn = new mysqli($host, $user, $password, $db);<br />    // may be few more lines to handle the $conn<br />    if (!function_exists('mysql_escape_string')) {<br />        function mysql_escape_string($sting){ // if mysql_escape_string not available<br />            return $conn-&gt;real_escape_string($string); // escape using the $conn instance<br />        }<br />    }<br /><br />  [1]: <a href="https://www.php.net/manual/en/mysqli.real-escape-string.php" rel="nofollow" target="_blank">https://www.php.net/manual/en/mysqli.real-escape-string.php</a></span></code></div>
  </div>
 </div>
  <div class="note" id="95009">  <div class="votes">
    <div id="Vu95009">
    <a href="https://www.php.net/manual/vote-note.php?id=95009&amp;page=function.mysql-real-escape-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd95009">
    <a href="https://www.php.net/manual/vote-note.php?id=95009&amp;page=function.mysql-real-escape-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V95009" title="50% like this...">
    1
    </div>
  </div>
  <a href="function.mysql-real-escape-string.php.html#95009" class="name">
  <strong class="user"><em>strata_ranger at hotmail dot com</em></strong></a><a class="genanchor" href="function.mysql-real-escape-string.php.html#95009"> &para;</a><div class="date" title="2009-12-08 11:17"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom95009">
<div class="phpcode"><code><span class="html">There's an interesting quirk in the example #2 about SQL injection:  AND takes priority over OR, so the injected query actually executes as WHERE (user='aidan' AND password='') OR ''='', so instead of returning a database record corresponding to an arbitrary username (in this case 'aidan'), it would actually return ALL database records.  In no particular order.  So an attacker might be able to log in as any account, but not necessarily with any control over which account it is.<br /><br />Of course a potential attacker could simply modify their parameters to target specific users of interest:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">// E.g. attacker's values<br /></span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'username'</span><span class="keyword">] = </span><span class="string">''</span><span class="keyword">;<br /></span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'password'</span><span class="keyword">] = </span><span class="string">"' OR user = 'administrator' AND '' = '"</span><span class="keyword">;<br /><br /></span><span class="comment">// Malformed query<br /></span><span class="default">$query </span><span class="keyword">= </span><span class="string">"SELECT * FROM users WHERE user='</span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">username</span><span class="keyword">]</span><span class="string">' AND password='</span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">password</span><span class="keyword">]</span><span class="string">'"</span><span class="keyword">;<br /><br />echo </span><span class="default">$query</span><span class="keyword">;<br /><br /></span><span class="comment">// The query sent to MySQL would read:<br />// SELECT * FROM users WHERE user='' AND password='' OR user='administrator' AND ''='';<br />// which would allow anyone to gain access to the account named 'administrator'<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="92493">  <div class="votes">
    <div id="Vu92493">
    <a href="https://www.php.net/manual/vote-note.php?id=92493&amp;page=function.mysql-real-escape-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd92493">
    <a href="https://www.php.net/manual/vote-note.php?id=92493&amp;page=function.mysql-real-escape-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V92493" title="38% like this...">
    -15
    </div>
  </div>
  <a href="function.mysql-real-escape-string.php.html#92493" class="name">
  <strong class="user"><em>plgs at ozemail dot com dot au</em></strong></a><a class="genanchor" href="function.mysql-real-escape-string.php.html#92493"> &para;</a><div class="date" title="2009-07-27 01:05"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom92493">
<div class="phpcode"><code><span class="html">Don't forget that if you're using Mysqli (ie, the "improved" Mysql extension) then you need to use the corresponding mysqli function mysqli_real_escape_string().  The parameter order is also different.</span></code></div>
  </div>
 </div>
  <div class="note" id="121826">  <div class="votes">
    <div id="Vu121826">
    <a href="https://www.php.net/manual/vote-note.php?id=121826&amp;page=function.mysql-real-escape-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd121826">
    <a href="https://www.php.net/manual/vote-note.php?id=121826&amp;page=function.mysql-real-escape-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V121826" title="31% like this...">
    -7
    </div>
  </div>
  <a href="function.mysql-real-escape-string.php.html#121826" class="name">
  <strong class="user"><em>Aljo</em></strong></a><a class="genanchor" href="function.mysql-real-escape-string.php.html#121826"> &para;</a><div class="date" title="2017-11-04 05:14"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom121826">
<div class="phpcode"><code><span class="html">@feedr<br />I elaborated his note as following:<br />$string = "asda\0sd\x1aas\\\\\\\\dasd\'asdasd\na\'\'sdasdad";<br />$array1 = array('\\\\\\\\', '\0', '\n', '\r', "'", '"', '\x1a');<br />$array2 = array('\\\\\\\\\\\\\\\\', '\\\0', '\\\n', '\\\r', "\\\'", '\\\"', '\\\Z');<br />echo($string);<br />echo(PHP_EOL);<br />for( $i=0; $i&lt;count($array1); $i++ ) {<br />    if ($i==0)<br />    $p = '/(?&lt;!\\\\)'.$array1[$i].'(?!\\\\)/';<br />    else<br />    $p = '/(?&lt;!\\\\)'.$array1[$i].'/';<br />    echo($i);<br />    echo($p);<br />    echo( $array2[$i]);<br />    $string = preg_replace($p, $array2[$i], $string);<br />    echo("\t");<br />    echo($string);<br />    echo(PHP_EOL);<br />}<br />echo(PHP_EOL);<br />echo($string);</span></code></div>
  </div>
 </div>
  <div class="note" id="120914">  <div class="votes">
    <div id="Vu120914">
    <a href="https://www.php.net/manual/vote-note.php?id=120914&amp;page=function.mysql-real-escape-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd120914">
    <a href="https://www.php.net/manual/vote-note.php?id=120914&amp;page=function.mysql-real-escape-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V120914" title="30% like this...">
    -9
    </div>
  </div>
  <a href="function.mysql-real-escape-string.php.html#120914" class="name">
  <strong class="user"><em>jonnie</em></strong></a><a class="genanchor" href="function.mysql-real-escape-string.php.html#120914"> &para;</a><div class="date" title="2017-03-31 10:53"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom120914">
<div class="phpcode"><code><span class="html">To Quote Sam at Numb Safari<br /><br />[ "No discussion of escaping is complete without telling everyone that you should basically never use external input to generate interpreted code. This goes for SQL statements, or anything you would call any sort of "eval" function on.<br /><br />So, instead of using this terribly broken function, use parametric prepared statements instead.<br /><br />Honestly, using user provided data to compose SQL statements should be considered professional negligence and you should be held accountable by your employer or client for not using parametric prepared statements." ]<br /><br />Sam is right........<br /><br />However I do not think it is sensible to stop all sanitising and simply pass the task on to parametric prepared statements.<br /><br />A particular developer working in a particular situation will always know more about valid input (specific to that context). <br /><br />If you ask a user to pass in a value you have already given them and you know that all such values start AB****** and the string should be of length 7 or 11 but never any other length then you have the basis of a good pre-sanitiser - different allowable lengths of a string might indicate legacy data.<br /><br />I would never want to simply pass the rubbish that a malicious user may have passed in through a form to the parametric prepared statements, I would always want to do my own sanity checks first and in some cases these may err on the side of caution and simply choose to abort the Database op completely. <br /><br />That way my DB does not get clogged up with unsafe statements made safe - it simply does not get clogged up which is better.<br /><br />Security in layers - sanitisation and validation should still be considered in every situation BEFORE using prepared statements.<br /><br />In addition as far as I can read into the official doc<br />==============================================<br /><br />"Escaping and SQL injection<br /><br />Bound variables are sent to the server separately from the query and thus cannot interfere with it. The server uses these values directly at the point of execution, after the statement template is parsed. Bound parameters do not need to be escaped as they are never substituted into the query string directly"<br /><br />That suggests to me that danger is avoided in the internals by alternative handling not by nullification.<br /><br />This means that a large project with incomplete conversion to prepared statements, legacy code in different parts of an organisation or servers talking to one another could all pass on the bad news from an immune location or situation to one that is not immune.<br /><br />As long as the sanitisation is competently performed without incurring additional risks then personally I would stick with certain layers of sanitisation and then call the prepared statements.</span></code></div>
  </div>
 </div>
  <div class="note" id="95915">  <div class="votes">
    <div id="Vu95915">
    <a href="https://www.php.net/manual/vote-note.php?id=95915&amp;page=function.mysql-real-escape-string&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd95915">
    <a href="https://www.php.net/manual/vote-note.php?id=95915&amp;page=function.mysql-real-escape-string&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V95915" title="26% like this...">
    -30
    </div>
  </div>
  <a href="function.mysql-real-escape-string.php.html#95915" class="name">
  <strong class="user"><em>presto dot dk at gmail dot com</em></strong></a><a class="genanchor" href="function.mysql-real-escape-string.php.html#95915"> &para;</a><div class="date" title="2010-01-28 07:05"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom95915">
<div class="phpcode"><code><span class="html">If you want to make sure that the ID you're using to do a query is a number, use sprint() of (int) or intval(), but don't use mysql_real_escape_string.<br /><br />There is no difference between ISO-8859-1's number 10 and UTF-8's number 10.</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.mysql-real-escape-string&amp;redirect=https://www.php.net/manual/ru/function.mysql-real-escape-string.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.mysql.php.html">MySQL</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.mysql-affected-rows.php.html" title="mysql_&#8203;affected_&#8203;rows">mysql_&#8203;affected_&#8203;rows</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-client-encoding.php.html" title="mysql_&#8203;client_&#8203;encoding">mysql_&#8203;client_&#8203;encoding</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-close.php.html" title="mysql_&#8203;close">mysql_&#8203;close</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-connect.php.html" title="mysql_&#8203;connect">mysql_&#8203;connect</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-create-db.php.html" title="mysql_&#8203;create_&#8203;db">mysql_&#8203;create_&#8203;db</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-data-seek.php.html" title="mysql_&#8203;data_&#8203;seek">mysql_&#8203;data_&#8203;seek</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-db-name.php.html" title="mysql_&#8203;db_&#8203;name">mysql_&#8203;db_&#8203;name</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-db-query.php.html" title="mysql_&#8203;db_&#8203;query">mysql_&#8203;db_&#8203;query</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-drop-db.php.html" title="mysql_&#8203;drop_&#8203;db">mysql_&#8203;drop_&#8203;db</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-errno.php.html" title="mysql_&#8203;errno">mysql_&#8203;errno</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-error.php.html" title="mysql_&#8203;error">mysql_&#8203;error</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-escape-string.php.html" title="mysql_&#8203;escape_&#8203;string">mysql_&#8203;escape_&#8203;string</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-fetch-array.php.html" title="mysql_&#8203;fetch_&#8203;array">mysql_&#8203;fetch_&#8203;array</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-fetch-assoc.php.html" title="mysql_&#8203;fetch_&#8203;assoc">mysql_&#8203;fetch_&#8203;assoc</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-fetch-field.php.html" title="mysql_&#8203;fetch_&#8203;field">mysql_&#8203;fetch_&#8203;field</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-fetch-lengths.php.html" title="mysql_&#8203;fetch_&#8203;lengths">mysql_&#8203;fetch_&#8203;lengths</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-fetch-object.php.html" title="mysql_&#8203;fetch_&#8203;object">mysql_&#8203;fetch_&#8203;object</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-fetch-row.php.html" title="mysql_&#8203;fetch_&#8203;row">mysql_&#8203;fetch_&#8203;row</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-field-flags.php.html" title="mysql_&#8203;field_&#8203;flags">mysql_&#8203;field_&#8203;flags</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-field-len.php.html" title="mysql_&#8203;field_&#8203;len">mysql_&#8203;field_&#8203;len</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-field-name.php.html" title="mysql_&#8203;field_&#8203;name">mysql_&#8203;field_&#8203;name</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-field-seek.php.html" title="mysql_&#8203;field_&#8203;seek">mysql_&#8203;field_&#8203;seek</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-field-table.php.html" title="mysql_&#8203;field_&#8203;table">mysql_&#8203;field_&#8203;table</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-field-type.php.html" title="mysql_&#8203;field_&#8203;type">mysql_&#8203;field_&#8203;type</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-free-result.php.html" title="mysql_&#8203;free_&#8203;result">mysql_&#8203;free_&#8203;result</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-get-client-info.php.html" title="mysql_&#8203;get_&#8203;client_&#8203;info">mysql_&#8203;get_&#8203;client_&#8203;info</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-get-host-info.php.html" title="mysql_&#8203;get_&#8203;host_&#8203;info">mysql_&#8203;get_&#8203;host_&#8203;info</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-get-proto-info.php.html" title="mysql_&#8203;get_&#8203;proto_&#8203;info">mysql_&#8203;get_&#8203;proto_&#8203;info</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-get-server-info.php.html" title="mysql_&#8203;get_&#8203;server_&#8203;info">mysql_&#8203;get_&#8203;server_&#8203;info</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-info.php.html" title="mysql_&#8203;info">mysql_&#8203;info</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-insert-id.php.html" title="mysql_&#8203;insert_&#8203;id">mysql_&#8203;insert_&#8203;id</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-list-dbs.php.html" title="mysql_&#8203;list_&#8203;dbs">mysql_&#8203;list_&#8203;dbs</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-list-fields.php.html" title="mysql_&#8203;list_&#8203;fields">mysql_&#8203;list_&#8203;fields</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-list-processes.php.html" title="mysql_&#8203;list_&#8203;processes">mysql_&#8203;list_&#8203;processes</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-list-tables.php.html" title="mysql_&#8203;list_&#8203;tables">mysql_&#8203;list_&#8203;tables</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-num-fields.php.html" title="mysql_&#8203;num_&#8203;fields">mysql_&#8203;num_&#8203;fields</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-num-rows.php.html" title="mysql_&#8203;num_&#8203;rows">mysql_&#8203;num_&#8203;rows</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-pconnect.php.html" title="mysql_&#8203;pconnect">mysql_&#8203;pconnect</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-ping.php.html" title="mysql_&#8203;ping">mysql_&#8203;ping</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-query.php.html" title="mysql_&#8203;query">mysql_&#8203;query</a>
                        </li>
                                                <li class="current">
                            <a href="function.mysql-real-escape-string.php.html" title="mysql_&#8203;real_&#8203;escape_&#8203;string">mysql_&#8203;real_&#8203;escape_&#8203;string</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-result.php.html" title="mysql_&#8203;result">mysql_&#8203;result</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-select-db.php.html" title="mysql_&#8203;select_&#8203;db">mysql_&#8203;select_&#8203;db</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-set-charset.php.html" title="mysql_&#8203;set_&#8203;charset">mysql_&#8203;set_&#8203;charset</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-stat.php.html" title="mysql_&#8203;stat">mysql_&#8203;stat</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-tablename.php.html" title="mysql_&#8203;tablename">mysql_&#8203;tablename</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-thread-id.php.html" title="mysql_&#8203;thread_&#8203;id">mysql_&#8203;thread_&#8203;id</a>
                        </li>
                                                <li class="">
                            <a href="function.mysql-unbuffered-query.php.html" title="mysql_&#8203;unbuffered_&#8203;query">mysql_&#8203;unbuffered_&#8203;query</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
