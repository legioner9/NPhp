<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: ob_start - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.ob-start.php.html">
 <link rel="shorturl" href="https://www.php.net/ob-start">
 <link rel="alternate" href="https://www.php.net/ob-start" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.outcontrol.php.html">
 <link rel="prev" href="function.ob-list-handlers.php.html">
 <link rel="next" href="function.output-add-rewrite-var.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.ob-start.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.ob-start.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.ob-start.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.ob-start.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.ob-start.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.ob-start.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.ob-start.php" hreflang="pt_BR">
 <link rel="alternate" href="function.ob-start.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.ob-start.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.ob-start.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.output-add-rewrite-var.php.html">
          output_add_rewrite_var &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.ob-list-handlers.php.html">
          &laquo; ob_list_handlers        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.basic.php.php.html'>Изменение поведения PHP</a></li>      <li><a href='book.outcontrol.php.html'>Контроль вывода</a></li>      <li><a href='ref.outcontrol.php.html'>Функции контроля вывода</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.ob-start.php'>English</option>
            <option value='de/function.ob-start.php'>German</option>
            <option value='es/function.ob-start.php'>Spanish</option>
            <option value='fr/function.ob-start.php'>French</option>
            <option value='it/function.ob-start.php'>Italian</option>
            <option value='ja/function.ob-start.php'>Japanese</option>
            <option value='pt_BR/function.ob-start.php'>Brazilian Portuguese</option>
            <option value='ru/function.ob-start.php' selected="selected">Russian</option>
            <option value='tr/function.ob-start.php'>Turkish</option>
            <option value='zh/function.ob-start.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/outcontrol/functions/ob-start.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.ob-start%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.ob-start" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ob_start</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">ob_start</span> &mdash; <span class="dc-title">Включает буферизацию вывода</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.ob-start-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>ob_start</strong></span>(<span class="methodparam"><span class="type"><a href="language.types.callable.php.html" class="type callable">callable</a></span> <code class="parameter">$callback</code><span class="initializer"> = <strong><code>null</code></strong></span></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$chunk_size</code><span class="initializer"> = 0</span></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code><span class="initializer"> = <strong><code>PHP_OUTPUT_HANDLER_STDFLAGS</code></strong></span></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   Функция включает буферизацию вывода. Пока буферизация вывода активна,
   вывод из скрипта не отправляется, вместо этого вывод сохраняется во внутреннем буфере.
   В разделе «<a href="outcontrol.what-output-is-buffered.php.html" class="xref">Какой вывод буферизуется?</a>»
   рассказано, на какой именно вывод это влияет.
  </p>
  <p class="para">
   Буферы вывода помещаются в стек,
   поэтому функцию <span class="function"><strong>ob_start()</strong></span> разрешено вызывать,
   пока активен другой буфер.
   Если активировано несколько буферов вывода,
   вывод фильтруется последовательно
   через каждый из них в порядке вложенности.
   Подробнее об этом рассказано в разделе «<a href="outcontrol.nesting-output-buffers.php.html" class="xref">Вложенные буферы вывода</a>».
  </p>
  <p class="para">
   Подробное описание буферов вывода дано в разделе «<a href="outcontrol.user-level-output-buffers.php.html" class="xref">Пользовательские буферы вывода</a>».
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.ob-start-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">callback</code></dt>

     <dd>

      <p class="para">
       Можно задать необязательный параметр <code class="parameter">callback</code> (<span class="type"><a href="language.types.callable.php.html" class="type callable">callable</a></span>).
       Чтобы обойти его, передают значение <strong><code>null</code></strong>.
      </p>
      <p class="para">
       Параметр <code class="parameter">callback</code> вызывается,
       когда буфер вывода сбрасывается (отправляется), очищается
       или когда буфер вывода сбрасывается в конце скрипта.
      </p>
      <p class="para">
       Сигнатура <code class="parameter">callback</code>-функции:
      </p>
      <p class="para">
       <div class="methodsynopsis dc-description">
        <span class="methodname"><span class="replaceable">handler</span></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$buffer</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$phase</code><span class="initializer"> = ?</span></span>): <span class="type">string</span></div>

       <dl>
        
         <dt>
<code class="parameter">buffer</code></dt>

         <dd>

          <span class="simpara">
           Содержимое буфера вывода.
          </span>
         </dd>

        
        
         <dt>
<code class="parameter">phase</code></dt>

         <dd>

          <span class="simpara">
           Битовая маска из семейства констант
           <a href="outcontrol.constants.php.html#constant.php-output-handler-start" class="link">
            <strong><code>PHP_OUTPUT_HANDLER_<span class="replaceable">*</span></code></strong>
           </a>.
           Подробнее о флагах рассказано в разделе
           «<a href="outcontrol.flags-passed-to-output-handlers.php.html" class="xref">Флаги, передаваемые обработчикам вывода</a>».
          </span>
         </dd>

        
       </dl>

      </p>
      <p class="para">
       Если параметр <code class="parameter">callback</code> вернёт <strong><code>false</code></strong>,
       возвращается содержимое буфера.
       Подробнее об этом рассказано в разделе
       «<a href="outcontrol.output-handler-return-values.php.html" class="xref">Возвращаемые значения обработчика вывода</a>».
      </p>
      <div class="warning"><strong class="warning">Внимание</strong>
       <p class="simpara">
        Вызов любой из следующих функций из обработчика вывода
        выдаст фатальную ошибку:
        <span class="function"><a href="function.ob-clean.php.html" class="function">ob_clean()</a></span>, <span class="function"><a href="function.ob-end-clean.php.html" class="function">ob_end_clean()</a></span>,
        <span class="function"><a href="function.ob-end-flush.php.html" class="function">ob_end_flush()</a></span>, <span class="function"><a href="function.ob-flush.php.html" class="function">ob_flush()</a></span>,
        <span class="function"><a href="function.ob-get-clean.php.html" class="function">ob_get_clean()</a></span>, <span class="function"><a href="function.ob-get-flush.php.html" class="function">ob_get_flush()</a></span>,
        <span class="function"><strong>ob_start()</strong></span>.
       </p>
      </div>
      <p class="para">
       Подробнее о <code class="parameter">callback</code>-функциях (обработчиках вывода)
       рассказано в разделах «<a href="outcontrol.output-handlers.php.html" class="xref">Обработчики вывода</a>»
       и «<a href="outcontrol.working-with-output-handlers.php.html" class="xref">Работа с обработчиками вывода</a>».
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">chunk_size</code></dt>

     <dd>

      <p class="para">
       Если передан необязательный параметр <code class="parameter">chunk_size</code>,
       буфер будет сброшен после каждого блока кода,
       размер буфера которого достиг или превысил
       значение параметра <code class="parameter">chunk_size</code>.
       Значение по умолчанию <code class="literal">0</code> означает,
       что вывод буферизуется до тех пор, пока буфер не будет выключен.
       Подробнее об этом рассказано в разделе «<a href="outcontrol.buffer-size.php.html" class="xref">Размер буфера</a>».
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">flags</code></dt>

     <dd>

      <p class="para">
       Параметр <code class="parameter">flags</code> — это битовая маска, которая
       управляет операциями, выполняемыми с буфером вывода.
       По умолчанию разрешены очистка, сброс и удаление буферов вывода,
       что разрешено устанавливать явно через
       <a href="outcontrol.constants.php.html#outcontrol.constants.buffer-control-flags" class="link">
        флаги управления буфером
       </a>.
       Подробнее об этом рассказано в разделе «<a href="outcontrol.operations-on-buffers.php.html" class="xref">Операции, разрешённые для буферов</a>».
      </p>
      <p class="para">
       Каждый флаг управляет доступом к набору функций, как описано ниже:
       <table class="doctable informaltable">
        
         <thead>
          <tr>
           <th>Константа</th>
           <th>Функции</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td><strong><code>PHP_OUTPUT_HANDLER_CLEANABLE</code></strong></td>
           <td>
            <span class="function"><a href="function.ob-clean.php.html" class="function">ob_clean()</a></span>
           </td>
          </tr>

          <tr>
           <td><strong><code>PHP_OUTPUT_HANDLER_FLUSHABLE</code></strong></td>
           <td>
            <span class="function"><a href="function.ob-end-flush.php.html" class="function">ob_end_flush()</a></span>
           </td>
          </tr>

          <tr>
           <td><strong><code>PHP_OUTPUT_HANDLER_REMOVABLE</code></strong></td>
           <td>
            <span class="function"><a href="function.ob-end-clean.php.html" class="function">ob_end_clean()</a></span>,
            <span class="function"><a href="function.ob-end-flush.php.html" class="function">ob_end_flush()</a></span>,
            <span class="function"><a href="function.ob-get-clean.php.html" class="function">ob_get_clean()</a></span>,
            <span class="function"><a href="function.ob-get-flush.php.html" class="function">ob_get_flush()</a></span>
           </td>
          </tr>

         </tbody>
        
       </table>

      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.ob-start-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает <strong><code>true</code></strong> в случае успешного выполнения или <strong><code>false</code></strong> в случае возникновения ошибки.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.ob-start-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="example-1642">
    <p><strong>Пример #1 Пример callback-функции, определённой пользователем</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function </span><span style="color: #0000BB">callback</span><span style="color: #007700">(</span><span style="color: #0000BB">$buffer</span><span style="color: #007700">)<br />{<br />  </span><span style="color: #FF8000">// Заменить все яблоки апельсинами<br />  </span><span style="color: #007700">return (</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"яблоки"</span><span style="color: #007700">, </span><span style="color: #DD0000">"апельсины"</span><span style="color: #007700">, </span><span style="color: #0000BB">$buffer</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">ob_start</span><span style="color: #007700">(</span><span style="color: #DD0000">"callback"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;<br /></span>&lt;html&gt;<br />&lt;body&gt;<br />&lt;p&gt;Это всё равно, что сравнить яблоки и апельсины.&lt;/p&gt;<br />&lt;/body&gt;<br />&lt;/html&gt;<br /><span style="color: #0000BB">&lt;?php<br /><br />ob_end_flush</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
&lt;html&gt;
&lt;body&gt;
&lt;p&gt;Это всё равно, что сравнить апельсины и апельсины.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div>
    </div>
   </div>
  </p>

  <p class="para">
   <div class="example" id="example-1645">
    <p><strong>Пример #2 Создание нестираемого буфера вывода</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br />ob_start</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">PHP_OUTPUT_HANDLER_STDFLAGS </span><span style="color: #007700">^ </span><span style="color: #0000BB">PHP_OUTPUT_HANDLER_REMOVABLE</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.ob-start-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.ob-get-contents.php.html" class="function" rel="rdfs-seeAlso">ob_get_contents()</a> - Возвращает содержимое буфера вывода</span></li>
    <li class="member"><span class="function"><a href="function.ob-end-clean.php.html" class="function" rel="rdfs-seeAlso">ob_end_clean()</a> - Очищает (стирает) содержимое активного буфера вывода и отключает его</span></li>
    <li class="member"><span class="function"><a href="function.ob-end-flush.php.html" class="function" rel="rdfs-seeAlso">ob_end_flush()</a> - Сбрасывает (отправляет) возвращаемое значение активного обработчика вывода
   и отключает активный буфер вывода</span></li>
    <li class="member"><span class="function"><a href="function.ob-implicit-flush.php.html" class="function" rel="rdfs-seeAlso">ob_implicit_flush()</a> - Включает/выключает неявный сброс</span></li>
    <li class="member"><span class="function"><a href="function.ob-gzhandler.php.html" class="function" rel="rdfs-seeAlso">ob_gzhandler()</a> - Сжимает буфер вывода в gzip, действуя как callback-функция &mdash; параметр функции ob_start</span></li>
    <li class="member"><span class="function"><a href="function.ob-iconv-handler.php.html" class="function" rel="rdfs-seeAlso">ob_iconv_handler()</a> - Преобразовывает символы из текущей кодировки в кодировку выходного буфера</span></li>
    <li class="member"><span class="function"><a href="function.mb-output-handler.php.html" class="function" rel="rdfs-seeAlso">mb_output_handler()</a> - Преобразовывает кодировку символов в буфере вывода, выступая в роли callback-функции</span></li>
    <li class="member"><span class="function"><a href="function.ob-tidyhandler.php.html" class="function" rel="rdfs-seeAlso">ob_tidyhandler()</a> - Функция обратного вызова ob_start для восстановление буфера</span></li>
   </ul>
  </p>
 </div>


</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.ob-start&amp;redirect=https://www.php.net/manual/ru/function.ob-start.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">39 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="50488">  <div class="votes">
    <div id="Vu50488">
    <a href="https://www.php.net/manual/vote-note.php?id=50488&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd50488">
    <a href="https://www.php.net/manual/vote-note.php?id=50488&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V50488" title="69% like this...">
    52
    </div>
  </div>
  <a href="function.ob-start.php.html#50488" class="name">
  <strong class="user"><em>Ray Paseur (Paseur ... ImagineDB.com)</em></strong></a><a class="genanchor" href="function.ob-start.php.html#50488"> &para;</a><div class="date" title="2005-03-01 01:50"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom50488">
<div class="phpcode"><code><span class="html">You can use PHP to generate a static HTML page.  Useful if you have a complex script that, for performance reasons, you do not want site visitors to run repeatedly on demand.  A "cron" job can execute the PHP script to create the HTML page.  For example:<br /><br /><span class="default">&lt;?php </span><span class="comment">// CREATE index.html<br />   </span><span class="default">ob_start</span><span class="keyword">();<br /></span><span class="comment">/* PERFORM COMLEX QUERY, ECHO RESULTS, ETC. */<br />   </span><span class="default">$page </span><span class="keyword">= </span><span class="default">ob_get_contents</span><span class="keyword">();<br />   </span><span class="default">ob_end_clean</span><span class="keyword">();<br />   </span><span class="default">$cwd </span><span class="keyword">= </span><span class="default">getcwd</span><span class="keyword">();<br />   </span><span class="default">$file </span><span class="keyword">= </span><span class="string">"</span><span class="default">$cwd</span><span class="string">" </span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">. </span><span class="string">"index.html"</span><span class="keyword">;<br />   @</span><span class="default">chmod</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,</span><span class="default">0755</span><span class="keyword">);<br />   </span><span class="default">$fw </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="string">"w"</span><span class="keyword">);<br />   </span><span class="default">fputs</span><span class="keyword">(</span><span class="default">$fw</span><span class="keyword">,</span><span class="default">$page</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$page</span><span class="keyword">));<br />   </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fw</span><span class="keyword">);<br />   die();<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="37648">  <div class="votes">
    <div id="Vu37648">
    <a href="https://www.php.net/manual/vote-note.php?id=37648&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd37648">
    <a href="https://www.php.net/manual/vote-note.php?id=37648&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V37648" title="83% like this...">
    28
    </div>
  </div>
  <a href="function.ob-start.php.html#37648" class="name">
  <strong class="user"><em>ed.oohay (a) suamhcs_rodnan</em></strong></a><a class="genanchor" href="function.ob-start.php.html#37648"> &para;</a><div class="date" title="2003-11-21 05:18"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom37648">
<div class="phpcode"><code><span class="html">Output Buffering even works in nested scopes or might be applied in recursive structures... thought this might save someone a little time guessing and testing :)<br /><br />&lt;pre&gt;<span class="default">&lt;?php<br />    <br />    ob_start</span><span class="keyword">();              </span><span class="comment">// start output buffer 1<br />    </span><span class="keyword">echo </span><span class="string">"a"</span><span class="keyword">;                </span><span class="comment">// fill ob1<br />        <br />        </span><span class="default">ob_start</span><span class="keyword">();              </span><span class="comment">// start output buffer 2<br />        </span><span class="keyword">echo </span><span class="string">"b"</span><span class="keyword">;                </span><span class="comment">// fill ob2<br />        </span><span class="default">$s1 </span><span class="keyword">= </span><span class="default">ob_get_contents</span><span class="keyword">(); </span><span class="comment">// read ob2 ("b")<br />        </span><span class="default">ob_end_flush</span><span class="keyword">();          </span><span class="comment">// flush ob2 to ob1<br />        <br />    </span><span class="keyword">echo </span><span class="string">"c"</span><span class="keyword">;                </span><span class="comment">// continue filling ob1<br />    </span><span class="default">$s2 </span><span class="keyword">= </span><span class="default">ob_get_contents</span><span class="keyword">(); </span><span class="comment">// read ob1 ("a" . "b" . "c")<br />    </span><span class="default">ob_end_flush</span><span class="keyword">();          </span><span class="comment">// flush ob1 to browser<br />    <br />    // echoes "b" followed by "abc", as supposed to:<br />    </span><span class="keyword">echo </span><span class="string">"&lt;HR&gt;</span><span class="default">$s1</span><span class="string">&lt;HR&gt;</span><span class="default">$s2</span><span class="string">&lt;HR&gt;"</span><span class="keyword">;<br />    <br /></span><span class="default">?&gt;</span>&lt;/pre&gt;<br /><br />... at least works on Apache 1.3.28<br /><br />Nandor =)</span></code></div>
  </div>
 </div>
  <div class="note" id="66823">  <div class="votes">
    <div id="Vu66823">
    <a href="https://www.php.net/manual/vote-note.php?id=66823&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd66823">
    <a href="https://www.php.net/manual/vote-note.php?id=66823&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V66823" title="82% like this...">
    11
    </div>
  </div>
  <a href="function.ob-start.php.html#66823" class="name">
  <strong class="user"><em>net_navard at yahoo dot com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#66823"> &para;</a><div class="date" title="2006-05-30 07:09"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom66823">
<div class="phpcode"><code><span class="html">Hello firends<br /><br />ob_start() opens a buffer in which all output is stored. So every time you do an echo, the output of that is added to the buffer. When the script finishes running, or you call ob_flush(), that stored output is sent to the browser (and gzipped first if you use ob_gzhandler, which means it downloads faster). <br /><br />The most common reason to use ob_start is as a way to collect data that would otherwise be sent to the browser.<br /><br />These are two usages of ob_start():<br /><br />1-Well, you have more control over the output. Trivial example: say you want to show the user an error message, but the script has already sent some HTML to the browser. It'll look ugly, with a half-rendered page and then an error message. Using the output buffering functions, you can simply delete the buffer and sebuffer and send only the error message, which means it looks all nice and neat buffer and send <br />2-The reason output buffering was invented was to create a seamless transfer, from: php engine -&gt; apache -&gt; operating system -&gt; web user<br /><br />If you make sure each of those use the same buffer size, the system will use less writes, use less system resources and be able to handle more traffic. <br /><br />With Regards, Hossein</span></code></div>
  </div>
 </div>
  <div class="note" id="40643">  <div class="votes">
    <div id="Vu40643">
    <a href="https://www.php.net/manual/vote-note.php?id=40643&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd40643">
    <a href="https://www.php.net/manual/vote-note.php?id=40643&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V40643" title="65% like this...">
    18
    </div>
  </div>
  <a href="function.ob-start.php.html#40643" class="name">
  <strong class="user"><em>mjr</em></strong></a><a class="genanchor" href="function.ob-start.php.html#40643"> &para;</a><div class="date" title="2004-03-10 09:10"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom40643">
<div class="phpcode"><code><span class="html">If you're using object-orientated code in PHP you may, like me, want to use a call-back function that is inside an object (i.e. a class function). In this case you send ob_start a two-element array as its single argument. The first element is the name of the object (without the $ at the start), and the second is the function to call. So to use a function 'indent' in an object called '$template' you would use <span class="default">&lt;?php ob_start</span><span class="keyword">(array(</span><span class="string">'template'</span><span class="keyword">, </span><span class="string">'indent'</span><span class="keyword">)); </span><span class="default">?&gt;</span>.</span></code></div>
  </div>
 </div>
  <div class="note" id="119938">  <div class="votes">
    <div id="Vu119938">
    <a href="https://www.php.net/manual/vote-note.php?id=119938&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd119938">
    <a href="https://www.php.net/manual/vote-note.php?id=119938&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V119938" title="75% like this...">
    2
    </div>
  </div>
  <a href="function.ob-start.php.html#119938" class="name">
  <strong class="user"><em>mbutscher at gmx dot de</em></strong></a><a class="genanchor" href="function.ob-start.php.html#119938"> &para;</a><div class="date" title="2016-09-24 12:52"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom119938">
<div class="phpcode"><code><span class="html">In case of an error the contents of the output buffer are shown along with the error message. If it is really important that this does never happen, you can do the following (but this also eats up the error message):<br /><br /><span class="default">&lt;?php<br />$outputbufferOutput </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br /><br />function </span><span class="default">switchableOutputHandler</span><span class="keyword">(</span><span class="default">$buffer</span><span class="keyword">) {<br />    global </span><span class="default">$outputbufferOutput</span><span class="keyword">;<br /><br />    if (</span><span class="default">$outputbufferOutput</span><span class="keyword">)<br />        return </span><span class="default">$buffer</span><span class="keyword">;<br />    else<br />        return </span><span class="string">""</span><span class="keyword">;<br />}<br /><br />function </span><span class="default">internob_start</span><span class="keyword">() {<br />    global </span><span class="default">$outputbufferOutput</span><span class="keyword">;<br /><br />    </span><span class="default">$outputbufferOutput </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />    return </span><span class="default">ob_start</span><span class="keyword">(</span><span class="string">"switchableOutputHandler"</span><span class="keyword">);<br />}<br /><br />function </span><span class="default">internob_get_clean</span><span class="keyword">() {<br />    global </span><span class="default">$outputbufferOutput</span><span class="keyword">;<br />    <br />    </span><span class="default">$outputbufferOutput </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">;<br />    </span><span class="default">$result </span><span class="keyword">= </span><span class="default">ob_get_clean</span><span class="keyword">();<br />    </span><span class="default">$outputbufferOutput </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />    return </span><span class="default">$result</span><span class="keyword">;<br />}<br /><br /></span><span class="default">?&gt;<br /></span><br />You can then use internob_start() and internob_get_clean() instead of ob_start() and ob_get_clean(). Other functions can be replaced accordingly.</span></code></div>
  </div>
 </div>
  <div class="note" id="108853">  <div class="votes">
    <div id="Vu108853">
    <a href="https://www.php.net/manual/vote-note.php?id=108853&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd108853">
    <a href="https://www.php.net/manual/vote-note.php?id=108853&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V108853" title="67% like this...">
    11
    </div>
  </div>
  <a href="function.ob-start.php.html#108853" class="name">
  <strong class="user"><em>mchojrin at gmail dot com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#108853"> &para;</a><div class="date" title="2012-05-30 02:23"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom108853">
<div class="phpcode"><code><span class="html">Just a word of warning to those like myself who are upgrading from 5.3. I have a piece of code that used to work:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">if ( !</span><span class="default">ob_start</span><span class="keyword">( !</span><span class="default">DEBUGMODE </span><span class="keyword">? </span><span class="string">'ob_gzhandler' </span><span class="keyword">: </span><span class="string">'' </span><span class="keyword">) ) {<br />    </span><span class="default">ob_start</span><span class="keyword">();<br />}<br /></span><span class="default">?&gt;<br /></span><br />Which is not working anymore (I get an error like: Warning: ob_start(): function '' not found or invalid function name).<br /><br />It's easily fixed though, just changed the '' to a null, like this:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">if ( !</span><span class="default">ob_start</span><span class="keyword">( !</span><span class="default">DEBUGMODE </span><span class="keyword">? </span><span class="string">'ob_gzhandler' </span><span class="keyword">: </span><span class="default">null </span><span class="keyword">) ) {<br />    </span><span class="default">ob_start</span><span class="keyword">();<br />}        <br /></span><span class="default">?&gt;<br /></span><br />Which preserves the code intention but works :)</span></code></div>
  </div>
 </div>
  <div class="note" id="77223">  <div class="votes">
    <div id="Vu77223">
    <a href="https://www.php.net/manual/vote-note.php?id=77223&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd77223">
    <a href="https://www.php.net/manual/vote-note.php?id=77223&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V77223" title="66% like this...">
    6
    </div>
  </div>
  <a href="function.ob-start.php.html#77223" class="name">
  <strong class="user"><em>Asher Haig (ahaig at ridiculouspower dot com)</em></strong></a><a class="genanchor" href="function.ob-start.php.html#77223"> &para;</a><div class="date" title="2007-08-20 01:17"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom77223">
<div class="phpcode"><code><span class="html">When a script ends, all buffered output is flushed (this is not a bug: <a href="http://bugs.php.net/bug.php?id=42334&amp;thanks=4" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=42334&amp;thanks=4</a>). What happens when the script throws an error (and thus ends) in the middle of an output buffer? The script spits out everything in the buffer before printing the error!<br /><br />Here is the simplest solution I have been able to find. Put it at the beginning of the error handling function to clear all buffered data and print only the error:<br /><br />$handlers = ob_list_handlers();<br />while ( ! empty($handlers) )    {<br />    ob_end_clean();<br />    $handlers = ob_list_handlers();<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="112464">  <div class="votes">
    <div id="Vu112464">
    <a href="https://www.php.net/manual/vote-note.php?id=112464&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd112464">
    <a href="https://www.php.net/manual/vote-note.php?id=112464&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V112464" title="66% like this...">
    3
    </div>
  </div>
  <a href="function.ob-start.php.html#112464" class="name">
  <strong class="user"><em>jhlavon</em></strong></a><a class="genanchor" href="function.ob-start.php.html#112464"> &para;</a><div class="date" title="2013-06-19 12:47"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom112464">
<div class="phpcode"><code><span class="html">When used in constructor part of class it have to be prefixed by "self::" or by classname, else PHP fails to create buffer.<br /><br />function __construct ()<br />{<br /><br />$bo = ob_start ("self::callback_ob") ;<br />...<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="47370">  <div class="votes">
    <div id="Vu47370">
    <a href="https://www.php.net/manual/vote-note.php?id=47370&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd47370">
    <a href="https://www.php.net/manual/vote-note.php?id=47370&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V47370" title="66% like this...">
    1
    </div>
  </div>
  <a href="function.ob-start.php.html#47370" class="name">
  <strong class="user"><em>aaron at offtone.com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#47370"> &para;</a><div class="date" title="2004-11-13 05:19"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom47370">
<div class="phpcode"><code><span class="html">My callback is stored in a function class, and using ob_start ('Class::callback') wasn't working. Not wanting to instantiate the class (no need, it's a function class) I tried this and it worked a charm:<br /><br />ob_start (array (Class, 'callback'));<br /><br />PHP 4.3.4</span></code></div>
  </div>
 </div>
  <div class="note" id="101082">  <div class="votes">
    <div id="Vu101082">
    <a href="https://www.php.net/manual/vote-note.php?id=101082&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd101082">
    <a href="https://www.php.net/manual/vote-note.php?id=101082&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V101082" title="60% like this...">
    7
    </div>
  </div>
  <a href="function.ob-start.php.html#101082" class="name">
  <strong class="user"><em>Chris</em></strong></a><a class="genanchor" href="function.ob-start.php.html#101082"> &para;</a><div class="date" title="2010-11-24 04:35"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom101082">
<div class="phpcode"><code><span class="html">Careful with while using functions that change headers of a page; that change will not be undone when ending output buffering.<br /><br />If you for instance have a class that generates an image and sets the appropriate headers, they will still be in place after the end of ob.<br /><br />For instance:<br /><span class="default">&lt;?php<br />  ob_start</span><span class="keyword">();<br />  </span><span class="default">myClass</span><span class="keyword">::</span><span class="default">renderPng</span><span class="keyword">(); </span><span class="comment">//header("Content-Type: image/png"); in here<br />  </span><span class="default">$pngString </span><span class="keyword">= </span><span class="default">ob_get_contents</span><span class="keyword">();<br />  </span><span class="default">ob_end_clean</span><span class="keyword">();<br /></span><span class="default">?&gt;<br /></span><br />will put the image bytes into $pngString, and set the content type to image/png. Though the image will not be sent to the client, the png header is still in place; if you do html output here, the browser will most likely display "image error, cannot be viewed", at least firefox does.<br /><br />You need to set the correct image type (text/html) manually in this case.</span></code></div>
  </div>
 </div>
  <div class="note" id="40861">  <div class="votes">
    <div id="Vu40861">
    <a href="https://www.php.net/manual/vote-note.php?id=40861&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd40861">
    <a href="https://www.php.net/manual/vote-note.php?id=40861&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V40861" title="62% like this...">
    2
    </div>
  </div>
  <a href="function.ob-start.php.html#40861" class="name">
  <strong class="user"><em>jkloss at hotmail dot com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#40861"> &para;</a><div class="date" title="2004-03-17 07:20"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom40861">
<div class="phpcode"><code><span class="html">If ob_start does not seem to be working for you, note that with Apache 2 the flush() function causes PHP to send headers regardless of whether ob_start had been called before flush.<br /><br />ob_start();<br />echo 'test';<br />flush();<br /><br />will cause Apache 2 to send whatever headers may be stacked up - which means you can't use a header(location:xxx) after the flush.  To fix, remove the flush().  Spent several hours discovering this.  Apache 1.x didn't work this way.</span></code></div>
  </div>
 </div>
  <div class="note" id="60483">  <div class="votes">
    <div id="Vu60483">
    <a href="https://www.php.net/manual/vote-note.php?id=60483&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd60483">
    <a href="https://www.php.net/manual/vote-note.php?id=60483&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V60483" title="58% like this...">
    2
    </div>
  </div>
  <a href="function.ob-start.php.html#60483" class="name">
  <strong class="user"><em>ernest at vogelsinger dot at</em></strong></a><a class="genanchor" href="function.ob-start.php.html#60483"> &para;</a><div class="date" title="2006-01-08 09:57"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom60483">
<div class="phpcode"><code><span class="html">When you rely on URL rewriting to pass the PHP session ID you should be careful with ob_get_contents(), as this might disable URL rewriting completely.<br /><br />Example:<br />ob_start();<br />session_start();<br />echo '&lt;a href="."&gt;self link&lt;/a&gt;';<br />$data = ob_get_contents();<br />ob_end_clean();<br />echo $data;<br /><br />In the example above, URL rewriting will never occur. In fact, rewriting would occur if you ended the buffering envelope using ob_end_flush(). It seems to me that rewriting occurs in the very same buffering envelope where the session gets started, not at the final output stage.<br /><br />If you need a scenario like the one above, using an "inner envelope" will help:<br /><br />ob_start();<br />ob_start();   // add the inner buffering envelope<br />session_start();<br />echo '&lt;a href="."&gt;self link&lt;/a&gt;';<br />ob_end_flush(); // closing the inner envelope will activate URL rewriting<br />$data = ob_get_contents();<br />ob_end_clean();<br />echo $data;<br /><br />In case you're interested or believe like me that this is rather a design flaw instead of a feature, please visit bug #35933 (<a href="http://bugs.php.net/bug.php?id=35933" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=35933</a>) and comment on it.</span></code></div>
  </div>
 </div>
  <div class="note" id="71298">  <div class="votes">
    <div id="Vu71298">
    <a href="https://www.php.net/manual/vote-note.php?id=71298&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd71298">
    <a href="https://www.php.net/manual/vote-note.php?id=71298&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V71298" title="55% like this...">
    3
    </div>
  </div>
  <a href="function.ob-start.php.html#71298" class="name">
  <strong class="user"><em>lucky760 at yahoo dot com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#71298"> &para;</a><div class="date" title="2006-11-21 09:10"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom71298">
<div class="phpcode"><code><span class="html">In extension to the compress() function posted below, here's a nifty little class that improves the idea a bit. Basically, running that compress() function for all your CSS for every single page load is clearly far less than optimal, especially since the styles will change only infrequently at the very worst. <br /><br />With this class you can simply specify an array of your CSS file names and call dump_style(). The contents of each file are saved in compress()'d form in a cache file that is only recreated when the corresponding source CSS changes.<br /><br />It's intended for PHP5, but will work identically if you just un-OOP everything and possibly define file_put_contents. <br /><br />Enjoy!<br /><br /><span class="default">&lt;?php<br /><br />$CSS_FILES </span><span class="keyword">= array(<br />  </span><span class="string">'_general.css'<br /></span><span class="keyword">);<br /><br /></span><span class="default">$css_cache </span><span class="keyword">= new </span><span class="default">CSSCache</span><span class="keyword">(</span><span class="default">$CSS_FILES</span><span class="keyword">);<br /></span><span class="default">$css_cache</span><span class="keyword">-&gt;</span><span class="default">dump_style</span><span class="keyword">();<br /><br /></span><span class="comment">//<br />// class CSSCache<br />//<br /><br /></span><span class="keyword">class </span><span class="default">CSSCache </span><span class="keyword">{<br />  private </span><span class="default">$filenames </span><span class="keyword">= array();<br />  private </span><span class="default">$cwd</span><span class="keyword">;<br />    <br />  public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$i_filename_arr</span><span class="keyword">) {<br />    if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$i_filename_arr</span><span class="keyword">))<br />      </span><span class="default">$i_filename_arr </span><span class="keyword">= array(</span><span class="default">$i_filename_arr</span><span class="keyword">);<br />    <br />    </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">filenames </span><span class="keyword">= </span><span class="default">$i_filename_arr</span><span class="keyword">;<br />    </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cwd </span><span class="keyword">= </span><span class="default">getcwd</span><span class="keyword">() . </span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">;<br />    <br />    if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">style_changed</span><span class="keyword">())<br />      </span><span class="default">$expire </span><span class="keyword">= -</span><span class="default">72000</span><span class="keyword">;<br />    else<br />      </span><span class="default">$expire </span><span class="keyword">= </span><span class="default">3200</span><span class="keyword">;<br />    <br />    </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-Type: text/css; charset: UTF-8'</span><span class="keyword">);<br />    </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Cache-Control: must-revalidate'</span><span class="keyword">);<br />    </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Expires: ' </span><span class="keyword">. </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'D, d M Y H:i:s'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">() + </span><span class="default">$expire</span><span class="keyword">) . </span><span class="string">' GMT'</span><span class="keyword">);<br />  }<br />  <br />  public function </span><span class="default">dump_style</span><span class="keyword">() {<br />    </span><span class="default">ob_start</span><span class="keyword">(</span><span class="string">'ob_gzhandler'</span><span class="keyword">);<br />    <br />    foreach (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">filenames </span><span class="keyword">as </span><span class="default">$filename</span><span class="keyword">)<br />      </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dump_cache_contents</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">);<br />    <br />    </span><span class="default">ob_end_flush</span><span class="keyword">();<br />  }<br />  <br />    private function </span><span class="default">get_cache_name</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">$wildcard </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">) {<br />    </span><span class="default">$stat </span><span class="keyword">= </span><span class="default">stat</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">);<br />    return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cwd </span><span class="keyword">. </span><span class="string">'.' </span><span class="keyword">. </span><span class="default">$filename </span><span class="keyword">. </span><span class="string">'.' </span><span class="keyword">. <br />      (</span><span class="default">$wildcard </span><span class="keyword">? </span><span class="string">'*' </span><span class="keyword">: (</span><span class="default">$stat</span><span class="keyword">[</span><span class="string">'size'</span><span class="keyword">] . </span><span class="string">'-' </span><span class="keyword">. </span><span class="default">$stat</span><span class="keyword">[</span><span class="string">'mtime'</span><span class="keyword">])) . </span><span class="string">'.cache'</span><span class="keyword">;<br />  }<br />  <br />  private function </span><span class="default">style_changed</span><span class="keyword">() {<br />    foreach (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">filenames </span><span class="keyword">as </span><span class="default">$filename</span><span class="keyword">)<br />      if (!</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">get_cache_name</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)))<br />        return </span><span class="default">TRUE</span><span class="keyword">;<br />    return </span><span class="default">FALSE</span><span class="keyword">;<br />  }<br /><br />  private function </span><span class="default">compress</span><span class="keyword">(</span><span class="default">$buffer</span><span class="keyword">) {<br />    </span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'!/\*[^*]*\*+([^/][^*]*\*+)*/!'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$buffer</span><span class="keyword">);<br />    </span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">"\r\n"</span><span class="keyword">, </span><span class="string">"\r"</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">, </span><span class="string">"\t"</span><span class="keyword">, </span><span class="string">'  '</span><span class="keyword">), </span><span class="string">''</span><span class="keyword">, </span><span class="default">$buffer</span><span class="keyword">);<br />    </span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'{ '</span><span class="keyword">, </span><span class="string">'{'</span><span class="keyword">, </span><span class="default">$buffer</span><span class="keyword">);<br />    </span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' }'</span><span class="keyword">, </span><span class="string">'}'</span><span class="keyword">, </span><span class="default">$buffer</span><span class="keyword">);<br />    </span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'; '</span><span class="keyword">, </span><span class="string">';'</span><span class="keyword">, </span><span class="default">$buffer</span><span class="keyword">);<br />    </span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">', '</span><span class="keyword">, </span><span class="string">','</span><span class="keyword">, </span><span class="default">$buffer</span><span class="keyword">);<br />    </span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' {'</span><span class="keyword">, </span><span class="string">'{'</span><span class="keyword">, </span><span class="default">$buffer</span><span class="keyword">);<br />    </span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'} '</span><span class="keyword">, </span><span class="string">'}'</span><span class="keyword">, </span><span class="default">$buffer</span><span class="keyword">);<br />    </span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">': '</span><span class="keyword">, </span><span class="string">':'</span><span class="keyword">, </span><span class="default">$buffer</span><span class="keyword">);<br />    </span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' ,'</span><span class="keyword">, </span><span class="string">','</span><span class="keyword">, </span><span class="default">$buffer</span><span class="keyword">);<br />    </span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' ;'</span><span class="keyword">, </span><span class="string">';'</span><span class="keyword">, </span><span class="default">$buffer</span><span class="keyword">);<br />    return </span><span class="default">$buffer</span><span class="keyword">;<br />  }<br />  <br />  private function </span><span class="default">dump_cache_contents</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">) {<br />    </span><span class="default">$current_cache </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">get_cache_name</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">);<br />    <br />    </span><span class="comment">// the cache exists - just dump it<br />    </span><span class="keyword">if (</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$current_cache</span><span class="keyword">)) {<br />      include(</span><span class="default">$current_cache</span><span class="keyword">);<br />      return;<br />    }<br />    <br />    </span><span class="comment">// remove any old, lingering caches for this file<br />    </span><span class="keyword">if (</span><span class="default">$dead_files </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">get_cache_name</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">), </span><span class="default">GLOB_NOESCAPE</span><span class="keyword">))<br />      foreach (</span><span class="default">$dead_files </span><span class="keyword">as </span><span class="default">$dead_file</span><span class="keyword">)<br />        </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$dead_file</span><span class="keyword">);<br />    <br />    </span><span class="default">$compressed </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">compress</span><span class="keyword">(</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">));<br />    </span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="default">$current_cache</span><span class="keyword">, </span><span class="default">$compressed</span><span class="keyword">);<br />    <br />    echo </span><span class="default">$compressed</span><span class="keyword">;<br />  }<br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="108016">  <div class="votes">
    <div id="Vu108016">
    <a href="https://www.php.net/manual/vote-note.php?id=108016&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd108016">
    <a href="https://www.php.net/manual/vote-note.php?id=108016&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V108016" title="55% like this...">
    1
    </div>
  </div>
  <a href="function.ob-start.php.html#108016" class="name">
  <strong class="user"><em>Filip Dalge</em></strong></a><a class="genanchor" href="function.ob-start.php.html#108016"> &para;</a><div class="date" title="2012-03-22 12:24"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom108016">
<div class="phpcode"><code><span class="html">When a fatal error is thrown, PHP will output the current buffer of Output-Control without postprocessing before printing the error message. If you are working with several output control levels, this might not result in the desired behavior.<br /><br />You can use an output callback handler to handle this and discard the output.<br /><br />Therefore, use ob_start("ob_error_handler") in connection with the following:<br /><br />function ob_error_handler($str) {<br />    $error = error_get_last();<br />    if ($error &amp;&amp; $error["type"] == E_USER_ERROR || $error["type"] == E_ERROR) {<br />        return ini_get("error_prepend_string").<br />          "\nFatal error: $error[message] in $error[file] on line $error[line]\n".<br />          ini_get("error_append_string");<br />    }<br />    return $str;<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="93633">  <div class="votes">
    <div id="Vu93633">
    <a href="https://www.php.net/manual/vote-note.php?id=93633&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd93633">
    <a href="https://www.php.net/manual/vote-note.php?id=93633&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V93633" title="54% like this...">
    1
    </div>
  </div>
  <a href="function.ob-start.php.html#93633" class="name">
  <strong class="user"><em>clancy hood at gmail dot com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#93633"> &para;</a><div class="date" title="2009-09-19 05:31"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom93633">
<div class="phpcode"><code><span class="html">With ob callback: note that the second parameter sent to your method won't help you differentiate between flush calls and calls to ob_clean, but the buffer contents is sent in both cases, so you end up parsing data that isn't going to be used. Also, note that the constant PHP_OUTPUT_HANDLER_START is never actually sent, rather the integer "3" turns up on first flush:<br /><span class="default">&lt;?php<br /><br />    </span><span class="keyword">function </span><span class="default">ob_handler</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$flag</span><span class="keyword">){<br />        static </span><span class="default">$input </span><span class="keyword">= array();<br />        </span><span class="default">$done </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />        switch(</span><span class="default">$flag</span><span class="keyword">){<br />            case </span><span class="default">PHP_OUTPUT_HANDLER_START</span><span class="keyword">:    <br />                </span><span class="default">$flag_sent </span><span class="keyword">= </span><span class="string">"PHP_OUTPUT_HANDLER_START (</span><span class="default">$flag</span><span class="string">)"</span><span class="keyword">;<br />                break;  <br />            case </span><span class="default">PHP_OUTPUT_HANDLER_CONT</span><span class="keyword">:<br />                </span><span class="default">$flag_sent </span><span class="keyword">= </span><span class="string">"PHP_OUTPUT_HANDLER_CONT (</span><span class="default">$flag</span><span class="string">)"</span><span class="keyword">;<br />                break;<br />            case </span><span class="default">PHP_OUTPUT_HANDLER_END</span><span class="keyword">:<br />                </span><span class="default">$done </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">; <br />                </span><span class="default">$flag_sent </span><span class="keyword">= </span><span class="string">"PHP_OUTPUT_HANDLER_END (</span><span class="default">$flag</span><span class="string">)"</span><span class="keyword">;<br />                break; <br />            default:<br />                </span><span class="default">$flag_sent </span><span class="keyword">= </span><span class="string">"Flag is not a constant (</span><span class="default">$flag</span><span class="string">)"</span><span class="keyword">;<br />        }<br />        </span><span class="default">$input</span><span class="keyword">[] = </span><span class="string">"</span><span class="default">$flag_sent</span><span class="string">: </span><span class="default">$string</span><span class="string">&lt;br /&gt;"</span><span class="keyword">;<br />        </span><span class="default">$output </span><span class="keyword">= </span><span class="string">"</span><span class="default">$string</span><span class="string">&lt;br /&gt;"</span><span class="keyword">; <br />        if(!</span><span class="default">$done</span><span class="keyword">) return </span><span class="default">$output</span><span class="keyword">;<br />        </span><span class="comment">// print_r($input, 1) causes an error and var_export just doesn't work<br />        </span><span class="default">$output </span><span class="keyword">.= </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />        foreach(</span><span class="default">$input </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) </span><span class="default">$output </span><span class="keyword">.= </span><span class="string">"</span><span class="default">$k</span><span class="string">: </span><span class="default">$v</span><span class="string">"</span><span class="keyword">;<br />        return </span><span class="default">$output</span><span class="keyword">;<br />    }<br /><br />    </span><span class="default">ob_start</span><span class="keyword">(</span><span class="string">'ob_handler'</span><span class="keyword">);<br /><br />    echo </span><span class="string">'flush'</span><span class="keyword">;<br />    </span><span class="default">ob_flush</span><span class="keyword">();<br /><br />    echo </span><span class="string">'flush 2'</span><span class="keyword">;<br />    </span><span class="default">ob_flush</span><span class="keyword">();<br /><br />    echo </span><span class="string">'clean'</span><span class="keyword">;<br />    </span><span class="default">ob_clean</span><span class="keyword">();<br /><br />    echo </span><span class="string">'flush 3'</span><span class="keyword">;<br />    </span><span class="default">ob_flush</span><span class="keyword">();<br /><br />    echo </span><span class="string">'end flush'</span><span class="keyword">;<br />    </span><span class="default">ob_end_flush</span><span class="keyword">();<br /></span><span class="default">?&gt;<br /></span> <br />flush<br />flush 2<br />flush 3<br />end flush<br /><br />0: Flag is not a constant (3): flush<br />1: PHP_OUTPUT_HANDLER_CONT (2): flush 2<br />2: PHP_OUTPUT_HANDLER_CONT (2): clean<br />3: PHP_OUTPUT_HANDLER_CONT (2): flush 3<br />4: PHP_OUTPUT_HANDLER_END (4): end flush<br /><br />I suppose the START flag problem *may* be a bug but I'm not able to upgrade before reporting since I must have the same version as my server (I'm on PHP 5.2.6). If anyone has 5.2.11 or other stable version feel free to test/report as you see fit.</span></code></div>
  </div>
 </div>
  <div class="note" id="74205">  <div class="votes">
    <div id="Vu74205">
    <a href="https://www.php.net/manual/vote-note.php?id=74205&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd74205">
    <a href="https://www.php.net/manual/vote-note.php?id=74205&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V74205" title="54% like this...">
    1
    </div>
  </div>
  <a href="function.ob-start.php.html#74205" class="name">
  <strong class="user"><em>tracey AT archive DOT org</em></strong></a><a class="genanchor" href="function.ob-start.php.html#74205"> &para;</a><div class="date" title="2007-03-29 01:01"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom74205">
<div class="phpcode"><code><span class="html">Way to make all stdout and stderr write to a log<br />from *inside* a php script.<br />You simply need to make sure to call elog() every<br />once in awhile to get output.<br />It's a nice way to "daemonize" a script w.r.t. its logging.<br /><br />// This allows us to capture all stdout and stderr (and error_log() calls)<br />// to this logfile...<br />// The "collected output" will be flushed anytime "elog()" is used...<br />ini_set("error_log", "/var/log/script.log");<br />ob_start();<br /><br />function elog($str)<br />{<br />  // get anything written to stdout or stderr that did *NOT* use elog()<br />  // and write it now...<br />  $writeme = ob_get_contents();<br />  if ($writeme)<br />  {<br />    error_log($writeme);<br />    ob_end_clean();<br />    ob_start();<br />  }<br />  // now write message this method was called with<br />  error_log($str);<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="84102">  <div class="votes">
    <div id="Vu84102">
    <a href="https://www.php.net/manual/vote-note.php?id=84102&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd84102">
    <a href="https://www.php.net/manual/vote-note.php?id=84102&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V84102" title="53% like this...">
    1
    </div>
  </div>
  <a href="function.ob-start.php.html#84102" class="name">
  <strong class="user"><em>fordiman at gmail dot com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#84102"> &para;</a><div class="date" title="2008-06-27 09:35"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom84102">
<div class="phpcode"><code><span class="html">Here's a nifty function I use daily.  Essentially: include a PHP file - but render its output to a variable, rather than to the buffer.  It's also set up to load the script with a variable set, and automagically loads globals into the script's namespace, making it an effective templating scheme.  It also has error handling, so that you're not flying blind when using output buffering.<br /><br /><span class="default">&lt;?php<br />$GLOBALS</span><span class="keyword">[</span><span class="string">'BufferedErrors'</span><span class="keyword">]=Array();<br />function </span><span class="default">errorParse</span><span class="keyword">(</span><span class="default">$errno</span><span class="keyword">, </span><span class="default">$errstr</span><span class="keyword">, </span><span class="default">$errfile</span><span class="keyword">, </span><span class="default">$errline</span><span class="keyword">, </span><span class="default">$errcontext</span><span class="keyword">) {<br />    </span><span class="default">$errorTypes </span><span class="keyword">= Array(<br />        </span><span class="default">E_ERROR </span><span class="keyword">=&gt; </span><span class="string">'Fatal Error'</span><span class="keyword">,<br />        </span><span class="default">E_WARNING </span><span class="keyword">=&gt; </span><span class="string">'Warning'</span><span class="keyword">,<br />        </span><span class="default">E_PARSE </span><span class="keyword">=&gt; </span><span class="string">'Parse Error'</span><span class="keyword">,<br />        </span><span class="default">E_NOTICE </span><span class="keyword">=&gt; </span><span class="string">'Notice'</span><span class="keyword">,<br />        </span><span class="default">E_CORE_ERROR </span><span class="keyword">=&gt; </span><span class="string">'Fatal Core Error'</span><span class="keyword">,<br />        </span><span class="default">E_CORE_WARNING </span><span class="keyword">=&gt; </span><span class="string">'Core Warning'</span><span class="keyword">,<br />        </span><span class="default">E_COMPILE_ERROR </span><span class="keyword">=&gt; </span><span class="string">'Compilation Error'</span><span class="keyword">,<br />        </span><span class="default">E_COMPILE_WARNING </span><span class="keyword">=&gt; </span><span class="string">'Compilation Warning'</span><span class="keyword">,<br />        </span><span class="default">E_USER_ERROR </span><span class="keyword">=&gt; </span><span class="string">'Triggered Error'</span><span class="keyword">,<br />        </span><span class="default">E_USER_WARNING </span><span class="keyword">=&gt; </span><span class="string">'Triggered Warning'</span><span class="keyword">,<br />        </span><span class="default">E_USER_NOTICE </span><span class="keyword">=&gt; </span><span class="string">'Triggered Notice'</span><span class="keyword">,<br />        </span><span class="default">E_STRICT </span><span class="keyword">=&gt; </span><span class="string">'Deprecation Notice'</span><span class="keyword">,<br />        </span><span class="default">E_RECOVERABLE_ERROR </span><span class="keyword">=&gt; </span><span class="string">'Catchable Fatal Error'<br />    </span><span class="keyword">);<br />    </span><span class="default">$ret</span><span class="keyword">=(object)Array(<br />        </span><span class="string">'number'</span><span class="keyword">=&gt;</span><span class="default">$errno</span><span class="keyword">,<br />        </span><span class="string">'message'</span><span class="keyword">=&gt;</span><span class="default">$errstr</span><span class="keyword">,<br />        </span><span class="string">'file'</span><span class="keyword">=&gt;</span><span class="default">$errfile</span><span class="keyword">,<br />        </span><span class="string">'line'</span><span class="keyword">=&gt;</span><span class="default">$errline</span><span class="keyword">,<br />        </span><span class="string">'context'</span><span class="keyword">=&gt;</span><span class="default">$errcontext</span><span class="keyword">,<br />        </span><span class="string">'type'</span><span class="keyword">=&gt;</span><span class="default">$errorTypes</span><span class="keyword">[</span><span class="default">$errno</span><span class="keyword">]<br />    );<br />    </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'BufferedErrors'</span><span class="keyword">][]=</span><span class="default">$ret</span><span class="keyword">;<br />    return </span><span class="default">false</span><span class="keyword">;<br />}<br />function </span><span class="default">parse</span><span class="keyword">(</span><span class="default">$fileToInclude</span><span class="keyword">, </span><span class="default">$argumentsToFile</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br />    </span><span class="default">$bufferedErrorStack </span><span class="keyword">= </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'BufferedErrors'</span><span class="keyword">];<br />    </span><span class="default">set_error_handler</span><span class="keyword">(</span><span class="string">'errorParse'</span><span class="keyword">, </span><span class="default">error_reporting</span><span class="keyword">());<br />    </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'BufferedErrors'</span><span class="keyword">]=Array();<br />    <br />    if (!</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$fileToInclude</span><span class="keyword">))<br />        return </span><span class="string">''</span><span class="keyword">;<br />    if (</span><span class="default">$argumentsToFile </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">)<br />        </span><span class="default">$argumentsToFile </span><span class="keyword">= Array();<br />    </span><span class="default">$argumentsToFile </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$GLOBALS</span><span class="keyword">, </span><span class="default">$argumentsToFile</span><span class="keyword">);<br />    foreach (</span><span class="default">$argumentsToFile </span><span class="keyword">as </span><span class="default">$variableName </span><span class="keyword">=&gt; </span><span class="default">$variableValue</span><span class="keyword">)<br />        $</span><span class="default">$variableName </span><span class="keyword">= </span><span class="default">$variableValue</span><span class="keyword">;<br />    </span><span class="default">ob_start</span><span class="keyword">();<br />    include(</span><span class="default">$fileToInclude</span><span class="keyword">);<br />    </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">ob_get_contents</span><span class="keyword">();<br />    </span><span class="default">ob_end_clean</span><span class="keyword">();<br />    <br />    </span><span class="default">restore_error_handler</span><span class="keyword">();<br />    </span><span class="default">$errors </span><span class="keyword">= </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'BufferedErrors'</span><span class="keyword">];<br />    </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'BufferedErrors'</span><span class="keyword">] = </span><span class="default">$bufferedErrorStack</span><span class="keyword">;<br />    if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$errors</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">) {<br />        </span><span class="default">$ret</span><span class="keyword">.=</span><span class="string">'&lt;ul class="error"&gt;'</span><span class="keyword">;<br />        foreach (</span><span class="default">$errors </span><span class="keyword">as </span><span class="default">$error</span><span class="keyword">)<br />            </span><span class="default">$ret</span><span class="keyword">.= <br />                </span><span class="string">'&lt;li&gt;'</span><span class="keyword">.<br />                    </span><span class="string">'&lt;b&gt;'</span><span class="keyword">.</span><span class="default">$error</span><span class="keyword">-&gt;</span><span class="default">type</span><span class="keyword">.</span><span class="string">'&lt;/b&gt;: '</span><span class="keyword">.<br />                    </span><span class="default">$error</span><span class="keyword">-&gt;</span><span class="default">message</span><span class="keyword">.<br />                    </span><span class="string">'&lt;blockquote&gt;'</span><span class="keyword">.<br />                        </span><span class="string">'&lt;i&gt;file&lt;/i&gt;: '</span><span class="keyword">.</span><span class="default">$error</span><span class="keyword">-&gt;</span><span class="default">file</span><span class="keyword">.</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">.<br />                        </span><span class="string">'&lt;i&gt;line&lt;/i&gt;: '</span><span class="keyword">.</span><span class="default">$error</span><span class="keyword">-&gt;</span><span class="default">line</span><span class="keyword">.<br />                    </span><span class="string">'&lt;/blockquote&gt;'</span><span class="keyword">.<br />                </span><span class="string">'&lt;/li&gt;'</span><span class="keyword">;<br />        </span><span class="default">$ret</span><span class="keyword">.=</span><span class="string">'&lt;/ul&gt;'</span><span class="keyword">;<br />    }<br />    return </span><span class="default">$ret</span><span class="keyword">;<br />}</span></span></code></div>
  </div>
 </div>
  <div class="note" id="78599">  <div class="votes">
    <div id="Vu78599">
    <a href="https://www.php.net/manual/vote-note.php?id=78599&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd78599">
    <a href="https://www.php.net/manual/vote-note.php?id=78599&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V78599" title="53% like this...">
    1
    </div>
  </div>
  <a href="function.ob-start.php.html#78599" class="name">
  <strong class="user"><em>Charlie Farrow</em></strong></a><a class="genanchor" href="function.ob-start.php.html#78599"> &para;</a><div class="date" title="2007-10-18 09:49"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom78599">
<div class="phpcode"><code><span class="html">Under certain freak conditions, when an error ocours perfoming an action on an object that cannot be done (either because the object does not exist or the method does not exist) inside of an ob_start() the script will exit and print everything the current function generates before the error, but nothing else, including no error message.<br /><br />I am at a loss to why no error message appears and am trying to get a working example for the developers that is simpler than my whole program!<br /><br />So if you are using ob_start() and you get no output, check your objects.... you have made a mistake on them somewhere. The only trouble is you will not know where as there is no error!!</span></code></div>
  </div>
 </div>
  <div class="note" id="94193">  <div class="votes">
    <div id="Vu94193">
    <a href="https://www.php.net/manual/vote-note.php?id=94193&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd94193">
    <a href="https://www.php.net/manual/vote-note.php?id=94193&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V94193" title="53% like this...">
    1
    </div>
  </div>
  <a href="function.ob-start.php.html#94193" class="name">
  <strong class="user"><em>Bitwise</em></strong></a><a class="genanchor" href="function.ob-start.php.html#94193"> &para;</a><div class="date" title="2009-10-21 12:41"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom94193">
<div class="phpcode"><code><span class="html">There is no start flag problem. One just has to notice that the second parameter is not a mode but consists of bitwise-OR'ed flags.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">ob_handler</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$flags</span><span class="keyword">) {<br />        static </span><span class="default">$input </span><span class="keyword">= array();<br />        if ( </span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">PHP_OUTPUT_HANDLER_START </span><span class="keyword">)<br />                </span><span class="default">$flags_sent</span><span class="keyword">[] = </span><span class="string">"PHP_OUTPUT_HANDLER_START"</span><span class="keyword">;<br />        if ( </span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">PHP_OUTPUT_HANDLER_CONT </span><span class="keyword">)<br />                </span><span class="default">$flags_sent</span><span class="keyword">[] = </span><span class="string">"PHP_OUTPUT_HANDLER_CONT"</span><span class="keyword">;<br />        if ( </span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">PHP_OUTPUT_HANDLER_END </span><span class="keyword">)<br />                </span><span class="default">$flags_sent</span><span class="keyword">[] = </span><span class="string">"PHP_OUTPUT_HANDLER_END"</span><span class="keyword">;<br />        </span><span class="default">$input</span><span class="keyword">[] = </span><span class="default">implode</span><span class="keyword">(</span><span class="string">' | '</span><span class="keyword">, </span><span class="default">$flags_sent</span><span class="keyword">) . </span><span class="string">" (</span><span class="default">$flags</span><span class="string">): </span><span class="default">$string</span><span class="string">&lt;br /&gt;"</span><span class="keyword">;<br />        </span><span class="default">$output  </span><span class="keyword">= </span><span class="string">"</span><span class="default">$string</span><span class="string">&lt;br /&gt;"</span><span class="keyword">;<br />        if ( </span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">PHP_OUTPUT_HANDLER_END </span><span class="keyword">) {<br />                </span><span class="default">$output </span><span class="keyword">.= </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />                foreach(</span><span class="default">$input </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) </span><span class="default">$output </span><span class="keyword">.= </span><span class="string">"</span><span class="default">$k</span><span class="string">: </span><span class="default">$v</span><span class="string">"</span><span class="keyword">;<br />        }<br />        return </span><span class="default">$output</span><span class="keyword">;<br />}<br /><br /></span><span class="default">ob_start</span><span class="keyword">(</span><span class="string">'ob_handler'</span><span class="keyword">);<br /><br />echo </span><span class="string">'flush'</span><span class="keyword">;<br /></span><span class="default">ob_flush</span><span class="keyword">();<br /><br />echo </span><span class="string">'flush 2'</span><span class="keyword">;<br /></span><span class="default">ob_flush</span><span class="keyword">();<br /><br />echo </span><span class="string">'clean'</span><span class="keyword">;<br /></span><span class="default">ob_clean</span><span class="keyword">();<br /><br />echo </span><span class="string">'flush 3'</span><span class="keyword">;<br /></span><span class="default">ob_flush</span><span class="keyword">();<br /><br />echo </span><span class="string">'end flush'</span><span class="keyword">;<br /></span><span class="default">ob_end_flush</span><span class="keyword">();<br /></span><span class="default">?&gt;<br /></span><br />flush<br />flush 2<br />flush 3<br />end flush<br /><br />0: PHP_OUTPUT_HANDLER_START | PHP_OUTPUT_HANDLER_CONT (3): flush<br />1: PHP_OUTPUT_HANDLER_CONT (2): flush 2<br />2: PHP_OUTPUT_HANDLER_CONT (2): clean<br />3: PHP_OUTPUT_HANDLER_CONT (2): flush 3<br />4: PHP_OUTPUT_HANDLER_END (4): end flush</span></code></div>
  </div>
 </div>
  <div class="note" id="81667">  <div class="votes">
    <div id="Vu81667">
    <a href="https://www.php.net/manual/vote-note.php?id=81667&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd81667">
    <a href="https://www.php.net/manual/vote-note.php?id=81667&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V81667" title="52% like this...">
    1
    </div>
  </div>
  <a href="function.ob-start.php.html#81667" class="name">
  <strong class="user"><em>dan at roteloftet dot com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#81667"> &para;</a><div class="date" title="2008-03-09 02:19"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom81667">
<div class="phpcode"><code><span class="html">Some web hosting servers (mine do, at least) have in their php.ini the following setting:<br />output_handler = ob_gzhandler<br /><br />This proved problematic for php-scripts which returns an image or a binary file in general, since there is no way to determine the content length of the compressed file.<br /><br />Since I spent a lot of time scouring the net searching for a work-around (.htaccess-modifications were out of the picture for various reasons), I found this to work nicely to cancel out the ob_gzhandler specified in the php.ini:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">while (</span><span class="default">ob_get_level</span><span class="keyword">())<br />        </span><span class="default">ob_end_clean</span><span class="keyword">();<br /></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Encoding: None"</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />Put this at the top of the script before anything else is written to the page, and the script result will not be compressed.</span></code></div>
  </div>
 </div>
  <div class="note" id="109088">  <div class="votes">
    <div id="Vu109088">
    <a href="https://www.php.net/manual/vote-note.php?id=109088&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd109088">
    <a href="https://www.php.net/manual/vote-note.php?id=109088&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V109088" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ob-start.php.html#109088" class="name">
  <strong class="user"><em>me at haravikk dot com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#109088"> &para;</a><div class="date" title="2012-06-19 07:26"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom109088">
<div class="phpcode"><code><span class="html">I think it's worth noting that while you can't call any output functions such as echo or print from within a callback function, you can still send headers (presumably including cookies, haven't checked). Of course this only works in the first callback, like so:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">function </span><span class="default">myCallback</span><span class="keyword">(</span><span class="default">$buffer</span><span class="keyword">, </span><span class="default">$flags</span><span class="keyword">) {<br />    if (</span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">PHP_OUTPUT_HANDLER_START</span><span class="keyword">) {<br />        </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Server: LastMinuteHeaderServer'</span><span class="keyword">);<br />    }<br />}<br /><br /></span><span class="default">ob_start</span><span class="keyword">(</span><span class="string">'myCallback'</span><span class="keyword">);<br />echo </span><span class="string">"Hello World!"</span><span class="keyword">;<br /></span><span class="default">ob_end_flush</span><span class="keyword">();<br /><br /></span><span class="default">?&gt;<br /></span><br />Not the most inspiring example, but in this case the code is able to sneak a last-minute header in before the headers part of the response is sent. This can be handy if you want to avoid replacing header values that are uncertain.<br /><br />For example if your code may return an image, but you don't want to set content type until you're sure that the image can be sent successfully, you can use the callback to leave the decision right until the very last moment, by which point you're hopefully sure of what's being sent in the HTTP body.</span></code></div>
  </div>
 </div>
  <div class="note" id="126558">  <div class="votes">
    <div id="Vu126558">
    <a href="https://www.php.net/manual/vote-note.php?id=126558&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd126558">
    <a href="https://www.php.net/manual/vote-note.php?id=126558&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V126558" title="0% like this...">
    -2
    </div>
  </div>
  <a href="function.ob-start.php.html#126558" class="name">
  <strong class="user"><em>php REMOVETHIS at kennel17 dot co dot uk</em></strong></a><a class="genanchor" href="function.ob-start.php.html#126558"> &para;</a><div class="date" title="2021-11-05 12:10"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom126558">
<div class="phpcode"><code><span class="html">Be very careful when returning false from your callback function!<br /><br />Despite what the documentation says, this is *not* the same as returning the supplied $buffer value, unmodified.  In the context of a 'clean' operation (e.g. ob_clean()) this will result in your callback function being disabled and skipped for any subsequent output.<br /><br />The answer is to ensure you always return a string value from your callback.  This is likely a bug, and it may get fixed at some point, but it applies to all versions since PHP 5.4 up to the current version (8.1 at time of writing).  Note that it was not an issue on PHP 5.3 and below.<br /><br />Some more detail can be seen on this Stack Overflow question: <a href="https://stackoverflow.com/questions/69845122/" rel="nofollow" target="_blank">https://stackoverflow.com/questions/69845122/</a><br /><br />A demonstration of the issue has been set up in this fiddle: <a href="https://3v4l.org/66cai" rel="nofollow" target="_blank">https://3v4l.org/66cai</a></span></code></div>
  </div>
 </div>
  <div class="note" id="55517">  <div class="votes">
    <div id="Vu55517">
    <a href="https://www.php.net/manual/vote-note.php?id=55517&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd55517">
    <a href="https://www.php.net/manual/vote-note.php?id=55517&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V55517" title="100% like this...">
    1
    </div>
  </div>
  <a href="function.ob-start.php.html#55517" class="name"><strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.ob-start.php.html#55517"> &para;</a><div class="date" title="2005-08-05 07:54"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom55517">
<div class="phpcode"><code><span class="html">I usually create my pages in four parts - variable initialisation, import header (using the variables just declared to configure), main body (mostly non-PHP), import footer.  I wondered about making the main body examinable by another PHP script if the main page was included into it.  I found I could control output of the main body by ending the header with an unclosed function which finishes at the start of the footer, thus enclosing the main body.  Output buffering can then be used to read this into a variable.  As a demonstration of how this can be used to control the order of output look at this example:<br /><br /><span class="default">&lt;?php<br />$output </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br /><br /></span><span class="comment">// Callback to process buffered output<br /></span><span class="keyword">function </span><span class="default">capture</span><span class="keyword">(</span><span class="default">$buffer</span><span class="keyword">)<br />    {<br />    </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'output'</span><span class="keyword">] .= </span><span class="default">$buffer</span><span class="keyword">;<br />    return </span><span class="string">"C "</span><span class="keyword">;<br />    }<br /><br /></span><span class="comment">// Calls the printE() function with output capture<br /></span><span class="keyword">function </span><span class="default">captureE</span><span class="keyword">()<br />    {<br />    </span><span class="default">ob_start</span><span class="keyword">(</span><span class="string">"capture"</span><span class="keyword">);<br />    </span><span class="default">printE</span><span class="keyword">();<br />    </span><span class="default">ob_end_flush</span><span class="keyword">();<br />    }<br /></span><span class="default">?&gt;<br /></span><br />A<br /><span class="default">&lt;?php<br /></span><span class="comment">// Output 'E' (the main body in the example scenario)<br /></span><span class="keyword">function </span><span class="default">printE</span><span class="keyword">()<br />    { </span><span class="comment">// (End header after this line) </span><span class="default">?&gt;<br /></span>E<br />    <span class="default">&lt;?php </span><span class="comment">// (Start footer with this line)<br />    </span><span class="keyword">}<br /></span><span class="default">?&gt;<br /></span>B<br /><span class="default">&lt;?php captureE</span><span class="keyword">(); </span><span class="default">?&gt;<br /></span>D<br /><span class="default">&lt;?php </span><span class="keyword">print </span><span class="default">$output</span><span class="keyword">; </span><span class="default">?&gt;<br /></span>F<br /><span class="default">&lt;?php printE</span><span class="keyword">(); </span><span class="default">?&gt;<br /></span>G<br /><br />The output is A B C D E F E G.<br /><br />For the application I mentioned above there are two points to note:<br /> - The page when executed alone must output its main body but the inspection script should suppress this, perhaps by means of a variable set before the page is included and then checked for in the footer output lines.<br /> - Because the main body is now inside a function it has a different namespace, thus changes may be required to prevent code breaking (e.g. use of globals, handling of functions defined within the main body).</span></code></div>
  </div>
 </div>
  <div class="note" id="52697">  <div class="votes">
    <div id="Vu52697">
    <a href="https://www.php.net/manual/vote-note.php?id=52697&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd52697">
    <a href="https://www.php.net/manual/vote-note.php?id=52697&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V52697" title="100% like this...">
    1
    </div>
  </div>
  <a href="function.ob-start.php.html#52697" class="name">
  <strong class="user"><em>rafa dot chacon at factorydea dot com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#52697"> &para;</a><div class="date" title="2005-05-10 02:10"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom52697">
<div class="phpcode"><code><span class="html">If you're trying to include a php file inside a loop by require_once (in example, a dinamic email template) and change the value of some variables (in example, url to unsuscribe, different for each user), you should use<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">// ... some code<br /><br /></span><span class="default">$usermail </span><span class="keyword">= array(</span><span class="string">"email1"</span><span class="keyword">, </span><span class="string">"email2"</span><span class="keyword">, ...);<br /><br />for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$MAX</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />{<br />        </span><span class="default">$usermail_unsuscribe </span><span class="keyword">= </span><span class="default">$usermail</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />        </span><span class="default">ob_start</span><span class="keyword">();<br />        include(</span><span class="string">"email_template.php"</span><span class="keyword">);<br />        </span><span class="default">ob_clean</span><span class="keyword">();<br />}<br /></span><span class="default">?&gt;<br /></span><br />Otherwise $usermail_unsuscribe will get only "email1" value.</span></code></div>
  </div>
 </div>
  <div class="note" id="91963">  <div class="votes">
    <div id="Vu91963">
    <a href="https://www.php.net/manual/vote-note.php?id=91963&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd91963">
    <a href="https://www.php.net/manual/vote-note.php?id=91963&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V91963" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ob-start.php.html#91963" class="name">
  <strong class="user"><em>mariusads at helpedia dot com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#91963"> &para;</a><div class="date" title="2009-07-02 03:02"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom91963">
<div class="phpcode"><code><span class="html">Make sure the editor you use does not add the UTF8/UTF16 BOM at the start of the scripts if you want to use ob_start("ob_gzhandler"); <br /><br />If those three characters are present, browsers like Firefox won't be able to decode the pages and will report:<br /><br />Content Encoding Error<br /><br />The page you are trying to view cannot be shown because it uses an invalid or unsupported form of compression.<br /><br />The page you are trying to view cannot be shown because it uses an invalid or unsupported form of compression.<br /><br />Google Chrome will simply report "Error 2 (net::ERR_FAILED): Unknown error."<br /><br />With the ob_start command commented out, the page is successfully load and the browser will usually detect the BOM and not show it on the page, so everything's hard to debug.</span></code></div>
  </div>
 </div>
  <div class="note" id="87895">  <div class="votes">
    <div id="Vu87895">
    <a href="https://www.php.net/manual/vote-note.php?id=87895&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd87895">
    <a href="https://www.php.net/manual/vote-note.php?id=87895&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V87895" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ob-start.php.html#87895" class="name">
  <strong class="user"><em>cj at ceejayoz dot com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#87895"> &para;</a><div class="date" title="2008-12-29 08:45"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom87895">
<div class="phpcode"><code><span class="html">Note that since PHP 5.1.x, all objects have their destructors called before the output buffer callback function executes. Thus, globalised objects will not be available as expected in the function.<br /><br />This is stated to be intended behaviour, per <a href="http://bugs.php.net/bug.php?id=40104" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=40104</a></span></code></div>
  </div>
 </div>
  <div class="note" id="82356">  <div class="votes">
    <div id="Vu82356">
    <a href="https://www.php.net/manual/vote-note.php?id=82356&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd82356">
    <a href="https://www.php.net/manual/vote-note.php?id=82356&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V82356" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ob-start.php.html#82356" class="name">
  <strong class="user"><em>coldshine at gmail dot com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#82356"> &para;</a><div class="date" title="2008-04-07 11:52"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom82356">
<div class="phpcode"><code><span class="html">Referring to dan at roteloftet dot com's comment:<br /><br />RFC 2616 (HTTP) specifies a "transparent" Content-Encoding, "identity" (§ 3.5), that nicely suits what you tried to do with the (invalid) "None". So this equally working, and it's also RFC-compliant:<br /><br /><span class="default">&lt;?php<br />header</span><span class="keyword">(</span><span class="string">'Content-Encoding: identity'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="78659">  <div class="votes">
    <div id="Vu78659">
    <a href="https://www.php.net/manual/vote-note.php?id=78659&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd78659">
    <a href="https://www.php.net/manual/vote-note.php?id=78659&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V78659" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ob-start.php.html#78659" class="name">
  <strong class="user"><em>Francois Hill</em></strong></a><a class="genanchor" href="function.ob-start.php.html#78659"> &para;</a><div class="date" title="2007-10-22 05:42"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom78659">
<div class="phpcode"><code><span class="html">Following clement dot ayme at st dot com 's remark :<br /><br />In my experience it seems that the output IS buffered, but ALSO sent to the standard output !</span></code></div>
  </div>
 </div>
  <div class="note" id="70065">  <div class="votes">
    <div id="Vu70065">
    <a href="https://www.php.net/manual/vote-note.php?id=70065&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd70065">
    <a href="https://www.php.net/manual/vote-note.php?id=70065&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V70065" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ob-start.php.html#70065" class="name">
  <strong class="user"><em>butch at enterpol dot pl</em></strong></a><a class="genanchor" href="function.ob-start.php.html#70065"> &para;</a><div class="date" title="2006-10-02 12:04"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom70065">
<div class="phpcode"><code><span class="html">simple code to make phpsession $_GET nice for Valid XHTML 1.0 Transitional :)<br /><br />function callback($buffer)<br />{<br />  $buffer = str_replace("&amp;PHPSESSID", "&amp;amp;PHPSESSID", $buffer);<br />  return $buffer;<br />}<br /><br />ob_start("callback");<br /><br />session_start();</span></code></div>
  </div>
 </div>
  <div class="note" id="61057">  <div class="votes">
    <div id="Vu61057">
    <a href="https://www.php.net/manual/vote-note.php?id=61057&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd61057">
    <a href="https://www.php.net/manual/vote-note.php?id=61057&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V61057" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ob-start.php.html#61057" class="name">
  <strong class="user"><em>simon</em></strong></a><a class="genanchor" href="function.ob-start.php.html#61057"> &para;</a><div class="date" title="2006-01-24 08:51"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom61057">
<div class="phpcode"><code><span class="html">Found that variables in class instances we're not being set after the call to ob_start(). <br />Call ob_start after the variables are set however and it works but that didn't seem to solve the goal of a self contained templating class.<br />The fix was to assign the class by reference with '&amp;new'<br />Here is a simplified working example:<br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">Buffer </span><span class="keyword">{<br />var </span><span class="default">$template </span><span class="keyword">= </span><span class="string">' - template set in class constructor'</span><span class="keyword">;<br />function </span><span class="default">Buffer</span><span class="keyword">() { <br />    </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">startBuffer</span><span class="keyword">(); <br />}<br />function </span><span class="default">startBuffer</span><span class="keyword">() {<br />    </span><span class="default">ob_start</span><span class="keyword">(array(&amp;</span><span class="default">$this</span><span class="keyword">, </span><span class="string">'doFlush'</span><span class="keyword">));<br />}<br />function </span><span class="default">doFlush</span><span class="keyword">(</span><span class="default">$buffer</span><span class="keyword">) {<br />    </span><span class="comment">/* simple string concat to show use of a <br />    template string and the buffer output */<br />    </span><span class="keyword">return </span><span class="default">$buffer </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">template</span><span class="keyword">; <br />}<br />}<br /></span><span class="comment">/* template does not get set:<br />$buffer1 = new Buffer();<br />$buffer1-&gt;template = ' - template set in instance';<br />echo 'some buffer content';<br />*/<br />/* this works as expected */<br /></span><span class="default">$buffer2 </span><span class="keyword">= &amp;new </span><span class="default">Buffer</span><span class="keyword">();<br /></span><span class="default">$buffer2</span><span class="keyword">-&gt;</span><span class="default">template </span><span class="keyword">= </span><span class="string">' - template set in instance'</span><span class="keyword">;<br />echo </span><span class="string">'some buffer content'</span><span class="keyword">;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="56244">  <div class="votes">
    <div id="Vu56244">
    <a href="https://www.php.net/manual/vote-note.php?id=56244&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd56244">
    <a href="https://www.php.net/manual/vote-note.php?id=56244&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V56244" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ob-start.php.html#56244" class="name">
  <strong class="user"><em>admin at bobfrank dot org</em></strong></a><a class="genanchor" href="function.ob-start.php.html#56244"> &para;</a><div class="date" title="2005-08-28 08:50"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom56244">
<div class="phpcode"><code><span class="html">If you want to run code in the middle of a string that you made, but you want to wait the printing...<br />(so if you want to allow php in bb-code style, and you want to execute it in order, and print everything in order...)<br /><br />phpRun($code) {<br />    ob_start();<br />    exec($code);<br />    $output = ob_get_contents();<br />    ob_end_clean();<br />    return $output;<br />}<br /><br />$str = str_replace("]\n", "]", $str);<br />$match = array('#\[php\](.*?)\[\/php\]#se');<br />$replace = array( phpRun( stripslashes('$1') ) );<br />$str= preg_replace($match, $replace, $str);<br /><br />echo $str;</span></code></div>
  </div>
 </div>
  <div class="note" id="55653">  <div class="votes">
    <div id="Vu55653">
    <a href="https://www.php.net/manual/vote-note.php?id=55653&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd55653">
    <a href="https://www.php.net/manual/vote-note.php?id=55653&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V55653" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ob-start.php.html#55653" class="name">
  <strong class="user"><em>geoffrey at nevra dot net</em></strong></a><a class="genanchor" href="function.ob-start.php.html#55653"> &para;</a><div class="date" title="2005-08-09 12:05"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom55653">
<div class="phpcode"><code><span class="html">When using a callback with ob_start(), functions like ob_get_contents() don't make use of it, use ob_end_flush() instead.<br /><br />nb: not tested with every ob_* functions, just ob_get_contents() and ob_end_flush()</span></code></div>
  </div>
 </div>
  <div class="note" id="54582">  <div class="votes">
    <div id="Vu54582">
    <a href="https://www.php.net/manual/vote-note.php?id=54582&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd54582">
    <a href="https://www.php.net/manual/vote-note.php?id=54582&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V54582" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ob-start.php.html#54582" class="name">
  <strong class="user"><em>oersoep at gmail dot com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#54582"> &para;</a><div class="date" title="2005-07-08 05:46"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom54582">
<div class="phpcode"><code><span class="html">These are handy. First one has been mentioned before.<br /><br />ob_start( array( 'lib_class', 'parse_output' ) );<br />ob_start( array( $this, 'parse_output' ) );<br /><br />Note: $this is NOT a reference. Anything the callback saves or logs disappears in the clone ob_start works with. <br />It does enable the callback to work with the attributes of $this, like $this-&gt;ar_tpl_value or whatever your style is.<br /><br />The manual says:<br />"If the optional parameter chunk_size is passed, the callback function is called on every first newline after chunk_size bytes of output. The output_callback parameter may be bypassed by passing a NULL value."<br />This doesn't work with my 4.3.11. Might be the Zend optimizer though. Daren't turn it off to go see.</span></code></div>
  </div>
 </div>
  <div class="note" id="53173">  <div class="votes">
    <div id="Vu53173">
    <a href="https://www.php.net/manual/vote-note.php?id=53173&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd53173">
    <a href="https://www.php.net/manual/vote-note.php?id=53173&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V53173" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ob-start.php.html#53173" class="name">
  <strong class="user"><em>Aleksey</em></strong></a><a class="genanchor" href="function.ob-start.php.html#53173"> &para;</a><div class="date" title="2005-05-25 12:08"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom53173">
<div class="phpcode"><code><span class="html">This function dynamically changes title of HTML page:<br /><br />  function change_title($new_title) {<br />    $output = ob_get_contents();<br />    ob_end_clean();<br /><br />    $output = preg_replace("/&lt;title&gt;(.*?)&lt;\/title&gt;/", "&lt;title&gt;$new_title&lt;/title&gt;", $output);<br />    echo $output;<br />  }<br /><br />Example:<br />  ob_start();<br />  // ... some output<br />  change_title('NEW TITLE!');</span></code></div>
  </div>
 </div>
  <div class="note" id="27432">  <div class="votes">
    <div id="Vu27432">
    <a href="https://www.php.net/manual/vote-note.php?id=27432&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd27432">
    <a href="https://www.php.net/manual/vote-note.php?id=27432&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V27432" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ob-start.php.html#27432" class="name"><strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.ob-start.php.html#27432"> &para;</a><div class="date" title="2002-12-05 12:02"><strong>21 years ago</strong></div>
  <div class="text" id="Hcom27432">
<div class="phpcode"><code><span class="html">If you're using Apache (1.3x or 2.0), you might consider adding automatic compression capability to your delivered pages.<br /><br />I assume you all know how to build compression classes and use them in your programs, but none has yet to offer the speed and robustness of a binary-compiled module. Furthermore, such modules also log the "compressable" hit in the web log file, thus allowing your favorite web anaysing program to show you reports of bandwidth saved.<br /><br />Having said that, you might consider the following two modules for Apache:<br /><br />1) Apache 1.3x: use mod_gzip, available from:<br /><a href="http://sourceforge.net/projects/mod-gzip/" rel="nofollow" target="_blank">http://sourceforge.net/projects/mod-gzip/</a><br /><br />2) Apache 2.x: use mod_gz, see here:<br /><a href="http://www.mail-archive.com/dev@httpd.apache.org/msg00734.html" rel="nofollow" target="_blank">http://www.mail-archive.com/dev@httpd.apache.org/msg00734.html</a><br /><br />3) Apache 1.3x: you may also want to use mod_defalte, from:<br /><a href="ftp://ftp.lexa.ru/pub/apache-rus/contrib/" rel="nofollow" target="_blank">ftp://ftp.lexa.ru/pub/apache-rus/contrib/</a><br /><br />Hope it helps.</span></code></div>
  </div>
 </div>
  <div class="note" id="24140">  <div class="votes">
    <div id="Vu24140">
    <a href="https://www.php.net/manual/vote-note.php?id=24140&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd24140">
    <a href="https://www.php.net/manual/vote-note.php?id=24140&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V24140" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.ob-start.php.html#24140" class="name">
  <strong class="user"><em>cliff at NOSPAMtravelguides dot com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#24140"> &para;</a><div class="date" title="2002-08-07 03:36"><strong>21 years ago</strong></div>
  <div class="text" id="Hcom24140">
<div class="phpcode"><code><span class="html">good article on output buffering on devshed:<br /><br /><a href="http://www.devshed.com/c/a/PHP/Output-Buffering-With-PHP" rel="nofollow" target="_blank">http://www.devshed.com/c/a/PHP/Output-Buffering-With-PHP</a></span></code></div>
  </div>
 </div>
  <div class="note" id="102317">  <div class="votes">
    <div id="Vu102317">
    <a href="https://www.php.net/manual/vote-note.php?id=102317&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd102317">
    <a href="https://www.php.net/manual/vote-note.php?id=102317&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V102317" title="46% like this...">
    -1
    </div>
  </div>
  <a href="function.ob-start.php.html#102317" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.ob-start.php.html#102317"> &para;</a><div class="date" title="2011-02-08 07:32"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom102317">
<div class="phpcode"><code><span class="html">In case you're in for some readable representation for flags, this is a variant as a private class member:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">foo </span><span class="keyword">{<br />    private function </span><span class="default">getFlagsReadable</span><span class="keyword">(</span><span class="default">$flags</span><span class="keyword">) {<br />        </span><span class="default">$flagNames </span><span class="keyword">= array(</span><span class="string">'PHP_OUTPUT_HANDLER_START'</span><span class="keyword">, </span><span class="string">'PHP_OUTPUT_HANDLER_CONT'</span><span class="keyword">, </span><span class="string">'PHP_OUTPUT_HANDLER_END'</span><span class="keyword">);<br />        </span><span class="default">$readable </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />        foreach(</span><span class="default">$flagNames </span><span class="keyword">as </span><span class="default">$flagName</span><span class="keyword">)<br />            if (</span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">constant</span><span class="keyword">(</span><span class="default">$flagName</span><span class="keyword">) )<br />                </span><span class="default">$readable </span><span class="keyword">.= (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$readable</span><span class="keyword">) ? </span><span class="string">' | ' </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">) . </span><span class="default">$flagName<br />            </span><span class="keyword">;        <br />        return </span><span class="default">$readable</span><span class="keyword">;<br />    }<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="117724">  <div class="votes">
    <div id="Vu117724">
    <a href="https://www.php.net/manual/vote-note.php?id=117724&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117724">
    <a href="https://www.php.net/manual/vote-note.php?id=117724&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117724" title="42% like this...">
    -1
    </div>
  </div>
  <a href="function.ob-start.php.html#117724" class="name">
  <strong class="user"><em>bty-adminf2 at trebly dot net</em></strong></a><a class="genanchor" href="function.ob-start.php.html#117724"> &para;</a><div class="date" title="2015-07-28 05:27"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom117724">
<div class="phpcode"><code><span class="html">This concerns the default values used for ob_start().<br /><br />Note that I could verify that ob_start() and ob_start(null,0) are not always equivalent.<br /><br />It seems that with ob_start() the output buffer is open with current default parameters of your configuration if they have been explicitly defined.<br /><br />So, if you have set $chunk_size to any value previously and send data larger than $chunk_size the data will be automatically flushed by blocks of $chunk_size.<br /><br />If you explicitely define $chunk_size=0, later, when you will use any function as $my_ob_dataoutput=ob_get_clean(); you  will get back the whole content of your output (quite unlimited with $chunk_size=0).<br /><br />I discover this because my var $my_ob_dataoutput was truncated. Using "ob_get_status (true)" function, I could verify that an error (in a lower level or by default out of my control) was setting previously the $chunk_size of ob at 4096.<br />I changed "ob_start()" for "ob_start(null,0)" and everything became OK.</span></code></div>
  </div>
 </div>
  <div class="note" id="85823">  <div class="votes">
    <div id="Vu85823">
    <a href="https://www.php.net/manual/vote-note.php?id=85823&amp;page=function.ob-start&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd85823">
    <a href="https://www.php.net/manual/vote-note.php?id=85823&amp;page=function.ob-start&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V85823" title="41% like this...">
    -2
    </div>
  </div>
  <a href="function.ob-start.php.html#85823" class="name">
  <strong class="user"><em>codextasy at gmail dot com</em></strong></a><a class="genanchor" href="function.ob-start.php.html#85823"> &para;</a><div class="date" title="2008-09-19 01:26"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom85823">
<div class="phpcode"><code><span class="html">There is a difference between the documentation and real callback functions invocation.<br />Manual says: "The function will be called when ob_end_flush() is called, or when the output buffer is flushed to the browser at the end of the request."<br /><br />Actually, the callback function, once set by ob_start(), will be called regardless.<br />Here are the functions that invoke callback function immediately:<br />ob_clean<br />ob_end_clean<br />ob_end_flush<br />ob_flush<br />ob_get_clean<br /><br />BUT only two of them return the result returned by the callback (ob_end_flush, ob_flush), other functions discard it.<br /><br />At the end of the request, even if none of the functions listed above is called, the callback will be called anyway, and its result will be returned to the browser (well, at least this is corresponding to the manual).<br /><br />There is one more trick:<br />If you set callback function with chunk_size &gt; 1, callback function will be called each time output buffer is equal or exceeds chunk_size and its result will be output to the browser, even if you call any of ob_clean(), ob_end_clean(), ob_get_clean() later, so be aware of this fact.</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.ob-start&amp;redirect=https://www.php.net/manual/ru/function.ob-start.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.outcontrol.php.html">Функции контроля вывода</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.flush.php.html" title="flush">flush</a>
                        </li>
                                                <li class="">
                            <a href="function.ob-clean.php.html" title="ob_&#8203;clean">ob_&#8203;clean</a>
                        </li>
                                                <li class="">
                            <a href="function.ob-end-clean.php.html" title="ob_&#8203;end_&#8203;clean">ob_&#8203;end_&#8203;clean</a>
                        </li>
                                                <li class="">
                            <a href="function.ob-end-flush.php.html" title="ob_&#8203;end_&#8203;flush">ob_&#8203;end_&#8203;flush</a>
                        </li>
                                                <li class="">
                            <a href="function.ob-flush.php.html" title="ob_&#8203;flush">ob_&#8203;flush</a>
                        </li>
                                                <li class="">
                            <a href="function.ob-get-clean.php.html" title="ob_&#8203;get_&#8203;clean">ob_&#8203;get_&#8203;clean</a>
                        </li>
                                                <li class="">
                            <a href="function.ob-get-contents.php.html" title="ob_&#8203;get_&#8203;contents">ob_&#8203;get_&#8203;contents</a>
                        </li>
                                                <li class="">
                            <a href="function.ob-get-flush.php.html" title="ob_&#8203;get_&#8203;flush">ob_&#8203;get_&#8203;flush</a>
                        </li>
                                                <li class="">
                            <a href="function.ob-get-length.php.html" title="ob_&#8203;get_&#8203;length">ob_&#8203;get_&#8203;length</a>
                        </li>
                                                <li class="">
                            <a href="function.ob-get-level.php.html" title="ob_&#8203;get_&#8203;level">ob_&#8203;get_&#8203;level</a>
                        </li>
                                                <li class="">
                            <a href="function.ob-get-status.php.html" title="ob_&#8203;get_&#8203;status">ob_&#8203;get_&#8203;status</a>
                        </li>
                                                <li class="">
                            <a href="function.ob-implicit-flush.php.html" title="ob_&#8203;implicit_&#8203;flush">ob_&#8203;implicit_&#8203;flush</a>
                        </li>
                                                <li class="">
                            <a href="function.ob-list-handlers.php.html" title="ob_&#8203;list_&#8203;handlers">ob_&#8203;list_&#8203;handlers</a>
                        </li>
                                                <li class="current">
                            <a href="function.ob-start.php.html" title="ob_&#8203;start">ob_&#8203;start</a>
                        </li>
                                                <li class="">
                            <a href="function.output-add-rewrite-var.php.html" title="output_&#8203;add_&#8203;rewrite_&#8203;var">output_&#8203;add_&#8203;rewrite_&#8203;var</a>
                        </li>
                                                <li class="">
                            <a href="function.output-reset-rewrite-vars.php.html" title="output_&#8203;reset_&#8203;rewrite_&#8203;vars">output_&#8203;reset_&#8203;rewrite_&#8203;vars</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
