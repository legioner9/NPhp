<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: oci_connect - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.oci-connect.php.html">
 <link rel="shorturl" href="https://www.php.net/oci-connect">
 <link rel="alternate" href="https://www.php.net/oci-connect" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.oci8.php.html">
 <link rel="prev" href="function.oci-commit.php.html">
 <link rel="next" href="function.oci-define-by-name.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.oci-connect.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.oci-connect.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.oci-connect.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.oci-connect.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.oci-connect.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.oci-connect.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.oci-connect.php" hreflang="pt_BR">
 <link rel="alternate" href="function.oci-connect.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.oci-connect.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.oci-connect.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.oci-define-by-name.php.html">
          oci_define_by_name &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.oci-commit.php.html">
          &laquo; oci_commit        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.database.php.html'>Модули для работы с базами данных</a></li>      <li><a href='refs.database.vendors.php.html'>Модули для работы с базами данных отдельных производителей</a></li>      <li><a href='book.oci8.php.html'>OCI8</a></li>      <li><a href='ref.oci8.php.html'>OCI8 Функции</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.oci-connect.php'>English</option>
            <option value='de/function.oci-connect.php'>German</option>
            <option value='es/function.oci-connect.php'>Spanish</option>
            <option value='fr/function.oci-connect.php'>French</option>
            <option value='it/function.oci-connect.php'>Italian</option>
            <option value='ja/function.oci-connect.php'>Japanese</option>
            <option value='pt_BR/function.oci-connect.php'>Brazilian Portuguese</option>
            <option value='ru/function.oci-connect.php' selected="selected">Russian</option>
            <option value='tr/function.oci-connect.php'>Turkish</option>
            <option value='zh/function.oci-connect.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/oci8/functions/oci-connect.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.oci-connect%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.oci-connect" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">oci_connect</h1>
  <p class="verinfo">(PHP 5, PHP 7, PHP 8, PECL OCI8 &gt;= 1.1.0)</p><p class="refpurpose"><span class="refname">oci_connect</span> &mdash; <span class="dc-title">Устанавливает соединение с базой данных Oracle</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.oci-connect-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>oci_connect</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$username</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$password</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$connection_string</code><span class="initializer"> = <strong><code>null</code></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$encoding</code><span class="initializer"> = &quot;&quot;</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">int</span> <code class="parameter">$session_mode</code><span class="initializer"> = <strong><code>OCI_DEFAULT</code></strong></span></span><br>): <span class="type"><span class="type">resource</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   Возвращает идентификатор соединения, который используется большинством
   функций данного модуля.
  </p>
  <p class="para">
   Для повышения производительности большинство приложений должны использовать постоянные соединения
   с помощью <span class="function"><a href="function.oci-pconnect.php.html" class="function">oci_pconnect()</a></span> вместо
   <span class="function"><strong>oci_connect()</strong></span>.
   Смотрите <a href="oci8.connection.php.html" class="link">Управление соединением</a> для
   более детальной информации по управлению соединениями и создании пулов подключений.
  </p>
  <p class="para">
   Второй и последующие вызовы функции <span class="function"><strong>oci_connect()</strong></span>
   с теми же параметрами вернут идентификатор уже открытого соединения.
   Это означает, что транзакции используют <em>одно и то же</em>
   базовое соединение с базой данных. При необходимости разделения
   транзакций рекомендуется использовать функцию
   <span class="function"><a href="function.oci-new-connect.php.html" class="function">oci_new_connect()</a></span>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.oci-connect-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">username</code></dt>

     <dd>

      <p class="para">
       Имя пользователя Oracle.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">password</code></dt>

     <dd>

      <p class="para">
       Пароль <code class="parameter">username</code>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">connection_string</code></dt>

     <dd>

      <p class="para">Содержит
<code class="literal">экземпляр Oracle</code> для подключения. Это может быть
<a href="https://www.oracle.com/pls/topic/lookup?ctx=dblatest&id=GUID-E5358DEA-D619-4B7B-A799-3D2F802500F1" class="link external">&raquo;&nbsp;Easy Connect
 string</a>, или Connect Name из файла
<var class="filename">tnsnames.ora</var>, или имя локального экземпляра Oracle.
</p>
<p class="para">Если не указано отдельно или <strong><code>null</code></strong>, PHP использует
 переменные окружения, такие как <strong><code>TWO_TASK</code></strong> (на Linux)
 или <strong><code>LOCAL</code></strong> (на Windows)
 и <strong><code>ORACLE_SID</code></strong> для определения
 <code class="literal">экземпляра Oracle</code> для соединения.
</p>
<p class="para">
 Для использования метода Easy Connect, PHP должен быть слинкован с клиентскими библиотеками версии Oracle
 10<em>g</em> или старше. Easy Connect string для Oracle 10<em>g</em> принимает следующую форму:
 <em>[//]host_name[:port][/service_name]</em>. Начиная с Oracle 11<em>g</em> синтаксис таков:
 <em>[//]host_name[:port][/service_name][:server_type][/instance_name]</em>.
 В Oracle 19c были введены дополнительные параметры, включая настройки времени ожидания и проверки активности.
 Обратитесь к документации Oracle. Названия служб могут быть определены с помощью запуска Oracle утилиты <code class="literal">lsnrctl status</code>
 на сервере базы данных.
</p>
<p class="para">
 Файл <var class="filename">tnsnames.ora</var> может находиться в поисковом пути Oracle Net, который включает
 <var class="filename">/your/path/to/instantclient/network/admin</var>,
 <var class="filename">$ORACLE_HOME/network/admin</var> и <var class="filename">/etc</var>. В качестве альтернативного варианта
 можно установить <code class="literal">TNS_ADMIN</code> таким образом, чтобы путь <var class="filename">$TNS_ADMIN/tnsnames.ora</var> был читаемым.
 Убедитесь, что веб-сервер имеет доступ к этому файлу.
</p>
     </dd>

    
    
     <dt>
<code class="parameter">encoding</code></dt>

     <dd>

      <p class="para">Определяет кодировку, которую будут использовать клиентские
библиотеки Oracle. Эта кодировка не обязательно должна совпадать с кодировкой, используемой в самой базе данных.
Если она не совпадает, Oracle сделает всё возможное для конвертирования данных из- и в эту кодировку.
В зависимости от используемых кодировок это может не всегда давать приемлемые результаты. Преобразование также
создаёт некоторые дополнительные временные затраты.
</p>
<p class="para">Если кодировка не указана, клиентские библиотеки Oracle будут определять
 её из переменной окружения <strong><code>NLS_LANG</code></strong>.
</p>
<p class="para">Передача этого параметра может уменьшить время затрачиваемое на соединение.
</p>
     </dd>

    
    
     <dt>
<code class="parameter">session_mode</code></dt>

     <dd>

      <p class="para">Этот параметр доступен начиная с версии PHP 5 (PECL OCI8 1.1) и принимает следующие значения: <strong><code>OCI_DEFAULT</code></strong>, <strong><code>OCI_SYSOPER</code></strong> и <strong><code>OCI_SYSDBA</code></strong>. Если были указаны <strong><code>OCI_SYSOPER</code></strong> или <strong><code>OCI_SYSDBA</code></strong>, эта функция попытается установить привилегированное соединение, используя внешние данные авторизации. По умолчанию привилегированные соединения отключены. Чтобы их включить, необходимо установить <a href="oci8.configuration.php.html#ini.oci8.privileged-connect" class="link">oci8.privileged_connect</a> в <code class="literal">On</code>.</p><p class="para">В версии PHP 5.3 (PECL OCI8 1.3.4) появилось значение <strong><code>OCI_CRED_EXT</code></strong>. Оно указывает Oracle использовать внешнюю аутентификацию или аутентификацию с помощью операционной системы, что должно быть настроено в базе данных. Флаг <strong><code>OCI_CRED_EXT</code></strong> может быть использован только с именем пользователя &quot;/&quot; и пустым паролем. <a href="oci8.configuration.php.html#ini.oci8.privileged-connect" class="link">oci8.privileged_connect</a> может принимать значение <code class="literal">On</code> или <code class="literal">Off</code>.</p><p class="para"><strong><code>OCI_CRED_EXT</code></strong> может использоваться совместно с режимами <strong><code>OCI_SYSOPER</code></strong> и  <strong><code>OCI_SYSDBA</code></strong>.</p><p class="para">
<strong><code>OCI_CRED_EXT</code></strong> не поддерживается в Windows по причинам безопасности.
</p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.oci-connect-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает идентификатор соединения или <strong><code>false</code></strong> в случае возникновения ошибки.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.oci-connect-changelog">
  <h3 class="title">Список изменений</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Версия</th>
      <th>Описание</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>8.0.0, PECL OCI8 3.0.0</td>
      <td>
       <code class="parameter">connection_string</code> теперь допускает значение null.
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-function.oci-connect-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="example-5503">
    <p><strong>Пример #1 Пример использования <span class="function"><strong>oci_connect()</strong></span>
     с синтаксисом Easy Connect</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">// Подключается к XE сервису (т.е. к базе данных) на "localhost"<br /></span><span style="color: #0000BB">$conn </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'hr'</span><span style="color: #007700">, </span><span style="color: #DD0000">'welcome'</span><span style="color: #007700">, </span><span style="color: #DD0000">'localhost/XE'</span><span style="color: #007700">);<br />if (!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">$e </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br />    </span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">'message'</span><span style="color: #007700">], </span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">), </span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">$stid </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #DD0000">'SELECT * FROM employees'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br /><br />echo </span><span style="color: #DD0000">"&lt;table border='1'&gt;\n"</span><span style="color: #007700">;<br />while (</span><span style="color: #0000BB">$row </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">, </span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">+</span><span style="color: #0000BB">OCI_RETURN_NULLS</span><span style="color: #007700">)) {<br />    echo </span><span style="color: #DD0000">"&lt;tr&gt;\n"</span><span style="color: #007700">;<br />    foreach (</span><span style="color: #0000BB">$row </span><span style="color: #007700">as </span><span style="color: #0000BB">$item</span><span style="color: #007700">) {<br />        echo </span><span style="color: #DD0000">"    &lt;td&gt;" </span><span style="color: #007700">. (</span><span style="color: #0000BB">$item </span><span style="color: #007700">!== </span><span style="color: #0000BB">null </span><span style="color: #007700">? </span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">, </span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">) : </span><span style="color: #DD0000">""</span><span style="color: #007700">) . </span><span style="color: #DD0000">"&lt;/td&gt;\n"</span><span style="color: #007700">;<br />    }<br />    echo </span><span style="color: #DD0000">"&lt;/tr&gt;\n"</span><span style="color: #007700">;<br />}<br />echo </span><span style="color: #DD0000">"&lt;/table&gt;\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5506">
    <p><strong>Пример #2 Пример использования <span class="function"><strong>oci_connect()</strong></span>
     используя имя Network Connect</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">// Соединяется с базой данных MYDB описанной в файле tnsnames.ora,<br />// Пример записи в tnsnames.ora для MYDB:<br />//   MYDB =<br />//     (DESCRIPTION =<br />//       (ADDRESS = (PROTOCOL = TCP)(HOST = mymachine.oracle.com)(PORT = 1521))<br />//       (CONNECT_DATA =<br />//         (SERVER = DEDICATED)<br />//         (SERVICE_NAME = XE)<br />//       )<br />//     )<br /><br /></span><span style="color: #0000BB">$conn </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'hr'</span><span style="color: #007700">, </span><span style="color: #DD0000">'welcome'</span><span style="color: #007700">, </span><span style="color: #DD0000">'MYDB'</span><span style="color: #007700">);<br />if (!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">$e </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br />    </span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">'message'</span><span style="color: #007700">], </span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">), </span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">$stid </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #DD0000">'SELECT * FROM employees'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br /><br />echo </span><span style="color: #DD0000">"&lt;table border='1'&gt;\n"</span><span style="color: #007700">;<br />while (</span><span style="color: #0000BB">$row </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">, </span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">+</span><span style="color: #0000BB">OCI_RETURN_NULLS</span><span style="color: #007700">)) {<br />    echo </span><span style="color: #DD0000">"&lt;tr&gt;\n"</span><span style="color: #007700">;<br />    foreach (</span><span style="color: #0000BB">$row </span><span style="color: #007700">as </span><span style="color: #0000BB">$item</span><span style="color: #007700">) {<br />        echo </span><span style="color: #DD0000">"    &lt;td&gt;" </span><span style="color: #007700">. (</span><span style="color: #0000BB">$item </span><span style="color: #007700">!== </span><span style="color: #0000BB">null </span><span style="color: #007700">? </span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">, </span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">) : </span><span style="color: #DD0000">""</span><span style="color: #007700">) . </span><span style="color: #DD0000">"&lt;/td&gt;\n"</span><span style="color: #007700">;<br />    }<br />    echo </span><span style="color: #DD0000">"&lt;/tr&gt;\n"</span><span style="color: #007700">;<br />}<br />echo </span><span style="color: #DD0000">"&lt;/table&gt;\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5509">
    <p><strong>Пример #3 Пример использования <span class="function"><strong>oci_connect()</strong></span>
     с использованием определённого набора символов</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br />$conn </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'hr'</span><span style="color: #007700">, </span><span style="color: #DD0000">'welcome'</span><span style="color: #007700">, </span><span style="color: #DD0000">'localhost/XE'</span><span style="color: #007700">, </span><span style="color: #DD0000">'AL32UTF8'</span><span style="color: #007700">);<br />if (!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">$e </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br />    </span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">'message'</span><span style="color: #007700">], </span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">), </span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">$stid </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #DD0000">'SELECT * FROM employees'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br /><br />echo </span><span style="color: #DD0000">"&lt;table border='1'&gt;\n"</span><span style="color: #007700">;<br />while (</span><span style="color: #0000BB">$row </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">, </span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">+</span><span style="color: #0000BB">OCI_RETURN_NULLS</span><span style="color: #007700">)) {<br />    echo </span><span style="color: #DD0000">"&lt;tr&gt;\n"</span><span style="color: #007700">;<br />    foreach (</span><span style="color: #0000BB">$row </span><span style="color: #007700">as </span><span style="color: #0000BB">$item</span><span style="color: #007700">) {<br />        echo </span><span style="color: #DD0000">"    &lt;td&gt;" </span><span style="color: #007700">. (</span><span style="color: #0000BB">$item </span><span style="color: #007700">!== </span><span style="color: #0000BB">null </span><span style="color: #007700">? </span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">, </span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">) : </span><span style="color: #DD0000">""</span><span style="color: #007700">) . </span><span style="color: #DD0000">"&lt;/td&gt;\n"</span><span style="color: #007700">;<br />    }<br />    echo </span><span style="color: #DD0000">"&lt;/tr&gt;\n"</span><span style="color: #007700">;<br />}<br />echo </span><span style="color: #DD0000">"&lt;/table&gt;\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5512">
    <p><strong>Пример #4 Пример использования многократных вызовов
     <span class="function"><strong>oci_connect()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br />$c1 </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"hr"</span><span style="color: #007700">, </span><span style="color: #DD0000">"welcome"</span><span style="color: #007700">, </span><span style="color: #DD0000">'localhost/XE'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$c2 </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"hr"</span><span style="color: #007700">, </span><span style="color: #DD0000">"welcome"</span><span style="color: #007700">, </span><span style="color: #DD0000">'localhost/XE'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// $c1 и $c2 содержат одинаковый PHP id ресурса, что означает, что<br />// они используют одинаковое базовое соединение<br /></span><span style="color: #007700">echo </span><span style="color: #DD0000">"c1 is </span><span style="color: #0000BB">$c1</span><span style="color: #DD0000">&lt;br&gt;\n"</span><span style="color: #007700">;<br />echo </span><span style="color: #DD0000">"c2 is </span><span style="color: #0000BB">$c2</span><span style="color: #DD0000">&lt;br&gt;\n"</span><span style="color: #007700">;<br /><br />function </span><span style="color: #0000BB">create_table</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)<br />{<br />    </span><span style="color: #0000BB">$stmt </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #DD0000">"create table hallo (test varchar2(64))"</span><span style="color: #007700">);<br />    </span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">);<br />    echo </span><span style="color: #DD0000">"Created table&lt;br&gt;\n"</span><span style="color: #007700">;<br />}<br /><br />function </span><span style="color: #0000BB">drop_table</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)<br />{<br />    </span><span style="color: #0000BB">$stmt </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #DD0000">"drop table hallo"</span><span style="color: #007700">);<br />    </span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">);<br />    echo </span><span style="color: #DD0000">"Dropped table&lt;br&gt;\n"</span><span style="color: #007700">;<br />}<br /><br />function </span><span style="color: #0000BB">insert_data</span><span style="color: #007700">(</span><span style="color: #0000BB">$connname</span><span style="color: #007700">, </span><span style="color: #0000BB">$conn</span><span style="color: #007700">)<br />{<br />    </span><span style="color: #0000BB">$stmt </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #DD0000">"insert into hallo<br />              values(to_char(sysdate,'DD-MON-YY HH24:MI:SS'))"</span><span style="color: #007700">);<br />    </span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">, </span><span style="color: #0000BB">OCI_DEFAULT</span><span style="color: #007700">);<br />    echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$connname</span><span style="color: #DD0000"> inserted row without committing&lt;br&gt;\n"</span><span style="color: #007700">;<br />}<br /><br />function </span><span style="color: #0000BB">rollback</span><span style="color: #007700">(</span><span style="color: #0000BB">$connname</span><span style="color: #007700">, </span><span style="color: #0000BB">$conn</span><span style="color: #007700">)<br />{<br />    </span><span style="color: #0000BB">oci_rollback</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br />    echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$connname</span><span style="color: #DD0000"> rollback&lt;br&gt;\n"</span><span style="color: #007700">;<br />}<br /><br />function </span><span style="color: #0000BB">select_data</span><span style="color: #007700">(</span><span style="color: #0000BB">$connname</span><span style="color: #007700">, </span><span style="color: #0000BB">$conn</span><span style="color: #007700">)<br />{<br />    </span><span style="color: #0000BB">$stmt </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #DD0000">"select * from hallo"</span><span style="color: #007700">);<br />    </span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">, </span><span style="color: #0000BB">OCI_DEFAULT</span><span style="color: #007700">);<br />    echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$connname</span><span style="color: #DD0000"> ----selecting&lt;br&gt;\n"</span><span style="color: #007700">;<br />    while (</span><span style="color: #0000BB">oci_fetch</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">)) {<br />        echo </span><span style="color: #DD0000">"    " </span><span style="color: #007700">. </span><span style="color: #0000BB">oci_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">, </span><span style="color: #DD0000">"TEST"</span><span style="color: #007700">) . </span><span style="color: #DD0000">"&lt;br&gt;\n"</span><span style="color: #007700">;<br />    }<br />    echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$connname</span><span style="color: #DD0000"> ----done&lt;br&gt;\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">create_table</span><span style="color: #007700">(</span><span style="color: #0000BB">$c1</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">insert_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'c1'</span><span style="color: #007700">, </span><span style="color: #0000BB">$c1</span><span style="color: #007700">);   </span><span style="color: #FF8000">// Вставить строку используя c1<br /></span><span style="color: #0000BB">sleep</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">);                 </span><span style="color: #FF8000">// остановиться для записи другой временной метки для следующей строки<br /></span><span style="color: #0000BB">insert_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'c2'</span><span style="color: #007700">, </span><span style="color: #0000BB">$c2</span><span style="color: #007700">);   </span><span style="color: #FF8000">// Вставить строку используя c2<br /><br /></span><span style="color: #0000BB">select_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'c1'</span><span style="color: #007700">, </span><span style="color: #0000BB">$c1</span><span style="color: #007700">);   </span><span style="color: #FF8000">// Возврат результата обоих вставок<br /></span><span style="color: #0000BB">select_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'c2'</span><span style="color: #007700">, </span><span style="color: #0000BB">$c2</span><span style="color: #007700">);   </span><span style="color: #FF8000">// Возврат результата обоих вставок<br /><br /></span><span style="color: #0000BB">rollback</span><span style="color: #007700">(</span><span style="color: #DD0000">'c1'</span><span style="color: #007700">, </span><span style="color: #0000BB">$c1</span><span style="color: #007700">);      </span><span style="color: #FF8000">// Откат используя c1<br /><br /></span><span style="color: #0000BB">select_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'c1'</span><span style="color: #007700">, </span><span style="color: #0000BB">$c1</span><span style="color: #007700">);   </span><span style="color: #FF8000">// Откат был произведён для обоих вставок<br /></span><span style="color: #0000BB">select_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'c2'</span><span style="color: #007700">, </span><span style="color: #0000BB">$c2</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">drop_table</span><span style="color: #007700">(</span><span style="color: #0000BB">$c1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Закрытие одного из соединений делает переменную PHP недоступной, но<br />// другие могут быть использованы<br /></span><span style="color: #0000BB">oci_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$c1</span><span style="color: #007700">);<br />echo </span><span style="color: #DD0000">"c1 is </span><span style="color: #0000BB">$c1</span><span style="color: #DD0000">&lt;br&gt;\n"</span><span style="color: #007700">;<br />echo </span><span style="color: #DD0000">"c2 is </span><span style="color: #0000BB">$c2</span><span style="color: #DD0000">&lt;br&gt;\n"</span><span style="color: #007700">;<br /><br /><br /></span><span style="color: #FF8000">// Вывод is:<br />//    c1 is Resource id #5<br />//    c2 is Resource id #5<br />//    Created table<br />//    c1 inserted row without committing<br />//    c2 inserted row without committing<br />//    c1 ----selecting<br />//        09-DEC-09 12:14:43<br />//        09-DEC-09 12:14:45<br />//    c1 ----done<br />//    c2 ----selecting<br />//        09-DEC-09 12:14:43<br />//        09-DEC-09 12:14:45<br />//    c2 ----done<br />//    c1 rollback<br />//    c1 ----selecting<br />//    c1 ----done<br />//    c2 ----selecting<br />//    c2 ----done<br />//    Dropped table<br />//    c1 is<br />//    c2 is Resource id #5<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.oci-connect-notes">
  <h3 class="title">Примечания</h3>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Некорректно установленный или настроенный модуль OCI8 будет
    часто сообщать о проблемах соединения или ошибках.
    Смотрите <a href="oci8.setup.php.html" class="link">Установка/Настройка</a> для
    решения проблем.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.oci-connect-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.oci-pconnect.php.html" class="function" rel="rdfs-seeAlso">oci_pconnect()</a> - Устанавливает постоянное соединение с сервером Oracle</span></li>
    <li class="member"><span class="function"><a href="function.oci-new-connect.php.html" class="function" rel="rdfs-seeAlso">oci_new_connect()</a> - Устанавливает новое соединение с сервером Oracle</span></li>
    <li class="member"><span class="function"><a href="function.oci-close.php.html" class="function" rel="rdfs-seeAlso">oci_close()</a> - Закрывает соединение с сервером Oracle</span></li>
   </ul>
  </p>
 </div>


</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.oci-connect&amp;redirect=https://www.php.net/manual/ru/function.oci-connect.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">12 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="90816">  <div class="votes">
    <div id="Vu90816">
    <a href="https://www.php.net/manual/vote-note.php?id=90816&amp;page=function.oci-connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd90816">
    <a href="https://www.php.net/manual/vote-note.php?id=90816&amp;page=function.oci-connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V90816" title="58% like this...">
    8
    </div>
  </div>
  <a href="function.oci-connect.php.html#90816" class="name">
  <strong class="user"><em>Leandro da Cunha Campos</em></strong></a><a class="genanchor" href="function.oci-connect.php.html#90816"> &para;</a><div class="date" title="2009-05-11 11:04"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom90816">
<div class="phpcode"><code><span class="html">ONE ALTERNATIVE OF CONNECT IN ORACLE RAC "Real Application Clusters"<br /><br /><span class="default">&lt;?php<br />$dbstr </span><span class="keyword">=</span><span class="string">"(DESCRIPTION =(ADDRESS = (PROTOCOL = TCP)(HOST =ip1)(PORT = 1521))<br />(CONNECT_DATA =<br />(SERVER = DEDICATED)<br />(SERVICE_NAME = banco)<br />(INSTANCE_NAME = banco1)))"</span><span class="keyword">; <br /> <br /></span><span class="default">$dbstr1 </span><span class="keyword">=</span><span class="string">"(DESCRIPTION =(ADDRESS = (PROTOCOL = TCP)(HOST =ip2)(PORT = 1521))<br />(CONNECT_DATA =<br />(SERVER = DEDICATED)<br />(SERVICE_NAME = banco)<br />(INSTANCE_NAME = banco2)))"</span><span class="keyword">; <br /> <br />if(!@(</span><span class="default">$conn </span><span class="keyword">= </span><span class="default">oci_connect</span><span class="keyword">(</span><span class="string">'user'</span><span class="keyword">,</span><span class="string">'password'</span><span class="keyword">,</span><span class="default">$dbstr1</span><span class="keyword">)))<br />{ </span><span class="default">$conn </span><span class="keyword">= </span><span class="default">oci_connect</span><span class="keyword">(</span><span class="string">'user'</span><span class="keyword">,</span><span class="string">'password'</span><span class="keyword">,</span><span class="default">$dbstr</span><span class="keyword">) or die (</span><span class="default">ocierror</span><span class="keyword">()); }<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="27061">  <div class="votes">
    <div id="Vu27061">
    <a href="https://www.php.net/manual/vote-note.php?id=27061&amp;page=function.oci-connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd27061">
    <a href="https://www.php.net/manual/vote-note.php?id=27061&amp;page=function.oci-connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V27061" title="55% like this...">
    11
    </div>
  </div>
  <a href="function.oci-connect.php.html#27061" class="name">
  <strong class="user"><em>M0no at ethonfusino dot com</em></strong></a><a class="genanchor" href="function.oci-connect.php.html#27061"> &para;</a><div class="date" title="2002-11-21 10:04"><strong>21 years ago</strong></div>
  <div class="text" id="Hcom27061">
<div class="phpcode"><code><span class="html">If your oracle database is on a remote system within your local network and you don't want to worry about the tnsnames file you can try this.<br /><br />$db = "(DESCRIPTION=(ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.XX.XXX)(PORT = 1521)))(CONNECT_DATA=(SID=XXXX)))";<br /><br />$c1 = ocilogon("name","password",$db);<br /><br />Hope this helps someone.</span></code></div>
  </div>
 </div>
  <div class="note" id="69645">  <div class="votes">
    <div id="Vu69645">
    <a href="https://www.php.net/manual/vote-note.php?id=69645&amp;page=function.oci-connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd69645">
    <a href="https://www.php.net/manual/vote-note.php?id=69645&amp;page=function.oci-connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V69645" title="53% like this...">
    2
    </div>
  </div>
  <a href="function.oci-connect.php.html#69645" class="name">
  <strong class="user"><em>sebastien.barbieri _at_ gmail dot com</em></strong></a><a class="genanchor" href="function.oci-connect.php.html#69645"> &para;</a><div class="date" title="2006-09-13 09:42"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom69645">
<div class="phpcode"><code><span class="html">When you are using Oracle 9.2+ I would say that you MUST use the CHARSET parameter.<br /><br />Of course, you will not notice it until there is accented character... so just specify it and you will avoid a big headache.<br /><br />So for example here is our Oracle internal conf:<br />select * from nls_database_parameters;<br /> <br />PARAMETER                      VALUE<br />------------------------------ ----------------------------------------<br />…<br />NLS_LANGUAGE                   AMERICAN<br />NLS_TERRITORY                  AMERICA<br />NLS_ISO_CURRENCY               AMERICA<br />NLS_CHARACTERSET               WE8ISO8859P15<br />…<br /> <br />And there our oci_connect call:<br /><br />$dbch=ocilogon($user,$pass,$connectString,"WE8ISO8859P15");<br /><br />Without that, you will get question mark (inversed), squares… instead of most accented character.<br /><br />Don’t forget to use that for writing as well as for reading.</span></code></div>
  </div>
 </div>
  <div class="note" id="91988">  <div class="votes">
    <div id="Vu91988">
    <a href="https://www.php.net/manual/vote-note.php?id=91988&amp;page=function.oci-connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd91988">
    <a href="https://www.php.net/manual/vote-note.php?id=91988&amp;page=function.oci-connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V91988" title="53% like this...">
    1
    </div>
  </div>
  <a href="function.oci-connect.php.html#91988" class="name">
  <strong class="user"><em>drew dot carmichael at gmail dot com</em></strong></a><a class="genanchor" href="function.oci-connect.php.html#91988"> &para;</a><div class="date" title="2009-07-03 01:55"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom91988">
<div class="phpcode"><code><span class="html">When using the OCI_CRED_EXT in php <br />if the ENV $ORACLE_SID is set the DB does not need to be specified explicitly and the connection will fail unless you provide a NULL DB value when creating the connection. <br /><br />The $ORACLE_SID trumps the TNS name look up for the connection. So even a manual connection string in the DB parameter will fail.<br /><br />So when the $ORACLE_SID Env is set a NULL passed instead of the DB name connects successfully. <br /><br />Hope this saves some hair pulling when moving to %.3 and OS Authentications</span></code></div>
  </div>
 </div>
  <div class="note" id="98431">  <div class="votes">
    <div id="Vu98431">
    <a href="https://www.php.net/manual/vote-note.php?id=98431&amp;page=function.oci-connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd98431">
    <a href="https://www.php.net/manual/vote-note.php?id=98431&amp;page=function.oci-connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V98431" title="52% like this...">
    1
    </div>
  </div>
  <a href="function.oci-connect.php.html#98431" class="name">
  <strong class="user"><em>Jonathon Robinson</em></strong></a><a class="genanchor" href="function.oci-connect.php.html#98431"> &para;</a><div class="date" title="2010-06-15 11:12"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom98431">
<div class="phpcode"><code><span class="html">Regarding the following statement in the documentation:<br />"The second and subsequent calls to oci_connect() with the same parameters will return the connection handle returned from the first call."<br /><br />There's one caveat here.  Subsequent calls to oci_connect() will only return the same connection handle as the first call as long as a reference is held to the original handle.<br /><br />For example, the following code will generate *one* connection handle:<br /><br /><span class="default">&lt;?php<br />$dbh </span><span class="keyword">= </span><span class="default">oci_connect</span><span class="keyword">(</span><span class="default">$username</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">, </span><span class="default">$conn_info</span><span class="keyword">);<br /></span><span class="comment">// Do stuff<br /></span><span class="default">$dbh </span><span class="keyword">= </span><span class="default">oci_connect$username</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">, </span><span class="default">$conn_info</span><span class="keyword">);<br /></span><span class="comment">// Do more stuff<br /><br /></span><span class="default">The follow code will generate </span><span class="keyword">*</span><span class="default">two</span><span class="keyword">* </span><span class="default">connection handles</span><span class="keyword">:<br /></span><span class="default">getData</span><span class="keyword">();<br /></span><span class="comment">// Do stuff<br /></span><span class="default">getData</span><span class="keyword">();<br /></span><span class="comment">// Do more stuff<br /><br /></span><span class="default">getData</span><span class="keyword">() {<br />    </span><span class="default">$dbh </span><span class="keyword">= </span><span class="default">oci_connect</span><span class="keyword">(</span><span class="default">$username</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">, </span><span class="default">$conn_info</span><span class="keyword">);<br />    </span><span class="comment">// Do stuff<br /></span><span class="keyword">}<br /></span><span class="default">?&gt;<br /></span><br />This is the result of PHP garbage collecting the handle at the end of the method scope.<br /><br />If you want to isolate your DB layer through function calls but still want to leverage the fact that oci_connect can return the same handle, just keep a reference to the handle like so:<br /><br /><span class="default">&lt;?php<br />getData</span><span class="keyword">(</span><span class="default">$username</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">, </span><span class="default">$conn_info</span><span class="keyword">) {<br />    </span><span class="default">$dbh </span><span class="keyword">= </span><span class="default">oci_connect</span><span class="keyword">(</span><span class="default">$username</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">, </span><span class="default">$conn_info</span><span class="keyword">);<br />    </span><span class="default">$key </span><span class="keyword">= </span><span class="default">hash</span><span class="keyword">(</span><span class="string">'md5'</span><span class="keyword">, </span><span class="string">"</span><span class="default">$username</span><span class="string">|</span><span class="default">$password</span><span class="string">|</span><span class="default">$conn_info</span><span class="string">"</span><span class="keyword">);<br />    </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$dbh</span><span class="keyword">;<br />    </span><span class="comment">// Do stuff<br /></span><span class="keyword">}<br /></span><span class="default">?&gt;<br /></span><br />I originally logged this as a bug but apparently this is the expected behaviour, likely because oci_close($dbh) just calls unset($dbh).</span></code></div>
  </div>
 </div>
  <div class="note" id="84144">  <div class="votes">
    <div id="Vu84144">
    <a href="https://www.php.net/manual/vote-note.php?id=84144&amp;page=function.oci-connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd84144">
    <a href="https://www.php.net/manual/vote-note.php?id=84144&amp;page=function.oci-connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V84144" title="52% like this...">
    1
    </div>
  </div>
  <a href="function.oci-connect.php.html#84144" class="name">
  <strong class="user"><em>sixd at php dot net</em></strong></a><a class="genanchor" href="function.oci-connect.php.html#84144"> &para;</a><div class="date" title="2008-06-30 04:33"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom84144">
<div class="phpcode"><code><span class="html">If you want to specify a connection timeout in case there is network problem, you can edit the client side (e.g. PHP side) sqlnet.ora file and set SQLNET.OUTBOUND_CONNECT_TIMEOUT. This sets the upper time limit for establishing a connection right through to the DB, including the time for attempts to connect to other services.   It is available from Oracle 10.2.0.3 onwards.<br /><br />In Oracle 11.1, a slightly lighter-weight solution TCP.CONNECT_TIMEOUT was introduced.  It also is a sqlnet.ora parameter.  It bounds just the TCP connection establishment time, which is mostly where connection problem are seen.<br /><br />The client sqlnet.ora file should be put in the same directory as the tnsnames.ora file.</span></code></div>
  </div>
 </div>
  <div class="note" id="111614">  <div class="votes">
    <div id="Vu111614">
    <a href="https://www.php.net/manual/vote-note.php?id=111614&amp;page=function.oci-connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd111614">
    <a href="https://www.php.net/manual/vote-note.php?id=111614&amp;page=function.oci-connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V111614" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.oci-connect.php.html#111614" class="name">
  <strong class="user"><em>blake dot lewis at gmail dot com</em></strong></a><a class="genanchor" href="function.oci-connect.php.html#111614"> &para;</a><div class="date" title="2013-03-08 03:10"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom111614">
<div class="phpcode"><code><span class="html">Using ldap for Oracle name resolution:<br /><br />  The web server will need the environmental variable TNS_ADMIN='Directory of tnsname.ora' unless the default location is used. I use '/etc/tns_admin'. Confirm using the phpinfo().<br /><br />  There are three files needed in the TNS_ADMIN location: tnsnames.ora, sqlnet.ora and ldap.ora. If you are only using ldap, tnsnames.ora is not needed.<br /><br />  To sqlnet.ora add:<br />     NAMES.DIRECTORY_PATH=(TNSNAMES,LDAP)<br /><br />  To ldap.ora add:<br />     DIRECTORY_SERVERS=(ldap_server_fqdn:port)<br />     DEFAULT_ADMIN_CONTEXT=""<br />     DIRECTORY_SERVER_TYPE=OID<br /><br />  For a quick and dirty ldap tnsnames server use tnsManager by Dave Berry. Oracle OID or Openldap can used, but are complicated to setup. tnsManager is a no brainer. The quick part: give it a tnsnames.ora file and start it up. The dirty parts: I can't get Toad and SQLDeveloper to work with it, it ignores the domain and it is no longer being maintained.<br /><br />  The order of values in NAMES.DIRECTORY_PATH in sqlnet.ora determines which look up 'adapter' is used, in this case it is tnsnames.ora file and then ldap. I use ldap for general consumption and tnsnames.ora file to override ldap or entries that are not for general consumption.<br /><br />  If you have the full Oracle client you have tnsping. 'tnsping ORACLE_SID' will tell you what adapter you are using: 'Used LDAP adapter to resolve the alias'.<br /><br /><span class="default">&lt;?php<br />  </span><span class="keyword">echo </span><span class="default">system</span><span class="keyword">(</span><span class="string">"/PATH/tnsping "</span><span class="keyword">.</span><span class="default">$ORACLE_SID</span><span class="keyword">.</span><span class="string">" 2&gt;&amp;1"</span><span class="keyword">).</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br />  echo </span><span class="string">'TNS_ADMIN='</span><span class="keyword">.</span><span class="default">getenv</span><span class="keyword">(</span><span class="string">'TNS_ADMIN'</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />ISSUE:<br />  If connecting with only ORACLE_SID and not ORACLE_SID.DB_DOMAIN, the value of NAMES.DEFAULT_DOMAIN from sqlnet.ora is appended, then for some reason PHP tries the HOSTNAME adapter, and if the database name resolves in DNS, it will fail connecting using the database name as the hostname, because neither SID nor SERVICE_NAME are defined.<br />  If using tnsManager append '.ANY_DOMAIN' to $ORACLE_SID to hack around the issue above.<br /><br />  I have tested with:<br />       11.1.0.7 full client and PHP 5.1.6<br />       11.2.0.2 full client and PHP 5.4.11<br /><br />  I have heard that LDAP lookup does not work with older instantclients.</span></code></div>
  </div>
 </div>
  <div class="note" id="54755">  <div class="votes">
    <div id="Vu54755">
    <a href="https://www.php.net/manual/vote-note.php?id=54755&amp;page=function.oci-connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd54755">
    <a href="https://www.php.net/manual/vote-note.php?id=54755&amp;page=function.oci-connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V54755" title="37% like this...">
    -4
    </div>
  </div>
  <a href="function.oci-connect.php.html#54755" class="name">
  <strong class="user"><em>ben at onshop dot co dot uk</em></strong></a><a class="genanchor" href="function.oci-connect.php.html#54755"> &para;</a><div class="date" title="2005-07-14 05:25"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom54755">
<div class="phpcode"><code><span class="html">There is a useful solution to the problem of securing connection information in the PHP Cookbook (O'Reilly) by David Sklar and Adam Trachtenberg. They propose using 'SetEnv' in the Apache configuration and then accessing the values from within a script using $_SERVER.<br /><br />Unfortunately using the 'SetEnv' solution exposes your connection information to all users of that virtual host. If they run phpinfo.php or display $_SERVER, I found that they will see the password from any file under the root of that virtual host.<br /><br />To restrict exposure to a particular directory or specific file:<br /><br />1. First put an 'Include' to the secret file in httpd.conf. For example:<br /><br />Include "/web/private/secret.txt"<br /><br />2. In the password file, use the 'SetEnvIf' directive to enable the Environment variables by directory only or within a specific file. For example:<br /><br />- For all files in the directory:<br /><br />SetEnvIf Request_URI "/path/to/my/directory" ORACLE_PASS=5gHj790j<br /><br />- For a specific file in the directory<br /><br />SetEnvIf Request_URI "/path/to/my/directory/connection.oracle.php" ORACLE_PASS=5gHj790j</span></code></div>
  </div>
 </div>
  <div class="note" id="102294">  <div class="votes">
    <div id="Vu102294">
    <a href="https://www.php.net/manual/vote-note.php?id=102294&amp;page=function.oci-connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd102294">
    <a href="https://www.php.net/manual/vote-note.php?id=102294&amp;page=function.oci-connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V102294" title="38% like this...">
    -6
    </div>
  </div>
  <a href="function.oci-connect.php.html#102294" class="name">
  <strong class="user"><em>jtacon at php dot net</em></strong></a><a class="genanchor" href="function.oci-connect.php.html#102294"> &para;</a><div class="date" title="2011-02-07 05:24"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom102294">
<div class="phpcode"><code><span class="html">If you upgrades the OCI8, be sure to use the latest oracle instantclient version, otherwise you can receive an "ORA-24315: illegal attribute type" when trying to connect due to incompatibility with some versions.<br /><br />HTH,<br />Javier Tacón</span></code></div>
  </div>
 </div>
  <div class="note" id="111400">  <div class="votes">
    <div id="Vu111400">
    <a href="https://www.php.net/manual/vote-note.php?id=111400&amp;page=function.oci-connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd111400">
    <a href="https://www.php.net/manual/vote-note.php?id=111400&amp;page=function.oci-connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V111400" title="35% like this...">
    -5
    </div>
  </div>
  <a href="function.oci-connect.php.html#111400" class="name">
  <strong class="user"><em>blake dot lewis at gmail dot com</em></strong></a><a class="genanchor" href="function.oci-connect.php.html#111400"> &para;</a><div class="date" title="2013-02-15 11:38"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom111400">
<div class="phpcode"><code><span class="html">Using ldap for Oracle name resolution:<br /><br />  The web server needs the environmental variable TNS_ADMIN='Directory of tnsname.ora'. I use '/etc/tns_admin'. Confirm using the phpinfo() function.<br /><br />  There are three files needed in the TNS_ADMIN location: tnsnames.ora, sqlnet.ora and ldap.ora. If you are only using ldap, tnsnames.ora is not needed.<br /><br />  To sqlnet.ora add: <br />     NAMES.DIRECTORY_PATH=(TNSNAMES,LDAP)<br /><br />  To ldap.ora add:<br />     DIRECTORY_SERVERS=(ldap_fqdn_hostname:1575)<br />     DEFAULT_ADMIN_CONTEXT=""<br />     DIRECTORY_SERVER_TYPE=OID<br /><br />  For a quick and dirty ldap tnsnames server use tnsManager by Dave Berry. Oracle OID or Openldap can used, but are complicated to setup. tnsManager is a no brainer. The default port is 1575.<br /><br />  The order of values in NAMES.DIRECTORY_PATH from sqlnet.ora determines which look up 'adapter' is used first, in this case it is tnsnames.ora file and then ldap. I use ldap for general consumption and tnsnames.ora file to override ldap or entries that are not for general consumption.<br /><br />  If you have the full Oracle client you have tnsping. 'tnsping ORACLE_SID' will tell you what adapter you are using: 'Used LDAP adapter to resolve the alias'.<br /><br /><span class="default">&lt;?php<br />  </span><span class="keyword">echo </span><span class="default">system</span><span class="keyword">(</span><span class="string">"/PATH/tnsping "</span><span class="keyword">.</span><span class="default">$ORACLE_SID</span><span class="keyword">.</span><span class="string">" 2&gt;&amp;1"</span><span class="keyword">).</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br />  echo </span><span class="string">'TNS_ADMIN='</span><span class="keyword">.</span><span class="default">getenv</span><span class="keyword">(</span><span class="string">'TNS_ADMIN'</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />ISSUE:<br />  For some reason PHP tries the HOSTNAME adapter first, and if the database name resolves in DNS, it will try connecting using the database name as the hostname with no SID or SERVICE_NAME defined. All other Oracle clients I have used will not try the HOSTNAME adapter unless it is listed in NAMES.DIRECTORY_PATH.<br />  I have heard that LDAP look up does not work with older instantclients.</span></code></div>
  </div>
 </div>
  <div class="note" id="107465">  <div class="votes">
    <div id="Vu107465">
    <a href="https://www.php.net/manual/vote-note.php?id=107465&amp;page=function.oci-connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd107465">
    <a href="https://www.php.net/manual/vote-note.php?id=107465&amp;page=function.oci-connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V107465" title="27% like this...">
    -8
    </div>
  </div>
  <a href="function.oci-connect.php.html#107465" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.oci-connect.php.html#107465"> &para;</a><div class="date" title="2012-02-10 06:33"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom107465">
<div class="phpcode"><code><span class="html">How to connect from PHP to an Oracle database using OID (Oracle Internet Directory):<br /><br />OID is like a lookup index that contains connection strings for connecting to various databases. Without OID, a database connection string would be stored directly in the code settings and used by the PHP code to connect to a database. With OID, a lookup can be made to the OID LDAP to acquire the database connection string. Then the PHP code will use the acquired database connection string to connect to the database as before.<br /><br />OID allows a DBA to manage/change which database server that an application uses without having to change any database settings in the PHP application itself or on the application server.<br /><br />Here are the basic steps for PHP to connect to a database via OID:<br /><br />- The DBA should provide you the connection information for the OID LDAP as well as the username/password for the database connection.<br />- Connect to the OID LDAP using the provided information<br />- Search for the appropriate LDAP record<br />- Get the connection string data from the record attribute, \&amp;quot;orclnetdescstring\&amp;quot;<br />- Close the LDAP connection<br />- Use the acquired connection string data to connect to the database as usual using the provided database username/password.<br /><br />Here is basic sample code to do this:<br /><br />// Get connection string from OID LDAP<br /><br />    $ds=ldap_connect($servername,$serverport); // Connect to ldap<br />    $r=ldap_bind($ds); // Bind to ldap<br />    $sr = ldap_search($ds, \&amp;quot;cn=OracleContext,dc=___,dc=___,dc=___\&amp;quot;, \&amp;quot;cn=$sid\&amp;quot;); // Run query<br />    $info = ldap_get_entries($ds, $sr); // Get entries<br />    ldap_close($ds); // Close connection<br /><br />    $dbconnectstring = $info[0][\&amp;quot;orclnetdescstring\&amp;quot;][0]; // Extract db connect string from ldap search result array<br /><br />// Connect to database using acquired connection string from OID<br /><br />    $dbconnection = oci_connect ($username,$password,$dbconnectstring);</span></code></div>
  </div>
 </div>
  <div class="note" id="105284">  <div class="votes">
    <div id="Vu105284">
    <a href="https://www.php.net/manual/vote-note.php?id=105284&amp;page=function.oci-connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd105284">
    <a href="https://www.php.net/manual/vote-note.php?id=105284&amp;page=function.oci-connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V105284" title="36% like this...">
    -13
    </div>
  </div>
  <a href="function.oci-connect.php.html#105284" class="name">
  <strong class="user"><em>peter at goldthorp dot com</em></strong></a><a class="genanchor" href="function.oci-connect.php.html#105284"> &para;</a><div class="date" title="2011-08-07 03:28"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom105284">
<div class="phpcode"><code><span class="html">I started getting "ORA-12514: TNS:listener does not currently know of service requested in connect descriptor" errors when I upgraded my database instance from 10.2 to 11.2.  For some reason it would not resolve the oci_connect calls with the Easy Connect syntax (easy connect calls from sqlplus were fine).  I was able to workaround the issue by passing a tns connect string:<br /><br /><span class="default">&lt;?php<br />$db </span><span class="keyword">= </span><span class="string">"(DESCRIPTION=(ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.XX.XXX)(PORT = 1521)))(CONNECT_DATA=(SID=XXXX)))"</span><span class="keyword">;<br /><br /></span><span class="default">$c1 </span><span class="keyword">= </span><span class="default">oci_connect</span><span class="keyword">(</span><span class="string">"name"</span><span class="keyword">,</span><span class="string">"password"</span><span class="keyword">,</span><span class="default">$db</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.oci-connect&amp;redirect=https://www.php.net/manual/ru/function.oci-connect.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.oci8.php.html">OCI8 Функции</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.oci-bind-array-by-name.php.html" title="oci_&#8203;bind_&#8203;array_&#8203;by_&#8203;name">oci_&#8203;bind_&#8203;array_&#8203;by_&#8203;name</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-bind-by-name.php.html" title="oci_&#8203;bind_&#8203;by_&#8203;name">oci_&#8203;bind_&#8203;by_&#8203;name</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-cancel.php.html" title="oci_&#8203;cancel">oci_&#8203;cancel</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-client-version.php.html" title="oci_&#8203;client_&#8203;version">oci_&#8203;client_&#8203;version</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-close.php.html" title="oci_&#8203;close">oci_&#8203;close</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-commit.php.html" title="oci_&#8203;commit">oci_&#8203;commit</a>
                        </li>
                                                <li class="current">
                            <a href="function.oci-connect.php.html" title="oci_&#8203;connect">oci_&#8203;connect</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-define-by-name.php.html" title="oci_&#8203;define_&#8203;by_&#8203;name">oci_&#8203;define_&#8203;by_&#8203;name</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-error.php.html" title="oci_&#8203;error">oci_&#8203;error</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-execute.php.html" title="oci_&#8203;execute">oci_&#8203;execute</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-fetch-all.php.html" title="oci_&#8203;fetch_&#8203;all">oci_&#8203;fetch_&#8203;all</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-fetch-array.php.html" title="oci_&#8203;fetch_&#8203;array">oci_&#8203;fetch_&#8203;array</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-fetch-assoc.php.html" title="oci_&#8203;fetch_&#8203;assoc">oci_&#8203;fetch_&#8203;assoc</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-fetch-object.php.html" title="oci_&#8203;fetch_&#8203;object">oci_&#8203;fetch_&#8203;object</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-fetch-row.php.html" title="oci_&#8203;fetch_&#8203;row">oci_&#8203;fetch_&#8203;row</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-fetch.php.html" title="oci_&#8203;fetch">oci_&#8203;fetch</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-field-is-null.php.html" title="oci_&#8203;field_&#8203;is_&#8203;null">oci_&#8203;field_&#8203;is_&#8203;null</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-field-name.php.html" title="oci_&#8203;field_&#8203;name">oci_&#8203;field_&#8203;name</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-field-precision.php.html" title="oci_&#8203;field_&#8203;precision">oci_&#8203;field_&#8203;precision</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-field-scale.php.html" title="oci_&#8203;field_&#8203;scale">oci_&#8203;field_&#8203;scale</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-field-size.php.html" title="oci_&#8203;field_&#8203;size">oci_&#8203;field_&#8203;size</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-field-type-raw.php.html" title="oci_&#8203;field_&#8203;type_&#8203;raw">oci_&#8203;field_&#8203;type_&#8203;raw</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-field-type.php.html" title="oci_&#8203;field_&#8203;type">oci_&#8203;field_&#8203;type</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-free-descriptor.php.html" title="oci_&#8203;free_&#8203;descriptor">oci_&#8203;free_&#8203;descriptor</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-free-statement.php.html" title="oci_&#8203;free_&#8203;statement">oci_&#8203;free_&#8203;statement</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-get-implicit-resultset.php.html" title="oci_&#8203;get_&#8203;implicit_&#8203;resultset">oci_&#8203;get_&#8203;implicit_&#8203;resultset</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-lob-copy.php.html" title="oci_&#8203;lob_&#8203;copy">oci_&#8203;lob_&#8203;copy</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-lob-is-equal.php.html" title="oci_&#8203;lob_&#8203;is_&#8203;equal">oci_&#8203;lob_&#8203;is_&#8203;equal</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-new-collection.php.html" title="oci_&#8203;new_&#8203;collection">oci_&#8203;new_&#8203;collection</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-new-connect.php.html" title="oci_&#8203;new_&#8203;connect">oci_&#8203;new_&#8203;connect</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-new-cursor.php.html" title="oci_&#8203;new_&#8203;cursor">oci_&#8203;new_&#8203;cursor</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-new-descriptor.php.html" title="oci_&#8203;new_&#8203;descriptor">oci_&#8203;new_&#8203;descriptor</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-num-fields.php.html" title="oci_&#8203;num_&#8203;fields">oci_&#8203;num_&#8203;fields</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-num-rows.php.html" title="oci_&#8203;num_&#8203;rows">oci_&#8203;num_&#8203;rows</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-parse.php.html" title="oci_&#8203;parse">oci_&#8203;parse</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-password-change.php.html" title="oci_&#8203;password_&#8203;change">oci_&#8203;password_&#8203;change</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-pconnect.php.html" title="oci_&#8203;pconnect">oci_&#8203;pconnect</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-register-taf-callback.php.html" title="oci_&#8203;register_&#8203;taf_&#8203;callback">oci_&#8203;register_&#8203;taf_&#8203;callback</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-result.php.html" title="oci_&#8203;result">oci_&#8203;result</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-rollback.php.html" title="oci_&#8203;rollback">oci_&#8203;rollback</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-server-version.php.html" title="oci_&#8203;server_&#8203;version">oci_&#8203;server_&#8203;version</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-set-action.php.html" title="oci_&#8203;set_&#8203;action">oci_&#8203;set_&#8203;action</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-set-call-timout.php.html" title="oci_&#8203;set_&#8203;call_&#8203;timeout">oci_&#8203;set_&#8203;call_&#8203;timeout</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-set-client-identifier.php.html" title="oci_&#8203;set_&#8203;client_&#8203;identifier">oci_&#8203;set_&#8203;client_&#8203;identifier</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-set-client-info.php.html" title="oci_&#8203;set_&#8203;client_&#8203;info">oci_&#8203;set_&#8203;client_&#8203;info</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-set-db-operation.php.html" title="oci_&#8203;set_&#8203;db_&#8203;operation">oci_&#8203;set_&#8203;db_&#8203;operation</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-set-edition.php.html" title="oci_&#8203;set_&#8203;edition">oci_&#8203;set_&#8203;edition</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-set-module-name.php.html" title="oci_&#8203;set_&#8203;module_&#8203;name">oci_&#8203;set_&#8203;module_&#8203;name</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-set-prefetch-lob.php.html" title="oci_&#8203;set_&#8203;prefetch_&#8203;lob">oci_&#8203;set_&#8203;prefetch_&#8203;lob</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-set-prefetch.php.html" title="oci_&#8203;set_&#8203;prefetch">oci_&#8203;set_&#8203;prefetch</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-statement-type.php.html" title="oci_&#8203;statement_&#8203;type">oci_&#8203;statement_&#8203;type</a>
                        </li>
                                                <li class="">
                            <a href="function.oci-unregister-taf-callback.php.html" title="oci_&#8203;unregister_&#8203;taf_&#8203;callback">oci_&#8203;unregister_&#8203;taf_&#8203;callback</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
