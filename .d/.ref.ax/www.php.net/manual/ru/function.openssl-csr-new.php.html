<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: openssl_csr_new - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.openssl-csr-new.php.html">
 <link rel="shorturl" href="https://www.php.net/openssl-csr-new">
 <link rel="alternate" href="https://www.php.net/openssl-csr-new" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.openssl.php.html">
 <link rel="prev" href="function.openssl-csr-get-subject.php.html">
 <link rel="next" href="function.openssl-csr-sign.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.openssl-csr-new.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.openssl-csr-new.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.openssl-csr-new.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.openssl-csr-new.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.openssl-csr-new.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.openssl-csr-new.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.openssl-csr-new.php" hreflang="pt_BR">
 <link rel="alternate" href="function.openssl-csr-new.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.openssl-csr-new.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.openssl-csr-new.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.openssl-csr-sign.php.html">
          openssl_csr_sign &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.openssl-csr-get-subject.php.html">
          &laquo; openssl_csr_get_subject        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.crypto.php.html'>Криптографические модули</a></li>      <li><a href='book.openssl.php.html'>OpenSSL</a></li>      <li><a href='ref.openssl.php.html'>Функции OpenSSL</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.openssl-csr-new.php'>English</option>
            <option value='de/function.openssl-csr-new.php'>German</option>
            <option value='es/function.openssl-csr-new.php'>Spanish</option>
            <option value='fr/function.openssl-csr-new.php'>French</option>
            <option value='it/function.openssl-csr-new.php'>Italian</option>
            <option value='ja/function.openssl-csr-new.php'>Japanese</option>
            <option value='pt_BR/function.openssl-csr-new.php'>Brazilian Portuguese</option>
            <option value='ru/function.openssl-csr-new.php' selected="selected">Russian</option>
            <option value='tr/function.openssl-csr-new.php'>Turkish</option>
            <option value='zh/function.openssl-csr-new.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/openssl/functions/openssl-csr-new.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.openssl-csr-new%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.openssl-csr-new" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">openssl_csr_new</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.2.0, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">openssl_csr_new</span> &mdash; <span class="dc-title">Генерирует <abbr title="Certificate Signing Request">CSR</abbr></span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.openssl-csr-new-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>openssl_csr_new</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">array</span> <code class="parameter">$distinguished_names</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="class.opensslasymmetrickey.php.html" class="type OpenSSLAsymmetricKey">OpenSSLAsymmetricKey</a></span> <code class="parameter reference">&$private_key</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">array</span><span class="type"></span></span> <code class="parameter">$options</code><span class="initializer"> = <strong><code>null</code></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">array</span><span class="type"></span></span> <code class="parameter">$extra_attributes</code><span class="initializer"> = <strong><code>null</code></strong></span></span><br>): <span class="type"><span class="type"><a href="class.opensslcertificatesigningrequest.php.html" class="type OpenSSLCertificateSigningRequest">OpenSSLCertificateSigningRequest</a></span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>openssl_csr_new()</strong></span> создаёт новый <abbr title="Certificate Signing Request">CSR</abbr>
   основываясь на информации указанной в параметре <code class="parameter">distinguished_names</code>.
  </p>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
<span class="simpara">
 Для корректной работы этой функции должен существовать правильный <var class="filename">openssl.cnf</var>.
 Для более подробной информации смотрите замечания под <a href="openssl.installation.php.html" class="link">разделом установки</a>.
</span>
</p></blockquote>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.openssl-csr-new-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">distinguished_names</code></dt>

     <dd>

      <p class="para">
       Уникальное имя (Distinguished Name) или поля субъекта для использования в
       сертификате.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">private_key</code></dt>

     <dd>

      <p class="para">
       Параметр <code class="parameter">private_key</code> должен быть задан закрытым ключом
       ранее сгенерированным функцией <span class="function"><a href="function.openssl-pkey-new.php.html" class="function">openssl_pkey_new()</a></span> (или
       полученный с помощью любой другой функции семейства openssl_pkey).
       Соответствующая открытая часть ключа будет использована для
       подписания <abbr title="Certificate Signing Request">CSR</abbr>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">options</code></dt>

     <dd>

      <p class="para">
       По умолчанию для инициализации запроса используется информация из
       вашего системного <code class="literal">openssl.conf</code>. Вы можете указать
       секцию конфигурационного файла путём задания ключа
       <code class="literal">config_section_section</code> в
       <code class="parameter">options</code>.  Также вы можете задать альтернативный
       файл конфигурации openssl путём задания ключа
       <code class="literal">config</code> значением пути до него.
       Соответствие ключей, указанных в <code class="parameter">options</code>
       ключам из <code class="literal">openssl.conf</code> представлено ниже.
       <table class="doctable table">
        <caption><strong>Переопределение конфигурации</strong></caption>
        
         <thead>
          <tr>
           <th>Ключ <code class="parameter">options</code></th>
           <th>Тип</th>
           <th>Соответствие в <code class="literal">openssl.conf</code></th>
           <th>Описание</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td>digest_alg</td>
           <td><span class="type">string</span></td>
           <td>default_md</td>
           <td>Один из методов <span class="function"><a href="function.openssl-get-md-methods.php.html" class="function">openssl_get_md_methods()</a></span></td>
          </tr>

          <tr>
           <td>x509_extensions</td>
           <td><span class="type">string</span></td>
           <td>x509_extensions</td>
           <td>Определяет, какое расширение должно использоваться для создания
            сертификата x509</td>
          </tr>

          <tr>
           <td>req_extensions</td>
           <td><span class="type">string</span></td>
           <td>req_extensions</td>
           <td>Определяет, какое расширение должно использоваться для создания <abbr title="Certificate Signing Request">CSR</abbr></td>
          </tr>

          <tr>
           <td>private_key_bits</td>
           <td><span class="type">int</span></td>
           <td>default_bits</td>
           <td>Задаёт, сколько бит должно использоваться для генерации закрытого
            ключа</td>
          </tr>

          <tr>
           <td>private_key_type</td>
           <td><span class="type">int</span></td>
           <td>none</td>
           <td>Задаёт тип создаваемого закрытого ключа. Одна из констант:
            <strong><code>OPENSSL_KEYTYPE_DSA</code></strong>,
            <strong><code>OPENSSL_KEYTYPE_DH</code></strong>,
            <strong><code>OPENSSL_KEYTYPE_RSA</code></strong> или
            <strong><code>OPENSSL_KEYTYPE_EC</code></strong>.
            По умолчанию <strong><code>OPENSSL_KEYTYPE_RSA</code></strong>.
           </td>
          </tr>

          <tr>
           <td>encrypt_key</td>
           <td><span class="type">bool</span></td>
           <td>encrypt_key</td>
           <td>Должен ли шифроваться (паролем) экспортируемый ключ?</td>
          </tr>

          <tr>
           <td>encrypt_key_cipher</td>
           <td><span class="type">int</span></td>
           <td>none</td>
           <td>
            Одна из <a href="openssl.ciphers.php.html" class="link">констант шифров</a>.
           </td>
          </tr>

          <tr>
           <td>curve_name</td>
           <td><span class="type">string</span></td>
           <td>none</td>
           <td>
            Одно из <span class="function"><a href="function.openssl-get-curve-names.php.html" class="function">openssl_get_curve_names()</a></span>.
           </td>
          </tr>

          <tr>
           <td>config</td>
           <td><span class="type">string</span></td>
           <td>N/A</td>
           <td>
            Путь до альтернативного файла конфигурации openssl.conf.
           </td>
          </tr>

         </tbody>
        
       </table>

      </p>
     </dd>

    
    
     <dt>
<code class="parameter">extra_attributes</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">extra_attributes</code> используется для указания дополнительных
       опций для <abbr title="Certificate Signing Request">CSR</abbr>. И <code class="parameter">distinguished_names</code>, и
       <code class="parameter">extra_attributes</code> являются ассоциативными массивами, ключи
       которых преобразуются в OI-ы и применяются к соответствующим частям
       запроса.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.openssl-csr-new-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает <abbr title="Certificate Signing Request">CSR</abbr> или <strong><code>false</code></strong> в случае возникновения ошибки.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.openssl-csr-new-changelog">
  <h3 class="title">Список изменений</h3>
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Версия</th>
       <th>Описание</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
      <td>8.0.0</td>
      <td>
       <code class="parameter">csr</code> теперь принимает экземпляр <span class="classname"><a href="class.opensslcertificatesigningrequest.php.html" class="classname">OpenSSLCertificateSigningRequest</a></span>;
       ранее принимался ресурс (<a href="language.types.resource.php.html" class="link">resource</a>) типа <code class="literal">OpenSSL X.509 CSR</code>.
      </td>
     </tr>

     <tr>
      <td>8.0.0</td>
      <td>
       <code class="parameter">private_key</code> теперь принимает экземпляр <span class="classname"><a href="class.opensslasymmetrickey.php.html" class="classname">OpenSSLAsymmetricKey</a></span>;
       ранее принимался ресурс (<a href="language.types.resource.php.html" class="link">resource</a>) типа <code class="literal">OpenSSL key</code>.
      </td>
     </tr>

      <tr>
       <td>7.1.0</td>
       <td>
        Параметр <code class="parameter">options</code> теперь поддерживает
        <code class="literal">curve_name</code>.
       </td>
      </tr>

     </tbody>
    
   </table>

 </div>


 <div class="refsect1 examples" id="refsect1-function.openssl-csr-new-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="example-2812">
    <p><strong>Пример #1 Создание самоподписанного сертификата</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// для сервера сертификации SSL, commonName является доменным именем<br />// для сертификатов S/MIME, commonName является владельцем расположения адреса email<br />// и поля идентификации относятся к владельцу домена или электронной почты,<br />// подлежащим защите<br /></span><span style="color: #0000BB">$dn </span><span style="color: #007700">= array(<br />    </span><span style="color: #DD0000">"countryName" </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"GB"</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">"stateOrProvinceName" </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"Somerset"</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">"localityName" </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"Glastonbury"</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">"organizationName" </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"The Brain Room Limited"</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">"organizationalUnitName" </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"PHP Documentation Team"</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">"commonName" </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"Wez Furlong"</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">"emailAddress" </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"wez@example.com"<br /></span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Создание пары закрытый/открытый ключ<br /></span><span style="color: #0000BB">$privkey </span><span style="color: #007700">= </span><span style="color: #0000BB">openssl_pkey_new</span><span style="color: #007700">(array(<br />    </span><span style="color: #DD0000">"private_key_bits" </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">2048</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">"private_key_type" </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">OPENSSL_KEYTYPE_RSA</span><span style="color: #007700">,<br />));<br /><br /></span><span style="color: #FF8000">// Создание CSR<br /></span><span style="color: #0000BB">$csr </span><span style="color: #007700">= </span><span style="color: #0000BB">openssl_csr_new</span><span style="color: #007700">(</span><span style="color: #0000BB">$dn</span><span style="color: #007700">, </span><span style="color: #0000BB">$privkey</span><span style="color: #007700">, array(</span><span style="color: #DD0000">'digest_alg' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'sha256'</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">// Создание самоподписанного сертификата со сроком жизни 365 дней<br /></span><span style="color: #0000BB">$x509 </span><span style="color: #007700">= </span><span style="color: #0000BB">openssl_csr_sign</span><span style="color: #007700">(</span><span style="color: #0000BB">$csr</span><span style="color: #007700">, </span><span style="color: #0000BB">null</span><span style="color: #007700">, </span><span style="color: #0000BB">$privkey</span><span style="color: #007700">, </span><span style="color: #0000BB">$days</span><span style="color: #007700">=</span><span style="color: #0000BB">365</span><span style="color: #007700">, array(</span><span style="color: #DD0000">'digest_alg' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'sha256'</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">// Сохранение закрытого ключа, CSR и самоподписанного сертификата<br /></span><span style="color: #0000BB">openssl_csr_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$csr</span><span style="color: #007700">, </span><span style="color: #0000BB">$csrout</span><span style="color: #007700">) and </span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$csrout</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">openssl_x509_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$x509</span><span style="color: #007700">, </span><span style="color: #0000BB">$certout</span><span style="color: #007700">) and </span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$certout</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">openssl_pkey_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$privkey</span><span style="color: #007700">, </span><span style="color: #0000BB">$pkeyout</span><span style="color: #007700">, </span><span style="color: #DD0000">"mypassword"</span><span style="color: #007700">) and </span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkeyout</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Покажем возникшие ошибки, если они были<br /></span><span style="color: #007700">while ((</span><span style="color: #0000BB">$e </span><span style="color: #007700">= </span><span style="color: #0000BB">openssl_error_string</span><span style="color: #007700">()) !== </span><span style="color: #0000BB">false</span><span style="color: #007700">) {<br />    echo </span><span style="color: #0000BB">$e </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>

   <div class="example" id="example-2815">
    <p><strong>Пример #2 Создание самоподписанного ECC сертификата (начиная с PHP 7.1.0)</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$subject </span><span style="color: #007700">= array(<br />    </span><span style="color: #DD0000">"commonName" </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"docs.php.net"</span><span style="color: #007700">,<br />);<br /><br /></span><span style="color: #FF8000">// Создание пары закрытый/открытый ключ<br /></span><span style="color: #0000BB">$private_key </span><span style="color: #007700">= </span><span style="color: #0000BB">openssl_pkey_new</span><span style="color: #007700">(array(<br />    </span><span style="color: #DD0000">"private_key_type" </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">OPENSSL_KEYTYPE_EC</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">"curve_name" </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'prime256v1'</span><span style="color: #007700">,<br />));<br /><br /></span><span style="color: #FF8000">// Создание CSR<br /></span><span style="color: #0000BB">$csr </span><span style="color: #007700">= </span><span style="color: #0000BB">openssl_csr_new</span><span style="color: #007700">(</span><span style="color: #0000BB">$subject</span><span style="color: #007700">, </span><span style="color: #0000BB">$private_key</span><span style="color: #007700">, array(</span><span style="color: #DD0000">'digest_alg' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'sha384'</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">// Создание самоподписанного EC сертификата<br /></span><span style="color: #0000BB">$x509 </span><span style="color: #007700">= </span><span style="color: #0000BB">openssl_csr_sign</span><span style="color: #007700">(</span><span style="color: #0000BB">$csr</span><span style="color: #007700">, </span><span style="color: #0000BB">null</span><span style="color: #007700">, </span><span style="color: #0000BB">$private_key</span><span style="color: #007700">, </span><span style="color: #0000BB">$days</span><span style="color: #007700">=</span><span style="color: #0000BB">365</span><span style="color: #007700">, array(</span><span style="color: #DD0000">'digest_alg' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'sha384'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">openssl_x509_export_to_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$x509</span><span style="color: #007700">, </span><span style="color: #DD0000">'ecc-cert.pem'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">openssl_pkey_export_to_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$private_key</span><span style="color: #007700">, </span><span style="color: #DD0000">'ecc-private.key'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>


  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.openssl-csr-new-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.openssl-csr-sign.php.html" class="function" rel="rdfs-seeAlso">openssl_csr_sign()</a> - Подписать CSR с помощью другого сертификата (или им же) и создать сертификат</span></li>
   </ul>
  </p>
 </div>


</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.openssl-csr-new&amp;redirect=https://www.php.net/manual/ru/function.openssl-csr-new.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">10 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="93618">  <div class="votes">
    <div id="Vu93618">
    <a href="https://www.php.net/manual/vote-note.php?id=93618&amp;page=function.openssl-csr-new&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd93618">
    <a href="https://www.php.net/manual/vote-note.php?id=93618&amp;page=function.openssl-csr-new&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V93618" title="72% like this...">
    11
    </div>
  </div>
  <a href="function.openssl-csr-new.php.html#93618" class="name">
  <strong class="user"><em>The_Lost_One</em></strong></a><a class="genanchor" href="function.openssl-csr-new.php.html#93618"> &para;</a><div class="date" title="2009-09-18 07:45"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom93618">
<div class="phpcode"><code><span class="html">Not sure whether the "bug" (undocumented behavior) I encountered is common to other people, but this comment might save hours of painful debug:<br />If you can't generate a new private key using openssl_pkey_new() or openssl_csr_new(), your script hangs during the call of these functions and in case you specified a "private_key_bits" parameter, ensure that you cast the variable to an int. Took me ages to notice that.<br /><br /><span class="default">&lt;?php<br />$SSLcnf </span><span class="keyword">= array(</span><span class="string">'config' </span><span class="keyword">=&gt; </span><span class="string">'/usr/local/nessy2/share/ssl/openssl.cnf'</span><span class="keyword">,<br />        </span><span class="string">'encrypt_key' </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,<br />        </span><span class="string">'private_key_type' </span><span class="keyword">=&gt; </span><span class="default">OPENSSL_KEYTYPE_RSA</span><span class="keyword">,<br />        </span><span class="string">'digest_alg' </span><span class="keyword">=&gt; </span><span class="string">'sha1'</span><span class="keyword">,<br />        </span><span class="string">'x509_extensions' </span><span class="keyword">=&gt; </span><span class="string">'v3_ca'</span><span class="keyword">,<br />        </span><span class="string">'private_key_bits' </span><span class="keyword">=&gt; </span><span class="default">$someVariable </span><span class="comment">// ---&gt; bad<br />        </span><span class="string">'private_key_bits' </span><span class="keyword">=&gt; (int)</span><span class="default">$someVariable </span><span class="comment">// ---&gt; good<br />        </span><span class="string">'private_key_bits' </span><span class="keyword">=&gt; </span><span class="default">512 </span><span class="comment">// ---&gt; obviously good<br />        </span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="117474">  <div class="votes">
    <div id="Vu117474">
    <a href="https://www.php.net/manual/vote-note.php?id=117474&amp;page=function.openssl-csr-new&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117474">
    <a href="https://www.php.net/manual/vote-note.php?id=117474&amp;page=function.openssl-csr-new&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117474" title="80% like this...">
    6
    </div>
  </div>
  <a href="function.openssl-csr-new.php.html#117474" class="name">
  <strong class="user"><em>james at kirk dot com</em></strong></a><a class="genanchor" href="function.openssl-csr-new.php.html#117474"> &para;</a><div class="date" title="2015-06-15 06:56"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom117474">
<div class="phpcode"><code><span class="html">When in doubt, read the source code to PHP!<br /><br />$configargs is fairly opaque as to what is going on behind the scenes.  That is, until you actually look at php_openssl_parse_config() in '/ext/openssl/openssl.c':<br /><br />    SET_OPTIONAL_STRING_ARG("digest_alg", req-&gt;digest_name,<br />        CONF_get_string(req-&gt;req_config, req-&gt;section_name, "default_md"));<br />    SET_OPTIONAL_STRING_ARG("x509_extensions", req-&gt;extensions_section,<br />        CONF_get_string(req-&gt;req_config, req-&gt;section_name, "x509_extensions"));<br />    SET_OPTIONAL_STRING_ARG("req_extensions", req-&gt;request_extensions_section,<br />        CONF_get_string(req-&gt;req_config, req-&gt;section_name, "req_extensions"));<br />    SET_OPTIONAL_LONG_ARG("private_key_bits", req-&gt;priv_key_bits,<br />        CONF_get_number(req-&gt;req_config, req-&gt;section_name, "default_bits"));<br /><br />    SET_OPTIONAL_LONG_ARG("private_key_type", req-&gt;priv_key_type, OPENSSL_KEYTYPE_DEFAULT);<br /><br />Here we can see that SET_OPTIONAL_STRING_ARG() is called for most inputs but for 'private_key_bits' SET_OPTIONAL_LONG_ARG() is called.  Both calls are C macros that expand to code that enforces the expected input type.  The generated code ignores the input without warning/notice if an unexpected type is used and just uses the default from the configuration file.  This is why using a string with 'private_key_bits' will result in unexpected behavior.<br /><br />Further inspection of the earlier initialization in the same function:<br /><br />    SET_OPTIONAL_STRING_ARG("config", req-&gt;config_filename, default_ssl_conf_filename);<br />    SET_OPTIONAL_STRING_ARG("config_section_name", req-&gt;section_name, "req");<br />    req-&gt;global_config = CONF_load(NULL, default_ssl_conf_filename, NULL);<br />    req-&gt;req_config = CONF_load(NULL, req-&gt;config_filename, NULL);<br /><br />    if (req-&gt;req_config == NULL) {<br />        return FAILURE;<br />    }<br /><br />And elsewhere in another function:<br /><br />    /* default to 'openssl.cnf' if no environment variable is set */<br />    if (config_filename == NULL) {<br />        snprintf(default_ssl_conf_filename, sizeof(default_ssl_conf_filename), "%s/%s",<br />                X509_get_default_cert_area(),<br />                "openssl.cnf");<br />    } else {<br />        strlcpy(default_ssl_conf_filename, config_filename, sizeof(default_ssl_conf_filename));<br />    }<br /><br />Reveals that 'config' in $configargs is an override for any default setting elsewhere.  This actually negates the comment in the documentation that says "Note: You need to have a valid openssl.cnf installed for this function to operate correctly. See the notes under the installation section for more information."  A more correct sentence would be "Note:  You need to either have a valid openssl.cnf set up or use $configargs to point at a valid openssl.cnf file for this function to operate correctly."<br /><br />All of that goes to show that looking at the PHP source code is the only real way to figure out what is actually happening.  Doing so saves time and effort.</span></code></div>
  </div>
 </div>
  <div class="note" id="116719">  <div class="votes">
    <div id="Vu116719">
    <a href="https://www.php.net/manual/vote-note.php?id=116719&amp;page=function.openssl-csr-new&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116719">
    <a href="https://www.php.net/manual/vote-note.php?id=116719&amp;page=function.openssl-csr-new&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116719" title="80% like this...">
    3
    </div>
  </div>
  <a href="function.openssl-csr-new.php.html#116719" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.openssl-csr-new.php.html#116719"> &para;</a><div class="date" title="2015-02-19 04:44"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom116719">
<div class="phpcode"><code><span class="html">For those of you using Debian-based systems, the openssl configuration file is at: /etc/ssl/openssl.cnf</span></code></div>
  </div>
 </div>
  <div class="note" id="85493">  <div class="votes">
    <div id="Vu85493">
    <a href="https://www.php.net/manual/vote-note.php?id=85493&amp;page=function.openssl-csr-new&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd85493">
    <a href="https://www.php.net/manual/vote-note.php?id=85493&amp;page=function.openssl-csr-new&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V85493" title="66% like this...">
    2
    </div>
  </div>
  <a href="function.openssl-csr-new.php.html#85493" class="name">
  <strong class="user"><em>main ATT jokester DOTT fr</em></strong></a><a class="genanchor" href="function.openssl-csr-new.php.html#85493"> &para;</a><div class="date" title="2008-09-02 08:09"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom85493">
<div class="phpcode"><code><span class="html">To set the "basicConstraints" to  "critical,CA:TRUE", you have to define configargs, but in the openssl_csr_sign() function !<br /><br />That's my example of code to sign a "child" certificate :<br /><br />$CAcrt = "file://ca.crt";<br />$CAkey = array("file://ca.key", "myPassWord");<br /><br />$clientKeys = openssl_pkey_new();<br />$dn = array(<br />    "countryName" =&gt; "FR",<br />    "stateOrProvinceName" =&gt; "Finistere",<br />    "localityName" =&gt; "Plouzane",<br />    "organizationName" =&gt; "Ecole Nationale d'Ingenieurs de Brest",<br />    "organizationalUnitName" =&gt; "Enib Students",<br />    "commonName" =&gt; "www.enib.fr",<br />    "emailAddress" =&gt; "ilovessl@php.net"<br />);<br />$csr = openssl_csr_new($dn, $clientPrivKey);<br /><br />$configArgs = array("x509_extensions" =&gt; "v3_req");<br />$cert = openssl_csr_sign($csr, $CAcrt, $CAkey, 100, $configArgs);<br /><br />openssl_x509_export_to_file($cert, "childCert.crt");<br /><br />Then if you want to add some more options, you can edit the "/etc/ssl/openssl.cnf" ssl config' file (debian path), and add these after the [ v3_req ] tag.</span></code></div>
  </div>
 </div>
  <div class="note" id="116357">  <div class="votes">
    <div id="Vu116357">
    <a href="https://www.php.net/manual/vote-note.php?id=116357&amp;page=function.openssl-csr-new&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116357">
    <a href="https://www.php.net/manual/vote-note.php?id=116357&amp;page=function.openssl-csr-new&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116357" title="60% like this...">
    3
    </div>
  </div>
  <a href="function.openssl-csr-new.php.html#116357" class="name">
  <strong class="user"><em>alex at nodex dot co dot uk</em></strong></a><a class="genanchor" href="function.openssl-csr-new.php.html#116357"> &para;</a><div class="date" title="2014-12-17 10:59"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom116357">
<div class="phpcode"><code><span class="html">In the PHP example above it uses "UK" as the country name which is incorrect, the country name must be "GB"</span></code></div>
  </div>
 </div>
  <div class="note" id="112732">  <div class="votes">
    <div id="Vu112732">
    <a href="https://www.php.net/manual/vote-note.php?id=112732&amp;page=function.openssl-csr-new&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd112732">
    <a href="https://www.php.net/manual/vote-note.php?id=112732&amp;page=function.openssl-csr-new&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V112732" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.openssl-csr-new.php.html#112732" class="name">
  <strong class="user"><em>Richard Lynch</em></strong></a><a class="genanchor" href="function.openssl-csr-new.php.html#112732"> &para;</a><div class="date" title="2013-07-17 03:49"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom112732">
<div class="phpcode"><code><span class="html">There appears to be no openssl_csr_free function.<br /><br />At least not here.<br /><br />If it's in the source, one might be able to just call it.<br /><br />If it's not in the source, it probably should be.</span></code></div>
  </div>
 </div>
  <div class="note" id="54149">  <div class="votes">
    <div id="Vu54149">
    <a href="https://www.php.net/manual/vote-note.php?id=54149&amp;page=function.openssl-csr-new&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd54149">
    <a href="https://www.php.net/manual/vote-note.php?id=54149&amp;page=function.openssl-csr-new&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V54149" title="no votes...">
    0
    </div>
  </div>
  <a href="function.openssl-csr-new.php.html#54149" class="name"><strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.openssl-csr-new.php.html#54149"> &para;</a><div class="date" title="2005-06-24 12:34"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom54149">
<div class="phpcode"><code><span class="html">If you get the error:<br /><br />error:0D11A086:asn1 encoding routines:ASN1_mbstring_copy:string too short<br /><br />then look at your key:value pairs in the $dn (distinguished name) array.<br /><br />If you have one value (like "organizationalUnitName" = "") set to an empty string, it will throw the above error.<br /><br />Fix the error by either eliminating that array element from $dn completely, or using a space " " instead of an empty string.</span></code></div>
  </div>
 </div>
  <div class="note" id="52805">  <div class="votes">
    <div id="Vu52805">
    <a href="https://www.php.net/manual/vote-note.php?id=52805&amp;page=function.openssl-csr-new&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd52805">
    <a href="https://www.php.net/manual/vote-note.php?id=52805&amp;page=function.openssl-csr-new&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V52805" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.openssl-csr-new.php.html#52805" class="name">
  <strong class="user"><em>robertliu AT wiscore DOT com</em></strong></a><a class="genanchor" href="function.openssl-csr-new.php.html#52805"> &para;</a><div class="date" title="2005-05-12 08:12"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom52805">
<div class="phpcode"><code><span class="html">I am using PHP-4.3.11.<br />The type of configargs--private_key_bits is a INTEGER, not a string.<br />An example of configration:<br /><span class="default">&lt;?php<br />$config </span><span class="keyword">= array(<br />  </span><span class="string">"digest_alg" </span><span class="keyword">=&gt; </span><span class="string">"sha1"</span><span class="keyword">,<br />  </span><span class="string">"private_key_bits" </span><span class="keyword">=&gt; </span><span class="default">2048</span><span class="keyword">,<br />  </span><span class="string">"private_key_type" </span><span class="keyword">=&gt; </span><span class="default">OPENSSL_KEYTYPE_DSA</span><span class="keyword">,<br />  </span><span class="string">"encrypt_key" </span><span class="keyword">=&gt; </span><span class="default">false<br /></span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="49820">  <div class="votes">
    <div id="Vu49820">
    <a href="https://www.php.net/manual/vote-note.php?id=49820&amp;page=function.openssl-csr-new&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd49820">
    <a href="https://www.php.net/manual/vote-note.php?id=49820&amp;page=function.openssl-csr-new&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V49820" title="0% like this...">
    -1
    </div>
  </div>
  <a href="function.openssl-csr-new.php.html#49820" class="name">
  <strong class="user"><em>dankybastard at hotmail</em></strong></a><a class="genanchor" href="function.openssl-csr-new.php.html#49820"> &para;</a><div class="date" title="2005-02-09 06:31"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom49820">
<div class="phpcode"><code><span class="html">As you probably guessed from the example, the documentation is misinforming.  openssl_csr_new returns a CSR resource or FALSE on failure.<br /><br />mixed openssl_csr_new (assoc_array dn, resource_privkey, [...])</span></code></div>
  </div>
 </div>
  <div class="note" id="120323">  <div class="votes">
    <div id="Vu120323">
    <a href="https://www.php.net/manual/vote-note.php?id=120323&amp;page=function.openssl-csr-new&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd120323">
    <a href="https://www.php.net/manual/vote-note.php?id=120323&amp;page=function.openssl-csr-new&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V120323" title="44% like this...">
    -1
    </div>
  </div>
  <a href="function.openssl-csr-new.php.html#120323" class="name">
  <strong class="user"><em>@operator</em></strong></a><a class="genanchor" href="function.openssl-csr-new.php.html#120323"> &para;</a><div class="date" title="2016-12-13 02:19"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom120323">
<div class="phpcode"><code><span class="html">One command to create modern certificate request with 4 SAN subdomain.<br />According to RFC you can change CN (common name) and subjectAltName. When cert validated searching in CN and subjectAltName.<br /><br />openssl req -new -nodes -config &lt;( cat &lt;&lt;-EOF<br />[req]<br />default_bits = 2048<br />prompt = no<br />default_md = sha256<br />req_extensions = re<br />distinguished_name = dn<br />[ dn ]<br />CN = my.tld<br />C = country<br />ST = state<br />L = location<br />O = ORGANISATION<br />[ re ]<br />subjectAltName = DNS.1: www.my.tld, DNS.2: www2.my.tld, DNS.3: www3.my.tld, DNS.4: www4.my.tld<br />EOF<br />) -keyout secret.key -out req.csr</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.openssl-csr-new&amp;redirect=https://www.php.net/manual/ru/function.openssl-csr-new.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.openssl.php.html">Функции OpenSSL</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.openssl-cipher-iv-length.php.html" title="openssl_&#8203;cipher_&#8203;iv_&#8203;length">openssl_&#8203;cipher_&#8203;iv_&#8203;length</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-cipher-key-length.php.html" title="openssl_&#8203;cipher_&#8203;key_&#8203;length">openssl_&#8203;cipher_&#8203;key_&#8203;length</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-cms-decrypt.php.html" title="openssl_&#8203;cms_&#8203;decrypt">openssl_&#8203;cms_&#8203;decrypt</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-cms-encrypt.php.html" title="openssl_&#8203;cms_&#8203;encrypt">openssl_&#8203;cms_&#8203;encrypt</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-cms-read.php.html" title="openssl_&#8203;cms_&#8203;read">openssl_&#8203;cms_&#8203;read</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-cms-sign.php.html" title="openssl_&#8203;cms_&#8203;sign">openssl_&#8203;cms_&#8203;sign</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-cms-verify.php.html" title="openssl_&#8203;cms_&#8203;verify">openssl_&#8203;cms_&#8203;verify</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-csr-export-to-file.php.html" title="openssl_&#8203;csr_&#8203;export_&#8203;to_&#8203;file">openssl_&#8203;csr_&#8203;export_&#8203;to_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-csr-export.php.html" title="openssl_&#8203;csr_&#8203;export">openssl_&#8203;csr_&#8203;export</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-csr-get-public-key.php.html" title="openssl_&#8203;csr_&#8203;get_&#8203;public_&#8203;key">openssl_&#8203;csr_&#8203;get_&#8203;public_&#8203;key</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-csr-get-subject.php.html" title="openssl_&#8203;csr_&#8203;get_&#8203;subject">openssl_&#8203;csr_&#8203;get_&#8203;subject</a>
                        </li>
                                                <li class="current">
                            <a href="function.openssl-csr-new.php.html" title="openssl_&#8203;csr_&#8203;new">openssl_&#8203;csr_&#8203;new</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-csr-sign.php.html" title="openssl_&#8203;csr_&#8203;sign">openssl_&#8203;csr_&#8203;sign</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-decrypt.php.html" title="openssl_&#8203;decrypt">openssl_&#8203;decrypt</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-dh-compute-key.php.html" title="openssl_&#8203;dh_&#8203;compute_&#8203;key">openssl_&#8203;dh_&#8203;compute_&#8203;key</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-digest.php.html" title="openssl_&#8203;digest">openssl_&#8203;digest</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-encrypt.php.html" title="openssl_&#8203;encrypt">openssl_&#8203;encrypt</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-error-string.php.html" title="openssl_&#8203;error_&#8203;string">openssl_&#8203;error_&#8203;string</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-free-key.php.html" title="openssl_&#8203;free_&#8203;key">openssl_&#8203;free_&#8203;key</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-get-cert-locations.php.html" title="openssl_&#8203;get_&#8203;cert_&#8203;locations">openssl_&#8203;get_&#8203;cert_&#8203;locations</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-get-cipher-methods.php.html" title="openssl_&#8203;get_&#8203;cipher_&#8203;methods">openssl_&#8203;get_&#8203;cipher_&#8203;methods</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-get-curve-names.php.html" title="openssl_&#8203;get_&#8203;curve_&#8203;names">openssl_&#8203;get_&#8203;curve_&#8203;names</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-get-md-methods.php.html" title="openssl_&#8203;get_&#8203;md_&#8203;methods">openssl_&#8203;get_&#8203;md_&#8203;methods</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-get-privatekey.php.html" title="openssl_&#8203;get_&#8203;privatekey">openssl_&#8203;get_&#8203;privatekey</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-get-publickey.php.html" title="openssl_&#8203;get_&#8203;publickey">openssl_&#8203;get_&#8203;publickey</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-open.php.html" title="openssl_&#8203;open">openssl_&#8203;open</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pbkdf2.php.html" title="openssl_&#8203;pbkdf2">openssl_&#8203;pbkdf2</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkcs12-export-to-file.php.html" title="openssl_&#8203;pkcs12_&#8203;export_&#8203;to_&#8203;file">openssl_&#8203;pkcs12_&#8203;export_&#8203;to_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkcs12-export.php.html" title="openssl_&#8203;pkcs12_&#8203;export">openssl_&#8203;pkcs12_&#8203;export</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkcs12-read.php.html" title="openssl_&#8203;pkcs12_&#8203;read">openssl_&#8203;pkcs12_&#8203;read</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkcs7-decrypt.php.html" title="openssl_&#8203;pkcs7_&#8203;decrypt">openssl_&#8203;pkcs7_&#8203;decrypt</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkcs7-encrypt.php.html" title="openssl_&#8203;pkcs7_&#8203;encrypt">openssl_&#8203;pkcs7_&#8203;encrypt</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkcs7-read.php.html" title="openssl_&#8203;pkcs7_&#8203;read">openssl_&#8203;pkcs7_&#8203;read</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkcs7-sign.php.html" title="openssl_&#8203;pkcs7_&#8203;sign">openssl_&#8203;pkcs7_&#8203;sign</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkcs7-verify.php.html" title="openssl_&#8203;pkcs7_&#8203;verify">openssl_&#8203;pkcs7_&#8203;verify</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkey-derive.php.html" title="openssl_&#8203;pkey_&#8203;derive">openssl_&#8203;pkey_&#8203;derive</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkey-export-to-file.php.html" title="openssl_&#8203;pkey_&#8203;export_&#8203;to_&#8203;file">openssl_&#8203;pkey_&#8203;export_&#8203;to_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkey-export.php.html" title="openssl_&#8203;pkey_&#8203;export">openssl_&#8203;pkey_&#8203;export</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkey-free.php.html" title="openssl_&#8203;pkey_&#8203;free">openssl_&#8203;pkey_&#8203;free</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkey-get-details.php.html" title="openssl_&#8203;pkey_&#8203;get_&#8203;details">openssl_&#8203;pkey_&#8203;get_&#8203;details</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkey-get-private.php.html" title="openssl_&#8203;pkey_&#8203;get_&#8203;private">openssl_&#8203;pkey_&#8203;get_&#8203;private</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkey-get-public.php.html" title="openssl_&#8203;pkey_&#8203;get_&#8203;public">openssl_&#8203;pkey_&#8203;get_&#8203;public</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-pkey-new.php.html" title="openssl_&#8203;pkey_&#8203;new">openssl_&#8203;pkey_&#8203;new</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-private-decrypt.php.html" title="openssl_&#8203;private_&#8203;decrypt">openssl_&#8203;private_&#8203;decrypt</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-private-encrypt.php.html" title="openssl_&#8203;private_&#8203;encrypt">openssl_&#8203;private_&#8203;encrypt</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-public-decrypt.php.html" title="openssl_&#8203;public_&#8203;decrypt">openssl_&#8203;public_&#8203;decrypt</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-public-encrypt.php.html" title="openssl_&#8203;public_&#8203;encrypt">openssl_&#8203;public_&#8203;encrypt</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-random-pseudo-bytes.php.html" title="openssl_&#8203;random_&#8203;pseudo_&#8203;bytes">openssl_&#8203;random_&#8203;pseudo_&#8203;bytes</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-seal.php.html" title="openssl_&#8203;seal">openssl_&#8203;seal</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-sign.php.html" title="openssl_&#8203;sign">openssl_&#8203;sign</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-spki-export-challenge.php.html" title="openssl_&#8203;spki_&#8203;export_&#8203;challenge">openssl_&#8203;spki_&#8203;export_&#8203;challenge</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-spki-export.php.html" title="openssl_&#8203;spki_&#8203;export">openssl_&#8203;spki_&#8203;export</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-spki-new.php.html" title="openssl_&#8203;spki_&#8203;new">openssl_&#8203;spki_&#8203;new</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-spki-verify.php.html" title="openssl_&#8203;spki_&#8203;verify">openssl_&#8203;spki_&#8203;verify</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-verify.php.html" title="openssl_&#8203;verify">openssl_&#8203;verify</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-x509-check-private-key.php.html" title="openssl_&#8203;x509_&#8203;check_&#8203;private_&#8203;key">openssl_&#8203;x509_&#8203;check_&#8203;private_&#8203;key</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-x509-checkpurpose.php.html" title="openssl_&#8203;x509_&#8203;checkpurpose">openssl_&#8203;x509_&#8203;checkpurpose</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-x509-export-to-file.php.html" title="openssl_&#8203;x509_&#8203;export_&#8203;to_&#8203;file">openssl_&#8203;x509_&#8203;export_&#8203;to_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-x509-export.php.html" title="openssl_&#8203;x509_&#8203;export">openssl_&#8203;x509_&#8203;export</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-x509-fingerprint.php.html" title="openssl_&#8203;x509_&#8203;fingerprint">openssl_&#8203;x509_&#8203;fingerprint</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-x509-free.php.html" title="openssl_&#8203;x509_&#8203;free">openssl_&#8203;x509_&#8203;free</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-x509-parse.php.html" title="openssl_&#8203;x509_&#8203;parse">openssl_&#8203;x509_&#8203;parse</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-x509-read.php.html" title="openssl_&#8203;x509_&#8203;read">openssl_&#8203;x509_&#8203;read</a>
                        </li>
                                                <li class="">
                            <a href="function.openssl-x509-verify.php.html" title="openssl_&#8203;x509_&#8203;verify">openssl_&#8203;x509_&#8203;verify</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
