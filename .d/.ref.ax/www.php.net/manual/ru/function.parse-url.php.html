<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: parse_url - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.parse-url.php.html">
 <link rel="shorturl" href="https://www.php.net/parse-url">
 <link rel="alternate" href="https://www.php.net/parse-url" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.url.php.html">
 <link rel="prev" href="function.http-build-query.php.html">
 <link rel="next" href="function.rawurldecode.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.parse-url.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.parse-url.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.parse-url.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.parse-url.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.parse-url.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.parse-url.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.parse-url.php" hreflang="pt_BR">
 <link rel="alternate" href="function.parse-url.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.parse-url.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.parse-url.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.rawurldecode.php.html">
          rawurldecode &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.http-build-query.php.html">
          &laquo; http_build_query        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.basic.other.php.html'>Другие базовые модули</a></li>      <li><a href='book.url.php.html'>URL</a></li>      <li><a href='ref.url.php.html'>Функции URL</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.parse-url.php'>English</option>
            <option value='de/function.parse-url.php'>German</option>
            <option value='es/function.parse-url.php'>Spanish</option>
            <option value='fr/function.parse-url.php'>French</option>
            <option value='it/function.parse-url.php'>Italian</option>
            <option value='ja/function.parse-url.php'>Japanese</option>
            <option value='pt_BR/function.parse-url.php'>Brazilian Portuguese</option>
            <option value='ru/function.parse-url.php' selected="selected">Russian</option>
            <option value='tr/function.parse-url.php'>Turkish</option>
            <option value='zh/function.parse-url.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/url/functions/parse-url.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.parse-url%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.parse-url" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">parse_url</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">parse_url</span> &mdash; <span class="dc-title">Разбирает URL и возвращает его компоненты</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.parse-url-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>parse_url</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$url</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$component</code><span class="initializer"> = -1</span></span>): <span class="type"><span class="type">int</span>|<span class="type">string</span>|<span class="type">array</span>|<span class="type">null</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   Эта функция разбирает URL и возвращает ассоциативный массив, содержащий все
   компоненты URL, которые в нём присутствуют.
   Элементы массива <em>не будут</em> декодированы как URL.
  </p>
  <p class="para">
   Эта функция <strong>не</strong> предназначена для проверки на корректность данного URL,
   она только разбивает его на нижеперечисленные части. Частичные и недопустимые URL также принимаются,
   <span class="function"><strong> parse_url()</strong></span> пытается сделать всё возможное, чтобы разобрать их корректно.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.parse-url-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">url</code></dt>

     <dd>

      <p class="para">
       URL для разбора.
      </p>
     </dd>

    
   </dl>

   <dl>
    
     <dt>
<code class="parameter">component</code></dt>

     <dd>

      <p class="para">
       Укажите одну из констант <strong><code>PHP_URL_SCHEME</code></strong>,
       <strong><code>PHP_URL_HOST</code></strong>, <strong><code>PHP_URL_PORT</code></strong>,
       <strong><code>PHP_URL_USER</code></strong>, <strong><code>PHP_URL_PASS</code></strong>,
       <strong><code>PHP_URL_PATH</code></strong>, <strong><code>PHP_URL_QUERY</code></strong>
       или <strong><code>PHP_URL_FRAGMENT</code></strong>, чтобы получить только конкретный компонент
       URL в виде строки (<span class="type">string</span>). Исключением является указание
       <strong><code>PHP_URL_PORT</code></strong>, в этом случае возвращаемое значение
       будет типа <span class="type">int</span>.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.parse-url-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   При разборе значительно некорректных URL-адресов <span class="function"><strong>parse_url()</strong></span> может вернуть <strong><code>false</code></strong>.
  </p>
  <p class="para">
   Если параметр <code class="parameter">component</code> будет опущен, функция возвратит
   ассоциативный массив (<span class="type">array</span>). В массиве будет находиться по крайней мере один элемент.
   Возможные ключи в этом массиве:
   <ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      <var class="varname">scheme</var> - например, http
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <var class="varname">host</var>
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <var class="varname">port</var>
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <var class="varname">user</var>
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <var class="varname">pass</var>
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <var class="varname">path</var>
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <var class="varname">query</var> - после знака вопроса <code class="literal">?</code>
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <var class="varname">fragment</var> - после знака решётки <code class="literal">#</code>
     </span>
    </li>
   </ul>
  </p>
  <p class="para">
   Если параметр <code class="parameter">component</code> определён,
   функция <span class="function"><strong>parse_url()</strong></span> вернёт строку (<span class="type">string</span>)
   (или число (<span class="type">int</span>), в случае <strong><code>PHP_URL_PORT</code></strong>)
   вместо массива (<span class="type">array</span>).
   Если запрошенный компонент не существует в данном URL, будет возвращён <strong><code>null</code></strong>.
   Начиная с PHP 8.0.0, <span class="function"><strong>parse_url()</strong></span> различает отсутствующие и пустые запросы и фрагменты:
  </p>
  <p class="para">
   <div class="informalexample">
    <div class="example-contents screen">
<div class="cdata"><pre>
http://example.com/foo → query = null, fragment = null
http://example.com/foo? → query = &quot;&quot;,   fragment = null
http://example.com/foo# → query = null, fragment = &quot;&quot;
http://example.com/foo?# → query = &quot;&quot;,   fragment = &quot;&quot;
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   Ранее во всех случаях запрос и фрагмент были <strong><code>null</code></strong>.
  </p>
  <p class="para">
   Обратите внимание, что управляющие символы (смотрите <span class="function"><a href="function.ctype-cntrl.php.html" class="function">ctype_cntrl()</a></span>)
   в компонентах заменяются подчёркиванием (<code class="literal">_</code>).
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.parse-url-changelog">
  <h3 class="title">Список изменений</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Версия</th>
      <th>Описание</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>8.0.0</td>
      <td>
       <span class="function"><strong>parse_url()</strong></span> теперь различает отсутствующие и пустые
       запросы и фрагменты.
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-function.parse-url-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Пример #1 Пример использования <span class="function"><strong>parse_url()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$url </span><span style="color: #007700">= </span><span style="color: #DD0000">'http://username:password@hostname:9090/path?arg=value#anchor'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">parse_url</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">parse_url</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">, </span><span style="color: #0000BB">PHP_URL_SCHEME</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">parse_url</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">, </span><span style="color: #0000BB">PHP_URL_USER</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">parse_url</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">, </span><span style="color: #0000BB">PHP_URL_PASS</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">parse_url</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">, </span><span style="color: #0000BB">PHP_URL_HOST</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">parse_url</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">, </span><span style="color: #0000BB">PHP_URL_PORT</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">parse_url</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">, </span><span style="color: #0000BB">PHP_URL_PATH</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">parse_url</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">, </span><span style="color: #0000BB">PHP_URL_QUERY</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">parse_url</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">, </span><span style="color: #0000BB">PHP_URL_FRAGMENT</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
array(8) {
  [&quot;scheme&quot;]=&gt;
  string(4) &quot;http&quot;
  [&quot;host&quot;]=&gt;
  string(8) &quot;hostname&quot;
  [&quot;port&quot;]=&gt;
  int(9090)
  [&quot;user&quot;]=&gt;
  string(8) &quot;username&quot;
  [&quot;pass&quot;]=&gt;
  string(8) &quot;password&quot;
  [&quot;path&quot;]=&gt;
  string(5) &quot;/path&quot;
  [&quot;query&quot;]=&gt;
  string(9) &quot;arg=value&quot;
  [&quot;fragment&quot;]=&gt;
  string(6) &quot;anchor&quot;
}
string(4) &quot;http&quot;
string(8) &quot;username&quot;
string(8) &quot;password&quot;
string(8) &quot;hostname&quot;
int(9090)
string(5) &quot;/path&quot;
string(9) &quot;arg=value&quot;
string(6) &quot;anchor&quot;
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="">
    <p><strong>Пример #2 Пример использования <span class="function"><strong>parse_url()</strong></span> при отсутствии протокола</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$url </span><span style="color: #007700">= </span><span style="color: #DD0000">'//www.example.com/path?googleguy=googley'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// До 5.4.7 в path выводилось "//www.example.com/path"<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">parse_url</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [&quot;host&quot;]=&gt;
  string(15) &quot;www.example.com&quot;
  [&quot;path&quot;]=&gt;
  string(5) &quot;/path&quot;
  [&quot;query&quot;]=&gt;
  string(17) &quot;googleguy=googley&quot;
}
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.parse-url-notes">
  <h3 class="title">Примечания</h3>
  <div class="caution"><strong class="caution">Предостережение</strong>
   <p class="para">
    Функция может выдать некорректные результаты для относительных или недействительных URL-адресов и результаты могут даже не соответствовать общему поведению HTTP-клиентов.
    Если необходимо проанализировать URL-адреса из ненадёжных входных данных, потребуется дополнительная проверка,
    например, с помощью <span class="function"><a href="function.filter-var.php.html" class="function">filter_var()</a></span> с фильтром <strong><code>FILTER_VALIDATE_URL</code></strong>.
   </p>
  </div>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Эта функция предназначена специально для разбора URL-адресов, а не URI.
    Однако, чтобы соответствовать требованиям обратной совместимости PHP, она делает
    исключение для протокола file://, в которой допускаются тройные слеши (file:///...).
    Для любого другого протокола это недопустимо.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.parse-url-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.pathinfo.php.html" class="function" rel="rdfs-seeAlso">pathinfo()</a> - Возвращает информацию о пути к файлу</span></li>
    <li class="member"><span class="function"><a href="function.parse-str.php.html" class="function" rel="rdfs-seeAlso">parse_str()</a> - Разбирает строку в переменные</span></li>
    <li class="member"><span class="function"><a href="function.http-build-query.php.html" class="function" rel="rdfs-seeAlso">http_build_query()</a> - Генерирует URL-кодированную строку запроса</span></li>
    <li class="member"><span class="function"><a href="function.dirname.php.html" class="function" rel="rdfs-seeAlso">dirname()</a> - Возвращает имя родительского каталога из указанного пути</span></li>
    <li class="member"><span class="function"><a href="function.basename.php.html" class="function" rel="rdfs-seeAlso">basename()</a> - Возвращает последний компонент имени из указанного пути</span></li>
    <li class="member"><a href="http://www.faqs.org/rfcs/rfc3986" class="link external">&raquo;&nbsp;RFC 3986</a></li>
   </ul>
  </p>
 </div>

</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.parse-url&amp;redirect=https://www.php.net/manual/ru/function.parse-url.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">36 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="106731">  <div class="votes">
    <div id="Vu106731">
    <a href="https://www.php.net/manual/vote-note.php?id=106731&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd106731">
    <a href="https://www.php.net/manual/vote-note.php?id=106731&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V106731" title="76% like this...">
    191
    </div>
  </div>
  <a href="function.parse-url.php.html#106731" class="name">
  <strong class="user"><em>thomas at gielfeldt dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#106731"> &para;</a><div class="date" title="2011-12-02 02:50"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom106731">
<div class="phpcode"><code><span class="html">[If you haven't yet] been able to find a simple conversion back to string from a parsed url, here's an example:<br /><br /><span class="default">&lt;?php<br /><br />$url </span><span class="keyword">= </span><span class="string">'<a href="http://usr:pss@example.com:81/mypath/myfile.html?a=b&amp;b[]=2&amp;b[]=3#myfragment" rel="nofollow" target="_blank">http://usr:pss@example.com:81/mypath/myfile.html?a=b&amp;b[]=2&amp;b[]=3#myfragment</a>'</span><span class="keyword">;<br />if (</span><span class="default">$url </span><span class="keyword">=== </span><span class="default">unparse_url</span><span class="keyword">(</span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">))) {<br />  print </span><span class="string">"YES, they match!\n"</span><span class="keyword">;<br />}<br /><br />function </span><span class="default">unparse_url</span><span class="keyword">(</span><span class="default">$parsed_url</span><span class="keyword">) {<br />  </span><span class="default">$scheme   </span><span class="keyword">= isset(</span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'scheme'</span><span class="keyword">]) ? </span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'scheme'</span><span class="keyword">] . </span><span class="string">'://' </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">;<br />  </span><span class="default">$host     </span><span class="keyword">= isset(</span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">]) ? </span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">] : </span><span class="string">''</span><span class="keyword">;<br />  </span><span class="default">$port     </span><span class="keyword">= isset(</span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">]) ? </span><span class="string">':' </span><span class="keyword">. </span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">] : </span><span class="string">''</span><span class="keyword">;<br />  </span><span class="default">$user     </span><span class="keyword">= isset(</span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">]) ? </span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">] : </span><span class="string">''</span><span class="keyword">;<br />  </span><span class="default">$pass     </span><span class="keyword">= isset(</span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'pass'</span><span class="keyword">]) ? </span><span class="string">':' </span><span class="keyword">. </span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'pass'</span><span class="keyword">]  : </span><span class="string">''</span><span class="keyword">;<br />  </span><span class="default">$pass     </span><span class="keyword">= (</span><span class="default">$user </span><span class="keyword">|| </span><span class="default">$pass</span><span class="keyword">) ? </span><span class="string">"</span><span class="default">$pass</span><span class="string">@" </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">;<br />  </span><span class="default">$path     </span><span class="keyword">= isset(</span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">]) ? </span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">] : </span><span class="string">''</span><span class="keyword">;<br />  </span><span class="default">$query    </span><span class="keyword">= isset(</span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">]) ? </span><span class="string">'?' </span><span class="keyword">. </span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">] : </span><span class="string">''</span><span class="keyword">;<br />  </span><span class="default">$fragment </span><span class="keyword">= isset(</span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'fragment'</span><span class="keyword">]) ? </span><span class="string">'#' </span><span class="keyword">. </span><span class="default">$parsed_url</span><span class="keyword">[</span><span class="string">'fragment'</span><span class="keyword">] : </span><span class="string">''</span><span class="keyword">;<br />  return </span><span class="string">"</span><span class="default">$scheme$user$pass$host$port$path$query$fragment</span><span class="string">"</span><span class="keyword">;<br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="126996">  <div class="votes">
    <div id="Vu126996">
    <a href="https://www.php.net/manual/vote-note.php?id=126996&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd126996">
    <a href="https://www.php.net/manual/vote-note.php?id=126996&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V126996" title="88% like this...">
    7
    </div>
  </div>
  <a href="function.parse-url.php.html#126996" class="name">
  <strong class="user"><em>pjpawel</em></strong></a><a class="genanchor" href="function.parse-url.php.html#126996"> &para;</a><div class="date" title="2022-04-19 08:06"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom126996">
<div class="phpcode"><code><span class="html">Unfortunately parse_url() DO NOT parse correctly urls without scheme or '//'. For example 'www.xyz.com' is consider as path not host:<br /><br />Code:<br /><span class="default">&lt;?php<br />var_dump</span><span class="keyword">(</span><span class="default">parse_url</span><span class="keyword">(</span><span class="string">'www.xyz.com'</span><span class="keyword">));<br /></span><span class="default">?&gt;<br /></span>Output:<br />array(1) {<br />["path"]=&gt;<br />string(10) "www.xyz.com"<br />}<br /><br />To get better output change url to:<br />'//www.xyz.com' or '<a href="http://www.xyz.com" rel="nofollow" target="_blank">http://www.xyz.com</a>'</span></code></div>
  </div>
 </div>
  <div class="note" id="114817">  <div class="votes">
    <div id="Vu114817">
    <a href="https://www.php.net/manual/vote-note.php?id=114817&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd114817">
    <a href="https://www.php.net/manual/vote-note.php?id=114817&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V114817" title="75% like this...">
    42
    </div>
  </div>
  <a href="function.parse-url.php.html#114817" class="name">
  <strong class="user"><em>lauris () lauris ! lv</em></strong></a><a class="genanchor" href="function.parse-url.php.html#114817"> &para;</a><div class="date" title="2014-04-09 08:49"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom114817">
<div class="phpcode"><code><span class="html">Here is utf-8 compatible parse_url() replacement function based on "laszlo dot janszky at gmail dot com" work. Original incorrectly handled URLs with user:pass. Also made PHP 5.5 compatible (got rid of now deprecated regex /e modifier).<br /><br /><span class="default">&lt;?php<br /><br />    </span><span class="comment">/**<br />     * UTF-8 aware parse_url() replacement.<br />     * <br />     * @return array<br />     */<br />    </span><span class="keyword">function </span><span class="default">mb_parse_url</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">)<br />    {<br />        </span><span class="default">$enc_url </span><span class="keyword">= </span><span class="default">preg_replace_callback</span><span class="keyword">(<br />            </span><span class="string">'%[^:/@?&amp;=#]+%usD'</span><span class="keyword">,<br />            function (</span><span class="default">$matches</span><span class="keyword">)<br />            {<br />                return </span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />            },<br />            </span><span class="default">$url<br />        </span><span class="keyword">);<br />        <br />        </span><span class="default">$parts </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$enc_url</span><span class="keyword">);<br />        <br />        if(</span><span class="default">$parts </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">)<br />        {<br />            throw new </span><span class="default">\InvalidArgumentException</span><span class="keyword">(</span><span class="string">'Malformed URL: ' </span><span class="keyword">. </span><span class="default">$url</span><span class="keyword">);<br />        }<br />        <br />        foreach(</span><span class="default">$parts </span><span class="keyword">as </span><span class="default">$name </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />        {<br />            </span><span class="default">$parts</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />        }<br />        <br />        return </span><span class="default">$parts</span><span class="keyword">;<br />    }<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="116520">  <div class="votes">
    <div id="Vu116520">
    <a href="https://www.php.net/manual/vote-note.php?id=116520&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116520">
    <a href="https://www.php.net/manual/vote-note.php?id=116520&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116520" title="74% like this...">
    39
    </div>
  </div>
  <a href="function.parse-url.php.html#116520" class="name">
  <strong class="user"><em>jerome at chaman dot ca</em></strong></a><a class="genanchor" href="function.parse-url.php.html#116520"> &para;</a><div class="date" title="2015-01-16 10:53"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom116520">
<div class="phpcode"><code><span class="html">It may be worth reminding that the value of the #fragment never gets sent to the server.  Anchors processing is exclusively client-side.</span></code></div>
  </div>
 </div>
  <div class="note" id="85608">  <div class="votes">
    <div id="Vu85608">
    <a href="https://www.php.net/manual/vote-note.php?id=85608&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd85608">
    <a href="https://www.php.net/manual/vote-note.php?id=85608&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V85608" title="80% like this...">
    3
    </div>
  </div>
  <a href="function.parse-url.php.html#85608" class="name">
  <strong class="user"><em>nospam at spellingcow dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#85608"> &para;</a><div class="date" title="2008-09-08 02:03"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom85608">
<div class="phpcode"><code><span class="html">URL's in the query string of a relative URL will cause a problem<br /><br />fails:<br />/page.php?foo=bar&amp;url=<a href="http://www.example.com" rel="nofollow" target="_blank">http://www.example.com</a><br /><br />parses:<br /><a href="http://www.foo.com/page.php?foo=bar&amp;url=http://www.example.com" rel="nofollow" target="_blank">http://www.foo.com/page.php?foo=bar&amp;url=http://www.example.com</a></span></code></div>
  </div>
 </div>
  <div class="note" id="76682">  <div class="votes">
    <div id="Vu76682">
    <a href="https://www.php.net/manual/vote-note.php?id=76682&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd76682">
    <a href="https://www.php.net/manual/vote-note.php?id=76682&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V76682" title="80% like this...">
    3
    </div>
  </div>
  <a href="function.parse-url.php.html#76682" class="name">
  <strong class="user"><em>adrian-php at sixfingeredman dot net</em></strong></a><a class="genanchor" href="function.parse-url.php.html#76682"> &para;</a><div class="date" title="2007-07-25 02:58"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom76682">
<div class="phpcode"><code><span class="html">Here's a function which implements resolving a relative URL according to RFC 2396 section 5.2. No doubt there are more efficient implementations, but this one tries to remain close to the standard for clarity. It relies on a function called "unparse_url" to implement section 7, left as an exercise for the reader (or you can substitute the "glue_url" function posted earlier).<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">/**<br /> * Resolve a URL relative to a base path. This happens to work with POSIX<br /> * filenames as well. This is based on RFC 2396 section 5.2.<br /> */<br /></span><span class="keyword">function </span><span class="default">resolve_url</span><span class="keyword">(</span><span class="default">$base</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">) {<br />        if (!</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$base</span><span class="keyword">)) return </span><span class="default">$url</span><span class="keyword">;<br />        </span><span class="comment">// Step 2<br />        </span><span class="keyword">if (!</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">)) return </span><span class="default">$base</span><span class="keyword">;<br />        </span><span class="comment">// Step 3<br />        </span><span class="keyword">if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'!^[a-z]+:!i'</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">)) return </span><span class="default">$url</span><span class="keyword">;<br />        </span><span class="default">$base </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$base</span><span class="keyword">);<br />        if (</span><span class="default">$url</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} == </span><span class="string">"#"</span><span class="keyword">) {<br />                </span><span class="comment">// Step 2 (fragment)<br />                </span><span class="default">$base</span><span class="keyword">[</span><span class="string">'fragment'</span><span class="keyword">] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />                return </span><span class="default">unparse_url</span><span class="keyword">(</span><span class="default">$base</span><span class="keyword">);<br />        }<br />        unset(</span><span class="default">$base</span><span class="keyword">[</span><span class="string">'fragment'</span><span class="keyword">]);<br />        unset(</span><span class="default">$base</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">]);<br />        if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">) == </span><span class="string">"//"</span><span class="keyword">) {<br />                </span><span class="comment">// Step 4<br />                </span><span class="keyword">return </span><span class="default">unparse_url</span><span class="keyword">(array(<br />                        </span><span class="string">'scheme'</span><span class="keyword">=&gt;</span><span class="default">$base</span><span class="keyword">[</span><span class="string">'scheme'</span><span class="keyword">],<br />                        </span><span class="string">'path'</span><span class="keyword">=&gt;</span><span class="default">$url</span><span class="keyword">,<br />                ));<br />        } else if (</span><span class="default">$url</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} == </span><span class="string">"/"</span><span class="keyword">) {<br />                </span><span class="comment">// Step 5<br />                </span><span class="default">$base</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">] = </span><span class="default">$url</span><span class="keyword">;<br />        } else {<br />                </span><span class="comment">// Step 6<br />                </span><span class="default">$path </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$base</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">]);<br />                </span><span class="default">$url_path </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">);<br />                </span><span class="comment">// Step 6a: drop file from base<br />                </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br />                </span><span class="comment">// Step 6b, 6c, 6e: append url while removing "." and ".." from<br />                // the directory portion<br />                </span><span class="default">$end </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$url_path</span><span class="keyword">);<br />                foreach (</span><span class="default">$url_path </span><span class="keyword">as </span><span class="default">$segment</span><span class="keyword">) {<br />                        if (</span><span class="default">$segment </span><span class="keyword">== </span><span class="string">'.'</span><span class="keyword">) {<br />                                </span><span class="comment">// skip<br />                        </span><span class="keyword">} else if (</span><span class="default">$segment </span><span class="keyword">== </span><span class="string">'..' </span><span class="keyword">&amp;&amp; </span><span class="default">$path </span><span class="keyword">&amp;&amp; </span><span class="default">$path</span><span class="keyword">[</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">] != </span><span class="string">'..'</span><span class="keyword">) {<br />                                </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br />                        } else {<br />                                </span><span class="default">$path</span><span class="keyword">[] = </span><span class="default">$segment</span><span class="keyword">;<br />                        }<br />                }<br />                </span><span class="comment">// Step 6d, 6f: remove "." and ".." from file portion<br />                </span><span class="keyword">if (</span><span class="default">$end </span><span class="keyword">== </span><span class="string">'.'</span><span class="keyword">) {<br />                        </span><span class="default">$path</span><span class="keyword">[] = </span><span class="string">''</span><span class="keyword">;<br />                } else if (</span><span class="default">$end </span><span class="keyword">== </span><span class="string">'..' </span><span class="keyword">&amp;&amp; </span><span class="default">$path </span><span class="keyword">&amp;&amp; </span><span class="default">$path</span><span class="keyword">[</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">] != </span><span class="string">'..'</span><span class="keyword">) {<br />                        </span><span class="default">$path</span><span class="keyword">[</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">] = </span><span class="string">''</span><span class="keyword">;<br />                } else {<br />                        </span><span class="default">$path</span><span class="keyword">[] = </span><span class="default">$end</span><span class="keyword">;<br />                }<br />                </span><span class="comment">// Step 6h<br />                </span><span class="default">$base</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">] = </span><span class="default">join</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">);<br /><br />        }<br />        </span><span class="comment">// Step 7<br />        </span><span class="keyword">return </span><span class="default">unparse_url</span><span class="keyword">(</span><span class="default">$base</span><span class="keyword">);<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="96433">  <div class="votes">
    <div id="Vu96433">
    <a href="https://www.php.net/manual/vote-note.php?id=96433&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd96433">
    <a href="https://www.php.net/manual/vote-note.php?id=96433&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V96433" title="68% like this...">
    42
    </div>
  </div>
  <a href="function.parse-url.php.html#96433" class="name">
  <strong class="user"><em>james at roundeights dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#96433"> &para;</a><div class="date" title="2010-02-26 11:24"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom96433">
<div class="phpcode"><code><span class="html">I was writing unit tests and needed to cause this function to kick out an error and return FALSE in order to test a specific execution path. If anyone else needs to force a failure, the following inputs will work:<br /><br /><span class="default">&lt;?php<br />parse_url</span><span class="keyword">(</span><span class="string">"<a href="http:///example.com" rel="nofollow" target="_blank">http:///example.com</a>"</span><span class="keyword">);<br /></span><span class="default">parse_url</span><span class="keyword">(</span><span class="string">"<a href="http://:80" rel="nofollow" target="_blank">http://:80</a>"</span><span class="keyword">);<br /></span><span class="default">parse_url</span><span class="keyword">(</span><span class="string">"<a href="http://user@:80" rel="nofollow" target="_blank">http://user@:80</a>"</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="119033">  <div class="votes">
    <div id="Vu119033">
    <a href="https://www.php.net/manual/vote-note.php?id=119033&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd119033">
    <a href="https://www.php.net/manual/vote-note.php?id=119033&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V119033" title="70% like this...">
    7
    </div>
  </div>
  <a href="function.parse-url.php.html#119033" class="name">
  <strong class="user"><em>mys5droid at gmail dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#119033"> &para;</a><div class="date" title="2016-03-20 12:30"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom119033">
<div class="phpcode"><code><span class="html">I have coded a function which converts relative URL to absolute URL for a project of mine. Considering I could not find it elsewhere, I figured I would post it here.<br /><br />The following function takes in 2 parameters, the first parameter is the URL you want to convert from relative to absolute, and the second parameter is a sample of the absolute URL.<br /><br />Currently it does not resolve '../' in the URL, only because I do not need it. Most webservers will resolve this for you. If you want it to resolve the '../' in the path, it just takes minor modifications.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">function </span><span class="default">relativeToAbsolute</span><span class="keyword">(</span><span class="default">$inurl</span><span class="keyword">, </span><span class="default">$absolute</span><span class="keyword">) {<br />    </span><span class="comment">// Get all parts so not getting them multiple times :)<br />    </span><span class="default">$absolute_parts </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$absolute</span><span class="keyword">);    <br />    </span><span class="comment">// Test if URL is already absolute (contains host, or begins with '/')<br />    </span><span class="keyword">if ( (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$inurl</span><span class="keyword">, </span><span class="default">$absolute_parts</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">]) == </span><span class="default">false</span><span class="keyword">) ) {<br />        </span><span class="comment">// Define $tmpurlprefix to prevent errors below<br />        </span><span class="default">$tmpurlprefix </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />        </span><span class="comment">// Formulate URL prefix    (SCHEME)                    <br />        </span><span class="keyword">if (!(empty(</span><span class="default">$absolute_parts</span><span class="keyword">[</span><span class="string">'scheme'</span><span class="keyword">]))) { <br />            </span><span class="comment">// Add scheme to tmpurlprefix<br />            </span><span class="default">$tmpurlprefix </span><span class="keyword">.= </span><span class="default">$absolute_parts</span><span class="keyword">[</span><span class="string">'scheme'</span><span class="keyword">] . </span><span class="string">"://"</span><span class="keyword">; <br />        }<br />        </span><span class="comment">// Formulate URL prefix (USER, PASS)    <br />        </span><span class="keyword">if ((!(empty(</span><span class="default">$absolute_parts</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">]))) and (!(empty(</span><span class="default">$absolute_parts</span><span class="keyword">[</span><span class="string">'pass'</span><span class="keyword">])))) { <br />            </span><span class="comment">// Add user:port to tmpurlprefix<br />            </span><span class="default">$tmpurlprefix </span><span class="keyword">.= </span><span class="default">$absolute_parts</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">] . </span><span class="string">":" </span><span class="keyword">. </span><span class="default">$absolute_parts</span><span class="keyword">[</span><span class="string">'pass'</span><span class="keyword">] . </span><span class="string">"@"</span><span class="keyword">;    <br />        }<br />        </span><span class="comment">// Formulate URL prefix    (HOST, PORT)    <br />        </span><span class="keyword">if (!(empty(</span><span class="default">$absolute_parts</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">]))) { <br />            </span><span class="comment">// Add host to tmpurlprefix<br />            </span><span class="default">$tmpurlprefix </span><span class="keyword">.= </span><span class="default">$absolute_parts</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">];<br />            </span><span class="comment">// Check for a port, add if exists<br />            </span><span class="keyword">if (!(empty(</span><span class="default">$absolute_parts</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">]))) {<br />                </span><span class="comment">// Add port to tmpurlprefix<br />                </span><span class="default">$tmpurlprefix </span><span class="keyword">.= </span><span class="string">":" </span><span class="keyword">. </span><span class="default">$absolute_parts</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">];<br />            } <br />        }<br />        </span><span class="comment">// Formulate URL prefix    (PATH) and only add it if the path to image does not include ./    <br />        </span><span class="keyword">if ( (!(empty(</span><span class="default">$absolute_parts</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">]))) and (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inurl</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) != </span><span class="string">'/'</span><span class="keyword">) ) { <br />            </span><span class="comment">// Get path parts<br />            </span><span class="default">$path_parts </span><span class="keyword">= </span><span class="default">pathinfo</span><span class="keyword">(</span><span class="default">$absolute_parts</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">]);<br />            </span><span class="comment">// Add path to tmpurlprefix<br />            </span><span class="default">$tmpurlprefix </span><span class="keyword">.= </span><span class="default">$path_parts</span><span class="keyword">[</span><span class="string">'dirname'</span><span class="keyword">];<br />            </span><span class="default">$tmpurlprefix </span><span class="keyword">.= </span><span class="string">"/"</span><span class="keyword">; <br />        }<br />        else {    <br />            </span><span class="default">$tmpurlprefix </span><span class="keyword">.= </span><span class="string">"/"</span><span class="keyword">;    <br />        }    <br />        </span><span class="comment">// Lets remove the '/'<br />        </span><span class="keyword">if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inurl</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">'/'</span><span class="keyword">) { </span><span class="default">$inurl </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inurl</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">); }    <br />        </span><span class="comment">// Lets remove the './'<br />        </span><span class="keyword">if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inurl</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">) == </span><span class="string">'./'</span><span class="keyword">) { </span><span class="default">$inurl </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inurl</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">); }    <br />        return </span><span class="default">$tmpurlprefix </span><span class="keyword">. </span><span class="default">$inurl</span><span class="keyword">;<br />    }    <br />    else {<br />        </span><span class="comment">// Path is already absolute. Return it :)<br />        </span><span class="keyword">return </span><span class="default">$inurl</span><span class="keyword">;<br />    }<br />}<br /><br /></span><span class="comment">// Define a sample absolute  URL<br /></span><span class="default">$absolute </span><span class="keyword">= </span><span class="string">"<a href="http://" rel="nofollow" target="_blank">http://</a>" </span><span class="keyword">. </span><span class="string">"user:pass@example.com:8080/path/to/index.html"</span><span class="keyword">; </span><span class="comment">// Just evading php.net spam filter, not sure how example.com is spam...<br /><br />/* EXAMPLE 1 */<br /></span><span class="keyword">echo </span><span class="default">relativeToAbsolute</span><span class="keyword">(</span><span class="default">$absolute</span><span class="keyword">, </span><span class="default">$absolute</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br /></span><span class="comment">/* EXAMPLE 2 */<br /></span><span class="keyword">echo </span><span class="default">relativeToAbsolute</span><span class="keyword">(</span><span class="string">"img.gif"</span><span class="keyword">, </span><span class="default">$absolute</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br /></span><span class="comment">/* EXAMPLE 3 */<br /></span><span class="keyword">echo </span><span class="default">relativeToAbsolute</span><span class="keyword">(</span><span class="string">"/img.gif"</span><span class="keyword">, </span><span class="default">$absolute</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">; <br /></span><span class="comment">/* EXAMPLE 4 */<br /></span><span class="keyword">echo </span><span class="default">relativeToAbsolute</span><span class="keyword">(</span><span class="string">"./img.gif"</span><span class="keyword">, </span><span class="default">$absolute</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br /></span><span class="comment">/* EXAMPLE 5 */<br /></span><span class="keyword">echo </span><span class="default">relativeToAbsolute</span><span class="keyword">(</span><span class="string">"../img.gif"</span><span class="keyword">, </span><span class="default">$absolute</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br /></span><span class="comment">/* EXAMPLE 6 */<br /></span><span class="keyword">echo </span><span class="default">relativeToAbsolute</span><span class="keyword">(</span><span class="string">"images/img.gif"</span><span class="keyword">, </span><span class="default">$absolute</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br /></span><span class="comment">/* EXAMPLE 7 */<br /></span><span class="keyword">echo </span><span class="default">relativeToAbsolute</span><span class="keyword">(</span><span class="string">"/images/img.gif"</span><span class="keyword">, </span><span class="default">$absolute</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br /></span><span class="comment">/* EXAMPLE 8 */<br /></span><span class="keyword">echo </span><span class="default">relativeToAbsolute</span><span class="keyword">(</span><span class="string">"./images/img.gif"</span><span class="keyword">, </span><span class="default">$absolute</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br /></span><span class="comment">/* EXAMPLE 9 */<br /></span><span class="keyword">echo </span><span class="default">relativeToAbsolute</span><span class="keyword">(</span><span class="string">"../images/img.gif"</span><span class="keyword">, </span><span class="default">$absolute</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br /><br /></span><span class="default">?&gt;<br /></span><br />OUTPUTS:<br />http :// user:pass@example.com:8080/path/to/index.html<br />http :// user:pass@example.com:8080/path/to/img.gif<br />http :// user:pass@example.com:8080/img.gif<br />http :// user:pass@example.com:8080/path/to/img.gif<br />http :// user:pass@example.com:8080/path/to/../img.gif<br />http :// user:pass@example.com:8080/path/to/images/img.gif<br />http :// user:pass@example.com:8080/images/img.gif<br />http :// user:pass@example.com:8080/path/to/images/img.gif<br />http :// user:pass@example.com:8080/path/to/../images/img.gif<br /><br />Sorry if the above code is not your style, or if you see it as "messy" or you think there is a better way to do it. I removed as much of the white space as possible.<br /><br />Improvements are welcome :)</span></code></div>
  </div>
 </div>
  <div class="note" id="83828">  <div class="votes">
    <div id="Vu83828">
    <a href="https://www.php.net/manual/vote-note.php?id=83828&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd83828">
    <a href="https://www.php.net/manual/vote-note.php?id=83828&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V83828" title="68% like this...">
    15
    </div>
  </div>
  <a href="function.parse-url.php.html#83828" class="name">
  <strong class="user"><em>to1ne at hotmail dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#83828"> &para;</a><div class="date" title="2008-06-13 11:01"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom83828">
<div class="phpcode"><code><span class="html">Based on the idea of "jbr at ya-right dot com" have I been working on a new function to parse the url:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">parseUrl</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {<br />    </span><span class="default">$r  </span><span class="keyword">= </span><span class="string">"^(?:(?P&lt;scheme&gt;\w+)://)?"</span><span class="keyword">;<br />    </span><span class="default">$r </span><span class="keyword">.= </span><span class="string">"(?:(?P&lt;login&gt;\w+):(?P&lt;pass&gt;\w+)@)?"</span><span class="keyword">;<br />    </span><span class="default">$r </span><span class="keyword">.= </span><span class="string">"(?P&lt;host&gt;(?:(?P&lt;subdomain&gt;[\w\.]+)\.)?" </span><span class="keyword">. </span><span class="string">"(?P&lt;domain&gt;\w+\.(?P&lt;extension&gt;\w+)))"</span><span class="keyword">;<br />    </span><span class="default">$r </span><span class="keyword">.= </span><span class="string">"(?::(?P&lt;port&gt;\d+))?"</span><span class="keyword">;<br />    </span><span class="default">$r </span><span class="keyword">.= </span><span class="string">"(?P&lt;path&gt;[\w/]*/(?P&lt;file&gt;\w+(?:\.\w+)?)?)?"</span><span class="keyword">;<br />    </span><span class="default">$r </span><span class="keyword">.= </span><span class="string">"(?:\?(?P&lt;arg&gt;[\w=&amp;]+))?"</span><span class="keyword">;<br />    </span><span class="default">$r </span><span class="keyword">.= </span><span class="string">"(?:#(?P&lt;anchor&gt;\w+))?"</span><span class="keyword">;<br />    </span><span class="default">$r </span><span class="keyword">= </span><span class="string">"!</span><span class="default">$r</span><span class="string">!"</span><span class="keyword">;                                                </span><span class="comment">// Delimiters<br />    <br />    </span><span class="default">preg_match </span><span class="keyword">( </span><span class="default">$r</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">, </span><span class="default">$out </span><span class="keyword">);<br />    <br />    return </span><span class="default">$out</span><span class="keyword">;<br />}<br /></span><span class="default">print_r </span><span class="keyword">( </span><span class="default">parseUrl </span><span class="keyword">( </span><span class="string">'me:you@sub.site.org:29000/pear/validate.html?happy=me&amp;sad=you#url' </span><span class="keyword">) );<br /></span><span class="default">?&gt;<br /></span><br />This returns:<br />Array<br />(<br />    [0] =&gt; me:you@sub.site.org:29000/pear/validate.html?happy=me&amp;sad=you#url<br />    [scheme] =&gt; <br />    [1] =&gt; <br />    [login] =&gt; me<br />    [2] =&gt; me<br />    [pass] =&gt; you<br />    [3] =&gt; you<br />    [host] =&gt; sub.site.org<br />    [4] =&gt; sub.site.org<br />    [subdomain] =&gt; sub<br />    [5] =&gt; sub<br />    [domain] =&gt; site.org<br />    [6] =&gt; site.org<br />    [extension] =&gt; org<br />    [7] =&gt; org<br />    [port] =&gt; 29000<br />    [8] =&gt; 29000<br />    [path] =&gt; /pear/validate.html<br />    [9] =&gt; /pear/validate.html<br />    [file] =&gt; validate.html<br />    [10] =&gt; validate.html<br />    [arg] =&gt; happy=me&amp;sad=you<br />    [11] =&gt; happy=me&amp;sad=you<br />    [anchor] =&gt; url<br />    [12] =&gt; url<br />)<br /><br />So both named and numbered array keys are possible.<br /><br />It's quite advanced, but I think it works in any case... Let me know if it doesn't...</span></code></div>
  </div>
 </div>
  <div class="note" id="107291">  <div class="votes">
    <div id="Vu107291">
    <a href="https://www.php.net/manual/vote-note.php?id=107291&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd107291">
    <a href="https://www.php.net/manual/vote-note.php?id=107291&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V107291" title="70% like this...">
    4
    </div>
  </div>
  <a href="function.parse-url.php.html#107291" class="name">
  <strong class="user"><em>therselman at gmail</em></strong></a><a class="genanchor" href="function.parse-url.php.html#107291"> &para;</a><div class="date" title="2012-01-28 01:03"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom107291">
<div class="phpcode"><code><span class="html">UTF-8 aware parse_url() replacement.<br /><br />I've realized that even though UTF-8 characters are not allowed in URL's, I have to work with a lot of them and parse_url() will break.<br /><br />Based largely on the work of "mallluhuct at gmail dot com", I added parse_url() compatible "named values" which makes the array values a lot easier to work with (instead of just numbers). I also implemented detection of port, username/password and a back-reference to better detect URL's like this: //en.wikipedia.com<br />... which, although is technically an invalid URL, it's used extensively on sites like wikipedia in the href of anchor tags where it's valid in browsers (one of the types of URL's you have to support when crawling pages). This will be accurately detected as the host name instead of "path" as in all other examples.<br /><br />I will submit my complete function (instead of just the RegExp) which is an almost "drop-in" replacement for parse_url(). It returns a cleaned up array (or false) with values compatible with parse_url(). I could have told the preg_match() not to store the unused extra values, but it would complicate the RegExp and make it more difficult to read, understand and extend. The key to detecting UTF-8 characters is the use of the "u" parameter in preg_match().<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">parse_utf8_url</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">)<br />{<br />    static </span><span class="default">$keys </span><span class="keyword">= array(</span><span class="string">'scheme'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">,</span><span class="string">'user'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">,</span><span class="string">'pass'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">,</span><span class="string">'host'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">,</span><span class="string">'port'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">,</span><span class="string">'path'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">,</span><span class="string">'query'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">,</span><span class="string">'fragment'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">);<br />    if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) &amp;&amp; </span><span class="default">preg_match</span><span class="keyword">(<br />            </span><span class="string">'~^((?P&lt;scheme&gt;[^:/?#]+):(//))?((\\3|//)?(?:(?P&lt;user&gt;[^:]+):(?P&lt;pass&gt;[^@]+)@)?(?P&lt;host&gt;[^/?:#]*))(:(?P&lt;port&gt;\\d+))?' </span><span class="keyword">.<br />            </span><span class="string">'(?P&lt;path&gt;[^?#]*)(\\?(?P&lt;query&gt;[^#]*))?(#(?P&lt;fragment&gt;.*))?~u'</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">))<br />    {<br />        foreach (</span><span class="default">$matches </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />            if (!isset(</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) || empty(</span><span class="default">$value</span><span class="keyword">))<br />                unset(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />        return </span><span class="default">$matches</span><span class="keyword">;<br />    }<br />    return </span><span class="default">false</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span><br />UTF-8 URL's can/should be "normalized" after extraction with this function.</span></code></div>
  </div>
 </div>
  <div class="note" id="92230">  <div class="votes">
    <div id="Vu92230">
    <a href="https://www.php.net/manual/vote-note.php?id=92230&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd92230">
    <a href="https://www.php.net/manual/vote-note.php?id=92230&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V92230" title="70% like this...">
    4
    </div>
  </div>
  <a href="function.parse-url.php.html#92230" class="name">
  <strong class="user"><em>ap dot public1 at gmail dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#92230"> &para;</a><div class="date" title="2009-07-14 08:36"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom92230">
<div class="phpcode"><code><span class="html">Simple static library that allows easy manipulation of url parameters:<br /><br /><span class="default">&lt;?php<br />    </span><span class="comment">/**<br />     * File provides easy way to manipulate url parameters<br />     * @author Alexander Podgorny<br />     */<br /><br />    </span><span class="keyword">class </span><span class="default">Url </span><span class="keyword">{<br />        </span><span class="comment">/**<br />         * Splits url into array of it's pieces as follows:<br />         * [scheme]://[user]:[pass]@[host]/[path]?[query]#[fragment]<br />         * In addition it adds 'query_params' key which contains array of <br />         * url-decoded key-value pairs<br />         *<br />         * @param String $sUrl Url<br />         * @return Array Parsed url pieces<br />         */<br />        </span><span class="keyword">public static function </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$sUrl</span><span class="keyword">) {<br />            </span><span class="default">$aUrl </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$sUrl</span><span class="keyword">);<br />            </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'query_params'</span><span class="keyword">] = array();<br />            </span><span class="default">$aPairs </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'&amp;'</span><span class="keyword">, </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">]);<br />            </span><span class="default">DU</span><span class="keyword">::</span><span class="default">show</span><span class="keyword">(</span><span class="default">$aPairs</span><span class="keyword">);<br />            foreach(</span><span class="default">$aPairs </span><span class="keyword">as </span><span class="default">$sPair</span><span class="keyword">) {<br />                if (</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$sPair</span><span class="keyword">) == </span><span class="string">''</span><span class="keyword">) { continue; }<br />                list(</span><span class="default">$sKey</span><span class="keyword">, </span><span class="default">$sValue</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'='</span><span class="keyword">, </span><span class="default">$sPair</span><span class="keyword">);<br />                </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'query_params'</span><span class="keyword">][</span><span class="default">$sKey</span><span class="keyword">] = </span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">$sValue</span><span class="keyword">);<br />            }<br />            return </span><span class="default">$aUrl</span><span class="keyword">;<br />        }<br />        </span><span class="comment">/**<br />         * Compiles url out of array of it's pieces (returned by explodeUrl)<br />         * 'query' is ignored if 'query_params' is present<br />         * <br />         * @param Array $aUrl Array of url pieces<br />         */<br />        </span><span class="keyword">public static function </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$aUrl</span><span class="keyword">) {<br />            </span><span class="comment">//[scheme]://[user]:[pass]@[host]/[path]?[query]#[fragment]<br />            <br />            </span><span class="default">$sQuery </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />            <br />            </span><span class="comment">// Compile query<br />            </span><span class="keyword">if (isset(</span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'query_params'</span><span class="keyword">]) &amp;&amp; </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'query_params'</span><span class="keyword">])) {<br />                </span><span class="default">$aPairs </span><span class="keyword">= array();<br />                foreach (</span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'query_params'</span><span class="keyword">] as </span><span class="default">$sKey</span><span class="keyword">=&gt;</span><span class="default">$sValue</span><span class="keyword">) {<br />                    </span><span class="default">$aPairs</span><span class="keyword">[] = </span><span class="default">$sKey</span><span class="keyword">.</span><span class="string">'='</span><span class="keyword">.</span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">$sValue</span><span class="keyword">);               <br />                }<br />                </span><span class="default">$sQuery </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">'&amp;'</span><span class="keyword">, </span><span class="default">$aPairs</span><span class="keyword">);    <br />            } else {<br />                </span><span class="default">$sQuery </span><span class="keyword">= </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">];<br />            }<br />            <br />            </span><span class="comment">// Compile url<br />            </span><span class="default">$sUrl </span><span class="keyword">= <br />                </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'scheme'</span><span class="keyword">] . </span><span class="string">'://' </span><span class="keyword">. (<br />                    isset(</span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">]) &amp;&amp; </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">] != </span><span class="string">'' </span><span class="keyword">&amp;&amp; isset(</span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'pass'</span><span class="keyword">]) <br />                       ? </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">] . </span><span class="string">':' </span><span class="keyword">. </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'pass'</span><span class="keyword">] . </span><span class="string">'@' <br />                       </span><span class="keyword">: </span><span class="string">''<br />                </span><span class="keyword">) .<br />                </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">] . (<br />                    isset(</span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">]) &amp;&amp; </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">] != </span><span class="string">''<br />                       </span><span class="keyword">? </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">]<br />                       : </span><span class="string">''<br />                </span><span class="keyword">) . (<br />                   </span><span class="default">$sQuery </span><span class="keyword">!= </span><span class="string">''<br />                       </span><span class="keyword">? </span><span class="string">'?' </span><span class="keyword">. </span><span class="default">$sQuery<br />                       </span><span class="keyword">: </span><span class="string">''<br />                </span><span class="keyword">) . (<br />                   isset(</span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'fragment'</span><span class="keyword">]) &amp;&amp; </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'fragment'</span><span class="keyword">] != </span><span class="string">''<br />                       </span><span class="keyword">? </span><span class="string">'#' </span><span class="keyword">. </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'fragment'</span><span class="keyword">]<br />                       : </span><span class="string">''<br />                </span><span class="keyword">);<br />            return </span><span class="default">$sUrl</span><span class="keyword">;<br />        }<br />        </span><span class="comment">/**<br />         * Parses url and returns array of key-value pairs of url params<br />         *<br />         * @param String $sUrl<br />         * @return Array<br />         */<br />        </span><span class="keyword">public static function </span><span class="default">getParams</span><span class="keyword">(</span><span class="default">$sUrl</span><span class="keyword">) {<br />            </span><span class="default">$aUrl </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">explode</span><span class="keyword">(</span><span class="default">$sUrl</span><span class="keyword">);<br />            return </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'query_params'</span><span class="keyword">];<br />        }<br />        </span><span class="comment">/**<br />         * Removes existing url params and sets them to those specified in $aParams<br />         *<br />         * @param String $sUrl Url<br />         * @param Array $aParams Array of Key-Value pairs to set url params to<br />         * @return  String Newly compiled url <br />         */<br />        </span><span class="keyword">public static function </span><span class="default">setParams</span><span class="keyword">(</span><span class="default">$sUrl</span><span class="keyword">, </span><span class="default">$aParams</span><span class="keyword">) {<br />            </span><span class="default">$aUrl </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">explode</span><span class="keyword">(</span><span class="default">$sUrl</span><span class="keyword">);<br />            </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">] = </span><span class="string">''</span><span class="keyword">;<br />            </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'query_params'</span><span class="keyword">] = </span><span class="default">$aParams</span><span class="keyword">;<br />            return </span><span class="default">self</span><span class="keyword">::</span><span class="default">implode</span><span class="keyword">(</span><span class="default">$aUrl</span><span class="keyword">);<br />        }<br />        </span><span class="comment">/**<br />         * Updates values of existing url params and/or adds (if not set) those specified in $aParams<br />         *<br />         * @param String $sUrl Url<br />         * @param Array $aParams Array of Key-Value pairs to set url params to<br />         * @return  String Newly compiled url <br />         */<br />        </span><span class="keyword">public static function </span><span class="default">updateParams</span><span class="keyword">(</span><span class="default">$sUrl</span><span class="keyword">, </span><span class="default">$aParams</span><span class="keyword">) {<br />            </span><span class="default">$aUrl </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">explode</span><span class="keyword">(</span><span class="default">$sUrl</span><span class="keyword">);<br />            </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">] = </span><span class="string">''</span><span class="keyword">;<br />            </span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'query_params'</span><span class="keyword">] = </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$aUrl</span><span class="keyword">[</span><span class="string">'query_params'</span><span class="keyword">], </span><span class="default">$aParams</span><span class="keyword">);<br />            return </span><span class="default">self</span><span class="keyword">::</span><span class="default">implode</span><span class="keyword">(</span><span class="default">$aUrl</span><span class="keyword">);<br />        }<br />    }<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="123994">  <div class="votes">
    <div id="Vu123994">
    <a href="https://www.php.net/manual/vote-note.php?id=123994&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123994">
    <a href="https://www.php.net/manual/vote-note.php?id=123994&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123994" title="66% like this...">
    2
    </div>
  </div>
  <a href="function.parse-url.php.html#123994" class="name">
  <strong class="user"><em>Michael</em></strong></a><a class="genanchor" href="function.parse-url.php.html#123994"> &para;</a><div class="date" title="2019-06-30 06:52"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom123994">
<div class="phpcode"><code><span class="html">There's a quirk where this function will return the host as the "path" if there is a leading space.<br /><br /><span class="default">&lt;?php<br /><br />$url </span><span class="keyword">= </span><span class="string">' <a href="https://foobar.com:80/mypath/myfile.php" rel="nofollow" target="_blank">https://foobar.com:80/mypath/myfile.php</a>'</span><span class="keyword">;<br /><br /></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">));<br /></span><span class="comment">/*<br />Array<br />(<br />    [path] =&gt;  <a href="https://foobar.com:80/mypath/myfile.php" rel="nofollow" target="_blank">https://foobar.com:80/mypath/myfile.php</a><br />)<br />*/<br /><br /></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">)));<br /></span><span class="comment">/*<br />Array<br />(<br />    [scheme] =&gt; https<br />    [host] =&gt; foobar.com<br />    [port] =&gt; 80<br />    [path] =&gt; /mypath/myfile.php<br />)<br />*/<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="121498">  <div class="votes">
    <div id="Vu121498">
    <a href="https://www.php.net/manual/vote-note.php?id=121498&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd121498">
    <a href="https://www.php.net/manual/vote-note.php?id=121498&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V121498" title="66% like this...">
    3
    </div>
  </div>
  <a href="function.parse-url.php.html#121498" class="name">
  <strong class="user"><em>demerit</em></strong></a><a class="genanchor" href="function.parse-url.php.html#121498"> &para;</a><div class="date" title="2017-08-09 12:06"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom121498">
<div class="phpcode"><code><span class="html">There is a change in PHP 7 (I noticed it in 7.1 upgrading from 5.3) where if the password portion has an octothorpe (#) in it, parsing fails in 7.1, whereas it succeeds in 5.3.</span></code></div>
  </div>
 </div>
  <div class="note" id="117143">  <div class="votes">
    <div id="Vu117143">
    <a href="https://www.php.net/manual/vote-note.php?id=117143&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117143">
    <a href="https://www.php.net/manual/vote-note.php?id=117143&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117143" title="66% like this...">
    3
    </div>
  </div>
  <a href="function.parse-url.php.html#117143" class="name">
  <strong class="user"><em>Rob</em></strong></a><a class="genanchor" href="function.parse-url.php.html#117143"> &para;</a><div class="date" title="2015-04-21 12:27"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom117143">
<div class="phpcode"><code><span class="html">I've been working on a generic class that would make URI parsing / building a little easier.<br /><br />The composer package is here: <a href="https://packagist.org/packages/enrise/urihelper" rel="nofollow" target="_blank">https://packagist.org/packages/enrise/urihelper</a><br /><br />And the repository is here: <a href="https://github.com/Enrise/UriHelper" rel="nofollow" target="_blank">https://github.com/Enrise/UriHelper</a><br /><br />An example of the usage:<br /><br /><span class="default">&lt;?php<br />$uri </span><span class="keyword">= new </span><span class="default">\Enrise\Uri</span><span class="keyword">(</span><span class="string">'<a href="http://usr:pss@example.com:81/mypath/myfile.html?a=b&amp;b[]=2&amp;b[]=3#myfragment" rel="nofollow" target="_blank">http://usr:pss@example.com:81/mypath/myfile.html?a=b&amp;b[]=2&amp;b[]=3#myfragment</a>'</span><span class="keyword">);<br />echo </span><span class="default">$uri</span><span class="keyword">-&gt;</span><span class="default">getScheme</span><span class="keyword">(); </span><span class="comment">// http<br /></span><span class="keyword">echo </span><span class="default">$uri</span><span class="keyword">-&gt;</span><span class="default">getUser</span><span class="keyword">(); </span><span class="comment">// usr<br /></span><span class="keyword">echo </span><span class="default">$uri</span><span class="keyword">-&gt;</span><span class="default">getPass</span><span class="keyword">(); </span><span class="comment">// pss<br /></span><span class="keyword">echo </span><span class="default">$uri</span><span class="keyword">-&gt;</span><span class="default">getHost</span><span class="keyword">(); </span><span class="comment">// example.com<br /></span><span class="keyword">echo </span><span class="default">$uri</span><span class="keyword">-&gt;</span><span class="default">getPort</span><span class="keyword">(); </span><span class="comment">// 81<br /></span><span class="keyword">echo </span><span class="default">$uri</span><span class="keyword">-&gt;</span><span class="default">getPath</span><span class="keyword">(); </span><span class="comment">// /mypath/myfile.html<br /></span><span class="keyword">echo </span><span class="default">$uri</span><span class="keyword">-&gt;</span><span class="default">getQuery</span><span class="keyword">(); </span><span class="comment">// a=b&amp;b[]=2&amp;b[]=3<br /></span><span class="keyword">echo </span><span class="default">$uri</span><span class="keyword">-&gt;</span><span class="default">getFragment</span><span class="keyword">(); </span><span class="comment">// myfragment<br /></span><span class="keyword">echo </span><span class="default">$uri</span><span class="keyword">-&gt;</span><span class="default">isSchemeless</span><span class="keyword">(); </span><span class="comment">// false<br /></span><span class="keyword">echo </span><span class="default">$uri</span><span class="keyword">-&gt;</span><span class="default">isRelative</span><span class="keyword">(); </span><span class="comment">// false<br /><br /></span><span class="default">$uri</span><span class="keyword">-&gt;</span><span class="default">setScheme</span><span class="keyword">(</span><span class="string">'scheme:child:scheme.VALIDscheme123:'</span><span class="keyword">);<br /></span><span class="default">$uri</span><span class="keyword">-&gt;</span><span class="default">setPort</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">);<br /><br />echo </span><span class="default">$uri</span><span class="keyword">-&gt;</span><span class="default">getUri</span><span class="keyword">(); </span><span class="comment">//scheme:child:scheme.VALIDscheme123:usr:pss@example.com/mypath/myfile.html?a=b&amp;b[]=2&amp;b[]=3#myfragment<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="114704">  <div class="votes">
    <div id="Vu114704">
    <a href="https://www.php.net/manual/vote-note.php?id=114704&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd114704">
    <a href="https://www.php.net/manual/vote-note.php?id=114704&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V114704" title="62% like this...">
    15
    </div>
  </div>
  <a href="function.parse-url.php.html#114704" class="name">
  <strong class="user"><em>ivijan dot stefan at gmail dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#114704"> &para;</a><div class="date" title="2014-03-26 04:49"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom114704">
<div class="phpcode"><code><span class="html">Here's a good way to using parse_url () gets the youtube link.<br />This function I used in many works:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">youtube</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="default">$width</span><span class="keyword">=</span><span class="default">560</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">=</span><span class="default">315</span><span class="keyword">, </span><span class="default">$fullscreen</span><span class="keyword">=</span><span class="default">true</span><span class="keyword">)<br />{<br />    </span><span class="default">parse_str</span><span class="keyword">( </span><span class="default">parse_url</span><span class="keyword">( </span><span class="default">$url</span><span class="keyword">, </span><span class="default">PHP_URL_QUERY </span><span class="keyword">), </span><span class="default">$my_array_of_vars </span><span class="keyword">);<br />    </span><span class="default">$youtube</span><span class="keyword">= </span><span class="string">'&lt;iframe allowtransparency="true" scrolling="no" width="'</span><span class="keyword">.</span><span class="default">$width</span><span class="keyword">.</span><span class="string">'" height="'</span><span class="keyword">.</span><span class="default">$height</span><span class="keyword">.</span><span class="string">'" src="//www.youtube.com/embed/'</span><span class="keyword">.</span><span class="default">$my_array_of_vars</span><span class="keyword">[</span><span class="string">'v'</span><span class="keyword">].</span><span class="string">'" frameborder="0"'</span><span class="keyword">.(</span><span class="default">$fullscreen</span><span class="keyword">?</span><span class="string">' allowfullscreen'</span><span class="keyword">:</span><span class="default">NULL</span><span class="keyword">).</span><span class="string">'&gt;&lt;/iframe&gt;'</span><span class="keyword">;<br />    return </span><span class="default">$youtube</span><span class="keyword">;<br />}<br /><br /></span><span class="comment">// show youtube on my page<br /></span><span class="default">$url</span><span class="keyword">=</span><span class="string">'<a href="http://www.youtube.com/watch?v=yvTd6XxgCBE" rel="nofollow" target="_blank">http://www.youtube.com/watch?v=yvTd6XxgCBE</a>'</span><span class="keyword">;<br /> </span><span class="default">youtube</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="default">560</span><span class="keyword">, </span><span class="default">315</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />parse_url () allocates a unique youtube code and  put into iframe link and displayed on your page. The size of the videos choose yourself.<br /><br />Enjoy.</span></code></div>
  </div>
 </div>
  <div class="note" id="108787">  <div class="votes">
    <div id="Vu108787">
    <a href="https://www.php.net/manual/vote-note.php?id=108787&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd108787">
    <a href="https://www.php.net/manual/vote-note.php?id=108787&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V108787" title="64% like this...">
    8
    </div>
  </div>
  <a href="function.parse-url.php.html#108787" class="name">
  <strong class="user"><em>laszlo dot janszky at gmail dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#108787"> &para;</a><div class="date" title="2012-05-24 08:20"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom108787">
<div class="phpcode"><code><span class="html">Created another parse_url utf-8 compatible function.<br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">mb_parse_url</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {<br />    </span><span class="default">$encodedUrl </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'%[^:/?#&amp;=\.]+%usDe'</span><span class="keyword">, </span><span class="string">'urlencode(\'$0\')'</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">);<br />    </span><span class="default">$components </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$encodedUrl</span><span class="keyword">);<br />    foreach (</span><span class="default">$components </span><span class="keyword">as &amp;</span><span class="default">$component</span><span class="keyword">)<br />        </span><span class="default">$component </span><span class="keyword">= </span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">$component</span><span class="keyword">);<br />    return </span><span class="default">$components</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="125365">  <div class="votes">
    <div id="Vu125365">
    <a href="https://www.php.net/manual/vote-note.php?id=125365&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd125365">
    <a href="https://www.php.net/manual/vote-note.php?id=125365&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V125365" title="62% like this...">
    2
    </div>
  </div>
  <a href="function.parse-url.php.html#125365" class="name">
  <strong class="user"><em>simbappo</em></strong></a><a class="genanchor" href="function.parse-url.php.html#125365"> &para;</a><div class="date" title="2020-09-15 05:17"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom125365">
<div class="phpcode"><code><span class="html">unset a query var from passed in or current URL:<br /><br />function unsetqueryvar($var, $url=null) {<br />    if (null == $url) $url = $_SERVER['REQUEST_URI'];<br />    //mogrify to list<br />    $url = parse_url($url);<br />    $rq = [];<br />    parse_str($url['query'], $rq);<br />    unset($rq[$var]);<br />    return $url['scheme'].$url['host'].$url['path'].'?'.http_build_query($rq).$url['fragment'];<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="112571">  <div class="votes">
    <div id="Vu112571">
    <a href="https://www.php.net/manual/vote-note.php?id=112571&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd112571">
    <a href="https://www.php.net/manual/vote-note.php?id=112571&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V112571" title="63% like this...">
    5
    </div>
  </div>
  <a href="function.parse-url.php.html#112571" class="name">
  <strong class="user"><em>utilmind</em></strong></a><a class="genanchor" href="function.parse-url.php.html#112571"> &para;</a><div class="date" title="2013-07-01 12:06"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom112571">
<div class="phpcode"><code><span class="html">parse_url doesn't works if the protocol doesn't specified. This seems like sandard, even the youtube doesn't gives the protocol name when generates code for embedding which have a look like "//youtube.com/etc".<br /><br />So, to avoid bug, you must always check, whether the provided url has the protocol, and if not (starts with 2 slashes) -- add the "http:" prefix.</span></code></div>
  </div>
 </div>
  <div class="note" id="93983">  <div class="votes">
    <div id="Vu93983">
    <a href="https://www.php.net/manual/vote-note.php?id=93983&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd93983">
    <a href="https://www.php.net/manual/vote-note.php?id=93983&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V93983" title="61% like this...">
    7
    </div>
  </div>
  <a href="function.parse-url.php.html#93983" class="name">
  <strong class="user"><em>nirazuelos at gmail dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#93983"> &para;</a><div class="date" title="2009-10-09 02:45"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom93983">
<div class="phpcode"><code><span class="html">Hello, for some odd reason, parse_url returns the host (ex. example.com) as the path when no scheme is provided in the input url. So I've written a quick function to get the real host:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">getHost</span><span class="keyword">(</span><span class="default">$Address</span><span class="keyword">) {<br />   </span><span class="default">$parseUrl </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$Address</span><span class="keyword">));<br />   return </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$parseUrl</span><span class="keyword">[</span><span class="default">host</span><span class="keyword">] ? </span><span class="default">$parseUrl</span><span class="keyword">[</span><span class="default">host</span><span class="keyword">] : </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$parseUrl</span><span class="keyword">[</span><span class="default">path</span><span class="keyword">], </span><span class="default">2</span><span class="keyword">)));<br />}<br /><br /></span><span class="default">getHost</span><span class="keyword">(</span><span class="string">"example.com"</span><span class="keyword">); </span><span class="comment">// Gives example.com<br /></span><span class="default">getHost</span><span class="keyword">(</span><span class="string">"<a href="http://example.com" rel="nofollow" target="_blank">http://example.com</a>"</span><span class="keyword">); </span><span class="comment">// Gives example.com<br /></span><span class="default">getHost</span><span class="keyword">(</span><span class="string">"www.example.com"</span><span class="keyword">); </span><span class="comment">// Gives www.example.com<br /></span><span class="default">getHost</span><span class="keyword">(</span><span class="string">"<a href="http://example.com/xyz" rel="nofollow" target="_blank">http://example.com/xyz</a>"</span><span class="keyword">); </span><span class="comment">// Gives example.com<br /></span><span class="default">?&gt;<br /></span><br />You could try anything! It gives the host (including the subdomain if exists).<br /><br />Hope it helped you.</span></code></div>
  </div>
 </div>
  <div class="note" id="125840">  <div class="votes">
    <div id="Vu125840">
    <a href="https://www.php.net/manual/vote-note.php?id=125840&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd125840">
    <a href="https://www.php.net/manual/vote-note.php?id=125840&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V125840" title="60% like this...">
    1
    </div>
  </div>
  <a href="function.parse-url.php.html#125840" class="name">
  <strong class="user"><em>vbrazas15 at gmail dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#125840"> &para;</a><div class="date" title="2021-02-18 01:10"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom125840">
<div class="phpcode"><code><span class="html">My hamble improvements to the famouse `unparse_url` function by "thomas at gielfeldt dot com":<br /><br />```php<br />    /**<br />     * @param array $parsedUrl -- result of the library `parse_url()` function<br />     *<br />     * @return string<br />     */<br />    function unparseUrl(array $parsedUrl): string<br />    {<br />        // PHP_URL_SCHEME<br />        $scheme = empty($parsedUrl[PHP_URL_SCHEME]) ? '' : (rtrim($parsedUrl['scheme'], ':/') . '://');<br /><br />        $user = empty($parsedUrl[PHP_URL_USER]) ? '' : rtrim($parsedUrl['user'], '@:');<br />        $pass = empty($parsedUrl[PHP_URL_PASS]) ? '' : (':' . trim($parsedUrl['pass'], '@:'));<br /><br />        $pass = !$user ? '' : ($pass . '@');<br /><br />        $host = empty($parsedUrl[PHP_URL_HOST]) ? '' : rtrim($parsedUrl['host'], '/');<br />        $port = empty($parsedUrl[PHP_URL_PORT]) ? '' : (':' . (int)ltrim($parsedUrl['port'], ':'));<br />        $path = empty($parsedUrl[PHP_URL_PATH]) ? '' : ('/' . ltrim($parsedUrl['path'], '/'));<br /><br />        $host = ($host &amp;&amp; !$port &amp;&amp; !$path) ? $parsedUrl['host'] : $host;<br />        $path = ($path &amp;&amp; !$host &amp;&amp; !$port) ? $parsedUrl['path'] : $path;<br /><br />        $query = empty($parsedUrl[PHP_URL_QUERY]) ? '' : ('?' . ltrim($parsedUrl['query'], '?'));<br />        $fragment = empty($parsedUrl[PHP_URL_FRAGMENT]) ? '' : ('#' . ltrim($parsedUrl['fragment'], '#'));<br /><br />        return "$scheme$user$pass$host$port$path$query$fragment";<br />    }<br />```</span></code></div>
  </div>
 </div>
  <div class="note" id="76979">  <div class="votes">
    <div id="Vu76979">
    <a href="https://www.php.net/manual/vote-note.php?id=76979&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd76979">
    <a href="https://www.php.net/manual/vote-note.php?id=76979&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V76979" title="62% like this...">
    2
    </div>
  </div>
  <a href="function.parse-url.php.html#76979" class="name">
  <strong class="user"><em>spam at paulisageek dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#76979"> &para;</a><div class="date" title="2007-08-08 12:05"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom76979">
<div class="phpcode"><code><span class="html">In reply to adrian,<br /><br />Thank you very much for your function. There is a small issue with your relative protocol function. You need to remove the // when making the url the path. Here is the new function.<br /><br />function resolve_url($base, $url) {<br />        if (!strlen($base)) return $url;<br />        // Step 2<br />        if (!strlen($url)) return $base;<br />        // Step 3<br />        if (preg_match('!^[a-z]+:!i', $url)) return $url;<br />        $base = parse_url($base);<br />        if ($url{0} == "#") {<br />                // Step 2 (fragment)<br />                $base['fragment'] = substr($url, 1);<br />                return unparse_url($base);<br />        }<br />        unset($base['fragment']);<br />        unset($base['query']);<br />        if (substr($url, 0, 2) == "//") {<br />                // Step 4<br />                return unparse_url(array(<br />                        'scheme'=&gt;$base['scheme'],<br />                        'path'=&gt;substr($url,2),<br />                ));<br />        } else if ($url{0} == "/") {<br />                // Step 5<br />                $base['path'] = $url;<br />        } else {<br />                // Step 6<br />                $path = explode('/', $base['path']);<br />                $url_path = explode('/', $url);<br />                // Step 6a: drop file from base<br />                array_pop($path);<br />                // Step 6b, 6c, 6e: append url while removing "." and ".." from<br />                // the directory portion<br />                $end = array_pop($url_path);<br />                foreach ($url_path as $segment) {<br />                        if ($segment == '.') {<br />                                // skip<br />                        } else if ($segment == '..' &amp;&amp; $path &amp;&amp; $path[sizeof($path)-1] != '..') {<br />                                array_pop($path);<br />                        } else {<br />                                $path[] = $segment;<br />                        }<br />                }<br />                // Step 6d, 6f: remove "." and ".." from file portion<br />                if ($end == '.') {<br />                        $path[] = '';<br />                } else if ($end == '..' &amp;&amp; $path &amp;&amp; $path[sizeof($path)-1] != '..') {<br />                        $path[sizeof($path)-1] = '';<br />                } else {<br />                        $path[] = $end;<br />                }<br />                // Step 6h<br />                $base['path'] = join('/', $path);<br /><br />        }<br />        // Step 7<br />        return unparse_url($base);<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="122207">  <div class="votes">
    <div id="Vu122207">
    <a href="https://www.php.net/manual/vote-note.php?id=122207&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122207">
    <a href="https://www.php.net/manual/vote-note.php?id=122207&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122207" title="60% like this...">
    1
    </div>
  </div>
  <a href="function.parse-url.php.html#122207" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.parse-url.php.html#122207"> &para;</a><div class="date" title="2017-12-30 07:47"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom122207">
<div class="phpcode"><code><span class="html">This function will attempt to parse relative URLs but relaying on it can produce unexpected behavior that can cause some hard to track bugs. (The following results are obtained from PHP 5.5.19)<br /><br />Attempting to parse a url like this<br /><a href="http://example.com/entities/GOA:98/?search=8989157d1f22" rel="nofollow" target="_blank">http://example.com/entities/GOA:98/?search=8989157d1f22</a><br />Correctly produces<br /><span class="default">&lt;?php<br /></span><span class="keyword">array (<br />  </span><span class="string">'scheme' </span><span class="keyword">=&gt; </span><span class="string">'http'</span><span class="keyword">,<br />  </span><span class="string">'host' </span><span class="keyword">=&gt; </span><span class="string">'example.com'</span><span class="keyword">,<br />  </span><span class="string">'path' </span><span class="keyword">=&gt; </span><span class="string">'/entities/GOA:98/'</span><span class="keyword">,<br />  </span><span class="string">'query' </span><span class="keyword">=&gt; </span><span class="string">'search=8989157d1f22'</span><span class="keyword">,<br />);<br /></span><span class="default">?&gt;<br /></span><br />However, Attempting to parse the relative URL<br />entities/GOA:98/?search=8989157d1f22<br /><span class="default">&lt;?php<br /></span><span class="keyword">array (<br />  </span><span class="string">'host' </span><span class="keyword">=&gt; </span><span class="string">'entities'</span><span class="keyword">,<br />  </span><span class="string">'port' </span><span class="keyword">=&gt; </span><span class="default">98</span><span class="keyword">,<br />  </span><span class="string">'path' </span><span class="keyword">=&gt; </span><span class="string">'/GOA:98/'</span><span class="keyword">,<br />  </span><span class="string">'query' </span><span class="keyword">=&gt; </span><span class="string">'search=8989157d1f22'</span><span class="keyword">,<br />)<br /></span><span class="default">?&gt;<br /></span>If I change :98 to :A98 parse_url parses the URL correctly as<br /><span class="default">&lt;?php<br /></span><span class="keyword">array (<br />  </span><span class="string">'path' </span><span class="keyword">=&gt; </span><span class="string">'entities/GOA:A98/'</span><span class="keyword">,<br />  </span><span class="string">'query' </span><span class="keyword">=&gt; </span><span class="string">'search=8989157d1f22'</span><span class="keyword">,<br />)<br /></span><span class="default">?&gt;<br /></span>Bottom line, Avoid using parse_url for relative urls unless you have tested the expected input and you know parse_url will handle them well.<br /><br /><a href="https://forums.hawacastle.com/" rel="nofollow" target="_blank">https://forums.hawacastle.com/</a></span></code></div>
  </div>
 </div>
  <div class="note" id="121392">  <div class="votes">
    <div id="Vu121392">
    <a href="https://www.php.net/manual/vote-note.php?id=121392&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd121392">
    <a href="https://www.php.net/manual/vote-note.php?id=121392&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V121392" title="58% like this...">
    5
    </div>
  </div>
  <a href="function.parse-url.php.html#121392" class="name">
  <strong class="user"><em>zappascripts at gmail com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#121392"> &para;</a><div class="date" title="2017-07-17 01:30"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom121392">
<div class="phpcode"><code><span class="html">Here's a simple class I made that makes use of this parse_url.<br />I needed a way for a page to retain get parameters but also edit or add onto them. <br />I also had some pages that needed the same GET paramaters so I also added a way to change the path.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">Paths</span><span class="keyword">{<br /><br />    private </span><span class="default">$url</span><span class="keyword">;<br />    public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">){<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">url </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);<br />    }<br />    <br />    public function </span><span class="default">returnUrl</span><span class="keyword">(){<br />        </span><span class="default">$return </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">url</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">].</span><span class="string">'?'</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">url</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">];<br />        </span><span class="default">$return </span><span class="keyword">= (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$return</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">) == </span><span class="string">"&amp;"</span><span class="keyword">)? </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$return</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">) : </span><span class="default">$return</span><span class="keyword">;<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">resetQuery</span><span class="keyword">();<br />        return </span><span class="default">$return</span><span class="keyword">;<br />    }<br />    <br />    public function </span><span class="default">changePath</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">){<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">url</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">] = </span><span class="default">$path</span><span class="keyword">;<br />    }<br />    <br />    public function </span><span class="default">editQuery</span><span class="keyword">(</span><span class="default">$get</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">){<br />        </span><span class="default">$parts </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"&amp;"</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">url</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">]);<br />        </span><span class="default">$return </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />        foreach(</span><span class="default">$parts </span><span class="keyword">as </span><span class="default">$p</span><span class="keyword">){<br />            </span><span class="default">$paramData </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">,</span><span class="default">$p</span><span class="keyword">);<br />            if(</span><span class="default">$paramData</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="default">$get</span><span class="keyword">){<br />                </span><span class="default">$paramData</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />            }<br />            </span><span class="default">$return </span><span class="keyword">.= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">,</span><span class="default">$paramData</span><span class="keyword">).</span><span class="string">'&amp;'</span><span class="keyword">;<br />            <br />        }<br />        <br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">url</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">] = </span><span class="default">$return</span><span class="keyword">;<br />    }<br />    <br />    public function </span><span class="default">addQuery</span><span class="keyword">(</span><span class="default">$get</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">){<br />        </span><span class="default">$part </span><span class="keyword">= </span><span class="default">$get</span><span class="keyword">.</span><span class="string">"="</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">;<br />        </span><span class="default">$and </span><span class="keyword">= (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">url</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">] == </span><span class="string">"?"</span><span class="keyword">) ? </span><span class="string">"" </span><span class="keyword">: </span><span class="string">"&amp;"</span><span class="keyword">;<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">url</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">] .= </span><span class="default">$and</span><span class="keyword">.</span><span class="default">$part</span><span class="keyword">;<br />    }<br />    <br />    public function </span><span class="default">checkQuery</span><span class="keyword">(</span><span class="default">$get</span><span class="keyword">){<br />        </span><span class="default">$parts </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"&amp;"</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">url</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">]);<br />        <br />            foreach(</span><span class="default">$parts </span><span class="keyword">as </span><span class="default">$p</span><span class="keyword">){<br />                </span><span class="default">$paramData </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">,</span><span class="default">$p</span><span class="keyword">);<br />                if(</span><span class="default">$paramData</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="default">$get</span><span class="keyword">)<br />                    return </span><span class="default">true</span><span class="keyword">;<br />            }<br />            return </span><span class="default">false</span><span class="keyword">;<br />        <br />    }<br />    <br />    public function </span><span class="default">buildQuery</span><span class="keyword">(</span><span class="default">$get</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">){<br />        if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">checkQuery</span><span class="keyword">(</span><span class="default">$get</span><span class="keyword">))<br />            </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">editQuery</span><span class="keyword">(</span><span class="default">$get</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);<br />        else<br />            </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">addQuery</span><span class="keyword">(</span><span class="default">$get</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);<br />        <br />    }<br />    <br />    public function </span><span class="default">resetQuery</span><span class="keyword">(){<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">url </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REQUEST_URI'</span><span class="keyword">]);<br />    }<br />    <br />    <br />    <br /><br />}<br /></span><span class="default">?&gt;<br /></span><br />Useage:<br /><br />Test.php?foo=1:<br /><br /><span class="default">&lt;?php<br />$path </span><span class="keyword">= new </span><span class="default">Paths</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REQUEST_URI'</span><span class="keyword">]);<br /></span><span class="default">$path</span><span class="keyword">-&gt;</span><span class="default">changePath</span><span class="keyword">(</span><span class="string">"/baz.php"</span><span class="keyword">);<br /></span><span class="default">$path</span><span class="keyword">-&gt;</span><span class="default">buildQuery</span><span class="keyword">(</span><span class="string">"foo"</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);<br /></span><span class="default">$path</span><span class="keyword">-&gt;</span><span class="default">buildQuery</span><span class="keyword">(</span><span class="string">"bar"</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br />echo </span><span class="default">$path</span><span class="keyword">-&gt;</span><span class="default">returnUrl</span><span class="keyword">();<br /></span><span class="default">?&gt;<br /></span><br />returns: /baz.php?foo=2&amp;bar=3    <br /><br />Hope this is of some use to someone!</span></code></div>
  </div>
 </div>
  <div class="note" id="86413">  <div class="votes">
    <div id="Vu86413">
    <a href="https://www.php.net/manual/vote-note.php?id=86413&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd86413">
    <a href="https://www.php.net/manual/vote-note.php?id=86413&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V86413" title="60% like this...">
    2
    </div>
  </div>
  <a href="function.parse-url.php.html#86413" class="name">
  <strong class="user"><em>vdklah at hotmail dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#86413"> &para;</a><div class="date" title="2008-10-17 02:53"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom86413">
<div class="phpcode"><code><span class="html">Some example that determines the URL port. <br />When port not specified, it derives it from the scheme.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">getUrlPort</span><span class="keyword">( </span><span class="default">$urlInfo </span><span class="keyword">)<br />{<br />    if( isset(</span><span class="default">$urlInfo</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">]) ) {<br />        </span><span class="default">$port </span><span class="keyword">= </span><span class="default">$urlInfo</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">];<br />    } else { </span><span class="comment">// no port specified; get default port<br />        </span><span class="keyword">if (isset(</span><span class="default">$urlInfo</span><span class="keyword">[</span><span class="string">'scheme'</span><span class="keyword">]) ) {<br />            switch( </span><span class="default">$urlInfo</span><span class="keyword">[</span><span class="string">'scheme'</span><span class="keyword">] ) {<br />                case </span><span class="string">'http'</span><span class="keyword">:<br />                    </span><span class="default">$port </span><span class="keyword">= </span><span class="default">80</span><span class="keyword">; </span><span class="comment">// default for http<br />                    </span><span class="keyword">break;<br />                case </span><span class="string">'https'</span><span class="keyword">:<br />                    </span><span class="default">$port </span><span class="keyword">= </span><span class="default">443</span><span class="keyword">; </span><span class="comment">// default for https<br />                    </span><span class="keyword">break;<br />                case </span><span class="string">'ftp'</span><span class="keyword">:<br />                    </span><span class="default">$port </span><span class="keyword">= </span><span class="default">21</span><span class="keyword">; </span><span class="comment">// default for ftp<br />                    </span><span class="keyword">break;<br />                case </span><span class="string">'ftps'</span><span class="keyword">:<br />                    </span><span class="default">$port </span><span class="keyword">= </span><span class="default">990</span><span class="keyword">; </span><span class="comment">// default for ftps<br />                    </span><span class="keyword">break;<br />                default:<br />                    </span><span class="default">$port </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="comment">// error; unsupported scheme<br />                    </span><span class="keyword">break;<br />            }<br />        } else {<br />            </span><span class="default">$port </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="comment">// error; unknown scheme<br />        </span><span class="keyword">}<br />    }<br />    return </span><span class="default">$port</span><span class="keyword">;<br />}<br /><br /></span><span class="default">$url </span><span class="keyword">= </span><span class="string">"<a href="http://nl3.php.net/manual/en/function.parse-url.php" rel="nofollow" target="_blank">http://nl3.php.net/manual/en/function.parse-url.php</a>"</span><span class="keyword">;<br /></span><span class="default">$urlInfo </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">( </span><span class="default">$url </span><span class="keyword">);<br /></span><span class="default">$urlPort </span><span class="keyword">= </span><span class="default">getUrlPort</span><span class="keyword">( </span><span class="default">$urlInfo </span><span class="keyword">);<br />if( </span><span class="default">$urlPort </span><span class="keyword">!== </span><span class="default">0 </span><span class="keyword">) {<br />    print </span><span class="string">'Found URL port: '</span><span class="keyword">.</span><span class="default">$urlPort</span><span class="keyword">;<br />} else {<br />    print </span><span class="string">'ERROR: Could not find port at URL: '</span><span class="keyword">.</span><span class="default">$url</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="95304">  <div class="votes">
    <div id="Vu95304">
    <a href="https://www.php.net/manual/vote-note.php?id=95304&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd95304">
    <a href="https://www.php.net/manual/vote-note.php?id=95304&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V95304" title="58% like this...">
    3
    </div>
  </div>
  <a href="function.parse-url.php.html#95304" class="name">
  <strong class="user"><em>need_sunny at yahoo dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#95304"> &para;</a><div class="date" title="2009-12-25 05:57"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom95304">
<div class="phpcode"><code><span class="html">Thanks to xellisx for his parse_query function. I used it in one of my projects and it works well. But it has an error. I fixed the error and improved it a little bit. Here is my version of it:<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">// Originally written by xellisx<br /></span><span class="keyword">function </span><span class="default">parse_query</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">)<br /> {<br />  </span><span class="comment">/**<br />   *  Use this function to parse out the query array element from<br />   *  the output of parse_url().<br />   */<br />  </span><span class="default">$var  </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">, </span><span class="default">PHP_URL_QUERY</span><span class="keyword">);<br />  </span><span class="default">$var  </span><span class="keyword">= </span><span class="default">html_entity_decode</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">);<br />  </span><span class="default">$var  </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'&amp;'</span><span class="keyword">, </span><span class="default">$var</span><span class="keyword">);<br />  </span><span class="default">$arr  </span><span class="keyword">= array();<br /><br />  foreach(</span><span class="default">$var </span><span class="keyword">as </span><span class="default">$val</span><span class="keyword">)<br />   {<br />    </span><span class="default">$x          </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'='</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">);<br />    </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]] = </span><span class="default">$x</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />   }<br />  unset(</span><span class="default">$val</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$var</span><span class="keyword">);<br />  return </span><span class="default">$arr</span><span class="keyword">;<br /> }<br /></span><span class="default">?&gt;<br /></span><br />At the first line there was parse_query($val), I made it $var. It used to return a null array before this fix.<br /><br />I have added the parse_url line. So now the function will only focus in the query part, not the whole URL. This is useful if something like below is done:<br /><span class="default">&lt;?php<br />$my_GET </span><span class="keyword">= </span><span class="default">parse_query</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REQUEST_URI'</span><span class="keyword">]);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="123148">  <div class="votes">
    <div id="Vu123148">
    <a href="https://www.php.net/manual/vote-note.php?id=123148&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123148">
    <a href="https://www.php.net/manual/vote-note.php?id=123148&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123148" title="55% like this...">
    1
    </div>
  </div>
  <a href="function.parse-url.php.html#123148" class="name">
  <strong class="user"><em>bramg dot net1 at gmail dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#123148"> &para;</a><div class="date" title="2018-09-21 10:07"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom123148">
<div class="phpcode"><code><span class="html">this is my 404 error page is this ok  or it need improvements <br /><br /><span class="default">&lt;?php<br /></span><span class="comment">/**<br /> * 404.php<br /> *<br /> * The template for displaying 404 pages (not found)<br /> *<br /> * @author    BetterStudio<br /> * @package   Publisher<br /> * @version   2.0.2<br /> */<br /><br /></span><span class="default">get_header</span><span class="keyword">();<br /><br /></span><span class="comment">// Shows breadcrumb<br /></span><span class="keyword">if ( </span><span class="default">publisher_show_breadcrumb</span><span class="keyword">() ) {<br />    </span><span class="default">Better_Framework</span><span class="keyword">()-&gt;</span><span class="default">breadcrumb</span><span class="keyword">()-&gt;</span><span class="default">generate</span><span class="keyword">( array(<br />        </span><span class="string">'before'       </span><span class="keyword">=&gt; </span><span class="string">'&lt;div class="container bf-breadcrumb-container"&gt;'</span><span class="keyword">,<br />        </span><span class="string">'after'        </span><span class="keyword">=&gt; </span><span class="string">'&lt;/div&gt;'</span><span class="keyword">,<br />        </span><span class="string">'custom_class' </span><span class="keyword">=&gt; </span><span class="string">'bc-top-style'<br />    </span><span class="keyword">) );<br />}<br /><br /></span><span class="default">?&gt;<br /></span>    &lt;div class="content-wrap"&gt;<br />        &lt;main <span class="default">&lt;?php publisher_attr</span><span class="keyword">( </span><span class="string">'content'</span><span class="keyword">, </span><span class="string">'' </span><span class="keyword">); </span><span class="default">?&gt;</span>&gt;<br /><br />            &lt;div class="container layout-1-col layout-no-sidebar"&gt;<br />                &lt;div class="row main-section"&gt;<br /><br />                    &lt;div class="content-column content-404"&gt;<br /><br />                        &lt;div class="row first-row"&gt;<br /><br />                            &lt;div class="col-lg-12 text-404-section"&gt;<br />                                &lt;p class="text-404 heading-typo"&gt;404&lt;/p&gt;<br />                            &lt;/div&gt;<br /><br />                            &lt;div class="col-lg-12 desc-section"&gt;<br />                                &lt;h1 class="title-404"&gt;<span class="default">&lt;?php publisher_translation_echo</span><span class="keyword">( </span><span class="string">'404_not_found' </span><span class="keyword">); </span><span class="default">?&gt;</span>&lt;/h1&gt;<br />                                &lt;p&gt;<span class="default">&lt;?php publisher_translation_echo</span><span class="keyword">( </span><span class="string">'404_not_found_message' </span><span class="keyword">); </span><span class="default">?&gt;</span>&lt;/p&gt;<br />                                &lt;div class="action-links clearfix"&gt;<br /><br />                                    &lt;script type="text/javascript"&gt;<br />                                        if (document.referrer) {<br />                                            document.write('&lt;div class="search-action-container"&gt;&lt;a href="' + document.referrer + '"&gt;&lt;i class="fa fa-angle-double-right"&gt;&lt;/i&gt; <span class="default">&lt;?php publisher_translation_echo</span><span class="keyword">( </span><span class="string">'404_go_previous_page' </span><span class="keyword">); </span><span class="default">?&gt;</span>&lt;/a&gt;&lt;/div&gt;');<br />                                        }<br />                                    &lt;/script&gt;<br /><br />                                    &lt;div class="search-action-container"&gt;<br />                                        &lt;a href="<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">esc_url</span><span class="keyword">( </span><span class="default">home_url</span><span class="keyword">( </span><span class="string">'/' </span><span class="keyword">) ); </span><span class="default">?&gt;</span>"&gt;&lt;i<br />                                                    class="fa fa-angle-double-right"&gt;&lt;/i&gt; <span class="default">&lt;?php publisher_translation_echo</span><span class="keyword">( </span><span class="string">'404_go_homepage' </span><span class="keyword">); </span><span class="default">?&gt;<br /></span>                                        &lt;/a&gt;<br />                                    &lt;/div&gt;<br />                                &lt;/div&gt;<br />                            &lt;/div&gt;<br /><br />                        &lt;/div&gt;&lt;!-- .first-row --&gt;<br /><br />                        &lt;div class="row second-row"&gt;<br />                            &lt;div class="col-lg-12"&gt;<br />                                &lt;div class="top-line"&gt;<br />                                    <span class="default">&lt;?php get_search_form</span><span class="keyword">(); </span><span class="default">?&gt;<br /></span>                                &lt;/div&gt;<br />                            &lt;/div&gt;<br />                        &lt;/div&gt;&lt;!-- .second-row --&gt;<br /><br />                    &lt;/div&gt;&lt;!-- .content-column --&gt;<br /><br />                &lt;/div&gt;&lt;!-- .main-section --&gt;<br />            &lt;/div&gt; &lt;!-- .layout-1-col --&gt;<br /><br />        &lt;/main&gt;&lt;!-- main --&gt;<br />    &lt;/div&gt;&lt;!-- .content-wrap --&gt;<br /><br /><span class="default">&lt;?php get_footer</span><span class="keyword">(); </span><span class="default">?&gt;</span> <br /><br /><a href="https://bramg.net" rel="nofollow" target="_blank">https://bramg.net</a></span></code></div>
  </div>
 </div>
  <div class="note" id="100114">  <div class="votes">
    <div id="Vu100114">
    <a href="https://www.php.net/manual/vote-note.php?id=100114&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd100114">
    <a href="https://www.php.net/manual/vote-note.php?id=100114&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V100114" title="54% like this...">
    3
    </div>
  </div>
  <a href="function.parse-url.php.html#100114" class="name">
  <strong class="user"><em>jesse at example dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#100114"> &para;</a><div class="date" title="2010-09-25 07:48"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom100114">
<div class="phpcode"><code><span class="html">@ solenoid: Your code was very helpful, but it fails when the current URL has no query string (it appends '&amp;' instead of '?' before the query).  Below is a fixed version that catches this edge case and corrects it.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">modify_url</span><span class="keyword">(</span><span class="default">$mod</span><span class="keyword">) <br />{ <br />    </span><span class="default">$url </span><span class="keyword">= </span><span class="string">"<a href="http://" rel="nofollow" target="_blank">http://</a>"</span><span class="keyword">.</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_HOST'</span><span class="keyword">].</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REQUEST_URI'</span><span class="keyword">]; <br />    </span><span class="default">$query </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"&amp;"</span><span class="keyword">, </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'QUERY_STRING'</span><span class="keyword">]);<br />    if (!</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'QUERY_STRING'</span><span class="keyword">]) {</span><span class="default">$queryStart </span><span class="keyword">= </span><span class="string">"?"</span><span class="keyword">;} else {</span><span class="default">$queryStart </span><span class="keyword">= </span><span class="string">"&amp;"</span><span class="keyword">;}<br />    </span><span class="comment">// modify/delete data <br />    </span><span class="keyword">foreach(</span><span class="default">$query </span><span class="keyword">as </span><span class="default">$q</span><span class="keyword">) <br />    { <br />        list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">, </span><span class="default">$q</span><span class="keyword">); <br />        if(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$mod</span><span class="keyword">)) <br />        { <br />            if(</span><span class="default">$mod</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) <br />            { <br />                </span><span class="default">$url </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'='</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">.</span><span class="string">'='</span><span class="keyword">.</span><span class="default">$mod</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$url</span><span class="keyword">); <br />            } <br />            else <br />            { <br />                </span><span class="default">$url </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&amp;?'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'='</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">); <br />            } <br />        } <br />    } <br />    </span><span class="comment">// add new data <br />    </span><span class="keyword">foreach(</span><span class="default">$mod </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) <br />    { <br />        if(</span><span class="default">$value </span><span class="keyword">&amp;&amp; !</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'=/'</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">)) <br />        { <br />            </span><span class="default">$url </span><span class="keyword">.= </span><span class="default">$queryStart</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'='</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">; <br />        } <br />    } <br />    return </span><span class="default">$url</span><span class="keyword">; <br />} <br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="97496">  <div class="votes">
    <div id="Vu97496">
    <a href="https://www.php.net/manual/vote-note.php?id=97496&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd97496">
    <a href="https://www.php.net/manual/vote-note.php?id=97496&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V97496" title="53% like this...">
    1
    </div>
  </div>
  <a href="function.parse-url.php.html#97496" class="name">
  <strong class="user"><em>solenoid at example dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#97496"> &para;</a><div class="date" title="2010-04-22 04:05"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom97496">
<div class="phpcode"><code><span class="html">Here's a piece of code that modifies, replaces or removes the url query. This can typically used in paging situations where there are more parameters than the page.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">modify_url</span><span class="keyword">(</span><span class="default">$mod</span><span class="keyword">)<br />{<br />    </span><span class="default">$url </span><span class="keyword">= </span><span class="string">"<a href="http://" rel="nofollow" target="_blank">http://</a>"</span><span class="keyword">.</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_HOST'</span><span class="keyword">].</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REQUEST_URI'</span><span class="keyword">];<br />    </span><span class="default">$query </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"&amp;"</span><span class="keyword">, </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'QUERY_STRING'</span><span class="keyword">]);<br />    </span><span class="comment">// modify/delete data<br />    </span><span class="keyword">foreach(</span><span class="default">$query </span><span class="keyword">as </span><span class="default">$q</span><span class="keyword">)<br />    {<br />        list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">, </span><span class="default">$q</span><span class="keyword">);<br />        if(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$mod</span><span class="keyword">))<br />        {<br />            if(</span><span class="default">$mod</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])<br />            {<br />                </span><span class="default">$url </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'='</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">.</span><span class="string">'='</span><span class="keyword">.</span><span class="default">$mod</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$url</span><span class="keyword">);<br />            }<br />            else<br />            {<br />                </span><span class="default">$url </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&amp;?'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'='</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">);<br />            }<br />        }<br />    }<br />    </span><span class="comment">// add new data<br />    </span><span class="keyword">foreach(</span><span class="default">$mod </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />    {<br />        if(</span><span class="default">$value </span><span class="keyword">&amp;&amp; !</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'=/'</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">))<br />        {<br />            </span><span class="default">$url </span><span class="keyword">.= </span><span class="string">'&amp;'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'='</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">;<br />        }<br />    }<br />    return </span><span class="default">$url</span><span class="keyword">;<br />}<br /><br /></span><span class="comment">// page url: "<a href="http://www.example.com/page.php?p=5&amp;show=list&amp;style=23" rel="nofollow" target="_blank">http://www.example.com/page.php?p=5&amp;show=list&amp;style=23</a>"<br /><br /></span><span class="default">$url </span><span class="keyword">= </span><span class="default">modify_url</span><span class="keyword">(array(</span><span class="string">'p' </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">'show' </span><span class="keyword">=&gt; </span><span class="string">'column'</span><span class="keyword">));<br /><br /></span><span class="comment">// $url = "<a href="http://www.example.com/page.php?p=4&amp;show=column&amp;style=23" rel="nofollow" target="_blank">http://www.example.com/page.php?p=4&amp;show=column&amp;style=23</a>"<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="116456">  <div class="votes">
    <div id="Vu116456">
    <a href="https://www.php.net/manual/vote-note.php?id=116456&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116456">
    <a href="https://www.php.net/manual/vote-note.php?id=116456&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116456" title="52% like this...">
    2
    </div>
  </div>
  <a href="function.parse-url.php.html#116456" class="name">
  <strong class="user"><em>admin at griefer1999 dot uhostfull dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#116456"> &para;</a><div class="date" title="2015-01-06 06:46"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom116456">
<div class="phpcode"><code><span class="html"><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">url_parse</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">){<br /></span><span class="default">$sflfdfldf</span><span class="keyword">=</span><span class="default">$url</span><span class="keyword">;<br />if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="string">"?"</span><span class="keyword">)&gt;-</span><span class="default">1</span><span class="keyword">){<br /></span><span class="default">$a</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"?"</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);<br /></span><span class="default">$url</span><span class="keyword">=</span><span class="default">$a</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br /></span><span class="default">$query</span><span class="keyword">=</span><span class="default">$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />}<br />if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="string">"://"</span><span class="keyword">)&gt;-</span><span class="default">1</span><span class="keyword">){<br /></span><span class="default">$scheme</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="string">"//"</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">$url</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="string">"//"</span><span class="keyword">)+</span><span class="default">2</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">));<br />}<br />if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="string">"/"</span><span class="keyword">)&gt;-</span><span class="default">1</span><span class="keyword">){<br /></span><span class="default">$a</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"/"</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);<br /></span><span class="default">$url</span><span class="keyword">=</span><span class="default">$a</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br /></span><span class="default">$path</span><span class="keyword">=</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />}<br />if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="string">":"</span><span class="keyword">)&gt;-</span><span class="default">1</span><span class="keyword">){<br /></span><span class="default">$a</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">":"</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);<br /></span><span class="default">$url</span><span class="keyword">=</span><span class="default">$a</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br /></span><span class="default">$port</span><span class="keyword">=</span><span class="default">$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />}<br /></span><span class="default">$host</span><span class="keyword">=</span><span class="default">$url</span><span class="keyword">;<br /></span><span class="default">$url</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">;<br />foreach(array(</span><span class="string">"url"</span><span class="keyword">,</span><span class="string">"scheme"</span><span class="keyword">,</span><span class="string">"host"</span><span class="keyword">,</span><span class="string">"port"</span><span class="keyword">,</span><span class="string">"path"</span><span class="keyword">,</span><span class="string">"query"</span><span class="keyword">) as </span><span class="default">$var</span><span class="keyword">){<br />if(!empty($</span><span class="default">$var</span><span class="keyword">)){<br /></span><span class="default">$return</span><span class="keyword">[</span><span class="default">$var</span><span class="keyword">]=$</span><span class="default">$var</span><span class="keyword">;<br />}<br />}<br /></span><span class="comment">//return array("url"=&gt;$sflfdfldf,"scheme"=&gt;$scheme,"host"=&gt;$host,"port"=&gt;$port,"path"=&gt;$path,"query"=&gt;$query,"a"=&gt;$url);<br /></span><span class="keyword">return </span><span class="default">$return</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span><br /><span class="default">&lt;?php<br /></span><span class="comment">/* Compare two outputs */<br />//mine<br /></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">url_parse</span><span class="keyword">(</span><span class="string">"<a href="http://login.yahoo.com?.src=ym&amp;.intl=gb&amp;.lang=zh-Hans-HK&amp;.done=https://mail.yahoo.com" rel="nofollow" target="_blank">http://login.yahoo.com?.src=ym&amp;.intl=gb&amp;.lang=zh-Hans-HK&amp;.done=https://mail.yahoo.com</a>"</span><span class="keyword">));<br /></span><span class="comment">//internal<br /></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">parse_url</span><span class="keyword">(</span><span class="string">"<a href="http://login.yahoo.com?.src=ym&amp;.intl=gb&amp;.lang=zh-Hans-HK&amp;.done=https://mail.yahoo.com" rel="nofollow" target="_blank">http://login.yahoo.com?.src=ym&amp;.intl=gb&amp;.lang=zh-Hans-HK&amp;.done=https://mail.yahoo.com</a>"</span><span class="keyword">));<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="129202">  <div class="votes">
    <div id="Vu129202">
    <a href="https://www.php.net/manual/vote-note.php?id=129202&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd129202">
    <a href="https://www.php.net/manual/vote-note.php?id=129202&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V129202" title="100% like this...">
    1
    </div>
  </div>
  <a href="function.parse-url.php.html#129202" class="name">
  <strong class="user"><em>theking2(at)king.ma</em></strong></a><a class="genanchor" href="function.parse-url.php.html#129202"> &para;</a><div class="date" title="2024-01-28 03:39"><strong>16 days ago</strong></div>
  <div class="text" id="Hcom129202">
<div class="phpcode"><code><span class="html">Using a double slash ('//') in a url will be regarded as unparseble string and will return NULL<br /><br /><span class="default">&lt;?php<br />$result </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="string">'<a href="http://api.example.com//resource" rel="nofollow" target="_blank">http://api.example.com//resource</a>'</span><span class="keyword">);<br /><br /></span><span class="comment">// $result = null<br /><br /></span><span class="default">?&gt;<br /></span><br />Tested with PHP 8.1.27</span></code></div>
  </div>
 </div>
  <div class="note" id="86060">  <div class="votes">
    <div id="Vu86060">
    <a href="https://www.php.net/manual/vote-note.php?id=86060&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd86060">
    <a href="https://www.php.net/manual/vote-note.php?id=86060&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V86060" title="52% like this...">
    1
    </div>
  </div>
  <a href="function.parse-url.php.html#86060" class="name">
  <strong class="user"><em>xellisx</em></strong></a><a class="genanchor" href="function.parse-url.php.html#86060"> &para;</a><div class="date" title="2008-10-01 08:37"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom86060">
<div class="phpcode"><code><span class="html">I need to parse out the query string from the referrer, so I created this function.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">parse_query</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)<br /> {<br />  </span><span class="comment">/** <br />   *  Use this function to parse out the query array element from<br />   *  the output of parse_url().<br />   */<br />  </span><span class="default">$var  </span><span class="keyword">= </span><span class="default">html_entity_decode</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">);<br />  </span><span class="default">$var  </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'&amp;'</span><span class="keyword">, </span><span class="default">$var</span><span class="keyword">);<br />  </span><span class="default">$arr  </span><span class="keyword">= array();<br /><br />  foreach(</span><span class="default">$var </span><span class="keyword">as </span><span class="default">$val</span><span class="keyword">)<br />   {<br />    </span><span class="default">$x          </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'='</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">);<br />    </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]] = </span><span class="default">$x</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />   }<br />  unset(</span><span class="default">$val</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$var</span><span class="keyword">);<br />  return </span><span class="default">$arr</span><span class="keyword">;<br /> }<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="124343">  <div class="votes">
    <div id="Vu124343">
    <a href="https://www.php.net/manual/vote-note.php?id=124343&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd124343">
    <a href="https://www.php.net/manual/vote-note.php?id=124343&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V124343" title="100% like this...">
    2
    </div>
  </div>
  <a href="function.parse-url.php.html#124343" class="name">
  <strong class="user"><em>boctulus @ gmail co!m</em></strong></a><a class="genanchor" href="function.parse-url.php.html#124343"> &para;</a><div class="date" title="2019-10-27 01:39"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom124343">
<div class="phpcode"><code><span class="html">parse_url() does not parse some obvious errors so I made a complementary function<br /><br />function url_check(string $url){<br />        $sym = null;<br />    <br />        $len = strlen($url);<br />        for ($i=0; $i&lt;$len; $i++){<br />            if ($url[$i] == '?'){<br />                if ($sym == '?' || $sym == '&amp;')<br />                    return false;<br />    <br />                $sym = '?';<br />            }elseif ($url[$i] == '&amp;'){<br />                if ($sym === null)<br />                    return false;<br />    <br />                $sym = '&amp;';<br />            } <br />        }<br />        return true;<br />    }<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="125844">  <div class="votes">
    <div id="Vu125844">
    <a href="https://www.php.net/manual/vote-note.php?id=125844&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd125844">
    <a href="https://www.php.net/manual/vote-note.php?id=125844&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V125844" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.parse-url.php.html#125844" class="name">
  <strong class="user"><em>kibblewhite+php at live dot com</em></strong></a><a class="genanchor" href="function.parse-url.php.html#125844"> &para;</a><div class="date" title="2021-02-19 06:11"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom125844">
<div class="phpcode"><code><span class="html">This function 'parse_rebuild_url' will parse and reassemble your URL with new values provided by the 'overwrite_parsed_url_array' back together.<br />It is also possible to overwrite the URL components by key name and to merge or overwrite query parameters.<br /><span class="default">&lt;?php<br /><br />    $test_url </span><span class="keyword">= </span><span class="string">'<a href="http://usr:pss@example.com:81/mypath/myfile.html?a=b&amp;b[]=2&amp;b[]=3&amp;z=9#myfragment" rel="nofollow" target="_blank">http://usr:pss@example.com:81/mypath/myfile.html?a=b&amp;b[]=2&amp;b[]=3&amp;z=9#myfragment</a>'</span><span class="keyword">;<br /><br />    </span><span class="default">$new_url_01_overwrite_query_params </span><span class="keyword">= </span><span class="default">parse_rebuild_url</span><span class="keyword">( </span><span class="default">$test_url</span><span class="keyword">, array(<br />        </span><span class="string">'host' </span><span class="keyword">=&gt; </span><span class="string">'new-hostname.tld'</span><span class="keyword">,<br />        </span><span class="string">'query' </span><span class="keyword">=&gt; array(<br />            </span><span class="string">'test' </span><span class="keyword">=&gt; </span><span class="string">'Hello World'</span><span class="keyword">,<br />            </span><span class="string">'a'    </span><span class="keyword">=&gt; array( </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'d' </span><span class="keyword">),<br />            </span><span class="string">'z'    </span><span class="keyword">=&gt; </span><span class="default">8<br />        </span><span class="keyword">),<br />        </span><span class="string">'fragment' </span><span class="keyword">=&gt; </span><span class="string">'new-fragment-value'<br />    </span><span class="keyword">), </span><span class="default">false </span><span class="keyword">);<br /><br />    </span><span class="default">$new_url_02_mergewith_query_params </span><span class="keyword">= </span><span class="default">parse_rebuild_url</span><span class="keyword">( </span><span class="default">$test_url</span><span class="keyword">, array(<br />        </span><span class="string">'query' </span><span class="keyword">=&gt; array(<br />            </span><span class="string">'test' </span><span class="keyword">=&gt; </span><span class="string">'Hello World'</span><span class="keyword">,<br />            </span><span class="string">'a'    </span><span class="keyword">=&gt; array( </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'d' </span><span class="keyword">),<br />            </span><span class="string">'z'     </span><span class="keyword">=&gt; </span><span class="default">8<br />        </span><span class="keyword">),<br />        </span><span class="string">'fragment' </span><span class="keyword">=&gt; </span><span class="string">'new-fragment-value'<br />    </span><span class="keyword">), </span><span class="default">true </span><span class="keyword">);<br /><br />    function </span><span class="default">parse_rebuild_url</span><span class="keyword">( </span><span class="default">$url</span><span class="keyword">, </span><span class="default">$overwrite_parsed_url_array</span><span class="keyword">, </span><span class="default">$merge_query_parameters </span><span class="keyword">= </span><span class="default">true </span><span class="keyword">) {<br /><br />        </span><span class="default">$parsed_url_array </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">( </span><span class="default">$url </span><span class="keyword">);<br />        </span><span class="default">$parsed_url_keys_array </span><span class="keyword">= array(<br />            </span><span class="string">'scheme'        </span><span class="keyword">=&gt; </span><span class="default">null</span><span class="keyword">,<br />            </span><span class="string">'abempty'       </span><span class="keyword">=&gt; isset( </span><span class="default">$parsed_url_array</span><span class="keyword">[</span><span class="string">'scheme'</span><span class="keyword">] ) ? </span><span class="string">'://' </span><span class="keyword">: </span><span class="default">null</span><span class="keyword">,<br />            </span><span class="string">'user'          </span><span class="keyword">=&gt; </span><span class="default">null</span><span class="keyword">,<br />            </span><span class="string">'authcolon'     </span><span class="keyword">=&gt; isset( </span><span class="default">$parsed_url_array</span><span class="keyword">[</span><span class="string">'pass'</span><span class="keyword">] ) ? </span><span class="string">':' </span><span class="keyword">: </span><span class="default">null</span><span class="keyword">,<br />            </span><span class="string">'pass'          </span><span class="keyword">=&gt; </span><span class="default">null</span><span class="keyword">,<br />            </span><span class="string">'authat'        </span><span class="keyword">=&gt; isset( </span><span class="default">$parsed_url_array</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">] ) ? </span><span class="string">'@' </span><span class="keyword">: </span><span class="default">null</span><span class="keyword">,<br />            </span><span class="string">'host'          </span><span class="keyword">=&gt; </span><span class="default">null</span><span class="keyword">,<br />            </span><span class="string">'portcolon'     </span><span class="keyword">=&gt; isset( </span><span class="default">$parsed_url_array</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">] ) ? </span><span class="string">':' </span><span class="keyword">: </span><span class="default">null</span><span class="keyword">,<br />            </span><span class="string">'port'          </span><span class="keyword">=&gt; </span><span class="default">null</span><span class="keyword">,<br />            </span><span class="string">'path'          </span><span class="keyword">=&gt; </span><span class="default">null</span><span class="keyword">,<br />            </span><span class="string">'param'         </span><span class="keyword">=&gt; isset( </span><span class="default">$parsed_url_array</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">] ) ? </span><span class="string">'?' </span><span class="keyword">: </span><span class="default">null</span><span class="keyword">,<br />            </span><span class="string">'query'         </span><span class="keyword">=&gt; </span><span class="default">null</span><span class="keyword">,<br />            </span><span class="string">'hash'          </span><span class="keyword">=&gt; isset( </span><span class="default">$parsed_url_array</span><span class="keyword">[</span><span class="string">'fragment'</span><span class="keyword">] ) ? </span><span class="string">'#' </span><span class="keyword">: </span><span class="default">null</span><span class="keyword">,<br />            </span><span class="string">'fragment'      </span><span class="keyword">=&gt; </span><span class="default">null<br />        </span><span class="keyword">);<br /><br />        if ( isset( </span><span class="default">$parsed_url_array</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">] ) &amp;&amp; </span><span class="default">$merge_query_parameters </span><span class="keyword">=== </span><span class="default">true </span><span class="keyword">) {<br />            </span><span class="default">parse_str</span><span class="keyword">( </span><span class="default">$parsed_url_array</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">], </span><span class="default">$query_array </span><span class="keyword">);<br />            </span><span class="default">$overwrite_parsed_url_array</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">] = </span><span class="default">array_merge_recursive</span><span class="keyword">( </span><span class="default">$query_array</span><span class="keyword">, </span><span class="default">$overwrite_parsed_url_array</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">] );<br />        }<br /><br />        </span><span class="default">$query_parameters </span><span class="keyword">= </span><span class="default">http_build_query</span><span class="keyword">( </span><span class="default">$overwrite_parsed_url_array</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">], </span><span class="default">null</span><span class="keyword">, </span><span class="string">'&amp;'</span><span class="keyword">, </span><span class="default">PHP_QUERY_RFC1738 </span><span class="keyword">);<br />        </span><span class="default">$overwrite_parsed_url_array</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">] = </span><span class="default">urldecode</span><span class="keyword">( </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'/%5B[0-9]+%5D/simU'</span><span class="keyword">, </span><span class="string">'%5B%5D'</span><span class="keyword">, </span><span class="default">$query_parameters </span><span class="keyword">) );<br /><br />        </span><span class="default">$fully_parsed_url_array </span><span class="keyword">= </span><span class="default">array_filter</span><span class="keyword">( </span><span class="default">array_merge</span><span class="keyword">( </span><span class="default">$parsed_url_keys_array</span><span class="keyword">, </span><span class="default">$parsed_url_array</span><span class="keyword">, </span><span class="default">$overwrite_parsed_url_array </span><span class="keyword">) );<br />        return </span><span class="default">implode</span><span class="keyword">( </span><span class="default">null</span><span class="keyword">, </span><span class="default">$fully_parsed_url_array </span><span class="keyword">);<br /><br />    }</span></span></code></div>
  </div>
 </div>
  <div class="note" id="128453">  <div class="votes">
    <div id="Vu128453">
    <a href="https://www.php.net/manual/vote-note.php?id=128453&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd128453">
    <a href="https://www.php.net/manual/vote-note.php?id=128453&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V128453" title="0% like this...">
    -2
    </div>
  </div>
  <a href="function.parse-url.php.html#128453" class="name">
  <strong class="user"><em>JosephDor</em></strong></a><a class="genanchor" href="function.parse-url.php.html#128453"> &para;</a><div class="date" title="2023-05-06 07:26"><strong>9 months ago</strong></div>
  <div class="text" id="Hcom128453">
<div class="phpcode"><code><span class="html">Hello!  &lt;a href=<a href="https://stromectolxf.online/&gt;ivermectin" rel="nofollow" target="_blank">https://stromectolxf.online/&gt;ivermectin</a> 24 mg&lt;/a&gt; excellent website <a href="https://stromectolrf.top" rel="nofollow" target="_blank">https://stromectolrf.top</a></span></code></div>
  </div>
 </div>
  <div class="note" id="122446">  <div class="votes">
    <div id="Vu122446">
    <a href="https://www.php.net/manual/vote-note.php?id=122446&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122446">
    <a href="https://www.php.net/manual/vote-note.php?id=122446&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122446" title="39% like this...">
    -5
    </div>
  </div>
  <a href="function.parse-url.php.html#122446" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.parse-url.php.html#122446"> &para;</a><div class="date" title="2018-02-26 12:33"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom122446">
<div class="phpcode"><code><span class="html">Hello, for some odd reason, parse_url returns the host (ex. example.com) as the path when no scheme is provided in the input url. So I've written a quick function to get the real host:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">getHost</span><span class="keyword">(</span><span class="default">$Address</span><span class="keyword">) {<br />   </span><span class="default">$parseUrl </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$Address</span><span class="keyword">));<br />   return </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$parseUrl</span><span class="keyword">[</span><span class="default">host</span><span class="keyword">] ? </span><span class="default">$parseUrl</span><span class="keyword">[</span><span class="default">host</span><span class="keyword">] : </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$parseUrl</span><span class="keyword">[</span><span class="default">path</span><span class="keyword">], </span><span class="default">2</span><span class="keyword">)));<br />}<br /><br /></span><span class="default">getHost</span><span class="keyword">(</span><span class="string">"example.com"</span><span class="keyword">); </span><span class="comment">// Gives example.com<br /></span><span class="default">getHost</span><span class="keyword">(</span><span class="string">"<a href="http://example.com" rel="nofollow" target="_blank">http://example.com</a>"</span><span class="keyword">); </span><span class="comment">// Gives example.com<br /></span><span class="default">getHost</span><span class="keyword">(</span><span class="string">"www.example.com"</span><span class="keyword">); </span><span class="comment">// Gives www.example.com<br /></span><span class="default">getHost</span><span class="keyword">(</span><span class="string">"<a href="http://example.com/xyz" rel="nofollow" target="_blank">http://example.com/xyz</a>"</span><span class="keyword">); </span><span class="comment">// Gives example.com<br /></span><span class="default">?&gt;<br /></span><br />You could try anything! It gives the host (including the subdomain if exists).<br /><br />Hope it helped you.<br /><a href="https://vb.3dlat.com/" rel="nofollow" target="_blank">https://vb.3dlat.com/</a></span></code></div>
  </div>
 </div>
  <div class="note" id="121719">  <div class="votes">
    <div id="Vu121719">
    <a href="https://www.php.net/manual/vote-note.php?id=121719&amp;page=function.parse-url&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd121719">
    <a href="https://www.php.net/manual/vote-note.php?id=121719&amp;page=function.parse-url&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V121719" title="33% like this...">
    -2
    </div>
  </div>
  <a href="function.parse-url.php.html#121719" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.parse-url.php.html#121719"> &para;</a><div class="date" title="2017-10-03 07:29"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom121719">
<div class="phpcode"><code><span class="html">To get the params (url query) as Associative array, use this function: <br /><br /><span class="default">&lt;?php <br /></span><span class="comment">/** <br />* Returns the url query as associative array <br />* <br />* @param    string    query <br />* @return    array    params <br />*/ <br /></span><span class="keyword">function </span><span class="default">convertUrlQuery</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">) { <br />    </span><span class="default">$queryParts </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'&amp;'</span><span class="keyword">, </span><span class="default">$query</span><span class="keyword">); <br />    <br />    </span><span class="default">$params </span><span class="keyword">= array(); <br />    foreach (</span><span class="default">$queryParts </span><span class="keyword">as </span><span class="default">$param</span><span class="keyword">) { <br />        </span><span class="default">$item </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'='</span><span class="keyword">, </span><span class="default">$param</span><span class="keyword">); <br />        </span><span class="default">$params</span><span class="keyword">[</span><span class="default">$item</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]] = </span><span class="default">$item</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]; <br />    } <br />    <br />    return </span><span class="default">$params</span><span class="keyword">; <br />} <br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.parse-url&amp;redirect=https://www.php.net/manual/ru/function.parse-url.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.url.php.html">Функции URL</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.base64-decode.php.html" title="base64_&#8203;decode">base64_&#8203;decode</a>
                        </li>
                                                <li class="">
                            <a href="function.base64-encode.php.html" title="base64_&#8203;encode">base64_&#8203;encode</a>
                        </li>
                                                <li class="">
                            <a href="function.get-headers.php.html" title="get_&#8203;headers">get_&#8203;headers</a>
                        </li>
                                                <li class="">
                            <a href="function.get-meta-tags.php.html" title="get_&#8203;meta_&#8203;tags">get_&#8203;meta_&#8203;tags</a>
                        </li>
                                                <li class="">
                            <a href="function.http-build-query.php.html" title="http_&#8203;build_&#8203;query">http_&#8203;build_&#8203;query</a>
                        </li>
                                                <li class="current">
                            <a href="function.parse-url.php.html" title="parse_&#8203;url">parse_&#8203;url</a>
                        </li>
                                                <li class="">
                            <a href="function.rawurldecode.php.html" title="rawurldecode">rawurldecode</a>
                        </li>
                                                <li class="">
                            <a href="function.rawurlencode.php.html" title="rawurlencode">rawurlencode</a>
                        </li>
                                                <li class="">
                            <a href="function.urldecode.php.html" title="urldecode">urldecode</a>
                        </li>
                                                <li class="">
                            <a href="function.urlencode.php.html" title="urlencode">urlencode</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
