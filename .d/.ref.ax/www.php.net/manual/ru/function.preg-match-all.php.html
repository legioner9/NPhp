<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: preg_match_all - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.preg-match-all.php.html">
 <link rel="shorturl" href="https://www.php.net/preg-match-all">
 <link rel="alternate" href="https://www.php.net/preg-match-all" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.pcre.php.html">
 <link rel="prev" href="function.preg-last-error.php.html">
 <link rel="next" href="function.preg-match.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.preg-match-all.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.preg-match-all.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.preg-match-all.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.preg-match-all.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.preg-match-all.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.preg-match-all.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.preg-match-all.php" hreflang="pt_BR">
 <link rel="alternate" href="function.preg-match-all.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.preg-match-all.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.preg-match-all.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.preg-match.php.html">
          preg_match &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.preg-last-error.php.html">
          &laquo; preg_last_error        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.basic.text.php.html'>Обработка текста</a></li>      <li><a href='book.pcre.php.html'>PCRE</a></li>      <li><a href='ref.pcre.php.html'>Функции PCRE</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.preg-match-all.php'>English</option>
            <option value='de/function.preg-match-all.php'>German</option>
            <option value='es/function.preg-match-all.php'>Spanish</option>
            <option value='fr/function.preg-match-all.php'>French</option>
            <option value='it/function.preg-match-all.php'>Italian</option>
            <option value='ja/function.preg-match-all.php'>Japanese</option>
            <option value='pt_BR/function.preg-match-all.php'>Brazilian Portuguese</option>
            <option value='ru/function.preg-match-all.php' selected="selected">Russian</option>
            <option value='tr/function.preg-match-all.php'>Turkish</option>
            <option value='zh/function.preg-match-all.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/pcre/functions/preg-match-all.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.preg-match-all%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.preg-match-all" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">preg_match_all</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">preg_match_all</span> &mdash; <span class="dc-title">Выполняет глобальный поиск шаблона в строке</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.preg-match-all-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>preg_match_all</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$pattern</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$subject</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">array</span> <code class="parameter reference">&$matches</code><span class="initializer"> = <strong><code>null</code></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code><span class="initializer"> = 0</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">int</span> <code class="parameter">$offset</code><span class="initializer"> = 0</span></span><br>): <span class="type"><span class="type">int</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   Ищет в строке <code class="parameter">subject</code> все совпадения с шаблоном
   <code class="parameter">pattern</code> и помещает результат в массив
   <code class="parameter">matches</code> в порядке, определяемом
   комбинацией флагов <code class="parameter">flags</code>.
  </p>
  <p class="para">
   После обнаружения первого соответствия поиски будут
   выполняться с конца последнего найденного вхождения.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.preg-match-all-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">pattern</code></dt>

     <dd>

      <p class="para">
       Искомый шаблон в виде строки.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">subject</code></dt>

     <dd>

      <p class="para">
       Входная строка.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">matches</code></dt>

     <dd>

      <p class="para">
       Массив совпавших значений, отсортированный в соответствии
       с параметром <code class="parameter">flags</code>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">flags</code></dt>

     <dd>

      <p class="para">
       Может быть комбинацией следующих флагов (обратите внимание,
       указывать флаг <strong><code>PREG_PATTERN_ORDER</code></strong>
       одновременно с флагом <strong><code>PREG_SET_ORDER</code></strong> бессмысленно):
       <dl>
        
         <dt>
<strong><code>PREG_PATTERN_ORDER</code></strong></dt>

         <dd>

          <p class="para">
           Упорядочивает результаты так, что элемент <var class="varname">$matches[0]</var>
           содержит массив полных вхождений шаблона, элемент <var class="varname">$matches[1]</var>
           содержит массив вхождений первой подмаски и т. д.
          </p>
          <p class="para">
           <div class="informalexample">
            <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />preg_match_all</span><span style="color: #007700">(</span><span style="color: #DD0000">"|&lt;[^&gt;]+&gt;(.*)&lt;/[^&gt;]+&gt;|U"</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">"&lt;b&gt;пример: &lt;/b&gt;&lt;div align=left&gt;это тест&lt;/div&gt;"</span><span style="color: #007700">,<br />    </span><span style="color: #0000BB">$out</span><span style="color: #007700">, </span><span style="color: #0000BB">PREG_PATTERN_ORDER</span><span style="color: #007700">);<br />echo </span><span style="color: #0000BB">$out</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">] . </span><span style="color: #DD0000">", " </span><span style="color: #007700">. </span><span style="color: #0000BB">$out</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo </span><span style="color: #0000BB">$out</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">] . </span><span style="color: #DD0000">", " </span><span style="color: #007700">. </span><span style="color: #0000BB">$out</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
            </div>

            
<p class="para">
 Результат выполнения приведённого примера:
</p>

            <div class="example-contents screen">
<div class="cdata"><pre>
&lt;b&gt;пример: &lt;/b&gt;, &lt;div align=left&gt;это тест&lt;/div&gt;
пример: , это тест
</pre></div>
            </div>
            <p class="para">
             Так, элемент <var class="varname">$out[0]</var> содержит массив строк,
             которые соответствуют полному шаблону,
             а элемент <var class="varname">$out[1]</var> содержит массив строк,
             которые заключены в теги.
            </p>
           </div>
          </p>
          <p class="para">
           Если шаблон содержит именованные подшаблоны, <var class="varname">$matches</var>
           дополнительно будет содержать записи для ключей с именами этих подшаблонов.
          </p>
          <p class="para">
           Если шаблон содержит задублированные именованные подшаблоны,
           то только самый правый подшаблон будет сохранён в элементе <var class="varname">$matches[NAME]</var>.
           <div class="informalexample">
            <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />preg_match_all</span><span style="color: #007700">(<br />    </span><span style="color: #DD0000">'/(?J)(?&lt;match&gt;foo)|(?&lt;match&gt;bar)/'</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">'foo bar'</span><span style="color: #007700">,<br />    </span><span style="color: #0000BB">$matches</span><span style="color: #007700">,<br />    </span><span style="color: #0000BB">PREG_PATTERN_ORDER<br /></span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #DD0000">'match'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
            </div>

            
<p class="para">
 Результат выполнения приведённого примера:
</p>

            <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt;
    [1] =&gt; bar
)
</pre></div>
            </div>
           </div>
          </p>
         </dd>

        
        
         <dt>
<strong><code>PREG_SET_ORDER</code></strong></dt>

         <dd>

          <p class="para">
           Упорядочивает результаты так, что элемент <var class="varname">$matches[0]</var>
           становится массивом с первым набором вхождений,
           а элемент <var class="varname">$matches[1]</var> — со вторым набором вхождений
           и т. д.
           <div class="informalexample">
            <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />preg_match_all</span><span style="color: #007700">(</span><span style="color: #DD0000">"|&lt;[^&gt;]+&gt;(.*)&lt;/[^&gt;]+&gt;|U"</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">"&lt;b&gt;пример: &lt;/b&gt;&lt;div align=\"left\"&gt;это тест&lt;/div&gt;"</span><span style="color: #007700">,<br />    </span><span style="color: #0000BB">$out</span><span style="color: #007700">, </span><span style="color: #0000BB">PREG_SET_ORDER</span><span style="color: #007700">);<br />echo </span><span style="color: #0000BB">$out</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">] . </span><span style="color: #DD0000">", " </span><span style="color: #007700">. </span><span style="color: #0000BB">$out</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo </span><span style="color: #0000BB">$out</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">] . </span><span style="color: #DD0000">", " </span><span style="color: #007700">. </span><span style="color: #0000BB">$out</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
            </div>

            
<p class="para">
 Результат выполнения приведённого примера:
</p>

            <div class="example-contents screen">
<div class="cdata"><pre>
&lt;b&gt;пример: &lt;/b&gt;, пример:
&lt;div align=&quot;left&quot;&gt;это тест&lt;/div&gt;, это тест
</pre></div>
            </div>
           </div>
          </p>
         </dd>

        
        
         <dt>
<strong><code>PREG_OFFSET_CAPTURE</code></strong></dt>

         <dd>

          <p class="para">
           Если передан этот флаг, для каждой найденной подстроки также будет возвращена
           её позиция в исходной строке (в байтах). Обратите внимание, что этот флаг
           изменяет массив <code class="parameter">matches</code> на многомерный, каждый элемент
           которого содержит массив, содержащий в индексе с номером <code class="literal">0</code>
           найденную подстроку, а смещение этой подстроки в параметре <code class="parameter">subject</code> —
           в индексе <code class="literal">1</code>.
           <div class="informalexample">
            <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />preg_match_all</span><span style="color: #007700">(</span><span style="color: #DD0000">'/(foo)(bar)(baz)/'</span><span style="color: #007700">, </span><span style="color: #DD0000">'foobarbaz'</span><span style="color: #007700">, </span><span style="color: #0000BB">$matches</span><span style="color: #007700">, </span><span style="color: #0000BB">PREG_OFFSET_CAPTURE</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
            </div>

            
<p class="para">
 Результат выполнения приведённого примера:
</p>

            <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; Array
        (
            [0] =&gt; Array
                (
                    [0] =&gt; foobarbaz
                    [1] =&gt; 0
                )

        )

    [1] =&gt; Array
        (
            [0] =&gt; Array
                (
                    [0] =&gt; foo
                    [1] =&gt; 0
                )

        )

    [2] =&gt; Array
        (
            [0] =&gt; Array
                (
                    [0] =&gt; bar
                    [1] =&gt; 3
                )

        )

    [3] =&gt; Array
        (
            [0] =&gt; Array
                (
                    [0] =&gt; baz
                    [1] =&gt; 6
                )

        )

)
</pre></div>
            </div>
           </div>
          </p>
         </dd>

        
        
         <dt>
<strong><code>PREG_UNMATCHED_AS_NULL</code></strong></dt>

         <dd>

          <p class="para">
           Если этот флаг передан, несовпадающие подмаски будут представлены
           значениями <strong><code>null</code></strong>; иначе они отображаются в виде пустых строк
           (<span class="type">string</span>).
          </p>
         </dd>

        
       </dl>

      </p>
      <p class="para">
       Если флаг сортировки не передан,
       будет использован флаг по умолчанию — <strong><code>PREG_PATTERN_ORDER</code></strong>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">offset</code></dt>

     <dd>

      <p class="para">
       Обычно поиск выполняется слева направо, с начала строки. Через
       необязательный параметр <code class="parameter">offset</code> можно указать
       другую позицию (в байтах), с которой будет начат поиск.
      </p>
      <blockquote class="note"><p><strong class="note">Замечание</strong>: 
       <p class="para">
        Использование параметра <code class="parameter">offset</code> не эквивалентно
        замене сопоставляемой строки выражением <code class="code">substr($subject, $offset)</code>
        при вызове функции <span class="function"><strong>preg_match_all()</strong></span>, поскольку
        шаблон <code class="parameter">pattern</code> может содержать такие условия как
        <em>^</em>, <em>$</em> или <em>(?&lt;=x)</em>.
        Примеры можно посмотреть в описании функции
        <span class="function"><a href="function.preg-match.php.html" class="function">preg_match()</a></span>.
       </p>
      </p></blockquote>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.preg-match-all-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает количество найденных вхождений шаблона (которое может
   быть и нулём) или <strong><code>false</code></strong> в случае возникновения ошибки.
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.preg-match-all-errors">
  <h3 class="title">Ошибки</h3>
  <p class="para">
Если переданный шаблон регулярного выражения не компилируется в допустимое регулярное выражение, выдаётся ошибка уровня <strong><code>E_WARNING</code></strong>.
</p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.preg-match-all-changelog">
  <h3 class="title">Список изменений</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Версия</th>
       <th>Описание</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>7.2.0</td>
       <td>
        Теперь для параметра <code class="parameter">$flags</code> поддерживается
        константа <strong><code>PREG_UNMATCHED_AS_NULL</code></strong>.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.preg-match-all-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Пример #1 Получение всех телефонных номеров из текста.</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />preg_match_all</span><span style="color: #007700">(</span><span style="color: #DD0000">"/\(?  (\d{3})?  \)?  (?(1)  [\-\s] ) \d{3}-\d{4}/x"</span><span style="color: #007700">,<br />                </span><span style="color: #DD0000">"Звоните 555-1212 или 1-800-555-1212"</span><span style="color: #007700">, </span><span style="color: #0000BB">$phones</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="">
    <p><strong>Пример #2 Жадный поиск совпадений с HTML-тэгами</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// Запись \\2 — это пример использования ссылок на подмаски.<br />// Она означает необходимость соответствия подстроки строке, захваченной<br />// второй подмаской, в нашем примере это ([\w]+).<br />// Дополнительный обратный слеш необходим, потому что строка заключена в двойные кавычки.<br /></span><span style="color: #0000BB">$html </span><span style="color: #007700">= </span><span style="color: #DD0000">"&lt;b&gt;полужирный текст&lt;/b&gt;&lt;a href=howdy.html&gt;нажми&lt;/a&gt;"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">preg_match_all</span><span style="color: #007700">(</span><span style="color: #DD0000">"/(&lt;([\w]+)[^&gt;]*&gt;)(.*?)(&lt;\/\\2&gt;)/"</span><span style="color: #007700">, </span><span style="color: #0000BB">$html</span><span style="color: #007700">, </span><span style="color: #0000BB">$matches</span><span style="color: #007700">, </span><span style="color: #0000BB">PREG_SET_ORDER</span><span style="color: #007700">);<br /><br />foreach (</span><span style="color: #0000BB">$matches </span><span style="color: #007700">as </span><span style="color: #0000BB">$val</span><span style="color: #007700">) {<br />    echo </span><span style="color: #DD0000">"совпадение: " </span><span style="color: #007700">. </span><span style="color: #0000BB">$val</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />    echo </span><span style="color: #DD0000">"часть 1: " </span><span style="color: #007700">. </span><span style="color: #0000BB">$val</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />    echo </span><span style="color: #DD0000">"часть 2: " </span><span style="color: #007700">. </span><span style="color: #0000BB">$val</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />    echo </span><span style="color: #DD0000">"часть 3: " </span><span style="color: #007700">. </span><span style="color: #0000BB">$val</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />    echo </span><span style="color: #DD0000">"часть 4: " </span><span style="color: #007700">. </span><span style="color: #0000BB">$val</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
совпадение: &lt;b&gt;полужирный текст&lt;/b&gt;
часть 1: &lt;b&gt;
часть 2: b
часть 3: полужирный текст
часть 4: &lt;/b&gt;

matched: &lt;a href=hody.html&gt;нажми&lt;/a&gt;
часть 1: &lt;a href=howdy.html&gt;
часть 2: a
часть 3: нажми
часть 4: &lt;/a&gt;
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="">
    <p><strong>Пример #3 Использование именованных подмасок</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br />$str </span><span style="color: #007700">= &lt;&lt;&lt;FOO<br /></span><span style="color: #DD0000">a: 1<br />b: 2<br />c: 3<br /></span><span style="color: #007700">FOO;<br /><br /></span><span style="color: #0000BB">preg_match_all</span><span style="color: #007700">(</span><span style="color: #DD0000">'/(?P&lt;name&gt;\w+): (?P&lt;digit&gt;\d+)/'</span><span style="color: #007700">, </span><span style="color: #0000BB">$str</span><span style="color: #007700">, </span><span style="color: #0000BB">$matches</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/* Альтернативный вариант */<br />// preg_match_all('/(?&lt;name&gt;\w+): (?&lt;digit&gt;\d+)/', $str, $matches);<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; Array
        (
            [0] =&gt; a: 1
            [1] =&gt; b: 2
            [2] =&gt; c: 3
        )

    [name] =&gt; Array
        (
            [0] =&gt; a
            [1] =&gt; b
            [2] =&gt; c
        )

    [1] =&gt; Array
        (
            [0] =&gt; a
            [1] =&gt; b
            [2] =&gt; c
        )

    [digit] =&gt; Array
        (
            [0] =&gt; 1
            [1] =&gt; 2
            [2] =&gt; 3
        )

    [2] =&gt; Array
        (
            [0] =&gt; 1
            [1] =&gt; 2
            [2] =&gt; 3
        )

)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.preg-match-all-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><a href="pcre.pattern.php.html" class="link">Регулярные выражения PCRE</a></li>
    <li class="member"><span class="function"><a href="function.preg-quote.php.html" class="function" rel="rdfs-seeAlso">preg_quote()</a> - Экранирует символы в регулярных выражениях</span></li>
    <li class="member"><span class="function"><a href="function.preg-match.php.html" class="function" rel="rdfs-seeAlso">preg_match()</a> - Выполняет проверку на соответствие регулярному выражению</span></li>
    <li class="member"><span class="function"><a href="function.preg-replace.php.html" class="function" rel="rdfs-seeAlso">preg_replace()</a> - Выполняет поиск и замену по регулярному выражению</span></li>
    <li class="member"><span class="function"><a href="function.preg-split.php.html" class="function" rel="rdfs-seeAlso">preg_split()</a> - Разбивает строку по регулярному выражению</span></li>
    <li class="member"><span class="function"><a href="function.preg-last-error.php.html" class="function" rel="rdfs-seeAlso">preg_last_error()</a> - Возвращает код ошибки выполнения последнего регулярного выражения PCRE</span></li>
   </ul>
  </p>
 </div>


</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.preg-match-all&amp;redirect=https://www.php.net/manual/ru/function.preg-match-all.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">38 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="101259">  <div class="votes">
    <div id="Vu101259">
    <a href="https://www.php.net/manual/vote-note.php?id=101259&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd101259">
    <a href="https://www.php.net/manual/vote-note.php?id=101259&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V101259" title="62% like this...">
    13
    </div>
  </div>
  <a href="function.preg-match-all.php.html#101259" class="name">
  <strong class="user"><em>buuh</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#101259"> &para;</a><div class="date" title="2010-12-06 02:03"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom101259">
<div class="phpcode"><code><span class="html">if you want to extract all {token}s from a string:<br /><br /><span class="default">&lt;?php<br />$pattern </span><span class="keyword">= </span><span class="string">"/{[^}]*}/"</span><span class="keyword">;<br /></span><span class="default">$subject </span><span class="keyword">= </span><span class="string">"{token1} foo {token2} bar"</span><span class="keyword">;<br /></span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br /></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />output:<br /><br />Array<br />(<br />    [0] =&gt; Array<br />        (<br />            [0] =&gt; {token1}<br />            [1] =&gt; {token2}<br />        )<br /><br />)</span></code></div>
  </div>
 </div>
  <div class="note" id="61426">  <div class="votes">
    <div id="Vu61426">
    <a href="https://www.php.net/manual/vote-note.php?id=61426&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd61426">
    <a href="https://www.php.net/manual/vote-note.php?id=61426&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V61426" title="70% like this...">
    10
    </div>
  </div>
  <a href="function.preg-match-all.php.html#61426" class="name">
  <strong class="user"><em>mnc at u dot nu</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#61426"> &para;</a><div class="date" title="2006-02-02 10:05"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom61426">
<div class="phpcode"><code><span class="html">PREG_OFFSET_CAPTURE always seems to provide byte offsets, rather than character position offsets, even when you are using the unicode /u modifier.</span></code></div>
  </div>
 </div>
  <div class="note" id="117285">  <div class="votes">
    <div id="Vu117285">
    <a href="https://www.php.net/manual/vote-note.php?id=117285&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117285">
    <a href="https://www.php.net/manual/vote-note.php?id=117285&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117285" title="62% like this...">
    11
    </div>
  </div>
  <a href="function.preg-match-all.php.html#117285" class="name">
  <strong class="user"><em>Daniel Klein</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#117285"> &para;</a><div class="date" title="2015-05-17 05:26"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom117285">
<div class="phpcode"><code><span class="html">The code that john at mccarthy dot net posted is not necessary. If you want your results grouped by individual match simply use:<br /><br />&lt;?<br />preg_match_all($pattern, $string, $matches, PREG_SET_ORDER);<br />?&gt;<br /><br />E.g.<br /><br />&lt;?<br />preg_match_all('/([GH])([12])([!?])/', 'G1? H2!', $matches); // Default PREG_PATTERN_ORDER<br />// $matches = array(0 =&gt; array(0 =&gt; 'G1?', 1 =&gt; 'H2!'),<br />//                  1 =&gt; array(0 =&gt; 'G', 1 =&gt; 'H'),<br />//                  2 =&gt; array(0 =&gt; '1', 1 =&gt; '2'),<br />//                  3 =&gt; array(0 =&gt; '?', 1 =&gt; '!'))<br /><br />preg_match_all('/([GH])([12])([!?])/', 'G1? H2!', $matches, PREG_SET_ORDER);<br />// $matches = array(0 =&gt; array(0 =&gt; 'G1?', 1 =&gt; 'G', 2 =&gt; '1', 3 =&gt; '?'),<br />//                  1 =&gt; array(0 =&gt; 'H2!', 1 =&gt; 'H', 2 =&gt; '2', 3 =&gt; '!'))<br />?&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="126368">  <div class="votes">
    <div id="Vu126368">
    <a href="https://www.php.net/manual/vote-note.php?id=126368&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd126368">
    <a href="https://www.php.net/manual/vote-note.php?id=126368&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V126368" title="80% like this...">
    3
    </div>
  </div>
  <a href="function.preg-match-all.php.html#126368" class="name">
  <strong class="user"><em>harrybarrow at mail dot ru</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#126368"> &para;</a><div class="date" title="2021-08-27 11:50"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom126368">
<div class="phpcode"><code><span class="html">preg_match_all() and other preg_*() functions doesn't work well with very long strings, at least longer that 1Mb.<br />In this case case function returns FALSE and $matchers value is unpredictable, may contain some values, may be empty.<br />In this case workaround is pre-split long string onto parts, for instance explode() long string by some criteria and then apply preg_match_all() on each part.<br />Typical scenario for this case is log analysis by regular expressions.<br />Tested on PHP 7.2.0</span></code></div>
  </div>
 </div>
  <div class="note" id="118289">  <div class="votes">
    <div id="Vu118289">
    <a href="https://www.php.net/manual/vote-note.php?id=118289&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd118289">
    <a href="https://www.php.net/manual/vote-note.php?id=118289&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V118289" title="70% like this...">
    7
    </div>
  </div>
  <a href="function.preg-match-all.php.html#118289" class="name">
  <strong class="user"><em>stas kuryan aka stafox</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#118289"> &para;</a><div class="date" title="2015-11-09 08:57"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom118289">
<div class="phpcode"><code><span class="html">Here is a awesome online regex editor <a href="https://regex101.com/" rel="nofollow" target="_blank">https://regex101.com/</a><br />which helps you test your regular expressions (prce, js, python) with real-time highlighting of regex match on data input.</span></code></div>
  </div>
 </div>
  <div class="note" id="62104">  <div class="votes">
    <div id="Vu62104">
    <a href="https://www.php.net/manual/vote-note.php?id=62104&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd62104">
    <a href="https://www.php.net/manual/vote-note.php?id=62104&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V62104" title="65% like this...">
    9
    </div>
  </div>
  <a href="function.preg-match-all.php.html#62104" class="name">
  <strong class="user"><em>phpnet at sinful-music dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#62104"> &para;</a><div class="date" title="2006-02-20 12:53"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom62104">
<div class="phpcode"><code><span class="html">Here's some fleecy code to 1. validate RCF2822 conformity of address lists and 2. to extract the address specification (the part commonly known as 'email'). I wouldn't suggest using it for input form email checking, but it might be just what you want for other email applications. I know it can be optimized further, but that part I'll leave up to you nutcrackers. The total length of the resulting Regex is about 30000 bytes. That because it accepts comments. You can remove that by setting $cfws to $fws and it shrinks to about 6000 bytes. Conformity checking is absolutely and strictly referring to RFC2822. Have fun and email me if you have any enhancements!<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">mime_extract_rfc2822_address</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)<br />{<br />        </span><span class="comment">//rfc2822 token setup<br />        </span><span class="default">$crlf           </span><span class="keyword">= </span><span class="string">"(?:\r\n)"</span><span class="keyword">;<br />        </span><span class="default">$wsp            </span><span class="keyword">= </span><span class="string">"[\t ]"</span><span class="keyword">;<br />        </span><span class="default">$text           </span><span class="keyword">= </span><span class="string">"[\\x01-\\x09\\x0B\\x0C\\x0E-\\x7F]"</span><span class="keyword">;<br />        </span><span class="default">$quoted_pair    </span><span class="keyword">= </span><span class="string">"(?:\\\\</span><span class="default">$text</span><span class="string">)"</span><span class="keyword">;<br />        </span><span class="default">$fws            </span><span class="keyword">= </span><span class="string">"(?:(?:</span><span class="default">$wsp</span><span class="string">*</span><span class="default">$crlf</span><span class="string">)?</span><span class="default">$wsp</span><span class="string">+)"</span><span class="keyword">;<br />        </span><span class="default">$ctext          </span><span class="keyword">= </span><span class="string">"[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F" </span><span class="keyword">.<br />                          </span><span class="string">"!-'*-[\\]-\\x7F]"</span><span class="keyword">;<br />        </span><span class="default">$comment        </span><span class="keyword">= </span><span class="string">"(\\((?:</span><span class="default">$fws</span><span class="string">?(?:</span><span class="default">$ctext</span><span class="string">|</span><span class="default">$quoted_pair</span><span class="string">|(?1)))*" </span><span class="keyword">.<br />                          </span><span class="string">"</span><span class="default">$fws</span><span class="string">?\\))"</span><span class="keyword">;<br />        </span><span class="default">$cfws           </span><span class="keyword">= </span><span class="string">"(?:(?:</span><span class="default">$fws</span><span class="string">?</span><span class="default">$comment</span><span class="string">)*(?:(?:</span><span class="default">$fws</span><span class="string">?</span><span class="default">$comment</span><span class="string">)|</span><span class="default">$fws</span><span class="string">))"</span><span class="keyword">;<br />        </span><span class="comment">//$cfws           = $fws; //an alternative to comments<br />        </span><span class="default">$atext          </span><span class="keyword">= </span><span class="string">"[!#-'*+\\-\\/0-9=?A-Z\\^-~]"</span><span class="keyword">;<br />        </span><span class="default">$atom           </span><span class="keyword">= </span><span class="string">"(?:</span><span class="default">$cfws</span><span class="string">?</span><span class="default">$atext</span><span class="string">+</span><span class="default">$cfws</span><span class="string">?)"</span><span class="keyword">;<br />        </span><span class="default">$dot_atom_text  </span><span class="keyword">= </span><span class="string">"(?:</span><span class="default">$atext</span><span class="string">+(?:\\.</span><span class="default">$atext</span><span class="string">+)*)"</span><span class="keyword">;<br />        </span><span class="default">$dot_atom       </span><span class="keyword">= </span><span class="string">"(?:</span><span class="default">$cfws</span><span class="string">?</span><span class="default">$dot_atom_text$cfws</span><span class="string">?)"</span><span class="keyword">;<br />        </span><span class="default">$qtext          </span><span class="keyword">= </span><span class="string">"[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F!#-[\\]-\\x7F]"</span><span class="keyword">;<br />        </span><span class="default">$qcontent       </span><span class="keyword">= </span><span class="string">"(?:</span><span class="default">$qtext</span><span class="string">|</span><span class="default">$quoted_pair</span><span class="string">)"</span><span class="keyword">;<br />        </span><span class="default">$quoted_string  </span><span class="keyword">= </span><span class="string">"(?:</span><span class="default">$cfws</span><span class="string">?\"(?:</span><span class="default">$fws</span><span class="string">?</span><span class="default">$qcontent</span><span class="string">)*</span><span class="default">$fws</span><span class="string">?\"</span><span class="default">$cfws</span><span class="string">?)"</span><span class="keyword">;<br />        </span><span class="default">$dtext          </span><span class="keyword">= </span><span class="string">"[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F!-Z\\^-\\x7F]"</span><span class="keyword">;<br />        </span><span class="default">$dcontent       </span><span class="keyword">= </span><span class="string">"(?:</span><span class="default">$dtext</span><span class="string">|</span><span class="default">$quoted_pair</span><span class="string">)"</span><span class="keyword">;<br />        </span><span class="default">$domain_literal </span><span class="keyword">= </span><span class="string">"(?:</span><span class="default">$cfws</span><span class="string">?\\[(?:</span><span class="default">$fws</span><span class="string">?</span><span class="default">$dcontent</span><span class="string">)*</span><span class="default">$fws</span><span class="string">?]</span><span class="default">$cfws</span><span class="string">?)"</span><span class="keyword">;<br />        </span><span class="default">$domain         </span><span class="keyword">= </span><span class="string">"(?:</span><span class="default">$dot_atom</span><span class="string">|</span><span class="default">$domain_literal</span><span class="string">)"</span><span class="keyword">;<br />        </span><span class="default">$local_part     </span><span class="keyword">= </span><span class="string">"(?:</span><span class="default">$dot_atom</span><span class="string">|</span><span class="default">$quoted_string</span><span class="string">)"</span><span class="keyword">;<br />        </span><span class="default">$addr_spec      </span><span class="keyword">= </span><span class="string">"(</span><span class="default">$local_part</span><span class="string">@</span><span class="default">$domain</span><span class="string">)"</span><span class="keyword">;<br />        </span><span class="default">$display_name   </span><span class="keyword">= </span><span class="string">"(?:(?:</span><span class="default">$atom</span><span class="string">|</span><span class="default">$quoted_string</span><span class="string">)+)"</span><span class="keyword">;<br />        </span><span class="default">$angle_addr     </span><span class="keyword">= </span><span class="string">"(?:</span><span class="default">$cfws</span><span class="string">?&lt;</span><span class="default">$addr_spec</span><span class="string">&gt;</span><span class="default">$cfws</span><span class="string">?)"</span><span class="keyword">;<br />        </span><span class="default">$name_addr      </span><span class="keyword">= </span><span class="string">"(?:</span><span class="default">$display_name</span><span class="string">?</span><span class="default">$angle_addr</span><span class="string">)"</span><span class="keyword">;<br />        </span><span class="default">$mailbox        </span><span class="keyword">= </span><span class="string">"(?:</span><span class="default">$name_addr</span><span class="string">|</span><span class="default">$addr_spec</span><span class="string">)"</span><span class="keyword">;<br />        </span><span class="default">$mailbox_list   </span><span class="keyword">= </span><span class="string">"(?:(?:(?:(?&lt;=:)|,)</span><span class="default">$mailbox</span><span class="string">)+)"</span><span class="keyword">;<br />        </span><span class="default">$group          </span><span class="keyword">= </span><span class="string">"(?:</span><span class="default">$display_name</span><span class="string">:(?:</span><span class="default">$mailbox_list</span><span class="string">|</span><span class="default">$cfws</span><span class="string">)?;</span><span class="default">$cfws</span><span class="string">?)"</span><span class="keyword">;<br />        </span><span class="default">$address        </span><span class="keyword">= </span><span class="string">"(?:</span><span class="default">$mailbox</span><span class="string">|</span><span class="default">$group</span><span class="string">)"</span><span class="keyword">;<br />        </span><span class="default">$address_list   </span><span class="keyword">= </span><span class="string">"(?:(?:^|,)</span><span class="default">$address</span><span class="string">)+"</span><span class="keyword">;<br /><br />        </span><span class="comment">//output length of string (just so you see how f**king long it is)<br />        </span><span class="keyword">echo(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$address_list</span><span class="keyword">) . </span><span class="string">" "</span><span class="keyword">);<br /><br />        </span><span class="comment">//apply expression<br />        </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/^</span><span class="default">$address_list</span><span class="string">$/"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">, </span><span class="default">PREG_SET_ORDER</span><span class="keyword">);<br /><br />        return </span><span class="default">$array</span><span class="keyword">;<br />};<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="110147">  <div class="votes">
    <div id="Vu110147">
    <a href="https://www.php.net/manual/vote-note.php?id=110147&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd110147">
    <a href="https://www.php.net/manual/vote-note.php?id=110147&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V110147" title="65% like this...">
    7
    </div>
  </div>
  <a href="function.preg-match-all.php.html#110147" class="name">
  <strong class="user"><em>fab</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#110147"> &para;</a><div class="date" title="2012-09-24 09:14"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom110147">
<div class="phpcode"><code><span class="html">Here is a function that replaces all occurrences of a number in a string by the number--<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">decremente_chaine</span><span class="keyword">(</span><span class="default">$chaine</span><span class="keyword">)<br />    {<br />        </span><span class="comment">//récupérer toutes les occurrences de nombres et leurs indices<br />        </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/[0-9]+/"</span><span class="keyword">,</span><span class="default">$chaine</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">,</span><span class="default">PREG_OFFSET_CAPTURE</span><span class="keyword">);<br />            </span><span class="comment">//parcourir les occurrences <br />            </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);</span><span class="default">$i</span><span class="keyword">++)<br />            {<br />                </span><span class="default">$longueurnombre </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">((string)</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]);<br />                </span><span class="default">$taillechaine </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$chaine</span><span class="keyword">);<br />                </span><span class="comment">// découper la chaine en 3 morceaux<br />                </span><span class="default">$debut </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$chaine</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">]);<br />                </span><span class="default">$milieu </span><span class="keyword">= (</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">])-</span><span class="default">1</span><span class="keyword">;<br />                </span><span class="default">$fin </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$chaine</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">]+</span><span class="default">$longueurnombre</span><span class="keyword">,</span><span class="default">$taillechaine</span><span class="keyword">);<br />                 </span><span class="comment">// si c'est 10,100,1000 etc. on décale tout de 1 car le résultat comporte un chiffre de moins<br />                 </span><span class="keyword">if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'#[1][0]+$#'</span><span class="keyword">, </span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]))<br />                 {<br />                    for(</span><span class="default">$j </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);</span><span class="default">$j</span><span class="keyword">++)<br />                    {<br />                        </span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] = </span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] -</span><span class="default">1</span><span class="keyword">;<br />                    }<br />                 }<br />                </span><span class="default">$chaine </span><span class="keyword">= </span><span class="default">$debut</span><span class="keyword">.</span><span class="default">$milieu</span><span class="keyword">.</span><span class="default">$fin</span><span class="keyword">;<br />            }<br />        return </span><span class="default">$chaine</span><span class="keyword">;<br />    }<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="81559">  <div class="votes">
    <div id="Vu81559">
    <a href="https://www.php.net/manual/vote-note.php?id=81559&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd81559">
    <a href="https://www.php.net/manual/vote-note.php?id=81559&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V81559" title="69% like this...">
    5
    </div>
  </div>
  <a href="function.preg-match-all.php.html#81559" class="name">
  <strong class="user"><em>bruha</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#81559"> &para;</a><div class="date" title="2008-03-04 12:13"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom81559">
<div class="phpcode"><code><span class="html">To count str_length in UTF-8 string i use<br /><br />$count = preg_match_all("/[[:print:]\pL]/u", $str, $pockets);<br /><br />where<br />[:print:] - printing characters, including space<br />\pL - UTF-8 Letter<br />/u - UTF-8 string<br />other unicode character properties on <a href="http://www.pcre.org/pcre.txt" rel="nofollow" target="_blank">http://www.pcre.org/pcre.txt</a></span></code></div>
  </div>
 </div>
  <div class="note" id="71572">  <div class="votes">
    <div id="Vu71572">
    <a href="https://www.php.net/manual/vote-note.php?id=71572&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd71572">
    <a href="https://www.php.net/manual/vote-note.php?id=71572&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V71572" title="63% like this...">
    5
    </div>
  </div>
  <a href="function.preg-match-all.php.html#71572" class="name">
  <strong class="user"><em>chuckie</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#71572"> &para;</a><div class="date" title="2006-12-06 06:20"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom71572">
<div class="phpcode"><code><span class="html">This is a function to convert byte offsets into (UTF-8) character offsets (this is reagardless of whether you use /u modifier:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">function </span><span class="default">mb_preg_match_all</span><span class="keyword">(</span><span class="default">$ps_pattern</span><span class="keyword">, </span><span class="default">$ps_subject</span><span class="keyword">, &amp;</span><span class="default">$pa_matches</span><span class="keyword">, </span><span class="default">$pn_flags </span><span class="keyword">= </span><span class="default">PREG_PATTERN_ORDER</span><span class="keyword">, </span><span class="default">$pn_offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$ps_encoding </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">) {<br />  </span><span class="comment">// WARNING! - All this function does is to correct offsets, nothing else:<br />  //<br />  </span><span class="keyword">if (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$ps_encoding</span><span class="keyword">))<br />    </span><span class="default">$ps_encoding </span><span class="keyword">= </span><span class="default">mb_internal_encoding</span><span class="keyword">();<br /><br />  </span><span class="default">$pn_offset </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$ps_subject</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$pn_offset</span><span class="keyword">, </span><span class="default">$ps_encoding</span><span class="keyword">));<br />  </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$ps_pattern</span><span class="keyword">, </span><span class="default">$ps_subject</span><span class="keyword">, </span><span class="default">$pa_matches</span><span class="keyword">, </span><span class="default">$pn_flags</span><span class="keyword">, </span><span class="default">$pn_offset</span><span class="keyword">);<br /><br />  if (</span><span class="default">$ret </span><span class="keyword">&amp;&amp; (</span><span class="default">$pn_flags </span><span class="keyword">&amp; </span><span class="default">PREG_OFFSET_CAPTURE</span><span class="keyword">))<br />    foreach(</span><span class="default">$pa_matches </span><span class="keyword">as &amp;</span><span class="default">$ha_match</span><span class="keyword">)<br />      foreach(</span><span class="default">$ha_match </span><span class="keyword">as &amp;</span><span class="default">$ha_match</span><span class="keyword">)<br />        </span><span class="default">$ha_match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$ps_subject</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$ha_match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]), </span><span class="default">$ps_encoding</span><span class="keyword">);<br />    </span><span class="comment">//<br />    // (code is independent of PREG_PATTER_ORDER / PREG_SET_ORDER)<br /><br />  </span><span class="keyword">return </span><span class="default">$ret</span><span class="keyword">;<br />  }<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="86366">  <div class="votes">
    <div id="Vu86366">
    <a href="https://www.php.net/manual/vote-note.php?id=86366&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd86366">
    <a href="https://www.php.net/manual/vote-note.php?id=86366&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V86366" title="64% like this...">
    4
    </div>
  </div>
  <a href="function.preg-match-all.php.html#86366" class="name">
  <strong class="user"><em>meaneye at mail dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#86366"> &para;</a><div class="date" title="2008-10-15 02:56"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom86366">
<div class="phpcode"><code><span class="html">Recently I had to write search engine in hebrew and ran into huge amount of problems. My data was stored in MySQL table with utf8_bin encoding.<br /><br />So, to be able to write hebrew in utf8 table you need to do<br /><span class="default">&lt;?php<br />$prepared_text </span><span class="keyword">= </span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">urf8_encode</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">));<br /></span><span class="default">?&gt;<br /></span><br />But then I had to find if some word exists in stored text. This is the place I got stuck. Simple preg_match would not find text since hebrew doesnt work that easy. I've tried with /u and who kows what else.<br /><br />Solution was somewhat logical and simple... <br /><span class="default">&lt;?php<br />$db_text </span><span class="keyword">= </span><span class="default">bin2hex</span><span class="keyword">(</span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$db_text</span><span class="keyword">)));<br /></span><span class="default">$word </span><span class="keyword">= </span><span class="default">bin2hex</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">);<br /><br /></span><span class="default">$found </span><span class="keyword">= </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/(</span><span class="default">$word</span><span class="string">)+/i"</span><span class="keyword">, </span><span class="default">$db_text</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />I've used preg_match_all since it returns number of occurences. So I could sort search results acording to that.<br /><br />Hope someone finds this useful!</span></code></div>
  </div>
 </div>
  <div class="note" id="82661">  <div class="votes">
    <div id="Vu82661">
    <a href="https://www.php.net/manual/vote-note.php?id=82661&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd82661">
    <a href="https://www.php.net/manual/vote-note.php?id=82661&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V82661" title="66% like this...">
    2
    </div>
  </div>
  <a href="function.preg-match-all.php.html#82661" class="name">
  <strong class="user"><em>spambegone at cratemedia dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#82661"> &para;</a><div class="date" title="2008-04-20 11:39"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom82661">
<div class="phpcode"><code><span class="html">I found simpleXML to be useful only in cases where the XML was extremely small, otherwise the server would run out of memory (I suspect there is a memory leak or something?). So while searching for alternative parsers, I decided to try a simpler approach. I don't know how this compares with cpu usage, but I know it works with large XML structures. This is more a manual method, but it works for me since I always know what structure of data I will be receiving. <br /><br />Essentially I just preg_match() unique nodes to find the values I am looking for, or I preg_match_all to find multiple nodes. This puts the results in an array and I can then process this data as I please.<br /><br />I was unhappy though, that preg_match_all() stores the data twice (requiring twice the memory), one array for all the full pattern matches, and one array for all the sub pattern matches. You could probably write your own function that overcame this. But for now this works for me, and I hope it saves someone else some time as well.<br /><br />// SAMPLE XML<br />&lt;RETS ReplyCode="0" ReplyText="Operation Successful"&gt;<br />  &lt;COUNT Records="14" /&gt;<br />  &lt;DELIMITER value="09" /&gt;<br />  &lt;COLUMNS&gt;PropertyID&lt;/COLUMNS&gt;<br />  &lt;DATA&gt;521897&lt;/DATA&gt;<br />  &lt;DATA&gt;677208&lt;/DATA&gt;<br />  &lt;DATA&gt;686037&lt;/DATA&gt;<br />&lt;/RETS&gt;<br /><br /><span class="default">&lt;?PHP<br /><br /></span><span class="comment">// SAMPLE FUNCTION<br /></span><span class="keyword">function </span><span class="default">parse_xml</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">) {<br />    <br />    <br />    </span><span class="comment">// GET DELIMITER (single instance)<br />    </span><span class="default">$match_res </span><span class="keyword">= </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/&lt;DELIMITER value ?= ?"(.*)" ?\/&gt;/'</span><span class="keyword">, </span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />    if(!empty(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])) {<br />        </span><span class="default">$results</span><span class="keyword">[</span><span class="string">"delimiter"</span><span class="keyword">] = </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br />    } else {<br />        </span><span class="comment">// DEFAULT DELIMITER<br />        </span><span class="default">$results</span><span class="keyword">[</span><span class="string">"delimiter"</span><span class="keyword">] = </span><span class="string">"\t"</span><span class="keyword">;<br />    }<br />    unset(</span><span class="default">$match_res</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />    <br />    <br />    </span><span class="comment">// GET MULTIPLE DATA NODES (multiple instances)<br />    </span><span class="default">$results</span><span class="keyword">[</span><span class="string">"data_count"</span><span class="keyword">] = </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/&lt;DATA&gt;(.*)&lt;\/DATA&gt;/"</span><span class="keyword">, </span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />    </span><span class="comment">// GET MATCHES OF SUB PATTERN, DISCARD THE REST<br />    </span><span class="default">$results</span><span class="keyword">[</span><span class="string">"data"</span><span class="keyword">]=</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />    unset(</span><span class="default">$match_res</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />    <br />    </span><span class="comment">// UNSET XML TO SAVE MEMORY (should unset outside the function as well)<br />    </span><span class="keyword">unset(</span><span class="default">$xml</span><span class="keyword">);<br /><br />    </span><span class="comment">// RETURN RESULTS ARRAY<br />    </span><span class="keyword">return </span><span class="default">$results</span><span class="keyword">;<br />    <br />    <br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="122643">  <div class="votes">
    <div id="Vu122643">
    <a href="https://www.php.net/manual/vote-note.php?id=122643&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122643">
    <a href="https://www.php.net/manual/vote-note.php?id=122643&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122643" title="66% like this...">
    1
    </div>
  </div>
  <a href="function.preg-match-all.php.html#122643" class="name">
  <strong class="user"><em>qdinar at gmail dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#122643"> &para;</a><div class="date" title="2018-04-19 07:28"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom122643">
<div class="phpcode"><code><span class="html">when regex is for longer and shorter version of a string,<br />only one of that long and short versions is catched.<br />when regex match occurs in one position of string,<br />only one match is saved in matches[0] for that position.<br />if ? is used, regex is greedy, and catches more long version,<br />if | is used, most first matching variant is catched:<br /><span class="default">&lt;?php<br />preg_match_all</span><span class="keyword">(</span><span class="string">'/ab|abc/'</span><span class="keyword">,</span><span class="string">'abc'</span><span class="keyword">,</span><span class="default">$m</span><span class="keyword">);<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">);<br /></span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'/abc?/'</span><span class="keyword">,</span><span class="string">'abc'</span><span class="keyword">,</span><span class="default">$m</span><span class="keyword">);<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span>['ab', 'abc'] in $m[0] for both can be expected, but it is not so,<br />actually they output [['ab']] and [['abc']]:<br />array(1) {<br />  [0]=&gt;<br />  array(1) {<br />    [0]=&gt;<br />    string(2) "ab"<br />  }<br />}<br />array(1) {<br />  [0]=&gt;<br />  array(1) {<br />    [0]=&gt;<br />    string(3) "abc"<br />  }<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="118805">  <div class="votes">
    <div id="Vu118805">
    <a href="https://www.php.net/manual/vote-note.php?id=118805&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd118805">
    <a href="https://www.php.net/manual/vote-note.php?id=118805&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V118805" title="57% like this...">
    3
    </div>
  </div>
  <a href="function.preg-match-all.php.html#118805" class="name">
  <strong class="user"><em>stamster at gmail dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#118805"> &para;</a><div class="date" title="2016-02-09 11:55"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom118805">
<div class="phpcode"><code><span class="html">Be careful with this pattern match and large input buffer on preg_match_* functions.<br /><br /><span class="default">&lt;?php<br />$pattern </span><span class="keyword">= </span><span class="string">'/\{(?:[^{}]|(?R))*\}/'</span><span class="keyword">;<br /><br /></span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$buffer</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">); <br /></span><span class="default">?&gt;<br /></span><br />if $buffer is 80+ KB in size, you'll end up with segfault! <br /><br />[89396.588854] php[4384]: segfault at 7ffd6e2bdeb0 ip 00007fa20c8d67ed sp 00007ffd6e2bde70 error 6 in libpcre.so.3.13.1[7fa20c8c3000+3c000]<br /><br />This is due to the PCRE recursion. This is a known bug in PHP since 2008, but it's source is not PHP itself but PCRE library. <br /><br />Rasmus Lerdorf has the answer: <a href="https://bugs.php.net/bug.php?id=45735#1365812629" rel="nofollow" target="_blank">https://bugs.php.net/bug.php?id=45735#1365812629</a><br /><br />"The problem here is that there is no way to detect run-away regular expressions <br />here without huge performance and memory penalties. Yes, we could build PCRE in a <br />way that it wouldn't segfault and we could crank up the default backtrack limit <br />to something huge, but it would slow every regex call down by a lot. If PCRE <br />provided a way to handle this in a more graceful manner without the performance <br />hit we would of course use it."</span></code></div>
  </div>
 </div>
  <div class="note" id="102520">  <div class="votes">
    <div id="Vu102520">
    <a href="https://www.php.net/manual/vote-note.php?id=102520&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd102520">
    <a href="https://www.php.net/manual/vote-note.php?id=102520&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V102520" title="52% like this...">
    4
    </div>
  </div>
  <a href="function.preg-match-all.php.html#102520" class="name">
  <strong class="user"><em>john at mccarthy dot net</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#102520"> &para;</a><div class="date" title="2011-02-18 11:21"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom102520">
<div class="phpcode"><code><span class="html">I needed a function to rotate the results of a preg_match_all query, and made this. Not sure if it exists.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">turn_array</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">)<br />{<br />    for (</span><span class="default">$z </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;</span><span class="default">$z </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">);</span><span class="default">$z</span><span class="keyword">++)<br />    {<br />        for (</span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;</span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">$z</span><span class="keyword">]);</span><span class="default">$x</span><span class="keyword">++)<br />        {<br />            </span><span class="default">$rt</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">][</span><span class="default">$z</span><span class="keyword">] = </span><span class="default">$m</span><span class="keyword">[</span><span class="default">$z</span><span class="keyword">][</span><span class="default">$x</span><span class="keyword">];<br />        }<br />    }    <br />    <br />    return </span><span class="default">$rt</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span><br />Example - Take results of some preg_match_all query:<br /><br />Array<br />(<br />    [0] =&gt; Array<br />        (<br />            [1] =&gt; Banff <br />            [2] =&gt; Canmore<br />            [3] =&gt; Invermere<br />        )<br /> <br />    [1] =&gt; Array<br />        (<br />            [1] =&gt; AB <br />            [2] =&gt; AB<br />            [3] =&gt; BC<br />        )<br /> <br />    [2] =&gt; Array<br />        (<br />            [1] =&gt; 51.1746254 <br />            [2] =&gt; 51.0938416<br />            [3] =&gt; 50.5065193<br />        )<br /> <br />    [3] =&gt; Array<br />        (<br />            [1] =&gt; -115.5719757 <br />            [2] =&gt; -115.3517761<br />            [3] =&gt; -116.0321884<br />        )<br /> <br />    [4] =&gt; Array<br />        (<br />            [1] =&gt; T1L 1B3 <br />            [2] =&gt; T1W 1N2<br />            [3] =&gt; V0B 2G0<br />        )<br /><br />)<br /><br />Rotate it 90 degrees to group results as records:<br /><br />Array<br />(<br />    [0] =&gt; Array<br />        (<br />            [1] =&gt; Banff <br />            [2] =&gt; AB<br />            [3] =&gt; 51.1746254<br />            [4] =&gt; -115.5719757<br />            [5] =&gt; T1L 1B3<br />        )<br /> <br />    [1] =&gt; Array<br />        (<br />            [1] =&gt; Canmore<br />            [2] =&gt; AB<br />            [3] =&gt; 51.0938416<br />            [4] =&gt; -115.3517761<br />            [5] =&gt; T1W 1N2<br />        )<br /> <br />    [2] =&gt; Array<br />        (<br />            [1] =&gt; Invermere<br />            [2] =&gt; BC<br />            [3] =&gt; 50.5065193<br />            [4] =&gt; -116.0321884<br />            [5] =&gt; V0B 2G0<br />        )<br />)</span></code></div>
  </div>
 </div>
  <div class="note" id="90000">  <div class="votes">
    <div id="Vu90000">
    <a href="https://www.php.net/manual/vote-note.php?id=90000&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd90000">
    <a href="https://www.php.net/manual/vote-note.php?id=90000&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V90000" title="55% like this...">
    2
    </div>
  </div>
  <a href="function.preg-match-all.php.html#90000" class="name">
  <strong class="user"><em>ad</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#90000"> &para;</a><div class="date" title="2009-04-01 05:18"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom90000">
<div class="phpcode"><code><span class="html">i have made up a simple function to extract a number from a string..<br /><br />I am not sure how good it is, but it works.<br /><br />It gets only the numbers 0-9, the "-", " ", "(", ")", "."<br /><br />characters.. This is as far as I know the most widely used characters for a Phone number.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">clean_phone_number</span><span class="keyword">(</span><span class="default">$phone</span><span class="keyword">) {<br />       if (!empty(</span><span class="default">$phone</span><span class="keyword">)) {<br />               </span><span class="comment">//var_dump($phone);<br />               </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'/[0-9\(\)+.\- ]/s'</span><span class="keyword">, </span><span class="default">$phone</span><span class="keyword">, </span><span class="default">$cleaned</span><span class="keyword">);<br />               foreach(</span><span class="default">$cleaned</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br />                       </span><span class="default">$ready </span><span class="keyword">.= </span><span class="default">$v</span><span class="keyword">;<br />               }<br />               </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$ready</span><span class="keyword">);<br />               die;<br />               if (</span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$cleaned</span><span class="keyword">) &gt; </span><span class="default">4 </span><span class="keyword">&amp;&amp; </span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$cleaned</span><span class="keyword">) &lt;=</span><span class="default">25</span><span class="keyword">) {<br />                       return </span><span class="default">$cleaned</span><span class="keyword">;<br />               }<br />               else {<br />                       return </span><span class="default">false</span><span class="keyword">;<br />               }<br />       }<br />       return </span><span class="default">false</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="99817">  <div class="votes">
    <div id="Vu99817">
    <a href="https://www.php.net/manual/vote-note.php?id=99817&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd99817">
    <a href="https://www.php.net/manual/vote-note.php?id=99817&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V99817" title="55% like this...">
    1
    </div>
  </div>
  <a href="function.preg-match-all.php.html#99817" class="name">
  <strong class="user"><em>no at bo dot dy</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#99817"> &para;</a><div class="date" title="2010-09-08 11:23"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom99817">
<div class="phpcode"><code><span class="html">For parsing queries with entities use:<br /><br /><span class="default">&lt;?php<br />preg_match_all</span><span class="keyword">(</span><span class="string">"/(?:^|(?&lt;=\&amp;(?![a-z]+\;)))([^\=]+)=(.*?)(?:$|\&amp;(?![a-z]+\;))/i"</span><span class="keyword">,<br />  </span><span class="default">$s</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, </span><span class="default">PREG_SET_ORDER </span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="83944">  <div class="votes">
    <div id="Vu83944">
    <a href="https://www.php.net/manual/vote-note.php?id=83944&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd83944">
    <a href="https://www.php.net/manual/vote-note.php?id=83944&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V83944" title="53% like this...">
    1
    </div>
  </div>
  <a href="function.preg-match-all.php.html#83944" class="name">
  <strong class="user"><em>sledge NOSPAM</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#83944"> &para;</a><div class="date" title="2008-06-19 01:46"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom83944">
<div class="phpcode"><code><span class="html">Perhaps you want to find the positions of all anchor tags.  This will return a two dimensional array of which the starting and ending positions will be returned.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">getTagPositions</span><span class="keyword">(</span><span class="default">$strBody</span><span class="keyword">)<br />{<br />    </span><span class="default">define</span><span class="keyword">(</span><span class="default">DEBUG</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br />    </span><span class="default">define</span><span class="keyword">(</span><span class="default">DEBUG_FILE_PREFIX</span><span class="keyword">, </span><span class="string">"/tmp/findlinks_"</span><span class="keyword">);<br />    <br />    </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/&lt;[^&gt;]+&gt;(.*)&lt;\/[^&gt;]+&gt;/U"</span><span class="keyword">, </span><span class="default">$strBody</span><span class="keyword">, </span><span class="default">$strTag</span><span class="keyword">, </span><span class="default">PREG_PATTERN_ORDER</span><span class="keyword">);<br />    </span><span class="default">$intOffset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />    </span><span class="default">$intIndex </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />    </span><span class="default">$intTagPositions </span><span class="keyword">= array();<br /><br />    foreach(</span><span class="default">$strTag</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] as </span><span class="default">$strFullTag</span><span class="keyword">) {<br />        if(</span><span class="default">DEBUG </span><span class="keyword">== </span><span class="default">true</span><span class="keyword">) {<br />            </span><span class="default">$fhDebug </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">DEBUG_FILE_PREFIX</span><span class="keyword">.</span><span class="default">time</span><span class="keyword">(), </span><span class="string">"a"</span><span class="keyword">);<br />            </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fhDebug</span><span class="keyword">, </span><span class="default">$fulltag</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />            </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fhDebug</span><span class="keyword">, </span><span class="string">"Starting position: "</span><span class="keyword">.</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$strBody</span><span class="keyword">, </span><span class="default">$strFullTag</span><span class="keyword">, </span><span class="default">$intOffset</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">);<br />            </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fhDebug</span><span class="keyword">, </span><span class="string">"Ending position: "</span><span class="keyword">.(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$strBody</span><span class="keyword">, </span><span class="default">$strFullTag</span><span class="keyword">, </span><span class="default">$intOffset</span><span class="keyword">) + </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$strFullTag</span><span class="keyword">)).</span><span class="string">"\n"</span><span class="keyword">);<br />            </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fhDebug</span><span class="keyword">, </span><span class="string">"Length: "</span><span class="keyword">.</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$strFullTag</span><span class="keyword">).</span><span class="string">"\n\n"</span><span class="keyword">);<br />            </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fhDebug</span><span class="keyword">);<br />        }<br />        </span><span class="default">$intTagPositions</span><span class="keyword">[</span><span class="default">$intIndex</span><span class="keyword">] = array(</span><span class="string">'start' </span><span class="keyword">=&gt; (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$strBody</span><span class="keyword">, </span><span class="default">$strFullTag</span><span class="keyword">, </span><span class="default">$intOffset</span><span class="keyword">)), </span><span class="string">'end' </span><span class="keyword">=&gt; (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$strBody</span><span class="keyword">, </span><span class="default">$strFullTag</span><span class="keyword">, </span><span class="default">$intOffset</span><span class="keyword">) + </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$strFullTag</span><span class="keyword">)));<br />        </span><span class="default">$intOffset </span><span class="keyword">+= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$strFullTag</span><span class="keyword">);<br />        </span><span class="default">$intIndex</span><span class="keyword">++;<br />    }<br />    return </span><span class="default">$intTagPositions</span><span class="keyword">;<br />}<br /><br /></span><span class="default">$strBody </span><span class="keyword">= </span><span class="string">'I have lots of &lt;a href="<a href="http://my.site.com" rel="nofollow" target="_blank">http://my.site.com</a>"&gt;links&lt;/a&gt; on this &lt;a href="<a href="http://my.site.com" rel="nofollow" target="_blank">http://my.site.com</a>"&gt;page&lt;/a&gt; that I want to &lt;a href="<a href="http://my.site.com" rel="nofollow" target="_blank">http://my.site.com</a>"&gt;find&lt;/a&gt; the positions.'</span><span class="keyword">;<br /><br /></span><span class="default">$strBody </span><span class="keyword">= </span><span class="default">strip_tags</span><span class="keyword">(</span><span class="default">html_entity_decode</span><span class="keyword">(</span><span class="default">$strBody</span><span class="keyword">), </span><span class="string">'&lt;a&gt;'</span><span class="keyword">);<br /></span><span class="default">$intTagPositions </span><span class="keyword">= </span><span class="default">getTagPositions</span><span class="keyword">(</span><span class="default">$strBody</span><span class="keyword">);<br /></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$intTagPositions</span><span class="keyword">);<br /><br /></span><span class="comment">/*****<br />Output:<br /><br />Array ( <br />    [0] =&gt; Array ( <br />        [start] =&gt; 15 <br />        [end] =&gt; 53 ) <br />    [1] =&gt; Array ( <br />        [start] =&gt; 62 <br />        [end] =&gt; 99 ) <br />    [2] =&gt; Array ( <br />        [start] =&gt; 115 <br />        [end] =&gt; 152 )<br /> ) <br />*****/<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="129044">  <div class="votes">
    <div id="Vu129044">
    <a href="https://www.php.net/manual/vote-note.php?id=129044&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd129044">
    <a href="https://www.php.net/manual/vote-note.php?id=129044&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V129044" title="no votes...">
    0
    </div>
  </div>
  <a href="function.preg-match-all.php.html#129044" class="name">
  <strong class="user"><em>b3forgames at gmail dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#129044"> &para;</a><div class="date" title="2023-11-15 12:18"><strong>2 months ago</strong></div>
  <div class="text" id="Hcom129044">
<div class="phpcode"><code><span class="html">EXAMPLE:<br />$file = file_get_contents('file');<br />if(preg_match_all('#Task To Run(.*)#s', $file, $m)) {<br />var_dump($m);<br />}<br /><br />No output...<br /><br />preg_match_all  not work if file exist BOM bytes (FF FE) :<br /><br />╰─$ head -n1 file | hexdump -C<br />00000000  ff fe 48 00 6f 00 73 00  74 00 4e 00 61 00 6d 00  |..H.o.s.t.N.a.m.|<br /><br />clear BOM via dos2unix:<br /><br />╰─$ dos2unix file <br />dos2unix: converting UTF-16LE file file to UTF-8 Unix format...<br /><br />Check again:<br /><br />╰─$ head -n1 file | hexdump -C<br />00000000  48 6f 73 74 4e 61 6d 65  3a 20 20 20 20 20 20 20  |HostName:       |<br /><br />Great! Now preg_match_all works fine.</span></code></div>
  </div>
 </div>
  <div class="note" id="128591">  <div class="votes">
    <div id="Vu128591">
    <a href="https://www.php.net/manual/vote-note.php?id=128591&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd128591">
    <a href="https://www.php.net/manual/vote-note.php?id=128591&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V128591" title="no votes...">
    0
    </div>
  </div>
  <a href="function.preg-match-all.php.html#128591" class="name">
  <strong class="user"><em>loretoparisi at gmail dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#128591"> &para;</a><div class="date" title="2023-06-07 12:28"><strong>8 months ago</strong></div>
  <div class="text" id="Hcom128591">
<div class="phpcode"><code><span class="html">A multi-byte safe preg_match_all that fixes capture offsets when using PREG_OFFSET_CAPTURE on utf-8 strings<br /> <br /><span class="default">&lt;?php <br /></span><span class="keyword">function </span><span class="default">mb_preg_match_all</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, &amp;</span><span class="default">$matches </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$flags </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br />    </span><span class="default">$out</span><span class="keyword">=</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">, </span><span class="default">$flags</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);<br />    if(</span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">PREG_OFFSET_CAPTURE </span><span class="keyword">&amp;&amp; </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">) &amp;&amp; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">) {<br />        foreach (</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] as &amp;</span><span class="default">$match</span><span class="keyword">) {<br />            </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]));<br />        }<br />    }<br />    return </span><span class="default">$out</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="127431">  <div class="votes">
    <div id="Vu127431">
    <a href="https://www.php.net/manual/vote-note.php?id=127431&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd127431">
    <a href="https://www.php.net/manual/vote-note.php?id=127431&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V127431" title="no votes...">
    0
    </div>
  </div>
  <a href="function.preg-match-all.php.html#127431" class="name">
  <strong class="user"><em>biziclop at vipmail dot hu</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#127431"> &para;</a><div class="date" title="2022-08-06 07:22"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom127431">
<div class="phpcode"><code><span class="html">Sometimes you don't just want to cherry-pick the matches but need that the entire subject is made up from matching substrings, so every character of the subject is a member of a match. None of the existing preg_* function is easily applicable for this task, so I made the preg_match_entire() function.<br />It uses the (*MARK) syntax which is documented here: <a href="https://pcre.org/original/doc/html/pcrepattern.html#SEC27" rel="nofollow" target="_blank">https://pcre.org/original/doc/html/pcrepattern.html#SEC27</a><br /><br /><span class="default">&lt;?php <br /><br /></span><span class="comment">// returns: the array of matches<br />// null if the string is not a repetition of the pattern<br />// false on error<br /></span><span class="keyword">function </span><span class="default">preg_match_entire</span><span class="keyword">( </span><span class="default">string $pattern</span><span class="keyword">, </span><span class="default">string $subject</span><span class="keyword">, </span><span class="default">int $flags </span><span class="keyword">= </span><span class="default">0 </span><span class="keyword">){<br />  </span><span class="comment">// Rebuild and wrap the pattern<br />  </span><span class="default">$delimiter </span><span class="keyword">= </span><span class="default">$pattern</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />  </span><span class="default">$ldp       </span><span class="keyword">= </span><span class="default">strrpos</span><span class="keyword">( </span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$delimiter </span><span class="keyword">);<br />  </span><span class="default">$pattern   </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$ldp </span><span class="keyword">- </span><span class="default">1 </span><span class="keyword">);<br />  </span><span class="default">$modifiers </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$pattern</span><span class="keyword">,    </span><span class="default">$ldp </span><span class="keyword">+ </span><span class="default">1 </span><span class="keyword">);<br />  </span><span class="default">$pattern   </span><span class="keyword">= </span><span class="string">"</span><span class="keyword">{</span><span class="default">$delimiter</span><span class="keyword">}</span><span class="string">   \G\z (*MARK:END)   |   \G (?:</span><span class="keyword">{</span><span class="default">$pattern</span><span class="keyword">}</span><span class="string">)   </span><span class="keyword">{</span><span class="default">$delimiter</span><span class="keyword">}</span><span class="string">x</span><span class="keyword">{</span><span class="default">$modifiers</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">;<br />  </span><span class="default">$r </span><span class="keyword">= </span><span class="default">preg_match_all</span><span class="keyword">( </span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, </span><span class="default">PREG_SET_ORDER </span><span class="keyword">| </span><span class="default">$flags </span><span class="keyword">);<br />  if( </span><span class="default">$r </span><span class="keyword">=== </span><span class="default">false </span><span class="keyword">)  return </span><span class="default">false</span><span class="keyword">;  </span><span class="comment">// error<br />  </span><span class="default">$end </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">( </span><span class="default">$m </span><span class="keyword">);<br />  if( </span><span class="default">$end </span><span class="keyword">=== </span><span class="default">null </span><span class="keyword">|| ! isset( </span><span class="default">$end</span><span class="keyword">[</span><span class="string">'MARK'</span><span class="keyword">]) || </span><span class="default">$end</span><span class="keyword">[</span><span class="string">'MARK'</span><span class="keyword">] !== </span><span class="string">'END'</span><span class="keyword">)<br />    return </span><span class="default">null</span><span class="keyword">;  </span><span class="comment">// end of string not reached<br />  </span><span class="keyword">return </span><span class="default">$m</span><span class="keyword">;  </span><span class="comment">// return actual matches, may be an empty array<br /></span><span class="keyword">}<br /><br /></span><span class="comment">// Same results:<br /></span><span class="default">test</span><span class="keyword">(</span><span class="string">'#{\d+}#'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);              </span><span class="comment">// []<br /></span><span class="default">test</span><span class="keyword">(</span><span class="string">'#{\d+}#'</span><span class="keyword">, </span><span class="string">'{11}{22}{33}'</span><span class="keyword">);  </span><span class="comment">// {11},{22},{33}<br /><br />// Different results: preg_match_entire won't match this:<br /></span><span class="default">test</span><span class="keyword">(</span><span class="string">'#{\d+}#'</span><span class="keyword">, </span><span class="string">'{11}{}{aa}{22},{{33}}'</span><span class="keyword">);<br /></span><span class="comment">// preg_match_entire: null<br />// preg_match_all:    {11},{22},{33}<br /><br /></span><span class="keyword">function </span><span class="default">test</span><span class="keyword">( </span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$subject </span><span class="keyword">){<br />  echo </span><span class="string">"pattern:           </span><span class="default">$pattern</span><span class="string">\n"</span><span class="keyword">;<br />  echo </span><span class="string">"subject:           </span><span class="default">$subject</span><span class="string">\n"</span><span class="keyword">;<br />  </span><span class="default">print_matches</span><span class="keyword">(</span><span class="string">'preg_match_entire: '</span><span class="keyword">, </span><span class="default">preg_match_entire</span><span class="keyword">( </span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$subject </span><span class="keyword">));<br />  </span><span class="default">preg_match_all</span><span class="keyword">( </span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">, </span><span class="default">PREG_SET_ORDER </span><span class="keyword">);<br />  </span><span class="default">print_matches</span><span class="keyword">(</span><span class="string">'preg_match_all:    '</span><span class="keyword">, </span><span class="default">$matches </span><span class="keyword">);<br />  echo </span><span class="string">"\n"</span><span class="keyword">;<br />}<br />function </span><span class="default">print_matches</span><span class="keyword">( </span><span class="default">$t</span><span class="keyword">, </span><span class="default">$m </span><span class="keyword">){<br />  echo </span><span class="default">$t</span><span class="keyword">, </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$m </span><span class="keyword">) &amp;&amp; </span><span class="default">$m </span><span class="keyword">? </span><span class="default">implode</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="default">array_column</span><span class="keyword">( </span><span class="default">$m</span><span class="keyword">, </span><span class="default">0 </span><span class="keyword">)) : </span><span class="default">json_encode</span><span class="keyword">( </span><span class="default">$m </span><span class="keyword">), </span><span class="string">"\n"</span><span class="keyword">;<br />} </span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="126746">  <div class="votes">
    <div id="Vu126746">
    <a href="https://www.php.net/manual/vote-note.php?id=126746&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd126746">
    <a href="https://www.php.net/manual/vote-note.php?id=126746&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V126746" title="no votes...">
    0
    </div>
  </div>
  <a href="function.preg-match-all.php.html#126746" class="name">
  <strong class="user"><em>rajudec at gmail dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#126746"> &para;</a><div class="date" title="2022-01-04 08:45"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom126746">
<div class="phpcode"><code><span class="html"><span class="default">&lt;?php<br /></span><span class="comment">//Allow limited span formatting in html text<br /><br /></span><span class="default">$str</span><span class="keyword">=</span><span class="string">'&lt;span style="text-decoration-line: underline; font-weight: bold; font-style: italic;"&gt;White&lt;/span&gt;<br />&lt;span style="text-decoration-line: underline;"&gt;RED&lt;/span&gt;&lt;span style="color:blue"&gt;blue&lt;/span&gt;'</span><span class="keyword">;<br /><br />function </span><span class="default">next_format</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)<br />{<br />     </span><span class="default">$array</span><span class="keyword">=array(</span><span class="string">"text-decoration-line"</span><span class="keyword">=&gt;</span><span class="string">"underline"</span><span class="keyword">,</span><span class="string">"font-weight"</span><span class="keyword">=&gt;</span><span class="string">"bold"</span><span class="keyword">,</span><span class="string">"font-style"</span><span class="keyword">=&gt;</span><span class="string">"italic"</span><span class="keyword">);<br />    foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$val</span><span class="keyword">)<br />    {<br />          if(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]==</span><span class="default">$key </span><span class="keyword">&amp;&amp; </span><span class="default">$str</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]==</span><span class="default">$val</span><span class="keyword">)<br />        {<br />              return </span><span class="default">$str</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">': '</span><span class="keyword">.</span><span class="default">$str</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">].</span><span class="string">";"</span><span class="keyword">;<br />        }<br />     }<br />          return </span><span class="string">''</span><span class="keyword">;<br />  <br />}<br />function </span><span class="default">next_span</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">)<br />{<br />  </span><span class="default">$needFormat</span><span class="keyword">=</span><span class="default">preg_replace_callback</span><span class="keyword">(</span><span class="string">'/([a-z\-]+):\s*([^;]+)(;|)/ism'</span><span class="keyword">,</span><span class="string">"next_format"</span><span class="keyword">,</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br />  return </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="default">$needFormat</span><span class="keyword">.</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];<br />  <br />}<br /> echo </span><span class="default">preg_replace_callback</span><span class="keyword">(<br />            </span><span class="string">"/(\&lt;span\s+style\=\")([^\"]+)(\"&gt;)/ism"</span><span class="keyword">,<br />            </span><span class="string">"next_span"</span><span class="keyword">,<br />            </span><span class="default">$str</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="126203">  <div class="votes">
    <div id="Vu126203">
    <a href="https://www.php.net/manual/vote-note.php?id=126203&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd126203">
    <a href="https://www.php.net/manual/vote-note.php?id=126203&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V126203" title="no votes...">
    0
    </div>
  </div>
  <a href="function.preg-match-all.php.html#126203" class="name">
  <strong class="user"><em>mojo</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#126203"> &para;</a><div class="date" title="2021-06-29 10:47"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom126203">
<div class="phpcode"><code><span class="html">Why <span class="default">&lt;?php preg_match_all</span><span class="keyword">(</span><span class="string">'/(?:^|\s)(ABC|XYZ)(?:\s|$)/i'</span><span class="keyword">, </span><span class="string">'ABC  XYZ'</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">) </span><span class="default">?&gt;</span> finds only 'ABC'?<br /><br />Because the first full match is 'ABC ' - containing the trailing space. And that space is not available for further processing.<br /><br />Use lookbehind and lookahead to solve this problem: <span class="default">&lt;?php preg_match_all</span><span class="keyword">(</span><span class="string">'/(?&lt;=^|\s)(ABC|XYZ)(?=\s|$)/i'</span><span class="keyword">, </span><span class="string">'ABC XYZ'</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">)  </span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="125630">  <div class="votes">
    <div id="Vu125630">
    <a href="https://www.php.net/manual/vote-note.php?id=125630&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd125630">
    <a href="https://www.php.net/manual/vote-note.php?id=125630&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V125630" title="no votes...">
    0
    </div>
  </div>
  <a href="function.preg-match-all.php.html#125630" class="name">
  <strong class="user"><em>chris at ocproducts dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#125630"> &para;</a><div class="date" title="2020-12-28 03:43"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom125630">
<div class="phpcode"><code><span class="html">If PREG_OFFSET_CAPTURE is set then unmatched captures (i.e. ones with '?') will not be present in the result array. This is presumably because there is no offset, and thus the original PHP dev decided best to just leave it out.</span></code></div>
  </div>
 </div>
  <div class="note" id="110129">  <div class="votes">
    <div id="Vu110129">
    <a href="https://www.php.net/manual/vote-note.php?id=110129&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd110129">
    <a href="https://www.php.net/manual/vote-note.php?id=110129&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V110129" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.preg-match-all.php.html#110129" class="name">
  <strong class="user"><em>fseverin at free dot fr</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#110129"> &para;</a><div class="date" title="2012-09-22 05:52"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom110129">
<div class="phpcode"><code><span class="html">As I intended to create for my own purpose a clean PHP class to act on XML files, combining the use of DOM and simplexml functions, I had that small problem, but very annoying, that the offsets in a path is not numbered the same in both. <br /><br />That is to say, for example, if i get a DOM xpath object it appears like:<br />/ANODE/ANOTHERNODE/SOMENODE[9]/NODE[2]<br />and as a simplexml object would be equivalent to:<br />ANODE-&gt;ANOTHERNODE-&gt;SOMENODE[8]-&gt;NODE[1]<br /><br />So u see what I mean? I used preg_match_all to solve that problem, and finally I got this after some hours of headlock (as I'm french the names of variables are in French sorry), hoping it could be useful to some of you:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">decrease_string</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)<br />    {<br />        </span><span class="comment">/* retrieve all occurrences AND offsets of numbers in the original string: */<br /><br />        </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/[0-9]+/"</span><span class="keyword">,</span><span class="default">$chaine</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">,</span><span class="default">PREG_OFFSET_CAPTURE</span><span class="keyword">);<br />            for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);</span><span class="default">$i</span><span class="keyword">++)<br />            {<br />                </span><span class="default">$longueurnombre </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">((string)</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]);<br />                </span><span class="default">$taillechaine </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$chaine</span><span class="keyword">);<br />                </span><span class="comment">// cut the string in 3 pieces<br />                </span><span class="default">$debut </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$chaine</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">]);<br />                </span><span class="default">$milieu </span><span class="keyword">= (</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">])-</span><span class="default">1</span><span class="keyword">;<br />                </span><span class="default">$fin </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$chaine</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">]+</span><span class="default">$longueurnombre</span><span class="keyword">,</span><span class="default">$taillechaine</span><span class="keyword">);<br />                 </span><span class="comment">/* if it's 10,100,1000, the problem is that the string gets shorter and it shifts all the offsets, so we have to decrease them of 1 */<br />                 </span><span class="keyword">if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'#[1][0]+$#'</span><span class="keyword">, </span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]))<br />                 {<br />                    for(</span><span class="default">$j </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);</span><span class="default">$j</span><span class="keyword">++)<br />                    {<br />                        </span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] = </span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] -</span><span class="default">1</span><span class="keyword">;<br />                    }<br />                 }<br />                </span><span class="default">$chaine </span><span class="keyword">= </span><span class="default">$debut</span><span class="keyword">.</span><span class="default">$milieu</span><span class="keyword">.</span><span class="default">$fin</span><span class="keyword">;<br />            }<br />        return </span><span class="default">$chaine</span><span class="keyword">;<br />    }<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="108539">  <div class="votes">
    <div id="Vu108539">
    <a href="https://www.php.net/manual/vote-note.php?id=108539&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd108539">
    <a href="https://www.php.net/manual/vote-note.php?id=108539&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V108539" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.preg-match-all.php.html#108539" class="name">
  <strong class="user"><em>marc</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#108539"> &para;</a><div class="date" title="2012-05-04 03:48"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom108539">
<div class="phpcode"><code><span class="html">Better use preg_replace to convert text in a clickable link with tag &lt;a&gt; <br /><br />$html = preg_replace('"\b(<a href="http://" rel="nofollow" target="_blank">http://</a>\S+)"', '&lt;a href="$1"&gt;$1&lt;/a&gt;', $text);</span></code></div>
  </div>
 </div>
  <div class="note" id="92312">  <div class="votes">
    <div id="Vu92312">
    <a href="https://www.php.net/manual/vote-note.php?id=92312&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd92312">
    <a href="https://www.php.net/manual/vote-note.php?id=92312&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V92312" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.preg-match-all.php.html#92312" class="name">
  <strong class="user"><em>elyknosrac at gmail dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#92312"> &para;</a><div class="date" title="2009-07-18 03:51"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom92312">
<div class="phpcode"><code><span class="html">Using preg_match_all I made a pretty handy function.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">function </span><span class="default">reg_smart_replace</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$replacement</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$replacementChar </span><span class="keyword">= </span><span class="string">"$$$"</span><span class="keyword">, </span><span class="default">$limit </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">)<br />{<br />    if (! </span><span class="default">$pattern </span><span class="keyword">|| ! </span><span class="default">$subject </span><span class="keyword">|| ! </span><span class="default">$replacement </span><span class="keyword">) { return </span><span class="default">false</span><span class="keyword">; }<br />    <br />    </span><span class="default">$replacementChar </span><span class="keyword">= </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$replacementChar</span><span class="keyword">);<br />    <br />    </span><span class="default">preg_match_all </span><span class="keyword">( </span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />    <br />    if (</span><span class="default">$limit </span><span class="keyword">&gt; -</span><span class="default">1</span><span class="keyword">) {<br />        foreach (</span><span class="default">$matches </span><span class="keyword">as </span><span class="default">$count </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">)<br />        {<br />            if (</span><span class="default">$count </span><span class="keyword">+ </span><span class="default">1 </span><span class="keyword">&gt; </span><span class="default">$limit </span><span class="keyword">) { unset(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">$count</span><span class="keyword">]); }<br />        }<br />    }<br />    foreach (</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] as </span><span class="default">$match</span><span class="keyword">) {<br />        </span><span class="default">$rep </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="default">$replacementChar</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">, </span><span class="default">$replacement</span><span class="keyword">);<br />        </span><span class="default">$subject </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">, </span><span class="default">$rep</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);<br />    }<br />    <br />    return </span><span class="default">$subject</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span><br />This function can turn blocks of text into clickable links or whatever.  Example:<br /><br /><span class="default">&lt;?php<br />reg_smart_replace</span><span class="keyword">(</span><span class="default">EMAIL_REGEX</span><span class="keyword">, </span><span class="string">'&lt;a href="<a href="mailto:$$$" rel="nofollow" target="_blank">mailto:$$$</a>"&gt;$$$&lt;/a&gt;'</span><span class="keyword">, </span><span class="default">$description</span><span class="keyword">)<br /></span><span class="default">?&gt;<br /></span>will turn all email addresses into actual links.<br /><br />Just substitute $$$ with the text that will be found by the regex.  If you can't use $$$ then use the 4th parameter $replacementChar</span></code></div>
  </div>
 </div>
  <div class="note" id="86182">  <div class="votes">
    <div id="Vu86182">
    <a href="https://www.php.net/manual/vote-note.php?id=86182&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd86182">
    <a href="https://www.php.net/manual/vote-note.php?id=86182&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V86182" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.preg-match-all.php.html#86182" class="name">
  <strong class="user"><em>MonkeyMan</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#86182"> &para;</a><div class="date" title="2008-10-07 01:25"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom86182">
<div class="phpcode"><code><span class="html">Here is a way to match everything on the page, performing an action for each match as you go. I had used this idiom in other languages, where its use is customary, but in PHP it seems to be not quite as common.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">custom_preg_match_all</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">)<br />{<br />    </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />    </span><span class="default">$match_count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />    while(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">, </span><span class="default">PREG_OFFSET_CAPTURE</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">))<br />    {<br />        </span><span class="comment">// Increment counter<br />        </span><span class="default">$match_count</span><span class="keyword">++;<br />    <br />        </span><span class="comment">// Get byte offset and byte length (assuming single byte encoded)<br />        </span><span class="default">$match_start </span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">];<br />        </span><span class="default">$match_length </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]);<br /><br />        </span><span class="comment">// (Optional) Transform $matches to the format it is usually set as (without PREG_OFFSET_CAPTURE set)<br />        </span><span class="keyword">foreach(</span><span class="default">$matches </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$match</span><span class="keyword">) </span><span class="default">$newmatches</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$match</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />        </span><span class="default">$matches </span><span class="keyword">= </span><span class="default">$new_matches</span><span class="keyword">;<br />    <br />        </span><span class="comment">// Your code here<br />        </span><span class="keyword">echo </span><span class="string">"Match number </span><span class="default">$match_count</span><span class="string">, at byte offset </span><span class="default">$match_start</span><span class="string">, </span><span class="default">$match_length</span><span class="string"> bytes long: "</span><span class="keyword">.</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="string">"\r\n"</span><span class="keyword">;<br />            <br />        </span><span class="comment">// Update offset to the end of the match<br />        </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$match_start </span><span class="keyword">+ </span><span class="default">$match_length</span><span class="keyword">;<br />    }<br /><br />    return </span><span class="default">$match_count</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span><br />Note that the offsets returned are byte values (not necessarily number of characters) so you'll have to make sure the data is single-byte encoded. (Or have a look at paolo mosna's strByte function on the strlen manual page).<br />I'd be interested to know how this method performs speedwise against using preg_match_all and then recursing through the results.</span></code></div>
  </div>
 </div>
  <div class="note" id="80681">  <div class="votes">
    <div id="Vu80681">
    <a href="https://www.php.net/manual/vote-note.php?id=80681&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd80681">
    <a href="https://www.php.net/manual/vote-note.php?id=80681&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V80681" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.preg-match-all.php.html#80681" class="name">
  <strong class="user"><em>dolbegraeb</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#80681"> &para;</a><div class="date" title="2008-01-28 04:30"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom80681">
<div class="phpcode"><code><span class="html">please note, that the function of "mail at SPAMBUSTER at milianw dot de" can result in invalid xhtml in some cases. think i used it in the right way but my result is sth like this:<br /><br />&lt;img src="./img.jpg" alt="nice picture" /&gt;foo foo foo foo &lt;/img&gt;<br /><br />correct me if i'm wrong. <br />i'll see when there's time to fix that. -.-</span></code></div>
  </div>
 </div>
  <div class="note" id="118345">  <div class="votes">
    <div id="Vu118345">
    <a href="https://www.php.net/manual/vote-note.php?id=118345&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd118345">
    <a href="https://www.php.net/manual/vote-note.php?id=118345&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V118345" title="0% like this...">
    -1
    </div>
  </div>
  <a href="function.preg-match-all.php.html#118345" class="name">
  <strong class="user"><em>matt at lvl99 dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#118345"> &para;</a><div class="date" title="2015-11-19 02:30"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom118345">
<div class="phpcode"><code><span class="html">I had been crafting and testing some regexp patterns online using the tools Regex101 and a `preg_match_all()` tester and found that the regexp patterns I wrote worked fine on them, just not in my code.<br /><br />My problem was not double-escaping backslash characters:<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">// Input test<br /></span><span class="default">$input </span><span class="keyword">= </span><span class="string">"\"something\",\"something here\",\"some\nnew\nlines\",\"this is the end\""</span><span class="keyword">;<br /><br /></span><span class="comment">// Work with online regexp testers, doesn't work in PHP<br /></span><span class="default">preg_match_all</span><span class="keyword">( </span><span class="string">"/(?:,|^)(?&lt;!\\)\".*?(?&lt;!\\)\"(?:(?=,)|$)/s"</span><span class="keyword">, </span><span class="default">$input</span><span class="keyword">, </span><span class="default">$matches </span><span class="keyword">);<br /><br /></span><span class="comment">/*<br />Outputs: NULL<br />*/<br /><br />// Works with online regexp testers, does work in PHP<br /></span><span class="default">preg_match_all</span><span class="keyword">( </span><span class="string">"/(?:,|^)(?&lt;!\\\\)\".*?(?&lt;!\\\\)\"(?:(?=,)|$)/s"</span><span class="keyword">, </span><span class="default">$input</span><span class="keyword">, </span><span class="default">$matches </span><span class="keyword">);<br /><br /></span><span class="comment">/*<br />Outputs:<br />array(2) {<br />  [0]=&gt;<br />  array(4) {<br />    [0]=&gt;<br />    string(11) ""something""<br />    [1]=&gt;<br />    string(17) ","something here""<br />    [2]=&gt;<br />    string(17) ","some<br />new<br />lines""<br />    [3]=&gt;<br />    string(18) ","this is the end""<br />  }<br />  [1]=&gt;<br />  array(4) {<br />    [0]=&gt;<br />    string(9) "something"<br />    [1]=&gt;<br />    string(14) "something here"<br />    [2]=&gt;<br />    string(14) "some<br />new<br />lines"<br />    [3]=&gt;<br />    string(15) "this is the end"<br />  }<br />}<br />*/<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="76027">  <div class="votes">
    <div id="Vu76027">
    <a href="https://www.php.net/manual/vote-note.php?id=76027&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd76027">
    <a href="https://www.php.net/manual/vote-note.php?id=76027&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V76027" title="45% like this...">
    -1
    </div>
  </div>
  <a href="function.preg-match-all.php.html#76027" class="name">
  <strong class="user"><em>phektus at gmail dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#76027"> &para;</a><div class="date" title="2007-06-26 11:22"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom76027">
<div class="phpcode"><code><span class="html">If you'd like to include DOUBLE QUOTES on a regular expression for use with preg_match_all, try ESCAPING THRICE, as in: \\\"<br /><br />For example, the pattern:<br />'/&lt;table&gt;[\s\w\/&lt;&gt;=\\\"]*&lt;\/table&gt;/'<br /><br />Should be able to match:<br />&lt;table&gt;<br />&lt;row&gt;<br />&lt;col align="left" valign="top"&gt;a&lt;/col&gt;<br />&lt;col align="right" valign="bottom"&gt;b&lt;/col&gt;<br />&lt;/row&gt;<br />&lt;/table&gt;<br />.. with all there is under those table tags.<br /><br />I'm not really sure why this is so, but I tried just the double quote and one or even two escape characters and it won't work. In my frustration I added another one and then it's cool.</span></code></div>
  </div>
 </div>
  <div class="note" id="93504">  <div class="votes">
    <div id="Vu93504">
    <a href="https://www.php.net/manual/vote-note.php?id=93504&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd93504">
    <a href="https://www.php.net/manual/vote-note.php?id=93504&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V93504" title="44% like this...">
    -1
    </div>
  </div>
  <a href="function.preg-match-all.php.html#93504" class="name">
  <strong class="user"><em>royaltm75 at gmail dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#93504"> &para;</a><div class="date" title="2009-09-13 02:44"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom93504">
<div class="phpcode"><code><span class="html">I have received complains, that my html2a() code (see below) doesn't work in some cases. <br />It is however not the problem with algorithm or procedure, but with PCRE recursive stack limits.<br /><br />If you use recursive PCRE (?R) you should remember to increase those two ini settings:<br /><br />ini_set('pcre.backtrack_limit', 10000000);<br />ini_set('pcre.recursion_limit', 10000000);<br /><br />But be warned: (from php.ini)<br /><br />;Please note that if you set this value to a high number you may consume all<br />;the available process stack and eventually crash PHP (due to reaching the<br />;stack size limit imposed by the Operating System).<br /><br />I have written this example mainly to demonstrate the power of PCRE LANGUAGE, not the power of it's implementation  :) <br /><br />But if you like it, use it, of course on your own risk.</span></code></div>
  </div>
 </div>
  <div class="note" id="114192">  <div class="votes">
    <div id="Vu114192">
    <a href="https://www.php.net/manual/vote-note.php?id=114192&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd114192">
    <a href="https://www.php.net/manual/vote-note.php?id=114192&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V114192" title="45% like this...">
    -3
    </div>
  </div>
  <a href="function.preg-match-all.php.html#114192" class="name">
  <strong class="user"><em>ajeet dot nigam at icfaitechweb dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#114192"> &para;</a><div class="date" title="2014-01-22 06:34"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom114192">
<div class="phpcode"><code><span class="html">Here <a href="http://tryphpregex.com/" rel="nofollow" target="_blank">http://tryphpregex.com/</a> is a  php based online regex editor which helps you test your regular expressions with real-time highlighting of regex match on data input.</span></code></div>
  </div>
 </div>
  <div class="note" id="114857">  <div class="votes">
    <div id="Vu114857">
    <a href="https://www.php.net/manual/vote-note.php?id=114857&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd114857">
    <a href="https://www.php.net/manual/vote-note.php?id=114857&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V114857" title="40% like this...">
    -1
    </div>
  </div>
  <a href="function.preg-match-all.php.html#114857" class="name">
  <strong class="user"><em>DarkSide</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#114857"> &para;</a><div class="date" title="2014-04-15 02:03"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom114857">
<div class="phpcode"><code><span class="html">This is very useful to combine matches:<br />$a = array_combine($matches[1], $matches[2]);</span></code></div>
  </div>
 </div>
  <div class="note" id="105853">  <div class="votes">
    <div id="Vu105853">
    <a href="https://www.php.net/manual/vote-note.php?id=105853&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd105853">
    <a href="https://www.php.net/manual/vote-note.php?id=105853&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V105853" title="42% like this...">
    -3
    </div>
  </div>
  <a href="function.preg-match-all.php.html#105853" class="name">
  <strong class="user"><em>satyavvd at ymail dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#105853"> &para;</a><div class="date" title="2011-09-20 04:08"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom105853">
<div class="phpcode"><code><span class="html">Extract fields out of csv string : ( since before php5.3 you can't use str_getcsv function ) <br />Here is the regex :<br /><br /><span class="default">&lt;?php<br /><br />$csvData </span><span class="keyword">= &lt;&lt;&lt;EOF<br /></span><span class="string">10,'20',"30","'40","'50'","\"60","70,80","09\\/18,/\"2011",'a,sdfcd'<br /></span><span class="keyword">EOF<br /><br /></span><span class="default">$reg </span><span class="keyword">= &lt;&lt;&lt;EOF<br /></span><span class="string">/<br />    (<br />        (<br />            ([\'\"])<br />            (<br />               ( <br />                [^\'\"]<br />                |<br />                (\\\\.)<br />               )*<br />            )<br />            (\\3)<br />            |<br />            (<br />                [^,]<br />                |<br />                (\\\\.)<br />            )*<br />    ),)<br />    /x<br /></span><span class="keyword">EOF;<br /><br /></span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$reg</span><span class="keyword">,</span><span class="default">$csvData</span><span class="keyword">,</span><span class="default">$matches</span><span class="keyword">);<br /><br /></span><span class="comment">// to extract csv fields<br /></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="89092">  <div class="votes">
    <div id="Vu89092">
    <a href="https://www.php.net/manual/vote-note.php?id=89092&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd89092">
    <a href="https://www.php.net/manual/vote-note.php?id=89092&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V89092" title="37% like this...">
    -2
    </div>
  </div>
  <a href="function.preg-match-all.php.html#89092" class="name">
  <strong class="user"><em>royaltm75 at NOSPAM dot gmail dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#89092"> &para;</a><div class="date" title="2009-02-21 02:55"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom89092">
<div class="phpcode"><code><span class="html">The power of pregs is limited only by your *imagination* :)<br />I wrote this html2a() function using preg recursive match (?R) which provides quite safe and bulletproof html/xml extraction:<br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">html2a </span><span class="keyword">( </span><span class="default">$html </span><span class="keyword">) {<br />  if ( !</span><span class="default">preg_match_all</span><span class="keyword">( </span><span class="string">'<br />@<br />\&lt;\s*?(\w+)((?:\b(?:\'[^\']*\'|"[^"]*"|[^\&gt;])*)?)\&gt;<br />((?:(?&gt;[^\&lt;]*)|(?R))*)<br />\&lt;\/\s*?\\1(?:\b[^\&gt;]*)?\&gt;<br />|\&lt;\s*(\w+)(\b(?:\'[^\']*\'|"[^"]*"|[^\&gt;])*)?\/?\&gt;<br />@uxis'</span><span class="keyword">, </span><span class="default">$html </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$html</span><span class="keyword">), </span><span class="default">$m</span><span class="keyword">, </span><span class="default">PREG_OFFSET_CAPTURE </span><span class="keyword">| </span><span class="default">PREG_SET_ORDER</span><span class="keyword">) )<br />    return </span><span class="default">$html</span><span class="keyword">;<br />  </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />  </span><span class="default">$ret </span><span class="keyword">= array();<br />  foreach (</span><span class="default">$m </span><span class="keyword">as </span><span class="default">$set</span><span class="keyword">) {<br />    if ( </span><span class="default">strlen</span><span class="keyword">( </span><span class="default">$val </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">( </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$html</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$set</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] - </span><span class="default">$i</span><span class="keyword">) ) ) )<br />      </span><span class="default">$ret</span><span class="keyword">[] = </span><span class="default">$val</span><span class="keyword">;<br />    </span><span class="default">$val </span><span class="keyword">= </span><span class="default">$set</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] &lt; </span><span class="default">0 <br />      </span><span class="keyword">? array( </span><span class="string">'tag' </span><span class="keyword">=&gt; </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$set</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]) )<br />      : array( </span><span class="string">'tag' </span><span class="keyword">=&gt; </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$set</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]), </span><span class="string">'val' </span><span class="keyword">=&gt; </span><span class="default">html2a</span><span class="keyword">(</span><span class="default">$set</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]) );<br />    if ( </span><span class="default">preg_match_all</span><span class="keyword">( </span><span class="string">'<br />/(\w+)\s*(?:=\s*(?:"([^"]*)"|\'([^\']*)\'|(\w+)))?/usix<br />'</span><span class="keyword">, isset(</span><span class="default">$set</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">]) &amp;&amp; </span><span class="default">$set</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] &lt; </span><span class="default">0<br />  </span><span class="keyword">? </span><span class="default">$set</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]<br />  : </span><span class="default">$set</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]<br />  ,</span><span class="default">$attrs</span><span class="keyword">, </span><span class="default">PREG_SET_ORDER </span><span class="keyword">) ) {<br />      foreach (</span><span class="default">$attrs </span><span class="keyword">as </span><span class="default">$a</span><span class="keyword">) {<br />        </span><span class="default">$val</span><span class="keyword">[</span><span class="string">'attr'</span><span class="keyword">][</span><span class="default">$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]]=</span><span class="default">$a</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">];<br />      }<br />    }<br />    </span><span class="default">$ret</span><span class="keyword">[] = </span><span class="default">$val</span><span class="keyword">;<br />    </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$set</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">]+</span><span class="default">strlen</span><span class="keyword">( </span><span class="default">$set</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] );<br />  }<br />  </span><span class="default">$l </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$html</span><span class="keyword">);<br />  if ( </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$l </span><span class="keyword">)<br />    if ( </span><span class="default">strlen</span><span class="keyword">( </span><span class="default">$val </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">( </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$html</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$l </span><span class="keyword">- </span><span class="default">$i </span><span class="keyword">) ) ) )<br />      </span><span class="default">$ret</span><span class="keyword">[] = </span><span class="default">$val</span><span class="keyword">;<br />  return </span><span class="default">$ret</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span><br />Now let's try it with this example: (there are some really nasty xhtml compliant bugs, but ... we shouldn't worry)<br /><br /><span class="default">&lt;?php<br />$html </span><span class="keyword">= &lt;&lt;&lt;EOT<br /></span><span class="string">some leftover text...<br />     &lt; DIV class=noCompliant style = "text-align:left;" &gt;<br />... and some other ...<br />&lt; dIv &gt; &lt; empty&gt;  &lt;/ empty&gt;<br />  &lt;p&gt; This is yet another text &lt;br  &gt;<br />     that wasn't &lt;b&gt;compliant&lt;/b&gt; too... &lt;br   /&gt;<br />     &lt;/p&gt;<br /> &lt;div class="noClass" &gt; this one is better but we don't care anyway &lt;/div &gt;&lt;P&gt;<br />    &lt;input   type= "text"  name ='my "name' value  = "nothin really." readonly&gt;<br />end of paragraph &lt;/p&gt; &lt;/Div&gt;   &lt;/div&gt;   some trailing text <br /></span><span class="keyword">EOT;<br /><br /></span><span class="default">$a </span><span class="keyword">= </span><span class="default">html2a</span><span class="keyword">(</span><span class="default">$html</span><span class="keyword">);<br /></span><span class="comment">//now we will make some neat html out of it<br /></span><span class="keyword">echo </span><span class="default">a2html</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br /><br />function </span><span class="default">a2html </span><span class="keyword">( </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$in </span><span class="keyword">= </span><span class="string">"" </span><span class="keyword">) {<br />  if ( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) ) {<br />    </span><span class="default">$s </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />    foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$t</span><span class="keyword">)<br />      if ( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">) ) {<br />        </span><span class="default">$attrs</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">; <br />        if ( isset(</span><span class="default">$t</span><span class="keyword">[</span><span class="string">'attr'</span><span class="keyword">]) )<br />          foreach( </span><span class="default">$t</span><span class="keyword">[</span><span class="string">'attr'</span><span class="keyword">] as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v </span><span class="keyword">)<br />            </span><span class="default">$attrs</span><span class="keyword">.=</span><span class="string">" </span><span class="keyword">${</span><span class="default">k</span><span class="keyword">}</span><span class="string">="</span><span class="keyword">.( </span><span class="default">strpos</span><span class="keyword">( </span><span class="default">$v</span><span class="keyword">, </span><span class="string">'"' </span><span class="keyword">)!==</span><span class="default">false </span><span class="keyword">? </span><span class="string">"'</span><span class="default">$v</span><span class="string">'" </span><span class="keyword">: </span><span class="string">"\"</span><span class="default">$v</span><span class="string">\"" </span><span class="keyword">);<br />        </span><span class="default">$s</span><span class="keyword">.= </span><span class="default">$in</span><span class="keyword">.</span><span class="string">"&lt;"</span><span class="keyword">.</span><span class="default">$t</span><span class="keyword">[</span><span class="string">'tag'</span><span class="keyword">].</span><span class="default">$attrs</span><span class="keyword">.( isset( </span><span class="default">$t</span><span class="keyword">[</span><span class="string">'val'</span><span class="keyword">] ) ? </span><span class="string">"&gt;\n"</span><span class="keyword">.</span><span class="default">a2html</span><span class="keyword">( </span><span class="default">$t</span><span class="keyword">[</span><span class="string">'val'</span><span class="keyword">], </span><span class="default">$in</span><span class="keyword">.</span><span class="string">"  " </span><span class="keyword">).</span><span class="default">$in</span><span class="keyword">.</span><span class="string">"&lt;/"</span><span class="keyword">.</span><span class="default">$t</span><span class="keyword">[</span><span class="string">'tag'</span><span class="keyword">] : </span><span class="string">"/" </span><span class="keyword">).</span><span class="string">"&gt;\n"</span><span class="keyword">;<br />      } else<br />        </span><span class="default">$s</span><span class="keyword">.= </span><span class="default">$in</span><span class="keyword">.</span><span class="default">$t</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />  } else {<br />    </span><span class="default">$s </span><span class="keyword">= empty(</span><span class="default">$a</span><span class="keyword">) ? </span><span class="string">"" </span><span class="keyword">: </span><span class="default">$in</span><span class="keyword">.</span><span class="default">$a</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />  }<br />  return </span><span class="default">$s</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span>This produces:<br />some leftover text...<br />&lt;div class="noCompliant" style="text-align:left;"&gt;<br />  ... and some other ...<br />  &lt;div&gt;<br />    &lt;empty&gt;<br />    &lt;/empty&gt;<br />    &lt;p&gt;<br />      This is yet another text<br />      &lt;br/&gt;<br />      that wasn't<br />      &lt;b&gt;<br />        compliant<br />      &lt;/b&gt;<br />      too...<br />      &lt;br/&gt;<br />    &lt;/p&gt;<br />    &lt;div class="noClass"&gt;<br />      this one is better but we don't care anyway<br />    &lt;/div&gt;<br />    &lt;p&gt;<br />      &lt;input type="text" name='my "name' value="nothin really." readonly="readonly"/&gt;<br />      end of paragraph<br />    &lt;/p&gt;<br />  &lt;/div&gt;<br />&lt;/div&gt;<br />some trailing text</span></code></div>
  </div>
 </div>
  <div class="note" id="76388">  <div class="votes">
    <div id="Vu76388">
    <a href="https://www.php.net/manual/vote-note.php?id=76388&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd76388">
    <a href="https://www.php.net/manual/vote-note.php?id=76388&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V76388" title="37% like this...">
    -2
    </div>
  </div>
  <a href="function.preg-match-all.php.html#76388" class="name">
  <strong class="user"><em>mr davin</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#76388"> &para;</a><div class="date" title="2007-07-12 02:57"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom76388">
<div class="phpcode"><code><span class="html"><span class="default">&lt;?php<br /></span><span class="comment">// Returns an array of strings where the start and end are found<br />    </span><span class="keyword">function </span><span class="default">findinside</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">) {<br />        </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'/' </span><span class="keyword">. </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">) . </span><span class="string">'([^\.)]+)'</span><span class="keyword">. </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$end</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">).</span><span class="string">'/i'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">);<br />        return </span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />    }<br />    <br />    </span><span class="default">$start </span><span class="keyword">= </span><span class="string">"mary has"</span><span class="keyword">;<br />    </span><span class="default">$end </span><span class="keyword">= </span><span class="string">"lambs."</span><span class="keyword">;<br />    </span><span class="default">$string </span><span class="keyword">= </span><span class="string">"mary has 6 lambs. phil has 13 lambs. mary stole phil's lambs. now mary has all the lambs."</span><span class="keyword">;<br /><br />    </span><span class="default">$out </span><span class="keyword">= </span><span class="default">findinside</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br /><br />    </span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">);<br /><br /></span><span class="comment">/* Results in <br />(<br />    [0] =&gt;  6 <br />    [1] =&gt;  all the <br />)<br />*/ <br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="117352">  <div class="votes">
    <div id="Vu117352">
    <a href="https://www.php.net/manual/vote-note.php?id=117352&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117352">
    <a href="https://www.php.net/manual/vote-note.php?id=117352&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117352" title="33% like this...">
    -2
    </div>
  </div>
  <a href="function.preg-match-all.php.html#117352" class="name">
  <strong class="user"><em>vojjov dot artem at ya dot ru</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#117352"> &para;</a><div class="date" title="2015-05-26 03:40"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom117352">
<div class="phpcode"><code><span class="html">// Here is function that allows you to preg_match_all array of patters<br /><br />function getMatches($pattern, $subject) {<br />    $matches = array();<br /><br />    if (is_array($pattern)) {<br />        foreach ($pattern as $p) {<br />            $m = getMatches($p, $subject);<br /><br />            foreach ($m as $key =&gt; $match) {<br />                if (isset($matches[$key])) {<br />                    $matches[$key] = array_merge($matches[$key], $m[$key]);    <br />                } else {<br />                    $matches[$key] = $m[$key];<br />                }<br />            }<br />        }<br />    } else {<br />        preg_match_all($pattern, $subject, $matches);<br />    }<br /><br />    return $matches;<br />}<br /><br />$patterns = array(<br />    '/&lt;span&gt;(.*?)&lt;\/span&gt;/',<br />    '/&lt;a href=".*?"&gt;(.*?)&lt;\/a&gt;/'<br />);<br /><br />$html = '&lt;span&gt;some text&lt;/span&gt;';<br />$html .= '&lt;span&gt;some text in another span&lt;/span&gt;';<br />$html .= '&lt;a href="path/"&gt;here is the link&lt;/a&gt;';<br />$html .= '&lt;address&gt;address is here&lt;/address&gt;';<br />$html .= '&lt;span&gt;here is one more span&lt;/span&gt;';<br /><br />$matches = getMatches($patterns, $html);<br /><br />print_r($matches); // result is below<br /><br />/*<br />Array<br />(<br />    [0] =&gt; Array<br />        (<br />            [0] =&gt; &lt;span&gt;some text&lt;/span&gt;<br />            [1] =&gt; &lt;span&gt;some text in another span&lt;/span&gt;<br />            [2] =&gt; &lt;span&gt;here is one more span&lt;/span&gt;<br />            [3] =&gt; &lt;a href="path/"&gt;here is the link&lt;/a&gt;<br />        )<br /><br />    [1] =&gt; Array<br />        (<br />            [0] =&gt; some text<br />            [1] =&gt; some text in another span<br />            [2] =&gt; here is one more span<br />            [3] =&gt; here is the link<br />        )<br /><br />)<br />*/</span></code></div>
  </div>
 </div>
  <div class="note" id="93694">  <div class="votes">
    <div id="Vu93694">
    <a href="https://www.php.net/manual/vote-note.php?id=93694&amp;page=function.preg-match-all&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd93694">
    <a href="https://www.php.net/manual/vote-note.php?id=93694&amp;page=function.preg-match-all&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V93694" title="33% like this...">
    -4
    </div>
  </div>
  <a href="function.preg-match-all.php.html#93694" class="name">
  <strong class="user"><em>avengis at gmail dot com</em></strong></a><a class="genanchor" href="function.preg-match-all.php.html#93694"> &para;</a><div class="date" title="2009-09-23 02:25"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom93694">
<div class="phpcode"><code><span class="html">The next function works with almost any complex xml/xhtml string<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">/**<br />* Find and close unclosed xml tags<br />**/<br /></span><span class="keyword">function </span><span class="default">close_tags</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) {<br />    </span><span class="default">$patt_open    </span><span class="keyword">= </span><span class="string">"%((?&lt;!&lt;/)(?&lt;=&lt;)[\s]*[^/!&gt;\s]+(?=&gt;|[\s]+[^&gt;]*[^/]&gt;)(?!/&gt;))%"</span><span class="keyword">;<br />    </span><span class="default">$patt_close    </span><span class="keyword">= </span><span class="string">"%((?&lt;=&lt;/)([^&gt;]+)(?=&gt;))%"</span><span class="keyword">;<br />    if (</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$patt_open</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$matches</span><span class="keyword">))<br />    {<br />        </span><span class="default">$m_open </span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />        if(!empty(</span><span class="default">$m_open</span><span class="keyword">))<br />        {<br />            </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$patt_close</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$matches2</span><span class="keyword">);<br />            </span><span class="default">$m_close </span><span class="keyword">= </span><span class="default">$matches2</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />            if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$m_open</span><span class="keyword">) &gt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$m_close</span><span class="keyword">))<br />            {<br />                </span><span class="default">$m_open </span><span class="keyword">= </span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">$m_open</span><span class="keyword">);<br />                foreach (</span><span class="default">$m_close </span><span class="keyword">as </span><span class="default">$tag</span><span class="keyword">) </span><span class="default">$c_tags</span><span class="keyword">[</span><span class="default">$tag</span><span class="keyword">]++;<br />                foreach (</span><span class="default">$m_open </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$tag</span><span class="keyword">)    if (</span><span class="default">$c_tags</span><span class="keyword">[</span><span class="default">$tag</span><span class="keyword">]--&lt;=</span><span class="default">0</span><span class="keyword">) </span><span class="default">$text</span><span class="keyword">.=</span><span class="string">'&lt;/'</span><span class="keyword">.</span><span class="default">$tag</span><span class="keyword">.</span><span class="string">'&gt;'</span><span class="keyword">;<br />            }<br />        }<br />    }<br />    return </span><span class="default">$text</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.preg-match-all&amp;redirect=https://www.php.net/manual/ru/function.preg-match-all.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.pcre.php.html">Функции PCRE</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.preg-filter.php.html" title="preg_&#8203;filter">preg_&#8203;filter</a>
                        </li>
                                                <li class="">
                            <a href="function.preg-grep.php.html" title="preg_&#8203;grep">preg_&#8203;grep</a>
                        </li>
                                                <li class="">
                            <a href="function.preg-last-error-msg.php.html" title="preg_&#8203;last_&#8203;error_&#8203;msg">preg_&#8203;last_&#8203;error_&#8203;msg</a>
                        </li>
                                                <li class="">
                            <a href="function.preg-last-error.php.html" title="preg_&#8203;last_&#8203;error">preg_&#8203;last_&#8203;error</a>
                        </li>
                                                <li class="current">
                            <a href="function.preg-match-all.php.html" title="preg_&#8203;match_&#8203;all">preg_&#8203;match_&#8203;all</a>
                        </li>
                                                <li class="">
                            <a href="function.preg-match.php.html" title="preg_&#8203;match">preg_&#8203;match</a>
                        </li>
                                                <li class="">
                            <a href="function.preg-quote.php.html" title="preg_&#8203;quote">preg_&#8203;quote</a>
                        </li>
                                                <li class="">
                            <a href="function.preg-replace-callback-array.php.html" title="preg_&#8203;replace_&#8203;callback_&#8203;array">preg_&#8203;replace_&#8203;callback_&#8203;array</a>
                        </li>
                                                <li class="">
                            <a href="function.preg-replace-callback.php.html" title="preg_&#8203;replace_&#8203;callback">preg_&#8203;replace_&#8203;callback</a>
                        </li>
                                                <li class="">
                            <a href="function.preg-replace.php.html" title="preg_&#8203;replace">preg_&#8203;replace</a>
                        </li>
                                                <li class="">
                            <a href="function.preg-split.php.html" title="preg_&#8203;split">preg_&#8203;split</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
