<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: readline_completion_function - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.readline-completion-function.php.html">
 <link rel="shorturl" href="https://www.php.net/readline-completion-function">
 <link rel="alternate" href="https://www.php.net/readline-completion-function" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.readline.php.html">
 <link rel="prev" href="function.readline-clear-history.php.html">
 <link rel="next" href="function.readline-info.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.readline-completion-function.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.readline-completion-function.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.readline-completion-function.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.readline-completion-function.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.readline-completion-function.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.readline-completion-function.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.readline-completion-function.php" hreflang="pt_BR">
 <link rel="alternate" href="function.readline-completion-function.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.readline-completion-function.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.readline-completion-function.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.readline-info.php.html">
          readline_info &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.readline-clear-history.php.html">
          &laquo; readline_clear_history        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.utilspec.cmdline.php.html'>Модули для работы с командной строкой</a></li>      <li><a href='book.readline.php.html'>Readline</a></li>      <li><a href='ref.readline.php.html'>Функции Readline</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.readline-completion-function.php'>English</option>
            <option value='de/function.readline-completion-function.php'>German</option>
            <option value='es/function.readline-completion-function.php'>Spanish</option>
            <option value='fr/function.readline-completion-function.php'>French</option>
            <option value='it/function.readline-completion-function.php'>Italian</option>
            <option value='ja/function.readline-completion-function.php'>Japanese</option>
            <option value='pt_BR/function.readline-completion-function.php'>Brazilian Portuguese</option>
            <option value='ru/function.readline-completion-function.php' selected="selected">Russian</option>
            <option value='tr/function.readline-completion-function.php'>Turkish</option>
            <option value='zh/function.readline-completion-function.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/readline/functions/readline-completion-function.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.readline-completion-function%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.readline-completion-function" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">readline_completion_function</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">readline_completion_function</span> &mdash; <span class="dc-title">Зарегистрировать функцию автодополнения</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.readline-completion-function-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>readline_completion_function</strong></span>(<span class="methodparam"><span class="type"><a href="language.types.callable.php.html" class="type callable">callable</a></span> <code class="parameter">$callback</code></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   Функция регистрирует функцию автодополнения. Это то же самое, как если
   вы нажимаете табуляцию в Bash и строка дополняется наиболее подходящим текстом.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.readline-completion-function-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">callback</code></dt>

     <dd>

      <p class="para">
       Имя функции, которая принимает строку и возвращает массив
       подходящих совпадений.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.readline-completion-function-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает <strong><code>true</code></strong> в случае успешного выполнения или <strong><code>false</code></strong> в случае возникновения ошибки.
  </p>
 </div>

</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.readline-completion-function&amp;redirect=https://www.php.net/manual/ru/function.readline-completion-function.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">6 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="94855">  <div class="votes">
    <div id="Vu94855">
    <a href="https://www.php.net/manual/vote-note.php?id=94855&amp;page=function.readline-completion-function&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd94855">
    <a href="https://www.php.net/manual/vote-note.php?id=94855&amp;page=function.readline-completion-function&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V94855" title="84% like this...">
    9
    </div>
  </div>
  <a href="function.readline-completion-function.php.html#94855" class="name">
  <strong class="user"><em>chris AT w3style DOT co  UK</em></strong></a><a class="genanchor" href="function.readline-completion-function.php.html#94855"> &para;</a><div class="date" title="2009-11-28 08:39"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom94855">
<div class="phpcode"><code><span class="html">A little bit of info regarding useful variables when writing your callback function.<br /><br />There doesn't seem to be a way to set rl_basic_word_break_characters like with the pure C library, so as previous users have pointed out you'll only receive the current word in the input buffer within your callback.  If for example you're typing "big bro|ther", where the bar is the position of your cursor when you hit TAB, you'll receive (string) "brother" and (int) 4 as your callback parameters.<br /><br />However, it is possible (easily) to get more useful information about what the user has typed into the readline buffer.  readline_info() is key here.  It will return an array containing:<br /><br />"line_buffer" =&gt; (string)<br />   the entire contents of the line buffer (+ some bugs**)<br /><br />"point" =&gt; (int)<br />   the current position of the cursor in the buffer<br /><br />"end" =&gt; (int)<br />   the position of the last character in the buffer<br /><br />So for the example above you'd get:<br /><br />  * line_buffer =&gt; "big brother"<br />  * point =&gt; 7<br />  * end =&gt; 11<br /><br />From this you can easily perform multi-word matches.<br /><br />** NOTE: line_buffer seems to contain spurious data at the end of the string sometime.  Fortunately since $end is provided you can substr() it to get the correct value.<br /><br />The matches you need to return are full words that can replace $input, so your algorithm might crudely look something like:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">function </span><span class="default">your_callback</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">) {<br />  </span><span class="comment">// Get info about the current buffer<br />  </span><span class="default">$rl_info </span><span class="keyword">= </span><span class="default">readline_info</span><span class="keyword">();<br />  <br />  </span><span class="comment">// Figure out what the entire input is<br />  </span><span class="default">$full_input </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$rl_info</span><span class="keyword">[</span><span class="string">'line_buffer'</span><span class="keyword">], </span><span class="default">0</span><span class="keyword">, </span><span class="default">$rl_info</span><span class="keyword">[</span><span class="string">'end'</span><span class="keyword">]);<br />  <br />  </span><span class="default">$matches </span><span class="keyword">= array();<br />  <br />  </span><span class="comment">// Get all matches based on the entire input buffer<br />  </span><span class="keyword">foreach (</span><span class="default">phrases_that_begin_with</span><span class="keyword">(</span><span class="default">$full_input</span><span class="keyword">) as </span><span class="default">$phrase</span><span class="keyword">) {<br />    </span><span class="comment">// Only add the end of the input (where this word begins)<br />    // to the matches array<br />    </span><span class="default">$matches</span><span class="keyword">[] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$phrase</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">);<br />  }<br />  <br />  return </span><span class="default">$matches</span><span class="keyword">;<br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="117110">  <div class="votes">
    <div id="Vu117110">
    <a href="https://www.php.net/manual/vote-note.php?id=117110&amp;page=function.readline-completion-function&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117110">
    <a href="https://www.php.net/manual/vote-note.php?id=117110&amp;page=function.readline-completion-function&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117110" title="66% like this...">
    2
    </div>
  </div>
  <a href="function.readline-completion-function.php.html#117110" class="name">
  <strong class="user"><em>cameron at cloudix dot co dot nz</em></strong></a><a class="genanchor" href="function.readline-completion-function.php.html#117110"> &para;</a><div class="date" title="2015-04-16 03:36"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom117110">
<div class="phpcode"><code><span class="html">The readline extension can be a bit flakey due to bugs in libedit (PHP 5.3.10-1ubuntu3.15 with Suhosin-Patch (cli) (built: Oct 29 2014 12:19:04)).<br /><br />I created many segfaults returning an empty array on the autocompletion function:<br /><br />// Autocomplete<br />readline_completion_function(function($Input, $Index){<br />    <br />    global $Commands;<br />    <br />    // Filter Matches    <br />    $Matches = array();<br />    foreach(array_keys($Commands) as $Command)<br />        if(stripos($Command, $Input) === 0)<br />            $Matches[] = $Command;<br />    <br />    return $Matches;<br />});<br /><br />I found adding an empty string to the matches array prevents the segfault:<br /><br />// Autocomplete<br />readline_completion_function(function($Input, $Index){<br />    <br />    global $Commands;<br />    <br />    // Filter Matches    <br />    $Matches = array();<br />    foreach(array_keys($Commands) as $Command)<br />        if(stripos($Command, $Input) === 0)<br />            $Matches[] = $Command;<br />    <br />    // Prevent Segfault<br />    if($Matches == false)<br />        $Matches[] = '';<br />    <br />    return $Matches;<br />});<br /><br />Hopefully this is helpful to someone.</span></code></div>
  </div>
 </div>
  <div class="note" id="128978">  <div class="votes">
    <div id="Vu128978">
    <a href="https://www.php.net/manual/vote-note.php?id=128978&amp;page=function.readline-completion-function&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd128978">
    <a href="https://www.php.net/manual/vote-note.php?id=128978&amp;page=function.readline-completion-function&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V128978" title="no votes...">
    0
    </div>
  </div>
  <a href="function.readline-completion-function.php.html#128978" class="name">
  <strong class="user"><em>i dot a dot belousov dot 88 at gmail dot com</em></strong></a><a class="genanchor" href="function.readline-completion-function.php.html#128978"> &para;</a><div class="date" title="2023-10-23 04:06"><strong>3 months ago</strong></div>
  <div class="text" id="Hcom128978">
<div class="phpcode"><code><span class="html">If you want to use autocomplete also for history, you can make it like this:<br /><br />readline_completion_function(function($input, $index) {<br />    $matches = [];<br /><br />    foreach(readline_list_history() as $match)<br />        if (mb_strpos($match, readline_info("line_buffer")) !== false)<br />            $matches[] = mb_substr($match, $index);<br /><br />    return (count($matches) &gt; 1 &amp;&amp; $index) ? [] : $matches;<br />});</span></code></div>
  </div>
 </div>
  <div class="note" id="91769">  <div class="votes">
    <div id="Vu91769">
    <a href="https://www.php.net/manual/vote-note.php?id=91769&amp;page=function.readline-completion-function&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd91769">
    <a href="https://www.php.net/manual/vote-note.php?id=91769&amp;page=function.readline-completion-function&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V91769" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.readline-completion-function.php.html#91769" class="name">
  <strong class="user"><em>overshoot.tv</em></strong></a><a class="genanchor" href="function.readline-completion-function.php.html#91769"> &para;</a><div class="date" title="2009-06-25 12:07"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom91769">
<div class="phpcode"><code><span class="html">Note: the first argument passed to the registered function is NOT the whole command line as entered by the user, but only the last part, i.e. the part after the last space.<br /><br />e.g.:<br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">my_readline_completion_function</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">) {<br />  </span><span class="comment">// If the user is typing:<br />  // mv file.txt directo[TAB]<br />  // then:<br />  // $string = directo<br />  // the $index is the place of the cursor in the line:<br />  // $index = 19; <br /><br />  </span><span class="default">$array </span><span class="keyword">= array(<br />    </span><span class="string">'ls'</span><span class="keyword">,<br />    </span><span class="string">'mv'</span><span class="keyword">,<br />    </span><span class="string">'dar'</span><span class="keyword">,<br />    </span><span class="string">'exit'</span><span class="keyword">,<br />    </span><span class="string">'quit'</span><span class="keyword">,<br />  );<br /><br />  </span><span class="comment">// Here, I decide not to return filename autocompletion for the first argument (0th argument).<br />  </span><span class="keyword">if (</span><span class="default">$index</span><span class="keyword">) {<br />    </span><span class="default">$ls </span><span class="keyword">= `</span><span class="string">ls</span><span class="keyword">`;<br />    </span><span class="default">$lines </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$ls</span><span class="keyword">);<br />    foreach (</span><span class="default">$lines </span><span class="keyword">AS </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$line</span><span class="keyword">) {<br />      if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">)) {<br />        </span><span class="default">$lines</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] .= </span><span class="string">'/'</span><span class="keyword">;<br />      }<br />      </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$lines</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />    }<br />  }<br />  </span><span class="comment">// This will return both our list of functions, and, possibly, a list of files in the current filesystem.<br /> // php will filter itself according to what the user is typing.<br />  </span><span class="keyword">return </span><span class="default">$array</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="25387">  <div class="votes">
    <div id="Vu25387">
    <a href="https://www.php.net/manual/vote-note.php?id=25387&amp;page=function.readline-completion-function&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd25387">
    <a href="https://www.php.net/manual/vote-note.php?id=25387&amp;page=function.readline-completion-function&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V25387" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.readline-completion-function.php.html#25387" class="name">
  <strong class="user"><em>john at weider dot cc</em></strong></a><a class="genanchor" href="function.readline-completion-function.php.html#25387"> &para;</a><div class="date" title="2002-09-21 09:32"><strong>21 years ago</strong></div>
  <div class="text" id="Hcom25387">
<div class="phpcode"><code><span class="html">It seems that the registered function can accept 2 parameters, the first being the partial string, the second a number that when equal to zero indicates that the tab was hit on the first argument on the input. Otherwise it looks like the position within the string is returned.<br /><br />This is neccessary information for processing shell command line input.</span></code></div>
  </div>
 </div>
  <div class="note" id="49566">  <div class="votes">
    <div id="Vu49566">
    <a href="https://www.php.net/manual/vote-note.php?id=49566&amp;page=function.readline-completion-function&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd49566">
    <a href="https://www.php.net/manual/vote-note.php?id=49566&amp;page=function.readline-completion-function&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V49566" title="33% like this...">
    -3
    </div>
  </div>
  <a href="function.readline-completion-function.php.html#49566" class="name">
  <strong class="user"><em>david at acz dot org</em></strong></a><a class="genanchor" href="function.readline-completion-function.php.html#49566"> &para;</a><div class="date" title="2005-02-01 12:08"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom49566">
<div class="phpcode"><code><span class="html">This function can simply return an array of all possible matches (regardless of the current user intput) and readline will handle the matching itself.  This is likely to be much faster than attempting to handle partial matches in PHP.</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.readline-completion-function&amp;redirect=https://www.php.net/manual/ru/function.readline-completion-function.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.readline.php.html">Функции Readline</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.readline-add-history.php.html" title="readline_&#8203;add_&#8203;history">readline_&#8203;add_&#8203;history</a>
                        </li>
                                                <li class="">
                            <a href="function.readline-callback-handler-install.php.html" title="readline_&#8203;callback_&#8203;handler_&#8203;install">readline_&#8203;callback_&#8203;handler_&#8203;install</a>
                        </li>
                                                <li class="">
                            <a href="function.readline-callback-handler-remove.php.html" title="readline_&#8203;callback_&#8203;handler_&#8203;remove">readline_&#8203;callback_&#8203;handler_&#8203;remove</a>
                        </li>
                                                <li class="">
                            <a href="function.readline-callback-read-char.php.html" title="readline_&#8203;callback_&#8203;read_&#8203;char">readline_&#8203;callback_&#8203;read_&#8203;char</a>
                        </li>
                                                <li class="">
                            <a href="function.readline-clear-history.php.html" title="readline_&#8203;clear_&#8203;history">readline_&#8203;clear_&#8203;history</a>
                        </li>
                                                <li class="current">
                            <a href="function.readline-completion-function.php.html" title="readline_&#8203;completion_&#8203;function">readline_&#8203;completion_&#8203;function</a>
                        </li>
                                                <li class="">
                            <a href="function.readline-info.php.html" title="readline_&#8203;info">readline_&#8203;info</a>
                        </li>
                                                <li class="">
                            <a href="function.readline-list-history.php.html" title="readline_&#8203;list_&#8203;history">readline_&#8203;list_&#8203;history</a>
                        </li>
                                                <li class="">
                            <a href="function.readline-on-new-line.php.html" title="readline_&#8203;on_&#8203;new_&#8203;line">readline_&#8203;on_&#8203;new_&#8203;line</a>
                        </li>
                                                <li class="">
                            <a href="function.readline-read-history.php.html" title="readline_&#8203;read_&#8203;history">readline_&#8203;read_&#8203;history</a>
                        </li>
                                                <li class="">
                            <a href="function.readline-redisplay.php.html" title="readline_&#8203;redisplay">readline_&#8203;redisplay</a>
                        </li>
                                                <li class="">
                            <a href="function.readline-write-history.php.html" title="readline_&#8203;write_&#8203;history">readline_&#8203;write_&#8203;history</a>
                        </li>
                                                <li class="">
                            <a href="function.readline.php.html" title="readline">readline</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
