<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: set_time_limit - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.set-time-limit.php.html">
 <link rel="shorturl" href="https://www.php.net/set-time-limit">
 <link rel="alternate" href="https://www.php.net/set-time-limit" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.info.php.html">
 <link rel="prev" href="function.set-include-path.php.html">
 <link rel="next" href="function.sys-get-temp-dir.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.set-time-limit.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.set-time-limit.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.set-time-limit.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.set-time-limit.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.set-time-limit.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.set-time-limit.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.set-time-limit.php" hreflang="pt_BR">
 <link rel="alternate" href="function.set-time-limit.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.set-time-limit.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.set-time-limit.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.sys-get-temp-dir.php.html">
          sys_get_temp_dir &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.set-include-path.php.html">
          &laquo; set_include_path        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.basic.php.php.html'>Изменение поведения PHP</a></li>      <li><a href='book.info.php.html'>Опции/информация PHP</a></li>      <li><a href='ref.info.php.html'>Опции PHP/информационные функции</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.set-time-limit.php'>English</option>
            <option value='de/function.set-time-limit.php'>German</option>
            <option value='es/function.set-time-limit.php'>Spanish</option>
            <option value='fr/function.set-time-limit.php'>French</option>
            <option value='it/function.set-time-limit.php'>Italian</option>
            <option value='ja/function.set-time-limit.php'>Japanese</option>
            <option value='pt_BR/function.set-time-limit.php'>Brazilian Portuguese</option>
            <option value='ru/function.set-time-limit.php' selected="selected">Russian</option>
            <option value='tr/function.set-time-limit.php'>Turkish</option>
            <option value='zh/function.set-time-limit.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/info/functions/set-time-limit.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.set-time-limit%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.set-time-limit" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">set_time_limit</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">set_time_limit</span> &mdash; <span class="dc-title">Ограничение времени выполнения скрипта</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.set-time-limit-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>set_time_limit</strong></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$seconds</code></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   Задаёт время в секундах, в течение которого скрипт должен завершить работу.
   Если скрипт не успевает, вызывается фатальная ошибка. По умолчанию даётся
   30 секунд, либо время, записанное в настройке
   <code class="literal">max_execution_time</code> в <var class="filename">php.ini</var> (если такая настройка
   установлена).
  </p>
  <p class="para">
   При вызове <span class="function"><strong>set_time_limit()</strong></span> перезапускает счётчик с нуля.
   Другими словами, если время ожидания изначально было 30 секунд, и через 25 секунд
   после запуска скрипта будет вызвана функция <code class="literal">set_time_limit(20)</code>,
   то скрипт будет работать максимум 45 секунд.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.set-time-limit-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">seconds</code></dt>

     <dd>

      <p class="para">
       Максимальное время выполнения в секундах. Если задан ноль, время
       выполнения неограниченно.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.set-time-limit-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает <strong><code>true</code></strong> в случае успешного выполнения, иначе <strong><code>false</code></strong>.
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.set-time-limit-notes">
  <h3 class="title">Примечания</h3>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Функция <span class="function"><strong>set_time_limit()</strong></span> и директива
    <a href="info.configuration.php.html#ini.max-execution-time" class="link">max_execution_time</a>
    влияют на время выполнения только самого скрипта. Время, затраченное на
    различные действия вне скрипта, такие как системные вызовы функции
    <span class="function"><a href="function.system.php.html" class="function">system()</a></span>, потоковые операции, запросы к базам данных
    и т.п. не включаются в расчёт времени выполнения скрипта. Это не относится
    к системам Windows, где рассчитывается абсолютное время выполнения.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.set-time-limit-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><a href="info.configuration.php.html#ini.max-execution-time" class="link">max_execution_time</a></li>
    <li class="member"><a href="info.configuration.php.html#ini.max-input-time" class="link">max_input_time</a></li>
   </ul>
  </p>
 </div>


</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.set-time-limit&amp;redirect=https://www.php.net/manual/ru/function.set-time-limit.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">25 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="72167">  <div class="votes">
    <div id="Vu72167">
    <a href="https://www.php.net/manual/vote-note.php?id=72167&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd72167">
    <a href="https://www.php.net/manual/vote-note.php?id=72167&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V72167" title="52% like this...">
    29
    </div>
  </div>
  <a href="function.set-time-limit.php.html#72167" class="name">
  <strong class="user"><em>mba_aslam at yahoo dot com</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#72167"> &para;</a><div class="date" title="2007-01-05 05:50"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom72167">
<div class="phpcode"><code><span class="html">while setting the set_time_limit(), the duration of sleep() will be ignored in the execution time. The following illustrates:<br /><br /><span class="default">&lt;?php<br /><br />set_time_limit</span><span class="keyword">(</span><span class="default">20</span><span class="keyword">);<br /><br />while (</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">10</span><span class="keyword">)<br />{<br />        echo </span><span class="string">"i=</span><span class="default">$i</span><span class="string"> "</span><span class="keyword">;<br />        </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">100</span><span class="keyword">);<br />        </span><span class="default">$i</span><span class="keyword">++;<br />}<br /><br /></span><span class="default">?&gt;<br /></span><br />Output:<br />i=0 i=1 i=2 i=3 i=4 i=5 i=6 i=7 i=8 i=9 i=10</span></code></div>
  </div>
 </div>
  <div class="note" id="115057">  <div class="votes">
    <div id="Vu115057">
    <a href="https://www.php.net/manual/vote-note.php?id=115057&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd115057">
    <a href="https://www.php.net/manual/vote-note.php?id=115057&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V115057" title="53% like this...">
    17
    </div>
  </div>
  <a href="function.set-time-limit.php.html#115057" class="name">
  <strong class="user"><em>kexianbin at diyism dot com</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#115057"> &para;</a><div class="date" title="2014-05-20 09:41"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom115057">
<div class="phpcode"><code><span class="html">Both set_time_limit(...) and  ini_set('max_execution_time',...); won't count the time cost of sleep,file_get_contents,shell_exec,mysql_query etc, so i build this function my_background_exec(), to run static method/function in background/detached process and time is out kill it:<br /><br />my_exec.php:<br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">my_background_exec</span><span class="keyword">(</span><span class="default">$function_name</span><span class="keyword">, </span><span class="default">$params</span><span class="keyword">, </span><span class="default">$str_requires</span><span class="keyword">, </span><span class="default">$timeout</span><span class="keyword">=</span><span class="default">600</span><span class="keyword">)<br />         {</span><span class="default">$map</span><span class="keyword">=array(</span><span class="string">'"'</span><span class="keyword">=&gt;</span><span class="string">'\"'</span><span class="keyword">, </span><span class="string">'$'</span><span class="keyword">=&gt;</span><span class="string">'\$'</span><span class="keyword">, </span><span class="string">'`'</span><span class="keyword">=&gt;</span><span class="string">'\`'</span><span class="keyword">, </span><span class="string">'\\'</span><span class="keyword">=&gt;</span><span class="string">'\\\\'</span><span class="keyword">, </span><span class="string">'!'</span><span class="keyword">=&gt;</span><span class="string">'\!'</span><span class="keyword">);<br />          </span><span class="default">$str_requires</span><span class="keyword">=</span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$str_requires</span><span class="keyword">, </span><span class="default">$map</span><span class="keyword">);<br />          </span><span class="default">$path_run</span><span class="keyword">=</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'SCRIPT_FILENAME'</span><span class="keyword">]);<br />          </span><span class="default">$my_target_exec</span><span class="keyword">=</span><span class="string">"/usr/bin/php -r \"chdir('</span><span class="keyword">{</span><span class="default">$path_run</span><span class="keyword">}</span><span class="string">');</span><span class="keyword">{</span><span class="default">$str_requires</span><span class="keyword">}</span><span class="string"> \\\$params=json_decode(file_get_contents('php://stdin'),true);call_user_func_array('</span><span class="keyword">{</span><span class="default">$function_name</span><span class="keyword">}</span><span class="string">', \\\$params);\""</span><span class="keyword">;<br />          </span><span class="default">$my_target_exec</span><span class="keyword">=</span><span class="default">strtr</span><span class="keyword">(</span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$my_target_exec</span><span class="keyword">, </span><span class="default">$map</span><span class="keyword">), </span><span class="default">$map</span><span class="keyword">);<br />          </span><span class="default">$my_background_exec</span><span class="keyword">=</span><span class="string">"(/usr/bin/php -r \"chdir('</span><span class="keyword">{</span><span class="default">$path_run</span><span class="keyword">}</span><span class="string">');</span><span class="keyword">{</span><span class="default">$str_requires</span><span class="keyword">}</span><span class="string"> my_timeout_exec(\\\"</span><span class="keyword">{</span><span class="default">$my_target_exec</span><span class="keyword">}</span><span class="string">\\\", file_get_contents('php://stdin'), </span><span class="keyword">{</span><span class="default">$timeout</span><span class="keyword">}</span><span class="string">);\" &lt;&amp;3 &amp;) 3&lt;&amp;0"</span><span class="keyword">;</span><span class="comment">//php by default use "sh", and "sh" don't support "&lt;&amp;0"<br />          </span><span class="default">my_timeout_exec</span><span class="keyword">(</span><span class="default">$my_background_exec</span><span class="keyword">, </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">);<br />         }<br /><br />function </span><span class="default">my_timeout_exec</span><span class="keyword">(</span><span class="default">$cmd</span><span class="keyword">, </span><span class="default">$stdin</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">, </span><span class="default">$timeout</span><span class="keyword">)<br />         {</span><span class="default">$start</span><span class="keyword">=</span><span class="default">time</span><span class="keyword">();<br />          </span><span class="default">$stdout</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br />          </span><span class="default">$stderr</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br />          </span><span class="comment">//file_put_contents('debug.txt', time().':cmd:'.$cmd."\n", FILE_APPEND);<br />          //file_put_contents('debug.txt', time().':stdin:'.$stdin."\n", FILE_APPEND);<br /><br />          </span><span class="default">$process</span><span class="keyword">=</span><span class="default">proc_open</span><span class="keyword">(</span><span class="default">$cmd</span><span class="keyword">, [[</span><span class="string">'pipe'</span><span class="keyword">, </span><span class="string">'r'</span><span class="keyword">], [</span><span class="string">'pipe'</span><span class="keyword">, </span><span class="string">'w'</span><span class="keyword">], [</span><span class="string">'pipe'</span><span class="keyword">, </span><span class="string">'w'</span><span class="keyword">]], </span><span class="default">$pipes</span><span class="keyword">);<br />          if (!</span><span class="default">is_resource</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">))<br />             {return array(</span><span class="string">'return'</span><span class="keyword">=&gt;</span><span class="string">'1'</span><span class="keyword">, </span><span class="string">'stdout'</span><span class="keyword">=&gt;</span><span class="default">$stdout</span><span class="keyword">, </span><span class="string">'stderr'</span><span class="keyword">=&gt;</span><span class="default">$stderr</span><span class="keyword">);<br />             }<br />          </span><span class="default">$status</span><span class="keyword">=</span><span class="default">proc_get_status</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">);<br />          </span><span class="default">posix_setpgid</span><span class="keyword">(</span><span class="default">$status</span><span class="keyword">[</span><span class="string">'pid'</span><span class="keyword">], </span><span class="default">$status</span><span class="keyword">[</span><span class="string">'pid'</span><span class="keyword">]);    </span><span class="comment">//seperate pgid(process group id) from parent's pgid<br /><br />          </span><span class="default">stream_set_blocking</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">0</span><span class="keyword">);<br />          </span><span class="default">stream_set_blocking</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">0</span><span class="keyword">);<br />          </span><span class="default">stream_set_blocking</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">], </span><span class="default">0</span><span class="keyword">);<br />          </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$stdin</span><span class="keyword">);<br />          </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br /><br />          while (</span><span class="default">1</span><span class="keyword">)<br />                {</span><span class="default">$stdout</span><span class="keyword">.=</span><span class="default">stream_get_contents</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br />                 </span><span class="default">$stderr</span><span class="keyword">.=</span><span class="default">stream_get_contents</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br /><br />                 if (</span><span class="default">time</span><span class="keyword">()-</span><span class="default">$start</span><span class="keyword">&gt;</span><span class="default">$timeout</span><span class="keyword">)<br />                    {</span><span class="comment">//proc_terminate($process, 9);    //only terminate subprocess, won't terminate sub-subprocess<br />                     </span><span class="default">posix_kill</span><span class="keyword">(-</span><span class="default">$status</span><span class="keyword">[</span><span class="string">'pid'</span><span class="keyword">], </span><span class="default">9</span><span class="keyword">);    </span><span class="comment">//sends SIGKILL to all processes inside group(negative means GPID, all subprocesses share the top process group, except nested my_timeout_exec)<br />                     //file_put_contents('debug.txt', time().":kill group {$status['pid']}\n", FILE_APPEND);<br />                     </span><span class="keyword">return array(</span><span class="string">'return'</span><span class="keyword">=&gt;</span><span class="string">'1'</span><span class="keyword">, </span><span class="string">'stdout'</span><span class="keyword">=&gt;</span><span class="default">$stdout</span><span class="keyword">, </span><span class="string">'stderr'</span><span class="keyword">=&gt;</span><span class="default">$stderr</span><span class="keyword">);<br />                    }<br /><br />                 </span><span class="default">$status</span><span class="keyword">=</span><span class="default">proc_get_status</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">);<br />                 </span><span class="comment">//file_put_contents('debug.txt', time().':status:'.var_export($status, true)."\n";<br />                 </span><span class="keyword">if (!</span><span class="default">$status</span><span class="keyword">[</span><span class="string">'running'</span><span class="keyword">])<br />                    {</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br />                     </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br />                     </span><span class="default">proc_close</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">);<br />                     return </span><span class="default">$status</span><span class="keyword">[</span><span class="string">'exitcode'</span><span class="keyword">];<br />                    }<br /><br />                 </span><span class="default">usleep</span><span class="keyword">(</span><span class="default">100000</span><span class="keyword">); <br />                }<br />         }<br /></span><span class="default">?&gt;<br /></span><br />a_class.php:<br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">A<br /></span><span class="keyword">{<br />    static function </span><span class="default">jack</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br />           {</span><span class="default">sleep</span><span class="keyword">(</span><span class="default">4</span><span class="keyword">);<br />            </span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="string">'debug.txt'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">().</span><span class="string">":A::jack:"</span><span class="keyword">.</span><span class="default">$a</span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">.</span><span class="default">$b</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">FILE_APPEND</span><span class="keyword">);<br />            </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">15</span><span class="keyword">);<br />           }<br />}<br /></span><span class="default">?&gt;<br /></span><br />test.php:<br /><span class="default">&lt;?php<br /></span><span class="keyword">require </span><span class="string">'my_exec.php'</span><span class="keyword">;<br /><br /></span><span class="default">my_background_exec</span><span class="keyword">(</span><span class="string">'A::jack'</span><span class="keyword">, array(</span><span class="string">'hello'</span><span class="keyword">, </span><span class="string">'jack'</span><span class="keyword">), </span><span class="string">'require "my_exec.php";require "a_class.php";'</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="84563">  <div class="votes">
    <div id="Vu84563">
    <a href="https://www.php.net/manual/vote-note.php?id=84563&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd84563">
    <a href="https://www.php.net/manual/vote-note.php?id=84563&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V84563" title="52% like this...">
    14
    </div>
  </div>
  <a href="function.set-time-limit.php.html#84563" class="name">
  <strong class="user"><em>jonathon dot keogh at gmail dot com</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#84563"> &para;</a><div class="date" title="2008-07-18 02:07"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom84563">
<div class="phpcode"><code><span class="html">You can do set_time_limit(0); so that the script will run forever - however this is not recommended and your web server might catch you out with an imposed HTTP timeout (usually around 5 minutes).<br /><br />You should check your web server's guides for more information about HTTP timeouts.<br /><br />Jonathon</span></code></div>
  </div>
 </div>
  <div class="note" id="85488">  <div class="votes">
    <div id="Vu85488">
    <a href="https://www.php.net/manual/vote-note.php?id=85488&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd85488">
    <a href="https://www.php.net/manual/vote-note.php?id=85488&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V85488" title="51% like this...">
    11
    </div>
  </div>
  <a href="function.set-time-limit.php.html#85488" class="name">
  <strong class="user"><em>cweiske at cweiske dot de</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#85488"> &para;</a><div class="date" title="2008-09-02 04:38"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom85488">
<div class="phpcode"><code><span class="html">To get the currently used time, use getrusage()</span></code></div>
  </div>
 </div>
  <div class="note" id="53564">  <div class="votes">
    <div id="Vu53564">
    <a href="https://www.php.net/manual/vote-note.php?id=53564&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd53564">
    <a href="https://www.php.net/manual/vote-note.php?id=53564&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V53564" title="51% like this...">
    9
    </div>
  </div>
  <a href="function.set-time-limit.php.html#53564" class="name">
  <strong class="user"><em>eric pecoraro at shepard com</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#53564"> &para;</a><div class="date" title="2005-06-06 12:57"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom53564">
<div class="phpcode"><code><span class="html">I was having trouble with script timeouts in applications where the user prompted long running background actions. I wrote this cURL/CLI background script that solved the problem when making requests from HTTP.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">/* BACKGROUND CLI 1.0<br />   <br />   eric pecoraro _at_ shepard dot com - 2005-06-02<br />   Use at your own risk. No warranties expressed or implied.<br /><br />   Include this file at the top of any script to run it in the background<br />   with no time limitations ... e.g., include('background_cli.php');<br />   <br />   The script that calls this file should not return output to the browser. <br />*/<br />#  REQUIREMENTS - cURL and CLI<br />   </span><span class="keyword">if ( !</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'curl_setopt'</span><span class="keyword">) OR !</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'curl_setopt'</span><span class="keyword">)  ) {<br />      echo </span><span class="string">'Requires cURL and CLI installations.' </span><span class="keyword">; exit ; <br />   }<br />   <br /></span><span class="comment">#  BUILD PATHS<br />   </span><span class="default">$script </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">,</span><span class="default">$SCRIPT_NAME</span><span class="keyword">)) ; <br />   </span><span class="default">$script_dir </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$SCRIPT_NAME</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$SCRIPT_NAME</span><span class="keyword">)-</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$script</span><span class="keyword">)) ;<br />   </span><span class="default">$scriptURL </span><span class="keyword">= </span><span class="string">'<a href="http://" rel="nofollow" target="_blank">http://</a>'</span><span class="keyword">. </span><span class="default">$HTTP_HOST </span><span class="keyword">. </span><span class="default">$script_dir </span><span class="keyword">. </span><span class="string">"</span><span class="default">$script</span><span class="string">" </span><span class="keyword">;<br />   </span><span class="default">$curlURL </span><span class="keyword">= </span><span class="string">'<a href="http://" rel="nofollow" target="_blank">http://</a>'</span><span class="keyword">. </span><span class="default">$HTTP_HOST </span><span class="keyword">. </span><span class="default">$script_dir </span><span class="keyword">. </span><span class="string">"</span><span class="default">$script</span><span class="string">?runscript=curl" </span><span class="keyword">;<br /><br /></span><span class="comment">#  Indicate that script is being called by CLI <br />   </span><span class="keyword">if ( </span><span class="default">php_sapi_name</span><span class="keyword">() == </span><span class="string">'cli' </span><span class="keyword">) {<br />      </span><span class="default">$CLI </span><span class="keyword">= </span><span class="default">true </span><span class="keyword">;<br />   }<br /><br /></span><span class="comment">#  Action if script is being called by cURL_prompt()<br />   </span><span class="keyword">if ( </span><span class="default">$runscript </span><span class="keyword">== </span><span class="string">'curl' </span><span class="keyword">) {<br />      </span><span class="default">$cmd </span><span class="keyword">= </span><span class="string">"/usr/local/bin/php "</span><span class="keyword">.</span><span class="default">$PATH_TRANSLATED </span><span class="keyword">; </span><span class="comment">// server location of script to run<br />      </span><span class="default">exec</span><span class="keyword">(</span><span class="default">$cmd</span><span class="keyword">) ;<br />      exit;<br />   }<br /><br /></span><span class="comment">#  USER INTERFACE<br />   // User answer after submission.<br />   </span><span class="keyword">if ( </span><span class="default">$post </span><span class="keyword">) {<br />      </span><span class="default">cURL_prompt</span><span class="keyword">(</span><span class="default">$curlURL</span><span class="keyword">) ;<br />      echo </span><span class="string">'&lt;div style="margin:25px;"&gt;&lt;title&gt;Background CLI&lt;/title&gt;'</span><span class="keyword">;<br />      echo </span><span class="string">'O.K. If all goes well, &lt;b&gt;'</span><span class="keyword">.</span><span class="default">$script</span><span class="keyword">.</span><span class="string">'&lt;/b&gt; is working hard in the background with no ' </span><span class="keyword">;<br />      echo </span><span class="string">'timeout limitations. &lt;br&gt;&lt;br&gt;&lt;form action='</span><span class="keyword">.</span><span class="default">$scriptURL</span><span class="keyword">.</span><span class="string">' method=GET&gt;' </span><span class="keyword">;<br />      echo </span><span class="string">'&lt;input type=submit value=" RESET BACKGROUND CLI "&gt;&lt;/form&gt;&lt;/div&gt;' </span><span class="keyword">;<br />      exit ;<br />   }<br />   </span><span class="comment">// Start screen.<br />   </span><span class="keyword">if ( !</span><span class="default">$CLI </span><span class="keyword">AND !</span><span class="default">$runscript </span><span class="keyword">) {<br />      echo </span><span class="string">'&lt;title&gt;Background CLI&lt;/title&gt;&lt;div style="margin:25px;"&gt;' </span><span class="keyword">;<br />      echo </span><span class="string">'&lt;form action='</span><span class="keyword">.</span><span class="default">$scriptURL</span><span class="keyword">.</span><span class="string">' method=POST&gt;' </span><span class="keyword">;<br />      echo </span><span class="string">'Click to run &lt;b&gt;'</span><span class="keyword">.</span><span class="default">$script</span><span class="keyword">.</span><span class="string">'&lt;/b&gt; from the PHP CLI command line, in the background.&lt;br&gt;&lt;br&gt;' </span><span class="keyword">;<br />      echo </span><span class="string">'&lt;input type=hidden value=1 name=post&gt;' </span><span class="keyword">;<br />      echo </span><span class="string">'&lt;input type=submit value=" RUN IN BACKGROUND "&gt;&lt;/form&gt;&lt;/div&gt;' </span><span class="keyword">;<br />      exit ;<br />   }<br /><br /></span><span class="comment">#  cURL URL PROMPT FUNCTION<br />   </span><span class="keyword">function </span><span class="default">cURL_prompt</span><span class="keyword">(</span><span class="default">$url_path</span><span class="keyword">) {<br />      </span><span class="default">ob_start</span><span class="keyword">(); </span><span class="comment">// start output buffer<br />      </span><span class="default">$c</span><span class="keyword">=</span><span class="default">curl_init</span><span class="keyword">(</span><span class="default">$url_path</span><span class="keyword">);<br />      </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">, </span><span class="default">CURLOPT_TIMEOUT</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">); </span><span class="comment">// drop connection after 2 seconds<br />      </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">);<br />      </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">);<br />      </span><span class="default">ob_end_clean</span><span class="keyword">(); </span><span class="comment">// discard output buffer<br />   </span><span class="keyword">}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="114082">  <div class="votes">
    <div id="Vu114082">
    <a href="https://www.php.net/manual/vote-note.php?id=114082&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd114082">
    <a href="https://www.php.net/manual/vote-note.php?id=114082&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V114082" title="52% like this...">
    3
    </div>
  </div>
  <a href="function.set-time-limit.php.html#114082" class="name">
  <strong class="user"><em>robertbrogers at gmail dot com</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#114082"> &para;</a><div class="date" title="2014-01-09 08:45"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom114082">
<div class="phpcode"><code><span class="html">Documentation states:<br />When called, set_time_limit() restarts the timeout counter from zero. In other words, if the timeout is the default 30 seconds, and 25 seconds into script execution a call such as set_time_limit(20) is made, the script will run for a total of 45 seconds before timing out.<br /><br />If I have a long running script and i want a exact  time limit, I set this as near as possible to the first line.</span></code></div>
  </div>
 </div>
  <div class="note" id="83617">  <div class="votes">
    <div id="Vu83617">
    <a href="https://www.php.net/manual/vote-note.php?id=83617&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd83617">
    <a href="https://www.php.net/manual/vote-note.php?id=83617&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V83617" title="51% like this...">
    5
    </div>
  </div>
  <a href="function.set-time-limit.php.html#83617" class="name">
  <strong class="user"><em>AtlantisNet</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#83617"> &para;</a><div class="date" title="2008-06-04 12:08"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom83617">
<div class="phpcode"><code><span class="html">In IIS, there is another global timeout setting which will override any PHP settings.  You can alter this timeout by following the following instructions:<br /><br /><a href="http://www.iisadmin.co.uk/?p=7" rel="nofollow" target="_blank">http://www.iisadmin.co.uk/?p=7</a></span></code></div>
  </div>
 </div>
  <div class="note" id="33462">  <div class="votes">
    <div id="Vu33462">
    <a href="https://www.php.net/manual/vote-note.php?id=33462&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd33462">
    <a href="https://www.php.net/manual/vote-note.php?id=33462&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V33462" title="51% like this...">
    6
    </div>
  </div>
  <a href="function.set-time-limit.php.html#33462" class="name">
  <strong class="user"><em>php at mightycpa.com</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#33462"> &para;</a><div class="date" title="2003-06-26 01:30"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom33462">
<div class="phpcode"><code><span class="html">You may also need to look at Apache's timeout setting (Win32 version for me), I changed max execution time value in php.ini, and still got stopped by Apache's timeout value in the httpd.conf file.</span></code></div>
  </div>
 </div>
  <div class="note" id="117601">  <div class="votes">
    <div id="Vu117601">
    <a href="https://www.php.net/manual/vote-note.php?id=117601&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117601">
    <a href="https://www.php.net/manual/vote-note.php?id=117601&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117601" title="50% like this...">
    1
    </div>
  </div>
  <a href="function.set-time-limit.php.html#117601" class="name">
  <strong class="user"><em>f.nakamura</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#117601"> &para;</a><div class="date" title="2015-07-06 07:54"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom117601">
<div class="phpcode"><code><span class="html">set_tme_limit resets the execution time count.<br /><br />test code1:<br /><span class="default">&lt;?php<br /></span><span class="keyword">echo </span><span class="string">'&lt;html&gt;&lt;body&gt;'</span><span class="keyword">;<br /></span><span class="default">set_time_limit</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />while(++</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">100000001</span><span class="keyword">){<br />        if(</span><span class="default">$i </span><span class="keyword">% </span><span class="default">100000 </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">){<br />                echo </span><span class="default">$i </span><span class="keyword">/ </span><span class="default">100000</span><span class="keyword">, </span><span class="string">"&lt;br/&gt;\n"</span><span class="keyword">;<br />        }<br />}<br />echo </span><span class="string">"done.&lt;br/&gt;\n"</span><span class="keyword">;<br /><br /></span><span class="comment">// will not echo 'done.'.<br /></span><span class="default">?&gt;<br /></span><br />test code2:<br /><span class="default">&lt;?php<br /></span><span class="keyword">echo </span><span class="string">'&lt;html&gt;&lt;body&gt;'</span><span class="keyword">;<br /></span><span class="default">set_time_limit</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />while(++</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">100000001</span><span class="keyword">){<br />        if(</span><span class="default">$i </span><span class="keyword">% </span><span class="default">100000 </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">){<br />                </span><span class="default">set_time_limit</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br />                echo </span><span class="default">$i </span><span class="keyword">/ </span><span class="default">100000</span><span class="keyword">, </span><span class="string">"&lt;br/&gt;\n"</span><span class="keyword">;<br />        }<br />}<br />echo </span><span class="string">"done.&lt;br/&gt;\n"</span><span class="keyword">;<br /><br /></span><span class="comment">// will echo 'done.'<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="124381">  <div class="votes">
    <div id="Vu124381">
    <a href="https://www.php.net/manual/vote-note.php?id=124381&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd124381">
    <a href="https://www.php.net/manual/vote-note.php?id=124381&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V124381" title="47% like this...">
    -1
    </div>
  </div>
  <a href="function.set-time-limit.php.html#124381" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#124381"> &para;</a><div class="date" title="2019-11-11 07:05"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom124381">
<div class="phpcode"><code><span class="html">if you want to check how much time remains, this should work (at least on Windows, on non-Windows platforms, i'm not sure)<br /><br />$seconds_remaining_until_termination = ini_get('max_execution_time') === "0" ? null : ((int)ini_get('max_execution_time'))-(microtime(true)-$_SERVER['REQUEST_TIME_FLOAT']);<br /><br />gives you number of seconds until the script will be terminated due to the time limit. (tested on Windows 7 X64 SP1 with PHP 7.3.7)  - or gives you null if there is no time limit.</span></code></div>
  </div>
 </div>
  <div class="note" id="59053">  <div class="votes">
    <div id="Vu59053">
    <a href="https://www.php.net/manual/vote-note.php?id=59053&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd59053">
    <a href="https://www.php.net/manual/vote-note.php?id=59053&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V59053" title="49% like this...">
    -1
    </div>
  </div>
  <a href="function.set-time-limit.php.html#59053" class="name">
  <strong class="user"><em>rycardo74 at gmail dot com</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#59053"> &para;</a><div class="date" title="2005-11-24 10:52"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom59053">
<div class="phpcode"><code><span class="html">this work to fine html streaming AND time pass limit<br /><br /><span class="default">&lt;?php<br />header</span><span class="keyword">(</span><span class="string">'Content-type: text/plain'</span><span class="keyword">);<br />echo </span><span class="default">date</span><span class="keyword">(</span><span class="string">"H:m:s"</span><span class="keyword">), </span><span class="string">"\n"</span><span class="keyword">;<br /></span><span class="default">set_time_limit</span><span class="keyword">(</span><span class="default">30</span><span class="keyword">);<br />for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">1000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />{<br /><br />    echo </span><span class="default">date</span><span class="keyword">(</span><span class="string">"H:m:s"</span><span class="keyword">),</span><span class="string">"\n"</span><span class="keyword">;<br />    for (</span><span class="default">$r </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$r </span><span class="keyword">&lt; </span><span class="default">100000</span><span class="keyword">; </span><span class="default">$r</span><span class="keyword">++){<br />    </span><span class="default">$X</span><span class="keyword">.=  </span><span class="default">tan</span><span class="keyword">(</span><span class="default">M_LNPI</span><span class="keyword">+</span><span class="default">log</span><span class="keyword">(</span><span class="default">ceil</span><span class="keyword">(  </span><span class="default">date</span><span class="keyword">(</span><span class="string">"s"</span><span class="keyword">)*</span><span class="default">M_PI</span><span class="keyword">*</span><span class="default">M_LNPI</span><span class="keyword">+</span><span class="default">100</span><span class="keyword">)));<br />    }<br />    </span><span class="default">ob_flush</span><span class="keyword">();   <br />    </span><span class="default">flush</span><span class="keyword">();<br /><br />}<br />echo </span><span class="string">"work! </span><span class="default">$x</span><span class="string">"</span><span class="keyword">;<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="72305">  <div class="votes">
    <div id="Vu72305">
    <a href="https://www.php.net/manual/vote-note.php?id=72305&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd72305">
    <a href="https://www.php.net/manual/vote-note.php?id=72305&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V72305" title="49% like this...">
    -2
    </div>
  </div>
  <a href="function.set-time-limit.php.html#72305" class="name">
  <strong class="user"><em>php at stock-consulting dot com</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#72305"> &para;</a><div class="date" title="2007-01-12 05:30"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom72305">
<div class="phpcode"><code><span class="html">To find out the currently set time limit, use<br /><br /><span class="default">&lt;?php<br /> ini_get</span><span class="keyword">(</span><span class="string">'max_execution_time'</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />If set_time_limit has been previously called in the script, the result will be the value which was passed to set_time_limit (and not, as the function name "ini_get" appears to suggest, the value from the php.ini file).</span></code></div>
  </div>
 </div>
  <div class="note" id="106669">  <div class="votes">
    <div id="Vu106669">
    <a href="https://www.php.net/manual/vote-note.php?id=106669&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd106669">
    <a href="https://www.php.net/manual/vote-note.php?id=106669&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V106669" title="49% like this...">
    -4
    </div>
  </div>
  <a href="function.set-time-limit.php.html#106669" class="name">
  <strong class="user"><em>ratty at brohoof dot com</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#106669"> &para;</a><div class="date" title="2011-11-25 07:39"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom106669">
<div class="phpcode"><code><span class="html">One thing that I wish I had found sooner is, if you're using php-cli and really need to limit the executation time, and if you're in *nix, you can use "timeout" which is part of coreutils.<br />For example:<br /><br />timeout 5 /usr/bin/php -q /path/to/script<br /><br />and it will kill it if it takes longer than 5 seconds.<br />I had a few quick php scripts I wrote for use with cacti for example.</span></code></div>
  </div>
 </div>
  <div class="note" id="63839">  <div class="votes">
    <div id="Vu63839">
    <a href="https://www.php.net/manual/vote-note.php?id=63839&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd63839">
    <a href="https://www.php.net/manual/vote-note.php?id=63839&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V63839" title="49% like this...">
    -3
    </div>
  </div>
  <a href="function.set-time-limit.php.html#63839" class="name">
  <strong class="user"><em>konrads dot smelkovs at gmail dot com</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#63839"> &para;</a><div class="date" title="2006-04-01 06:35"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom63839">
<div class="phpcode"><code><span class="html">If you are streaming large data from database, it is counted towards the max exec time.</span></code></div>
  </div>
 </div>
  <div class="note" id="32532">  <div class="votes">
    <div id="Vu32532">
    <a href="https://www.php.net/manual/vote-note.php?id=32532&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd32532">
    <a href="https://www.php.net/manual/vote-note.php?id=32532&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V32532" title="49% like this...">
    -3
    </div>
  </div>
  <a href="function.set-time-limit.php.html#32532" class="name">
  <strong class="user"><em>rsallo at gna dot NOSPAM dot es</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#32532"> &para;</a><div class="date" title="2003-05-30 04:28"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom32532">
<div class="phpcode"><code><span class="html">When you are working with IIS, PHP timeout is valid only when it's lower than script timeout defined by IIS.<br /><br />IIS 5 has a default timeout of 300 seconds. If you need a higher timeout, you also have to change IIS properties. Otherwise, your server will stop your PHP script before it reaches its own timeout.</span></code></div>
  </div>
 </div>
  <div class="note" id="62510">  <div class="votes">
    <div id="Vu62510">
    <a href="https://www.php.net/manual/vote-note.php?id=62510&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd62510">
    <a href="https://www.php.net/manual/vote-note.php?id=62510&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V62510" title="48% like this...">
    -5
    </div>
  </div>
  <a href="function.set-time-limit.php.html#62510" class="name">
  <strong class="user"><em>jatin at jatinchimote dot com</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#62510"> &para;</a><div class="date" title="2006-03-01 10:54"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom62510">
<div class="phpcode"><code><span class="html">If you set the number of seconds to a very large number (not many ppl do that, but just in case) then php exits with a fatal error like :<br /><br />Fatal error: Maximum execution time of 1 second exceeded in /path/to/your/script/why.php<br /><br />[EDIT by danbrown AT php DOT net: This is due to the limit of 32-bit signed integers.]</span></code></div>
  </div>
 </div>
  <div class="note" id="105569">  <div class="votes">
    <div id="Vu105569">
    <a href="https://www.php.net/manual/vote-note.php?id=105569&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd105569">
    <a href="https://www.php.net/manual/vote-note.php?id=105569&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V105569" title="48% like this...">
    -7
    </div>
  </div>
  <a href="function.set-time-limit.php.html#105569" class="name">
  <strong class="user"><em>alexander dot krause at ed-solutions dot de</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#105569"> &para;</a><div class="date" title="2011-08-29 02:26"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom105569">
<div class="phpcode"><code><span class="html">A nice workaround to have a real max_execution_time (needs posix and pcntl):<br /><br /><span class="default">&lt;?php<br />$pid</span><span class="keyword">=</span><span class="default">pcntl_fork</span><span class="keyword">();<br /><br />if (</span><span class="default">$pid</span><span class="keyword">) {<br />  </span><span class="comment">//long time process<br />  </span><span class="default">$a</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />  while (</span><span class="default">true</span><span class="keyword">) {<br />    echo </span><span class="string">"a=</span><span class="default">$a</span><span class="string">\n\n"</span><span class="keyword">;<br />    </span><span class="default">ob_flush</span><span class="keyword">();<br />    </span><span class="default">flush</span><span class="keyword">();<br />    </span><span class="default">$a</span><span class="keyword">++;<br />    </span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">'sleep 10&amp;'</span><span class="keyword">);<br />  }<br />} else {<br />  </span><span class="comment">//time-limit checker<br />  </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">);<br />  </span><span class="default">posix_kill</span><span class="keyword">(</span><span class="default">posix_getppid</span><span class="keyword">(),</span><span class="default">SIGKILL</span><span class="keyword">);<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="125932">  <div class="votes">
    <div id="Vu125932">
    <a href="https://www.php.net/manual/vote-note.php?id=125932&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd125932">
    <a href="https://www.php.net/manual/vote-note.php?id=125932&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V125932" title="43% like this...">
    -3
    </div>
  </div>
  <a href="function.set-time-limit.php.html#125932" class="name">
  <strong class="user"><em>Daan</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#125932"> &para;</a><div class="date" title="2021-03-15 12:00"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom125932">
<div class="phpcode"><code><span class="html">If you would like to calculatue the wall time of your script (includes all external DB/HTTP calls etc.) in Unix (in Windows this is already default behavior), you could use the following function:<br /><br /><span class="default">&lt;?php<br /><br />$timeoutInSeconds </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;<br /><br /></span><span class="comment">// This will make sure this is always called async                     <br /></span><span class="default">pcntl_async_signals</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);    <br />                                                                                                            <br /></span><span class="comment">// Second parameter is any callable (<a href="https://www.php.net/manual/en/language.types.callable.php" rel="nofollow" target="_blank">https://www.php.net/manual/en/language.types.callable.php</a>)          <br /></span><span class="default">pcntl_signal</span><span class="keyword">(</span><span class="default">SIGALRM</span><span class="keyword">, function() {<br />    exit(</span><span class="string">'Stop it!'</span><span class="keyword">);<br />});<br /></span><span class="default">pcntl_alarm</span><span class="keyword">(</span><span class="default">$timeoutInSeconds</span><span class="keyword">);                                                                                                         <br />                                                                                  <br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="92949">  <div class="votes">
    <div id="Vu92949">
    <a href="https://www.php.net/manual/vote-note.php?id=92949&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd92949">
    <a href="https://www.php.net/manual/vote-note.php?id=92949&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V92949" title="45% like this...">
    -17
    </div>
  </div>
  <a href="function.set-time-limit.php.html#92949" class="name">
  <strong class="user"><em>ravenswd at gmail dot com</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#92949"> &para;</a><div class="date" title="2009-08-15 04:46"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom92949">
<div class="phpcode"><code><span class="html">Unfortunately, a script which gets into an infinite loop can produce an alarming amount of output in only a few seconds. I was attempting to debug a script, and I added<br /><br /><span class="default">&lt;?php<br />set_time_limit</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />to the beginning of the script. Unfortunately, even two seconds of run time produced enough output to overload the memory available to my browser.<br /><br />So, I wrote a short routine which would limit the execution time, and also limit the amount of output returned. I added this to the beginning of my script and it worked perfectly:<br /><br /><span class="default">&lt;?php<br />set_time_limit</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br /><br /></span><span class="default">ob_start</span><span class="keyword">();     </span><span class="comment">// buffer output<br /><br /></span><span class="keyword">function </span><span class="default">shutdown </span><span class="keyword">() {<br />    </span><span class="comment">// print only first 2000 characters of output<br />    </span><span class="default">$out </span><span class="keyword">= </span><span class="default">ob_get_clean</span><span class="keyword">();<br />    print </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">2000</span><span class="keyword">);<br />}<br /><br /></span><span class="default">register_shutdown_function</span><span class="keyword">(</span><span class="string">'shutdown'</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="72268">  <div class="votes">
    <div id="Vu72268">
    <a href="https://www.php.net/manual/vote-note.php?id=72268&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd72268">
    <a href="https://www.php.net/manual/vote-note.php?id=72268&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V72268" title="45% like this...">
    -18
    </div>
  </div>
  <a href="function.set-time-limit.php.html#72268" class="name">
  <strong class="user"><em>bjfieldNO at SPAMgmail dot com</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#72268"> &para;</a><div class="date" title="2007-01-10 02:53"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom72268">
<div class="phpcode"><code><span class="html">Timeouts after five minutes in IIS on Windows are caused by an inherited CGI Timeout value of 300 seconds.  This is not a PHP problem.  The fix is to add custom values for the files or directories that need longer to run.<br /><br />In IIS 5.0 or 7.0 (beta as of this note), you can change this value on a fairly granular level using IIS Manager, under (roughly) YOURSITE -&gt; Properties -&gt; Home Directory -&gt; Configuration (button) -&gt; Options, but in IIS 6.0, this functionality is turned off (!), so you have to get into the Metabase.<br /><br />Find the site number in Metabase Explorer (e.g., 12345678), then from CMD prompt:<br /><br />[get to the scripts dir]<br />cd C:\Inetpub\AdminScripts<br /><br />[this for each subdirectory from off the site root]<br />cscript adsutil.vbs CREATE W3SVC/12345678/root/"MY SUBDIRECTORY" IIsWebDirectory<br /><br />[this for the file in question]<br />cscript adsutil.vbs CREATE W3SVC/12345678/root/"MY SUBDIRECTORY"/ILikeToTimeOut.php IIsWebFile<br /><br />[this to set the timeout]<br />cscript adsutil.vbs set W3SVC/12345678/root/"MY SUBDIRECTORY"/ILikeToTimeOut.php/CGITimeout "7200"<br /><br />Note:  "7200" is 2 hours in seconds, but can be whatever.<br /><br />I derived the solution above from this fine article:<br /><a href="http://www.iis-resources.com/modules/AMS/article.php?" rel="nofollow" target="_blank">http://www.iis-resources.com/modules/AMS/article.php?</a><br />storyid=509&amp;page=3</span></code></div>
  </div>
 </div>
  <div class="note" id="100218">  <div class="votes">
    <div id="Vu100218">
    <a href="https://www.php.net/manual/vote-note.php?id=100218&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd100218">
    <a href="https://www.php.net/manual/vote-note.php?id=100218&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V100218" title="45% like this...">
    -20
    </div>
  </div>
  <a href="function.set-time-limit.php.html#100218" class="name">
  <strong class="user"><em>agvozden at gmail dot com</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#100218"> &para;</a><div class="date" title="2010-10-01 01:51"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom100218">
<div class="phpcode"><code><span class="html">If you got something like:<br /><br />msg: set_time_limit() [function.set-time-limit]: Cannot set time limit in safe mode <br /><br />try this:<br /><br /><span class="default">&lt;?php<br />        </span><span class="keyword">if( !</span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'safe_mode'</span><span class="keyword">) ){<br />            </span><span class="default">set_time_limit</span><span class="keyword">(</span><span class="default">25</span><span class="keyword">);<br />        }<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="96923">  <div class="votes">
    <div id="Vu96923">
    <a href="https://www.php.net/manual/vote-note.php?id=96923&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd96923">
    <a href="https://www.php.net/manual/vote-note.php?id=96923&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V96923" title="45% like this...">
    -22
    </div>
  </div>
  <a href="function.set-time-limit.php.html#96923" class="name">
  <strong class="user"><em>Silver_Knight</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#96923"> &para;</a><div class="date" title="2010-03-23 05:18"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom96923">
<div class="phpcode"><code><span class="html">if you are running a script that needs to execute for unknown time, or forever.. you may use<br />set_time_limit(0);<br />.....<br />...<br />..<br />.<br />and at the end of the script use flush() function to tell phpto send out what it has generated.</span></code></div>
  </div>
 </div>
  <div class="note" id="62447">  <div class="votes">
    <div id="Vu62447">
    <a href="https://www.php.net/manual/vote-note.php?id=62447&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd62447">
    <a href="https://www.php.net/manual/vote-note.php?id=62447&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V62447" title="44% like this...">
    -23
    </div>
  </div>
  <a href="function.set-time-limit.php.html#62447" class="name">
  <strong class="user"><em>Cleverduck</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#62447"> &para;</a><div class="date" title="2006-02-28 01:36"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom62447">
<div class="phpcode"><code><span class="html">Regarding what 'nytshadow' said, it's important to realize that max-execution-time and the set_time_limit functions measure the time that the CPU is working on the script.  If the script blocks, IE: for input, select, sleep, etc., then the time between blocking and returning is NOT measured.  This is the same when running scripts from the command line interface.  So if you've got a log parser written in PHP that tails a file, that program WILL fail eventually.  It just depends how long it takes to read in enough input to process for 30 seconds.<br /><br />If you're writing a command line script that should run infinitely, setting max-execution-time to 0 (never stop) is HIGHLY recommended.</span></code></div>
  </div>
 </div>
  <div class="note" id="90933">  <div class="votes">
    <div id="Vu90933">
    <a href="https://www.php.net/manual/vote-note.php?id=90933&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd90933">
    <a href="https://www.php.net/manual/vote-note.php?id=90933&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V90933" title="44% like this...">
    -25
    </div>
  </div>
  <a href="function.set-time-limit.php.html#90933" class="name">
  <strong class="user"><em>BW</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#90933"> &para;</a><div class="date" title="2009-05-16 05:08"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom90933">
<div class="phpcode"><code><span class="html">If you use Apache you can change maximum execution time by .htaccess with this line<br /><br />php_value max_execution_time 200</span></code></div>
  </div>
 </div>
  <div class="note" id="108607">  <div class="votes">
    <div id="Vu108607">
    <a href="https://www.php.net/manual/vote-note.php?id=108607&amp;page=function.set-time-limit&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd108607">
    <a href="https://www.php.net/manual/vote-note.php?id=108607&amp;page=function.set-time-limit&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V108607" title="41% like this...">
    -41
    </div>
  </div>
  <a href="function.set-time-limit.php.html#108607" class="name">
  <strong class="user"><em>mingalevme at gmail dot com</em></strong></a><a class="genanchor" href="function.set-time-limit.php.html#108607"> &para;</a><div class="date" title="2012-05-10 07:51"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom108607">
<div class="phpcode"><code><span class="html">If you're using PHP_CLI SAPI and getting error "Maximum execution time of N seconds exceeded" where N is an integer value, try to call set_time_limit(0) every M seconds or every iteration. For example:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">require_once(</span><span class="string">'db.php'</span><span class="keyword">);<br /><br /></span><span class="default">$stmt </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="default">$sql</span><span class="keyword">);<br /><br />while (</span><span class="default">$row </span><span class="keyword">= </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetchRow</span><span class="keyword">()) {<br />    </span><span class="default">set_time_limit</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />    </span><span class="comment">// your code here<br /></span><span class="keyword">}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.set-time-limit&amp;redirect=https://www.php.net/manual/ru/function.set-time-limit.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.info.php.html">Опции PHP/информационные функции</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.assert.php.html" title="assert">assert</a>
                        </li>
                                                <li class="">
                            <a href="function.cli-get-process-title.php.html" title="cli_&#8203;get_&#8203;process_&#8203;title">cli_&#8203;get_&#8203;process_&#8203;title</a>
                        </li>
                                                <li class="">
                            <a href="function.cli-set-process-title.php.html" title="cli_&#8203;set_&#8203;process_&#8203;title">cli_&#8203;set_&#8203;process_&#8203;title</a>
                        </li>
                                                <li class="">
                            <a href="function.dl.php.html" title="dl">dl</a>
                        </li>
                                                <li class="">
                            <a href="function.extension-loaded.php.html" title="extension_&#8203;loaded">extension_&#8203;loaded</a>
                        </li>
                                                <li class="">
                            <a href="function.gc-collect-cycles.php.html" title="gc_&#8203;collect_&#8203;cycles">gc_&#8203;collect_&#8203;cycles</a>
                        </li>
                                                <li class="">
                            <a href="function.gc-disable.php.html" title="gc_&#8203;disable">gc_&#8203;disable</a>
                        </li>
                                                <li class="">
                            <a href="function.gc-enable.php.html" title="gc_&#8203;enable">gc_&#8203;enable</a>
                        </li>
                                                <li class="">
                            <a href="function.gc-enabled.php.html" title="gc_&#8203;enabled">gc_&#8203;enabled</a>
                        </li>
                                                <li class="">
                            <a href="function.gc-mem-caches.php.html" title="gc_&#8203;mem_&#8203;caches">gc_&#8203;mem_&#8203;caches</a>
                        </li>
                                                <li class="">
                            <a href="function.gc-status.php.html" title="gc_&#8203;status">gc_&#8203;status</a>
                        </li>
                                                <li class="">
                            <a href="function.get-cfg-var.php.html" title="get_&#8203;cfg_&#8203;var">get_&#8203;cfg_&#8203;var</a>
                        </li>
                                                <li class="">
                            <a href="function.get-current-user.php.html" title="get_&#8203;current_&#8203;user">get_&#8203;current_&#8203;user</a>
                        </li>
                                                <li class="">
                            <a href="function.get-defined-constants.php.html" title="get_&#8203;defined_&#8203;constants">get_&#8203;defined_&#8203;constants</a>
                        </li>
                                                <li class="">
                            <a href="function.get-extension-funcs.php.html" title="get_&#8203;extension_&#8203;funcs">get_&#8203;extension_&#8203;funcs</a>
                        </li>
                                                <li class="">
                            <a href="function.get-include-path.php.html" title="get_&#8203;include_&#8203;path">get_&#8203;include_&#8203;path</a>
                        </li>
                                                <li class="">
                            <a href="function.get-included-files.php.html" title="get_&#8203;included_&#8203;files">get_&#8203;included_&#8203;files</a>
                        </li>
                                                <li class="">
                            <a href="function.get-loaded-extensions.php.html" title="get_&#8203;loaded_&#8203;extensions">get_&#8203;loaded_&#8203;extensions</a>
                        </li>
                                                <li class="">
                            <a href="function.get-required-files.php.html" title="get_&#8203;required_&#8203;files">get_&#8203;required_&#8203;files</a>
                        </li>
                                                <li class="">
                            <a href="function.get-resources.php.html" title="get_&#8203;resources">get_&#8203;resources</a>
                        </li>
                                                <li class="">
                            <a href="function.getenv.php.html" title="getenv">getenv</a>
                        </li>
                                                <li class="">
                            <a href="function.getlastmod.php.html" title="getlastmod">getlastmod</a>
                        </li>
                                                <li class="">
                            <a href="function.getmygid.php.html" title="getmygid">getmygid</a>
                        </li>
                                                <li class="">
                            <a href="function.getmyinode.php.html" title="getmyinode">getmyinode</a>
                        </li>
                                                <li class="">
                            <a href="function.getmypid.php.html" title="getmypid">getmypid</a>
                        </li>
                                                <li class="">
                            <a href="function.getmyuid.php.html" title="getmyuid">getmyuid</a>
                        </li>
                                                <li class="">
                            <a href="function.getopt.php.html" title="getopt">getopt</a>
                        </li>
                                                <li class="">
                            <a href="function.getrusage.php.html" title="getrusage">getrusage</a>
                        </li>
                                                <li class="">
                            <a href="function.ini-alter.php.html" title="ini_&#8203;alter">ini_&#8203;alter</a>
                        </li>
                                                <li class="">
                            <a href="function.ini-get-all.php.html" title="ini_&#8203;get_&#8203;all">ini_&#8203;get_&#8203;all</a>
                        </li>
                                                <li class="">
                            <a href="function.ini-get.php.html" title="ini_&#8203;get">ini_&#8203;get</a>
                        </li>
                                                <li class="">
                            <a href="function.ini-parse-quantity.php.html" title="ini_&#8203;parse_&#8203;quantity">ini_&#8203;parse_&#8203;quantity</a>
                        </li>
                                                <li class="">
                            <a href="function.ini-restore.php.html" title="ini_&#8203;restore">ini_&#8203;restore</a>
                        </li>
                                                <li class="">
                            <a href="function.ini-set.php.html" title="ini_&#8203;set">ini_&#8203;set</a>
                        </li>
                                                <li class="">
                            <a href="function.memory-get-peak-usage.php.html" title="memory_&#8203;get_&#8203;peak_&#8203;usage">memory_&#8203;get_&#8203;peak_&#8203;usage</a>
                        </li>
                                                <li class="">
                            <a href="function.memory-get-usage.php.html" title="memory_&#8203;get_&#8203;usage">memory_&#8203;get_&#8203;usage</a>
                        </li>
                                                <li class="">
                            <a href="function.memory-reset-peak-usage.php.html" title="memory_&#8203;reset_&#8203;peak_&#8203;usage">memory_&#8203;reset_&#8203;peak_&#8203;usage</a>
                        </li>
                                                <li class="">
                            <a href="function.php-ini-loaded-file.php.html" title="php_&#8203;ini_&#8203;loaded_&#8203;file">php_&#8203;ini_&#8203;loaded_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.php-ini-scanned-files.php.html" title="php_&#8203;ini_&#8203;scanned_&#8203;files">php_&#8203;ini_&#8203;scanned_&#8203;files</a>
                        </li>
                                                <li class="">
                            <a href="function.php-sapi-name.php.html" title="php_&#8203;sapi_&#8203;name">php_&#8203;sapi_&#8203;name</a>
                        </li>
                                                <li class="">
                            <a href="function.php-uname.php.html" title="php_&#8203;uname">php_&#8203;uname</a>
                        </li>
                                                <li class="">
                            <a href="function.phpcredits.php.html" title="phpcredits">phpcredits</a>
                        </li>
                                                <li class="">
                            <a href="function.phpinfo.php.html" title="phpinfo">phpinfo</a>
                        </li>
                                                <li class="">
                            <a href="function.phpversion.php.html" title="phpversion">phpversion</a>
                        </li>
                                                <li class="">
                            <a href="function.putenv.php.html" title="putenv">putenv</a>
                        </li>
                                                <li class="">
                            <a href="function.set-include-path.php.html" title="set_&#8203;include_&#8203;path">set_&#8203;include_&#8203;path</a>
                        </li>
                                                <li class="current">
                            <a href="function.set-time-limit.php.html" title="set_&#8203;time_&#8203;limit">set_&#8203;time_&#8203;limit</a>
                        </li>
                                                <li class="">
                            <a href="function.sys-get-temp-dir.php.html" title="sys_&#8203;get_&#8203;temp_&#8203;dir">sys_&#8203;get_&#8203;temp_&#8203;dir</a>
                        </li>
                                                <li class="">
                            <a href="function.version-compare.php.html" title="version_&#8203;compare">version_&#8203;compare</a>
                        </li>
                                                <li class="">
                            <a href="function.zend-thread-id.php.html" title="zend_&#8203;thread_&#8203;id">zend_&#8203;thread_&#8203;id</a>
                        </li>
                                                <li class="">
                            <a href="function.zend-version.php.html" title="zend_&#8203;version">zend_&#8203;version</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                        <li>
                <span class="header">Deprecated</span>
                <ul class="child-menu-list">
                                    <li class="">
                        <a href="function.assert-options.php.html" title="assert_&#8203;options">assert_&#8203;options</a>
                    </li>
                                    <li class="">
                        <a href="function.get-magic-quotes-gpc.php.html" title="get_&#8203;magic_&#8203;quotes_&#8203;gpc">get_&#8203;magic_&#8203;quotes_&#8203;gpc</a>
                    </li>
                                    <li class="">
                        <a href="function.get-magic-quotes-runtime.php.html" title="get_&#8203;magic_&#8203;quotes_&#8203;runtime">get_&#8203;magic_&#8203;quotes_&#8203;runtime</a>
                    </li>
                                    <li class="">
                        <a href="function.restore-include-path.php.html" title="restore_&#8203;include_&#8203;path">restore_&#8203;include_&#8203;path</a>
                    </li>
                                </ul>
            </li>
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
