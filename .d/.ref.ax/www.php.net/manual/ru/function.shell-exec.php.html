<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: shell_exec - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.shell-exec.php.html">
 <link rel="shorturl" href="https://www.php.net/shell-exec">
 <link rel="alternate" href="https://www.php.net/shell-exec" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.exec.php.html">
 <link rel="prev" href="function.proc-terminate.php.html">
 <link rel="next" href="function.system.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.shell-exec.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.shell-exec.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.shell-exec.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.shell-exec.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.shell-exec.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.shell-exec.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.shell-exec.php" hreflang="pt_BR">
 <link rel="alternate" href="function.shell-exec.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.shell-exec.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.shell-exec.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.system.php.html">
          system &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.proc-terminate.php.html">
          &laquo; proc_terminate        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.fileprocess.process.php.html'>Модули для управления процессами программ</a></li>      <li><a href='book.exec.php.html'>Запуск программы</a></li>      <li><a href='ref.exec.php.html'>Функции запуска программ</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.shell-exec.php'>English</option>
            <option value='de/function.shell-exec.php'>German</option>
            <option value='es/function.shell-exec.php'>Spanish</option>
            <option value='fr/function.shell-exec.php'>French</option>
            <option value='it/function.shell-exec.php'>Italian</option>
            <option value='ja/function.shell-exec.php'>Japanese</option>
            <option value='pt_BR/function.shell-exec.php'>Brazilian Portuguese</option>
            <option value='ru/function.shell-exec.php' selected="selected">Russian</option>
            <option value='tr/function.shell-exec.php'>Turkish</option>
            <option value='zh/function.shell-exec.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/exec/functions/shell-exec.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.shell-exec%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.shell-exec" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">shell_exec</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">shell_exec</span> &mdash; <span class="dc-title">Выполнить команду через оболочку и вернуть вывод в виде строки</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.shell-exec-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>shell_exec</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$command</code></span>): <span class="type"><span class="type">string</span>|<span class="type"><span class="type false">false</span></span>|<span class="type">null</span></span></div>

  <p class="para rdfs-comment">
   Функция идентична оператору с <a href="language.operators.execution.php.html" class="link">обратным апострофом</a>.
  </p>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    В Windows нижележащий канал открывается в текстовом режиме, что может привести к сбою
    функции для двоичного вывода.
    В таком случае попробуйте вместо этого использовать
    <span class="function"><a href="function.popen.php.html" class="function">popen()</a></span>.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.shell-exec-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">command</code></dt>

     <dd>

      <p class="para">
       Команда, которая будет выполнена.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.shell-exec-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Строка (<span class="type">string</span>), содержащая вывод выполненной команды, <strong><code>false</code></strong>, если канал
   не может быть установлен или <strong><code>null</code></strong> в случае возникновения ошибки или отсутствии вывода команды.
  </p>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Эта функция может вернуть <strong><code>null</code></strong> в двух случаях: если произошла ошибка или если
    выполняемая команда ничего не выводит. Не пользуйтесь этой функцией, для
    определения, успешно ли выполнилась команда. Вместо этого используйте
    <span class="function"><a href="function.exec.php.html" class="function">exec()</a></span>, так как она предоставляет возможность проверить
    код возврата.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 errors" id="refsect1-function.shell-exec-errors">
  <h3 class="title">Ошибки</h3>
  <p class="para">
   Выдаётся ошибка уровня <strong><code>E_WARNING</code></strong>, когда канал не может быть установлен.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.shell-exec-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Пример #1 Пример использования <span class="function"><strong>shell_exec()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$output </span><span style="color: #007700">= </span><span style="color: #0000BB">shell_exec</span><span style="color: #007700">(</span><span style="color: #DD0000">'ls -lart'</span><span style="color: #007700">);<br />echo </span><span style="color: #DD0000">"&lt;pre&gt;</span><span style="color: #0000BB">$output</span><span style="color: #DD0000">&lt;/pre&gt;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.shell-exec-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.exec.php.html" class="function" rel="rdfs-seeAlso">exec()</a> - Выполнить внешнюю программу</span></li>
    <li class="member"><span class="function"><a href="function.escapeshellcmd.php.html" class="function" rel="rdfs-seeAlso">escapeshellcmd()</a> - Экранировать метасимволы командной строки</span></li>
   </ul>
  </p>
 </div>

</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.shell-exec&amp;redirect=https://www.php.net/manual/ru/function.shell-exec.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">36 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="106250">  <div class="votes">
    <div id="Vu106250">
    <a href="https://www.php.net/manual/vote-note.php?id=106250&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd106250">
    <a href="https://www.php.net/manual/vote-note.php?id=106250&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V106250" title="72% like this...">
    236
    </div>
  </div>
  <a href="function.shell-exec.php.html#106250" class="name">
  <strong class="user"><em>trev at dedicate.co.uk</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#106250"> &para;</a><div class="date" title="2011-10-21 07:34"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom106250">
<div class="phpcode"><code><span class="html">If you're trying to run a command such as "gunzip -t" in shell_exec and getting an empty result, you might need to add 2&gt;&amp;1 to the end of the command, eg:<br /><br />Won't always work:<br />echo shell_exec("gunzip -c -t $path_to_backup_file");<br /><br />Should work:<br />echo shell_exec("gunzip -c -t $path_to_backup_file 2&gt;&amp;1");<br /><br />In the above example, a line break at the beginning of the gunzip output seemed to prevent shell_exec printing anything else. Hope this saves someone else an hour or two.</span></code></div>
  </div>
 </div>
  <div class="note" id="118495">  <div class="votes">
    <div id="Vu118495">
    <a href="https://www.php.net/manual/vote-note.php?id=118495&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd118495">
    <a href="https://www.php.net/manual/vote-note.php?id=118495&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V118495" title="65% like this...">
    46
    </div>
  </div>
  <a href="function.shell-exec.php.html#118495" class="name">
  <strong class="user"><em>alexandre dot schmidt at gmail dot com</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#118495"> &para;</a><div class="date" title="2015-12-16 02:26"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom118495">
<div class="phpcode"><code><span class="html">To run a command in background, the output must be redirected to /dev/null. This is written in exec() manual page. There are cases where you need the output to be logged somewhere else though. Redirecting the output to a file like this didn't work for me:<br /><br /><span class="default">&lt;?php<br /></span><span class="comment"># this doesn't work!<br /></span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">"my_script.sh 2&gt;&amp;1 &gt;&gt; /tmp/mylog &amp;"</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />Using the above command still hangs web browser request.<br /><br />Seems like you have to add exactly "/dev/null" to the command line. For instance, this worked:<br /><br /><span class="default">&lt;?php<br /></span><span class="comment"># works, but output is lost<br /></span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">"my_script.sh 2&gt;/dev/null &gt;/dev/null &amp;"</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />But I wanted the output, so I used this:<br /><br /><span class="default">&lt;?php<br />shell_exec</span><span class="keyword">(</span><span class="string">"my_script.sh 2&gt;&amp;1 | tee -a /tmp/mylog 2&gt;/dev/null &gt;/dev/null &amp;"</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />Hope this helps someone.</span></code></div>
  </div>
 </div>
  <div class="note" id="88052">  <div class="votes">
    <div id="Vu88052">
    <a href="https://www.php.net/manual/vote-note.php?id=88052&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd88052">
    <a href="https://www.php.net/manual/vote-note.php?id=88052&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V88052" title="63% like this...">
    15
    </div>
  </div>
  <a href="function.shell-exec.php.html#88052" class="name">
  <strong class="user"><em>Rgemini</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#88052"> &para;</a><div class="date" title="2009-01-07 03:46"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom88052">
<div class="phpcode"><code><span class="html">A simple way to handle the problem of capturing stderr output when using shell-exec under windows is to call ob_start() before the command and ob_end_clean() afterwards, like this:<br /><br /><span class="default">&lt;?php<br />ob_start</span><span class="keyword">()<br /></span><span class="default">$dir </span><span class="keyword">= </span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">'dir B:'</span><span class="keyword">);<br />if </span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)<br />{   </span><span class="comment">// B: does not exist<br />    // do whatever you want with the stderr output here<br /></span><span class="keyword">}<br />else<br />{  </span><span class="comment">// B: exists and $dir holds the directory listing<br />   // do whatever you want with it here<br /></span><span class="keyword">}<br /></span><span class="default">ob_end_clean</span><span class="keyword">();   </span><span class="comment">// get rid of the evidence :-)<br /></span><span class="default">?&gt;<br /></span><br />If B: does not exist then $dir will be Null and the output buffer will have captured the message: <br /><br />  'The system cannot find the path specified'. <br /><br />(under WinXP, at least). If B: exists then $dir will contain the directory listing and we probably don't care about the output buffer. In any case it needs to be deleted before proceeding.</span></code></div>
  </div>
 </div>
  <div class="note" id="125577">  <div class="votes">
    <div id="Vu125577">
    <a href="https://www.php.net/manual/vote-note.php?id=125577&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd125577">
    <a href="https://www.php.net/manual/vote-note.php?id=125577&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V125577" title="61% like this...">
    5
    </div>
  </div>
  <a href="function.shell-exec.php.html#125577" class="name">
  <strong class="user"><em>smcbride at msn dot com</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#125577"> &para;</a><div class="date" title="2020-12-07 10:47"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom125577">
<div class="phpcode"><code><span class="html">proc_open is probably a better solution for most use cases as of PHP 7.4.  There is better control and platform independence.  If you still want to use shell_exec(), I like to wrap it with a function that allows better control.<br /><br />Something like below solves some problems with background process issues on apache/php.  It also <br /><br />public function sh_exec(string $cmd, string $outputfile = "", string $pidfile = "", bool $mergestderror = true, bool $bg = false) {<br />  $fullcmd = $cmd;<br />  if(strlen($outputfile) &gt; 0) $fullcmd .= " &gt;&gt; " . $outputfile;<br />  if($mergestderror) $fullcmd .= " 2&gt;&amp;1";<br />  if($bg) {<br />    $fullcmd = "nohup " . $fullcmd . " &amp;";<br />    if(strlen($pidfile)) $fullcmd .= " echo $! &gt; " . $pidfile;<br />  } else {<br />    if(strlen($pidfile) &gt; 0) $fullcmd .= "; echo $$ &gt; " . $pidfile;<br />  }<br />  shell_exec($fullcmd);<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="125899">  <div class="votes">
    <div id="Vu125899">
    <a href="https://www.php.net/manual/vote-note.php?id=125899&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd125899">
    <a href="https://www.php.net/manual/vote-note.php?id=125899&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V125899" title="60% like this...">
    2
    </div>
  </div>
  <a href="function.shell-exec.php.html#125899" class="name">
  <strong class="user"><em>Numabyte</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#125899"> &para;</a><div class="date" title="2021-03-11 06:01"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom125899">
<div class="phpcode"><code><span class="html">An important thing to consider is in some cases, like on MacOS, using "2&gt;&amp;1" to properly output string from exec() works well when you wrap the command in parenthesis. <br /><br />For example:<br />WITH PARENTHESIS AROUND CMD<br />$cmd = "(mysqldump -h l ocalhost -u root -ppassword --databases login_practice_db &gt; /Users/username/Desktop/testDB.sql) 2&gt;&amp;1";<br /><br />$sys = shell_exec($cmd ); //Works and produces an error (localhost is poorly spaced on purpose)<br /><br />WITHOUT PARENTHESIS AROUND CMD<br /> $cmd = "mysqldump -h l ocalhost -u root -ppassword --databases login_practice_db &gt; /Users/username/Desktop/testDB.sql 2&gt;&amp;1";<br /><br />$sys = shell_exec($cmd ); //Does nothing and goes blank as if the result were error free. Empty string.<br /><br />It's interesting how shell command execution can get down to how nuanced one might need to be with string parsing.</span></code></div>
  </div>
 </div>
  <div class="note" id="126980">  <div class="votes">
    <div id="Vu126980">
    <a href="https://www.php.net/manual/vote-note.php?id=126980&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd126980">
    <a href="https://www.php.net/manual/vote-note.php?id=126980&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V126980" title="60% like this...">
    1
    </div>
  </div>
  <a href="function.shell-exec.php.html#126980" class="name">
  <strong class="user"><em>Which shell?</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#126980"> &para;</a><div class="date" title="2022-04-10 06:31"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom126980">
<div class="phpcode"><code><span class="html">Does anything, anywhere mention WHICH SHELL shell_exec() runs?...on my system, it's running sh, instead of bash, which causes &lt;() Process Substitution to fail with no error msg.<br /><br />Shouldn't the docs mention which shell this function (&amp; backticks ``) runs?</span></code></div>
  </div>
 </div>
  <div class="note" id="78279">  <div class="votes">
    <div id="Vu78279">
    <a href="https://www.php.net/manual/vote-note.php?id=78279&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd78279">
    <a href="https://www.php.net/manual/vote-note.php?id=78279&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V78279" title="58% like this...">
    6
    </div>
  </div>
  <a href="function.shell-exec.php.html#78279" class="name">
  <strong class="user"><em>eric dot peyremorte at iut-valence dot fr</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#78279"> &para;</a><div class="date" title="2007-10-05 02:01"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom78279">
<div class="phpcode"><code><span class="html">I had trouble with accented caracters and shell_exec.<br /><br />ex :<br /><br />Executing this command from shell :<br /><br />/usr/bin/smbclient '//BREZEME/peyremor' -c 'dir' -U 'peyremor%*********' -d 0 -W 'ADMINISTRATIF' -O 'TCP_NODELAY IPTOS_LOWDELAY SO_KEEPALIVE SO_RCVBUF=8192 SO_SNDBUF=8192' -b 1200 -N 2&gt;&amp;1<br /><br />gave me that :<br /><br />Vidéos                             D        0  Tue Jun 12 14:41:21 2007<br />  Desktop                            DH        0  Mon Jun 18 17:41:36 2007<br /><br />Using php like that :<br /><br />shell_exec("/usr/bin/smbclient '//BREZEME/peyremor' -c 'dir' -U 'peyremor%*******' -d 0 -W 'ADMINISTRATIF' -O 'TCP_NODELAY IPTOS_LOWDELAY SO_KEEPALIVE SO_RCVBUF=8192 SO_SNDBUF=8192' -b 1200 -N 2&gt;&amp;1")<br /><br />gave me that :<br /><br />  Vid  Desktop                            DH        0  Mon Jun 18 17:41:36 2007<br /><br />The two lines were concatenated from the place where the accent was.<br /><br />I found the solution : php execute by default the command with LOCALE=C. <br /><br />I just added the following lines before shell_exec and the problem was solved :<br /><br />$locale = 'fr_FR.UTF-8';<br />setlocale(LC_ALL, $locale);<br />putenv('LC_ALL='.$locale);<br /><br />Just adapt it to your language locale.</span></code></div>
  </div>
 </div>
  <div class="note" id="90176">  <div class="votes">
    <div id="Vu90176">
    <a href="https://www.php.net/manual/vote-note.php?id=90176&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd90176">
    <a href="https://www.php.net/manual/vote-note.php?id=90176&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V90176" title="55% like this...">
    6
    </div>
  </div>
  <a href="function.shell-exec.php.html#90176" class="name">
  <strong class="user"><em>joelhy</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#90176"> &para;</a><div class="date" title="2009-04-08 06:29"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom90176">
<div class="phpcode"><code><span class="html">Here is a easy way to grab STDERR and discard STDOUT:<br />    add  '2&gt;&amp;1 1&gt; /dev/null' to the end of your shell command<br /><br />For example:<br /><span class="default">&lt;?php<br />$output </span><span class="keyword">= </span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">'ls file_not_exist 2&gt;&amp;1 1&gt; /dev/null'</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="79061">  <div class="votes">
    <div id="Vu79061">
    <a href="https://www.php.net/manual/vote-note.php?id=79061&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd79061">
    <a href="https://www.php.net/manual/vote-note.php?id=79061&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V79061" title="56% like this...">
    3
    </div>
  </div>
  <a href="function.shell-exec.php.html#79061" class="name">
  <strong class="user"><em>RoBorg</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#79061"> &para;</a><div class="date" title="2007-11-08 07:45"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom79061">
<div class="phpcode"><code><span class="html">The Subversion error "svn: Can't recode string" can be caused by the locale being wrong.  Try<br /><span class="default">&lt;?php<br />putenv</span><span class="keyword">(</span><span class="string">'LANG=en_US.UTF-8'</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span>(or whatever your preferred locale is) before you call shell_exec()</span></code></div>
  </div>
 </div>
  <div class="note" id="78506">  <div class="votes">
    <div id="Vu78506">
    <a href="https://www.php.net/manual/vote-note.php?id=78506&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd78506">
    <a href="https://www.php.net/manual/vote-note.php?id=78506&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V78506" title="54% like this...">
    5
    </div>
  </div>
  <a href="function.shell-exec.php.html#78506" class="name">
  <strong class="user"><em>kamermans at teratechnologies dot net</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#78506"> &para;</a><div class="date" title="2007-10-15 08:01"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom78506">
<div class="phpcode"><code><span class="html">I'm not sure what shell you are going to get with this function, but you can find out like this:<br /><br /><span class="default">&lt;?php<br />$cmd </span><span class="keyword">= </span><span class="string">'set'</span><span class="keyword">;<br />echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">.</span><span class="default">shell_exec</span><span class="keyword">(</span><span class="default">$cmd</span><span class="keyword">).</span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br /></span><span class="default">?&gt;<br /></span><br />On my FreeBSD 6.1 box I get this:<br /><br />USER=root<br />LD_LIBRARY_PATH=/usr/local/lib/apache2:<br />HOME=/root<br />PS1='$ '<br />OPTIND=1<br />PS2='&gt; '<br />LOGNAME=root<br />PPID=88057<br />PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin<br />SHELL=/bin/sh<br />IFS='     <br />'<br /><br />Very interesting.  Note that the PATH may not be as complete as you need.  I wanted to run Ghostscript via ImageMagik's "convert" and ended up having to add my path before running the command:<br /><br /><span class="default">&lt;?php<br />$cmd </span><span class="keyword">= </span><span class="string">'export PATH="/usr/local/bin/"; convert -scale 25%x25% file1.pdf[0] file2.png 2&gt;&amp;1'</span><span class="keyword">;<br />echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">.</span><span class="default">shell_exec</span><span class="keyword">(</span><span class="default">$cmd</span><span class="keyword">).</span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br /></span><span class="default">?&gt;<br /></span><br />ALSO, note that shell_exec() does not grab STDERR, so use "2&gt;&amp;1" to redirect it to STDOUT and catch it.</span></code></div>
  </div>
 </div>
  <div class="note" id="20329">  <div class="votes">
    <div id="Vu20329">
    <a href="https://www.php.net/manual/vote-note.php?id=20329&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd20329">
    <a href="https://www.php.net/manual/vote-note.php?id=20329&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V20329" title="55% like this...">
    2
    </div>
  </div>
  <a href="function.shell-exec.php.html#20329" class="name">
  <strong class="user"><em>tonysb at gmx dot net</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#20329"> &para;</a><div class="date" title="2002-03-30 12:57"><strong>21 years ago</strong></div>
  <div class="text" id="Hcom20329">
<div class="phpcode"><code><span class="html">shell_exec is extremely useful as a substitute for the virtual() function where unavailable (Microsoft IIS for example). All you have to do is remove the content type string sent in the header:<br /><br />&lt;? <br />$mstrng = shell_exec('yourcgiscript.cgi');<br />$mstrng = ereg_replace( "Content-type: text/html", "", $mstrng );<br />echo $mstrng;<br />?&gt;<br /><br />This works fine for me as a substitute for SSI or the virtual() func.<br /><br />Anton Babadjanov<br /><a href="http://www.vbcn.com.ar" rel="nofollow" target="_blank">http://www.vbcn.com.ar</a></span></code></div>
  </div>
 </div>
  <div class="note" id="115702">  <div class="votes">
    <div id="Vu115702">
    <a href="https://www.php.net/manual/vote-note.php?id=115702&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd115702">
    <a href="https://www.php.net/manual/vote-note.php?id=115702&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V115702" title="52% like this...">
    2
    </div>
  </div>
  <a href="function.shell-exec.php.html#115702" class="name">
  <strong class="user"><em>jack dot harris-7ot2j4ip at yopmail dot Com</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#115702"> &para;</a><div class="date" title="2014-09-11 01:52"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom115702">
<div class="phpcode"><code><span class="html">On Windows, if shell_exec does NOT return the result you expected and the PC is on an enterprise network, set the Apache service (or wampapache) to run under your account instead of the 'Local system account'. Your account must have admin privileges.<br /><br />To change the account go to console services, right click on the Apache service, choose properties, and select the connection tab.</span></code></div>
  </div>
 </div>
  <div class="note" id="83151">  <div class="votes">
    <div id="Vu83151">
    <a href="https://www.php.net/manual/vote-note.php?id=83151&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd83151">
    <a href="https://www.php.net/manual/vote-note.php?id=83151&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V83151" title="53% like this...">
    2
    </div>
  </div>
  <a href="function.shell-exec.php.html#83151" class="name">
  <strong class="user"><em>saivert at saivert dot com</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#83151"> &para;</a><div class="date" title="2008-05-12 08:48"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom83151">
<div class="phpcode"><code><span class="html">How to get the volume label of a drive on Windows<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">function </span><span class="default">GetVolumeLabel</span><span class="keyword">(</span><span class="default">$drive</span><span class="keyword">) {<br />  </span><span class="comment">// Try to grab the volume name<br />  </span><span class="keyword">if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'#Volume in drive [a-zA-Z]* is (.*)\n#i'</span><span class="keyword">, </span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">'dir '</span><span class="keyword">.</span><span class="default">$drive</span><span class="keyword">.</span><span class="string">':'</span><span class="keyword">), </span><span class="default">$m</span><span class="keyword">)) {<br />    </span><span class="default">$volname </span><span class="keyword">= </span><span class="string">' ('</span><span class="keyword">.</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">')'</span><span class="keyword">;<br />  } else {<br />    </span><span class="default">$volname </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />  }<br />return </span><span class="default">$volname</span><span class="keyword">;<br />}<br /><br />print </span><span class="default">GetVolumeLabel</span><span class="keyword">(</span><span class="string">"c"</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;<br /></span><br />Note: The regular expression assumes a english version of Windows is in use. modify it accordingly for a different localized copy of Windows.</span></code></div>
  </div>
 </div>
  <div class="note" id="123710">  <div class="votes">
    <div id="Vu123710">
    <a href="https://www.php.net/manual/vote-note.php?id=123710&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123710">
    <a href="https://www.php.net/manual/vote-note.php?id=123710&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123710" title="52% like this...">
    1
    </div>
  </div>
  <a href="function.shell-exec.php.html#123710" class="name">
  <strong class="user"><em>pedroxam at gmail dot com</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#123710"> &para;</a><div class="date" title="2019-03-20 10:50"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom123710">
<div class="phpcode"><code><span class="html">Here is my gist to all:<br /><br />function execCommand($command, $log) {<br /><br />    if (substr(php_uname(), 0, 7) == "Windows")<br />    {<br />        //windows<br />        pclose(popen("start /B " . $command . " 1&gt; $log 2&gt;&amp;1", "r"));<br />    }<br />    else<br />    {<br />        //linux<br />        shell_exec( $command . " 1&gt; $log 2&gt;&amp;1" );<br />    }<br />    <br />    return false;<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="95651">  <div class="votes">
    <div id="Vu95651">
    <a href="https://www.php.net/manual/vote-note.php?id=95651&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd95651">
    <a href="https://www.php.net/manual/vote-note.php?id=95651&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V95651" title="52% like this...">
    3
    </div>
  </div>
  <a href="function.shell-exec.php.html#95651" class="name">
  <strong class="user"><em>codeslinger at compsalot dot com</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#95651"> &para;</a><div class="date" title="2010-01-13 06:47"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom95651">
<div class="phpcode"><code><span class="html">it took me a heck of a lot of head banging to finally solve this problem so I thought that I would mention it here.<br /><br />If you are using Eclipse and you try to do something like<br /><br /><span class="default">&lt;?php<br /><br />    $out </span><span class="keyword">= </span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">"php -s </span><span class="default">$File</span><span class="string">"</span><span class="keyword">);   </span><span class="comment">//this fails <br /></span><span class="default">?&gt;<br /></span><br />it will always fail when run inside of the Eclipse debugger.  This happens on both Linux and Windows.  I finally isolated the problem to changes that Eclipse makes to the environment when debugging.   <br /><br />The fix is to force the ini setting.  If you don't need an ini then -n is sufficient.<br /><br /><span class="default">&lt;?php<br />    <br />    $out </span><span class="keyword">= </span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">"php -n -s </span><span class="default">$File</span><span class="string">"</span><span class="keyword">);   </span><span class="comment">//this works<br /></span><span class="default">?&gt;<br /></span><br />Of course if you run it outside of the debugger then it works fine without the -n.   You may want to use a debug flag to control this behavior.</span></code></div>
  </div>
 </div>
  <div class="note" id="129009">  <div class="votes">
    <div id="Vu129009">
    <a href="https://www.php.net/manual/vote-note.php?id=129009&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd129009">
    <a href="https://www.php.net/manual/vote-note.php?id=129009&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V129009" title="100% like this...">
    1
    </div>
  </div>
  <a href="function.shell-exec.php.html#129009" class="name">
  <strong class="user"><em>mamedul.github.io</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#129009"> &para;</a><div class="date" title="2023-11-06 11:16"><strong>3 months ago</strong></div>
  <div class="text" id="Hcom129009">
<div class="phpcode"><code><span class="html">Cross function solutions for execute command using PHP-<br /><br />function php_exec( $cmd ){<br /><br />    if( function_exists('exec') ){<br />        $output = array();<br />        $return_var = 0;<br />        exec($cmd, $output, $return_var);<br />        return implode( " ", array_values($output) );<br />    }else if( function_exists('shell_exec') ){<br />        return shell_exec($cmd);<br />    }else if( function_exists('system') ){<br />        $return_var = 0;<br />        return system($cmd, $return_var);<br />    }else if( function_exists('passthru') ){<br />        $return_var = 0;<br />        ob_start();<br />        passthru($cmd, $return_var);<br />        $output = ob_get_contents();<br />        ob_end_clean(); //Use this instead of ob_flush()<br />        return $output;<br />    }else  if( function_exists('proc_open') ){<br />        $proc=proc_open($cmd,<br />            array(<br />                array("pipe","r"),<br />                array("pipe","w"),<br />                array("pipe","w")<br />            ),<br />            $pipes);<br />        return stream_get_contents($pipes[1]);<br />    }else{<br />        return "@PHP_COMMAND_NOT_SUPPORT";<br />    }    <br /><br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="67183">  <div class="votes">
    <div id="Vu67183">
    <a href="https://www.php.net/manual/vote-note.php?id=67183&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd67183">
    <a href="https://www.php.net/manual/vote-note.php?id=67183&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V67183" title="52% like this...">
    2
    </div>
  </div>
  <a href="function.shell-exec.php.html#67183" class="name">
  <strong class="user"><em>rustleb at hotmail dot com</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#67183"> &para;</a><div class="date" title="2006-06-05 01:45"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom67183">
<div class="phpcode"><code><span class="html">For capturing stdout and stderr, when you don't care about the intermediate files, I've had better results with . . .<br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">cmd_exec</span><span class="keyword">(</span><span class="default">$cmd</span><span class="keyword">, &amp;</span><span class="default">$stdout</span><span class="keyword">, &amp;</span><span class="default">$stderr</span><span class="keyword">)<br />{<br />    </span><span class="default">$outfile </span><span class="keyword">= </span><span class="default">tempnam</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">, </span><span class="string">"cmd"</span><span class="keyword">);<br />    </span><span class="default">$errfile </span><span class="keyword">= </span><span class="default">tempnam</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">, </span><span class="string">"cmd"</span><span class="keyword">);<br />    </span><span class="default">$descriptorspec </span><span class="keyword">= array(<br />        </span><span class="default">0 </span><span class="keyword">=&gt; array(</span><span class="string">"pipe"</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">),<br />        </span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="string">"file"</span><span class="keyword">, </span><span class="default">$outfile</span><span class="keyword">, </span><span class="string">"w"</span><span class="keyword">),<br />        </span><span class="default">2 </span><span class="keyword">=&gt; array(</span><span class="string">"file"</span><span class="keyword">, </span><span class="default">$errfile</span><span class="keyword">, </span><span class="string">"w"</span><span class="keyword">)<br />    );<br />    </span><span class="default">$proc </span><span class="keyword">= </span><span class="default">proc_open</span><span class="keyword">(</span><span class="default">$cmd</span><span class="keyword">, </span><span class="default">$descriptorspec</span><span class="keyword">, </span><span class="default">$pipes</span><span class="keyword">);<br />    <br />    if (!</span><span class="default">is_resource</span><span class="keyword">(</span><span class="default">$proc</span><span class="keyword">)) return </span><span class="default">255</span><span class="keyword">;<br /><br />    </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);    </span><span class="comment">//Don't really want to give any input<br /><br />    </span><span class="default">$exit </span><span class="keyword">= </span><span class="default">proc_close</span><span class="keyword">(</span><span class="default">$proc</span><span class="keyword">);<br />    </span><span class="default">$stdout </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="default">$outfile</span><span class="keyword">);<br />    </span><span class="default">$stderr </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="default">$errfile</span><span class="keyword">);<br /><br />    </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$outfile</span><span class="keyword">);<br />    </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$errfile</span><span class="keyword">);<br />    return </span><span class="default">$exit</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span><br />This isn't much different than a redirection, except it takes care of the temp files for you (you may need to change the directory from ".") and it blocks automatically due to the proc_close call.  This mimics the shell_exec behavior, plus gets you stderr.</span></code></div>
  </div>
 </div>
  <div class="note" id="129029">  <div class="votes">
    <div id="Vu129029">
    <a href="https://www.php.net/manual/vote-note.php?id=129029&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd129029">
    <a href="https://www.php.net/manual/vote-note.php?id=129029&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V129029" title="no votes...">
    0
    </div>
  </div>
  <a href="function.shell-exec.php.html#129029" class="name">
  <strong class="user"><em>shell master</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#129029"> &para;</a><div class="date" title="2023-11-10 11:27"><strong>3 months ago</strong></div>
  <div class="text" id="Hcom129029">
<div class="phpcode"><code><span class="html">You can use a one liner to print the output of a shell script like so:<br /><br /><span class="default">&lt;?= shell_exec</span><span class="keyword">(</span><span class="string">"/proof.sh"</span><span class="keyword">); </span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="48654">  <div class="votes">
    <div id="Vu48654">
    <a href="https://www.php.net/manual/vote-note.php?id=48654&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd48654">
    <a href="https://www.php.net/manual/vote-note.php?id=48654&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V48654" title="52% like this...">
    2
    </div>
  </div>
  <a href="function.shell-exec.php.html#48654" class="name"><strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#48654"> &para;</a><div class="date" title="2005-01-03 09:10"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom48654">
<div class="phpcode"><code><span class="html">Be careful as to how you elevate privileges to your php script.  It's a good idea to use caution and planing.  It is easy to open up huge security holes.  Here are a couple of helpful hints I've gathered from experimentation and Unix documentation.<br /><br />Things to think about:<br /><br />1. If you are running php as an Apache module in Unix then every system command you run is run as user apache.  This just makes sense.. Unix won't allow privileges to be elevated in this manner.  If you need to run a system command with elevated privileges think through the problem carefully!<br /><br />2. You are absolutely insane if you decide to run apache as root.  You may as well kick yourself in the face.  There is always a better way to do it.<br /><br />3. If you decide to use a SUID it is best not to SUID a script.  SUID is disabled for scripts on many flavors of Unix.  SUID scripts open up security holes, so you don't always want to go this route even if it is an option.  Write a simple binary and elevate the privileges of the binary as a SUID.  In my own opinion it is a horrible idea to pass a system command through a SUID-- ie have the SUID accept the name of a command as a parameter.  You may as well run Apache as root!</span></code></div>
  </div>
 </div>
  <div class="note" id="109693">  <div class="votes">
    <div id="Vu109693">
    <a href="https://www.php.net/manual/vote-note.php?id=109693&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd109693">
    <a href="https://www.php.net/manual/vote-note.php?id=109693&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V109693" title="51% like this...">
    1
    </div>
  </div>
  <a href="function.shell-exec.php.html#109693" class="name">
  <strong class="user"><em>wally at soggysoftware dot co dot uk</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#109693"> &para;</a><div class="date" title="2012-08-10 11:39"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom109693">
<div class="phpcode"><code><span class="html">As others have noted, shell_exec and the backtick operator (`) both return NULL if the executed command doesn't output anything.<br /><br />This can be worked around by doing anything like the following:<br /><br />shell_exec ("silentcmd &amp;&amp; echo ' '");<br /><br />Here we're simply outputting blank whitespace if  the command succeeds - which satisfies this slightly strange issue.  From there, you can trim() the command output etc.</span></code></div>
  </div>
 </div>
  <div class="note" id="37971">  <div class="votes">
    <div id="Vu37971">
    <a href="https://www.php.net/manual/vote-note.php?id=37971&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd37971">
    <a href="https://www.php.net/manual/vote-note.php?id=37971&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V37971" title="51% like this...">
    3
    </div>
  </div>
  <a href="function.shell-exec.php.html#37971" class="name">
  <strong class="user"><em>jessop &lt;AT&gt; bigfoot &lt;DOT&gt; com</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#37971"> &para;</a><div class="date" title="2003-12-03 12:19"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom37971">
<div class="phpcode"><code><span class="html">Just a quick reminder for those trying to use shell_exec on a unix-type platform and can't seem to get it to work. PHP executes as the web user on the system (generally www for Apache), so you need to make sure that the web user has rights to whatever files or directories that you are trying to use in the shell_exec command. Other wise, it won't appear to be doing anything.</span></code></div>
  </div>
 </div>
  <div class="note" id="96249">  <div class="votes">
    <div id="Vu96249">
    <a href="https://www.php.net/manual/vote-note.php?id=96249&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd96249">
    <a href="https://www.php.net/manual/vote-note.php?id=96249&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V96249" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.shell-exec.php.html#96249" class="name">
  <strong class="user"><em>martin at intelli-gens dot com</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#96249"> &para;</a><div class="date" title="2010-02-17 03:21"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom96249">
<div class="phpcode"><code><span class="html">Also after lots of hair pulling why shell_exec didn't want to work for me I found out that in my case some things needed to be set (which normally are set by default).<br /><br />the options -jo  <br />-j means: don't recreate the paths found in the archive<br />-o means: always overwrite files<br /><br />And I needed to specify the destination path (even though it should unzip in the same directory when not specified), this is done by -d [path]<br /><br />The strange thing was that I didn't have to put these options when I would give the command on the command-line, only when I would call it with shell_exec.<br /><br />So the complete command in php would be for me:<br /><br />shell_exec('unzip -jo /path_to_archive/archive.zip  -d /destination_path')<br /><br />And putting en echo in front will help you a lot.<br />it should tell you something like this:<br />     <br /><br />Archive:  /path_to_zip/archive.zip<br />  inflating: /destination_path/file1.jpeg  <br />  inflating: /destination_path/file2.jpeg<br />  inflating: /destination_path/file3.jpeg</span></code></div>
  </div>
 </div>
  <div class="note" id="82278">  <div class="votes">
    <div id="Vu82278">
    <a href="https://www.php.net/manual/vote-note.php?id=82278&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd82278">
    <a href="https://www.php.net/manual/vote-note.php?id=82278&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V82278" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.shell-exec.php.html#82278" class="name">
  <strong class="user"><em>gabekon at gmail dot com</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#82278"> &para;</a><div class="date" title="2008-04-03 08:33"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom82278">
<div class="phpcode"><code><span class="html">RE: kamermans note,<br /><br />I was having a similar problem with the PATH variable when using shell_exec. Even with a hard-coded full path to a binary, I also got an error about a .so file that could not be found. After some reading up, I realized I had to set the LD_LIBRARY_PATH variable:<br /><br /><span class="default">&lt;?php<br /><br />$command </span><span class="keyword">= </span><span class="string">'export LD_LIBRARY_PATH="' </span><span class="keyword">. </span><span class="default">$path_to_library_dir </span><span class="keyword">.</span><span class="string">'"; ' </span><span class="keyword">. </span><span class="default">$path_to_binary</span><span class="keyword">;<br /></span><span class="default">shell_exec</span><span class="keyword">(</span><span class="default">$command</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;<br /></span><br />Hope this saves someone a headache,<br /><br />- G</span></code></div>
  </div>
 </div>
  <div class="note" id="31235">  <div class="votes">
    <div id="Vu31235">
    <a href="https://www.php.net/manual/vote-note.php?id=31235&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd31235">
    <a href="https://www.php.net/manual/vote-note.php?id=31235&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V31235" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.shell-exec.php.html#31235" class="name">
  <strong class="user"><em>mcbeth at broggs dot org</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#31235"> &para;</a><div class="date" title="2003-04-14 02:18"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom31235">
<div class="phpcode"><code><span class="html">As far as error checking on the last example.  Several of the shells have the &amp;&amp; operator, so you just string your commands together using it instead of ; If at any time any of the programs fail, you will return without running the rest</span></code></div>
  </div>
 </div>
  <div class="note" id="88621">  <div class="votes">
    <div id="Vu88621">
    <a href="https://www.php.net/manual/vote-note.php?id=88621&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd88621">
    <a href="https://www.php.net/manual/vote-note.php?id=88621&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V88621" title="48% like this...">
    -1
    </div>
  </div>
  <a href="function.shell-exec.php.html#88621" class="name">
  <strong class="user"><em>dburles@NOSPAMgmailDOTcom</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#88621"> &para;</a><div class="date" title="2009-02-01 03:07"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom88621">
<div class="phpcode"><code><span class="html">Easy way to capture error output in windows<br /><br />// we'll execute a php script as an example:<br />$out = shell_exec("php test.php 2&gt; output");<br />print $out ? $out : join("", file("output"));<br /><br />We assume in this case if the script produces output it has ran ok, the $out variable will then contain the output, if $out is empty then we read the captured error output from a file simply called 'output'.<br /><br />Hope this helps someone</span></code></div>
  </div>
 </div>
  <div class="note" id="59898">  <div class="votes">
    <div id="Vu59898">
    <a href="https://www.php.net/manual/vote-note.php?id=59898&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd59898">
    <a href="https://www.php.net/manual/vote-note.php?id=59898&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V59898" title="47% like this...">
    -2
    </div>
  </div>
  <a href="function.shell-exec.php.html#59898" class="name">
  <strong class="user"><em>Ashraf Kaabi</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#59898"> &para;</a><div class="date" title="2005-12-19 10:06"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom59898">
<div class="phpcode"><code><span class="html">I've write a Full Class for Run in Background, Kill PID , check if is Running <br /><br /><span class="default">&lt;?php<br /></span><span class="comment">/**<br /> * @author     Ashraf M Kaabi<br /> * @name       Advance Linux Exec<br /> */<br /></span><span class="keyword">class </span><span class="default">exec </span><span class="keyword">{<br />    </span><span class="comment">/**<br />     * Run Application in background<br />     *<br />     * @param     unknown_type $Command<br />     * @param     unknown_type $Priority<br />     * @return     PID<br />     */<br />    </span><span class="keyword">function </span><span class="default">background</span><span class="keyword">(</span><span class="default">$Command</span><span class="keyword">, </span><span class="default">$Priority </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){<br />       if(</span><span class="default">$Priority</span><span class="keyword">)<br />           </span><span class="default">$PID </span><span class="keyword">= </span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">"nohup nice -n </span><span class="default">$Priority</span><span class="string"> </span><span class="default">$Command</span><span class="string"> &gt; /dev/null &amp; echo $!"</span><span class="keyword">);<br />       else<br />           </span><span class="default">$PID </span><span class="keyword">= </span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">"nohup </span><span class="default">$Command</span><span class="string"> &gt; /dev/null &amp; echo $!"</span><span class="keyword">);<br />       return(</span><span class="default">$PID</span><span class="keyword">);<br />   }<br />   </span><span class="comment">/**<br />    * Check if the Application running !<br />    *<br />    * @param     unknown_type $PID<br />    * @return     boolen<br />    */<br />   </span><span class="keyword">function </span><span class="default">is_running</span><span class="keyword">(</span><span class="default">$PID</span><span class="keyword">){<br />       </span><span class="default">exec</span><span class="keyword">(</span><span class="string">"ps </span><span class="default">$PID</span><span class="string">"</span><span class="keyword">, </span><span class="default">$ProcessState</span><span class="keyword">);<br />       return(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$ProcessState</span><span class="keyword">) &gt;= </span><span class="default">2</span><span class="keyword">);<br />   }<br />   </span><span class="comment">/**<br />    * Kill Application PID<br />    *<br />    * @param  unknown_type $PID<br />    * @return boolen<br />    */<br />   </span><span class="keyword">function </span><span class="default">kill</span><span class="keyword">(</span><span class="default">$PID</span><span class="keyword">){<br />       if(</span><span class="default">exec</span><span class="keyword">::</span><span class="default">is_running</span><span class="keyword">(</span><span class="default">$PID</span><span class="keyword">)){<br />           </span><span class="default">exec</span><span class="keyword">(</span><span class="string">"kill -KILL </span><span class="default">$PID</span><span class="string">"</span><span class="keyword">);<br />           return </span><span class="default">true</span><span class="keyword">;<br />       }else return </span><span class="default">false</span><span class="keyword">;<br />   }<br />};<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="38905">  <div class="votes">
    <div id="Vu38905">
    <a href="https://www.php.net/manual/vote-note.php?id=38905&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd38905">
    <a href="https://www.php.net/manual/vote-note.php?id=38905&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V38905" title="48% like this...">
    -1
    </div>
  </div>
  <a href="function.shell-exec.php.html#38905" class="name">
  <strong class="user"><em>Martin Rampersad</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#38905"> &para;</a><div class="date" title="2004-01-11 01:13"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom38905">
<div class="phpcode"><code><span class="html">I have PHP (CGI) and Apache. I also shell_exec() shell scripts which use PHP CLI. This combination destroys the string value returned from the call. I get binary garbage.  Shell scripts that start with #!/usr/bin/bash return their output properly.<br /><br />A solution is to force a clean environment.  PHP CLI no longer had the CGI environment variables to choke on.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">// Binary garbage.<br /></span><span class="default">$ExhibitA </span><span class="keyword">= </span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">'/home/www/myscript'</span><span class="keyword">);<br /><br /></span><span class="comment">// Perfect.<br /></span><span class="default">$ExhibitB </span><span class="keyword">= </span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">'env -i /home/www/myscript'</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;<br /></span><br />-- start /home/www/myscript<br />#!/usr/local/bin/phpcli<br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">echo(</span><span class="string">"Output.\n"</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;<br /></span>-- end /home/www/myscript</span></code></div>
  </div>
 </div>
  <div class="note" id="69706">  <div class="votes">
    <div id="Vu69706">
    <a href="https://www.php.net/manual/vote-note.php?id=69706&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd69706">
    <a href="https://www.php.net/manual/vote-note.php?id=69706&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V69706" title="47% like this...">
    -2
    </div>
  </div>
  <a href="function.shell-exec.php.html#69706" class="name">
  <strong class="user"><em>Paul Cook</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#69706"> &para;</a><div class="date" title="2006-09-16 11:00"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom69706">
<div class="phpcode"><code><span class="html">The technique mentioned by Nathan De Hert below is rather insecure -- you should never leave a password lying around in a file readable by the apache user.<br /><br />If you need this sort of functionality on *nix systems, have a look at the /etc/sudo file (edited with the command 'visudo'). The tag NOPASSWD allows specified commands to be run as root by another user, without needing to specify a password. It's a little extra configuration, but much more secure.</span></code></div>
  </div>
 </div>
  <div class="note" id="122676">  <div class="votes">
    <div id="Vu122676">
    <a href="https://www.php.net/manual/vote-note.php?id=122676&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122676">
    <a href="https://www.php.net/manual/vote-note.php?id=122676&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122676" title="45% like this...">
    -1
    </div>
  </div>
  <a href="function.shell-exec.php.html#122676" class="name">
  <strong class="user"><em>smithnigelw at gmail dot com</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#122676"> &para;</a><div class="date" title="2018-04-27 02:13"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom122676">
<div class="phpcode"><code><span class="html">With PHP on Windows, if you get the 'Warning: shell_exec() [function.shell-exec]: Unable to execute' error, then you need to check the permissions on file 'C:\WINDOWS\system32\cmd.exe'. You need read/execute permission on this file.  I would recommend using the sysinternals Process Monitor 'procmon.exe' to confirm the user that is trying to run 'cmd.exe'. Filter on 'Process Name' is 'php-cgi.exe' and 'Path' ends with 'cmd.exe'. Look at the event properties for the task with the access denied error, and it will show you the 'Impersonating' user name.  This is usually the 'Internet Guest Account', often 'NT AUTHORITY\IUSR'.</span></code></div>
  </div>
 </div>
  <div class="note" id="51782">  <div class="votes">
    <div id="Vu51782">
    <a href="https://www.php.net/manual/vote-note.php?id=51782&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd51782">
    <a href="https://www.php.net/manual/vote-note.php?id=51782&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V51782" title="47% like this...">
    -1
    </div>
  </div>
  <a href="function.shell-exec.php.html#51782" class="name">
  <strong class="user"><em>phillipberry at NOSPAM dot blisswebhosting dot com</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#51782"> &para;</a><div class="date" title="2005-04-11 01:13"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom51782">
<div class="phpcode"><code><span class="html">I found something odd.<br /><br />If you run exec then straight after shell_exec the shell_exec will simply not run and will return NULL.<br /><br />To get it to work i put a sleep(5) after the exec and now shell_exec works fine.</span></code></div>
  </div>
 </div>
  <div class="note" id="69160">  <div class="votes">
    <div id="Vu69160">
    <a href="https://www.php.net/manual/vote-note.php?id=69160&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd69160">
    <a href="https://www.php.net/manual/vote-note.php?id=69160&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V69160" title="46% like this...">
    -1
    </div>
  </div>
  <a href="function.shell-exec.php.html#69160" class="name">
  <strong class="user"><em>ruan at nospam dot tillcor dot com</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#69160"> &para;</a><div class="date" title="2006-08-24 08:31"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom69160">
<div class="phpcode"><code><span class="html">When following Kenneth's method for executing root scripts via the nanoweb server mentioned on this page you would most likely need to be able to run a text-mode browser like lynx and pass the php script to it (works great).<br /><br />After struggling for a while (lynx kept asking me to download the file instead of executing it), I realised that I had to install php-cgi additionally and modify the nanoweb config file  to use that php interpreter instead of /usr/bin/php. (On Debian this is the CLI version).<br /><br />On Ubuntu 6.06:<br /><br />apt-get install php5-cgi<br /><br />After editing /etc/nanoweb/nanoweb.conf and a quick restart of the web server, lynx and links will execute your PHP scripts properly.<br /><br />Hope this helps somebody else out there :)<br /><br />Ruan Fourie</span></code></div>
  </div>
 </div>
  <div class="note" id="44438">  <div class="votes">
    <div id="Vu44438">
    <a href="https://www.php.net/manual/vote-note.php?id=44438&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd44438">
    <a href="https://www.php.net/manual/vote-note.php?id=44438&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V44438" title="46% like this...">
    -2
    </div>
  </div>
  <a href="function.shell-exec.php.html#44438" class="name">
  <strong class="user"><em>James McCormack</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#44438"> &para;</a><div class="date" title="2004-08-05 01:50"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom44438">
<div class="phpcode"><code><span class="html">I had a perl program which ran fine from command line but not using shell_exec(), exec() or system() - nothing was being returned. I was using the full path and permissions were set correctly.<br /><br />It turned out the perl program was using more memory than my PHP.INI file was set to allow. Increasing "memory_limit" solved the problem.</span></code></div>
  </div>
 </div>
  <div class="note" id="56935">  <div class="votes">
    <div id="Vu56935">
    <a href="https://www.php.net/manual/vote-note.php?id=56935&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd56935">
    <a href="https://www.php.net/manual/vote-note.php?id=56935&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V56935" title="45% like this...">
    -2
    </div>
  </div>
  <a href="function.shell-exec.php.html#56935" class="name">
  <strong class="user"><em>concept at conceptonline dot hu</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#56935"> &para;</a><div class="date" title="2005-09-19 02:02"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom56935">
<div class="phpcode"><code><span class="html">Interestingly, if you execute a script which is not in your path (or you have made a typo, or if the script does no exist at all), you will get no return value. The error will be logged into the error_log of your webserver.<br /><br />Someone could add a note how this can be (if it could be) overriden, as the standard behaviour is not really fool-proof.</span></code></div>
  </div>
 </div>
  <div class="note" id="57215">  <div class="votes">
    <div id="Vu57215">
    <a href="https://www.php.net/manual/vote-note.php?id=57215&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd57215">
    <a href="https://www.php.net/manual/vote-note.php?id=57215&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V57215" title="45% like this...">
    -3
    </div>
  </div>
  <a href="function.shell-exec.php.html#57215" class="name">
  <strong class="user"><em>php [AT] jsomers [DOT] be</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#57215"> &para;</a><div class="date" title="2005-09-27 06:00"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom57215">
<div class="phpcode"><code><span class="html"><span class="default">&lt;?php<br /><br /></span><span class="comment">/**<br /> * PHP Kill Process<br /> *<br /> * Sometimes, it can happen a script keeps running when it shouldn't, and it<br /> * won't stop after we close the browser, or shutdown the computer. Because it's<br /> * not always easy to use SSH there's a workaround.<br /> *<br /> * @author      Jensen Somers &lt;php@jsomers.be&gt;<br /> * @version     1.0<br /> */<br /> <br /></span><span class="keyword">class </span><span class="default">KillAllProcesses </span><span class="keyword">{<br />    </span><span class="comment">/**<br />     * Construct the class<br />     */<br />    </span><span class="keyword">function </span><span class="default">killallprocesses</span><span class="keyword">() {<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">listItems</span><span class="keyword">();<br />    }<br />    <br />    </span><span class="comment">/**<br />     * List all the items<br />     */<br />    </span><span class="keyword">function </span><span class="default">listItems</span><span class="keyword">() {<br />        </span><span class="comment">/*<br />         * PS   Unix command to report process status<br />         * -x   Select processes without controlling ttys<br />         *<br />         * Output will look like:<br />         *      16479 pts/13   S      0:00 -bash<br />         *      21944 pts/13   R      0:00 ps -x<br />         *<br />         */<br />        </span><span class="default">$output </span><span class="keyword">=   </span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">'ps -x'</span><span class="keyword">);<br />        <br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">output</span><span class="keyword">(</span><span class="default">$output</span><span class="keyword">);<br />        <br />        </span><span class="comment">// Put each individual line into an array<br />        </span><span class="default">$array  </span><span class="keyword">=   </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$output</span><span class="keyword">);<br />        <br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">doKill</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />    }<br />    <br />    </span><span class="comment">/**<br />     * Print the process list<br />     * @param   string  $output<br />     */<br />    </span><span class="keyword">function </span><span class="default">output</span><span class="keyword">(</span><span class="default">$output</span><span class="keyword">) {<br />        print   </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">.</span><span class="default">$output</span><span class="keyword">.</span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />    }<br />    <br />    </span><span class="comment">/**<br />     * Kill all the processes<br />     * It should be possible to filter in this, but I won't do it now.<br />     * @param   array   $array<br />     */<br />    </span><span class="keyword">function </span><span class="default">doKill</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br />        </span><span class="comment">/*<br />         * Because the first line of our $output will look like<br />         *        PID TTY      STAT   TIME COMMAND<br />         * we'll skip this one.<br />         */<br />        </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />            </span><span class="default">$id </span><span class="keyword">=   </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">0</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="string">' ?'</span><span class="keyword">));<br />            </span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">'kill '</span><span class="keyword">.</span><span class="default">$id</span><span class="keyword">);<br />        }<br />    }<br />}<br /><br />new </span><span class="default">KillAllProcesses</span><span class="keyword">();<br /><br /></span><span class="default">?&gt;<br /></span><br />It's not the very best solution, but I've used it a couple of times when I needed to do it quick without to much trouble.<br />Make not I kill all the processes, on my server px -x will only return like 4 times /sbin/apache and it's pretty safe to kill them without any trouble.</span></code></div>
  </div>
 </div>
  <div class="note" id="61998">  <div class="votes">
    <div id="Vu61998">
    <a href="https://www.php.net/manual/vote-note.php?id=61998&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd61998">
    <a href="https://www.php.net/manual/vote-note.php?id=61998&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V61998" title="42% like this...">
    -2
    </div>
  </div>
  <a href="function.shell-exec.php.html#61998" class="name">
  <strong class="user"><em>rigsbr at yahoo dot com dot br</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#61998"> &para;</a><div class="date" title="2006-02-16 06:24"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom61998">
<div class="phpcode"><code><span class="html">If you need to execute a command without permission and could not execute it by ssh or install any extension, there is a way in Apache 1.3.x and PHP 4.<br />Create a file on cgi-bin directory, like this:<br /><br />#!/usr/bin/php<br />&lt;?<br />  echo shell_exec('whoami');<br />?&gt;<br /><br />Don't forget to set the file you created the permission to execute it. Hence, call it from browser and you will se that this script will be executed by the shell user and not the user nobody (apache default user if running a PHP script).</span></code></div>
  </div>
 </div>
  <div class="note" id="123226">  <div class="votes">
    <div id="Vu123226">
    <a href="https://www.php.net/manual/vote-note.php?id=123226&amp;page=function.shell-exec&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123226">
    <a href="https://www.php.net/manual/vote-note.php?id=123226&amp;page=function.shell-exec&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123226" title="22% like this...">
    -12
    </div>
  </div>
  <a href="function.shell-exec.php.html#123226" class="name">
  <strong class="user"><em>ricky at rocker dot com</em></strong></a><a class="genanchor" href="function.shell-exec.php.html#123226"> &para;</a><div class="date" title="2018-10-12 10:21"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom123226">
<div class="phpcode"><code><span class="html">despite: <br /><br />shell_exec("env")<br /><br />returning <br /><br />SHELL=/bin/bash<br /><br />I simply could not get:<br /><br />shell_exec("bash command &lt;(another bash command)")<br /><br />to work. I have now got it working by forcing the bash shell using: <br /><br />shell_exec("bash -c \"bash command &lt;(another bash command)\"")</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.shell-exec&amp;redirect=https://www.php.net/manual/ru/function.shell-exec.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.exec.php.html">Функции запуска программ</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.escapeshellarg.php.html" title="escapeshellarg">escapeshellarg</a>
                        </li>
                                                <li class="">
                            <a href="function.escapeshellcmd.php.html" title="escapeshellcmd">escapeshellcmd</a>
                        </li>
                                                <li class="">
                            <a href="function.exec.php.html" title="exec">exec</a>
                        </li>
                                                <li class="">
                            <a href="function.passthru.php.html" title="passthru">passthru</a>
                        </li>
                                                <li class="">
                            <a href="function.proc-close.php.html" title="proc_&#8203;close">proc_&#8203;close</a>
                        </li>
                                                <li class="">
                            <a href="function.proc-get-status.php.html" title="proc_&#8203;get_&#8203;status">proc_&#8203;get_&#8203;status</a>
                        </li>
                                                <li class="">
                            <a href="function.proc-nice.php.html" title="proc_&#8203;nice">proc_&#8203;nice</a>
                        </li>
                                                <li class="">
                            <a href="function.proc-open.php.html" title="proc_&#8203;open">proc_&#8203;open</a>
                        </li>
                                                <li class="">
                            <a href="function.proc-terminate.php.html" title="proc_&#8203;terminate">proc_&#8203;terminate</a>
                        </li>
                                                <li class="current">
                            <a href="function.shell-exec.php.html" title="shell_&#8203;exec">shell_&#8203;exec</a>
                        </li>
                                                <li class="">
                            <a href="function.system.php.html" title="system">system</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
