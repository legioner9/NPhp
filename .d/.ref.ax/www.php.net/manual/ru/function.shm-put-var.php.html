<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: shm_put_var - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.shm-put-var.php.html">
 <link rel="shorturl" href="https://www.php.net/shm-put-var">
 <link rel="alternate" href="https://www.php.net/shm-put-var" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.sem.php.html">
 <link rel="prev" href="function.shm-has-var.php.html">
 <link rel="next" href="function.shm-remove-var.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.shm-put-var.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.shm-put-var.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.shm-put-var.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.shm-put-var.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.shm-put-var.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.shm-put-var.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.shm-put-var.php" hreflang="pt_BR">
 <link rel="alternate" href="function.shm-put-var.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.shm-put-var.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.shm-put-var.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.shm-remove-var.php.html">
          shm_remove_var &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.shm-has-var.php.html">
          &laquo; shm_has_var        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.fileprocess.process.php.html'>Модули для управления процессами программ</a></li>      <li><a href='book.sem.php.html'>Семафоры</a></li>      <li><a href='ref.sem.php.html'>Функции семафоров</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.shm-put-var.php'>English</option>
            <option value='de/function.shm-put-var.php'>German</option>
            <option value='es/function.shm-put-var.php'>Spanish</option>
            <option value='fr/function.shm-put-var.php'>French</option>
            <option value='it/function.shm-put-var.php'>Italian</option>
            <option value='ja/function.shm-put-var.php'>Japanese</option>
            <option value='pt_BR/function.shm-put-var.php'>Brazilian Portuguese</option>
            <option value='ru/function.shm-put-var.php' selected="selected">Russian</option>
            <option value='tr/function.shm-put-var.php'>Turkish</option>
            <option value='zh/function.shm-put-var.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/sem/functions/shm-put-var.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.shm-put-var%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.shm-put-var" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">shm_put_var</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">shm_put_var</span> &mdash; <span class="dc-title">Вставляет или обновляет переменную в разделяемой памяти</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.shm-put-var-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>shm_put_var</strong></span>(<span class="methodparam"><span class="type"><a href="class.sysvsharedmemory.php.html" class="type SysvSharedMemory">SysvSharedMemory</a></span> <code class="parameter">$shm</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$key</code></span>, <span class="methodparam"><span class="type"><a href="language.types.declarations.php.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>shm_put_var()</strong></span> добавляет или обновляет
   <code class="parameter">value</code> с заданным ключом
   <code class="parameter">key</code>.
  </p>
  <p class="para">
   Будет выдана ошибка (уровня <strong><code>E_WARNING</code></strong>),
   если <code class="parameter">shm</code> не является допустимым индексом разделяемой памяти SysV
   или если разделяемой памяти недостаточно для выполнения вашего запроса.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.shm-put-var-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">shm</code></dt>

     <dd>

      <p class="para">
       Сегмент разделяемой памяти, полученный из <span class="function"><a href="function.shm-attach.php.html" class="function">shm_attach()</a></span>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">key</code></dt>

     <dd>

      <p class="para">
       Ключ переменной.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">value</code></dt>

     <dd>

      <p class="para">
       Переменная. Могут использоваться все <a href="language.types.php.html" class="link">типы переменной</a>,
       которые поддерживают <span class="function"><a href="function.serialize.php.html" class="function">serialize()</a></span>: обычно это означает все типы,
       кроме ресурсов и некоторых внутренних объектов, которые не могут быть сериализованы.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.shm-put-var-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает <strong><code>true</code></strong> в случае успешного выполнения или <strong><code>false</code></strong> в случае возникновения ошибки.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.shm-put-var-changelog">
  <h3 class="title">Список изменений</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Версия</th>
       <th>Описание</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>8.0.0</td>
       <td>
        <code class="parameter">shm</code> теперь ожидает экземпляр <span class="classname"><a href="class.sysvsharedmemory.php.html" class="classname">SysvSharedMemory</a></span>;
        ранее ожидался ресурс (<span class="type">resource</span>).
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.shm-put-var-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.shm-get-var.php.html" class="function" rel="rdfs-seeAlso">shm_get_var()</a> - Возвращает переменную из разделяемой памяти</span></li>
    <li class="member"><span class="function"><a href="function.shm-has-var.php.html" class="function" rel="rdfs-seeAlso">shm_has_var()</a> - Проверяет, существует ли конкретная запись</span></li>
   </ul>
  </p>
 </div>


</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.shm-put-var&amp;redirect=https://www.php.net/manual/ru/function.shm-put-var.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">8 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="82792">  <div class="votes">
    <div id="Vu82792">
    <a href="https://www.php.net/manual/vote-note.php?id=82792&amp;page=function.shm-put-var&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd82792">
    <a href="https://www.php.net/manual/vote-note.php?id=82792&amp;page=function.shm-put-var&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V82792" title="71% like this...">
    3
    </div>
  </div>
  <a href="function.shm-put-var.php.html#82792" class="name">
  <strong class="user"><em>jasonrlester at yahoo dot com</em></strong></a><a class="genanchor" href="function.shm-put-var.php.html#82792"> &para;</a><div class="date" title="2008-04-25 12:51"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom82792">
<div class="phpcode"><code><span class="html">sadly troy is right<br /><br />the following script will return:<br /><br />resource(5) of type (stream)<br />int(0)<br /><br /><span class="default">&lt;?php<br /><br />define</span><span class="keyword">(</span><span class="string">"FOPEN_RESOURCE"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">define</span><span class="keyword">(</span><span class="string">"FOPEN_FILEPATH"</span><span class="keyword">, </span><span class="string">"/path/to/file"</span><span class="keyword">);<br /><br /></span><span class="default">$fopen_resource </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">FOPEN_FILEPATH</span><span class="keyword">, </span><span class="string">"w"</span><span class="keyword">);<br /><br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$fopen_resource</span><span class="keyword">);<br /><br /></span><span class="default">$shm_id </span><span class="keyword">= </span><span class="default">shm_attach</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br />if (</span><span class="default">$shm_id </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">)<br />{<br />    echo </span><span class="string">"Fail to attach shared memory.\n"</span><span class="keyword">;<br />}<br /><br />if (!</span><span class="default">shm_put_var</span><span class="keyword">(</span><span class="default">$shm_id</span><span class="keyword">, </span><span class="default">FOPEN_RESOURCE</span><span class="keyword">, </span><span class="default">$fopen_resource</span><span class="keyword">))<br />{<br />    echo </span><span class="string">"Failed to put var 1 in shared memory </span><span class="default">$shm_id</span><span class="string">.\n"</span><span class="keyword">;<br />}<br /><br /></span><span class="default">$sm_fopen_resource </span><span class="keyword">= </span><span class="default">shm_get_var</span><span class="keyword">(</span><span class="default">$shm_id</span><span class="keyword">, </span><span class="default">FOPEN_RESOURCE</span><span class="keyword">);<br />if (</span><span class="default">$sm_fopen_resource </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">)<br />{<br />    echo </span><span class="string">"Failed to retreive fopen_resource from Shared memory\r\n"</span><span class="keyword">;<br />}<br /><br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$sm_fopen_resource</span><span class="keyword">);<br /><br />if(</span><span class="default">$shm_id</span><span class="keyword">) </span><span class="default">shm_remove</span><span class="keyword">(</span><span class="default">$shm_id</span><span class="keyword">);<br />if(</span><span class="default">$fopen_resource</span><span class="keyword">) </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fopen_resource</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="88657">  <div class="votes">
    <div id="Vu88657">
    <a href="https://www.php.net/manual/vote-note.php?id=88657&amp;page=function.shm-put-var&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd88657">
    <a href="https://www.php.net/manual/vote-note.php?id=88657&amp;page=function.shm-put-var&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V88657" title="75% like this...">
    2
    </div>
  </div>
  <a href="function.shm-put-var.php.html#88657" class="name">
  <strong class="user"><em>Hendrik Klindworth</em></strong></a><a class="genanchor" href="function.shm-put-var.php.html#88657"> &para;</a><div class="date" title="2009-02-02 08:28"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom88657">
<div class="phpcode"><code><span class="html">shm_put_var has no protection against race conditions. If two scripts insert the same key at the same time php might segfault.</span></code></div>
  </div>
 </div>
  <div class="note" id="94023">  <div class="votes">
    <div id="Vu94023">
    <a href="https://www.php.net/manual/vote-note.php?id=94023&amp;page=function.shm-put-var&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd94023">
    <a href="https://www.php.net/manual/vote-note.php?id=94023&amp;page=function.shm-put-var&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V94023" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.shm-put-var.php.html#94023" class="name">
  <strong class="user"><em>ygbr at me dot com</em></strong></a><a class="genanchor" href="function.shm-put-var.php.html#94023"> &para;</a><div class="date" title="2009-10-12 02:25"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom94023">
<div class="phpcode"><code><span class="html">Will it ever support resource identifiers like pfsockopen() pointers?<br /><br />The main problem is that when we run PHP as a Apache Module we never know in which process the next request will bind to, making impossible to have true persistent socket connections unless we can store the pointer to it or directly open the socket inode with fopen() like functions and retrieve the same resource pointer again.<br /><br />I thought I could use shm, but it seems that shm doesn't allow o store resource pointers... sad... :(</span></code></div>
  </div>
 </div>
  <div class="note" id="81619">  <div class="votes">
    <div id="Vu81619">
    <a href="https://www.php.net/manual/vote-note.php?id=81619&amp;page=function.shm-put-var&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd81619">
    <a href="https://www.php.net/manual/vote-note.php?id=81619&amp;page=function.shm-put-var&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V81619" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.shm-put-var.php.html#81619" class="name">
  <strong class="user"><em>troy</em></strong></a><a class="genanchor" href="function.shm-put-var.php.html#81619"> &para;</a><div class="date" title="2008-03-06 07:02"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom81619">
<div class="phpcode"><code><span class="html">This isn't entirely accurate. Not all variable types are supported, you can't put a resource variable into shared memory.<br /><br />When you try to take it out, it will be a zero.</span></code></div>
  </div>
 </div>
  <div class="note" id="110926">  <div class="votes">
    <div id="Vu110926">
    <a href="https://www.php.net/manual/vote-note.php?id=110926&amp;page=function.shm-put-var&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd110926">
    <a href="https://www.php.net/manual/vote-note.php?id=110926&amp;page=function.shm-put-var&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V110926" title="0% like this...">
    -1
    </div>
  </div>
  <a href="function.shm-put-var.php.html#110926" class="name">
  <strong class="user"><em>cong818 at gmail dot com</em></strong></a><a class="genanchor" href="function.shm-put-var.php.html#110926"> &para;</a><div class="date" title="2012-12-24 11:59"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom110926">
<div class="phpcode"><code><span class="html">seems to me shm_put_var() doesn't work well with an integer key 0. I changed to 1 and it works like a charm.</span></code></div>
  </div>
 </div>
  <div class="note" id="97170">  <div class="votes">
    <div id="Vu97170">
    <a href="https://www.php.net/manual/vote-note.php?id=97170&amp;page=function.shm-put-var&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd97170">
    <a href="https://www.php.net/manual/vote-note.php?id=97170&amp;page=function.shm-put-var&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V97170" title="0% like this...">
    -2
    </div>
  </div>
  <a href="function.shm-put-var.php.html#97170" class="name">
  <strong class="user"><em>orwellophile at spamtrak dot org</em></strong></a><a class="genanchor" href="function.shm-put-var.php.html#97170"> &para;</a><div class="date" title="2010-04-06 04:17"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom97170">
<div class="phpcode"><code><span class="html">Quote: "Will it ever support resource identifiers like pfsockopen() pointers ...  we run PHP as a Apache Module ... no way to have true persistent sockets"<br /><br />Sorry, but that doesn't make sense to me... the socket is still persistent, if you wish to resume it, simply call pfsockopen() with the same host and port - and you will get the same socket.  There is no need to pass the actual resource variable.<br /><br />If there is something amazingly special and unique about each socket, you can do the following - and this should apply to any persistent resource:<br /><br />To differentiate between or obtain a specific resource - simply serialize/store an index of each resource's unique ID, along with the particulars that make that resource unique.<br /><br />You can get a unique resource identifier as an integer value like so:<br /><br /><span class="default">&lt;?php<br />   $rid </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"Resource id #"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));<br />   </span><span class="comment">// $rid = 2<br /></span><span class="default">?&gt;<br /></span><br />As pfsockopen() uses the hostname and port as a unique key to resume a persistent connection, you can add a DNS wildcard, or a number of manual entries in /etc/hosts (or windows equiv.) as follows:<br /><br />resource-0.host.com  192.168.100.1<br />resource-1.host.com  192.168.100.1<br />resource-2.host.com  192.168.100.1<br />resource-3.host.com  192.168.100.1<br /><br />Then, after consulting your serialized list of resources, you can connect to a specific resource by using it's resource id.<br /><br />eg:  $pf = pfsockopen("resource-$rid.host.com", $port, $timeout);<br /><br />The new resource will be identical to the original in every way.<br /><br />For file based stream resources you could do something similar with symlinks, or use the next method...<br /><br />For URL based or other resources with "paths" (I don't know if there *are* persistent functions that involve such things) you could differentiate between them with using extraneous information in the path.  eg:<br /><br />  <a href="http://host.com/resource-4/../script.php" rel="nofollow" target="_blank">http://host.com/resource-4/../script.php</a><br />  <a href="http://resource4@host.com/script.php" rel="nofollow" target="_blank">http://resource4@host.com/script.php</a><br />  /tmp/././././file.txt<br /><br />In the first example, the extraneous "resource-4" would be ignored by the webserver.<br /><br />In the second, the superfluous username would be ignored by the webserver.  (Something similar for mysql_pconnect could be done with multiple usernames).<br /><br />And in the the third example, four sequential occurrences of the "do nothing" string "./" would indicate resource #4. <br /><br />If this isn't enough, then you can use the fact that PHP shared memory resources are themselves interoperable with those created by their .c counterparts.   That allows you to write a thin .c application to handle the dirty work.<br /><br />Or you could attempt to reconnect to your own webserver, using persistent streams and the methods outlined above, to achieve the end result.   I can't think of an example of where something so extreme would be necessary, but I'm sure it's not outside the realm of possibility.<br /><br />I personally use an 117 MB binary database, which is stored in shared memory, both from the command line (using a complied .c application), and from the web (via PHP, and ftok()/shmop_open()/shmop_read()).</span></code></div>
  </div>
 </div>
  <div class="note" id="110903">  <div class="votes">
    <div id="Vu110903">
    <a href="https://www.php.net/manual/vote-note.php?id=110903&amp;page=function.shm-put-var&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd110903">
    <a href="https://www.php.net/manual/vote-note.php?id=110903&amp;page=function.shm-put-var&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V110903" title="33% like this...">
    -1
    </div>
  </div>
  <a href="function.shm-put-var.php.html#110903" class="name">
  <strong class="user"><em>Jason Lester</em></strong></a><a class="genanchor" href="function.shm-put-var.php.html#110903"> &para;</a><div class="date" title="2012-12-21 09:28"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom110903">
<div class="phpcode"><code><span class="html">Yes, it is possible to maintain a real level of resource persistence using shared memory. All vars in PHP are stored in common hashtables as zvals, including resource identifiers. There are hashtables available that outlive the request as long as the entire PHP process isn't shut down. All you need is to store the identifiers in such a hashtable and a way to keep track of them and you can receive the original resource.<br /><br />I don't know why PHP doesn't provide a way of setting/getting persistent resources, but it is likely do to the many types of SAPI's available for it and the fact that not all of them *can* facilitate this, including CGI which still if far from obsolete. <br /><br />Another problem is that having such access in userspace is bound to create issues where multiple php processes are trying to access the same resource. Looking at it from this angel you can see that there's really no safe way to safely use such getter/setters without a better synchronism scheme in PHP.</span></code></div>
  </div>
 </div>
  <div class="note" id="46149">  <div class="votes">
    <div id="Vu46149">
    <a href="https://www.php.net/manual/vote-note.php?id=46149&amp;page=function.shm-put-var&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd46149">
    <a href="https://www.php.net/manual/vote-note.php?id=46149&amp;page=function.shm-put-var&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V46149" title="33% like this...">
    -1
    </div>
  </div>
  <a href="function.shm-put-var.php.html#46149" class="name">
  <strong class="user"><em>tomlove at gmail dot com</em></strong></a><a class="genanchor" href="function.shm-put-var.php.html#46149"> &para;</a><div class="date" title="2004-09-30 04:53"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom46149">
<div class="phpcode"><code><span class="html">Use as few variable_keys as you can. With large arrays of data, rather make the array multi-dimensional and store under one variable_key than use variable_key as your index. The benefit is especially noticeable when repeated fetching from the end of the array is necessary and updates are less frequent.</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.shm-put-var&amp;redirect=https://www.php.net/manual/ru/function.shm-put-var.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.sem.php.html">Функции семафоров</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.ftok.php.html" title="ftok">ftok</a>
                        </li>
                                                <li class="">
                            <a href="function.msg-get-queue.php.html" title="msg_&#8203;get_&#8203;queue">msg_&#8203;get_&#8203;queue</a>
                        </li>
                                                <li class="">
                            <a href="function.msg-queue-exists.php.html" title="msg_&#8203;queue_&#8203;exists">msg_&#8203;queue_&#8203;exists</a>
                        </li>
                                                <li class="">
                            <a href="function.msg-receive.php.html" title="msg_&#8203;receive">msg_&#8203;receive</a>
                        </li>
                                                <li class="">
                            <a href="function.msg-remove-queue.php.html" title="msg_&#8203;remove_&#8203;queue">msg_&#8203;remove_&#8203;queue</a>
                        </li>
                                                <li class="">
                            <a href="function.msg-send.php.html" title="msg_&#8203;send">msg_&#8203;send</a>
                        </li>
                                                <li class="">
                            <a href="function.msg-set-queue.php.html" title="msg_&#8203;set_&#8203;queue">msg_&#8203;set_&#8203;queue</a>
                        </li>
                                                <li class="">
                            <a href="function.msg-stat-queue.php.html" title="msg_&#8203;stat_&#8203;queue">msg_&#8203;stat_&#8203;queue</a>
                        </li>
                                                <li class="">
                            <a href="function.sem-acquire.php.html" title="sem_&#8203;acquire">sem_&#8203;acquire</a>
                        </li>
                                                <li class="">
                            <a href="function.sem-get.php.html" title="sem_&#8203;get">sem_&#8203;get</a>
                        </li>
                                                <li class="">
                            <a href="function.sem-release.php.html" title="sem_&#8203;release">sem_&#8203;release</a>
                        </li>
                                                <li class="">
                            <a href="function.sem-remove.php.html" title="sem_&#8203;remove">sem_&#8203;remove</a>
                        </li>
                                                <li class="">
                            <a href="function.shm-attach.php.html" title="shm_&#8203;attach">shm_&#8203;attach</a>
                        </li>
                                                <li class="">
                            <a href="function.shm-detach.php.html" title="shm_&#8203;detach">shm_&#8203;detach</a>
                        </li>
                                                <li class="">
                            <a href="function.shm-get-var.php.html" title="shm_&#8203;get_&#8203;var">shm_&#8203;get_&#8203;var</a>
                        </li>
                                                <li class="">
                            <a href="function.shm-has-var.php.html" title="shm_&#8203;has_&#8203;var">shm_&#8203;has_&#8203;var</a>
                        </li>
                                                <li class="current">
                            <a href="function.shm-put-var.php.html" title="shm_&#8203;put_&#8203;var">shm_&#8203;put_&#8203;var</a>
                        </li>
                                                <li class="">
                            <a href="function.shm-remove-var.php.html" title="shm_&#8203;remove_&#8203;var">shm_&#8203;remove_&#8203;var</a>
                        </li>
                                                <li class="">
                            <a href="function.shm-remove.php.html" title="shm_&#8203;remove">shm_&#8203;remove</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
