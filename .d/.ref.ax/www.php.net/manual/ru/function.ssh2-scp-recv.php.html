<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: ssh2_scp_recv - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.ssh2-scp-recv.php.html">
 <link rel="shorturl" href="https://www.php.net/ssh2-scp-recv">
 <link rel="alternate" href="https://www.php.net/ssh2-scp-recv" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.ssh2.php.html">
 <link rel="prev" href="function.ssh2-publickey-remove.php.html">
 <link rel="next" href="function.ssh2-scp-send.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.ssh2-scp-recv.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.ssh2-scp-recv.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.ssh2-scp-recv.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.ssh2-scp-recv.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.ssh2-scp-recv.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.ssh2-scp-recv.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.ssh2-scp-recv.php" hreflang="pt_BR">
 <link rel="alternate" href="function.ssh2-scp-recv.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.ssh2-scp-recv.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.ssh2-scp-recv.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.ssh2-scp-send.php.html">
          ssh2_scp_send &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.ssh2-publickey-remove.php.html">
          &laquo; ssh2_publickey_remove        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.remote.other.php.html'>Другие службы</a></li>      <li><a href='book.ssh2.php.html'>SSH2</a></li>      <li><a href='ref.ssh2.php.html'>Функции SSH2</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.ssh2-scp-recv.php'>English</option>
            <option value='de/function.ssh2-scp-recv.php'>German</option>
            <option value='es/function.ssh2-scp-recv.php'>Spanish</option>
            <option value='fr/function.ssh2-scp-recv.php'>French</option>
            <option value='it/function.ssh2-scp-recv.php'>Italian</option>
            <option value='ja/function.ssh2-scp-recv.php'>Japanese</option>
            <option value='pt_BR/function.ssh2-scp-recv.php'>Brazilian Portuguese</option>
            <option value='ru/function.ssh2-scp-recv.php' selected="selected">Russian</option>
            <option value='tr/function.ssh2-scp-recv.php'>Turkish</option>
            <option value='zh/function.ssh2-scp-recv.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/ssh2/functions/ssh2-scp-recv.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.ssh2-scp-recv%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.ssh2-scp-recv" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ssh2_scp_recv</h1>
  <p class="verinfo">(PECL ssh2 &gt;= 0.9.0)</p><p class="refpurpose"><span class="refname">ssh2_scp_recv</span> &mdash; <span class="dc-title">Запрос файла через SCP</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.ssh2-scp-recv-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>ssh2_scp_recv</strong></span>(<span class="methodparam"><span class="type">resource</span> <code class="parameter">$session</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$remote_file</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$local_file</code></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   Копирование файла с сервера на клиент, используя протокол SCP.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.ssh2-scp-recv-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">session</code></dt>

     <dd>

      <p class="para">
       Идентификатор соединения SSH, полученный из
       <span class="function"><a href="function.ssh2-connect.php.html" class="function">ssh2_connect()</a></span>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">remote_file</code></dt>

     <dd>

      <p class="para">
       Путь к файлу на сервере.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">local_file</code></dt>

     <dd>

      <p class="para">
       Локальный путь для сохранения.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.ssh2-scp-recv-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает <strong><code>true</code></strong> в случае успешного выполнения или <strong><code>false</code></strong> в случае возникновения ошибки.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.ssh2-scp-recv-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Пример #1 Загрузка файла через SCP</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$connection </span><span style="color: #007700">= </span><span style="color: #0000BB">ssh2_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'shell.example.com'</span><span style="color: #007700">, </span><span style="color: #0000BB">22</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">ssh2_auth_password</span><span style="color: #007700">(</span><span style="color: #0000BB">$connection</span><span style="color: #007700">, </span><span style="color: #DD0000">'username'</span><span style="color: #007700">, </span><span style="color: #DD0000">'password'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">ssh2_scp_recv</span><span style="color: #007700">(</span><span style="color: #0000BB">$connection</span><span style="color: #007700">, </span><span style="color: #DD0000">'/remote/filename'</span><span style="color: #007700">, </span><span style="color: #DD0000">'/local/filename'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.ssh2-scp-recv-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.ssh2-scp-send.php.html" class="function" rel="rdfs-seeAlso">ssh2_scp_send()</a> - Отправка файла через SCP</span></li>
    <li class="member"><span class="function"><a href="function.copy.php.html" class="function" rel="rdfs-seeAlso">copy()</a> - Копирует файл</span></li>
   </ul>
  </p>
 </div>


</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.ssh2-scp-recv&amp;redirect=https://www.php.net/manual/ru/function.ssh2-scp-recv.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">10 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="104124">  <div class="votes">
    <div id="Vu104124">
    <a href="https://www.php.net/manual/vote-note.php?id=104124&amp;page=function.ssh2-scp-recv&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd104124">
    <a href="https://www.php.net/manual/vote-note.php?id=104124&amp;page=function.ssh2-scp-recv&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V104124" title="58% like this...">
    3
    </div>
  </div>
  <a href="function.ssh2-scp-recv.php.html#104124" class="name">
  <strong class="user"><em>ojovirtual</em></strong></a><a class="genanchor" href="function.ssh2-scp-recv.php.html#104124"> &para;</a><div class="date" title="2011-05-25 01:37"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom104124">
<div class="phpcode"><code><span class="html">Trying to get a remote file with spaces in its name?<br /><br />Never forget to use quotes in the remote filename, but never in the local one.<br /><br />Example:<br /><br /><span class="default">&lt;?php<br />$remote_file_name</span><span class="keyword">=</span><span class="string">"my name with spaces.ext"<br /><br /></span><span class="default">ssh2_scp_recv</span><span class="keyword">(</span><span class="default">$cn</span><span class="keyword">,</span><span class="default">$remote_file_name</span><span class="keyword">,</span><span class="default">$local_path</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$remote_file_name</span><span class="keyword">); </span><span class="comment">// ERROR<br /><br /></span><span class="default">ssh2_scp_recv</span><span class="keyword">(</span><span class="default">$cn</span><span class="keyword">,</span><span class="string">"\""</span><span class="keyword">.</span><span class="default">$remote_file_name</span><span class="keyword">.</span><span class="string">"\""</span><span class="keyword">,</span><span class="default">$local_path</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$remote_file_name</span><span class="keyword">); </span><span class="comment">//OK<br /><br /></span><span class="default">ssh2_scp_recv</span><span class="keyword">(</span><span class="default">$cn</span><span class="keyword">,</span><span class="string">"\""</span><span class="keyword">.</span><span class="default">$remote_file_name</span><span class="keyword">.</span><span class="string">"\""</span><span class="keyword">,</span><span class="string">"\""</span><span class="keyword">.</span><span class="default">$local_path</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$remote_file_name</span><span class="keyword">.</span><span class="string">"\""</span><span class="keyword">); </span><span class="comment">//ERROR<br /></span><span class="default">?&gt;<br /></span><br />So, the quotes in the file name are needed only for remote, not for local.</span></code></div>
  </div>
 </div>
  <div class="note" id="119630">  <div class="votes">
    <div id="Vu119630">
    <a href="https://www.php.net/manual/vote-note.php?id=119630&amp;page=function.ssh2-scp-recv&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd119630">
    <a href="https://www.php.net/manual/vote-note.php?id=119630&amp;page=function.ssh2-scp-recv&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V119630" title="56% like this...">
    3
    </div>
  </div>
  <a href="function.ssh2-scp-recv.php.html#119630" class="name">
  <strong class="user"><em>liubomyr dot pelo at gmail dot com</em></strong></a><a class="genanchor" href="function.ssh2-scp-recv.php.html#119630"> &para;</a><div class="date" title="2016-07-20 07:56"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom119630">
<div class="phpcode"><code><span class="html">In case if you get:<br /><br />Warning: ssh2_scp_recv(): Unable to receive remote file in /some-php-file.php on line 2<br /><br />Use `stream_get_contents` function.<br /><br />Example:<br /><span class="default">&lt;?php<br />$stream </span><span class="keyword">= @</span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"ssh2.s<a href="ftp://" rel="nofollow" target="_blank">ftp://</a></span><span class="default">$sftp$remoteFile</span><span class="string">"</span><span class="keyword">, </span><span class="string">'r'</span><span class="keyword">);<br />if (! </span><span class="default">$stream</span><span class="keyword">) {<br />        throw new </span><span class="default">\Exception</span><span class="keyword">(</span><span class="string">"Could not open file: </span><span class="default">$remoteFile</span><span class="string">"</span><span class="keyword">);<br />}<br /><br /></span><span class="default">$contents </span><span class="keyword">= </span><span class="default">stream_get_contents</span><span class="keyword">(</span><span class="default">$stream</span><span class="keyword">);<br /></span><span class="default">file_put_contents </span><span class="keyword">(</span><span class="default">$localFile</span><span class="keyword">, </span><span class="default">$contents</span><span class="keyword">);<br />@</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$stream</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="112508">  <div class="votes">
    <div id="Vu112508">
    <a href="https://www.php.net/manual/vote-note.php?id=112508&amp;page=function.ssh2-scp-recv&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd112508">
    <a href="https://www.php.net/manual/vote-note.php?id=112508&amp;page=function.ssh2-scp-recv&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V112508" title="66% like this...">
    1
    </div>
  </div>
  <a href="function.ssh2-scp-recv.php.html#112508" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="function.ssh2-scp-recv.php.html#112508"> &para;</a><div class="date" title="2013-06-24 09:14"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom112508">
<div class="phpcode"><code><span class="html">May fail when trying to get a remote file from the user's home directory when you try to use a path like '~/filename.txt' .  It appears to dislike tildes, so use the full file path.</span></code></div>
  </div>
 </div>
  <div class="note" id="82731">  <div class="votes">
    <div id="Vu82731">
    <a href="https://www.php.net/manual/vote-note.php?id=82731&amp;page=function.ssh2-scp-recv&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd82731">
    <a href="https://www.php.net/manual/vote-note.php?id=82731&amp;page=function.ssh2-scp-recv&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V82731" title="100% like this...">
    2
    </div>
  </div>
  <a href="function.ssh2-scp-recv.php.html#82731" class="name">
  <strong class="user"><em>miller4980 at msn dot com</em></strong></a><a class="genanchor" href="function.ssh2-scp-recv.php.html#82731"> &para;</a><div class="date" title="2008-04-23 11:10"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom82731">
<div class="phpcode"><code><span class="html">Problem:<br />  can't pass an array to sftp_scp_rec()<br />  also: for Windows: sftp was not happy when connecting to   a  Windows dir. <br />  eg: sftp_scp_rec($connection, "remote/directory","local/$directory[$i]");<br />Solution:<br />The array was placing whitespace on the end of the variable.<br />trim(" ","",$directory[$i]);<br /><br />connecting to Windows dir:<br />sftp_scp_rec($connection, "linux/directory","\\windows\share[$i]");<br /><br />This script backs up remote Linux directories to a local Windows directory based on modified dates of files.<br /><br />The Idea is to get a complete back up of a directory via ftp client etc. <br />Then when the script runs it will back up newly modified files only.<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">//error_reporting(0);<br /><br /></span><span class="default">$file        </span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br /></span><span class="default">$arr2        </span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br /></span><span class="default">$arr1        </span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br /></span><span class="default">$ldir         </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br /><br /></span><span class="default">$remotedirs</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]     = </span><span class="string">"Domain name or IP address/"</span><span class="keyword">;<br /></span><span class="default">$remotedirs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]     = </span><span class="string">"Domain name or IP address/"</span><span class="keyword">;<br /></span><span class="default">$remotedirs</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]     = </span><span class="string">"Domain name or IP address/"</span><span class="keyword">;<br /></span><span class="default">$remotedirs</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]     = </span><span class="string">"Domain name or IP address/"</span><span class="keyword">;<br /><br />    </span><span class="default">$fh </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"c:\dirlist.txt"</span><span class="keyword">,</span><span class="string">"w"</span><span class="keyword">);<br />    </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">);<br />    </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">);<br />foreach (</span><span class="default">$remotedirs </span><span class="keyword">as </span><span class="default">$val</span><span class="keyword">){<br />echo </span><span class="default">$remotedir </span><span class="keyword">= </span><span class="string">"/data/www/</span><span class="default">$val</span><span class="string">/"</span><span class="keyword">;<br /></span><span class="default">$localdir     </span><span class="keyword">= </span><span class="string">"\\\\192.168.0.234\\C$\\xampp\\htdocs\\</span><span class="default">$val</span><span class="string">\\"</span><span class="keyword">;<br /></span><span class="default">backupwebsites</span><span class="keyword">(</span><span class="default">$remotedir</span><span class="keyword">,</span><span class="default">$localdir</span><span class="keyword">);<br />}<br />function </span><span class="default">backupwebsites</span><span class="keyword">(</span><span class="default">$remotedir</span><span class="keyword">,</span><span class="default">$localdir</span><span class="keyword">){<br />    </span><span class="default">$connection </span><span class="keyword">= </span><span class="default">ssh2_connect</span><span class="keyword">(</span><span class="default">Host IP </span><span class="keyword">or </span><span class="default">Domain</span><span class="keyword">, </span><span class="default">22</span><span class="keyword">);<br />    </span><span class="default">$com </span><span class="keyword">=</span><span class="string">"ls -R -lt </span><span class="default">$remotedir</span><span class="string">"</span><span class="keyword">;<br />    </span><span class="default">ssh2_auth_password</span><span class="keyword">(</span><span class="default">$connection</span><span class="keyword">, </span><span class="string">'user'</span><span class="keyword">, </span><span class="string">'password'</span><span class="keyword">);<br />    </span><span class="default">$stream </span><span class="keyword">= </span><span class="default">ssh2_exec</span><span class="keyword">(</span><span class="default">$connection</span><span class="keyword">, </span><span class="default">$com </span><span class="keyword">);<br />    </span><span class="default">stream_set_blocking</span><span class="keyword">(</span><span class="default">$stream</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />    </span><span class="default">$output </span><span class="keyword">= </span><span class="default">stream_get_contents</span><span class="keyword">(</span><span class="default">$stream</span><span class="keyword">);<br /><br />    </span><span class="default">$fh </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"c:\dirlist.txt"</span><span class="keyword">,</span><span class="string">"a+"</span><span class="keyword">);<br />    </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">, </span><span class="default">$output</span><span class="keyword">);<br />    </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">);<br />    </span><span class="default">$handle </span><span class="keyword">= @</span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'c:\dirlist.txt'</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br />if (</span><span class="default">$handle</span><span class="keyword">) {<br />   while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">)) {<br />       </span><span class="default">$lines</span><span class="keyword">[] = </span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">4096</span><span class="keyword">);<br />   }<br />   </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);<br />}<br />    foreach (</span><span class="default">$lines </span><span class="keyword">as </span><span class="default">$val</span><span class="keyword">)<br />    {<br />        </span><span class="default">$yr </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">);<br />        </span><span class="default">$i</span><span class="keyword">++;<br />        </span><span class="default">$arr1</span><span class="keyword">=</span><span class="default">split</span><span class="keyword">(</span><span class="string">"200"</span><span class="keyword">,</span><span class="default">$val</span><span class="keyword">);<br />        </span><span class="default">$arr2</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$arr1</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br />        if(</span><span class="string">"200"</span><span class="keyword">.</span><span class="default">$arr2</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]==</span><span class="default">$yr</span><span class="keyword">)<br />        {<br />            </span><span class="comment">//if("200".$arr2[0]=='2008-04-21'){    //for testing<br />            </span><span class="default">$remotedir </span><span class="keyword">= </span><span class="default">$remotedir</span><span class="keyword">.</span><span class="default">$arr2</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br />            </span><span class="default">$cpy</span><span class="keyword">=</span><span class="default">$arr2</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br />            </span><span class="default">$file </span><span class="keyword">= </span><span class="default">$localdir</span><span class="keyword">;<br />            </span><span class="default">glue</span><span class="keyword">(</span><span class="default">$connection</span><span class="keyword">,</span><span class="default">$remotedir</span><span class="keyword">,</span><span class="default">$localdir</span><span class="keyword">,</span><span class="default">$cpy</span><span class="keyword">);<br />        }<br />    }<br />}    <br /></span><span class="comment">//echo $i;<br /></span><span class="keyword">function </span><span class="default">glue</span><span class="keyword">(</span><span class="default">$connection</span><span class="keyword">,</span><span class="default">$remotedir</span><span class="keyword">,</span><span class="default">$localdir</span><span class="keyword">,</span><span class="default">$cpy</span><span class="keyword">){<br />    </span><span class="default">$ldir</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"</span><span class="default">$localdir</span><span class="string">"</span><span class="keyword">;<br />    </span><span class="default">$ldir</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]=</span><span class="string">"</span><span class="default">$cpy</span><span class="string">"</span><span class="keyword">;<br />    </span><span class="default">$file </span><span class="keyword">= </span><span class="default">$ldir</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="default">$ldir</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />    </span><span class="default">$file </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br />     </span><span class="default">$file</span><span class="keyword">;<br /> </span><span class="default">gop</span><span class="keyword">(</span><span class="default">$connection</span><span class="keyword">,</span><span class="default">$remotedir</span><span class="keyword">,</span><span class="default">$file</span><span class="keyword">);<br />}<br />function </span><span class="default">gop</span><span class="keyword">(</span><span class="default">$connection</span><span class="keyword">,</span><span class="default">$remotedir</span><span class="keyword">,</span><span class="default">$file</span><span class="keyword">){<br />echo </span><span class="default">$file</span><span class="keyword">;<br /><br /></span><span class="default">ssh2_scp_recv</span><span class="keyword">(<br /></span><span class="default">$connection</span><span class="keyword">, <br /></span><span class="default">$remotedir</span><span class="keyword">,<br /></span><span class="default">$file</span><span class="keyword">);<br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="110230">  <div class="votes">
    <div id="Vu110230">
    <a href="https://www.php.net/manual/vote-note.php?id=110230&amp;page=function.ssh2-scp-recv&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd110230">
    <a href="https://www.php.net/manual/vote-note.php?id=110230&amp;page=function.ssh2-scp-recv&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V110230" title="100% like this...">
    1
    </div>
  </div>
  <a href="function.ssh2-scp-recv.php.html#110230" class="name">
  <strong class="user"><em>mark at mohc dot net</em></strong></a><a class="genanchor" href="function.ssh2-scp-recv.php.html#110230"> &para;</a><div class="date" title="2012-10-03 12:47"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom110230">
<div class="phpcode"><code><span class="html">Transferred files can be truncated if you do not call ssh2_exec($connection,'exit').  ssh2_scp_send will return true even if the file did not completely transfer.<br /><br />eg.<br /><br />ssh2_scp_send($connection, $infile, $remotefile, 0644);<br />ssh2_exec($connection, 'exit'); // exit the ssh2 connection</span></code></div>
  </div>
 </div>
  <div class="note" id="83487">  <div class="votes">
    <div id="Vu83487">
    <a href="https://www.php.net/manual/vote-note.php?id=83487&amp;page=function.ssh2-scp-recv&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd83487">
    <a href="https://www.php.net/manual/vote-note.php?id=83487&amp;page=function.ssh2-scp-recv&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V83487" title="no votes...">
    0
    </div>
  </div>
  <a href="function.ssh2-scp-recv.php.html#83487" class="name">
  <strong class="user"><em>gordon_e_rouse at yahoo dot com dot au</em></strong></a><a class="genanchor" href="function.ssh2-scp-recv.php.html#83487"> &para;</a><div class="date" title="2008-05-28 03:19"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom83487">
<div class="phpcode"><code><span class="html">Being still in Beta, I guess it will have it quirks. One I found was that if the remote filename has brackets in it, it just wont work.<br /><br />I should file it as a bug report, but find the process all intimidating really - I am always just a stupid user who does not know what he is on about!<br /><br />But anyway - the work around of renaming the file before downloading it works fine.<br /><br />use:<br />$_new_path = str_replace("(", "", $_path );<br />$_new_path = str_replace(")", "", $_new_path );<br /><br />ssh2_sftp_rename( $sftp,  $_path, $_new_path );<br /><br />To tell you the truth I haven't determined if it is the open or close bracket, or both. Someone else can investigate that.<br /><br />Meanwhile, it would be good to know all the bad filename characters which this function has problems with, no doubt there are more.</span></code></div>
  </div>
 </div>
  <div class="note" id="68734">  <div class="votes">
    <div id="Vu68734">
    <a href="https://www.php.net/manual/vote-note.php?id=68734&amp;page=function.ssh2-scp-recv&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd68734">
    <a href="https://www.php.net/manual/vote-note.php?id=68734&amp;page=function.ssh2-scp-recv&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V68734" title="0% like this...">
    -1
    </div>
  </div>
  <a href="function.ssh2-scp-recv.php.html#68734" class="name">
  <strong class="user"><em>jcalcote at novell dot com</em></strong></a><a class="genanchor" href="function.ssh2-scp-recv.php.html#68734"> &para;</a><div class="date" title="2006-08-08 01:51"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom68734">
<div class="phpcode"><code><span class="html">If you scan a remote directory for a list of files by using opendir and readdir on a path obtained from ssh2_sftp(), you'll end up with a list of full file paths containing the ssh2.s<a href="ftp://$sftp" rel="nofollow" target="_blank">ftp://$sftp</a> prefix, where $sftp is the sftp resource string returned by ssh2_sftp. <br /><br />If you later attempt to use ssh2_scp_recv() (even on the same connection!) to copy files locally from the remote path, the copy operation will fail because ssh2_scp_recv() doesn't like the wrapper path prefix. It expects remote file references to be rooted at the base of the remote file system (eg., '/').<br /><br />Moral: ssh2_scp_recv() likes paths rooted at the file system root on the remote machine, not full network paths. This routine will fail with an obscure message about not being able to copy the files - yet when you go look it works fine. Worse, when you connect and copy them from an scp shell session, it also works fine.</span></code></div>
  </div>
 </div>
  <div class="note" id="97997">  <div class="votes">
    <div id="Vu97997">
    <a href="https://www.php.net/manual/vote-note.php?id=97997&amp;page=function.ssh2-scp-recv&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd97997">
    <a href="https://www.php.net/manual/vote-note.php?id=97997&amp;page=function.ssh2-scp-recv&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V97997" title="45% like this...">
    -1
    </div>
  </div>
  <a href="function.ssh2-scp-recv.php.html#97997" class="name">
  <strong class="user"><em>luis dot sv at gmail dot com</em></strong></a><a class="genanchor" href="function.ssh2-scp-recv.php.html#97997"> &para;</a><div class="date" title="2010-05-19 03:16"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom97997">
<div class="phpcode"><code><span class="html">This function can be used to copy all files into a directory on a remote server, using SSH and SCP.<br /><br /><span class="default">&lt;?php<br />$connection </span><span class="keyword">= </span><span class="default">ssh2_connect</span><span class="keyword">(</span><span class="string">'host'</span><span class="keyword">, </span><span class="default">22</span><span class="keyword">);<br /></span><span class="default">ssh2_auth_password</span><span class="keyword">(</span><span class="default">$connection</span><span class="keyword">, </span><span class="string">'user'</span><span class="keyword">, </span><span class="string">'password'</span><span class="keyword">);<br /><br /></span><span class="default">$remote_dir</span><span class="keyword">=</span><span class="string">"/remote_dir/"</span><span class="keyword">;<br /></span><span class="default">$local_dir</span><span class="keyword">=</span><span class="string">"/local_dir/"</span><span class="keyword">;<br /><br /></span><span class="default">$com </span><span class="keyword">=</span><span class="string">"ls </span><span class="default">$remote_dir</span><span class="string">"</span><span class="keyword">;<br /></span><span class="default">$stream </span><span class="keyword">= </span><span class="default">ssh2_exec</span><span class="keyword">(</span><span class="default">$connection</span><span class="keyword">, </span><span class="default">$com</span><span class="keyword">);<br /></span><span class="default">stream_set_blocking</span><span class="keyword">(</span><span class="default">$stream</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br /></span><span class="default">$cmd</span><span class="keyword">=</span><span class="default">fread</span><span class="keyword">(</span><span class="default">$stream</span><span class="keyword">,</span><span class="default">4096</span><span class="keyword">);<br /><br /></span><span class="default">$arr</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">,</span><span class="default">$cmd</span><span class="keyword">);<br /><br /></span><span class="default">$total_files</span><span class="keyword">=</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br /><br />for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$total_files</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />    </span><span class="default">$file_name</span><span class="keyword">=</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />    if(</span><span class="default">$file_name</span><span class="keyword">!=</span><span class="string">''</span><span class="keyword">){<br />        </span><span class="default">$remote_file</span><span class="keyword">=</span><span class="default">$remote_dir</span><span class="keyword">.</span><span class="default">$file_name</span><span class="keyword">;        <br />        </span><span class="default">$local_file</span><span class="keyword">=</span><span class="default">$local_dir</span><span class="keyword">.</span><span class="default">$file_name</span><span class="keyword">;<br />        <br />        if(</span><span class="default">ssh2_scp_recv</span><span class="keyword">(</span><span class="default">$connection</span><span class="keyword">, </span><span class="default">$remote_file</span><span class="keyword">,</span><span class="default">$local_file</span><span class="keyword">)){<br />            echo </span><span class="string">"File "</span><span class="keyword">.</span><span class="default">$file_name</span><span class="keyword">.</span><span class="string">" was copied to </span><span class="default">$local_dir</span><span class="string">&lt;br /&gt;"</span><span class="keyword">;<br />        }<br />    }<br />}<br /><br /></span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$stream</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="112862">  <div class="votes">
    <div id="Vu112862">
    <a href="https://www.php.net/manual/vote-note.php?id=112862&amp;page=function.ssh2-scp-recv&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd112862">
    <a href="https://www.php.net/manual/vote-note.php?id=112862&amp;page=function.ssh2-scp-recv&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V112862" title="46% like this...">
    -2
    </div>
  </div>
  <a href="function.ssh2-scp-recv.php.html#112862" class="name">
  <strong class="user"><em>Maddie</em></strong></a><a class="genanchor" href="function.ssh2-scp-recv.php.html#112862"> &para;</a><div class="date" title="2013-07-30 05:40"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom112862">
<div class="phpcode"><code><span class="html">If you are getting the error - ssh2_scp_recv(): Unable to receive remote file<br /><br />Try using file_get_contents("ssh2.s<a href="ftp://$sftp$fileLocation" rel="nofollow" target="_blank">ftp://$sftp$fileLocation</a>") and file_put_contents() as a workaround-- this is after I tried all sorts of different remote file path formats to no avail.</span></code></div>
  </div>
 </div>
  <div class="note" id="82072">  <div class="votes">
    <div id="Vu82072">
    <a href="https://www.php.net/manual/vote-note.php?id=82072&amp;page=function.ssh2-scp-recv&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd82072">
    <a href="https://www.php.net/manual/vote-note.php?id=82072&amp;page=function.ssh2-scp-recv&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V82072" title="33% like this...">
    -3
    </div>
  </div>
  <a href="function.ssh2-scp-recv.php.html#82072" class="name">
  <strong class="user"><em>chad dot [the letter d] johnson AT gmail</em></strong></a><a class="genanchor" href="function.ssh2-scp-recv.php.html#82072"> &para;</a><div class="date" title="2008-03-26 12:23"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom82072">
<div class="phpcode"><code><span class="html">If when trying to use this function you get "Warning: ssh2_scp_send(): Failure creating remote file," then try using<br /><br />$data = file_get_contents("ssh2.s<a href="ftp://$sftp/path/to/file" rel="nofollow" target="_blank">ftp://$sftp/path/to/file</a>");</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.ssh2-scp-recv&amp;redirect=https://www.php.net/manual/ru/function.ssh2-scp-recv.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.ssh2.php.html">Функции SSH2</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.ssh2-auth-agent.php.html" title="ssh2_&#8203;auth_&#8203;agent">ssh2_&#8203;auth_&#8203;agent</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-auth-hostbased-file.php.html" title="ssh2_&#8203;auth_&#8203;hostbased_&#8203;file">ssh2_&#8203;auth_&#8203;hostbased_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-auth-none.php.html" title="ssh2_&#8203;auth_&#8203;none">ssh2_&#8203;auth_&#8203;none</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-auth-password.php.html" title="ssh2_&#8203;auth_&#8203;password">ssh2_&#8203;auth_&#8203;password</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-auth-pubkey-file.php.html" title="ssh2_&#8203;auth_&#8203;pubkey_&#8203;file">ssh2_&#8203;auth_&#8203;pubkey_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-connect.php.html" title="ssh2_&#8203;connect">ssh2_&#8203;connect</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-disconnect.php.html" title="ssh2_&#8203;disconnect">ssh2_&#8203;disconnect</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-exec.php.html" title="ssh2_&#8203;exec">ssh2_&#8203;exec</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-fetch-stream.php.html" title="ssh2_&#8203;fetch_&#8203;stream">ssh2_&#8203;fetch_&#8203;stream</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-fingerprint.php.html" title="ssh2_&#8203;fingerprint">ssh2_&#8203;fingerprint</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-forward-accept.php.html" title="ssh2_&#8203;forward_&#8203;accept">ssh2_&#8203;forward_&#8203;accept</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-forward-listen.php.html" title="ssh2_&#8203;forward_&#8203;listen">ssh2_&#8203;forward_&#8203;listen</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-methods-negotiated.php.html" title="ssh2_&#8203;methods_&#8203;negotiated">ssh2_&#8203;methods_&#8203;negotiated</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-poll.php.html" title="ssh2_&#8203;poll">ssh2_&#8203;poll</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-publickey-add.php.html" title="ssh2_&#8203;publickey_&#8203;add">ssh2_&#8203;publickey_&#8203;add</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-publickey-init.php.html" title="ssh2_&#8203;publickey_&#8203;init">ssh2_&#8203;publickey_&#8203;init</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-publickey-list.php.html" title="ssh2_&#8203;publickey_&#8203;list">ssh2_&#8203;publickey_&#8203;list</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-publickey-remove.php.html" title="ssh2_&#8203;publickey_&#8203;remove">ssh2_&#8203;publickey_&#8203;remove</a>
                        </li>
                                                <li class="current">
                            <a href="function.ssh2-scp-recv.php.html" title="ssh2_&#8203;scp_&#8203;recv">ssh2_&#8203;scp_&#8203;recv</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-scp-send.php.html" title="ssh2_&#8203;scp_&#8203;send">ssh2_&#8203;scp_&#8203;send</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-send-eof.php.html" title="ssh2_&#8203;send_&#8203;eof">ssh2_&#8203;send_&#8203;eof</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-sftp-chmod.php.html" title="ssh2_&#8203;sftp_&#8203;chmod">ssh2_&#8203;sftp_&#8203;chmod</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-sftp-lstat.php.html" title="ssh2_&#8203;sftp_&#8203;lstat">ssh2_&#8203;sftp_&#8203;lstat</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-sftp-mkdir.php.html" title="ssh2_&#8203;sftp_&#8203;mkdir">ssh2_&#8203;sftp_&#8203;mkdir</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-sftp-readlink.php.html" title="ssh2_&#8203;sftp_&#8203;readlink">ssh2_&#8203;sftp_&#8203;readlink</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-sftp-realpath.php.html" title="ssh2_&#8203;sftp_&#8203;realpath">ssh2_&#8203;sftp_&#8203;realpath</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-sftp-rename.php.html" title="ssh2_&#8203;sftp_&#8203;rename">ssh2_&#8203;sftp_&#8203;rename</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-sftp-rmdir.php.html" title="ssh2_&#8203;sftp_&#8203;rmdir">ssh2_&#8203;sftp_&#8203;rmdir</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-sftp-stat.php.html" title="ssh2_&#8203;sftp_&#8203;stat">ssh2_&#8203;sftp_&#8203;stat</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-sftp-symlink.php.html" title="ssh2_&#8203;sftp_&#8203;symlink">ssh2_&#8203;sftp_&#8203;symlink</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-sftp-unlink.php.html" title="ssh2_&#8203;sftp_&#8203;unlink">ssh2_&#8203;sftp_&#8203;unlink</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-sftp.php.html" title="ssh2_&#8203;sftp">ssh2_&#8203;sftp</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-shell.php.html" title="ssh2_&#8203;shell">ssh2_&#8203;shell</a>
                        </li>
                                                <li class="">
                            <a href="function.ssh2-tunnel.php.html" title="ssh2_&#8203;tunnel">ssh2_&#8203;tunnel</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
