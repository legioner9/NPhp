<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: utf8_decode - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.utf8-decode.php.html">
 <link rel="shorturl" href="https://www.php.net/utf8-decode">
 <link rel="alternate" href="https://www.php.net/utf8-decode" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="ref.strings.php.html">
 <link rel="prev" href="function.ucwords.php.html">
 <link rel="next" href="function.utf8-encode.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/function.utf8-decode.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/function.utf8-decode.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/function.utf8-decode.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.utf8-decode.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/function.utf8-decode.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.utf8-decode.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.utf8-decode.php" hreflang="pt_BR">
 <link rel="alternate" href="function.utf8-decode.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.utf8-decode.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.utf8-decode.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.utf8-encode.php.html">
          utf8_encode &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.ucwords.php.html">
          &laquo; ucwords        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.basic.text.php.html'>Обработка текста</a></li>      <li><a href='book.strings.php.html'>Строки</a></li>      <li><a href='ref.strings.php.html'>Функции для работы со строками</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.utf8-decode.php'>English</option>
            <option value='de/function.utf8-decode.php'>German</option>
            <option value='es/function.utf8-decode.php'>Spanish</option>
            <option value='fr/function.utf8-decode.php'>French</option>
            <option value='it/function.utf8-decode.php'>Italian</option>
            <option value='ja/function.utf8-decode.php'>Japanese</option>
            <option value='pt_BR/function.utf8-decode.php'>Brazilian Portuguese</option>
            <option value='ru/function.utf8-decode.php' selected="selected">Russian</option>
            <option value='tr/function.utf8-decode.php'>Turkish</option>
            <option value='zh/function.utf8-decode.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/strings/functions/utf8-decode.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.utf8-decode%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="function.utf8-decode" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">utf8_decode</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">utf8_decode</span> &mdash; <span class="dc-title">Преобразовывает строку из кодировки UTF-8 в кодировку ISO-8859-1, заменяя недопустимые или непредставимые символы</span></p>

 </div>

 <div id="function.utf8-decode-refsynopsisdiv">
  <div class="warning"><strong class="warning">Внимание</strong><p class="simpara">Функция объявлена
<em>УСТАРЕВШЕЙ</em> начиная с PHP 8.2.0. Использовать эту
функцию крайне не рекомендуется.</p></div>
 </div>

 <div class="refsect1 description" id="refsect1-function.utf8-decode-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>utf8_decode</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>): <span class="type">string</span></div>

  <p class="para rdfs-comment">
   Функция преобразовывает строку <code class="parameter">string</code> из кодировки
   <code class="literal">UTF-8</code> в кодировку <code class="literal">ISO-8859-1</code>.
   Байты в строке, которые не соответствуют корректным символам <code class="literal">UTF-8</code>
   и символам <code class="literal">UTF-8</code>, которые не существуют в <code class="literal">ISO-8859-1</code>
   (то есть кодовые точки выше <code class="literal">U+00FF</code>), будут заменены на символ <code class="literal">?</code>.
  </p>

  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Многие веб-страницы, отмеченные как использующие кодировку
    <code class="literal">ISO-8859-1</code>, на самом деле используют схожую кодировку
    <code class="literal">Windows-1252</code>, и веб-браузеры интерпретируют
    страницы <code class="literal">ISO-8859-1</code> как <code class="literal">Windows-1252</code>.
    Однако <code class="literal">Windows-1252</code> содержит дополнительные печатные
    символы, такие как знак Евро (<code class="literal">€</code>) и фигурные кавычки
    (<code class="literal">“</code> <code class="literal">”</code>) вместо управляющих кодов
    <code class="literal">ISO-8859-1</code>. Эта функция не конвертирует такие символы
    <code class="literal">Windows-1252</code> корректно. Используйте другую функцию,
    если нужна конвертация в <code class="literal">Windows-1252</code>.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.utf8-decode-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">string</code></dt>

     <dd>

      <p class="para">
       Строка, закодированная в UTF-8.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.utf8-decode-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает данные параметра <code class="parameter">string</code>, переведённые в кодировку ISO-8859-1.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.utf8-decode-changelog">
  <h3 class="title">Список изменений</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Версия</th>
       <th>Описание</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>8.2.0</td>
       <td>
        Функция объявлена устаревшей.
       </td>
      </tr>

      <tr>
       <td>7.2.0</td>
       <td>
        Функция была перенесена из модуля XML в ядро PHP.
        В предыдущих версиях она была доступна только при установленном модуле XML.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.utf8-decode-examples">
  <h3 class="title">Примеры</h3>
  <div class="example" id="">
   <p><strong>Пример #1 Простой пример</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// Преобразование строки 'Zoë' из UTF-8 в ISO 8859-1<br /></span><span style="color: #0000BB">$utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\x5A\x6F\xC3\xAB"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #0000BB">utf8_decode</span><span style="color: #007700">(</span><span style="color: #0000BB">$utf8_string</span><span style="color: #007700">);<br />echo </span><span style="color: #0000BB">bin2hex</span><span style="color: #007700">(</span><span style="color: #0000BB">$iso8859_1_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// Неправильные последовательности UTF-8 заменяются на '?'<br /></span><span style="color: #0000BB">$invalid_utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\xC3"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #0000BB">utf8_decode</span><span style="color: #007700">(</span><span style="color: #0000BB">$invalid_utf8_string</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$iso8859_1_string</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Символы, не существующие в ISO 8859-1, такие как<br />// '€' (Знак евро) также заменяются на '?'<br /></span><span style="color: #0000BB">$utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\xE2\x82\xAC"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #0000BB">utf8_decode</span><span style="color: #007700">(</span><span style="color: #0000BB">$utf8_string</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$iso8859_1_string</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

   <div class="example-contents screen">
<div class="cdata"><pre>
5a6feb
string(1) &quot;?&quot;
string(1) &quot;?&quot;
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 notes" id="refsect1-function.utf8-decode-notes">
  <h3 class="title">Примечания</h3>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <strong>Устаревание и альтернативы</strong><br />
   <p class="para">
    Функция <em>устарела</em>, начиная с PHP 8.2.0 и будет удалена в будущей версии.
    Существующие варианты использования должны быть проверены и заменены подходящими альтернативами.
   </p>
   <p class="para">
    Аналогичной функциональности можно достичь с помощью функции <span class="function"><a href="function.mb-convert-encoding.php.html" class="function">mb_convert_encoding()</a></span>,
    которая поддерживает ISO-8859-1 и многие другие кодировки символов.
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\xC3\xAB"</span><span style="color: #007700">; </span><span style="color: #FF8000">// 'ë' (e с диерезисом) в UTF-8<br /></span><span style="color: #0000BB">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #0000BB">mb_convert_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$utf8_string</span><span style="color: #007700">, </span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">, </span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">);<br />echo </span><span style="color: #0000BB">bin2hex</span><span style="color: #007700">(</span><span style="color: #0000BB">$iso8859_1_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\xCE\xBB"</span><span style="color: #007700">; </span><span style="color: #FF8000">// 'λ' (Греческая строчная лямбда) в UTF-8<br /></span><span style="color: #0000BB">$iso8859_7_string </span><span style="color: #007700">= </span><span style="color: #0000BB">mb_convert_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$utf8_string</span><span style="color: #007700">, </span><span style="color: #DD0000">'ISO-8859-7'</span><span style="color: #007700">, </span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">);<br />echo </span><span style="color: #0000BB">bin2hex</span><span style="color: #007700">(</span><span style="color: #0000BB">$iso8859_7_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\xE2\x82\xAC"</span><span style="color: #007700">; </span><span style="color: #FF8000">// '€' (Символ евро) в UTF-8 (отсутствует в ISO-8859-1)<br /></span><span style="color: #0000BB">$windows_1252_string </span><span style="color: #007700">= </span><span style="color: #0000BB">mb_convert_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$utf8_string</span><span style="color: #007700">, </span><span style="color: #DD0000">'Windows-1252'</span><span style="color: #007700">, </span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">);<br />echo </span><span style="color: #0000BB">bin2hex</span><span style="color: #007700">(</span><span style="color: #0000BB">$windows_1252_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

     
<p class="para">
 Результат выполнения приведённого примера:
</p>

     <div class="example-contents screen">
<div class="cdata"><pre>
eb
eb
80
</pre></div>
     </div>
    </div>
   </p>
   <p class="para">
    Другие опции, которые могут быть доступны в зависимости от установленных модулей:
    <span class="methodname"><a href="uconverter.transcode.php.html" class="methodname">UConverter::transcode()</a></span> и <span class="function"><a href="function.iconv.php.html" class="function">iconv()</a></span>.
   </p>
   <p class="para">
    Все следующие варианты дают один и тот же результат:
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\x5A\x6F\xC3\xAB"</span><span style="color: #007700">; </span><span style="color: #FF8000">// 'Zoë' в UTF-8<br /></span><span style="color: #0000BB">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #0000BB">utf8_decode</span><span style="color: #007700">(</span><span style="color: #0000BB">$utf8_string</span><span style="color: #007700">);<br />echo </span><span style="color: #0000BB">bin2hex</span><span style="color: #007700">(</span><span style="color: #0000BB">$iso8859_1_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #0000BB">mb_convert_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$utf8_string</span><span style="color: #007700">, </span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">, </span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">);<br />echo </span><span style="color: #0000BB">bin2hex</span><span style="color: #007700">(</span><span style="color: #0000BB">$iso8859_1_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #0000BB">iconv</span><span style="color: #007700">(</span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">, </span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">, </span><span style="color: #0000BB">$utf8_string</span><span style="color: #007700">);<br />echo </span><span style="color: #0000BB">bin2hex</span><span style="color: #007700">(</span><span style="color: #0000BB">$iso8859_1_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #0000BB">UConverter</span><span style="color: #007700">::</span><span style="color: #0000BB">transcode</span><span style="color: #007700">(</span><span style="color: #0000BB">$utf8_string</span><span style="color: #007700">, </span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">, </span><span style="color: #DD0000">'UTF8'</span><span style="color: #007700">);<br />echo </span><span style="color: #0000BB">bin2hex</span><span style="color: #007700">(</span><span style="color: #0000BB">$iso8859_1_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

     
<p class="para">
 Результат выполнения приведённого примера:
</p>

     <div class="example-contents screen">
<div class="cdata"><pre>
5a6feb
5a6feb
5a6feb
5a6feb
</pre></div>
     </div>
    </div>
    Указание <code class="literal">&#039;?&#039;</code> в качестве опции <code class="literal">&#039;to_subst&#039;</code>
    в методе <span class="methodname"><a href="uconverter.transcode.php.html" class="methodname">UConverter::transcode()</a></span> даёт тот же результат,
    что и функция <span class="function"><strong>utf8_decode()</strong></span> для строк,
    которые являются недопустимыми или не могут быть представлены в ISO 8859-1.
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\xE2\x82\xAC"</span><span style="color: #007700">; </span><span style="color: #FF8000">// € (Символ евро) отсутствует в ISO-8859-1<br /></span><span style="color: #0000BB">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #0000BB">UConverter</span><span style="color: #007700">::</span><span style="color: #0000BB">transcode</span><span style="color: #007700">(<br />    </span><span style="color: #0000BB">$utf8_string</span><span style="color: #007700">, </span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">, </span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">, [</span><span style="color: #DD0000">'to_subst' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'?'</span><span style="color: #007700">]<br />);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$iso8859_1_string</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

     
<p class="para">
 Результат выполнения приведённого примера:
</p>

     <div class="example-contents screen">
<div class="cdata"><pre>
sring(1) &quot;?&quot;
</pre></div>
     </div>
    </div>
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.utf8-decode-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.utf8-encode.php.html" class="function" rel="rdfs-seeAlso">utf8_encode()</a> - Преобразовывает строку из ISO-8859-1 в UTF-8</span></li>
    <li class="member"><span class="function"><a href="function.mb-convert-encoding.php.html" class="function" rel="rdfs-seeAlso">mb_convert_encoding()</a> - Преобразовывает строку из одной кодировки символов в другую</span></li>
    <li class="member"><span class="methodname"><a href="uconverter.transcode.php.html" class="methodname" rel="rdfs-seeAlso">UConverter::transcode()</a> - Преобразовывает строку из одной кодировки символов в другую</span></li>
    <li class="member"><span class="function"><a href="function.iconv.php.html" class="function" rel="rdfs-seeAlso">iconv()</a> - Преобразовывает строку из одной кодировки символов в другую</span></li>
   </ul>
  </p>
 </div>


</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=function.utf8-decode&amp;redirect=https://www.php.net/manual/ru/function.utf8-decode.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">33 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="104907">  <div class="votes">
    <div id="Vu104907">
    <a href="https://www.php.net/manual/vote-note.php?id=104907&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd104907">
    <a href="https://www.php.net/manual/vote-note.php?id=104907&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V104907" title="52% like this...">
    9
    </div>
  </div>
  <a href="function.utf8-decode.php.html#104907" class="name">
  <strong class="user"><em>deceze at gmail dot com</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#104907"> &para;</a><div class="date" title="2011-07-14 07:01"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom104907">
<div class="phpcode"><code><span class="html">Please note that utf8_decode simply converts a string encoded in UTF-8 to ISO-8859-1. A more appropriate name for it would be utf8_to_iso88591. If your text is already encoded in ISO-8859-1, you do not need this function. If you don't want to use ISO-8859-1, you do not need this function.<br /><br />Note that UTF-8 can represent many more characters than ISO-8859-1. Trying to convert a UTF-8 string that contains characters that can't be represented in ISO-8859-1 to ISO-8859-1 will garble your text and/or cause characters to go missing. Trying to convert text that is not encoded in UTF-8 using this function will most likely garble the text.<br /><br />If you need to convert any text from any encoding to any other encoding, look at iconv() instead.</span></code></div>
  </div>
 </div>
  <div class="note" id="88488">  <div class="votes">
    <div id="Vu88488">
    <a href="https://www.php.net/manual/vote-note.php?id=88488&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd88488">
    <a href="https://www.php.net/manual/vote-note.php?id=88488&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V88488" title="52% like this...">
    7
    </div>
  </div>
  <a href="function.utf8-decode.php.html#88488" class="name">
  <strong class="user"><em>info at vanylla dot it</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#88488"> &para;</a><div class="date" title="2009-01-26 12:21"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom88488">
<div class="phpcode"><code><span class="html">IMPORTANT: when converting UTF8 data that contains the EURO sign DON'T USE utf_decode function.<br /><br />utf_decode converts the data into ISO-8859-1 charset. But ISO-8859-1 charset does not contain the EURO sign, therefor the EURO sign will be converted into a question mark character '?'<br /><br />In order to convert properly UTF8 data with EURO sign you must use:<br /><br />iconv("UTF-8", "CP1252", $data)</span></code></div>
  </div>
 </div>
  <div class="note" id="104379">  <div class="votes">
    <div id="Vu104379">
    <a href="https://www.php.net/manual/vote-note.php?id=104379&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd104379">
    <a href="https://www.php.net/manual/vote-note.php?id=104379&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V104379" title="55% like this...">
    5
    </div>
  </div>
  <a href="function.utf8-decode.php.html#104379" class="name">
  <strong class="user"><em>gabriel arobase gabsoftware dot com</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#104379"> &para;</a><div class="date" title="2011-06-12 08:41"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom104379">
<div class="phpcode"><code><span class="html">If you want to retrieve some UTF-8 data from your database, you don't need utf8_decode().<br /><br />Simply do the following query before any SELECT :<br /><br />$result = mysql_query("SET NAMES utf8");</span></code></div>
  </div>
 </div>
  <div class="note" id="39517">  <div class="votes">
    <div id="Vu39517">
    <a href="https://www.php.net/manual/vote-note.php?id=39517&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd39517">
    <a href="https://www.php.net/manual/vote-note.php?id=39517&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V39517" title="57% like this...">
    4
    </div>
  </div>
  <a href="function.utf8-decode.php.html#39517" class="name">
  <strong class="user"><em>Aidan Kehoe &lt;php-manual at parhasard dot net&gt;</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#39517"> &para;</a><div class="date" title="2004-01-31 05:35"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom39517">
<div class="phpcode"><code><span class="html">The fastest way I've found to check if something is valid UTF-8 is <br /><span class="default">&lt;?php <br /></span><span class="keyword">if (</span><span class="default">iconv</span><span class="keyword">(</span><span class="string">'UTF-8'</span><span class="keyword">, </span><span class="string">'UTF-8'</span><span class="keyword">, </span><span class="default">$input</span><span class="keyword">) != </span><span class="default">$input</span><span class="keyword">) { <br />        </span><span class="comment">/* It's not UTF-8--for me, it's probably CP1252, the Windows<br />           version of Latin 1, with directed quotation marks and<br />           the Euro sign.  */<br /></span><span class="keyword">}<br /> </span><span class="default">?&gt;</span>. <br />The iconv() C library fails if it's told a string is UTF-8 and it isn't; the PHP one doesn't, it just returns the conversion up to the point of failure, so you have to compare the result to the input to find out if the conversion succeeded.</span></code></div>
  </div>
 </div>
  <div class="note" id="81599">  <div class="votes">
    <div id="Vu81599">
    <a href="https://www.php.net/manual/vote-note.php?id=81599&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd81599">
    <a href="https://www.php.net/manual/vote-note.php?id=81599&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V81599" title="56% like this...">
    3
    </div>
  </div>
  <a href="function.utf8-decode.php.html#81599" class="name">
  <strong class="user"><em>lukasz dot mlodzik at gmail dot com</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#81599"> &para;</a><div class="date" title="2008-03-05 04:46"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom81599">
<div class="phpcode"><code><span class="html">Update to MARC13 function utf2iso()<br />I'm using it to handle AJAX POST calls. <br />Despite using <br />http.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded'; charset='utf-8'); <br />it still code Polish letters using UTF-16<br /><br />This is only for Polish letters:<br /> <br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">utf16_2_utf8 </span><span class="keyword">(</span><span class="default">$nowytekst</span><span class="keyword">) {<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0104'</span><span class="keyword">,</span><span class="string">'Ą'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ą<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0106'</span><span class="keyword">,</span><span class="string">'Ć'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ć<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0118'</span><span class="keyword">,</span><span class="string">'Ę'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ę<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0141'</span><span class="keyword">,</span><span class="string">'Ł'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ł<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0143'</span><span class="keyword">,</span><span class="string">'Ń'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ń<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u00D3'</span><span class="keyword">,</span><span class="string">'Ó'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ó<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u015A'</span><span class="keyword">,</span><span class="string">'Ś'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ś<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0179'</span><span class="keyword">,</span><span class="string">'Ź'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ź<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u017B'</span><span class="keyword">,</span><span class="string">'Ż'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ż<br />       <br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0105'</span><span class="keyword">,</span><span class="string">'ą'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ą<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0107'</span><span class="keyword">,</span><span class="string">'ć'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ć<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0119'</span><span class="keyword">,</span><span class="string">'ę'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ę<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0142'</span><span class="keyword">,</span><span class="string">'ł'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ł<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0144'</span><span class="keyword">,</span><span class="string">'ń'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ń<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u00F3'</span><span class="keyword">,</span><span class="string">'ó'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ó<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u015B'</span><span class="keyword">,</span><span class="string">'ś'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ś<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u017A'</span><span class="keyword">,</span><span class="string">'ź'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ź<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u017C'</span><span class="keyword">,</span><span class="string">'ż'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ż<br />   </span><span class="keyword">return (</span><span class="default">$nowytekst</span><span class="keyword">);<br />   }    <br /></span><span class="default">?&gt;<br /></span><br />Everything goes smooth, but it doesn't change '%u00D3','Ó' and '%u00F3','ó'. I dont have idea what to do with that.<br /><br />Remember! File must be saved in UTF-8 coding.</span></code></div>
  </div>
 </div>
  <div class="note" id="72978">  <div class="votes">
    <div id="Vu72978">
    <a href="https://www.php.net/manual/vote-note.php?id=72978&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd72978">
    <a href="https://www.php.net/manual/vote-note.php?id=72978&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V72978" title="54% like this...">
    3
    </div>
  </div>
  <a href="function.utf8-decode.php.html#72978" class="name">
  <strong class="user"><em>sam</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#72978"> &para;</a><div class="date" title="2007-02-06 08:20"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom72978">
<div class="phpcode"><code><span class="html">In addition to yannikh's note, to convert a hex utf8 string<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">echo </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="string">"\x61\xc3\xb6\x61"</span><span class="keyword">);<br /></span><span class="comment">// works as expected<br /><br /></span><span class="default">$abc</span><span class="keyword">=</span><span class="string">"61c3b661"</span><span class="keyword">;<br /></span><span class="default">$newstr </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br /></span><span class="default">$l </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$abc</span><span class="keyword">);<br />for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$l</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">+=</span><span class="default">2</span><span class="keyword">){<br />    </span><span class="default">$newstr </span><span class="keyword">.= </span><span class="string">"\x"</span><span class="keyword">.</span><span class="default">$abc</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="default">$abc</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">];<br />}<br />echo </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$newstr</span><span class="keyword">);<br /></span><span class="comment">// or varieties  of "\x": "\\x" etc does NOT output what you want<br /><br /></span><span class="keyword">echo </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">pack</span><span class="keyword">(</span><span class="string">'H*'</span><span class="keyword">,</span><span class="default">$abc</span><span class="keyword">));<br /></span><span class="comment">// this outputs the correct string, like the first line.<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="121290">  <div class="votes">
    <div id="Vu121290">
    <a href="https://www.php.net/manual/vote-note.php?id=121290&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd121290">
    <a href="https://www.php.net/manual/vote-note.php?id=121290&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V121290" title="53% like this...">
    1
    </div>
  </div>
  <a href="function.utf8-decode.php.html#121290" class="name">
  <strong class="user"><em>Aleksandr</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#121290"> &para;</a><div class="date" title="2017-06-30 02:46"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom121290">
<div class="phpcode"><code><span class="html">In addition to note by yannikh at gmeil dot com, another way to decode strings with non-latin chars from unix console like<br /><br />C=RU, L=\xD0\x9C\xD0\xBE\xD1\x81\xD0\xBA\xD0\xB2\xD0\xB0,<br /><br /><span class="default">&lt;?php preg_replace_callback</span><span class="keyword">(</span><span class="string">'/\\\\x([0-9A-F]{2})/'</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">){ return </span><span class="default">pack</span><span class="keyword">(</span><span class="string">'H*'</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]); }, </span><span class="default">$str</span><span class="keyword">); </span><span class="default">?&gt;<br /></span><br />The code above will output:<br />C=RU, L=Москва,</span></code></div>
  </div>
 </div>
  <div class="note" id="128345">  <div class="votes">
    <div id="Vu128345">
    <a href="https://www.php.net/manual/vote-note.php?id=128345&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd128345">
    <a href="https://www.php.net/manual/vote-note.php?id=128345&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V128345" title="100% like this...">
    1
    </div>
  </div>
  <a href="function.utf8-decode.php.html#128345" class="name">
  <strong class="user"><em>jamalmarlone at gmail dot com</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#128345"> &para;</a><div class="date" title="2023-03-29 11:33"><strong>10 months ago</strong></div>
  <div class="text" id="Hcom128345">
<div class="phpcode"><code><span class="html">$string = "BjÃ¸rn Johansen";<br /><br />echo mb_convert_encoding($string, 'ISO-8859-1', 'UTF-8');<br /><br />----<br />prints: "Bjørn Johansen"</span></code></div>
  </div>
 </div>
  <div class="note" id="110494">  <div class="votes">
    <div id="Vu110494">
    <a href="https://www.php.net/manual/vote-note.php?id=110494&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd110494">
    <a href="https://www.php.net/manual/vote-note.php?id=110494&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V110494" title="50% like this...">
    1
    </div>
  </div>
  <a href="function.utf8-decode.php.html#110494" class="name">
  <strong class="user"><em>christoffer</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#110494"> &para;</a><div class="date" title="2012-10-29 10:35"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom110494">
<div class="phpcode"><code><span class="html">The preferred way to use this on an array would be with the built in PHP function "array_map()", as for example:<br />$array = array_map("utf8_decode", $array);</span></code></div>
  </div>
 </div>
  <div class="note" id="119280">  <div class="votes">
    <div id="Vu119280">
    <a href="https://www.php.net/manual/vote-note.php?id=119280&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd119280">
    <a href="https://www.php.net/manual/vote-note.php?id=119280&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V119280" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.utf8-decode.php.html#119280" class="name">
  <strong class="user"><em>kode68</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#119280"> &para;</a><div class="date" title="2016-05-02 06:09"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom119280">
<div class="phpcode"><code><span class="html">Update Answer from okx dot oliver dot koenig at gmail dot com for PHP 5.6 since e/ modifier is depreciated<br /><br />// This finally helped me to do the job, thanks to Blackbit, had to modify deprecated ereg:<br />// original comment: "Squirrelmail contains a nice function in the sources to convert unicode to entities:"<br /><br />function charset_decode_utf_8($string)<br />    {<br />        /* Only do the slow convert if there are 8-bit characters */<br />        if ( !preg_match("/[\200-\237]/", $string) &amp;&amp; !preg_match("/[\241-\377]/", $string) )<br />               return $string;<br /><br />        // decode three byte unicode characters<br />          $string = preg_replace_callback("/([\340-\357])([\200-\277])([\200-\277])/",<br />                    create_function ('$matches', 'return \'&amp;#\'.((ord($matches[1])-224)*4096+(ord($matches[2])-128)*64+(ord($matches[3])-128)).\';\';'),<br />                    $string);<br /><br />        // decode two byte unicode characters<br />          $string = preg_replace_callback("/([\300-\337])([\200-\277])/",<br />                    create_function ('$matches', 'return \'&amp;#\'.((ord($matches[1])-192)*64+(ord($matches[2])-128)).\';\';'),<br />                    $string);<br /><br />        return $string;<br />    }<br /><br />Enjoy</span></code></div>
  </div>
 </div>
  <div class="note" id="116271">  <div class="votes">
    <div id="Vu116271">
    <a href="https://www.php.net/manual/vote-note.php?id=116271&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116271">
    <a href="https://www.php.net/manual/vote-note.php?id=116271&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116271" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.utf8-decode.php.html#116271" class="name">
  <strong class="user"><em>sashott at gmail dot com</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#116271"> &para;</a><div class="date" title="2014-12-04 11:57"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom116271">
<div class="phpcode"><code><span class="html">Use of utf8_decode was not enough for me by get page content from another site. Problem appear by different alphabet from standard latin. As example some chars (corresponding to HTML codes &amp;bdquo; , &amp;nbsp; and others) are converted to "?" or "xA0" (hex value). You need to make some conversion before execute utf8_decode. And you can not replace simple, that they can be part of 2 bytes code for a char (UTF-8 use 2 bytes). Next is for cyrillic alphabet, but for other must be very close.<br /><br />function convertMethod($text){<br />    //Problem is that utf8_decode convert HTML chars for &amp;bdquo; and other to ? or &amp;nbsp; to \xA0. And you can not replace, that they are in some char bytes and you broke cyrillic (or other alphabet) chars.<br />    $problem_enc=array(<br />        'euro',<br />        'sbquo',<br />        'bdquo',<br />        'hellip',<br />        'dagger',<br />        'Dagger',<br />        'permil',<br />        'lsaquo',<br />        'lsquo',<br />        'rsquo',<br />        'ldquo',<br />        'rdquo',<br />        'bull',<br />        'ndash',<br />        'mdash',<br />        'trade',<br />        'rsquo',<br />        'brvbar',<br />        'copy',<br />        'laquo',<br />        'reg',<br />        'plusmn',<br />        'micro',<br />        'para',<br />        'middot',<br />        'raquo',<br />        'nbsp'<br />    );<br />    $text=mb_convert_encoding($text,'HTML-ENTITIES','UTF-8');<br />    $text=preg_replace('#(?&lt;!\&amp;ETH;)\&amp;('.implode('|',$problem_enc).');#s','--amp{$1}',$text);<br />    $text=mb_convert_encoding($text,'UTF-8','HTML-ENTITIES');<br />    $text=utf8_decode($text);<br />    $text=mb_convert_encoding($text,'HTML-ENTITIES','UTF-8');<br />    $text=preg_replace('#\-\-amp\{([^\}]+)\}#su','&amp;$1;',$text);<br />    $text=mb_convert_encoding($text,'UTF-8','HTML-ENTITIES');<br />    return $text;<br />}<br /><br />If this don't work, try to set "die($text);" on some places to look, what is happen to this row. Is better to test with long text. It is very possible to broke other alphabet character. In this case, it is very possible, that for you alphabet set "&amp;ETH;" is not the right one. You need to set "die($text);" after this preg_replace and look HTML code for character before set "--amp".</span></code></div>
  </div>
 </div>
  <div class="note" id="84031">  <div class="votes">
    <div id="Vu84031">
    <a href="https://www.php.net/manual/vote-note.php?id=84031&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd84031">
    <a href="https://www.php.net/manual/vote-note.php?id=84031&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V84031" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.utf8-decode.php.html#84031" class="name">
  <strong class="user"><em>punchivan at gmail dot com</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#84031"> &para;</a><div class="date" title="2008-06-24 02:13"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom84031">
<div class="phpcode"><code><span class="html">EY! the bug is not in the function 'utf8_decode'. The bug is in the function 'mb_detect_encoding'. If you put a word with a special char at the end like this 'accentué', that will lead to a wrong result (UTF-8) but if you put another char at the end like this 'accentuée' you will get it right. So you should always add a ISO-8859-1 character to your string for this check. My advise is to use a blank space.<br />I´ve tried it and it works! <br /><br />function ISO_convert($array)<br />{<br />    $array_temp = array();<br />     <br />    foreach($array as $name =&gt; $value)<br />    {<br />        if(is_array($value))<br />          $array_temp[(mb_detect_encoding($name." ",'UTF-8,ISO-8859-1') == 'UTF-8' ? utf8_decode($name) : $name )] = ISO_convert($value);<br />        else<br />          $array_temp[(mb_detect_encoding($name." ",'UTF-8,ISO-8859-1') == 'UTF-8' ? utf8_decode($name) : $name )] = (mb_detect_encoding($value." ",'UTF-8,ISO-8859-1') == 'UTF-8' ? utf8_decode($value) : $value );<br />    }<br /><br />    return $array_temp; <br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="76434">  <div class="votes">
    <div id="Vu76434">
    <a href="https://www.php.net/manual/vote-note.php?id=76434&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd76434">
    <a href="https://www.php.net/manual/vote-note.php?id=76434&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V76434" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.utf8-decode.php.html#76434" class="name">
  <strong class="user"><em>ludvig dot ericson at gmail dot com</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#76434"> &para;</a><div class="date" title="2007-07-15 10:52"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom76434">
<div class="phpcode"><code><span class="html">A better way to convert would be to use iconv, see <a href="http://www.php.net/iconv" rel="nofollow" target="_blank">http://www.php.net/iconv</a> -- example:<br /><br /><span class="default">&lt;?php<br />$myUnicodeString </span><span class="keyword">= </span><span class="string">"Åäö"</span><span class="keyword">;<br />echo </span><span class="default">iconv</span><span class="keyword">(</span><span class="string">"UTF-8"</span><span class="keyword">, </span><span class="string">"ISO-8859-1"</span><span class="keyword">, </span><span class="default">$myUnicodeString</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />Above would echo out the given variable in ISO-8859-1 encoding, you may replace it with whatever you prefer.<br /><br />Another solution to the issue of misdisplayed glyphs is to simply send the document as UTF-8, and of course send UTF-8 data:<br /><br /><span class="default">&lt;?php<br /></span><span class="comment"># Replace text/html with whatever MIME-type you prefer.<br /></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Type: text/html; charset=utf-8"</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="75941">  <div class="votes">
    <div id="Vu75941">
    <a href="https://www.php.net/manual/vote-note.php?id=75941&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd75941">
    <a href="https://www.php.net/manual/vote-note.php?id=75941&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V75941" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.utf8-decode.php.html#75941" class="name">
  <strong class="user"><em>luka8088 at gmail dot com</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#75941"> &para;</a><div class="date" title="2007-06-22 07:03"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom75941">
<div class="phpcode"><code><span class="html">simple UTF-8 to HTML conversion:<br /><br />function utf8_to_html ($data)<br />    {<br />    return preg_replace("/([\\xC0-\\xF7]{1,1}[\\x80-\\xBF]+)/e", '_utf8_to_html("\\1")', $data);<br />    }<br /><br />function _utf8_to_html ($data)<br />    {<br />    $ret = 0;<br />    foreach((str_split(strrev(chr((ord($data{0}) % 252 % 248 % 240 % 224 % 192) + 128) . substr($data, 1)))) as $k =&gt; $v)<br />        $ret += (ord($v) % 128) * pow(64, $k);<br />    return "&amp;#$ret;";<br />    }<br /><br />Example:<br />echo utf8_to_html("a b č ć ž こ に ち わ ()[]{}!#$?*");<br /><br />Output:<br />a b &amp;#269; &amp;#263; &amp;#382; &amp;#12371; &amp;#12395; &amp;#12385; &amp;#12431; ()[]{}!#$?*</span></code></div>
  </div>
 </div>
  <div class="note" id="75261">  <div class="votes">
    <div id="Vu75261">
    <a href="https://www.php.net/manual/vote-note.php?id=75261&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd75261">
    <a href="https://www.php.net/manual/vote-note.php?id=75261&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V75261" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.utf8-decode.php.html#75261" class="name">
  <strong class="user"><em>alexlevin at kvadro dot net</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#75261"> &para;</a><div class="date" title="2007-05-20 08:20"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom75261">
<div class="phpcode"><code><span class="html">If you running Gentoo Linux and encounter problems with some PHP4 applications saying:<br />Call to undefined function: utf8_decode()<br />Try reemerge PHP4 with 'expat' flag enabled.</span></code></div>
  </div>
 </div>
  <div class="note" id="59485">  <div class="votes">
    <div id="Vu59485">
    <a href="https://www.php.net/manual/vote-note.php?id=59485&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd59485">
    <a href="https://www.php.net/manual/vote-note.php?id=59485&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V59485" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.utf8-decode.php.html#59485" class="name">
  <strong class="user"><em>php-net at ---NOSPAM---lc dot yi dot org</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#59485"> &para;</a><div class="date" title="2005-12-08 12:04"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom59485">
<div class="phpcode"><code><span class="html">I've just created this code snippet to improve the user-customizable emails sent by one of my websites.<br /><br />The goal was to use UTF-8 (Unicode) so that non-english users have all the Unicode benefits, BUT also make life seamless for English (or specifically, English MS-Outlook users).  The niggle: Outlook prior to 2003 (?)  does not properly detect unicode emails.  When "smart quotes" from MS Word were pasted into a rich text area and saved in Unicode, then sent by email to an Outlook user, more often than not, these characters were wrongly rendered as "greek". <br /><br />So, the following code snippet replaces a few strategic characters into html entities which Outlook XP (and possibly earlier) will render as expected.  [Code based on bits of code from previous posts on this and the htmlenties page]<br /><span class="default">&lt;?php<br />    $badwordchars</span><span class="keyword">=array(<br />        </span><span class="string">"\xe2\x80\x98"</span><span class="keyword">, </span><span class="comment">// left single quote<br />        </span><span class="string">"\xe2\x80\x99"</span><span class="keyword">, </span><span class="comment">// right single quote<br />        </span><span class="string">"\xe2\x80\x9c"</span><span class="keyword">, </span><span class="comment">// left double quote<br />        </span><span class="string">"\xe2\x80\x9d"</span><span class="keyword">, </span><span class="comment">// right double quote<br />        </span><span class="string">"\xe2\x80\x94"</span><span class="keyword">, </span><span class="comment">// em dash<br />        </span><span class="string">"\xe2\x80\xa6" </span><span class="comment">// elipses<br />    </span><span class="keyword">);<br />    </span><span class="default">$fixedwordchars</span><span class="keyword">=array(<br />        </span><span class="string">"&amp;#8216;"</span><span class="keyword">,<br />        </span><span class="string">"&amp;#8217;"</span><span class="keyword">,<br />        </span><span class="string">'&amp;#8220;'</span><span class="keyword">,<br />        </span><span class="string">'&amp;#8221;'</span><span class="keyword">,<br />        </span><span class="string">'&amp;mdash;'</span><span class="keyword">,<br />        </span><span class="string">'&amp;#8230;'<br />    </span><span class="keyword">);<br />    </span><span class="default">$html</span><span class="keyword">=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$badwordchars</span><span class="keyword">,</span><span class="default">$fixedwordchars</span><span class="keyword">,</span><span class="default">$html</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="57339">  <div class="votes">
    <div id="Vu57339">
    <a href="https://www.php.net/manual/vote-note.php?id=57339&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd57339">
    <a href="https://www.php.net/manual/vote-note.php?id=57339&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V57339" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.utf8-decode.php.html#57339" class="name">
  <strong class="user"><em>thierry.bo # netcourrier point com</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#57339"> &para;</a><div class="date" title="2005-09-30 12:38"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom57339">
<div class="phpcode"><code><span class="html">In response to fhoech (22-Sep-2005 11:55), I just tried a simultaneous test with the file UTF-8-test.txt using your regexp, 'j dot dittmer' (20-Sep-2005 06:30) regexp (message #56962), `php-note-2005` (17-Feb-2005 08:57) regexp in his message on `mb-detect-encoding` page (<a href="http://us3.php.net/manual/en/function.mb-detect-encoding.php#50087" rel="nofollow" target="_blank">http://us3.php.net/manual/en/function.mb-detect-encoding.php#50087</a>) who is using a regexp from the W3C (<a href="http://w3.org/International/questions/qa-forms-utf-8.html" rel="nofollow" target="_blank">http://w3.org/International/questions/qa-forms-utf-8.html</a>), and PHP mb_detect_encoding function.<br /><br />Here are a summarize of the results :<br /><br />201 lines are valid UTF8 strings using phpnote regexp<br />203 lines are valid UTF8 strings using j.dittmer regexp<br />200 lines are valid UTF8 strings using fhoech regexp<br />239 lines are valid  UTF8 strings using using mb_detect_encoding<br /><br />Here are the lines with differences (left to right, phpnote, j.dittmer and fhoech) :<br /><br />Line #70 : NOT UTF8|IS UTF8!|IS UTF8! :2.1.1 1 byte (U-00000000): "" <br />Line #79 : NOT UTF8|IS UTF8!|IS UTF8! :2.2.1 1 byte (U-0000007F): "" <br />Line #81 : IS UTF8!|IS UTF8!|NOT UTF8 :2.2.3 3 bytes (U-0000FFFF): "&amp;#65535;" | <br />Line #267 : IS UTF8!|IS UTF8!|NOT UTF8 :5.3.1 U+FFFE = ef bf be = "&amp;#65534;" |<br />Line #268 : IS UTF8!|IS UTF8!|NOT UTF8 :5.3.2 U+FFFF = ef bf bf = "&amp;#65535;" | <br /><br />Interesting is that you said that your regexp corrected j.dittmer regexp that failed on 5.3 section, but it my test I have the opposite result ?!<br /><br />I ran this test on windows XP with PHP 4.3.11dev. Maybe these differences come from operating system, or PHP version. <br /><br />For mb_detect_encoding I used the command :<br /><br />mb_detect_encoding($line, 'UTF-8, ISO-8859-1, ASCII');</span></code></div>
  </div>
 </div>
  <div class="note" id="56962">  <div class="votes">
    <div id="Vu56962">
    <a href="https://www.php.net/manual/vote-note.php?id=56962&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd56962">
    <a href="https://www.php.net/manual/vote-note.php?id=56962&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V56962" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.utf8-decode.php.html#56962" class="name">
  <strong class="user"><em>j dot dittmer at portrix dot net</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#56962"> &para;</a><div class="date" title="2005-09-20 05:30"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom56962">
<div class="phpcode"><code><span class="html">The regex in the last comment has some typos. This is a<br />syntactically valid one, don't know if it's correct though.<br />You've to concat the expression in one long line.<br /><br />^(<br />[\x00-\x7f]|<br />[\xc2-\xdf][\x80-\xbf]|<br />[\xe0][\xa0-\xbf][\x80-\xbf]|<br />[\xe1-\xec][\x80-\xbf]{2}|<br />[\xed][\x80-\x9f][\x80-\xbf]|<br />[\xee-\xef][\x80-\xbf]{2}|<br />[\xf0][\x90-\xbf][\x80-\xbf]{2}|<br />[\xf1-\xf3][\x80-\xbf]{3}|<br />[\xf4][\x80-\x8f][\x80-\xbf]{2}<br />)*$</span></code></div>
  </div>
 </div>
  <div class="note" id="49185">  <div class="votes">
    <div id="Vu49185">
    <a href="https://www.php.net/manual/vote-note.php?id=49185&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd49185">
    <a href="https://www.php.net/manual/vote-note.php?id=49185&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V49185" title="50% like this...">
    0
    </div>
  </div>
  <a href="function.utf8-decode.php.html#49185" class="name">
  <strong class="user"><em>rasmus at flajm dot se</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#49185"> &para;</a><div class="date" title="2005-01-19 02:57"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom49185">
<div class="phpcode"><code><span class="html">If you don't have the multibyte extension installed, here's a function to decode UTF-16 encoded strings. It support both BOM-less and BOM'ed strings, (big- and little-endian byte order.)<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">/**<br /> * Decode UTF-16 encoded strings.<br /> * <br /> * Can handle both BOM'ed data and un-BOM'ed data. <br /> * Assumes Big-Endian byte order if no BOM is available.<br /> * <br /> * @param   string  $str  UTF-16 encoded data to decode.<br /> * @return  string  UTF-8 / ISO encoded data.<br /> * @access  public<br /> * @version 0.1 / 2005-01-19<br /> * @author  Rasmus Andersson {@link <a href="http://rasmusandersson.se/}" rel="nofollow" target="_blank">http://rasmusandersson.se/}</a><br /> * @package Groupies<br /> */<br /></span><span class="keyword">function </span><span class="default">utf16_decode</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">) {<br />    if( </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) &lt; </span><span class="default">2 </span><span class="keyword">) return </span><span class="default">$str</span><span class="keyword">;<br />    </span><span class="default">$bom_be </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />    </span><span class="default">$c0 </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">});<br />    </span><span class="default">$c1 </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">1</span><span class="keyword">});<br />    if( </span><span class="default">$c0 </span><span class="keyword">== </span><span class="default">0xfe </span><span class="keyword">&amp;&amp; </span><span class="default">$c1 </span><span class="keyword">== </span><span class="default">0xff </span><span class="keyword">) { </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">); }<br />    elseif( </span><span class="default">$c0 </span><span class="keyword">== </span><span class="default">0xff </span><span class="keyword">&amp;&amp; </span><span class="default">$c1 </span><span class="keyword">== </span><span class="default">0xfe </span><span class="keyword">) { </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">); </span><span class="default">$bom_be </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">; }<br />    </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />    </span><span class="default">$newstr </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />    for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$len</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">+=</span><span class="default">2</span><span class="keyword">) {<br />        if( </span><span class="default">$bom_be </span><span class="keyword">) { </span><span class="default">$val </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">})   &lt;&lt; </span><span class="default">4</span><span class="keyword">; </span><span class="default">$val </span><span class="keyword">+= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">}); }<br />        else {        </span><span class="default">$val </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">}) &lt;&lt; </span><span class="default">4</span><span class="keyword">; </span><span class="default">$val </span><span class="keyword">+= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">}); }<br />        </span><span class="default">$newstr </span><span class="keyword">.= (</span><span class="default">$val </span><span class="keyword">== </span><span class="default">0x228</span><span class="keyword">) ? </span><span class="string">"\n" </span><span class="keyword">: </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br />    }<br />    return </span><span class="default">$newstr</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="116671">  <div class="votes">
    <div id="Vu116671">
    <a href="https://www.php.net/manual/vote-note.php?id=116671&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116671">
    <a href="https://www.php.net/manual/vote-note.php?id=116671&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116671" title="48% like this...">
    -1
    </div>
  </div>
  <a href="function.utf8-decode.php.html#116671" class="name">
  <strong class="user"><em>okx dot oliver dot koenig at gmail dot com</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#116671"> &para;</a><div class="date" title="2015-02-08 11:48"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom116671">
<div class="phpcode"><code><span class="html">// This finally helped me to do the job, thanks to Blackbit, had to modify deprecated ereg:<br />// original comment: "Squirrelmail contains a nice function in the sources to convert unicode to entities:"<br /><br />function charset_decode_utf_8 ($string) {<br />    /* Only do the slow convert if there are 8-bit characters */<br />    /* avoid using 0xA0 (\240) in ereg ranges. RH73 does not like that */<br />    if (!preg_match("/[\200-\237]/", $string)<br />     &amp;&amp; !preg_match("/[\241-\377]/", $string)<br />    ) {<br />        return $string;<br />    }<br /><br />    // decode three byte unicode characters<br />    $string = preg_replace("/([\340-\357])([\200-\277])([\200-\277])/e",<br />        "'&amp;#'.((ord('\\1')-224)*4096 + (ord('\\2')-128)*64 + (ord('\\3')-128)).';'",<br />        $string<br />    );<br /><br />    // decode two byte unicode characters<br />    $string = preg_replace("/([\300-\337])([\200-\277])/e",<br />        "'&amp;#'.((ord('\\1')-192)*64+(ord('\\2')-128)).';'",<br />        $string<br />    );<br /><br />    return $string;<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="85034">  <div class="votes">
    <div id="Vu85034">
    <a href="https://www.php.net/manual/vote-note.php?id=85034&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd85034">
    <a href="https://www.php.net/manual/vote-note.php?id=85034&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V85034" title="47% like this...">
    -1
    </div>
  </div>
  <a href="function.utf8-decode.php.html#85034" class="name">
  <strong class="user"><em>Blackbit</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#85034"> &para;</a><div class="date" title="2008-08-12 04:40"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom85034">
<div class="phpcode"><code><span class="html">Squirrelmail contains a nice function in the sources to convert unicode to entities:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">charset_decode_utf_8 </span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {<br />      </span><span class="comment">/* Only do the slow convert if there are 8-bit characters */<br />    /* avoid using 0xA0 (\240) in ereg ranges. RH73 does not like that */<br />    </span><span class="keyword">if (! </span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"[\200-\237]"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">) and ! </span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"[\241-\377]"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">))<br />        return </span><span class="default">$string</span><span class="keyword">;<br /><br />    </span><span class="comment">// decode three byte unicode characters<br />    </span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/([\340-\357])([\200-\277])([\200-\277])/e"</span><span class="keyword">,        \<br />    </span><span class="string">"'&amp;#'.((ord('\\1')-224)*4096 + (ord('\\2')-128)*64 + (ord('\\3')-128)).';'"</span><span class="keyword">,    \<br />    </span><span class="default">$string</span><span class="keyword">);<br /><br />    </span><span class="comment">// decode two byte unicode characters<br />    </span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/([\300-\337])([\200-\277])/e"</span><span class="keyword">, \<br />    </span><span class="string">"'&amp;#'.((ord('\\1')-192)*64+(ord('\\2')-128)).';'"</span><span class="keyword">, \<br />    </span><span class="default">$string</span><span class="keyword">);<br /><br />    return </span><span class="default">$string</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="75952">  <div class="votes">
    <div id="Vu75952">
    <a href="https://www.php.net/manual/vote-note.php?id=75952&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd75952">
    <a href="https://www.php.net/manual/vote-note.php?id=75952&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V75952" title="47% like this...">
    -1
    </div>
  </div>
  <a href="function.utf8-decode.php.html#75952" class="name">
  <strong class="user"><em>visus at portsonline dot net</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#75952"> &para;</a><div class="date" title="2007-06-23 09:08"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom75952">
<div class="phpcode"><code><span class="html">Following code helped me with mixed (UTF8+ISO-8859-1(x)) encodings. In this case, I have template files made and maintained by designers who do not care about encoding and MySQL data in utf8_binary_ci encoded tables.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">class </span><span class="default">Helper<br /></span><span class="keyword">{<br />    function </span><span class="default">strSplit</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$split </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">)<br />    {<br />        if (!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br />        if (!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$split</span><span class="keyword">) &amp;&amp; </span><span class="default">$split </span><span class="keyword">&lt; </span><span class="default">1</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br /><br />        </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);<br /><br />        </span><span class="default">$array </span><span class="keyword">= array();<br /><br />        </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br /><br />        while (</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">)<br />        {<br />            </span><span class="default">$key </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br /><br />            for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">$split</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">)<br />            {<br />                </span><span class="default">$key </span><span class="keyword">.= </span><span class="default">$text</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">};<br /><br />                </span><span class="default">$i </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;<br />            }<br /><br />            </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$key</span><span class="keyword">;<br />        }<br /><br />        return </span><span class="default">$array</span><span class="keyword">;<br />    }<br /><br />    function </span><span class="default">UTF8ToHTML</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)<br />    {<br />        </span><span class="default">$search </span><span class="keyword">= array();<br />        </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/([\\xC0-\\xF7]{1,1}[\\x80-\\xBF]+)/e"</span><span class="keyword">;<br />        </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/&amp;#228;/"</span><span class="keyword">;<br />        </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/&amp;#246;/"</span><span class="keyword">;<br />        </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/&amp;#252;/"</span><span class="keyword">;<br />        </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/&amp;#196;/"</span><span class="keyword">;<br />        </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/&amp;#214;/"</span><span class="keyword">;<br />        </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/&amp;#220;/"</span><span class="keyword">;<br />        </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/&amp;#223;/"</span><span class="keyword">;<br /><br />        </span><span class="default">$replace </span><span class="keyword">= array();<br />        </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">'Helper::_UTF8ToHTML("\\1")'</span><span class="keyword">;<br />        </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"ä"</span><span class="keyword">;<br />        </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"ö"</span><span class="keyword">;<br />        </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"ü"</span><span class="keyword">;<br />        </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"Ä"</span><span class="keyword">;<br />        </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"Ö"</span><span class="keyword">;<br />        </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"ü"</span><span class="keyword">;<br />        </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"ß"</span><span class="keyword">;<br /><br />        </span><span class="default">$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br /><br />        return </span><span class="default">$str</span><span class="keyword">;<br />    }<br /><br />    function </span><span class="default">_UTF8ToHTML</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)<br />    {<br />        </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br /><br />        foreach((</span><span class="default">Helper</span><span class="keyword">::</span><span class="default">strSplit</span><span class="keyword">(</span><span class="default">strrev</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">((</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">}) % </span><span class="default">252 </span><span class="keyword">% </span><span class="default">248 </span><span class="keyword">% </span><span class="default">240 </span><span class="keyword">% </span><span class="default">224 </span><span class="keyword">% </span><span class="default">192</span><span class="keyword">) + </span><span class="default">128</span><span class="keyword">).</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">)))) as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br />            </span><span class="default">$ret </span><span class="keyword">+= (</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">) % </span><span class="default">128</span><span class="keyword">) * </span><span class="default">pow</span><span class="keyword">(</span><span class="default">64</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">);<br />        return </span><span class="string">"&amp;#"</span><span class="keyword">.</span><span class="default">$ret</span><span class="keyword">.</span><span class="string">";"</span><span class="keyword">;<br />    }<br />}<br /><br /></span><span class="comment">// Usage example:<br /><br /></span><span class="default">$tpl </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">"template.tpl"</span><span class="keyword">);<br /></span><span class="comment">/* ... */<br /></span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_assoc</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br /><br />print(</span><span class="default">Helper</span><span class="keyword">::</span><span class="default">UTF8ToHTML</span><span class="keyword">(</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"{VAR}"</span><span class="keyword">, </span><span class="default">$row</span><span class="keyword">[</span><span class="string">'var'</span><span class="keyword">], </span><span class="default">$tpl</span><span class="keyword">)));<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="70776">  <div class="votes">
    <div id="Vu70776">
    <a href="https://www.php.net/manual/vote-note.php?id=70776&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd70776">
    <a href="https://www.php.net/manual/vote-note.php?id=70776&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V70776" title="45% like this...">
    -1
    </div>
  </div>
  <a href="function.utf8-decode.php.html#70776" class="name">
  <strong class="user"><em>paul.hayes at entropedia.co.uk</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#70776"> &para;</a><div class="date" title="2006-10-27 07:10"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom70776">
<div class="phpcode"><code><span class="html">I noticed that the utf-8 to html functions below are only for 2 byte long codes. Well I wanted 3 byte support (sorry haven't done 4, 5 or 6). Also I noticed the concatination of the character codes did have the hex prefix 0x and so failed with the large 2 byte codes)<br /><br />&lt;?<br />  public function utf2html (&amp;$str) {<br />    <br />    $ret = "";<br />    $max = strlen($str);<br />    $last = 0;  // keeps the index of the last regular character<br />    for ($i=0; $i&lt;$max; $i++) {<br />        $c = $str{$i};<br />        $c1 = ord($c);<br />        if ($c1&gt;&gt;5 == 6) {  // 110x xxxx, 110 prefix for 2 bytes unicode<br />            $ret .= substr($str, $last, $i-$last); // append all the regular characters we've passed<br />            $c1 &amp;= 31; // remove the 3 bit two bytes prefix<br />            $c2 = ord($str{++$i}); // the next byte<br />            $c2 &amp;= 63;  // remove the 2 bit trailing byte prefix<br />            $c2 |= (($c1 &amp; 3) &lt;&lt; 6); // last 2 bits of c1 become first 2 of c2<br />            $c1 &gt;&gt;= 2; // c1 shifts 2 to the right<br />            $ret .= "&amp;#" . ($c1 * 0x100 + $c2) . ";"; // this is the fastest string concatenation<br />            $last = $i+1;       <br />        }<br />        elseif ($c1&gt;&gt;4 == 14) {  // 1110 xxxx, 110 prefix for 3 bytes unicode<br />            $ret .= substr($str, $last, $i-$last); // append all the regular characters we've passed<br />            $c2 = ord($str{++$i}); // the next byte<br />            $c3 = ord($str{++$i}); // the third byte<br />            $c1 &amp;= 15; // remove the 4 bit three bytes prefix<br />            $c2 &amp;= 63;  // remove the 2 bit trailing byte prefix<br />            $c3 &amp;= 63;  // remove the 2 bit trailing byte prefix<br />            $c3 |= (($c2 &amp; 3) &lt;&lt; 6); // last 2 bits of c2 become first 2 of c3<br />            $c2 &gt;&gt;=2; //c2 shifts 2 to the right<br />            $c2 |= (($c1 &amp; 15) &lt;&lt; 4); // last 4 bits of c1 become first 4 of c2<br />            $c1 &gt;&gt;= 4; // c1 shifts 4 to the right<br />            $ret .= '&amp;#' . (($c1 * 0x10000) + ($c2 * 0x100) + $c3) . ';'; // this is the fastest string concatenation<br />            $last = $i+1;       <br />        }<br />    }<br />    $str=$ret . substr($str, $last, $i); // append the last batch of regular characters<br />} <br />?&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="76250">  <div class="votes">
    <div id="Vu76250">
    <a href="https://www.php.net/manual/vote-note.php?id=76250&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd76250">
    <a href="https://www.php.net/manual/vote-note.php?id=76250&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V76250" title="42% like this...">
    -1
    </div>
  </div>
  <a href="function.utf8-decode.php.html#76250" class="name">
  <strong class="user"><em>MARC13</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#76250"> &para;</a><div class="date" title="2007-07-07 07:50"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom76250">
<div class="phpcode"><code><span class="html">I did this function to convert data from AJAX call to insert to my database.<br />It converts UTF-8 from XMLHttpRequest() to ISO-8859-2 that I use in LATIN2 MySQL database.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">utf2iso</span><span class="keyword">(</span><span class="default">$tekst</span><span class="keyword">)<br />{<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0104"</span><span class="keyword">,</span><span class="string">"\xA1"</span><span class="keyword">,</span><span class="default">$tekst</span><span class="keyword">);    </span><span class="comment">//Ą<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0106"</span><span class="keyword">,</span><span class="string">"\xC6"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ć<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0118"</span><span class="keyword">,</span><span class="string">"\xCA"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ę<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0141"</span><span class="keyword">,</span><span class="string">"\xA3"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ł<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0143"</span><span class="keyword">,</span><span class="string">"\xD1"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ń<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u00D3"</span><span class="keyword">,</span><span class="string">"\xD3"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ó<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u015A"</span><span class="keyword">,</span><span class="string">"\xA6"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ś<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0179"</span><span class="keyword">,</span><span class="string">"\xAC"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ź<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u017B"</span><span class="keyword">,</span><span class="string">"\xAF"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//Ż<br />        <br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0105"</span><span class="keyword">,</span><span class="string">"\xB1"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ą<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0107"</span><span class="keyword">,</span><span class="string">"\xE6"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ć<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0119"</span><span class="keyword">,</span><span class="string">"\xEA"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ę<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0142"</span><span class="keyword">,</span><span class="string">"\xB3"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ł<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0144"</span><span class="keyword">,</span><span class="string">"\xF1"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ń<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u00D4"</span><span class="keyword">,</span><span class="string">"\xF3"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ó<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u015B"</span><span class="keyword">,</span><span class="string">"\xB6"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ś<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u017A"</span><span class="keyword">,</span><span class="string">"\xBC"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ź<br />        </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u017C"</span><span class="keyword">,</span><span class="string">"\xBF"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);    </span><span class="comment">//ż<br />        <br />    </span><span class="keyword">return (</span><span class="default">$nowytekst</span><span class="keyword">);<br />}<br /></span><span class="default">?&gt;<br /></span><br />In my case also the code file that deals with AJAX calls must be in UTF-8 coding.</span></code></div>
  </div>
 </div>
  <div class="note" id="71999">  <div class="votes">
    <div id="Vu71999">
    <a href="https://www.php.net/manual/vote-note.php?id=71999&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd71999">
    <a href="https://www.php.net/manual/vote-note.php?id=71999&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V71999" title="41% like this...">
    -2
    </div>
  </div>
  <a href="function.utf8-decode.php.html#71999" class="name">
  <strong class="user"><em>Ajgor</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#71999"> &para;</a><div class="date" title="2006-12-28 05:38"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom71999">
<div class="phpcode"><code><span class="html">small upgrade for polish decoding:<br /><br />function utf82iso88592($text) {<br /> $text = str_replace("\xC4\x85", 'ą', $text);<br /> $text = str_replace("\xC4\x84", 'Ą', $text);<br /> $text = str_replace("\xC4\x87", 'ć', $text);<br /> $text = str_replace("\xC4\x86", 'Ć', $text);<br /> $text = str_replace("\xC4\x99", 'ę', $text);<br /> $text = str_replace("\xC4\x98", 'Ę', $text);<br /> $text = str_replace("\xC5\x82", 'ł', $text);<br /> $text = str_replace("\xC5\x81", 'Ł', $text);<br /> $text = str_replace("\xC3\xB3", 'ó', $text);<br /> $text = str_replace("\xC3\x93", 'Ó', $text);<br /> $text = str_replace("\xC5\x9B", 'ś', $text);<br /> $text = str_replace("\xC5\x9A", 'Ś', $text);<br /> $text = str_replace("\xC5\xBC", 'ż', $text);<br /> $text = str_replace("\xC5\xBB", 'Ż', $text);<br /> $text = str_replace("\xC5\xBA", 'ż', $text);<br /> $text = str_replace("\xC5\xB9", 'Ż', $text);<br /> $text = str_replace("\xc5\x84", 'ń', $text);<br /> $text = str_replace("\xc5\x83", 'Ń', $text);<br /><br />return $text;<br />} // utf82iso88592</span></code></div>
  </div>
 </div>
  <div class="note" id="37747">  <div class="votes">
    <div id="Vu37747">
    <a href="https://www.php.net/manual/vote-note.php?id=37747&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd37747">
    <a href="https://www.php.net/manual/vote-note.php?id=37747&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V37747" title="37% like this...">
    -2
    </div>
  </div>
  <a href="function.utf8-decode.php.html#37747" class="name">
  <strong class="user"><em>gto at interia dot pl</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#37747"> &para;</a><div class="date" title="2003-11-25 07:12"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom37747">
<div class="phpcode"><code><span class="html">Correction to function converting utf82iso88592 and iso88592tutf8.<br />Janusz forgot about "&amp;#324;", and "&amp;#380;" exchanged from "&amp;#378;" here and there.<br /><br />GTo<br /><br />function utf82iso88592($tekscik) {<br />     $tekscik = str_replace("\xC4\x85", "&amp;#261;", $tekscik);<br />     $tekscik = str_replace("\xC4\x84", '&amp;#260;', $tekscik);<br />     $tekscik = str_replace("\xC4\x87", '&amp;#263;', $tekscik);<br />     $tekscik = str_replace("\xC4\x86", '&amp;#262;', $tekscik);<br />     $tekscik = str_replace("\xC4\x99", '&amp;#281;', $tekscik);<br />     $tekscik = str_replace("\xC4\x98", '&amp;#280;', $tekscik);<br />     $tekscik = str_replace("\xC5\x82", '&amp;#322;', $tekscik);<br />     $tekscik = str_replace("\xC5\x81", '&amp;#321;', $tekscik);<br />     $tekscik = str_replace("\xC5\x84", '&amp;#324;', $tekscik);     <br />     $tekscik = str_replace("\xC5\x83", '&amp;#323;', $tekscik);<br />     $tekscik = str_replace("\xC3\xB3", '?', $tekscik);<br />     $tekscik = str_replace("\xC3\x93", '?', $tekscik);<br />     $tekscik = str_replace("\xC5\x9B", '&amp;#347;', $tekscik);<br />     $tekscik = str_replace("\xC5\x9A", '&amp;#346;', $tekscik);<br />     $tekscik = str_replace("\xC5\xBC", '&amp;#380;', $tekscik);<br />     $tekscik = str_replace("\xC5\xBB", '&amp;#379;', $tekscik);<br />     $tekscik = str_replace("\xC5\xBA", '&amp;#378;', $tekscik);<br />     $tekscik = str_replace("\xC5\xB9", '&amp;#377;', $tekscik);<br />     return $tekscik;<br />} // utf82iso88592<br /><br />function iso885922utf8($tekscik) {<br />     $tekscik = str_replace("&amp;#261;", "\xC4\x85", $tekscik);<br />     $tekscik = str_replace('&amp;#260;', "\xC4\x84", $tekscik);<br />     $tekscik = str_replace('&amp;#263;', "\xC4\x87", $tekscik);<br />     $tekscik = str_replace('&amp;#262;', "\xC4\x86", $tekscik);<br />     $tekscik = str_replace('&amp;#281;', "\xC4\x99", $tekscik);<br />     $tekscik = str_replace('&amp;#280;', "\xC4\x98", $tekscik);<br />     $tekscik = str_replace('&amp;#322;', "\xC5\x82", $tekscik);<br />     $tekscik = str_replace('&amp;#321;', "\xC5\x81", $tekscik);<br />     $tekscik = str_replace('&amp;#324;', "\xC5\x84", $tekscik);<br />     $tekscik = str_replace('&amp;#323;',"\xC5\x83", $tekscik);<br />     $tekscik = str_replace('?', "\xC3\xB3", $tekscik);<br />     $tekscik = str_replace('?', "\xC3\x93", $tekscik);<br />     $tekscik = str_replace('&amp;#347;', "\xC5\x9B", $tekscik);<br />     $tekscik = str_replace('&amp;#346;', "\xC5\x9A", $tekscik);<br />     $tekscik = str_replace('&amp;#380;', "\xC5\xBC", $tekscik);<br />     $tekscik = str_replace('&amp;#379;', "\xC5\xBB", $tekscik);<br />     $tekscik = str_replace('&amp;#378;', "\xC5\xBA", $tekscik);<br />     $tekscik = str_replace('&amp;#377;', "\xC5\xB9", $tekscik);     <br />     return $tekscik;<br />} // iso885922utf8</span></code></div>
  </div>
 </div>
  <div class="note" id="61120">  <div class="votes">
    <div id="Vu61120">
    <a href="https://www.php.net/manual/vote-note.php?id=61120&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd61120">
    <a href="https://www.php.net/manual/vote-note.php?id=61120&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V61120" title="36% like this...">
    -3
    </div>
  </div>
  <a href="function.utf8-decode.php.html#61120" class="name">
  <strong class="user"><em>2ge at NO2geSPAM dot us</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#61120"> &para;</a><div class="date" title="2006-01-26 01:00"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom61120">
<div class="phpcode"><code><span class="html">Hello all,<br /><br />I like to use COOL (nice) URIs, example: <a href="http://example.com/try-something" rel="nofollow" target="_blank">http://example.com/try-something</a><br />I'm using UTF8 as input, so I have to write a function UTF8toASCII to have nice URI. Here is what I come with:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">urlize</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {<br /> </span><span class="default">$search </span><span class="keyword">= array(</span><span class="string">'/[^a-z0-9]/'</span><span class="keyword">, </span><span class="string">'/--+/'</span><span class="keyword">, </span><span class="string">'/^-+/'</span><span class="keyword">, </span><span class="string">'/-+$/' </span><span class="keyword">);<br /> </span><span class="default">$replace </span><span class="keyword">= array( </span><span class="string">'-'</span><span class="keyword">, </span><span class="string">'-'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);<br /> return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">utf2ascii</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">));<br />}     <br /><br />function </span><span class="default">utf2ascii</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {<br /> </span><span class="default">$iso88591  </span><span class="keyword">= </span><span class="string">"\\xE0\\xE1\\xE2\\xE3\\xE4\\xE5\\xE6\\xE7"</span><span class="keyword">;<br /> </span><span class="default">$iso88591 </span><span class="keyword">.= </span><span class="string">"\\xE8\\xE9\\xEA\\xEB\\xEC\\xED\\xEE\\xEF"</span><span class="keyword">;<br /> </span><span class="default">$iso88591 </span><span class="keyword">.= </span><span class="string">"\\xF0\\xF1\\xF2\\xF3\\xF4\\xF5\\xF6\\xF7"</span><span class="keyword">;<br /> </span><span class="default">$iso88591 </span><span class="keyword">.= </span><span class="string">"\\xF8\\xF9\\xFA\\xFB\\xFC\\xFD\\xFE\\xFF"</span><span class="keyword">;<br /> </span><span class="default">$ascii </span><span class="keyword">= </span><span class="string">"aaaaaaaceeeeiiiidnooooooouuuuyyy"</span><span class="keyword">;<br /> return </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">mb_strtolower</span><span class="keyword">(</span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">), </span><span class="string">'ISO-8859-1'</span><span class="keyword">),</span><span class="default">$iso88591</span><span class="keyword">,</span><span class="default">$ascii</span><span class="keyword">);<br />}<br /><br />echo </span><span class="default">urlize</span><span class="keyword">(</span><span class="string">"Fucking ?m?l"</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;<br /></span><br />I hope this helps someone.</span></code></div>
  </div>
 </div>
  <div class="note" id="83051">  <div class="votes">
    <div id="Vu83051">
    <a href="https://www.php.net/manual/vote-note.php?id=83051&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd83051">
    <a href="https://www.php.net/manual/vote-note.php?id=83051&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V83051" title="39% like this...">
    -5
    </div>
  </div>
  <a href="function.utf8-decode.php.html#83051" class="name">
  <strong class="user"><em>haugas at gmail dot com</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#83051"> &para;</a><div class="date" title="2008-05-08 02:11"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom83051">
<div class="phpcode"><code><span class="html">If you don't know exactly, how many times your string is encoded, you can use this function:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">function </span><span class="default">_utf8_decode</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)<br />{<br />  </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">;<br />  </span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />  while (</span><span class="default">mb_detect_encoding</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">)==</span><span class="string">"UTF-8"</span><span class="keyword">)<br />  {<br />    </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br />    </span><span class="default">$count</span><span class="keyword">++;<br />  }<br />  <br />  for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">-</span><span class="default">1 </span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />  {<br />    </span><span class="default">$string </span><span class="keyword">= </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br />    <br />  }<br />  return </span><span class="default">$string</span><span class="keyword">;<br />  <br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="59484">  <div class="votes">
    <div id="Vu59484">
    <a href="https://www.php.net/manual/vote-note.php?id=59484&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd59484">
    <a href="https://www.php.net/manual/vote-note.php?id=59484&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V59484" title="33% like this...">
    -3
    </div>
  </div>
  <a href="function.utf8-decode.php.html#59484" class="name">
  <strong class="user"><em>yannikh at gmeil dot com</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#59484"> &para;</a><div class="date" title="2005-12-07 11:34"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom59484">
<div class="phpcode"><code><span class="html">I had to tackle a very interesting problem:<br /><br />I wanted to replace all \xXX in a text by it's letters. Unfortunatelly XX were ASCII and not utf8. I solved my problem that way:<br /><span class="default">&lt;?php preg_replace </span><span class="keyword">(</span><span class="string">'/\\\\x([0-9a-fA-F]{2})/e'</span><span class="keyword">, </span><span class="string">"pack('H*',utf8_decode('\\1'))"</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">); </span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="75723">  <div class="votes">
    <div id="Vu75723">
    <a href="https://www.php.net/manual/vote-note.php?id=75723&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd75723">
    <a href="https://www.php.net/manual/vote-note.php?id=75723&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V75723" title="25% like this...">
    -2
    </div>
  </div>
  <a href="function.utf8-decode.php.html#75723" class="name">
  <strong class="user"><em>Sadi</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#75723"> &para;</a><div class="date" title="2007-06-13 03:38"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom75723">
<div class="phpcode"><code><span class="html">Once again about polish letters. If you use fananf's solution, make sure that PHP file is coded with cp1250 or else it won't work. It's quite obvious, however I spent some time before I finally figured that out, so I thought I post it here.</span></code></div>
  </div>
 </div>
  <div class="note" id="57070">  <div class="votes">
    <div id="Vu57070">
    <a href="https://www.php.net/manual/vote-note.php?id=57070&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd57070">
    <a href="https://www.php.net/manual/vote-note.php?id=57070&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V57070" title="25% like this...">
    -4
    </div>
  </div>
  <a href="function.utf8-decode.php.html#57070" class="name">
  <strong class="user"><em>fhoech</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#57070"> &para;</a><div class="date" title="2005-09-22 10:55"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom57070">
<div class="phpcode"><code><span class="html">Sorry, I had a typo in my last comment. Corrected regexp:<br /><br />^([\\x00-\\x7f]|<br />[\\xc2-\\xdf][\\x80-\\xbf]|<br />\\xe0[\\xa0-\\xbf][\\x80-\\xbf]|<br />[\\xe1-\\xec][\\x80-\\xbf]{2}|<br />\\xed[\\x80-\\x9f][\\x80-\\xbf]|<br />\\xef[\\x80-\\xbf][\\x80-\\xbd]|<br />\\xee[\\x80-\\xbf]{2}|<br />\xf0[\\x90-\\xbf][\\x80-\\xbf]{2}|<br />[\\xf1-\\xf3][\\x80-\\xbf]{3}|<br />\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})*$</span></code></div>
  </div>
 </div>
  <div class="note" id="70561">  <div class="votes">
    <div id="Vu70561">
    <a href="https://www.php.net/manual/vote-note.php?id=70561&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd70561">
    <a href="https://www.php.net/manual/vote-note.php?id=70561&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V70561" title="16% like this...">
    -4
    </div>
  </div>
  <a href="function.utf8-decode.php.html#70561" class="name">
  <strong class="user"><em>tobias at code-x dot de</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#70561"> &para;</a><div class="date" title="2006-10-20 05:13"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom70561">
<div class="phpcode"><code><span class="html">converting uft8-html sign &amp;#301; to uft8<br /><br />&lt;?<br />function uft8html2utf8( $s ) {<br />        if ( !function_exists('uft8html2utf8_callback') ) {<br />             function uft8html2utf8_callback($t) {<br />                     $dec = $t[1];<br />            if ($dec &lt; 128) {<br />              $utf = chr($dec);<br />            } else if ($dec &lt; 2048) {<br />              $utf = chr(192 + (($dec - ($dec % 64)) / 64));<br />              $utf .= chr(128 + ($dec % 64));<br />            } else {<br />              $utf = chr(224 + (($dec - ($dec % 4096)) / 4096));<br />              $utf .= chr(128 + ((($dec % 4096) - ($dec % 64)) / 64));<br />              $utf .= chr(128 + ($dec % 64));<br />            }<br />            return $utf;<br />             }<br />        }                                <br />        return preg_replace_callback('|&amp;#([0-9]{1,});|', 'uft8html2utf8_callback', $s );                                 <br />}<br />echo uft8html2utf8('test: &amp;#301;');<br />?&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="57069">  <div class="votes">
    <div id="Vu57069">
    <a href="https://www.php.net/manual/vote-note.php?id=57069&amp;page=function.utf8-decode&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd57069">
    <a href="https://www.php.net/manual/vote-note.php?id=57069&amp;page=function.utf8-decode&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V57069" title="16% like this...">
    -8
    </div>
  </div>
  <a href="function.utf8-decode.php.html#57069" class="name">
  <strong class="user"><em>fhoech</em></strong></a><a class="genanchor" href="function.utf8-decode.php.html#57069"> &para;</a><div class="date" title="2005-09-22 10:12"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom57069">
<div class="phpcode"><code><span class="html">JF Sebastian's regex is almost perfect as far as I'm concerned. I found one error (it failed section 5.3 "Other illegal code positions" from <a href="http://www.cl.cam.ac.uk/~mgk25/ucs/examples/UTF-8-test.txt" rel="nofollow" target="_blank">http://www.cl.cam.ac.uk/~mgk25/ucs/examples/UTF-8-test.txt</a>) which I corrected as follows:<br /><br />^([\\x00-\\x7f]|<br />[\\xc2-\\xdf][\\x80-\\xbf]|<br />\\xe0[\\xa0-\\xbf][\\x80-\\xbf]|<br />[\\xe1-\\xec][\\x80-\\xbf]{2}|<br />\\xed[\\x80-\\x9f][\\x80-\\xbf]|<br />\\xef[\\x80-\\xbf][\\x80-\\xbc]|<br />\\xee[\\x80-\\xbf]{2}|<br />\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2}|<br />[\\xf1-\\xf3][\\x80-\\xbf]{3}|<br />\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})*$<br /><br />(Again, concatenate to one single line to make it work)</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=function.utf8-decode&amp;redirect=https://www.php.net/manual/ru/function.utf8-decode.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.strings.php.html">Функции для работы со строками</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="function.addcslashes.php.html" title="addcslashes">addcslashes</a>
                        </li>
                                                <li class="">
                            <a href="function.addslashes.php.html" title="addslashes">addslashes</a>
                        </li>
                                                <li class="">
                            <a href="function.bin2hex.php.html" title="bin2hex">bin2hex</a>
                        </li>
                                                <li class="">
                            <a href="function.chop.php.html" title="chop">chop</a>
                        </li>
                                                <li class="">
                            <a href="function.chr.php.html" title="chr">chr</a>
                        </li>
                                                <li class="">
                            <a href="function.chunk-split.php.html" title="chunk_&#8203;split">chunk_&#8203;split</a>
                        </li>
                                                <li class="">
                            <a href="function.convert-uudecode.php.html" title="convert_&#8203;uudecode">convert_&#8203;uudecode</a>
                        </li>
                                                <li class="">
                            <a href="function.convert-uuencode.php.html" title="convert_&#8203;uuencode">convert_&#8203;uuencode</a>
                        </li>
                                                <li class="">
                            <a href="function.count-chars.php.html" title="count_&#8203;chars">count_&#8203;chars</a>
                        </li>
                                                <li class="">
                            <a href="function.crc32.php.html" title="crc32">crc32</a>
                        </li>
                                                <li class="">
                            <a href="function.crypt.php.html" title="crypt">crypt</a>
                        </li>
                                                <li class="">
                            <a href="function.echo.php.html" title="echo">echo</a>
                        </li>
                                                <li class="">
                            <a href="function.explode.php.html" title="explode">explode</a>
                        </li>
                                                <li class="">
                            <a href="function.fprintf.php.html" title="fprintf">fprintf</a>
                        </li>
                                                <li class="">
                            <a href="function.get-html-translation-table.php.html" title="get_&#8203;html_&#8203;translation_&#8203;table">get_&#8203;html_&#8203;translation_&#8203;table</a>
                        </li>
                                                <li class="">
                            <a href="function.hebrev.php.html" title="hebrev">hebrev</a>
                        </li>
                                                <li class="">
                            <a href="function.hex2bin.php.html" title="hex2bin">hex2bin</a>
                        </li>
                                                <li class="">
                            <a href="function.html-entity-decode.php.html" title="html_&#8203;entity_&#8203;decode">html_&#8203;entity_&#8203;decode</a>
                        </li>
                                                <li class="">
                            <a href="function.htmlentities.php.html" title="htmlentities">htmlentities</a>
                        </li>
                                                <li class="">
                            <a href="function.htmlspecialchars-decode.php.html" title="htmlspecialchars_&#8203;decode">htmlspecialchars_&#8203;decode</a>
                        </li>
                                                <li class="">
                            <a href="function.htmlspecialchars.php.html" title="htmlspecialchars">htmlspecialchars</a>
                        </li>
                                                <li class="">
                            <a href="function.implode.php.html" title="implode">implode</a>
                        </li>
                                                <li class="">
                            <a href="function.join.php.html" title="join">join</a>
                        </li>
                                                <li class="">
                            <a href="function.lcfirst.php.html" title="lcfirst">lcfirst</a>
                        </li>
                                                <li class="">
                            <a href="function.levenshtein.php.html" title="levenshtein">levenshtein</a>
                        </li>
                                                <li class="">
                            <a href="function.localeconv.php.html" title="localeconv">localeconv</a>
                        </li>
                                                <li class="">
                            <a href="function.ltrim.php.html" title="ltrim">ltrim</a>
                        </li>
                                                <li class="">
                            <a href="function.md5-file.php.html" title="md5_&#8203;file">md5_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.md5.php.html" title="md5">md5</a>
                        </li>
                                                <li class="">
                            <a href="function.metaphone.php.html" title="metaphone">metaphone</a>
                        </li>
                                                <li class="">
                            <a href="function.money-format.php.html" title="money_&#8203;format">money_&#8203;format</a>
                        </li>
                                                <li class="">
                            <a href="function.nl-langinfo.php.html" title="nl_&#8203;langinfo">nl_&#8203;langinfo</a>
                        </li>
                                                <li class="">
                            <a href="function.nl2br.php.html" title="nl2br">nl2br</a>
                        </li>
                                                <li class="">
                            <a href="function.number-format.php.html" title="number_&#8203;format">number_&#8203;format</a>
                        </li>
                                                <li class="">
                            <a href="function.ord.php.html" title="ord">ord</a>
                        </li>
                                                <li class="">
                            <a href="function.parse-str.php.html" title="parse_&#8203;str">parse_&#8203;str</a>
                        </li>
                                                <li class="">
                            <a href="function.print.php.html" title="print">print</a>
                        </li>
                                                <li class="">
                            <a href="function.printf.php.html" title="printf">printf</a>
                        </li>
                                                <li class="">
                            <a href="function.quoted-printable-decode.php.html" title="quoted_&#8203;printable_&#8203;decode">quoted_&#8203;printable_&#8203;decode</a>
                        </li>
                                                <li class="">
                            <a href="function.quoted-printable-encode.php.html" title="quoted_&#8203;printable_&#8203;encode">quoted_&#8203;printable_&#8203;encode</a>
                        </li>
                                                <li class="">
                            <a href="function.quotemeta.php.html" title="quotemeta">quotemeta</a>
                        </li>
                                                <li class="">
                            <a href="function.rtrim.php.html" title="rtrim">rtrim</a>
                        </li>
                                                <li class="">
                            <a href="function.setlocale.php.html" title="setlocale">setlocale</a>
                        </li>
                                                <li class="">
                            <a href="function.sha1-file.php.html" title="sha1_&#8203;file">sha1_&#8203;file</a>
                        </li>
                                                <li class="">
                            <a href="function.sha1.php.html" title="sha1">sha1</a>
                        </li>
                                                <li class="">
                            <a href="function.similar-text.php.html" title="similar_&#8203;text">similar_&#8203;text</a>
                        </li>
                                                <li class="">
                            <a href="function.soundex.php.html" title="soundex">soundex</a>
                        </li>
                                                <li class="">
                            <a href="function.sprintf.php.html" title="sprintf">sprintf</a>
                        </li>
                                                <li class="">
                            <a href="function.sscanf.php.html" title="sscanf">sscanf</a>
                        </li>
                                                <li class="">
                            <a href="function.str-contains.php.html" title="str_&#8203;contains">str_&#8203;contains</a>
                        </li>
                                                <li class="">
                            <a href="function.str-decrement.php.html" title="str_&#8203;decrement">str_&#8203;decrement</a>
                        </li>
                                                <li class="">
                            <a href="function.str-ends-with.php.html" title="str_&#8203;ends_&#8203;with">str_&#8203;ends_&#8203;with</a>
                        </li>
                                                <li class="">
                            <a href="function.str-getcsv.php.html" title="str_&#8203;getcsv">str_&#8203;getcsv</a>
                        </li>
                                                <li class="">
                            <a href="function.str-increment.php.html" title="str_&#8203;increment">str_&#8203;increment</a>
                        </li>
                                                <li class="">
                            <a href="function.str-ireplace.php.html" title="str_&#8203;ireplace">str_&#8203;ireplace</a>
                        </li>
                                                <li class="">
                            <a href="function.str-pad.php.html" title="str_&#8203;pad">str_&#8203;pad</a>
                        </li>
                                                <li class="">
                            <a href="function.str-repeat.php.html" title="str_&#8203;repeat">str_&#8203;repeat</a>
                        </li>
                                                <li class="">
                            <a href="function.str-replace.php.html" title="str_&#8203;replace">str_&#8203;replace</a>
                        </li>
                                                <li class="">
                            <a href="function.str-rot13.php.html" title="str_&#8203;rot13">str_&#8203;rot13</a>
                        </li>
                                                <li class="">
                            <a href="function.str-shuffle.php.html" title="str_&#8203;shuffle">str_&#8203;shuffle</a>
                        </li>
                                                <li class="">
                            <a href="function.str-split.php.html" title="str_&#8203;split">str_&#8203;split</a>
                        </li>
                                                <li class="">
                            <a href="function.str-starts-with.php.html" title="str_&#8203;starts_&#8203;with">str_&#8203;starts_&#8203;with</a>
                        </li>
                                                <li class="">
                            <a href="function.str-word-count.php.html" title="str_&#8203;word_&#8203;count">str_&#8203;word_&#8203;count</a>
                        </li>
                                                <li class="">
                            <a href="function.strcasecmp.php.html" title="strcasecmp">strcasecmp</a>
                        </li>
                                                <li class="">
                            <a href="function.strchr.php.html" title="strchr">strchr</a>
                        </li>
                                                <li class="">
                            <a href="function.strcmp.php.html" title="strcmp">strcmp</a>
                        </li>
                                                <li class="">
                            <a href="function.strcoll.php.html" title="strcoll">strcoll</a>
                        </li>
                                                <li class="">
                            <a href="function.strcspn.php.html" title="strcspn">strcspn</a>
                        </li>
                                                <li class="">
                            <a href="function.strip-tags.php.html" title="strip_&#8203;tags">strip_&#8203;tags</a>
                        </li>
                                                <li class="">
                            <a href="function.stripcslashes.php.html" title="stripcslashes">stripcslashes</a>
                        </li>
                                                <li class="">
                            <a href="function.stripos.php.html" title="stripos">stripos</a>
                        </li>
                                                <li class="">
                            <a href="function.stripslashes.php.html" title="stripslashes">stripslashes</a>
                        </li>
                                                <li class="">
                            <a href="function.stristr.php.html" title="stristr">stristr</a>
                        </li>
                                                <li class="">
                            <a href="function.strlen.php.html" title="strlen">strlen</a>
                        </li>
                                                <li class="">
                            <a href="function.strnatcasecmp.php.html" title="strnatcasecmp">strnatcasecmp</a>
                        </li>
                                                <li class="">
                            <a href="function.strnatcmp.php.html" title="strnatcmp">strnatcmp</a>
                        </li>
                                                <li class="">
                            <a href="function.strncasecmp.php.html" title="strncasecmp">strncasecmp</a>
                        </li>
                                                <li class="">
                            <a href="function.strncmp.php.html" title="strncmp">strncmp</a>
                        </li>
                                                <li class="">
                            <a href="function.strpbrk.php.html" title="strpbrk">strpbrk</a>
                        </li>
                                                <li class="">
                            <a href="function.strpos.php.html" title="strpos">strpos</a>
                        </li>
                                                <li class="">
                            <a href="function.strrchr.php.html" title="strrchr">strrchr</a>
                        </li>
                                                <li class="">
                            <a href="function.strrev.php.html" title="strrev">strrev</a>
                        </li>
                                                <li class="">
                            <a href="function.strripos.php.html" title="strripos">strripos</a>
                        </li>
                                                <li class="">
                            <a href="function.strrpos.php.html" title="strrpos">strrpos</a>
                        </li>
                                                <li class="">
                            <a href="function.strspn.php.html" title="strspn">strspn</a>
                        </li>
                                                <li class="">
                            <a href="function.strstr.php.html" title="strstr">strstr</a>
                        </li>
                                                <li class="">
                            <a href="function.strtok.php.html" title="strtok">strtok</a>
                        </li>
                                                <li class="">
                            <a href="function.strtolower.php.html" title="strtolower">strtolower</a>
                        </li>
                                                <li class="">
                            <a href="function.strtoupper.php.html" title="strtoupper">strtoupper</a>
                        </li>
                                                <li class="">
                            <a href="function.strtr.php.html" title="strtr">strtr</a>
                        </li>
                                                <li class="">
                            <a href="function.substr-compare.php.html" title="substr_&#8203;compare">substr_&#8203;compare</a>
                        </li>
                                                <li class="">
                            <a href="function.substr-count.php.html" title="substr_&#8203;count">substr_&#8203;count</a>
                        </li>
                                                <li class="">
                            <a href="function.substr-replace.php.html" title="substr_&#8203;replace">substr_&#8203;replace</a>
                        </li>
                                                <li class="">
                            <a href="function.substr.php.html" title="substr">substr</a>
                        </li>
                                                <li class="">
                            <a href="function.trim.php.html" title="trim">trim</a>
                        </li>
                                                <li class="">
                            <a href="function.ucfirst.php.html" title="ucfirst">ucfirst</a>
                        </li>
                                                <li class="">
                            <a href="function.ucwords.php.html" title="ucwords">ucwords</a>
                        </li>
                                                <li class="">
                            <a href="function.vfprintf.php.html" title="vfprintf">vfprintf</a>
                        </li>
                                                <li class="">
                            <a href="function.vprintf.php.html" title="vprintf">vprintf</a>
                        </li>
                                                <li class="">
                            <a href="function.vsprintf.php.html" title="vsprintf">vsprintf</a>
                        </li>
                                                <li class="">
                            <a href="function.wordwrap.php.html" title="wordwrap">wordwrap</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                        <li>
                <span class="header">Deprecated</span>
                <ul class="child-menu-list">
                                    <li class="">
                        <a href="function.convert-cyr-string.php.html" title="convert_&#8203;cyr_&#8203;string">convert_&#8203;cyr_&#8203;string</a>
                    </li>
                                    <li class="">
                        <a href="function.hebrevc.php.html" title="hebrevc">hebrevc</a>
                    </li>
                                    <li class="current">
                        <a href="function.utf8-decode.php.html" title="utf8_&#8203;decode">utf8_&#8203;decode</a>
                    </li>
                                    <li class="">
                        <a href="function.utf8-encode.php.html" title="utf8_&#8203;encode">utf8_&#8203;encode</a>
                    </li>
                                </ul>
            </li>
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
