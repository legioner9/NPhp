<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: Объявления типов - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="language.types.declarations.php.html">
 <link rel="shorturl" href="https://www.php.net/types.declarations">
 <link rel="alternate" href="https://www.php.net/types.declarations" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="language.types.php.html">
 <link rel="prev" href="language.types.iterable.php.html">
 <link rel="next" href="language.types.type-juggling.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/language.types.declarations.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/language.types.declarations.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/language.types.declarations.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/language.types.declarations.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/language.types.declarations.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/language.types.declarations.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/language.types.declarations.php" hreflang="pt_BR">
 <link rel="alternate" href="language.types.declarations.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/language.types.declarations.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/language.types.declarations.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="language.types.type-juggling.php.html">
          Манипуляции с типами &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="language.types.iterable.php.html">
          &laquo; Итерируемые значения        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='langref.php.html'>Справочник языка</a></li>      <li><a href='language.types.php.html'>Типы</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/language.types.declarations.php'>English</option>
            <option value='de/language.types.declarations.php'>German</option>
            <option value='es/language.types.declarations.php'>Spanish</option>
            <option value='fr/language.types.declarations.php'>French</option>
            <option value='it/language.types.declarations.php'>Italian</option>
            <option value='ja/language.types.declarations.php'>Japanese</option>
            <option value='pt_BR/language.types.declarations.php'>Brazilian Portuguese</option>
            <option value='ru/language.types.declarations.php' selected="selected">Russian</option>
            <option value='tr/language.types.declarations.php'>Turkish</option>
            <option value='zh/language.types.declarations.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/language/types/declarations.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Flanguage.types.declarations%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="language.types.declarations" class="sect1">
 <h2 class="title">Объявления типов</h2>

 <p class="para">
  Объявления типов разрешено добавлять к аргументам функции, возвращаемым значениям
  и свойствам класса (последнее начиная с PHP 7.4.0).
  Объявленные типы гарантируют, что во время вызова значение принадлежит тому типу, который для него указан,
  иначе будет выброшено исключение <span class="classname"><a href="class.typeerror.php.html" class="classname">TypeError</a></span>.
 </p>

 <p class="para">
  Каждый тип, который поддерживает PHP, за исключением ресурсов (<span class="type">resource</span>),
  разрешено указывать при пользовательском объявлении типа.
  На этой странице приведён журнал изменений доступности отдельных типов
  и документация о том, как их применять в объявлениях типов.
 </p>

 <blockquote class="note"><p><strong class="note">Замечание</strong>: 
  <p class="para">
   Когда класс реализует метод интерфейса или переопределяет метод,
   который уже был определён родительским классом,
   вновь определяемый метод должен быть совместим с определением,
   которое было сделано ранее.
   Метод совместим, если он соблюдает
   <a href="language.oop5.variance.php.html" class="link">правила вариантности</a>.
  </p>
 </p></blockquote>

 <div class="sect2">
  <h3 class="title">Список изменений</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Версия</th>
      <th>Описание</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>8.3.0</td>
      <td>
       Добавлена поддержка типизации констант классов, интерфейсов, трейтов и перечислений.
      </td>
     </tr>

     <tr>
      <td>8.2.0</td>
      <td>
       Добавлена поддержка типов <abbr title="Disjunctive Normal Form">DNF</abbr>.
      </td>
     </tr>

     <tr>
      <td>8.2.0</td>
      <td>
       Добавлена поддержка типа <span class="type"><span class="type true">true</span></span>.
      </td>
     </tr>

     <tr>
      <td>8.2.0</td>
      <td>
       Типы <span class="type">null</span> и <span class="type"><span class="type false">false</span></span> теперь можно использовать автономно.
      </td>
     </tr>

     <tr>
      <td>8.1.0</td>
      <td>
       Добавлена поддержка пересечений типов.
      </td>
     </tr>

     <tr>
      <td>8.1.0</td>
      <td>
       Возврат по ссылке из функции с типом возвращаемого значения <span class="type"><span class="type void">void</span></span> устарел.
      </td>
     </tr>

     <tr>
      <td>8.1.0</td>
      <td>
       Добавлена поддержка типа возвращаемого значения <span class="type"><span class="type never">never</span></span>.
      </td>
     </tr>

     <tr>
      <td>8.0.0</td>
      <td>
       Добавлена поддержка типа возвращаемого значения <span class="type"><a href="language.types.declarations.php.html#language.types.declarations.mixed" class="type mixed">mixed</a></span>.
      </td>
     </tr>

     <tr>
      <td>8.0.0</td>
      <td>
       Добавлена поддержка типа возвращаемого значения <span class="type"><span class="type static">static</span></span>.
      </td>
     </tr>

     <tr>
      <td>8.0.0</td>
      <td>
       Добавлена поддержка объединения типов.
      </td>
     </tr>

     <tr>
      <td>7.4.0</td>
      <td>
       Добавлена поддержка типизации свойств классов.
      </td>
     </tr>

     <tr>
      <td>7.2.0</td>
      <td>
       Добавлена поддержка типа возвращаемого значения <span class="type">object</span>.
      </td>
     </tr>

     <tr>
      <td>7.1.0</td>
      <td>
       Добавлена поддержка типа возвращаемого значения <span class="type"><a href="language.types.iterable.php.html" class="type iterable">iterable</a></span>.
      </td>
     </tr>

     <tr>
      <td>7.1.0</td>
      <td>
       Добавлена поддержка типа возвращаемого значения <span class="type"><span class="type void">void</span></span>.
      </td>
     </tr>

     <tr>
      <td>7.1.0</td>
      <td>
       Добавлена поддержка типа возвращаемого значения nullable.
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>

 <div class="sect2" id="language.types.declarations.base">
  <h3 class="title">Примечание по использованию атомарных типов</h3>

  <p class="simpara">
   У атомарных типов прямолинейное поведение с незначительными оговорками,
   которые описаны в этом разделе.
  </p>

  <div class="sect3" id="language.types.declarations.base.scalar">
   <h4 class="title">Скалярные типы</h4>
   <div class="warning"><strong class="warning">Внимание</strong>
    <p class="para">
     Псевдонимы имён для скалярных типов (<span class="type">bool</span>, <span class="type">int</span>,
     <span class="type">float</span>, <span class="type">string</span>) не поддерживаются.
     Вместо этого они рассматриваются как имена классов или интерфейсов.
     Наример, когда в качестве типа указан <code class="literal">boolean</code>, ожидается,
     что значение выполняет условие <a href="language.operators.type.php.html" class="link"><code class="literal">instanceof</code></a> в отношении класса или интерфейса
     <code class="literal">boolean</code>, а не значение типа <span class="type">bool</span>:
    </p>
    <div class="example" id="example-220">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />    </span><span style="color: #007700">function </span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">boolean $param</span><span style="color: #007700">) {}<br />    </span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

     
<div class="example-contents"><p>
 Результат выполнения приведённого примера в PHP 8:
</p></div>

     <div class="example-contents screen">
<div class="cdata"><pre>
Warning: &quot;boolean&quot; will be interpreted as a class name. Did you mean &quot;bool&quot;? Write &quot;\boolean&quot; to suppress this warning in /in/9YrUX on line 2

Fatal error: Uncaught TypeError: test(): Argument #1 ($param) must be of type boolean, bool given, called in - on line 3 and defined in -:2
Stack trace:
#0 -(3): test(true)
#1 {main}
  thrown in - on line 2
</pre></div>
     </div>
    </div>
   </div>
  </div>

  <div class="sect3" id="language.types.declarations.void">
   <h4 class="title">void</h4>
   <blockquote class="note"><p><strong class="note">Замечание</strong>: 
    <p class="para">
     Возврат по ссылке из <span class="type"><span class="type void">void</span></span>-функции устарел начиная с PHP 8.1.0,
     поскольку такая функция противоречива.
     Ранее при её вызове выдавалась ошибка уровня <strong><code>E_NOTICE</code></strong>:
     <span class="computeroutput">Только ссылки на переменные должны возвращаться по ссылке</span>.

     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function &amp;</span><span style="color: #0000BB">test</span><span style="color: #007700">(): </span><span style="color: #0000BB">void </span><span style="color: #007700">{}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
      </div>

     </div>
    </p>
   </p></blockquote>
  </div>

  <div class="sect3" id="language.types.declarations.base.function">
   <h4 class="title">Тип Callable</h4>
   <p class="para">
    Этот тип нельзя объявлять в качестве типа свойства класса.
   </p>

   <blockquote class="note"><p><strong class="note">Замечание</strong>: 
    <span class="simpara">
     Этот тип невозможно указать в качестве названия функции.
    </span>
   </p></blockquote>
  </div>

  <div class="sect3" id="language.types.declarations.references">
   <h4 class="title">Объявление типов в параметрах передачи по ссылкам</h4>

   <p class="simpara">
    Если у параметра, передаваемого по ссылке, объявляется тип возвращаемого значения,
    тип переменной проверяется <em>только</em> при входе в функцию, в начале вызова,
    но не при возврате функции.
    То есть функция может изменить тип ссылки на переменную.
   </p>
   <div class="example" id="example-223">
    <p><strong>Пример #1 Типизированные параметры, передаваемые по ссылке</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function </span><span style="color: #0000BB">array_baz</span><span style="color: #007700">(array &amp;</span><span style="color: #0000BB">$param</span><span style="color: #007700">)<br />{<br />    </span><span style="color: #0000BB">$param </span><span style="color: #007700">= </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">$var </span><span style="color: #007700">= [];<br /></span><span style="color: #0000BB">array_baz</span><span style="color: #007700">(</span><span style="color: #0000BB">$var</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$var</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">array_baz</span><span style="color: #007700">(</span><span style="color: #0000BB">$var</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Вывод приведённого примера будет похож на:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
int(1)

Fatal error: Uncaught TypeError: array_baz(): Argument #1 ($param) must be of type array, int given, called in - on line 9 and defined in -:2
Stack trace:
#0 -(9): array_baz(1)
#1 {main}
  thrown in - on line 2
</pre></div>
    </div>
   </div>
  </div>
 </div>

 <div class="sect2" id="language.types.declarations.composite">
  <h3 class="title">Примечание по составным типам</h3>
  <p class="para">
   На объявления составных типов распространяется ряд ограничений
   и во время компиляции PHP выполнит проверку объявленных типов на избыточность,
   чтобы предотвратить простые ошибки.
  </p>

  <div class="caution"><strong class="caution">Предостережение</strong>
   <p class="simpara">
    До PHP 8.2.0 и появления <abbr title="Disjunctive Normal Form">DNF</abbr>-типов, было невозможно
    комбинировать пересечённые и объединённые типы.
   </p>
  </div>

  <div class="sect3" id="language.types.declarations.composite.union">
   <h4 class="title">Объединение типов</h4>
   <div class="warning"><strong class="warning">Внимание</strong>
    <p class="simpara">
     Невозможно объединять два типа значений <span class="type"><span class="type false">false</span></span> и <span class="type"><span class="type true">true</span></span>.
     Вместо этого указывают <span class="type">bool</span>.
    </p>
   </div>

   <div class="caution"><strong class="caution">Предостережение</strong>
    <p class="simpara">
     Поскольку до PHP 8.2.0 нельзя было определять <span class="type"><span class="type false">false</span></span> и <span class="type">null</span> как отдельные типы,
     объединение типов, которое состояло только из этих типов, было недопустимо.
     Сюда входят типы: <span class="type"><span class="type false">false</span></span>, <code class="literal">false|null</code>
     и <code class="literal">?false</code>.
    </p>
   </div>

   <div class="sect4" id="language.types.declarations.nullable">
    <h5 class="title">Синтаксический сахар типа Nullable</h5>

    <p class="para">
     Объявление одного базового типа может быть помечено как nullable путём
     добавления к типу префикса в виде
     вопросительного знака (<code class="literal">?</code>).
     Поэтому <code class="literal">?T</code> и <code class="literal">T|null</code> идентичны.
    </p>

    <blockquote class="note"><p><strong class="note">Замечание</strong>: 
     <span class="simpara">
      Этот синтаксис поддерживается с PHP 7.1.0
      и предшествует поддержке объединения типов.
     </span>
    </p></blockquote>

    <blockquote class="note"><p><strong class="note">Замечание</strong>: 
     <p class="para">
      Ещё один способом добиться nullable-аргументов —
      указать <code class="literal">null</code> значением по умолчанию.
      Такой способ не рекомендован, поскольку если значение по умолчанию
      будет изменено в дочернем классе, возникнет нарушение совместимости типов,
      так как в объявление типа нужно будет добавить тип <span class="type">null</span>.
     </p>
     <div class="example" id="example-226">
      <p><strong>Пример #2 Старый способ указания nullable-аргументов</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class </span><span style="color: #0000BB">C </span><span style="color: #007700">{}<br /><br />function </span><span style="color: #0000BB">f</span><span style="color: #007700">(</span><span style="color: #0000BB">C $c </span><span style="color: #007700">= </span><span style="color: #0000BB">null</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">f</span><span style="color: #007700">(new </span><span style="color: #0000BB">C</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">f</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
      </div>

      
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

      <div class="example-contents screen">
<div class="cdata"><pre>
object(C)#1 (0) {
}
NULL
</pre></div>
      </div>
     </div>
    </p></blockquote>
   </div>
  </div>

  <div class="sect3" id="language.types.declarations.composite.redundant">
   <h4 class="title">Повторяющиеся и избыточные типы</h4>
   <p class="para">
    Избыточные типы, которые можно обнаружить без выполнения загрузки класса,
    приведут к ошибке во время компиляции,
    чтобы отловить неточности в объявлениях составных типов. В них включены:

    <ul class="itemizedlist">
     <li class="listitem">
      <span class="simpara">
       Каждое имя после разрешения внутренними средствами языка, может встречаться только один раз.
       Например, типы <code class="literal">int|string|INT</code> или <code class="literal">Countable&amp;Traversable&amp;COUNTABLE</code>
       приведут к ошибке.
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       Указание типа <span class="type"><a href="language.types.declarations.php.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> (с другими типами) приведёт к ошибке.
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">Для объединённых типов:</span>
      <ul class="itemizedlist">
       <li class="listitem">
        <span class="simpara">
         Если указан тип <span class="type">bool</span>, то <span class="type"><span class="type false">false</span></span> или <span class="type"><span class="type true">true</span></span>
         не могут быть указаны дополнительно.
        </span>
       </li>
       <li class="listitem">
        <span class="simpara">
         Если указан тип <span class="type">object</span>, типы классов нельзя указывать дополнительно.
        </span>
       </li>
       <li class="listitem">
        <span class="simpara">
         Если указан тип <span class="type"><a href="language.types.iterable.php.html" class="type iterable">iterable</a></span>, то <span class="type">array</span> и <span class="classname"><a href="class.traversable.php.html" class="classname">Traversable</a></span>
         нельзя указывать дополнительно.
        </span>
       </li>
      </ul>
     </li>
     <li class="listitem">
      <span class="simpara">Для пересечённых типов:</span>
      <ul class="itemizedlist">
       <li class="listitem">
        <span class="simpara">
         Указание типа, который не относится к типу класса, приведёт к ошибке.
        </span>
       </li>
       <li class="listitem">
        <span class="simpara">
         Указание <span class="type"><span class="type self">self</span></span>, <span class="type"><span class="type parent">parent</span></span>
         или <span class="type"><span class="type static">static</span></span> приведёт к ошибке.
        </span>
       </li>
      </ul>
     </li>
     <li class="listitem">
      <span class="simpara">Для <abbr title="Disjunctive Normal Form">DNF</abbr>-типов:</span>
      <ul class="itemizedlist">
       <li class="listitem">
        <span class="simpara">
         Если указан более общий тип, то более строгий тип будет избыточным.
        </span>
       </li>
       <li class="listitem">
        <span class="simpara">
         Дублирование членов в пересечённых типах.
        </span>
       </li>
      </ul>
     </li>
    </ul>
   </p>

   <blockquote class="note"><p><strong class="note">Замечание</strong>: 
    <span class="simpara">
     Это не гарантирует, что тип «минимальный»,
     поскольку для этого пришлось бы загрузить все указанные типы классов.
    </span>
   </p></blockquote>

   <p class="para">
    Например, если <code class="literal">A</code> и <code class="literal">B</code> — это псевдонимы классов,
    то <code class="literal">A|B</code> остаётся корректным объединением типов,
    даже если его можно свести либо к <code class="literal">A</code>, либо к <code class="literal">B</code>.
    Аналогично, если класс <code class="code">B extends A {}</code>, то <code class="literal">A|B</code> также является
    корректным объединением типов, даже если его можно свести к просто <code class="literal">A</code>.

    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(): </span><span style="color: #0000BB">int</span><span style="color: #007700">|</span><span style="color: #0000BB">INT </span><span style="color: #007700">{} </span><span style="color: #FF8000">// Запрещено<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(): </span><span style="color: #0000BB">bool</span><span style="color: #007700">|</span><span style="color: #0000BB">false </span><span style="color: #007700">{} </span><span style="color: #FF8000">// Запрещено<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(): </span><span style="color: #0000BB">int</span><span style="color: #007700">&amp;</span><span style="color: #0000BB">Traversable </span><span style="color: #007700">{} </span><span style="color: #FF8000">// Запрещено<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(): </span><span style="color: #0000BB">self</span><span style="color: #007700">&amp;</span><span style="color: #0000BB">Traversable </span><span style="color: #007700">{} </span><span style="color: #FF8000">// Запрещено<br /><br /></span><span style="color: #007700">use </span><span style="color: #0000BB">A </span><span style="color: #007700">as </span><span style="color: #0000BB">B</span><span style="color: #007700">;<br />function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(): </span><span style="color: #0000BB">A</span><span style="color: #007700">|</span><span style="color: #0000BB">B </span><span style="color: #007700">{} </span><span style="color: #FF8000">// Запрещено («use» — часть разрешения имён)<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(): </span><span style="color: #0000BB">A</span><span style="color: #007700">&amp;</span><span style="color: #0000BB">B </span><span style="color: #007700">{} </span><span style="color: #FF8000">// Запрещено («use» — часть разрешения имён)<br /><br /></span><span style="color: #0000BB">class_alias</span><span style="color: #007700">(</span><span style="color: #DD0000">'X'</span><span style="color: #007700">, </span><span style="color: #DD0000">'Y'</span><span style="color: #007700">);<br />function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(): </span><span style="color: #0000BB">X</span><span style="color: #007700">|</span><span style="color: #0000BB">Y </span><span style="color: #007700">{} </span><span style="color: #FF8000">// Разрешено (избыточность известна только во время выполнения)<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(): </span><span style="color: #0000BB">X</span><span style="color: #007700">&amp;</span><span style="color: #0000BB">Y </span><span style="color: #007700">{} </span><span style="color: #FF8000">// Разрешено (избыточность известна только во время выполнения)<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

    </div>
   </p>
  </div>
 </div>

 <div class="sect2" id="language.types.declarations.examples">
  <h3 class="title">Примеры</h3>
  <div class="example" id="example-229">
   <p><strong>Пример #3 Пример объявления типа класса</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class </span><span style="color: #0000BB">C </span><span style="color: #007700">{}<br />class </span><span style="color: #0000BB">D </span><span style="color: #007700">extends </span><span style="color: #0000BB">C </span><span style="color: #007700">{}<br /><br /></span><span style="color: #FF8000">// Не наследует C.<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">E </span><span style="color: #007700">{}<br /><br />function </span><span style="color: #0000BB">f</span><span style="color: #007700">(</span><span style="color: #0000BB">C $c</span><span style="color: #007700">) {<br />    echo </span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">f</span><span style="color: #007700">(new </span><span style="color: #0000BB">C</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">f</span><span style="color: #007700">(new </span><span style="color: #0000BB">D</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">f</span><span style="color: #007700">(new </span><span style="color: #0000BB">E</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   
<div class="example-contents"><p>
 Результат выполнения приведённого примера в PHP 8:
</p></div>

   <div class="example-contents screen">
<div class="cdata"><pre>
C
D

Fatal error: Uncaught TypeError: f(): Argument #1 ($c) must be of type C, E given, called in /in/gLonb on line 14 and defined in /in/gLonb:8
Stack trace:
#0 -(14): f(Object(E))
#1 {main}
  thrown in - on line 8
</pre></div>
   </div>
  </div>

  <div class="example" id="example-232">
   <p><strong>Пример #4 Пример объявления типа интерфейса</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">interface </span><span style="color: #0000BB">I </span><span style="color: #007700">{ public function </span><span style="color: #0000BB">f</span><span style="color: #007700">(); }<br />class </span><span style="color: #0000BB">C </span><span style="color: #007700">implements </span><span style="color: #0000BB">I </span><span style="color: #007700">{ public function </span><span style="color: #0000BB">f</span><span style="color: #007700">() {} }<br /><br /></span><span style="color: #FF8000">// Не реализует I.<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">E </span><span style="color: #007700">{}<br /><br />function </span><span style="color: #0000BB">f</span><span style="color: #007700">(</span><span style="color: #0000BB">I $i</span><span style="color: #007700">) {<br />    echo </span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$i</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">f</span><span style="color: #007700">(new </span><span style="color: #0000BB">C</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">f</span><span style="color: #007700">(new </span><span style="color: #0000BB">E</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   
<div class="example-contents"><p>
 Результат выполнения приведённого примера в PHP 8:
</p></div>

   <div class="example-contents screen">
<div class="cdata"><pre>
C

Fatal error: Uncaught TypeError: f(): Argument #1 ($i) must be of type I, E given, called in - on line 13 and defined in -:8
Stack trace:
#0 -(13): f(Object(E))
#1 {main}
  thrown in - on line 8
</pre></div>
   </div>
  </div>

  <div class="example" id="example-235">
   <p><strong>Пример #5 Пример объявления типа возвращаемого значения</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function </span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">, </span><span style="color: #0000BB">$b</span><span style="color: #007700">): </span><span style="color: #0000BB">float </span><span style="color: #007700">{<br />    return </span><span style="color: #0000BB">$a </span><span style="color: #007700">+ </span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">// Обратите внимание, что будет возвращено значение float.<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

   <div class="example-contents screen">
<div class="cdata"><pre>
float(3)
</pre></div>
   </div>
  </div>

  <div class="example" id="example-238">
   <p><strong>Пример #6 Возвращение объекта</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class </span><span style="color: #0000BB">C </span><span style="color: #007700">{}<br /><br />function </span><span style="color: #0000BB">getC</span><span style="color: #007700">(): </span><span style="color: #0000BB">C </span><span style="color: #007700">{<br />    return new </span><span style="color: #0000BB">C</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">getC</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

   <div class="example-contents screen">
<div class="cdata"><pre>
object(C)#1 (0) {
}
</pre></div>
   </div>
  </div>

  <div class="example" id="example-241">
   <p><strong>Пример #7 Объявление аргумента с типом Nullable</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class </span><span style="color: #0000BB">C </span><span style="color: #007700">{}<br /><br />function </span><span style="color: #0000BB">f</span><span style="color: #007700">(?</span><span style="color: #0000BB">C $c</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">f</span><span style="color: #007700">(new </span><span style="color: #0000BB">C</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">f</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

   <div class="example-contents screen">
<div class="cdata"><pre>
object(C)#1 (0) {
}
NULL
</pre></div>
   </div>
  </div>

  <div class="example" id="example-244">
   <p><strong>Пример #8 Объявление типа возвращаемого значения Nullable</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function </span><span style="color: #0000BB">get_item</span><span style="color: #007700">(): ?</span><span style="color: #0000BB">string </span><span style="color: #007700">{<br />    if (isset(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'item'</span><span style="color: #007700">])) {<br />        return </span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'item'</span><span style="color: #007700">];<br />    } else {<br />        return </span><span style="color: #0000BB">null</span><span style="color: #007700">;<br />    }<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

  </div>

  <div class="example" id="example-247">
   <p><strong>Пример #9 Объявление типа свойства класса</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class </span><span style="color: #0000BB">User </span><span style="color: #007700">{<br />    public static </span><span style="color: #0000BB">string $foo </span><span style="color: #007700">= </span><span style="color: #DD0000">'foo'</span><span style="color: #007700">;<br /><br />    public </span><span style="color: #0000BB">int $id</span><span style="color: #007700">;<br />    public </span><span style="color: #0000BB">string $username</span><span style="color: #007700">;<br /><br />    public function </span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">int $id</span><span style="color: #007700">, </span><span style="color: #0000BB">string $username</span><span style="color: #007700">) {<br />        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">id </span><span style="color: #007700">= </span><span style="color: #0000BB">$id</span><span style="color: #007700">;<br />        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">username </span><span style="color: #007700">= </span><span style="color: #0000BB">$username</span><span style="color: #007700">;<br />    }<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

  </div>
 </div>

 <div class="sect2" id="language.types.declarations.strict">
  <h3 class="title">Строгая типизация</h3>

  <p class="para">
   По умолчанию PHP будет преобразовывать значения неправильного типа в ожидаемые.
   Например, если в строковый (<span class="type">string</span>) параметр функции передать целое число (<span class="type">int</span>),
   то оно преобразуется в строку (<span class="type">string</span>).
  </p>

  <p class="para">
   Можно включить режим строгой типизации на уровне файла. В этом
   режиме, тип значения должен строго соответствовать объявленному, иначе будет выброшено
   исключение <span class="classname"><a href="class.typeerror.php.html" class="classname">TypeError</a></span>.
   Единственное исключение из этого правила — передача целочисленного значения (<span class="type">int</span>)
   туда, где ожидается число с плавающей точкой (<span class="type">float</span>).
  </p>

  <div class="warning"><strong class="warning">Внимание</strong>
   <p class="simpara">
    На вызовы из внутренних функций действие <code class="literal">strict_types</code> не распространяется.
   </p>
  </div>

  <p class="para">
   Для включения строгой типизации указывают оператор <a href="control-structures.declare.php.html" class="link"><code class="literal">declare</code></a> с объявлением
   <code class="literal">strict_types</code>:
  </p>

  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Строгая типизация распространяется на вызовы функций, которые сделаны
    <em>изнутри</em> файла с включённой строгой типизацией,
    а не к функциям, объявленным в этом файле. Если из файла без включённой строгой
    типизации вызывается функция, которая была определена в файле со строгой типизацией,
    то будут использованы установки по типизации вызывающей стороны — т. е. правила строгой типизации
    будут проигнорированы и для значений будет применяться приведение типов.
   </p>
  </p></blockquote>

  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Строгая типизация определяется только для объявлений скалярных типов.
   </p>
  </p></blockquote>

  <div class="example" id="language.oop5.interfaces.examples.ex1">
   <p><strong>Пример #10 Строгая типизация для значений аргументов</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">declare(</span><span style="color: #0000BB">strict_types</span><span style="color: #007700">=</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br />function </span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">int $a</span><span style="color: #007700">, </span><span style="color: #0000BB">int $b</span><span style="color: #007700">) {<br />    return </span><span style="color: #0000BB">$a </span><span style="color: #007700">+ </span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">1.5</span><span style="color: #007700">, </span><span style="color: #0000BB">2.5</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   
<div class="example-contents"><p>
 Результат выполнения приведённого примера в PHP 8:
</p></div>

   <div class="example-contents screen">
<div class="cdata"><pre>
int(3)

Fatal error: Uncaught TypeError: sum(): Argument #1 ($a) must be of type int, float given, called in - on line 9 and defined in -:4
Stack trace:
#0 -(9): sum(1.5, 2.5)
#1 {main}
  thrown in - on line 4
</pre></div>
   </div>
  </div>

  <div class="example" id="language.oop5.interfaces.examples.ex3">
   <p><strong>Пример #11 Приведение типов для значений аргументов</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function </span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">int $a</span><span style="color: #007700">, </span><span style="color: #0000BB">int $b</span><span style="color: #007700">) {<br />    return </span><span style="color: #0000BB">$a </span><span style="color: #007700">+ </span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">// Переданные значения будут приведены к целым числам: обратите внимание на вывод ниже!<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">1.5</span><span style="color: #007700">, </span><span style="color: #0000BB">2.5</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

   <div class="example-contents screen">
<div class="cdata"><pre>
int(3)
int(3)
</pre></div>
   </div>
  </div>

  <div class="example" id="language.oop5.interfaces.examples.ex6">
   <p><strong>Пример #12 Строгая типизация для возвращаемых значений</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">declare(</span><span style="color: #0000BB">strict_types</span><span style="color: #007700">=</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br />function </span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">, </span><span style="color: #0000BB">$b</span><span style="color: #007700">): </span><span style="color: #0000BB">int </span><span style="color: #007700">{<br />    return </span><span style="color: #0000BB">$a </span><span style="color: #007700">+ </span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2.5</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   
<div class="example-contents"><p>
 Результат выполнения приведённого примера:
</p></div>

   <div class="example-contents screen">
<div class="cdata"><pre>
int(3)

Fatal error: Uncaught TypeError: sum(): Return value must be of type int, float returned in -:5
Stack trace:
#0 -(9): sum(1, 2.5)
#1 {main}
  thrown in - on line 5
</pre></div>
   </div>
  </div>
 </div>

</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=language.types.declarations&amp;redirect=https://www.php.net/manual/ru/language.types.declarations.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">2 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="126191">  <div class="votes">
    <div id="Vu126191">
    <a href="https://www.php.net/manual/vote-note.php?id=126191&amp;page=language.types.declarations&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd126191">
    <a href="https://www.php.net/manual/vote-note.php?id=126191&amp;page=language.types.declarations&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V126191" title="74% like this...">
    19
    </div>
  </div>
  <a href="language.types.declarations.php.html#126191" class="name">
  <strong class="user"><em>toinenkayt (ta at ta) [iwonderr] gmail d</em></strong></a><a class="genanchor" href="language.types.declarations.php.html#126191"> &para;</a><div class="date" title="2021-06-24 11:10"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom126191">
<div class="phpcode"><code><span class="html">While waiting for native support for typed arrays, here are a couple of alternative ways to ensure strong typing of arrays by abusing variadic functions. The performance of these methods is a mystery to the writer and so the responsibility of benchmarking them falls unto the reader.<br /><br />PHP 5.6 added the splat operator (...) which is used to unpack arrays to be used as function arguments. PHP 7.0 added scalar type hints. Latter versions of PHP have further improved the type system. With these additions and improvements, it is possible to have a decent support for typed arrays.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">declare (</span><span class="default">strict_types</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">);<br /><br />function </span><span class="default">typeArrayNullInt</span><span class="keyword">(?</span><span class="default">int </span><span class="keyword">...</span><span class="default">$arg</span><span class="keyword">): </span><span class="default">void </span><span class="keyword">{<br />}<br /><br />function </span><span class="default">doSomething</span><span class="keyword">(array </span><span class="default">$ints</span><span class="keyword">): </span><span class="default">void </span><span class="keyword">{<br />    (function (?</span><span class="default">int </span><span class="keyword">...</span><span class="default">$arg</span><span class="keyword">) {})(...</span><span class="default">$ints</span><span class="keyword">);<br />    </span><span class="comment">// Alternatively, <br />    </span><span class="keyword">(fn (?</span><span class="default">int </span><span class="keyword">...</span><span class="default">$arg</span><span class="keyword">) =&gt; </span><span class="default">$arg</span><span class="keyword">)(...</span><span class="default">$ints</span><span class="keyword">);<br />    </span><span class="comment">// Or to avoid cluttering memory with too many closures<br />    </span><span class="default">typeArrayNullInt</span><span class="keyword">(...</span><span class="default">$ints</span><span class="keyword">);<br /><br />    </span><span class="comment">/* ... */<br /></span><span class="keyword">}<br /><br />function </span><span class="default">doSomethingElse</span><span class="keyword">(?</span><span class="default">int </span><span class="keyword">...</span><span class="default">$ints</span><span class="keyword">): </span><span class="default">void </span><span class="keyword">{<br />    </span><span class="comment">/* ... */<br /></span><span class="keyword">}<br /><br /></span><span class="default">$ints </span><span class="keyword">= [</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">null</span><span class="keyword">];<br /></span><span class="default">doSomething </span><span class="keyword">(</span><span class="default">$ints</span><span class="keyword">);<br /></span><span class="default">doSomethingElse </span><span class="keyword">(...</span><span class="default">$ints</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />Both methods work with all type declarations. The key idea here is to have the functions throw a runtime error if they encounter a typing violation. The typing method used in doSomethingElse is cleaner of the two but it disallows having any other parameters after the variadic parameter. It also requires the call site to be aware of this typing implementation and unpack the array. The method used in doSomething is messier but it does not require the call site to be aware of the typing method as the unpacking is performed within the function. It is also less ambiguous as the doSomethingElse would also accept n individual parameters where as doSomething only accepts an array. doSomething's method is also easier to strip away if native typed array support is ever added to PHP. Both of these methods only work for input parameters. An array return value type check would need to take place at the call site.<br /><br />If strict_types is not enabled, it may be desirable to return the coerced scalar values from the type check function (e.g. floats and strings become integers) to ensure proper typing.</span></code></div>
  </div>
 </div>
  <div class="note" id="126464">  <div class="votes">
    <div id="Vu126464">
    <a href="https://www.php.net/manual/vote-note.php?id=126464&amp;page=language.types.declarations&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd126464">
    <a href="https://www.php.net/manual/vote-note.php?id=126464&amp;page=language.types.declarations&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V126464" title="65% like this...">
    11
    </div>
  </div>
  <a href="language.types.declarations.php.html#126464" class="name">
  <strong class="user"><em>crash</em></strong></a><a class="genanchor" href="language.types.declarations.php.html#126464"> &para;</a><div class="date" title="2021-09-29 01:02"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom126464">
<div class="phpcode"><code><span class="html">The documentation lacks the information, that it's possible to change the return type of a method defined in an interface when the interface's methods return type is defined as `mixed`.<br /><br />From the RFC:<br /><br />"The mixed return type could be narrowed in a subclass as this is covariant and is allowed in LSP." (<a href="https://wiki.php.net/rfc/mixed_type_v2" rel="nofollow" target="_blank">https://wiki.php.net/rfc/mixed_type_v2</a>)<br /><br />This means the following code is valid in PHP 8.0:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">interface </span><span class="default">ITest<br /></span><span class="keyword">{<br />    public function </span><span class="default">apfel</span><span class="keyword">(): </span><span class="default">mixed</span><span class="keyword">; </span><span class="comment">// valid as of 8.0<br /></span><span class="keyword">}<br /><br />class </span><span class="default">Test </span><span class="keyword">implements </span><span class="default">ITest<br /></span><span class="keyword">{<br />    public function </span><span class="default">apfel</span><span class="keyword">(): array </span><span class="comment">// more explicit<br />    </span><span class="keyword">{<br />        return [];<br />    }<br />}<br /><br /></span><span class="default">var_dump</span><span class="keyword">((new </span><span class="default">Test</span><span class="keyword">())-&gt;</span><span class="default">apfel</span><span class="keyword">());<br /></span><span class="default">?&gt;<br /></span><br />You can see the result here: <a href="https://3v4l.org/PXDB6" rel="nofollow" target="_blank">https://3v4l.org/PXDB6</a></span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=language.types.declarations&amp;redirect=https://www.php.net/manual/ru/language.types.declarations.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="language.types.php.html">Типы</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="language.types.intro.php.html" title="Введение">Введение</a>
                        </li>
                                                <li class="">
                            <a href="language.types.type-system.php.html" title="Система типов">Система типов</a>
                        </li>
                                                <li class="">
                            <a href="language.types.null.php.html" title="NULL">NULL</a>
                        </li>
                                                <li class="">
                            <a href="language.types.boolean.php.html" title="Логические значения">Логические значения</a>
                        </li>
                                                <li class="">
                            <a href="language.types.integer.php.html" title="Целые числа">Целые числа</a>
                        </li>
                                                <li class="">
                            <a href="language.types.float.php.html" title="Числа с плавающей точкой">Числа с плавающей точкой</a>
                        </li>
                                                <li class="">
                            <a href="language.types.string.php.html" title="Строки">Строки</a>
                        </li>
                                                <li class="">
                            <a href="language.types.numeric-strings.php.html" title="Числовые строки">Числовые строки</a>
                        </li>
                                                <li class="">
                            <a href="language.types.array.php.html" title="Массивы">Массивы</a>
                        </li>
                                                <li class="">
                            <a href="language.types.object.php.html" title="Объекты">Объекты</a>
                        </li>
                                                <li class="">
                            <a href="language.types.enumerations.php.html" title="Перечисления">Перечисления</a>
                        </li>
                                                <li class="">
                            <a href="language.types.resource.php.html" title="Ресурсы">Ресурсы</a>
                        </li>
                                                <li class="">
                            <a href="language.types.callable.php.html" title="Callable и callback-&#8203;функции">Callable и callback-&#8203;функции</a>
                        </li>
                                                <li class="">
                            <a href="language.types.mixed.php.html" title="Mixed">Mixed</a>
                        </li>
                                                <li class="">
                            <a href="language.types.void.php.html" title="Void">Void</a>
                        </li>
                                                <li class="">
                            <a href="language.types.never.php.html" title="Never">Never</a>
                        </li>
                                                <li class="">
                            <a href="language.types.relative-class-types.php.html" title="Относительные типы классов">Относительные типы классов</a>
                        </li>
                                                <li class="">
                            <a href="language.types.value.php.html" title="Типы значений">Типы значений</a>
                        </li>
                                                <li class="">
                            <a href="language.types.iterable.php.html" title="Итерируемые значения">Итерируемые значения</a>
                        </li>
                                                <li class="current">
                            <a href="language.types.declarations.php.html" title="Объявления типов">Объявления типов</a>
                        </li>
                                                <li class="">
                            <a href="language.types.type-juggling.php.html" title="Манипуляции с типами">Манипуляции с типами</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
