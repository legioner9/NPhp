<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: Memcache::connect - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="memcache.connect.php.html">
 <link rel="shorturl" href="memcache.connect.php.html">
 <link rel="alternate" href="memcache.connect.php.html" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="class.memcache.php.html">
 <link rel="prev" href="memcache.close.php.html">
 <link rel="next" href="memcache.decrement.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/memcache.connect.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/memcache.connect.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/memcache.connect.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/memcache.connect.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/memcache.connect.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/memcache.connect.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/memcache.connect.php" hreflang="pt_BR">
 <link rel="alternate" href="memcache.connect.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/memcache.connect.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/memcache.connect.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="memcache.decrement.php.html">
          Memcache::decrement &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="memcache.close.php.html">
          &laquo; Memcache::close        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.remote.other.php.html'>Другие службы</a></li>      <li><a href='book.memcache.php.html'>Memcache</a></li>      <li><a href='class.memcache.php.html'>Memcache</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/memcache.connect.php'>English</option>
            <option value='de/memcache.connect.php'>German</option>
            <option value='es/memcache.connect.php'>Spanish</option>
            <option value='fr/memcache.connect.php'>French</option>
            <option value='it/memcache.connect.php'>Italian</option>
            <option value='ja/memcache.connect.php'>Japanese</option>
            <option value='pt_BR/memcache.connect.php'>Brazilian Portuguese</option>
            <option value='ru/memcache.connect.php' selected="selected">Russian</option>
            <option value='tr/memcache.connect.php'>Turkish</option>
            <option value='zh/memcache.connect.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/memcache/memcache/connect.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Fmemcache.connect%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="memcache.connect" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Memcache::connect</h1>
  <p class="verinfo">(PECL memcache &gt;= 0.2.0)</p><p class="refpurpose"><span class="refname">Memcache::connect</span> &mdash; <span class="dc-title">Открывает соединение с сервером memcached</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-memcache.connect-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>Memcache::connect</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$host</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$port</code><span class="initializer"> = ?</span></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$timeout</code><span class="initializer"> = ?</span></span>): <span class="type">bool</span></div>


  <p class="para rdfs-comment">
   <span class="function"><strong>Memcache::connect()</strong></span> устанавливает соединение с сервером memcached.
   Соединение, открытое с помощью <span class="function"><strong>Memcache::connect()</strong></span>, автоматически
   закрывается по окончанию выполнения скрипта.
   Также вы можете закрыть соединение при помощи <span class="function"><a href="memcache.close.php.html" class="function">Memcache::close()</a></span>.
   Также вы можете использовать функцию <span class="function"><strong>memcache_connect()</strong></span>.
  </p>

 </div>


 <div class="refsect1 parameters" id="refsect1-memcache.connect-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">host</code></dt>

     <dd>

      <p class="para">
       Определяет хост, на котором memcached ожидает подключений. Этот параметр
       также может задавать другой транспорт, например
       <code class="literal">unix:///path/to/memcached.sock</code> для использования сокетов Unix.
       В таком случае, <code class="parameter">port</code> должен быть задан как
       <code class="literal">0</code>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">port</code></dt>

     <dd>

      <p class="para">
       Определяет порт, на котором слушает memcached. Установите этот параметр
       равным <code class="literal">0</code>, если используете сокеты Unix.
      </p>
      <p class="para">
        Обратите внимание: <code class="parameter">port</code>, если не задан,  по
       умолчанию будет равен
       <a href="memcache.ini.php.html#ini.memcache.default-port" class="link">memcache.default_port</a>.
       По этой причине имеет смысл указать порт явно при вызове метода.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">timeout</code></dt>

     <dd>

      <p class="para">
       Значение в секундах, которое будет использовано для подключения к демону. Дважды
       подумайте, прежде чем изменить значение по умолчанию с 1 секунды - вы можете
       потерять все преимущества от кеширование, если ваше соединение очень медленное.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-memcache.connect-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает <strong><code>true</code></strong> в случае успешного выполнения или <strong><code>false</code></strong> в случае возникновения ошибки.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-memcache.connect-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Пример #1 Пример использования <span class="function"><strong>Memcache::connect()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">/* процедурное API */<br /><br /></span><span style="color: #0000BB">$memcache_obj </span><span style="color: #007700">= </span><span style="color: #0000BB">memcache_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'memcache_host'</span><span style="color: #007700">, </span><span style="color: #0000BB">11211</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/* объектно-ориентированное API */<br /><br /></span><span style="color: #0000BB">$memcache </span><span style="color: #007700">= new </span><span style="color: #0000BB">Memcache</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$memcache</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'memcache_host'</span><span style="color: #007700">, </span><span style="color: #0000BB">11211</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-memcache.connect-notes">
  <h3 class="title">Примечания</h3>
  <div class="warning"><strong class="warning">Внимание</strong>
   <p class="para">
    Если порт <code class="parameter">port</code> не задан, этот метод использует значение по
    умолчанию, заданное в ini-настройке
    <a href="memcache.ini.php.html#ini.memcache.default-port" class="link">memcache.default_port</a>.
    Если это значение изменится где-нибудь в вашем приложении - это может привести
    к неожиданным результатам. По этой причине имеет смысл всегда указать порт явно
    при вызове метода.
   </p>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-memcache.connect-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="memcache.pconnect.php.html" class="function" rel="rdfs-seeAlso">Memcache::pconnect()</a> - Открывает постоянное соединение с сервером memcached</span></li>
    <li class="member"><span class="function"><a href="memcache.close.php.html" class="function" rel="rdfs-seeAlso">Memcache::close()</a> - Закрыть соединение с сервером memcached</span></li>
   </ul>
  </p>
 </div>


</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=memcache.connect&amp;redirect=https://www.php.net/manual/ru/memcache.connect.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">5 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="99461">  <div class="votes">
    <div id="Vu99461">
    <a href="https://www.php.net/manual/vote-note.php?id=99461&amp;page=memcache.connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd99461">
    <a href="https://www.php.net/manual/vote-note.php?id=99461&amp;page=memcache.connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V99461" title="53% like this...">
    9
    </div>
  </div>
  <a href="memcache.connect.php.html#99461" class="name">
  <strong class="user"><em>geoffrey dot hoffman at gmail dot com</em></strong></a><a class="genanchor" href="memcache.connect.php.html#99461"> &para;</a><div class="date" title="2010-08-18 12:32"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom99461">
<div class="phpcode"><code><span class="html">If memcached is working, calling memcache_connect( ) returns an Object instance, not a boolean. If memcached is not working, calling memcache_connect( ) throws a notice AND a warning (and returns false as expected). <br /><br /><span class="default">&lt;?php<br /></span><span class="comment">/* memcache is running */<br /></span><span class="default">$test1 </span><span class="keyword">= </span><span class="default">memcache_connect</span><span class="keyword">(</span><span class="string">'127.0.0.1'</span><span class="keyword">,</span><span class="default">11211</span><span class="keyword">);<br />echo </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$test1</span><span class="keyword">);<br /></span><span class="comment">// object<br /></span><span class="keyword">echo </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$test1</span><span class="keyword">);<br /></span><span class="comment">// Memcache<br /><br />/* memcached is stopped */<br /></span><span class="default">$test2 </span><span class="keyword">= </span><span class="default">memcache_connect</span><span class="keyword">(</span><span class="string">'127.0.0.1'</span><span class="keyword">,</span><span class="default">11211</span><span class="keyword">);<br /><br /></span><span class="comment">/*<br />Notice: memcache_connect(): Server 127.0.0.1 (tcp 11211) failed with: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.<br /> (10060) in C:\Program Files\Support Tools\- on line 1<br /><br />Warning: memcache_connect(): Can't connect to 127.0.0.1:11211, A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.<br /> (10060) in C:\Program Files\Support Tools\- on line 1<br />*/<br /><br /></span><span class="keyword">echo </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$test2</span><span class="keyword">);<br /></span><span class="comment">// boolean<br /></span><span class="keyword">echo </span><span class="default">$test2</span><span class="keyword">===</span><span class="default">false</span><span class="keyword">;<br /></span><span class="comment">// 1<br /></span><span class="default">?&gt;<br /></span><br />There appears to be no way to check whether memcached is actually running without resorting to error suppression:<br /><br /><span class="default">&lt;?php<br />$test3 </span><span class="keyword">= @</span><span class="default">memcache_connect</span><span class="keyword">(</span><span class="string">'127.0.0.1'</span><span class="keyword">,</span><span class="default">11211</span><span class="keyword">);<br />if( </span><span class="default">$test3</span><span class="keyword">===</span><span class="default">false </span><span class="keyword">){<br />   </span><span class="comment">// memcached is _probably_ not running<br /></span><span class="keyword">}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="114989">  <div class="votes">
    <div id="Vu114989">
    <a href="https://www.php.net/manual/vote-note.php?id=114989&amp;page=memcache.connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd114989">
    <a href="https://www.php.net/manual/vote-note.php?id=114989&amp;page=memcache.connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V114989" title="48% like this...">
    -4
    </div>
  </div>
  <a href="memcache.connect.php.html#114989" class="name">
  <strong class="user"><em>webysther at gmail dot com</em></strong></a><a class="genanchor" href="memcache.connect.php.html#114989"> &para;</a><div class="date" title="2014-05-10 04:28"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom114989">
<div class="phpcode"><code><span class="html">In describing the timeout there is a statement that is not completely correct, increase the timeout does not necessarily preclude or unfeasible memcache, only allows the system to wait for more concurrent connections, which is a large minority of the number of connections, this causes several problems and could simply be corrected if the timeout was increased and perform some tests. <br />To prove the concept and show that the connection does not wait if the server goes down:<br /><br /><span class="default">&lt;?PHP<br /><br /></span><span class="keyword">while ( ++</span><span class="default">$loop </span><span class="keyword">&lt; </span><span class="default">10000 </span><span class="keyword">) {<br />    try {<br />        </span><span class="default">$memcache </span><span class="keyword">= new </span><span class="default">Memcache</span><span class="keyword">;<br />        @</span><span class="default">$memcache</span><span class="keyword">-&gt;</span><span class="default">pconnect</span><span class="keyword">( </span><span class="string">"127.0.0.1" </span><span class="keyword">, </span><span class="default">11211 </span><span class="keyword">, </span><span class="default">30 </span><span class="keyword">);<br />        </span><span class="default">$loopset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />        </span><span class="default">$loopget </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />        <br />        while ( ++</span><span class="default">$loopset </span><span class="keyword">&lt; </span><span class="default">50 </span><span class="keyword">) {<br />            if ( @</span><span class="default">$memcache</span><span class="keyword">-&gt;</span><span class="default">set</span><span class="keyword">( </span><span class="string">"foo" </span><span class="keyword">, </span><span class="string">"bar" </span><span class="keyword">) === </span><span class="default">false </span><span class="keyword">) {<br />                echo </span><span class="string">"Fail!" </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br />            }<br />        }<br />        <br />        while ( ++</span><span class="default">$loopget </span><span class="keyword">&lt; </span><span class="default">500 </span><span class="keyword">) {<br />            if ( @</span><span class="default">$memcache</span><span class="keyword">-&gt;</span><span class="default">get</span><span class="keyword">( </span><span class="string">"foo" </span><span class="keyword">) === </span><span class="default">false </span><span class="keyword">) {<br />                echo </span><span class="string">"Fail!" </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br />            }<br />        }<br />        <br />        if ( </span><span class="default">$loop </span><span class="keyword">% </span><span class="default">100 </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">) {<br />            echo </span><span class="string">"Try: " </span><span class="keyword">. </span><span class="default">$loop </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br />        }<br />    } catch ( </span><span class="default">Exception $e </span><span class="keyword">) {<br />        echo </span><span class="string">"Fail: " </span><span class="keyword">. </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">() . </span><span class="default">PHP_EOL</span><span class="keyword">;<br />    }<br />}<br /><br /></span><span class="default">?&gt;<br /></span><br />Replace with an invalid host and test the timeout will not make a difference! It serves only for connections to the socket that are occupied.<br /><br />More detail about troubleshooting timeouts in memcached google code.</span></code></div>
  </div>
 </div>
  <div class="note" id="103928">  <div class="votes">
    <div id="Vu103928">
    <a href="https://www.php.net/manual/vote-note.php?id=103928&amp;page=memcache.connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd103928">
    <a href="https://www.php.net/manual/vote-note.php?id=103928&amp;page=memcache.connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V103928" title="46% like this...">
    -8
    </div>
  </div>
  <a href="memcache.connect.php.html#103928" class="name">
  <strong class="user"><em>djbrd</em></strong></a><a class="genanchor" href="memcache.connect.php.html#103928"> &para;</a><div class="date" title="2011-05-11 11:48"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom103928">
<div class="phpcode"><code><span class="html">To suppress (or handle) the warning and notice thrown by a failed attempt to connect, you can use a custom error handler function, like this:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">myErrorHandler</span><span class="keyword">(</span><span class="default">$errno</span><span class="keyword">, </span><span class="default">$errstr</span><span class="keyword">, </span><span class="default">$errfile</span><span class="keyword">, </span><span class="default">$errline</span><span class="keyword">)<br />{<br /><br />    if (</span><span class="default">E_WARNING </span><span class="keyword">=== </span><span class="default">$errno</span><span class="keyword">)<br />    {<br />        </span><span class="default">Log</span><span class="keyword">(</span><span class="string">"PHP Warning: </span><span class="default">$errstr</span><span class="string">, </span><span class="default">$errfile</span><span class="string">, </span><span class="default">$errline</span><span class="string">"</span><span class="keyword">, </span><span class="default">Logging</span><span class="keyword">::</span><span class="default">WARN</span><span class="keyword">); <br />        return </span><span class="default">true</span><span class="keyword">;<br />    }<br />    <br />    if (</span><span class="default">E_NOTICE </span><span class="keyword">=== </span><span class="default">$errno</span><span class="keyword">)<br />    {<br />        </span><span class="default">Log</span><span class="keyword">(</span><span class="string">"PHP Notic: </span><span class="default">$errstr</span><span class="string">, </span><span class="default">$errfile</span><span class="string">, </span><span class="default">$errline</span><span class="string">"</span><span class="keyword">, </span><span class="default">Logging</span><span class="keyword">::</span><span class="default">NOTICE</span><span class="keyword">); <br />        return </span><span class="default">true</span><span class="keyword">;<br />    }    <br />    <br />    return </span><span class="default">false</span><span class="keyword">;<br />}<br /><br /></span><span class="default">set_error_handler</span><span class="keyword">(</span><span class="string">'myErrorHandler'</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="69405">  <div class="votes">
    <div id="Vu69405">
    <a href="https://www.php.net/manual/vote-note.php?id=69405&amp;page=memcache.connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd69405">
    <a href="https://www.php.net/manual/vote-note.php?id=69405&amp;page=memcache.connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V69405" title="43% like this...">
    -12
    </div>
  </div>
  <a href="memcache.connect.php.html#69405" class="name">
  <strong class="user"><em>chrisn at allipo dot com</em></strong></a><a class="genanchor" href="memcache.connect.php.html#69405"> &para;</a><div class="date" title="2006-09-05 01:39"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom69405">
<div class="phpcode"><code><span class="html">The behavior of Memcache::connect() is to always reinitialize the pool from scratch regardless of any previous calls to addServer().<br /><br />E.g.<br /><br /><span class="default">&lt;?php<br />$mmc </span><span class="keyword">= new </span><span class="default">Memcache</span><span class="keyword">()<br /></span><span class="default">$mmc</span><span class="keyword">-&gt;</span><span class="default">addServer</span><span class="keyword">(</span><span class="string">'node1'</span><span class="keyword">, </span><span class="default">11211</span><span class="keyword">);<br /></span><span class="default">$mmc</span><span class="keyword">-&gt;</span><span class="default">addServer</span><span class="keyword">(</span><span class="string">'node2'</span><span class="keyword">, </span><span class="default">11211</span><span class="keyword">);<br /></span><span class="default">$mmc</span><span class="keyword">-&gt;</span><span class="default">addServer</span><span class="keyword">(</span><span class="string">'node3'</span><span class="keyword">, </span><span class="default">11211</span><span class="keyword">);<br /><br /></span><span class="default">$mmc</span><span class="keyword">-&gt;</span><span class="default">connect</span><span class="keyword">(</span><span class="string">'node1'</span><span class="keyword">, </span><span class="default">11211</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />The last connect() call clears out the pool and then add and connect node1:11211 making it the only server.<br /><br />If you want a pool of memcache servers, do not use the connect() function.<br /><br />If you only want a single memcache server then there is no need to use the addServer() function.</span></code></div>
  </div>
 </div>
  <div class="note" id="106786">  <div class="votes">
    <div id="Vu106786">
    <a href="https://www.php.net/manual/vote-note.php?id=106786&amp;page=memcache.connect&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd106786">
    <a href="https://www.php.net/manual/vote-note.php?id=106786&amp;page=memcache.connect&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V106786" title="43% like this...">
    -15
    </div>
  </div>
  <a href="memcache.connect.php.html#106786" class="name">
  <strong class="user"><em>tom at all dash community dot de</em></strong></a><a class="genanchor" href="memcache.connect.php.html#106786"> &para;</a><div class="date" title="2011-12-06 07:52"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom106786">
<div class="phpcode"><code><span class="html">There is a not-so-obvious way to check whether or not a MemCache-Server is available.<br /><br />Using ($memCache-&gt;connect() == false) will wait for a timeout if it can't connect. If you got a high-traffic site this may not be an option. So when the server is down, you may want to avoid waiting for this timeout on every request and instead try to reconnect only once every X seconds.<br /><br />If so, this code may help:<br /><br /><span class="default">&lt;?php<br />$memCache </span><span class="keyword">= new </span><span class="default">\Memcache</span><span class="keyword">();<br /></span><span class="default">$memCache</span><span class="keyword">-&gt;</span><span class="default">addServer</span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">, </span><span class="default">$port</span><span class="keyword">);<br /></span><span class="default">$stats </span><span class="keyword">= @</span><span class="default">$memCache</span><span class="keyword">-&gt;</span><span class="default">getExtendedStats</span><span class="keyword">();<br /></span><span class="default">$available </span><span class="keyword">= (bool) </span><span class="default">$stats</span><span class="keyword">[</span><span class="string">"</span><span class="default">$host</span><span class="string">:</span><span class="default">$port</span><span class="string">"</span><span class="keyword">];<br />if (</span><span class="default">$available </span><span class="keyword">&amp;&amp; @</span><span class="default">$memCache</span><span class="keyword">-&gt;</span><span class="default">connect</span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">, </span><span class="default">$port</span><span class="keyword">))<br />    </span><span class="comment">// MemCache is there<br /></span><span class="keyword">else<br />    </span><span class="comment">// go on without MemCache<br /></span><span class="default">?&gt;<br /></span><br />The result of getExtendedStats() is an array. The information is cached and maintained by MemCache itself. If the server is not available, the result will be FALSE.<br /><br />Even if the result is not false, the server may still not be available. Thus you need to check for connect() != false too, but only if the first check returns TRUE, thus avoiding the 1 second timeout in most cases.<br />Both getExtendedStats() and connect() issue notices/warnings if the server is not there. Thus you have to mute both calls.<br /><br />Do NOT use getServerStatus() for this purpose: the result is cached on server-start and will not recognize when the connection to the server is lost (or reestablished) in between.</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=memcache.connect&amp;redirect=https://www.php.net/manual/ru/memcache.connect.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="class.memcache.php.html">Memcache</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="memcache.add.php.html" title="add">add</a>
                        </li>
                                                <li class="">
                            <a href="memcache.addserver.php.html" title="addServer">addServer</a>
                        </li>
                                                <li class="">
                            <a href="memcache.close.php.html" title="close">close</a>
                        </li>
                                                <li class="current">
                            <a href="memcache.connect.php.html" title="connect">connect</a>
                        </li>
                                                <li class="">
                            <a href="memcache.decrement.php.html" title="decrement">decrement</a>
                        </li>
                                                <li class="">
                            <a href="memcache.delete.php.html" title="delete">delete</a>
                        </li>
                                                <li class="">
                            <a href="memcache.flush.php.html" title="flush">flush</a>
                        </li>
                                                <li class="">
                            <a href="memcache.get.php.html" title="get">get</a>
                        </li>
                                                <li class="">
                            <a href="memcache.getextendedstats.php.html" title="getExtendedStats">getExtendedStats</a>
                        </li>
                                                <li class="">
                            <a href="memcache.getserverstatus.php.html" title="getServerStatus">getServerStatus</a>
                        </li>
                                                <li class="">
                            <a href="memcache.getstats.php.html" title="getStats">getStats</a>
                        </li>
                                                <li class="">
                            <a href="memcache.getversion.php.html" title="getVersion">getVersion</a>
                        </li>
                                                <li class="">
                            <a href="memcache.increment.php.html" title="increment">increment</a>
                        </li>
                                                <li class="">
                            <a href="memcache.pconnect.php.html" title="pconnect">pconnect</a>
                        </li>
                                                <li class="">
                            <a href="memcache.replace.php.html" title="replace">replace</a>
                        </li>
                                                <li class="">
                            <a href="memcache.set.php.html" title="set">set</a>
                        </li>
                                                <li class="">
                            <a href="memcache.setcompressthreshold.php.html" title="setCompressThreshold">setCompressThreshold</a>
                        </li>
                                                <li class="">
                            <a href="memcache.setserverparams.php.html" title="setServerParams">setServerParams</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
