<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: PDOStatement::fetchAll - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="pdostatement.fetchall.php.html">
 <link rel="shorturl" href="pdostatement.fetchall.php.html">
 <link rel="alternate" href="pdostatement.fetchall.php.html" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="class.pdostatement.php.html">
 <link rel="prev" href="pdostatement.fetch.php.html">
 <link rel="next" href="pdostatement.fetchcolumn.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/pdostatement.fetchall.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/pdostatement.fetchall.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/pdostatement.fetchall.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/pdostatement.fetchall.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/pdostatement.fetchall.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/pdostatement.fetchall.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/pdostatement.fetchall.php" hreflang="pt_BR">
 <link rel="alternate" href="pdostatement.fetchall.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/pdostatement.fetchall.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/pdostatement.fetchall.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="pdostatement.fetchcolumn.php.html">
          PDOStatement::fetchColumn &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="pdostatement.fetch.php.html">
          &laquo; PDOStatement::fetch        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.database.php.html'>Модули для работы с базами данных</a></li>      <li><a href='refs.database.abstract.php.html'>Уровни абстракции</a></li>      <li><a href='book.pdo.php.html'>PDO</a></li>      <li><a href='class.pdostatement.php.html'>PDOStatement</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/pdostatement.fetchall.php'>English</option>
            <option value='de/pdostatement.fetchall.php'>German</option>
            <option value='es/pdostatement.fetchall.php'>Spanish</option>
            <option value='fr/pdostatement.fetchall.php'>French</option>
            <option value='it/pdostatement.fetchall.php'>Italian</option>
            <option value='ja/pdostatement.fetchall.php'>Japanese</option>
            <option value='pt_BR/pdostatement.fetchall.php'>Brazilian Portuguese</option>
            <option value='ru/pdostatement.fetchall.php' selected="selected">Russian</option>
            <option value='tr/pdostatement.fetchall.php'>Turkish</option>
            <option value='zh/pdostatement.fetchall.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/pdo/pdostatement/fetchall.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Fpdostatement.fetchall%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="pdostatement.fetchall" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">PDOStatement::fetchAll</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.1.0, PHP 7, PHP 8, PECL pdo &gt;= 0.1.0)</p><p class="refpurpose"><span class="refname">PDOStatement::fetchAll</span> &mdash; <span class="dc-title">Выбирает оставшиеся строки из набора результатов</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-pdostatement.fetchall-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>PDOStatement::fetchAll</strong></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$mode</code><span class="initializer"> = PDO::FETCH_DEFAULT</span></span>): <span class="type">array</span></div>


  <div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><strong>PDOStatement::fetchAll</strong></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$mode</code><span class="initializer"> = PDO::FETCH_COLUMN</span></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$column</code></span>): <span class="type">array</span></div>


  <div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><strong>PDOStatement::fetchAll</strong></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$mode</code><span class="initializer"> = PDO::FETCH_CLASS</span></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$class</code></span>, <span class="methodparam"><span class="type">?</span><span class="type"><span class="type">array</span><span class="type"></span></span> <code class="parameter">$constructorArgs</code></span>): <span class="type">array</span></div>


  <div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><strong>PDOStatement::fetchAll</strong></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$mode</code><span class="initializer"> = PDO::FETCH_FUNC</span></span>, <span class="methodparam"><span class="type"><a href="language.types.callable.php.html" class="type callable">callable</a></span> <code class="parameter">$callback</code></span>): <span class="type">array</span></div>

 </div>


 <div class="refsect1 parameters" id="refsect1-pdostatement.fetchall-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">mode</code></dt>

     <dd>

      <p class="para">
       Определяет содержимое возвращаемого массива. Подробней можно узнать из
       документации к методу <span class="methodname"><a href="pdostatement.fetch.php.html" class="methodname">PDOStatement::fetch()</a></span>. По умолчанию
       параметр принимает значение <strong><code>PDO::ATTR_DEFAULT_FETCH_MODE</code></strong>
       (которое в свою очередь имеет умолчание <strong><code>PDO::FETCH_BOTH</code></strong>)
      </p>
      <p class="para">
       Чтобы извлечь значения только одного столбца, передайте в качестве значения
       этого параметра константу <strong><code>PDO::FETCH_COLUMN</code></strong>. С помощью
       параметра <code class="parameter">column</code> можно задать столбец, из
       которого требуется извлечь данные.
      </p>
      <p class="para">
       Если требуется извлечь только уникальные строки одного столбца, нужно
       передать побитовое ИЛИ констант <strong><code>PDO::FETCH_COLUMN</code></strong> и
       <strong><code>PDO::FETCH_UNIQUE</code></strong>.
      </p>
      <p class="para">
       Чтобы получить ассоциативный массив строк сгруппированный по значениям
       определённого столбца, нужно передать побитовое ИЛИ констант
       <strong><code>PDO::FETCH_COLUMN</code></strong> и <strong><code>PDO::FETCH_GROUP</code></strong>.
      </p>
     </dd>

    
   </dl>

   Следующие параметры являются динамическими и зависят от режима выборки.
   Они не могут использоваться совместно с именованными параметрами.
   <dl>
    
     <dt>
<code class="parameter">column</code></dt>

     <dd>

      <p class="para">
       Используется с <strong><code>PDO::FETCH_COLUMN</code></strong>.
       Возвращает указанный столбец с индексом, начинающимся с 0.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">class</code></dt>

     <dd>

      <p class="para">
       Используется с <strong><code>PDO::FETCH_CLASS</code></strong>.
       Возвращает экземпляры указанного класса, сопоставляя
       столбцы каждой строки с именованными свойствами класса.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">constructorArgs</code></dt>

     <dd>

      <p class="para">
       Аргументы конструктора пользовательского класса,
       когда параметр <code class="parameter">mode</code> равен <strong><code>PDO::FETCH_CLASS</code></strong>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">callback</code></dt>

     <dd>

      <p class="para">
       Используется с <strong><code>PDO::FETCH_FUNC</code></strong>.
       Возвращает результаты вызова указанной функции,
       используя столбцы каждой строки в качестве параметров вызова.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-pdostatement.fetchall-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Метод <span class="methodname"><strong>PDOStatement::fetchAll()</strong></span> возвращает массив, содержащий все
   оставшиеся строки результирующего набора. Массив представляет каждую строку
   либо в виде массива значений одного столбца, либо в виде объекта, имена свойств
   которого совпадают с именами столбцов.
  </p>
  <p class="para">
   Использование этого метода для извлечения строк больших результирующих
   наборов может пагубно сказаться на производительности системы и сетевых
   ресурсов. Вместо извлечения всех данных и их обработки в PHP рекомендуется
   использовать встроенные средства СУБД. Например, использование выражений
   WHERE и ORDER BY языка SQL может уменьшить размеры результирующего набора.
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-pdostatement.fetchall-errors">
  <h3 class="title">Ошибки</h3>
  <p class="para">
 Выдаёт ошибку уровня <strong><code>E_WARNING</code></strong>, если атрибуту <strong><code>PDO::ATTR_ERRMODE</code></strong>
 установлено значение <strong><code>PDO::ERRMODE_WARNING</code></strong>.
</p>
<p class="para">
 Выбрасывает исключение <span class="classname"><a href="class.pdoexception.php.html" class="classname">PDOException</a></span>, если атрибуту <strong><code>PDO::ATTR_ERRMODE</code></strong>
 установлено значение <strong><code>PDO::ERRMODE_EXCEPTION</code></strong>.
</p>
 </div>


 <div class="refsect1 changelog" id="refsect1-pdostatement.fetchall-changelog">
  <h3 class="title">Список изменений</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Версия</th>
      <th>Описание</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>8.0.0</td>
      <td>
       Метод теперь всегда возвращает массив (<span class="type">array</span>), раньше в случае возникновения ошибки могло возвращаться <strong><code>false</code></strong>.
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-pdostatement.fetchall-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="example-3247"><p><strong>Пример #1 Извлечение всех оставшихся строк результирующего набора</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$sth </span><span style="color: #007700">= </span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT name, colour FROM fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">/* Извлечение всех оставшихся строк результирующего набора */<br /></span><span style="color: #007700">print </span><span style="color: #DD0000">"Извлечение всех оставшихся строк результирующего набора:\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Вывод приведённого примера будет похож на:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
Извлечение всех оставшихся строк результирующего набора:
Array
(
    [0] =&gt; Array
        (
            [name] =&gt; apple
            [0] =&gt; apple
            [colour] =&gt; red
            [1] =&gt; red
        )

    [1] =&gt; Array
        (
            [name] =&gt; pear
            [0] =&gt; pear
            [colour] =&gt; green
            [1] =&gt; green
        )

    [2] =&gt; Array
        (
            [name] =&gt; watermelon
            [0] =&gt; watermelon
            [colour] =&gt; pink
            [1] =&gt; pink
        )
)
</pre></div>
    </div>
   </div>
   <div class="example" id="example-3250">
    <p><strong>Пример #2 
     Извлечение всех значений одного столбца результирующего набора
    </strong></p>
    <div class="example-contents"><p>
     В следующем примере показано, как извлечь из результирующего набора значения
     только одного столбца, даже если строки содержат значения нескольких столбцов.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$sth </span><span style="color: #007700">= </span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT name, colour FROM fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">/* Извлечение всех значений первого столбца */<br /></span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_COLUMN</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Вывод приведённого примера будет похож на:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
Array(3)
(
    [0] =&gt;
    string(5) =&gt; apple
    [1] =&gt;
    string(4) =&gt; pear
    [2] =&gt;
    string(10) =&gt; watermelon
)
</pre></div>
    </div>
   </div>
   <div class="example" id="example-3253">
    <p><strong>Пример #3 
     Группировка строк по значениям одного столбца
    </strong></p>
    <div class="example-contents"><p>
     В следующем примере показано, как получить ассоциативный массив строк
     результирующего набора, сгруппированных по значениям указанного столбца. Массив
     содержит три ключа: значения <code class="literal">apple</code> и <code class="literal">pear</code> являются
     массивами, содержащими два разных цвета; в тоже время <code class="literal">watermelon</code>
     будет массивом, содержащим только один цвет.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$insert </span><span style="color: #007700">= </span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT INTO fruit(name, colour) VALUES (?, ?)"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$insert</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'apple'</span><span style="color: #007700">, </span><span style="color: #DD0000">'green'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$insert</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'pear'</span><span style="color: #007700">, </span><span style="color: #DD0000">'yellow'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$sth </span><span style="color: #007700">= </span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT name, colour FROM fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">/* Группируем записи по значениям первого столбца */<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_COLUMN</span><span style="color: #007700">|</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_GROUP</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Вывод приведённого примера будет похож на:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [&quot;apple&quot;]=&gt;
  array(2) {
    [0]=&gt;
    string(5) &quot;green&quot;
    [1]=&gt;
    string(3) &quot;red&quot;
  }
  [&quot;pear&quot;]=&gt;
  array(2) {
    [0]=&gt;
    string(5) &quot;green&quot;
    [1]=&gt;
    string(6) &quot;yellow&quot;
  }
  [&quot;watermelon&quot;]=&gt;
  array(1) {
    [0]=&gt;
    string(5) &quot;pink&quot;
  }
}

</pre></div>
    </div>
   </div>
   <div class="example" id="example-3256">
    <p><strong>Пример #4 
     Создание объекта для каждой строки
    </strong></p>
    <div class="example-contents"><p>
     В следующем примере показано поведение метода в режиме выборки
     <strong><code>PDO::FETCH_CLASS</code></strong>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">fruit </span><span style="color: #007700">{<br />    public </span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br />    public </span><span style="color: #0000BB">$colour</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$sth </span><span style="color: #007700">= </span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT name, colour FROM fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_CLASS</span><span style="color: #007700">, </span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Вывод приведённого примера будет похож на:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [0]=&gt;
  object(fruit)#1 (2) {
    [&quot;name&quot;]=&gt;
    string(5) &quot;apple&quot;
    [&quot;colour&quot;]=&gt;
    string(5) &quot;green&quot;
  }
  [1]=&gt;
  object(fruit)#2 (2) {
    [&quot;name&quot;]=&gt;
    string(4) &quot;pear&quot;
    [&quot;colour&quot;]=&gt;
    string(6) &quot;yellow&quot;
  }
  [2]=&gt;
  object(fruit)#3 (2) {
    [&quot;name&quot;]=&gt;
    string(10) &quot;watermelon&quot;
    [&quot;colour&quot;]=&gt;
    string(4) &quot;pink&quot;
  }
  [3]=&gt;
  object(fruit)#4 (2) {
    [&quot;name&quot;]=&gt;
    string(5) &quot;apple&quot;
    [&quot;colour&quot;]=&gt;
    string(3) &quot;red&quot;
  }
  [4]=&gt;
  object(fruit)#5 (2) {
    [&quot;name&quot;]=&gt;
    string(4) &quot;pear&quot;
    [&quot;colour&quot;]=&gt;
    string(5) &quot;green&quot;
  }
}
</pre></div>
    </div>
   </div>
   <div class="example" id="example-3259">
    <p><strong>Пример #5 
     Вызов функции для каждой строки
    </strong></p>
    <div class="example-contents"><p>
     В следующем примере показано поведение метода в режиме выборки
     <strong><code>PDO::FETCH_FUNC</code></strong>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">fruit</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">, </span><span style="color: #0000BB">$colour</span><span style="color: #007700">) {<br />    return </span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$name</span><span style="color: #007700">}</span><span style="color: #DD0000">: </span><span style="color: #007700">{</span><span style="color: #0000BB">$colour</span><span style="color: #007700">}</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$sth </span><span style="color: #007700">= </span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT name, colour FROM fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_FUNC</span><span style="color: #007700">, </span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    
<div class="example-contents"><p>
 Вывод приведённого примера будет похож на:
</p></div>

    <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [0]=&gt;
  string(12) &quot;apple: green&quot;
  [1]=&gt;
  string(12) &quot;pear: yellow&quot;
  [2]=&gt;
  string(16) &quot;watermelon: pink&quot;
  [3]=&gt;
  string(10) &quot;apple: red&quot;
  [4]=&gt;
  string(11) &quot;pear: green&quot;
}
</pre></div>
    </div>
   </div>

  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-pdostatement.fetchall-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="methodname"><a href="pdo.query.php.html" class="methodname" rel="rdfs-seeAlso">PDO::query()</a> - Подготавливает и выполняет выражение SQL без заполнителей</span></li>
    <li class="member"><span class="methodname"><a href="pdostatement.fetch.php.html" class="methodname" rel="rdfs-seeAlso">PDOStatement::fetch()</a> - Извлечение следующей строки из результирующего набора</span></li>
    <li class="member"><span class="methodname"><a href="pdostatement.fetchcolumn.php.html" class="methodname" rel="rdfs-seeAlso">PDOStatement::fetchColumn()</a> - Возвращает данные одного столбца следующей строки результирующего набора</span></li>
    <li class="member"><span class="methodname"><a href="pdo.prepare.php.html" class="methodname" rel="rdfs-seeAlso">PDO::prepare()</a> - Подготавливает запрос к выполнению и возвращает связанный с этим запросом
   объект</span></li>
    <li class="member"><span class="methodname"><a href="pdostatement.setfetchmode.php.html" class="methodname" rel="rdfs-seeAlso">PDOStatement::setFetchMode()</a> - Устанавливает режим выборки по умолчанию для объекта запроса</span></li>
   </ul>
  </p>
 </div>

</div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=pdostatement.fetchall&amp;redirect=https://www.php.net/manual/ru/pdostatement.fetchall.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">32 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="120517">  <div class="votes">
    <div id="Vu120517">
    <a href="https://www.php.net/manual/vote-note.php?id=120517&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd120517">
    <a href="https://www.php.net/manual/vote-note.php?id=120517&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V120517" title="85% like this...">
    87
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#120517" class="name">
  <strong class="user"><em>simplerezo at gmail dot com</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#120517"> &para;</a><div class="date" title="2017-01-24 02:52"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom120517">
<div class="phpcode"><code><span class="html">I still don't understand why FETCH_KEY_PAIR is not documented here (<a href="http://php.net/manual/fr/pdo.constants.php" rel="nofollow" target="_blank">http://php.net/manual/fr/pdo.constants.php</a>), because it could be very useful!<br /><br /><span class="default">&lt;?php<br />  var_dump</span><span class="keyword">(</span><span class="default">$pdo</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">'select id, name from table'</span><span class="keyword">)-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_KEY_PAIR</span><span class="keyword">));<br /></span><span class="default">?&gt;<br /></span><br />This will display:<br />array(2) {<br />  [2]=&gt;<br />  string(10) "name2"<br />  [5]=&gt;<br />  string(10) "name5"<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="116347">  <div class="votes">
    <div id="Vu116347">
    <a href="https://www.php.net/manual/vote-note.php?id=116347&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116347">
    <a href="https://www.php.net/manual/vote-note.php?id=116347&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116347" title="74% like this...">
    47
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#116347" class="name">
  <strong class="user"><em>dyukemedia at gmail dot com</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#116347"> &para;</a><div class="date" title="2014-12-16 12:15"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom116347">
<div class="phpcode"><code><span class="html">Getting foreach to play nicely with some data from PDO FetchAll()<br />I was not understanding to use the $value part of the foreach properly, I hope this helps someone else.<br />Example:<br /><span class="default">&lt;?php <br />$stmt </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">db</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(</span><span class="string">'SELECT title, FMarticle_id FROM articles WHERE domain_name =:domain_name'</span><span class="keyword">);<br />            </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">bindValue</span><span class="keyword">(</span><span class="string">':domain_name'</span><span class="keyword">, </span><span class="default">$domain</span><span class="keyword">);<br />            </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">();<br />            </span><span class="default">$article_list </span><span class="keyword">= </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_ASSOC</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span>which gives:<br /><br />array (size=2)<br />  0 =&gt; <br />    array (size=2)<br />      'title' =&gt; string 'About Cats Really Long title for the article' (length=44)<br />      'FMarticle_id' =&gt; string '7CAEBB15-6784-3A41-909A-1B6D12667499' (length=36)<br />  1 =&gt; <br />    array (size=2)<br />      'title' =&gt; string 'another cat story' (length=17)<br />      'FMarticle_id' =&gt; string '0BB86A06-2A79-3145-8A02-ECF6EA5C405C' (length=36)<br /><br />Then use:<br /><span class="default">&lt;?php<br /></span><span class="keyword">foreach (</span><span class="default">$article_list </span><span class="keyword">as </span><span class="default">$row </span><span class="keyword">=&gt; </span><span class="default">$link</span><span class="keyword">) {<br />  echo  </span><span class="string">'&lt;a href="'</span><span class="keyword">.  </span><span class="default">$link</span><span class="keyword">[</span><span class="string">'FMarticle_id'</span><span class="keyword">].</span><span class="string">'"&gt;' </span><span class="keyword">. </span><span class="default">$link</span><span class="keyword">[</span><span class="string">'title'</span><span class="keyword">]. </span><span class="string">'&lt;/a&gt;&lt;/br&gt;'</span><span class="keyword">;<br />  }<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="97973">  <div class="votes">
    <div id="Vu97973">
    <a href="https://www.php.net/manual/vote-note.php?id=97973&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd97973">
    <a href="https://www.php.net/manual/vote-note.php?id=97973&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V97973" title="73% like this...">
    32
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#97973" class="name">
  <strong class="user"><em>esw at pixeloution dot removeme dot com</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#97973"> &para;</a><div class="date" title="2010-05-18 09:17"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom97973">
<div class="phpcode"><code><span class="html">Interestingly enough, when you use fetchAll, the constructor for your object is called AFTER the properties are assigned. For example:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">person </span><span class="keyword">{<br />    public </span><span class="default">$name</span><span class="keyword">;<br /><br />    function </span><span class="default">__construct</span><span class="keyword">() {<br />       </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">. </span><span class="string">" is my name."</span><span class="keyword">;<br />    }<br />}<br /><br /></span><span class="comment"># set up select from a database here with PDO<br /></span><span class="default">$obj </span><span class="keyword">= </span><span class="default">$STH</span><span class="keyword">-&gt;</span><span class="default">fetchALL</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_CLASS</span><span class="keyword">, </span><span class="string">'person'</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />Will result in ' is my name' being appended to all the name columns. However if you call it slightly differently:<br /><br /><span class="default">&lt;?php<br />$obj </span><span class="keyword">= </span><span class="default">$obj </span><span class="keyword">= </span><span class="default">$STH</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_CLASS </span><span class="keyword">| </span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_PROPS_LATE</span><span class="keyword">, </span><span class="string">'person'</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />Then the constructor will be called before properties are assigned. I can't find this documented anywhere, so I thought it would be nice to add a note here.</span></code></div>
  </div>
 </div>
  <div class="note" id="88699">  <div class="votes">
    <div id="Vu88699">
    <a href="https://www.php.net/manual/vote-note.php?id=88699&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd88699">
    <a href="https://www.php.net/manual/vote-note.php?id=88699&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V88699" title="69% like this...">
    40
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#88699" class="name">
  <strong class="user"><em>Ant P.</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#88699"> &para;</a><div class="date" title="2009-02-03 06:37"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom88699">
<div class="phpcode"><code><span class="html">You might find yourself wanting to use FETCH_GROUP and FETCH_ASSOC at the same time, to get your table's primary key as the array key:<br /><span class="default">&lt;?php<br /></span><span class="comment">// $stmt is some query like "SELECT rowid, username, comment"<br /></span><span class="default">$results </span><span class="keyword">= </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_GROUP</span><span class="keyword">|</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_ASSOC</span><span class="keyword">);<br /><br /></span><span class="comment">// It does work, but not as you might expect:<br /></span><span class="default">$results </span><span class="keyword">= array(<br />    </span><span class="default">1234 </span><span class="keyword">=&gt; array(</span><span class="default">0 </span><span class="keyword">=&gt; array(</span><span class="string">'username' </span><span class="keyword">=&gt; </span><span class="string">'abc'</span><span class="keyword">, </span><span class="string">'comment' </span><span class="keyword">=&gt; </span><span class="string">'[...]'</span><span class="keyword">)),<br />    </span><span class="default">1235 </span><span class="keyword">=&gt; array(</span><span class="default">0 </span><span class="keyword">=&gt; array(</span><span class="string">'username' </span><span class="keyword">=&gt; </span><span class="string">'def'</span><span class="keyword">, </span><span class="string">'comment' </span><span class="keyword">=&gt; </span><span class="string">'[...]'</span><span class="keyword">)),<br />);<br /><br /></span><span class="comment">// ...but you can at least strip the useless numbered array out easily:<br /></span><span class="default">$results </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'reset'</span><span class="keyword">, </span><span class="default">$results</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="90692">  <div class="votes">
    <div id="Vu90692">
    <a href="https://www.php.net/manual/vote-note.php?id=90692&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd90692">
    <a href="https://www.php.net/manual/vote-note.php?id=90692&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V90692" title="75% like this...">
    21
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#90692" class="name">
  <strong class="user"><em>Daniel Hofmann</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#90692"> &para;</a><div class="date" title="2009-05-05 12:21"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom90692">
<div class="phpcode"><code><span class="html">PLEASE BE AWARE: If you do an OUTER LEFT JOIN and set PDO FetchALL to PDO::FETCH_ASSOC, any primary key you used in the OUTER LEFT JOIN will be set to a blank if there are no records returned in the JOIN.<br /><br />For example:<br /><span class="default">&lt;?php<br /></span><span class="comment">//query the product table and join to the image table and return any images, if we have any, for each product<br /></span><span class="default">$sql </span><span class="keyword">= </span><span class="string">"SELECT * FROM product, image<br />LEFT OUTER JOIN image ON (product.product_id = image.product_id)"</span><span class="keyword">;<br /><br /></span><span class="default">$array </span><span class="keyword">= </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_ASSOC</span><span class="keyword">);<br /><br /></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />The resulting array will look something like this:<br /><br />Array<br />(<br />    [0] =&gt; Array<br />        (<br />            [product_id] =&gt; <br />            [notes] =&gt; "this product..."<br />            [brand] =&gt; "Best Yet"<br />            ...<br /><br />The fix is to simply specify your field names in the SELECT clause instead of using the * as a wild card, or, you can also specify the field in addition to the *. The following example returns the product_id field correctly:<br /><br /><span class="default">&lt;?php<br />$sql </span><span class="keyword">= </span><span class="string">"SELECT *, product.product_id FROM product, image<br />LEFT OUTER JOIN image ON (product.product_id = image.product_id)"</span><span class="keyword">;<br /><br /></span><span class="default">$array </span><span class="keyword">= </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_ASSOC</span><span class="keyword">);<br /><br /></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />The resulting array will look something like this:<br /><br />Array<br />(<br />    [0] =&gt; Array<br />        (<br />            [product_id] =&gt; 3<br />            [notes] =&gt; "this product..."<br />            [brand] =&gt; "Best Yet"<br />            ...</span></code></div>
  </div>
 </div>
  <div class="note" id="104609">  <div class="votes">
    <div id="Vu104609">
    <a href="https://www.php.net/manual/vote-note.php?id=104609&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd104609">
    <a href="https://www.php.net/manual/vote-note.php?id=104609&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V104609" title="71% like this...">
    19
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#104609" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#104609"> &para;</a><div class="date" title="2011-06-25 02:10"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom104609">
<div class="phpcode"><code><span class="html">Note that fetchAll() can be extremely memory inefficient for large data sets. My memory limit was set to 160 MB this is what happened when I tried:<br /><br /><span class="default">&lt;?php<br />$arr </span><span class="keyword">= </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">();<br /></span><span class="comment">// Fatal error: Allowed memory size of 16777216 bytes exhausted<br /></span><span class="default">?&gt;<br /></span><br />If you are going to loop through the output array of fetchAll(), instead use fetch() to minimize memory usage as follows:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">while (</span><span class="default">$arr </span><span class="keyword">= </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetch</span><span class="keyword">()) {<br />    echo </span><span class="default">round</span><span class="keyword">(</span><span class="default">memory_get_usage</span><span class="keyword">() / (</span><span class="default">1024</span><span class="keyword">*</span><span class="default">1024</span><span class="keyword">),</span><span class="default">3</span><span class="keyword">) .</span><span class="string">' MB&lt;br /&gt;'</span><span class="keyword">;<br />    </span><span class="comment">// do_other_stuff();<br /></span><span class="keyword">}<br /></span><span class="comment">// Last line for the same query shows only 28.973 MB usage<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="115175">  <div class="votes">
    <div id="Vu115175">
    <a href="https://www.php.net/manual/vote-note.php?id=115175&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd115175">
    <a href="https://www.php.net/manual/vote-note.php?id=115175&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V115175" title="69% like this...">
    18
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#115175" class="name">
  <strong class="user"><em>fractalesque at gmail dot com</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#115175"> &para;</a><div class="date" title="2014-06-09 04:05"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom115175">
<div class="phpcode"><code><span class="html">to fetch rows grouped by primary id or any other field you may use FETCH_GROUP with FETCH_UNIQUE:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">//prepare and execute a statement returning multiple rows, on a single one<br /></span><span class="default">$stmt </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(</span><span class="string">'SELECT id,name,role FROM table'</span><span class="keyword">);<br /></span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">();<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_GROUP </span><span class="keyword">| </span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_UNIQUE</span><span class="keyword">));<br /><br /></span><span class="comment">//returns an array with the first selected field as key containing associative arrays with the row. This mode takes care not to repeat the key in corresponding grouped array.<br /><br /></span><span class="default">$result </span><span class="keyword">= array<br /> (</span><span class="default">1 </span><span class="keyword">=&gt; array<br />   (</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'foo'</span><span class="keyword">,<br />    </span><span class="string">'role'</span><span class="keyword">=&gt;</span><span class="string">'sage'</span><span class="keyword">,),<br />  </span><span class="default">2 </span><span class="keyword">=&gt; array<br />   (</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'bar'</span><span class="keyword">,<br />    </span><span class="string">'role'</span><span class="keyword">=&gt;</span><span class="string">'rage'</span><span class="keyword">,),);<br /><br /></span><span class="comment">// 'SELECT name,id,role FROM table' would result in that:<br /><br /></span><span class="default">$result </span><span class="keyword">= array<br /> (</span><span class="string">'foo' </span><span class="keyword">=&gt; array<br />   (</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,<br />    </span><span class="string">'role'</span><span class="keyword">=&gt;</span><span class="string">'sage'</span><span class="keyword">,),<br />  </span><span class="string">'bar' </span><span class="keyword">=&gt; array<br />   (</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">,<br />    </span><span class="string">'role'</span><span class="keyword">=&gt;</span><span class="string">'rage'</span><span class="keyword">,),);<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="114253">  <div class="votes">
    <div id="Vu114253">
    <a href="https://www.php.net/manual/vote-note.php?id=114253&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd114253">
    <a href="https://www.php.net/manual/vote-note.php?id=114253&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V114253" title="71% like this...">
    9
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#114253" class="name">
  <strong class="user"><em>michael dot arnauts at gmail dot com</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#114253"> &para;</a><div class="date" title="2014-01-29 03:59"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom114253">
<div class="phpcode"><code><span class="html">If you want to use PDO::FETCH_CLASS but don't like that all the values are of the type string, you can always use the __construct function of the class specified to convert them to a different type.<br /><br />Another way is using mysqlnd, but it seems I had to recompile PHP for that.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">class </span><span class="default">Cdr </span><span class="keyword">{<br />    public </span><span class="default">$a</span><span class="keyword">; </span><span class="comment">// int<br />    </span><span class="keyword">public </span><span class="default">$b</span><span class="keyword">; </span><span class="comment">// float<br />    </span><span class="keyword">public </span><span class="default">$c</span><span class="keyword">; </span><span class="comment">// string<br />    <br />    </span><span class="keyword">public function </span><span class="default">__construct</span><span class="keyword">() {<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">);<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">b </span><span class="keyword">= </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">b</span><span class="keyword">);<br />    }<br />     <br />}<br /><br /></span><span class="comment">// ...<br /></span><span class="default">$arrCdrs </span><span class="keyword">= </span><span class="default">$objSqlStatement</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_CLASS</span><span class="keyword">, </span><span class="string">'Cdr'</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="80164">  <div class="votes">
    <div id="Vu80164">
    <a href="https://www.php.net/manual/vote-note.php?id=80164&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd80164">
    <a href="https://www.php.net/manual/vote-note.php?id=80164&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V80164" title="64% like this...">
    22
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#80164" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#80164"> &para;</a><div class="date" title="2008-01-01 11:13"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom80164">
<div class="phpcode"><code><span class="html">If no rows have been returned, fetchAll returns an empty array.</span></code></div>
  </div>
 </div>
  <div class="note" id="104740">  <div class="votes">
    <div id="Vu104740">
    <a href="https://www.php.net/manual/vote-note.php?id=104740&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd104740">
    <a href="https://www.php.net/manual/vote-note.php?id=104740&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V104740" title="68% like this...">
    6
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#104740" class="name">
  <strong class="user"><em>Hayley Watson</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#104740"> &para;</a><div class="date" title="2011-07-04 04:48"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom104740">
<div class="phpcode"><code><span class="html">If you use the PDO::FETCH_CLASS | PDO::FETCH_PROPS_LATE flags to map columns to object properties, fetchAll() will use any __set() method your object has when carrying out the mapping.</span></code></div>
  </div>
 </div>
  <div class="note" id="70480">  <div class="votes">
    <div id="Vu70480">
    <a href="https://www.php.net/manual/vote-note.php?id=70480&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd70480">
    <a href="https://www.php.net/manual/vote-note.php?id=70480&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V70480" title="69% like this...">
    5
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#70480" class="name">
  <strong class="user"><em>stas at metalinfo dot ru</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#70480"> &para;</a><div class="date" title="2006-10-18 06:37"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom70480">
<div class="phpcode"><code><span class="html">Note, that you can use PDO::FETCH_COLUMN|PDO::FETCH_GROUP pair only while selecting two columns, not like DB_common::getAssoc(), when grouping is set to true.</span></code></div>
  </div>
 </div>
  <div class="note" id="117980">  <div class="votes">
    <div id="Vu117980">
    <a href="https://www.php.net/manual/vote-note.php?id=117980&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117980">
    <a href="https://www.php.net/manual/vote-note.php?id=117980&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117980" title="66% like this...">
    4
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#117980" class="name">
  <strong class="user"><em>info at yuriblanc dot it</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#117980"> &para;</a><div class="date" title="2015-09-14 12:48"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom117980">
<div class="phpcode"><code><span class="html">Something missing in the doc.<br />If for instance you try to fetchAll(PDO::CLASS, "Class") it sometimes return an array of objects with NULL values, but the count of objects fetched correspond to table rows.<br /><br />In this way works fine:<br />fetchAll(PDO::FETCH_CLASS | PDO::FETCH_PROPS_LATE, "Class");<br /><br />For example<br /><br />$stm = $pdo-&gt;prepare("SELECT * FROM Fruit");<br />$stm-&gt;execute();<br />$stm-&gt;fetchAll(PDO::FETCH_CLASS | PDO::FETCH_PROPS_LATE, "Fruit");</span></code></div>
  </div>
 </div>
  <div class="note" id="120642">  <div class="votes">
    <div id="Vu120642">
    <a href="https://www.php.net/manual/vote-note.php?id=120642&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd120642">
    <a href="https://www.php.net/manual/vote-note.php?id=120642&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V120642" title="66% like this...">
    3
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#120642" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#120642"> &para;</a><div class="date" title="2017-02-14 11:24"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom120642">
<div class="phpcode"><code><span class="html">Be careful when using PDO::FETCH_COLUMN with PDO::FETCH_GROUP. By default, results are grouped by first column (index 0) and second column (index 1) is returned. But, if you provide fetch argument, it wouldn't affect returned column, but grouping column. If grouping column is set explicitly , first columns is returned instead of second.<br /><br /><span class="default">&lt;?php<br />$insert </span><span class="keyword">= </span><span class="default">$dbh</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(</span><span class="string">"INSERT INTO people(id, gender) VALUES (?, ?)"</span><span class="keyword">);<br /></span><span class="default">$insert</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">(array(</span><span class="string">'2'</span><span class="keyword">, </span><span class="string">'female'</span><span class="keyword">));<br /></span><span class="default">$insert</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">(array(</span><span class="string">'3'</span><span class="keyword">, </span><span class="string">'female'</span><span class="keyword">));<br /></span><span class="default">$insert</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">(array(</span><span class="string">'4'</span><span class="keyword">, </span><span class="string">'female'</span><span class="keyword">));<br /></span><span class="default">$insert</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">(array(</span><span class="string">'5'</span><span class="keyword">, </span><span class="string">'male'</span><span class="keyword">));<br /></span><span class="default">$insert</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">(array(</span><span class="string">'6'</span><span class="keyword">, </span><span class="string">'male'</span><span class="keyword">));<br /><br /></span><span class="default">$sth </span><span class="keyword">= </span><span class="default">$dbh</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(</span><span class="string">"SELECT gender, id FROM people"</span><span class="keyword">);<br /></span><span class="default">$sth</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">();<br /><br /></span><span class="comment">/* Group values by the first column */<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$sth</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_COLUMN</span><span class="keyword">|</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_GROUP</span><span class="keyword">));<br /></span><span class="default">?&gt;<br /></span>Returns:<br /><span class="default">&lt;?php<br /></span><span class="keyword">array (</span><span class="default">size</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">)<br />  </span><span class="string">'female' </span><span class="keyword">=&gt; <br />    array (</span><span class="default">size</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">)<br />      </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'2' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />      </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'3' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />      </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'4' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />  </span><span class="string">'male' </span><span class="keyword">=&gt; <br />    array (</span><span class="default">size</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">)<br />      </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'5' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />      </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'6' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br /></span><span class="default">?&gt;<br /></span><br />But, <br /><span class="default">&lt;?php<br />var_dump</span><span class="keyword">(</span><span class="default">$sth</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_COLUMN</span><span class="keyword">|</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_GROUP</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">));<br /></span><span class="default">?&gt;<br /></span>returns:<br /><span class="default">&lt;?php <br /></span><span class="keyword">array (</span><span class="default">size</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">)<br />  </span><span class="string">'female' </span><span class="keyword">=&gt; <br />    array (</span><span class="default">size</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">)<br />      </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'female' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />      </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'female' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />      </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'female' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />  </span><span class="string">'male' </span><span class="keyword">=&gt; <br />    array (</span><span class="default">size</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">)<br />      </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'male' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />      </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'male' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br /></span><span class="default">?&gt;<br /></span>and <br /><span class="default">&lt;?php <br />var_dump</span><span class="keyword">(</span><span class="default">$sth</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_COLUMN</span><span class="keyword">|</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_GROUP</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">));<br /></span><span class="default">?&gt;<br /></span>returns<br /><span class="default">&lt;?php<br /></span><span class="keyword">array (</span><span class="default">size</span><span class="keyword">=</span><span class="default">5</span><span class="keyword">)<br />  </span><span class="default">2 </span><span class="keyword">=&gt; <br />    array (</span><span class="default">size</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />      </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'female' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />  </span><span class="default">3 </span><span class="keyword">=&gt; <br />    array (</span><span class="default">size</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />      </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'female' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />  </span><span class="default">4 </span><span class="keyword">=&gt; <br />    array (</span><span class="default">size</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />      </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'female' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />  </span><span class="default">5 </span><span class="keyword">=&gt; <br />    array (</span><span class="default">size</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />      </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'male' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />  </span><span class="default">6 </span><span class="keyword">=&gt; <br />    array (</span><span class="default">size</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />      </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'male' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br /></span><span class="default">?&gt;<br /></span><br />First column is retuned and grouping is done by provided column index.</span></code></div>
  </div>
 </div>
  <div class="note" id="122299">  <div class="votes">
    <div id="Vu122299">
    <a href="https://www.php.net/manual/vote-note.php?id=122299&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122299">
    <a href="https://www.php.net/manual/vote-note.php?id=122299&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122299" title="63% like this...">
    3
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#122299" class="name">
  <strong class="user"><em>lu_kors</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#122299"> &para;</a><div class="date" title="2018-01-22 08:45"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom122299">
<div class="phpcode"><code><span class="html">You might find yourself wanting to use FETCH_GROUP and FETCH_ASSOC at the same time, to get your table's primary key as the array key - use FETCH_UNIQUE also, or you will probably get some unintended behaivor:<br /><span class="default">&lt;?php<br /></span><span class="comment">// $stmt is some query like "SELECT rowid, username, comment"<br /><br />//with unique<br /></span><span class="default">$results </span><span class="keyword">= </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_GROUP</span><span class="keyword">|</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_ASSOC</span><span class="keyword">|</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_UNIQUE</span><span class="keyword">);<br /></span><span class="default">$results </span><span class="keyword">= array(<br />    </span><span class="default">1234 </span><span class="keyword">=&gt; array(</span><span class="string">'username' </span><span class="keyword">=&gt; </span><span class="string">'abc'</span><span class="keyword">, </span><span class="string">'comment' </span><span class="keyword">=&gt; </span><span class="string">'[...]'</span><span class="keyword">),<br />    </span><span class="default">1235 </span><span class="keyword">=&gt; array(</span><span class="string">'username' </span><span class="keyword">=&gt; </span><span class="string">'def'</span><span class="keyword">, </span><span class="string">'comment' </span><span class="keyword">=&gt; </span><span class="string">'[...]'</span><span class="keyword">),<br />);<br /></span><span class="comment">//without unique <br /></span><span class="default">$results </span><span class="keyword">= </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_GROUP</span><span class="keyword">|</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_ASSOC</span><span class="keyword">);<br /></span><span class="comment">// It does work, but not as you might expect:<br /></span><span class="default">$results </span><span class="keyword">= array(<br />    </span><span class="default">1234 </span><span class="keyword">=&gt; array(</span><span class="default">0 </span><span class="keyword">=&gt; array(</span><span class="string">'username' </span><span class="keyword">=&gt; </span><span class="string">'abc'</span><span class="keyword">, </span><span class="string">'comment' </span><span class="keyword">=&gt; </span><span class="string">'[...]'</span><span class="keyword">)),<br />    </span><span class="default">1235 </span><span class="keyword">=&gt; array(</span><span class="default">0 </span><span class="keyword">=&gt; array(</span><span class="string">'username' </span><span class="keyword">=&gt; </span><span class="string">'def'</span><span class="keyword">, </span><span class="string">'comment' </span><span class="keyword">=&gt; </span><span class="string">'[...]'</span><span class="keyword">)),<br />);<br /></span><span class="default">?&gt;<br /></span>Credit to Ant P. for minimal Example (which i shamelessly copied from the note above me). Thanks a lot!</span></code></div>
  </div>
 </div>
  <div class="note" id="94236">  <div class="votes">
    <div id="Vu94236">
    <a href="https://www.php.net/manual/vote-note.php?id=94236&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd94236">
    <a href="https://www.php.net/manual/vote-note.php?id=94236&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V94236" title="63% like this...">
    3
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#94236" class="name">
  <strong class="user"><em>mxrgus</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#94236"> &para;</a><div class="date" title="2009-10-23 04:22"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom94236">
<div class="phpcode"><code><span class="html">In method body:<br /><br />return $pstmt-&gt;fetchAll() or die("bad");<br /><br />will not return correct value, but "1" instead.</span></code></div>
  </div>
 </div>
  <div class="note" id="83750">  <div class="votes">
    <div id="Vu83750">
    <a href="https://www.php.net/manual/vote-note.php?id=83750&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd83750">
    <a href="https://www.php.net/manual/vote-note.php?id=83750&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V83750" title="59% like this...">
    8
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#83750" class="name">
  <strong class="user"><em>harlequin2 at gmx dot de</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#83750"> &para;</a><div class="date" title="2008-06-10 05:01"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom83750">
<div class="phpcode"><code><span class="html">There is also another fetch mode supported on Oracle and MSSQL: <br />PDO::FETCH_ASSOC<br /><br />&gt; fetches only column names and omits the numeric index.<br /><br />If you would like to return all columns from an sql statement with column keys as table headers, it's as simple as this:<br /><br /><span class="default">&lt;?php<br />$dbh </span><span class="keyword">= new </span><span class="default">PDO</span><span class="keyword">(</span><span class="string">"DS"</span><span class="keyword">, </span><span class="string">"USERNAME"</span><span class="keyword">, </span><span class="string">"PASSWORD"</span><span class="keyword">);<br /></span><span class="default">$stmt </span><span class="keyword">= </span><span class="default">$dbh</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(</span><span class="string">"SELECT * FROM tablename"</span><span class="keyword">);<br /></span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">();<br /></span><span class="default">$arrValues </span><span class="keyword">= </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_ASSOC</span><span class="keyword">);<br /></span><span class="comment">// open the table<br /></span><span class="keyword">print </span><span class="string">"&lt;table wdith=\"100%\"&gt;\n"</span><span class="keyword">;<br />print </span><span class="string">"&lt;tr&gt;\n"</span><span class="keyword">;<br /></span><span class="comment">// add the table headers<br /></span><span class="keyword">foreach (</span><span class="default">$arrValues</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$useless</span><span class="keyword">){<br />    print </span><span class="string">"&lt;th&gt;</span><span class="default">$key</span><span class="string">&lt;/th&gt;"</span><span class="keyword">;<br />}<br />print </span><span class="string">"&lt;/tr&gt;"</span><span class="keyword">;<br /></span><span class="comment">// display data<br /></span><span class="keyword">foreach (</span><span class="default">$arrValues </span><span class="keyword">as </span><span class="default">$row</span><span class="keyword">){<br />    print </span><span class="string">"&lt;tr&gt;"</span><span class="keyword">;<br />    foreach (</span><span class="default">$row </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">){<br />        print </span><span class="string">"&lt;td&gt;</span><span class="default">$val</span><span class="string">&lt;/td&gt;"</span><span class="keyword">;<br />    }<br />    print </span><span class="string">"&lt;/tr&gt;\n"</span><span class="keyword">;<br />}<br /></span><span class="comment">// close the table<br /></span><span class="keyword">print </span><span class="string">"&lt;/table&gt;\n"</span><span class="keyword">;<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="86710">  <div class="votes">
    <div id="Vu86710">
    <a href="https://www.php.net/manual/vote-note.php?id=86710&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd86710">
    <a href="https://www.php.net/manual/vote-note.php?id=86710&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V86710" title="56% like this...">
    2
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#86710" class="name">
  <strong class="user"><em>mrshelly at hotmail dot com</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#86710"> &para;</a><div class="date" title="2008-10-30 07:27"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom86710">
<div class="phpcode"><code><span class="html">PHP fetchAll Data From SQL Server 2005 <br />if field's data type is varchar(nvarchar), only fetch 255 chars. but the "text" data type is ok.<br /><br />so, notice! to change the 'varchar' or 'nvarchar' (length &gt; 255) to 'text' data type..<br /><br />hope to help u.<br /><br /><span class="default">&lt;?php<br /><br />$user </span><span class="keyword">= </span><span class="string">'sa'</span><span class="keyword">;<br /></span><span class="default">$pass </span><span class="keyword">= </span><span class="string">'pass'</span><span class="keyword">;<br /><br /></span><span class="default">$conn </span><span class="keyword">= new </span><span class="default">PDO</span><span class="keyword">(</span><span class="string">'mssql:host=127.0.0.1; dbname=tempdb;'</span><span class="keyword">, </span><span class="default">$user</span><span class="keyword">, </span><span class="default">$pass</span><span class="keyword">);<br /><br /></span><span class="default">$mainSQL </span><span class="keyword">= </span><span class="string">"SELECT field_varchar, field_text FROM table1"</span><span class="keyword">;<br /></span><span class="default">$sth </span><span class="keyword">= </span><span class="default">$conn</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(</span><span class="default">$mainSQL</span><span class="keyword">);<br /></span><span class="default">$sth</span><span class="keyword">-&gt;</span><span class="default">setFetchMode</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_ASSOC</span><span class="keyword">);<br /></span><span class="default">$sth</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">();<br /></span><span class="default">$retRows </span><span class="keyword">= </span><span class="default">$sth</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">();<br /></span><span class="comment">// the field_varchar field only to fetch 255 chars(max)<br />// the field_text is ok.<br /><br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$retRows</span><span class="keyword">);<br /><br />unset(</span><span class="default">$sth</span><span class="keyword">); unset(</span><span class="default">$conn</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="98359">  <div class="votes">
    <div id="Vu98359">
    <a href="https://www.php.net/manual/vote-note.php?id=98359&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd98359">
    <a href="https://www.php.net/manual/vote-note.php?id=98359&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V98359" title="55% like this...">
    2
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#98359" class="name">
  <strong class="user"><em>Dennis</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#98359"> &para;</a><div class="date" title="2010-06-10 08:51"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom98359">
<div class="phpcode"><code><span class="html">Error:<br />SQLSTATE[HY000]: General error: 2014 Cannot execute queries while other unbuffered queries are active. Consider using PDOStatement::fetchAll(). Alternatively, if your code is only ever going to run against mysql, you may enable query buffering by setting the PDO::MYSQL_ATTR_USE_BUFFERED_QUERY attribute.<br /><br />If you're using something like:<br /><br />while ($row = $query-&gt;fetchObject()) {<br />    [...]<br />}<br /><br />try using this instead:<br /><br />$rows = $query-&gt;fetchAll(PDO::FETCH_CLASS, 'ArrayObject');<br /><br />foreach ($rows as $row) {<br />    [...]<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="116870">  <div class="votes">
    <div id="Vu116870">
    <a href="https://www.php.net/manual/vote-note.php?id=116870&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116870">
    <a href="https://www.php.net/manual/vote-note.php?id=116870&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116870" title="54% like this...">
    2
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#116870" class="name">
  <strong class="user"><em>akira at etnforum dot com</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#116870"> &para;</a><div class="date" title="2015-03-13 07:41"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom116870">
<div class="phpcode"><code><span class="html">There may be some user who needs to upgrade their MySQL class to PDO class. The way of fetching results were changed from while loop into a foreach loop. For the people who wish to fetch the results in a while loop, here is a simple trick.<br /><br /><span class="default">&lt;?php<br /><br />$db </span><span class="keyword">= new </span><span class="default">DB</span><span class="keyword">();<br /></span><span class="default">$query </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(</span><span class="string">"SELECT * FROM CPUCategory"</span><span class="keyword">);<br /></span><span class="default">$query </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">();<br /></span><span class="default">$result </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">();<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;<br /></span><br />The Output will be:<br />array(2) {<br />    [0]=&gt; array(2) {<br />        ["ccatid"]=&gt; int(1)<br />        ["ccatname"]=&gt; string(5) "Intel"<br />    }<br />    [1]=&gt; array(2) {<br />        ["ccatid"]=&gt; int(2) <br />        ["ccatname"]=&gt; string(3) "AMD"<br />    }<br />}<br /><br />Never look like the output of old function.<br />[ORIGINAL STYLE] mysql_fetch_array($query)<br />[   MYSQL CLASS] $db-&gt;fetch_array($query)<br /><br />And you may give up.<br />But there is a simple way to use while loop to fetch the results.<br /><br /><span class="default">&lt;?php<br /><br />$db </span><span class="keyword">= new </span><span class="default">DB</span><span class="keyword">();<br /></span><span class="default">$query </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(</span><span class="string">"SELECT * FROM CPUCategory"</span><span class="keyword">);<br /></span><span class="default">$query </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">();<br /></span><span class="default">$result </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">();<br /></span><span class="default">$row </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br /></span><span class="comment">// If you need to fetch them now, put it in a while loop just like below:<br />// while($row = array_shift($result)) { ... }<br />    <br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;<br /></span><br />The Output will be in a single array with while loop returns TRUE:<br />array(2) {<br />    ["ccatid"]=&gt; int(1)<br />    ["ccatname"]=&gt; string(5) "Intel"<br />}<br /><br />So after fetching this row, while loop runs again and fetch the next row until all row has fetched, then the while loop will return false. (Just like the old function did)<br /><br />When you need to upgrade to PDO class, not much code needs to be modified and remember.</span></code></div>
  </div>
 </div>
  <div class="note" id="128008">  <div class="votes">
    <div id="Vu128008">
    <a href="https://www.php.net/manual/vote-note.php?id=128008&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd128008">
    <a href="https://www.php.net/manual/vote-note.php?id=128008&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V128008" title="100% like this...">
    1
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#128008" class="name">
  <strong class="user"><em>shaunc</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#128008"> &para;</a><div class="date" title="2022-12-11 12:14"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom128008">
<div class="phpcode"><code><span class="html">Note that \PDO::FETCH_DEFAULT was not introduced until PHP 8.0.7 and 8.1.0. It will throw an undefined constant error in earlier versions.</span></code></div>
  </div>
 </div>
  <div class="note" id="126195">  <div class="votes">
    <div id="Vu126195">
    <a href="https://www.php.net/manual/vote-note.php?id=126195&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd126195">
    <a href="https://www.php.net/manual/vote-note.php?id=126195&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V126195" title="100% like this...">
    1
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#126195" class="name">
  <strong class="user"><em>php at erikthiart dot com</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#126195"> &para;</a><div class="date" title="2021-06-25 11:21"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom126195">
<div class="phpcode"><code><span class="html">I am adding this here as I don’t seem to find any clear and easy to find examples and explanations of PDO::FETCH_GROUP and how it works by means of an example.<br /><br />I find this to be one of the most useful modes available in fetchAll() when you need to work with any form of grouping.<br /><br />In essence, PDO can group results into nested arrays, based on the first field selected.<br /><br />Example<br /><br /><span class="default">&lt;?php<br /><br />$data </span><span class="keyword">= </span><span class="default">$pdo</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">'SELECT sex, name, car FROM users'</span><span class="keyword">)-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_GROUP</span><span class="keyword">);<br /><br /></span><span class="comment">/* array (<br />  'male' =&gt; array ( 0 =&gt; <br />    array (<br />      'name' =&gt; 'John',<br />      'car' =&gt; 'Toyota',<br />    ),<br />    1 =&gt; array (<br />      'name' =&gt; 'Mike',<br />      'car' =&gt; 'Ford',<br />    ),<br />  ),<br />  'female' =&gt; array (<br />    0 =&gt; array (<br />      'name' =&gt; 'Mary',<br />      'car' =&gt; 'Mazda',<br />    ),<br />    1 =&gt; array (<br />      'name' =&gt; 'Kathy',<br />      'car' =&gt; 'Mazda',<br />    ),<br />  ),<br />) */<br /><br /></span><span class="default">?&gt;<br /></span><br />Tip: If you need to group the data by something other than the first field then you can do it like this as well<br /><br /><span class="default">&lt;?php<br />SELECT sex</span><span class="keyword">, </span><span class="default">users</span><span class="keyword">.* </span><span class="default">FROM users<br />?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="125597">  <div class="votes">
    <div id="Vu125597">
    <a href="https://www.php.net/manual/vote-note.php?id=125597&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd125597">
    <a href="https://www.php.net/manual/vote-note.php?id=125597&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V125597" title="50% like this...">
    0
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#125597" class="name">
  <strong class="user"><em>herhor67 at interia dot pl</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#125597"> &para;</a><div class="date" title="2020-12-12 10:00"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom125597">
<div class="phpcode"><code><span class="html">I noticed quite a weird (at least for me) behaviour. Maybe it can help someone who will struggle with this too.<br /><br /><span class="default">&lt;?php<br />$stmt </span><span class="keyword">= new </span><span class="default">PDOStatement</span><span class="keyword">();<br /></span><span class="default">$foo  </span><span class="keyword">= </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">();<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">);<br /><br /></span><span class="default">$stmt </span><span class="keyword">= </span><span class="default">$pdo</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(</span><span class="string">'SELECT VERSION()'</span><span class="keyword">);<br /></span><span class="default">$foo  </span><span class="keyword">= </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">();<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">);<br /><br /></span><span class="default">$stmt </span><span class="keyword">= </span><span class="default">$pdo</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(</span><span class="string">"INSERT INTO `tblnm` (date) VALUES (NOW())"</span><span class="keyword">);<br /></span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">();<br /></span><span class="default">$foo  </span><span class="keyword">= </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">();<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">);<br /><br /></span><span class="default">$stmt </span><span class="keyword">= </span><span class="default">$pdo</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">"INSERT INTO `tblnm` (date) VALUES (NOW())"</span><span class="keyword">);<br /></span><span class="default">$foo  </span><span class="keyword">= </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">();<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />The first is just an empty object, so $foo === bool(false)<br />The second one is not executed, so $foo === array(0) {}<br />The third and fourth throw exception at fetchAll():<br />"General error: 2014 Cannot execute queries while other unbuffered queries are active. Consider using PDOStatement::fetchAll(). Alternatively, [...] you may enable query buffering by setting the PDO::MYSQL_ATTR_USE_BUFFERED_QUERY attribute."<br /><br />fetchAll() is already used, and changing the above attribute between true and false changes nothing.<br />This is probably caused by the INSERT not having any return value. We could use RETURNING in the sql, but it's quite new, so may not yet be supported everywhere.<br /><br />What finally worked for me, was $pdo-&gt;exec() and lastInsertId(), because ID is the only column I needed anyway.<br /><span class="default">&lt;?php<br />$count </span><span class="keyword">= </span><span class="default">$pdo</span><span class="keyword">-&gt;</span><span class="default">exec</span><span class="keyword">(</span><span class="string">'INSERT INTO `tblnm` (date) VALUES (NOW())'</span><span class="keyword">);<br /></span><span class="default">$foo </span><span class="keyword">= </span><span class="default">$pdo</span><span class="keyword">-&gt;</span><span class="default">lastInsertId</span><span class="keyword">();<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span>Then e.g. $foo === string(2) "93"</span></code></div>
  </div>
 </div>
  <div class="note" id="125561">  <div class="votes">
    <div id="Vu125561">
    <a href="https://www.php.net/manual/vote-note.php?id=125561&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd125561">
    <a href="https://www.php.net/manual/vote-note.php?id=125561&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V125561" title="50% like this...">
    0
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#125561" class="name">
  <strong class="user"><em>geompse at gmail dot com</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#125561"> &para;</a><div class="date" title="2020-12-02 10:28"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom125561">
<div class="phpcode"><code><span class="html">There is a breaking change upgrading from PHP&lt;7.4 to PHP 8.0. If your class extend PDOStatement, the PHP 8.0 typed prototype is incompatible :<br />- PHP 7.4 = public PDOStatement::fetchAll ([ int $fetch_style [, mixed $fetch_argument [, array $ctor_args = array() ]]] ) : array<br />- PHP 8.0 = public PDOStatement::fetchAll ([ int $mode = PDO::FETCH_BOTH[, mixed ...$args] ]) : array<br /><br />While they are compatible for a human being, PHP is not enjoying it :<br />- PHP 7.4 = PHP Warning: Declaration of (your class prototype) should be compatible with (PDOStatement's prototype)<br />- PHP 8.0 = [PhpCompileError] Declaration of (your class prototype) must be comptable with (PDOStatement's prototype)<br /><br />Because the first one is a warning, it is not fatal, and you might be happy using PHP 8.0's prototype. My personal solution was to stop extending PDOStatement and thus rewrite associated typing declarations and conditions.</span></code></div>
  </div>
 </div>
  <div class="note" id="124093">  <div class="votes">
    <div id="Vu124093">
    <a href="https://www.php.net/manual/vote-note.php?id=124093&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd124093">
    <a href="https://www.php.net/manual/vote-note.php?id=124093&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V124093" title="50% like this...">
    0
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#124093" class="name">
  <strong class="user"><em>Leonardo Costa linux at linuxmanbr dot com dot br</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#124093"> &para;</a><div class="date" title="2019-08-05 09:08"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom124093">
<div class="phpcode"><code><span class="html">Method with Return object (PHP 7.2)<br /><br />class MySql {<br /><br />public function __construct()<br />        {<br />            parent::__construct();<br />            <br />            try{<br /><br />    <br />                <br />                $options = array<br />                (<br />                    PDO::MYSQL_ATTR_INIT_COMMAND =&gt; "SET NAMES UTF8"<br />                );<br />                <br />                $this-&gt;pdo = new PDO('mysql:host=127.0.0.1;dbname=testuser','dbtest', 'xxxxxxx',$options);<br />                $this-&gt;pdo-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);<br />                <br />            }catch(PDOException $e) {<br />                print "Error!: " . $e-&gt;getMessage() . "&lt;br/&gt;";<br />                die();<br />            }<br />        }<br />        <br />        public function selectAll(string $sql)<br />        {<br />            $conn = $this-&gt;pdo-&gt;query($sql);<br />            return $conn-&gt;fetchAll(PDO::FETCH_OBJ);<br />        }<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="122665">  <div class="votes">
    <div id="Vu122665">
    <a href="https://www.php.net/manual/vote-note.php?id=122665&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122665">
    <a href="https://www.php.net/manual/vote-note.php?id=122665&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122665" title="50% like this...">
    0
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#122665" class="name">
  <strong class="user"><em>rudigerw at hotmail dot com</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#122665"> &para;</a><div class="date" title="2018-04-26 09:36"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom122665">
<div class="phpcode"><code><span class="html">I was blown away that you can actually combine PDO::FETCH_CLASS | PDO::FETCH_CLASSTYPE | PDO::FETCH_UNIQUE, because both PDO::FETCH_CLASSTYPE and PDO::FETCH_UNIQUE say they will use the first column, but it turns out PDO::FETCH_CLASSTYPE goes first and then PDO::FETCH_UNIQUE will use the next column. This way you can create an associative array of objects, with one of the table columns as key. For example a query such as<br /><br /> 'SELECT Class, Id, t.* FROM subscriptions_tbl t'<br /><br />might give you this result:<br /><br />Array<br />(<br />    [20481086] =&gt; WConsumerSubscription Object<br />        (<br />            [Variant] =&gt; 2<br />            [_Expiration:WSubscriptionModel:private] =&gt; DateTime Object<br />                (<br />                    [date] =&gt; 2018-08-08 00:00:00.000000<br />                    [timezone_type] =&gt; 3<br />                    [timezone] =&gt; UTC<br />                )<br /><br />            [Notes] =&gt; <br />            [Id] =&gt; 20481086<br />            [_Deleted:protected] =&gt; 0<br />            [_VersionNo:protected] =&gt; 2<br />            [ContactId] =&gt; <br />            [ConsumerId] =&gt; 2<br />        )<br /><br />    [21878324] =&gt; WAdminSubscription Object<br />        (<br />            [Variant] =&gt; <br />            [_Expiration:WSubscriptionModel:private] =&gt; <br />            [Notes] =&gt; <br />            [Id] =&gt; 21878324<br />            [_Deleted:protected] =&gt; 0<br />            [_VersionNo:protected] =&gt; 1<br />            [ContactId] =&gt; <br />        )<br />)</span></code></div>
  </div>
 </div>
  <div class="note" id="123956">  <div class="votes">
    <div id="Vu123956">
    <a href="https://www.php.net/manual/vote-note.php?id=123956&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123956">
    <a href="https://www.php.net/manual/vote-note.php?id=123956&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123956" title="0% like this...">
    -1
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#123956" class="name">
  <strong class="user"><em>sidi dot khalifa at live dot fr</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#123956"> &para;</a><div class="date" title="2019-06-19 09:02"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom123956">
<div class="phpcode"><code><span class="html">Inject the parameters directly into `fetchAll` instead of using `bindValue`<br /><br />$query  = "<br />            SELECT <br />                    a.total_paid_tax_incl AS prize, <br />                    a.date_add AS date_add<br />            FROM orders a <br />            WHERE a.order_id = :seventeen <br />                   AND a.name = :name";<br /><br />// connection (Example in Symfony you use class Connection in namespace Doctrine\DBAL\Connection)<br />$this-&gt;connection-&gt;fetchAll($query, ['seventeen' =&gt; 70, 'name' =&gt; 'Sidi'])</span></code></div>
  </div>
 </div>
  <div class="note" id="120175">  <div class="votes">
    <div id="Vu120175">
    <a href="https://www.php.net/manual/vote-note.php?id=120175&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd120175">
    <a href="https://www.php.net/manual/vote-note.php?id=120175&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V120175" title="50% like this...">
    0
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#120175" class="name">
  <strong class="user"><em>jeroen dot deklerk at hotmail dot com</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#120175"> &para;</a><div class="date" title="2016-11-16 11:47"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom120175">
<div class="phpcode"><code><span class="html">I was having trouble with returning PDO query results in arrays, due to the structure of the results of those queries (query array with arrays for results inside). Now when executing a fetchAll() on a query you get the following: <br /><br />Array ( [0] = Array ( [key1] =&gt; "value1", [key2] =&gt; "value2") [1] = Array( [key1] =&gt; "value1", [key2] =&gt; "value2") )<br /><br />This is a smaller array, but return results in a HUGE database this way and it quickly becomes IMPPOSIBRU to read out the array given.<br /><br />This is where the glorious foreach comes in! We all know the basic writing of a foreach (foreach ($array as $key =&gt; $value) {...}), but with query results there's a twist, as both the $key AND $value variables are arrays, where $key is the array of the query containing the result arrays and $value is/are the result array(s) themselves.<br /><br />So in this foreach we have to talk directly to $value to get our results! This would look something like this:<br /><br /><span class="default">&lt;?php<br /><br />  </span><span class="keyword">foreach (</span><span class="default">$query </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />      return </span><span class="default">$value</span><span class="keyword">[</span><span class="string">"key2"</span><span class="keyword">];<br />  }<br /><br /></span><span class="default">?&gt;<br /></span><br />This already does the job, but to return them in arrays we have to change our return code a little bit, like so:<br /><br /><span class="default">&lt;?php<br /><br />   </span><span class="keyword">foreach (</span><span class="default">$query </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />      return array (<br />             </span><span class="string">"key1" </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">[</span><span class="string">"key1"</span><span class="keyword">],<br />             </span><span class="string">"key2" </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">[</span><span class="string">"key2"</span><span class="keyword">]<br />      );<br />   }<br /><br /></span><span class="default">?&gt;<br /></span><br />This foreach loops through the query array, just like the firs one, but the return code just doesn't return the keys representing the result arrays ($key) and returns only keys from inside the result arrays,  stored in $value. This gives us an array looking like this:<br /><br />Array ( [key1] =&gt; "value1", [key2] =&gt; "value2")<br /><br />This should return all the values in your array, if written properly. I'm still having problems with the foreach not returning ALL results, but this note was mainly to show how it can be returned in an array.</span></code></div>
  </div>
 </div>
  <div class="note" id="116004">  <div class="votes">
    <div id="Vu116004">
    <a href="https://www.php.net/manual/vote-note.php?id=116004&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116004">
    <a href="https://www.php.net/manual/vote-note.php?id=116004&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116004" title="47% like this...">
    -2
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#116004" class="name">
  <strong class="user"><em>janniet at kiekies dot net</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#116004"> &para;</a><div class="date" title="2014-10-27 02:30"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom116004">
<div class="phpcode"><code><span class="html">If you want to fetch rows as an object for which you have not defined a class, you can do:<br /><span class="default">&lt;?php<br />$result </span><span class="keyword">= </span><span class="default">$q</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_OBJ</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="86769">  <div class="votes">
    <div id="Vu86769">
    <a href="https://www.php.net/manual/vote-note.php?id=86769&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd86769">
    <a href="https://www.php.net/manual/vote-note.php?id=86769&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V86769" title="47% like this...">
    -1
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#86769" class="name">
  <strong class="user"><em>davey at php dot net</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#86769"> &para;</a><div class="date" title="2008-11-02 06:54"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom86769">
<div class="phpcode"><code><span class="html">When passing PDO::FETCH_CLASS as the first argument, this method will accept the class name as the second option:<br /><br /><span class="default">&lt;?php<br />$query </span><span class="keyword">= </span><span class="default">$pdo</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(</span><span class="default">$sql</span><span class="keyword">);<br /><br /></span><span class="default">$result </span><span class="keyword">= </span><span class="default">$query</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">);<br /><br />if (</span><span class="default">$result </span><span class="keyword">&amp;&amp; </span><span class="default">$query</span><span class="keyword">-&gt;</span><span class="default">rowCount</span><span class="keyword">() &gt; </span><span class="default">0</span><span class="keyword">) {<br />    </span><span class="default">$records </span><span class="keyword">= </span><span class="default">$query</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_CLASS</span><span class="keyword">, </span><span class="string">'Some_Class'</span><span class="keyword">);<br />    </span><span class="comment">// $record is now an array of Some_Class objects<br /></span><span class="keyword">}<br /></span><span class="default">?&gt;<br /></span><br />- Davey</span></code></div>
  </div>
 </div>
  <div class="note" id="108796">  <div class="votes">
    <div id="Vu108796">
    <a href="https://www.php.net/manual/vote-note.php?id=108796&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd108796">
    <a href="https://www.php.net/manual/vote-note.php?id=108796&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V108796" title="42% like this...">
    -3
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#108796" class="name">
  <strong class="user"><em>ramon at monztro dot com</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#108796"> &para;</a><div class="date" title="2012-05-25 04:18"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom108796">
<div class="phpcode"><code><span class="html">If you are trying to call PDOStatement::fetchAll and is not getting the result set as expected (empty instead), check if you called PDOStatement::execute first.<br /><br />Remember PDOStatement::fetchAll does not execute the query, it just mounts the array. <br /><br />:)</span></code></div>
  </div>
 </div>
  <div class="note" id="115164">  <div class="votes">
    <div id="Vu115164">
    <a href="https://www.php.net/manual/vote-note.php?id=115164&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd115164">
    <a href="https://www.php.net/manual/vote-note.php?id=115164&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V115164" title="38% like this...">
    -6
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#115164" class="name">
  <strong class="user"><em>GyoreG</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#115164"> &para;</a><div class="date" title="2014-06-05 09:14"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom115164">
<div class="phpcode"><code><span class="html">If you would like to get the result as "key-value-pairs", like:<br /><br />Array(<br />    [key1] =&gt; "value1"<br />    [key2] =&gt; "value2"<br />)<br /><br />then you can do it by calling fetchAll with PDO::FETCH_GROUP | PDO::FETCH_COLUMN parameters. <br /><br /><span class="default">&lt;?php<br />  $result </span><span class="keyword">= </span><span class="default">$query</span><span class="keyword">-&gt;</span><span class="default">fetchAll</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_GROUP</span><span class="keyword">|</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">FETCH_COLUMN</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="118231">  <div class="votes">
    <div id="Vu118231">
    <a href="https://www.php.net/manual/vote-note.php?id=118231&amp;page=pdostatement.fetchall&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd118231">
    <a href="https://www.php.net/manual/vote-note.php?id=118231&amp;page=pdostatement.fetchall&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V118231" title="11% like this...">
    -13
    </div>
  </div>
  <a href="pdostatement.fetchall.php.html#118231" class="name">
  <strong class="user"><em>Dean S.</em></strong></a><a class="genanchor" href="pdostatement.fetchall.php.html#118231"> &para;</a><div class="date" title="2015-10-30 08:38"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom118231">
<div class="phpcode"><code><span class="html">Using fetchAll() with the fetch types PDO::FETCH_GROUP and PDO::FETCH_ASSOC, PDO::FETCH_CLASS will always use the first column in the selected table as the key for the row in the output...</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=pdostatement.fetchall&amp;redirect=https://www.php.net/manual/ru/pdostatement.fetchall.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="class.pdostatement.php.html">PDOStatement</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="pdostatement.bindcolumn.php.html" title="bindColumn">bindColumn</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.bindparam.php.html" title="bindParam">bindParam</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.bindvalue.php.html" title="bindValue">bindValue</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.closecursor.php.html" title="closeCursor">closeCursor</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.columncount.php.html" title="columnCount">columnCount</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.debugdumpparams.php.html" title="debugDumpParams">debugDumpParams</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.errorcode.php.html" title="errorCode">errorCode</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.errorinfo.php.html" title="errorInfo">errorInfo</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.execute.php.html" title="execute">execute</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.fetch.php.html" title="fetch">fetch</a>
                        </li>
                                                <li class="current">
                            <a href="pdostatement.fetchall.php.html" title="fetchAll">fetchAll</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.fetchcolumn.php.html" title="fetchColumn">fetchColumn</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.fetchobject.php.html" title="fetchObject">fetchObject</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.getattribute.php.html" title="getAttribute">getAttribute</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.getcolumnmeta.php.html" title="getColumnMeta">getColumnMeta</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.getiterator.php.html" title="getIterator">getIterator</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.nextrowset.php.html" title="nextRowset">nextRowset</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.rowcount.php.html" title="rowCount">rowCount</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.setattribute.php.html" title="setAttribute">setAttribute</a>
                        </li>
                                                <li class="">
                            <a href="pdostatement.setfetchmode.php.html" title="setFetchMode">setFetchMode</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
