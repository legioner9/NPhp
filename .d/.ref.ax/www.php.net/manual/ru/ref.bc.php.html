<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: Функции BC Math - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="ref.bc.php.html">
 <link rel="shorturl" href="https://www.php.net/bc">
 <link rel="alternate" href="https://www.php.net/bc" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="book.bc.php.html">
 <link rel="prev" href="bc.constants.php.html">
 <link rel="next" href="function.bcadd.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/ref.bc.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/ref.bc.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/ref.bc.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/ref.bc.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/ref.bc.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/ref.bc.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/ref.bc.php" hreflang="pt_BR">
 <link rel="alternate" href="ref.bc.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/ref.bc.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/ref.bc.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.bcadd.php.html">
          bcadd &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="bc.constants.php.html">
          &laquo; Предопределённые константы        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.math.php.html'>Математические модули</a></li>      <li><a href='book.bc.php.html'>BC Math</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/ref.bc.php'>English</option>
            <option value='de/ref.bc.php'>German</option>
            <option value='es/ref.bc.php'>Spanish</option>
            <option value='fr/ref.bc.php'>French</option>
            <option value='it/ref.bc.php'>Italian</option>
            <option value='ja/ref.bc.php'>Japanese</option>
            <option value='pt_BR/ref.bc.php'>Brazilian Portuguese</option>
            <option value='ru/ref.bc.php' selected="selected">Russian</option>
            <option value='tr/ref.bc.php'>Turkish</option>
            <option value='zh/ref.bc.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/bc/reference.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Fref.bc%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="ref.bc" class="reference">
 <h1 class="title">Функции BC Math</h1>

 





























































<h2>Содержание</h2><ul class="chunklist chunklist_reference"><li><a href="function.bcadd.php.html">bcadd</a> — Сложить 2 числа произвольной точности</li><li><a href="function.bccomp.php.html">bccomp</a> — Сравнение двух чисел произвольной точности</li><li><a href="function.bcdiv.php.html">bcdiv</a> — Операция деления для чисел произвольной точности</li><li><a href="function.bcmod.php.html">bcmod</a> — Получает остаток от деления чисел с произвольной точностью</li><li><a href="function.bcmul.php.html">bcmul</a> — Умножение двух чисел с произвольной точностью</li><li><a href="function.bcpow.php.html">bcpow</a> — Возведение в степень чисел с произвольной точностью</li><li><a href="function.bcpowmod.php.html">bcpowmod</a> — Возводит одно число в степень другого и возвращает остаток от деления
   результата на третье число</li><li><a href="function.bcscale.php.html">bcscale</a> — Устанавливает или получает количество чисел после десятичной точки по умолчанию для всех
   функций bc math.</li><li><a href="function.bcsqrt.php.html">bcsqrt</a> — Извлекает квадратный корень из числа с заданной точностью</li><li><a href="function.bcsub.php.html">bcsub</a> — Вычитает одно число из другого с заданной точностью</li></ul>
</div>
<section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=ref.bc&amp;redirect=https://www.php.net/manual/ru/ref.bc.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">20 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="82155">  <div class="votes">
    <div id="Vu82155">
    <a href="https://www.php.net/manual/vote-note.php?id=82155&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd82155">
    <a href="https://www.php.net/manual/vote-note.php?id=82155&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V82155" title="67% like this...">
    23
    </div>
  </div>
  <a href="ref.bc.php.html#82155" class="name">
  <strong class="user"><em>Bouke Haarsma</em></strong></a><a class="genanchor" href="ref.bc.php.html#82155"> &para;</a><div class="date" title="2008-03-29 03:40"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom82155">
<div class="phpcode"><code><span class="html">Please be aware not to use/have spaces in your strings. It took me a while to find the error in some advanced calculations!<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">echo </span><span class="default">bcadd</span><span class="keyword">(</span><span class="string">"1"</span><span class="keyword">, </span><span class="string">"2"</span><span class="keyword">); </span><span class="comment">// 3<br /></span><span class="keyword">echo </span><span class="default">bcadd</span><span class="keyword">(</span><span class="string">"1"</span><span class="keyword">, </span><span class="string">"2 "</span><span class="keyword">); </span><span class="comment">// 1<br /></span><span class="keyword">echo </span><span class="default">bcadd</span><span class="keyword">(</span><span class="string">"1"</span><span class="keyword">, </span><span class="string">" 2"</span><span class="keyword">); </span><span class="comment">// 1<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="107014">  <div class="votes">
    <div id="Vu107014">
    <a href="https://www.php.net/manual/vote-note.php?id=107014&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd107014">
    <a href="https://www.php.net/manual/vote-note.php?id=107014&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V107014" title="64% like this...">
    10
    </div>
  </div>
  <a href="ref.bc.php.html#107014" class="name">
  <strong class="user"><em>dawidgarus at gmail dot com</em></strong></a><a class="genanchor" href="ref.bc.php.html#107014"> &para;</a><div class="date" title="2011-12-28 10:22"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom107014">
<div class="phpcode"><code><span class="html">If you too are confused with illegible code like this:<br /><span class="default">&lt;?php<br />$a </span><span class="keyword">= </span><span class="string">"3"</span><span class="keyword">;<br /></span><span class="default">$b </span><span class="keyword">= </span><span class="string">"5"</span><span class="keyword">;<br /></span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">bcmod</span><span class="keyword">(</span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">bcdiv</span><span class="keyword">(</span><span class="default">bcsqrt</span><span class="keyword">(</span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">7</span><span class="keyword">, </span><span class="default">bcpow</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">))), </span><span class="default">4</span><span class="keyword">), </span><span class="default">$b</span><span class="keyword">), </span><span class="string">"4"</span><span class="keyword">), </span><span class="string">"0.5"</span><span class="keyword">); </span><span class="comment">// i might made a mistake somewhere<br /></span><span class="default">?&gt;<br /></span><br />You may consider use my function, which makes example above look:<br /><span class="default">&lt;?php<br />bc</span><span class="keyword">(</span><span class="string">"(sqrt(7 + $1^2) / 4 + $2) % 4 + 0.5"</span><span class="keyword">, </span><span class="string">"3"</span><span class="keyword">, </span><span class="string">"5"</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />Code:<br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">function </span><span class="default">bc</span><span class="keyword">() {<br />        </span><span class="default">$functions </span><span class="keyword">= </span><span class="string">'sqrt'</span><span class="keyword">;<br />        </span><span class="comment">// list of | separated functions<br />        // sqrt refer to bcsqrt etc.<br />        // function must take exactly 1 argument<br /><br />        </span><span class="default">$argv </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />        </span><span class="default">$string </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="string">'('</span><span class="keyword">.</span><span class="default">$argv</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="string">')'</span><span class="keyword">);<br />        </span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\$([0-9\.]+)/e'</span><span class="keyword">, </span><span class="string">'$argv[$1]'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />        while (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/(('</span><span class="keyword">.</span><span class="default">$functions</span><span class="keyword">.</span><span class="string">')?)\(([^\)\(]*)\)/'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">)) {<br />                while (<br />                        </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/([0-9\.]+)(\^)([0-9\.]+)/'</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">) ||<br />                        </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/([0-9\.]+)([\*\/\%])([0-9\.]+)/'</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">) ||<br />                        </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/([0-9\.]+)([\+\-])([0-9\.]+)/'</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">)<br />                ) {<br />                        switch(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]) {<br />                                case </span><span class="string">'+'</span><span class="keyword">: </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]); break;<br />                                case </span><span class="string">'-'</span><span class="keyword">: </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bcsub</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]); break;<br />                                case </span><span class="string">'*'</span><span class="keyword">: </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bcmul</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]); break;<br />                                case </span><span class="string">'/'</span><span class="keyword">: </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bcdiv</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]); break;<br />                                case </span><span class="string">'%'</span><span class="keyword">: </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bcmod</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]); break;<br />                                case </span><span class="string">'^'</span><span class="keyword">: </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bcpow</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]); break;<br />                        }<br />                        </span><span class="default">$match</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] = </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$result</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]);<br />                }<br />                if (!empty(</span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) &amp;&amp; </span><span class="default">function_exists</span><span class="keyword">(</span><span class="default">$func </span><span class="keyword">= </span><span class="string">'bc'</span><span class="keyword">.</span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]))  {<br />                        </span><span class="default">$match</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] = </span><span class="default">$func</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]);<br />                }<br />                </span><span class="default">$string </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$match</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">], </span><span class="default">$string</span><span class="keyword">);<br />        }<br />        return </span><span class="default">$string</span><span class="keyword">;<br />}<br /><br /></span><span class="default">?&gt;<br /></span><br />Note you must define scale with bcscale().</span></code></div>
  </div>
 </div>
  <div class="note" id="99130">  <div class="votes">
    <div id="Vu99130">
    <a href="https://www.php.net/manual/vote-note.php?id=99130&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd99130">
    <a href="https://www.php.net/manual/vote-note.php?id=99130&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V99130" title="59% like this...">
    12
    </div>
  </div>
  <a href="ref.bc.php.html#99130" class="name">
  <strong class="user"><em>artefact2 at gmail dot com</em></strong></a><a class="genanchor" href="ref.bc.php.html#99130"> &para;</a><div class="date" title="2010-07-29 06:18"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom99130">
<div class="phpcode"><code><span class="html">Here are some useful functions to convert large hex numbers from and to large decimal ones :<br /><br /><span class="default">&lt;?php<br />    </span><span class="keyword">public static function </span><span class="default">bchexdec</span><span class="keyword">(</span><span class="default">$hex</span><span class="keyword">) {<br />        if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$hex</span><span class="keyword">) == </span><span class="default">1</span><span class="keyword">) {<br />            return </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">$hex</span><span class="keyword">);<br />        } else {<br />            </span><span class="default">$remain </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$hex</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">);<br />            </span><span class="default">$last </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$hex</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">);<br />            return </span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">bcmul</span><span class="keyword">(</span><span class="default">16</span><span class="keyword">, </span><span class="default">bchexdec</span><span class="keyword">(</span><span class="default">$remain</span><span class="keyword">)), </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">$last</span><span class="keyword">));<br />        }<br />    }<br /><br />    public static function </span><span class="default">bcdechex</span><span class="keyword">(</span><span class="default">$dec</span><span class="keyword">) {<br />        </span><span class="default">$last </span><span class="keyword">= </span><span class="default">bcmod</span><span class="keyword">(</span><span class="default">$dec</span><span class="keyword">, </span><span class="default">16</span><span class="keyword">);<br />        </span><span class="default">$remain </span><span class="keyword">= </span><span class="default">bcdiv</span><span class="keyword">(</span><span class="default">bcsub</span><span class="keyword">(</span><span class="default">$dec</span><span class="keyword">, </span><span class="default">$last</span><span class="keyword">), </span><span class="default">16</span><span class="keyword">);<br /><br />        if(</span><span class="default">$remain </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) {<br />            return </span><span class="default">dechex</span><span class="keyword">(</span><span class="default">$last</span><span class="keyword">);<br />        } else {<br />            return </span><span class="default">bcdechex</span><span class="keyword">(</span><span class="default">$remain</span><span class="keyword">).</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">$last</span><span class="keyword">);<br />        }<br />    }</span></span></code></div>
  </div>
 </div>
  <div class="note" id="47654">  <div class="votes">
    <div id="Vu47654">
    <a href="https://www.php.net/manual/vote-note.php?id=47654&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd47654">
    <a href="https://www.php.net/manual/vote-note.php?id=47654&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V47654" title="55% like this...">
    1
    </div>
  </div>
  <a href="ref.bc.php.html#47654" class="name">
  <strong class="user"><em>stonehew et g m a i l dut com</em></strong></a><a class="genanchor" href="ref.bc.php.html#47654"> &para;</a><div class="date" title="2004-11-23 11:20"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom47654">
<div class="phpcode"><code><span class="html">I hacked these taylor expansions up to make diagrams for some physics homework.  I don't think you'll be wanting to do any real science with PHP... but what the hell, why not?  I plan to implement either a spigot algorithm or something similar to generate pi in the near future.<br /><br />&lt;?<br />// arbitrary precision sin and cosine functions<br />// author tom boothby<br />// free for any use<br /><br />function bcfact($n) {<br />    $r = $n--;<br />    while($n&gt;1) $r=bcmul($r,$n--);<br />    return $r;<br />}<br /><br />function bcsin($a) {<br />    $or= $a;<br />    $r = bcsub($a,bcdiv(bcpow($a,3),6));<br />    $i = 2;<br />    while(bccomp($or,$r)) {<br />        $or=$r;<br />        switch($i%2) {<br />          case 0:  $r = bcadd($r,bcdiv(bcpow($a,$i*2+1),bcfact($i*2+1))); break;<br />          default: $r = bcsub($r,bcdiv(bcpow($a,$i*2+1),bcfact($i*2+1))); break;<br />        }<br />        $i++;<br />    }<br />    return $r;<br />}<br /><br />function bccos($a) {<br />    $or= $a;<br />    $r = bcsub(1,bcdiv(bcpow($a,2),2));<br />    $i = 2;<br />    while(bccomp($or,$r)) {<br />        $or=$r;<br />        switch($i%2) {<br />          case 0:  $r = bcadd($r,bcdiv(bcpow($a,$i*2),bcfact($i*2))); break;<br />          default: $r = bcsub($r,bcdiv(bcpow($a,$i*2),bcfact($i*2))); break;<br />        }<br />        $i++;<br />    }<br />    return $r;<br />}<br /><br />?&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="42915">  <div class="votes">
    <div id="Vu42915">
    <a href="https://www.php.net/manual/vote-note.php?id=42915&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd42915">
    <a href="https://www.php.net/manual/vote-note.php?id=42915&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V42915" title="50% like this...">
    0
    </div>
  </div>
  <a href="ref.bc.php.html#42915" class="name">
  <strong class="user"><em>robert at scabserver dot com</em></strong></a><a class="genanchor" href="ref.bc.php.html#42915"> &para;</a><div class="date" title="2004-06-03 09:58"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom42915">
<div class="phpcode"><code><span class="html">I spent some time looking for how to generate a large random number, in the end I've settled for reading directly from /dev/urandom<br /><br />I know this is a *nix only solution, but I figured that it might come in handy to someone else.<br /><br />The value $size is the size in bits, it could be simplified greatly if you want the size in bytes, but bits was more helpful to what I needed.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">bcrand</span><span class="keyword">(</span><span class="default">$size</span><span class="keyword">)<br />{<br />    </span><span class="default">$filename </span><span class="keyword">= </span><span class="string">"/dev/urandom"</span><span class="keyword">;<br />    </span><span class="default">$handle </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br />    </span><span class="default">$bin_urand </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$size</span><span class="keyword">/</span><span class="default">8.0</span><span class="keyword">));<br />    </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);<br />    </span><span class="default">$mask </span><span class="keyword">= ((</span><span class="default">$size </span><span class="keyword">% </span><span class="default">8 </span><span class="keyword">&lt; </span><span class="default">5</span><span class="keyword">) ? </span><span class="string">'0' </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">) . </span><span class="default">dechex</span><span class="keyword">(</span><span class="default">bindec</span><span class="keyword">(</span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">'1'</span><span class="keyword">, </span><span class="default">$size </span><span class="keyword">% </span><span class="default">8</span><span class="keyword">))) . </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">'FF'</span><span class="keyword">, </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$size</span><span class="keyword">/</span><span class="default">8</span><span class="keyword">));<br />    </span><span class="default">$binmask </span><span class="keyword">= </span><span class="default">pack</span><span class="keyword">(</span><span class="string">"H*"</span><span class="keyword">, </span><span class="default">$mask</span><span class="keyword">);<br />    </span><span class="default">$binrand </span><span class="keyword">= </span><span class="default">$binmask </span><span class="keyword">&amp; </span><span class="default">$bin_urand</span><span class="keyword">;<br />    </span><span class="default">$hexnumber </span><span class="keyword">= </span><span class="default">unpack</span><span class="keyword">(</span><span class="string">"H*"</span><span class="keyword">, </span><span class="default">$binrand</span><span class="keyword">);<br />    </span><span class="default">$hexnumber </span><span class="keyword">= </span><span class="default">$hexnumber</span><span class="keyword">[</span><span class="string">''</span><span class="keyword">];<br />    </span><span class="default">$numlength </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$hexnumber</span><span class="keyword">);<br />    </span><span class="default">$decnumber </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />    for(</span><span class="default">$x </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt;= </span><span class="default">$numlength</span><span class="keyword">; </span><span class="default">$x</span><span class="keyword">++)<br />    {<br />        </span><span class="default">$place </span><span class="keyword">= </span><span class="default">$numlength </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">;<br />        </span><span class="default">$operand </span><span class="keyword">= </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$hexnumber</span><span class="keyword">,</span><span class="default">$place</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">));<br />        </span><span class="default">$exponent </span><span class="keyword">= </span><span class="default">bcpow</span><span class="keyword">(</span><span class="default">16</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />        </span><span class="default">$decValue </span><span class="keyword">= </span><span class="default">bcmul</span><span class="keyword">(</span><span class="default">$operand</span><span class="keyword">, </span><span class="default">$exponent</span><span class="keyword">);<br />        </span><span class="default">$decnumber </span><span class="keyword">= </span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">$decValue</span><span class="keyword">, </span><span class="default">$decnumber</span><span class="keyword">);<br />    }<br />    return </span><span class="default">$decnumber</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="25336">  <div class="votes">
    <div id="Vu25336">
    <a href="https://www.php.net/manual/vote-note.php?id=25336&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd25336">
    <a href="https://www.php.net/manual/vote-note.php?id=25336&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V25336" title="50% like this...">
    0
    </div>
  </div>
  <a href="ref.bc.php.html#25336" class="name">
  <strong class="user"><em>pulstar at mail dot com</em></strong></a><a class="genanchor" href="ref.bc.php.html#25336"> &para;</a><div class="date" title="2002-09-19 08:27"><strong>21 years ago</strong></div>
  <div class="text" id="Hcom25336">
<div class="phpcode"><code><span class="html">A good use for BCMath functions:<br />The functions below can convert a number in any base (from 2 to 256) to its decimal value and vice-versa.<br /><br />// convert a decimal value to any other base value<br />function dec2base($dec,$base,$digits=FALSE) {<br />    if($base&lt;2 or $base&gt;256) die("Invalid Base: ".$base);<br />    bcscale(0);<br />    $value="";<br />    if(!$digits) $digits=digits($base);<br />    while($dec&gt;$base-1) {<br />        $rest=bcmod($dec,$base);<br />        $dec=bcdiv($dec,$base);<br />        $value=$digits[$rest].$value;<br />    }<br />    $value=$digits[intval($dec)].$value;<br />    return (string) $value;<br />}<br /><br />// convert another base value to its decimal value<br />function base2dec($value,$base,$digits=FALSE) {<br />    if($base&lt;2 or $base&gt;256) die("Invalid Base: ".$base);<br />    bcscale(0);<br />    if($base&lt;37) $value=strtolower($value);<br />    if(!$digits) $digits=digits($base);<br />    $size=strlen($value);<br />    $dec="0";<br />    for($loop=0;$loop&lt;$size;$loop++) {<br />        $element=strpos($digits,$value[$loop]);<br />        $power=bcpow($base,$size-$loop-1);<br />        $dec=bcadd($dec,bcmul($element,$power));<br />    }<br />    return (string) $dec;<br />}<br /><br />function digits($base) {<br />    if($base&gt;64) {<br />        $digits="";<br />        for($loop=0;$loop&lt;256;$loop++) {<br />            $digits.=chr($loop);<br />        }<br />    } else {<br />        $digits ="0123456789abcdefghijklmnopqrstuvwxyz";<br />        $digits.="ABCDEFGHIJKLMNOPQRSTUVWXYZ-_";<br />    }<br />    $digits=substr($digits,0,$base);<br />    return (string) $digits;<br />}<br /><br />The purpose of digits() function above is to supply the characters that will be used as digits for the base you want. NOTE: You can use any characters for that when you convert to another base, but when you convert again to the decimal base, you need to use the same characters or you will get another unexpected result.</span></code></div>
  </div>
 </div>
  <div class="note" id="119510">  <div class="votes">
    <div id="Vu119510">
    <a href="https://www.php.net/manual/vote-note.php?id=119510&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd119510">
    <a href="https://www.php.net/manual/vote-note.php?id=119510&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V119510" title="47% like this...">
    -1
    </div>
  </div>
  <a href="ref.bc.php.html#119510" class="name">
  <strong class="user"><em>kmeissen at gmx dot de</em></strong></a><a class="genanchor" href="ref.bc.php.html#119510"> &para;</a><div class="date" title="2016-06-24 10:05"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom119510">
<div class="phpcode"><code><span class="html">/*<br /> * Computes ln(x) very fast even with high resolution<br /> * uses standard log()-function to optimise convergence of<br /> * ln(1+x) = x - x*x/2 + x*x*x/3 - ...<br /> * <br /> * example:<br /> * bcscale(1000);<br /> * $x = bcln("1000000");<br /> *<br /> * result:<br /> * $x = 13.81551055796427410410794872810618524560660893...<br /> * within 0.9 sec, that are 80 iterations<br /> * <br /> * @author Klaus Meissen, Germany<br /> * @license Public domain<br />*/<br />function bcln($value) // value &gt; 0<br />{<br />    $m = (string)log($value);<br />    $x = bcsub(bcdiv($value,bcexp($m)),"1");<br />    $res = "0";<br />    $xpow = "1";<br />    $i=0;<br />    do<br />    {<br />        $i++;<br />        $xpow = bcmul($xpow,$x);<br />        $sum = bcdiv($xpow, $i);<br />        if ($i%2==1)<br />        {<br />            $res = bcadd($res, $sum);<br />        }else{<br />            $res = bcsub($res, $sum);<br />        }<br />    }<br />    while (bccomp($sum, '0'));<br />    return bcadd($res,$m);<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="72691">  <div class="votes">
    <div id="Vu72691">
    <a href="https://www.php.net/manual/vote-note.php?id=72691&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd72691">
    <a href="https://www.php.net/manual/vote-note.php?id=72691&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V72691" title="47% like this...">
    -1
    </div>
  </div>
  <a href="ref.bc.php.html#72691" class="name">
  <strong class="user"><em>mgcclx at gmail dot com</em></strong></a><a class="genanchor" href="ref.bc.php.html#72691"> &para;</a><div class="date" title="2007-01-29 06:52"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom72691">
<div class="phpcode"><code><span class="html">I wrote this function with many BCMath functions. It should be the fastest function in PHP to find the number pi into any precision, my test is it generate 2000 digits after the dot in 8 seconds. I don't think you need anything more than that.<br /><span class="default">&lt;?php<br /></span><span class="comment">//bcpi function with Gauss-Legendre algorithm<br />//by Chao Xu (Mgccl)<br /></span><span class="keyword">function </span><span class="default">bcpi</span><span class="keyword">(</span><span class="default">$precision</span><span class="keyword">){<br />    </span><span class="default">$limit </span><span class="keyword">= </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">log</span><span class="keyword">(</span><span class="default">$precision</span><span class="keyword">)/</span><span class="default">log</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">))-</span><span class="default">1</span><span class="keyword">;<br />    </span><span class="default">bcscale</span><span class="keyword">(</span><span class="default">$precision</span><span class="keyword">+</span><span class="default">6</span><span class="keyword">);<br />    </span><span class="default">$a </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />    </span><span class="default">$b </span><span class="keyword">= </span><span class="default">bcdiv</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">bcsqrt</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">));<br />    </span><span class="default">$t </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">/</span><span class="default">4</span><span class="keyword">;<br />    </span><span class="default">$p </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />    while(</span><span class="default">$n </span><span class="keyword">&lt; </span><span class="default">$limit</span><span class="keyword">){<br />        </span><span class="default">$x </span><span class="keyword">= </span><span class="default">bcdiv</span><span class="keyword">(</span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">),</span><span class="default">2</span><span class="keyword">);<br />        </span><span class="default">$y </span><span class="keyword">= </span><span class="default">bcsqrt</span><span class="keyword">(</span><span class="default">bcmul</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">));<br />        </span><span class="default">$t </span><span class="keyword">= </span><span class="default">bcsub</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="default">bcmul</span><span class="keyword">(</span><span class="default">$p</span><span class="keyword">,</span><span class="default">bcpow</span><span class="keyword">(</span><span class="default">bcsub</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">),</span><span class="default">2</span><span class="keyword">)));<br />        </span><span class="default">$a </span><span class="keyword">= </span><span class="default">$x</span><span class="keyword">;<br />        </span><span class="default">$b </span><span class="keyword">= </span><span class="default">$y</span><span class="keyword">;<br />        </span><span class="default">$p </span><span class="keyword">= </span><span class="default">bcmul</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">,</span><span class="default">$p</span><span class="keyword">);<br />        ++</span><span class="default">$n</span><span class="keyword">;<br />    }<br />    return </span><span class="default">bcdiv</span><span class="keyword">(</span><span class="default">bcpow</span><span class="keyword">(</span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">),</span><span class="default">2</span><span class="keyword">),</span><span class="default">bcmul</span><span class="keyword">(</span><span class="default">4</span><span class="keyword">,</span><span class="default">$t</span><span class="keyword">),</span><span class="default">$precision</span><span class="keyword">);<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="47682">  <div class="votes">
    <div id="Vu47682">
    <a href="https://www.php.net/manual/vote-note.php?id=47682&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd47682">
    <a href="https://www.php.net/manual/vote-note.php?id=47682&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V47682" title="42% like this...">
    -1
    </div>
  </div>
  <a href="ref.bc.php.html#47682" class="name">
  <strong class="user"><em>stonehew ut gm a il det com</em></strong></a><a class="genanchor" href="ref.bc.php.html#47682"> &para;</a><div class="date" title="2004-11-24 09:31"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom47682">
<div class="phpcode"><code><span class="html">Like any other bc function, you can't trust the last couple of digits, but everything else seems to check out.  If you want to use this for anything important, you may want to verify this against other sources of pi before use.  This function calculates 100 decimal places of pi in 329 iterations -- not exactly fast (each iteration calls the factorial function, from below, twice), so I try to avoid calling it more than once.<br /><br />&lt;?<br />//arbitrary precision pi approximator<br />//author tom boothby<br />//free for any use<br /><br />function bcpi() {<br />    $r=2;<br />    $i=0;<br />    $or=0;<br /><br />    while(bccomp($or,$r)) {<br />        $i++;<br />        $or=$r;<br />        $r = bcadd($r,bcdiv(bcmul(bcpow(bcfact($i),2),<br />                        bcpow(2,$i+1)),bcfact(2*$i+1)));<br />    }<br /><br />    return $r;<br />}<br /><br />?&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="46965">  <div class="votes">
    <div id="Vu46965">
    <a href="https://www.php.net/manual/vote-note.php?id=46965&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd46965">
    <a href="https://www.php.net/manual/vote-note.php?id=46965&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V46965" title="42% like this...">
    -1
    </div>
  </div>
  <a href="ref.bc.php.html#46965" class="name">
  <strong class="user"><em>Diabolos at GMail dot com</em></strong></a><a class="genanchor" href="ref.bc.php.html#46965"> &para;</a><div class="date" title="2004-10-28 11:42"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom46965">
<div class="phpcode"><code><span class="html">Here's a function to compute the natural exponential function in arbitrary precision using the basic bcMath arithmetic operations.<br /><br />EXAMPLE:<br />To compute the exponential function of 1.7 to 36 decimals:<br /><br />$y = bcExp("1.7", 36);<br /><br />The result:<br />4.331733759839529271053448625299468628<br /><br />would be returned in variable $y<br /><br />NOTE:<br />In practice, the last couple of digits may be inaccurate due to small rounding errors.  If you require a specific degree of precision, always compute 3-4 decimals beyond the required precision.<br /><br />The program code for the natural exponential function is:<br />******************************************<br /><br />  Function bcExp($xArg, $NumDecimals)<br /><br />{<br />   $x = Trim($xArg);<br /><br />   $PrevSum  = $x - 1;<br />   $CurrTerm = 1;<br />   $CurrSum  = bcAdd("1", $x, $NumDecimals);<br />   $n        = 1;<br /><br />   While (bcComp($CurrSum, $PrevSum, $NumDecimals))<br /><br />  {<br />   $PrevSum  = $CurrSum;<br />   $CurrTerm = bcDiv(bcMul($CurrTerm, $x, $NumDecimals), $n + 1, $NumDecimals);<br />   $CurrSum  = bcAdd($CurrSum, $CurrTerm, $NumDecimals);<br /><br />   $n++;<br />  }<br /><br />   Return $CurrSum;<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="25349">  <div class="votes">
    <div id="Vu25349">
    <a href="https://www.php.net/manual/vote-note.php?id=25349&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd25349">
    <a href="https://www.php.net/manual/vote-note.php?id=25349&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V25349" title="42% like this...">
    -1
    </div>
  </div>
  <a href="ref.bc.php.html#25349" class="name">
  <strong class="user"><em>pulstar at mail dot com</em></strong></a><a class="genanchor" href="ref.bc.php.html#25349"> &para;</a><div class="date" title="2002-09-20 07:23"><strong>21 years ago</strong></div>
  <div class="text" id="Hcom25349">
<div class="phpcode"><code><span class="html">A found a little fix to do in my base2dec() function:<br />The line "if($base&lt;37) $value=strtolower($value);" should be removed if you want to specify another digits for your base conversions. Change it this way:<br /><br />if(!$digits) {<br />$digits=digits($base);<br />if($base&lt;37) {<br />$value=strtolower($value);<br />}<br />}<br /><br />Another example using these functions is to generate a key for a session, to name temporary files or something else:<br /><br />srand((double) microtime()*1000000);<br />$id=uniqid(rand(10,999));<br />$mykey=dec2base(base2dec($id,16),64);<br /><br />$mykey is a base64 value, which is a good key for passing thru an URL and also is shorter than a MD5 string (it will be allways 11 chars long). If you need something more secure, just scramble the 64 digits in the digits() function.<br /><br />Well, I hope you enjoy it.<br /><br />Regards,<br />Edemilson Lima</span></code></div>
  </div>
 </div>
  <div class="note" id="31268">  <div class="votes">
    <div id="Vu31268">
    <a href="https://www.php.net/manual/vote-note.php?id=31268&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd31268">
    <a href="https://www.php.net/manual/vote-note.php?id=31268&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V31268" title="40% like this...">
    -1
    </div>
  </div>
  <a href="ref.bc.php.html#31268" class="name">
  <strong class="user"><em>pulstar at mail dot com</em></strong></a><a class="genanchor" href="ref.bc.php.html#31268"> &para;</a><div class="date" title="2003-04-15 05:12"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom31268">
<div class="phpcode"><code><span class="html">A little comment for the simplified example above: you can do base converting without BCMath functions using only math operators, but you will not able to manage very large values or work with strings to compress or scramble data. If you have BCMath installed in your system it worth use it for this.</span></code></div>
  </div>
 </div>
  <div class="note" id="113463">  <div class="votes">
    <div id="Vu113463">
    <a href="https://www.php.net/manual/vote-note.php?id=113463&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd113463">
    <a href="https://www.php.net/manual/vote-note.php?id=113463&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V113463" title="40% like this...">
    -3
    </div>
  </div>
  <a href="ref.bc.php.html#113463" class="name">
  <strong class="user"><em>mail at djordjeungar dot com</em></strong></a><a class="genanchor" href="ref.bc.php.html#113463"> &para;</a><div class="date" title="2013-10-14 01:43"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom113463">
<div class="phpcode"><code><span class="html">Inspired by dawidgarus' implementation, here's my simple bc math helper, it does not support function calls, but supports boolean comparisons and is about ~40% faster.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">bc</span><span class="keyword">() {<br />    </span><span class="default">$argv </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />    </span><span class="default">$string </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="string">"(</span><span class="keyword">{</span><span class="default">$argv</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]}</span><span class="string">)"</span><span class="keyword">);<br /><br />    </span><span class="default">$operations </span><span class="keyword">= array();<br />    if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="string">'^'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) </span><span class="default">$operations</span><span class="keyword">[] = </span><span class="string">'\^'</span><span class="keyword">;<br />    if (</span><span class="default">strpbrk</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="string">'*/%'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) </span><span class="default">$operations</span><span class="keyword">[] = </span><span class="string">'[\*\/\%]'</span><span class="keyword">;<br />    if (</span><span class="default">strpbrk</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="string">'+-'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) </span><span class="default">$operations</span><span class="keyword">[] = </span><span class="string">'[\+\-]'</span><span class="keyword">;<br />    if (</span><span class="default">strpbrk</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="string">'&lt;&gt;!='</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) </span><span class="default">$operations</span><span class="keyword">[] = </span><span class="string">'&lt;|&gt;|=|&lt;=|==|&gt;=|!=|&lt;&gt;'</span><span class="keyword">;<br /><br />    </span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\$([0-9\.]+)/e'</span><span class="keyword">, </span><span class="string">'$argv[$1]'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />    while (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\(([^\)\(]*)\)/'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">)) {<br />        foreach (</span><span class="default">$operations </span><span class="keyword">as </span><span class="default">$operation</span><span class="keyword">) {<br />            if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/([+-]{0,1}[0-9\.]+)(</span><span class="default">$operation</span><span class="string">)([+-]{0,1}[0-9\.]+)/"</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">)) {<br />                switch(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]) {<br />                    case </span><span class="string">'+'</span><span class="keyword">:  </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]); break;<br />                    case </span><span class="string">'-'</span><span class="keyword">:  </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bcsub</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]); break;<br />                    case </span><span class="string">'*'</span><span class="keyword">:  </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bcmul</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]); break;<br />                    case </span><span class="string">'/'</span><span class="keyword">:  </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bcdiv</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]); break;<br />                    case </span><span class="string">'%'</span><span class="keyword">:  </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bcmod</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]); break;<br />                    case </span><span class="string">'^'</span><span class="keyword">:  </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bcpow</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]); break;<br />                    case </span><span class="string">'=='</span><span class="keyword">:<br />                    case </span><span class="string">'='</span><span class="keyword">:  </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bccomp</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]) == </span><span class="default">0</span><span class="keyword">; break;<br />                    case </span><span class="string">'&gt;'</span><span class="keyword">:  </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bccomp</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]) == </span><span class="default">1</span><span class="keyword">; break;<br />                    case </span><span class="string">'&lt;'</span><span class="keyword">:  </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bccomp</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]) ==-</span><span class="default">1</span><span class="keyword">; break;<br />                    case </span><span class="string">'&gt;='</span><span class="keyword">: </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bccomp</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]) &gt;= </span><span class="default">0</span><span class="keyword">; break;<br />                    case </span><span class="string">'&lt;='</span><span class="keyword">: </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bccomp</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]) &lt;= </span><span class="default">0</span><span class="keyword">; break;<br />                    case </span><span class="string">'&lt;&gt;'</span><span class="keyword">:<br />                    case </span><span class="string">'!='</span><span class="keyword">: </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bccomp</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]) != </span><span class="default">0</span><span class="keyword">; break;<br />                }<br />                </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$result</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br />            }<br />        }<br />        </span><span class="default">$string </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$string</span><span class="keyword">);<br />    }<br /><br />    return </span><span class="default">$string</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="94610">  <div class="votes">
    <div id="Vu94610">
    <a href="https://www.php.net/manual/vote-note.php?id=94610&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd94610">
    <a href="https://www.php.net/manual/vote-note.php?id=94610&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V94610" title="40% like this...">
    -3
    </div>
  </div>
  <a href="ref.bc.php.html#94610" class="name">
  <strong class="user"><em>thomas at tgohome dot com</em></strong></a><a class="genanchor" href="ref.bc.php.html#94610"> &para;</a><div class="date" title="2009-11-14 03:17"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom94610">
<div class="phpcode"><code><span class="html">Some useful bcmath functions:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">/* <br /> * Computes the factoral (x!).<br /> * @author Thomas Oldbury. <br /> * @license Public domain. <br /> */ <br /></span><span class="keyword">function </span><span class="default">bcfact</span><span class="keyword">(</span><span class="default">$fact</span><span class="keyword">, </span><span class="default">$scale </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">)<br />{<br />    if(</span><span class="default">$fact </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) return </span><span class="default">1</span><span class="keyword">;<br />    return </span><span class="default">bcmul</span><span class="keyword">(</span><span class="default">$fact</span><span class="keyword">, </span><span class="default">bcfact</span><span class="keyword">(</span><span class="default">bcsub</span><span class="keyword">(</span><span class="default">$fact</span><span class="keyword">, </span><span class="string">'1'</span><span class="keyword">), </span><span class="default">$scale</span><span class="keyword">), </span><span class="default">$scale</span><span class="keyword">);<br />}<br /><br /></span><span class="comment">/* <br /> * Computes e^x, where e is Euler's constant, or approximately 2.71828.<br /> * @author Thomas Oldbury. <br /> * @license Public domain. <br /> */ <br /></span><span class="keyword">function </span><span class="default">bcexp</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">$iters </span><span class="keyword">= </span><span class="default">7</span><span class="keyword">, </span><span class="default">$scale </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">)<br />{<br />    </span><span class="comment">/* Compute e^x. */<br />    </span><span class="default">$res </span><span class="keyword">= </span><span class="default">bcadd</span><span class="keyword">(</span><span class="string">'1.0'</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$scale</span><span class="keyword">);<br />    for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$iters</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />    {<br />        </span><span class="default">$res </span><span class="keyword">+= </span><span class="default">bcdiv</span><span class="keyword">(</span><span class="default">bcpow</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">, </span><span class="string">'2'</span><span class="keyword">), </span><span class="default">$scale</span><span class="keyword">), </span><span class="default">bcfact</span><span class="keyword">(</span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">, </span><span class="string">'2'</span><span class="keyword">), </span><span class="default">$scale</span><span class="keyword">), </span><span class="default">$scale</span><span class="keyword">);<br />    }<br />    return </span><span class="default">$res</span><span class="keyword">;<br />}<br /><br /></span><span class="comment">/* <br /> * Computes ln(x).<br /> * @author Thomas Oldbury. <br /> * @license Public domain. <br /> */ <br /></span><span class="keyword">function </span><span class="default">bcln</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$iters </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">, </span><span class="default">$scale </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">) <br />{ <br />    </span><span class="default">$result </span><span class="keyword">= </span><span class="string">"0.0"</span><span class="keyword">; <br />    <br />    for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$iters</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) <br />    {<br />        </span><span class="default">$pow </span><span class="keyword">= </span><span class="default">bcadd</span><span class="keyword">(</span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">bcmul</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">, </span><span class="string">"2.0"</span><span class="keyword">, </span><span class="default">$scale</span><span class="keyword">), </span><span class="default">$scale</span><span class="keyword">);<br />        </span><span class="comment">//$pow = 1 + ($i * 2);<br />        </span><span class="default">$mul </span><span class="keyword">= </span><span class="default">bcdiv</span><span class="keyword">(</span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">$pow</span><span class="keyword">, </span><span class="default">$scale</span><span class="keyword">); <br />        </span><span class="default">$fraction </span><span class="keyword">= </span><span class="default">bcmul</span><span class="keyword">(</span><span class="default">$mul</span><span class="keyword">, </span><span class="default">bcpow</span><span class="keyword">(</span><span class="default">bcdiv</span><span class="keyword">(</span><span class="default">bcsub</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">$scale</span><span class="keyword">), </span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">$scale</span><span class="keyword">), </span><span class="default">$scale</span><span class="keyword">), </span><span class="default">$pow</span><span class="keyword">, </span><span class="default">$scale</span><span class="keyword">), </span><span class="default">$scale</span><span class="keyword">); <br />        </span><span class="default">$result </span><span class="keyword">= </span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">$fraction</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">, </span><span class="default">$scale</span><span class="keyword">); <br />    } <br />    <br />    </span><span class="default">$res </span><span class="keyword">= </span><span class="default">bcmul</span><span class="keyword">(</span><span class="string">"2.0"</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">, </span><span class="default">$scale</span><span class="keyword">); <br />    return </span><span class="default">$res</span><span class="keyword">;<br />} <br /><br /></span><span class="comment">/* <br /> * Computes a^b, where a and b can have decimal digits, be negative and/or very large.<br /> * Also works for 0^0. Only able to calculate up to 10 digits. Quite slow.<br /> * @author Thomas Oldbury. <br /> * @license Public domain. <br /> */ <br /></span><span class="keyword">function </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$iters </span><span class="keyword">= </span><span class="default">25</span><span class="keyword">, </span><span class="default">$scale </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">)<br />{<br />    </span><span class="default">$ln </span><span class="keyword">= </span><span class="default">bcln</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$iters</span><span class="keyword">, </span><span class="default">$scale</span><span class="keyword">);<br />    return </span><span class="default">bcexp</span><span class="keyword">(</span><span class="default">bcmul</span><span class="keyword">(</span><span class="default">$ln</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$scale</span><span class="keyword">), </span><span class="default">$iters</span><span class="keyword">, </span><span class="default">$scale</span><span class="keyword">);<br />}<br /><br /></span><span class="default">$precision </span><span class="keyword">= </span><span class="default">35</span><span class="keyword">;<br /><br />echo </span><span class="string">"3^4.5,          precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'3'</span><span class="keyword">, </span><span class="string">'4.5'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"4.5^3,          precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'4.5'</span><span class="keyword">, </span><span class="string">'3'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"8^1/2,          precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'8'</span><span class="keyword">, </span><span class="string">'0.5'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"28^-1,          precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'28'</span><span class="keyword">, </span><span class="string">'-1'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"432^0,          precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'432'</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"0^0,            precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'0.0'</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"9^999,          precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'9'</span><span class="keyword">, </span><span class="string">'999'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"9^9999,         precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'9'</span><span class="keyword">, </span><span class="string">'9999'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"9^99999,        precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'9'</span><span class="keyword">, </span><span class="string">'99999'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"9^999999,       precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'9'</span><span class="keyword">, </span><span class="string">'999999'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"9^9999999,      precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'9'</span><span class="keyword">, </span><span class="string">'9999999'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"9^99999999,     precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'9'</span><span class="keyword">, </span><span class="string">'99999999'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"9^999999999,    precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'9'</span><span class="keyword">, </span><span class="string">'999999999'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"9^9999999999,   precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'9'</span><span class="keyword">, </span><span class="string">'9999999999'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"9^99999999999,  precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'9'</span><span class="keyword">, </span><span class="string">'99999999999'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />echo </span><span class="string">"9^999999999999, precision 15, iters 25 = " </span><span class="keyword">. </span><span class="default">bcpowx</span><span class="keyword">(</span><span class="string">'9'</span><span class="keyword">, </span><span class="string">'999999999999'</span><span class="keyword">, </span><span class="default">25</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">; <br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="85084">  <div class="votes">
    <div id="Vu85084">
    <a href="https://www.php.net/manual/vote-note.php?id=85084&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd85084">
    <a href="https://www.php.net/manual/vote-note.php?id=85084&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V85084" title="40% like this...">
    -3
    </div>
  </div>
  <a href="ref.bc.php.html#85084" class="name">
  <strong class="user"><em>Charles</em></strong></a><a class="genanchor" href="ref.bc.php.html#85084"> &para;</a><div class="date" title="2008-08-13 10:04"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom85084">
<div class="phpcode"><code><span class="html">Function to round bc string:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">bcround</span><span class="keyword">(</span><span class="default">$strval</span><span class="keyword">, </span><span class="default">$precision </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br />    if (</span><span class="default">false </span><span class="keyword">!== (</span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$strval</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">)) &amp;&amp; (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$strval</span><span class="keyword">) - </span><span class="default">$pos </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">) &gt; </span><span class="default">$precision</span><span class="keyword">) {<br />        </span><span class="default">$zeros </span><span class="keyword">= </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">"0"</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">);<br />        return </span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">$strval</span><span class="keyword">, </span><span class="string">"0.</span><span class="keyword">{</span><span class="default">$zeros</span><span class="keyword">}</span><span class="string">5"</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">);<br />    } else {<br />        return </span><span class="default">$strval</span><span class="keyword">;<br />    }<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="125284">  <div class="votes">
    <div id="Vu125284">
    <a href="https://www.php.net/manual/vote-note.php?id=125284&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd125284">
    <a href="https://www.php.net/manual/vote-note.php?id=125284&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V125284" title="33% like this...">
    -1
    </div>
  </div>
  <a href="ref.bc.php.html#125284" class="name">
  <strong class="user"><em>eyadbere at gmail dot com</em></strong></a><a class="genanchor" href="ref.bc.php.html#125284"> &para;</a><div class="date" title="2020-08-18 11:02"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom125284">
<div class="phpcode"><code><span class="html">If your calculations involves input from users don't forget to set a limit on the range and/or the length of the input because very huge numbers requires intensive processing and you might reach a point where your server can't do any further processing</span></code></div>
  </div>
 </div>
  <div class="note" id="92888">  <div class="votes">
    <div id="Vu92888">
    <a href="https://www.php.net/manual/vote-note.php?id=92888&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd92888">
    <a href="https://www.php.net/manual/vote-note.php?id=92888&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V92888" title="38% like this...">
    -3
    </div>
  </div>
  <a href="ref.bc.php.html#92888" class="name">
  <strong class="user"><em>francois dot barbier at gmail dot com</em></strong></a><a class="genanchor" href="ref.bc.php.html#92888"> &para;</a><div class="date" title="2009-08-12 10:19"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom92888">
<div class="phpcode"><code><span class="html">As "benjcarson at digitaljunkies dot ca" (<a href="http://www.php.net/ref.bc.php#23038" rel="nofollow" target="_blank">http://www.php.net/ref.bc.php#23038</a>) noted in the first two comments, bcmath doesn't accept exponential notation.<br /><br />Moreover, you might have other problems if you feed the bcmath functions directly with floating point numbers.<br />Consider the following example:<br /><span class="default">&lt;?php<br />bcscale</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">$a </span><span class="keyword">= </span><span class="default">0.8</span><span class="keyword">;<br /></span><span class="default">$b </span><span class="keyword">= </span><span class="default">0.7</span><span class="keyword">;<br /></span><span class="default">var_dump</span><span class="keyword">((string) </span><span class="default">$a</span><span class="keyword">);   </span><span class="comment">// string(3) "0.8"<br /></span><span class="default">var_dump</span><span class="keyword">((string) </span><span class="default">$b</span><span class="keyword">);   </span><span class="comment">// string(3) "0.a"<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)); </span><span class="comment">// string(3) "1.5"<br /></span><span class="default">setLocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'fr_BE.UTF-8'</span><span class="keyword">);<br /></span><span class="default">var_dump</span><span class="keyword">((string) </span><span class="default">$a</span><span class="keyword">);   </span><span class="comment">// string(3) "0,8" --&gt; note the comma<br /></span><span class="default">var_dump</span><span class="keyword">((string) </span><span class="default">$b</span><span class="keyword">);   </span><span class="comment">// string(3) "0,7" --&gt; note the comma<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)); </span><span class="comment">// string(3) "0.0"<br /></span><span class="default">?&gt;<br /></span>The floating point numbers passed to the bcadd() function are automatically converted to string using the localized decimal separator. However, the bcmath functions always use a full stop, which results in the last result being incorrect.<br /><br />Below is a function to convert floating point numbers to strings correctly. It takes care of the decimal separator and the exponential notation. It also preserve the precision without drifting away (e.g. 1.0 doesn't become 0.99999...)<br /><span class="default">&lt;?php<br /></span><span class="comment">/**<br /> * Convert a number to locale independent string without E notation and without<br /> * loosing precision<br /> *<br /> * @param      int/float/double $fNumber The number to convert.<br /> * @return     string The locale independent converted number.<br /> */<br /></span><span class="keyword">function </span><span class="default">bcconv</span><span class="keyword">(</span><span class="default">$fNumber</span><span class="keyword">)<br />{<br />    </span><span class="default">$sAppend </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />    </span><span class="default">$iDecimals </span><span class="keyword">= </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'precision'</span><span class="keyword">) - </span><span class="default">floor</span><span class="keyword">(</span><span class="default">log10</span><span class="keyword">(</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$fNumber</span><span class="keyword">)));<br />    if (</span><span class="default">0 </span><span class="keyword">&gt; </span><span class="default">$iDecimals</span><span class="keyword">)<br />    {<br />        </span><span class="default">$fNumber </span><span class="keyword">*= </span><span class="default">pow</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">, </span><span class="default">$iDecimals</span><span class="keyword">);<br />        </span><span class="default">$sAppend </span><span class="keyword">= </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">'0'</span><span class="keyword">, -</span><span class="default">$iDecimals</span><span class="keyword">);<br />        </span><span class="default">$iDecimals </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />    }<br />    return </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$fNumber</span><span class="keyword">, </span><span class="default">$iDecimals</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">).</span><span class="default">$sAppend</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span><br />Example:<br /><span class="default">&lt;?php<br />setLocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'fr_BE.UTF-8'</span><span class="keyword">); </span><span class="comment">// decimal separator is now a comma<br /></span><span class="default">$precision </span><span class="keyword">= </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'precision'</span><span class="keyword">) + </span><span class="default">2</span><span class="keyword">; </span><span class="comment">// should give 16<br /></span><span class="default">bcscale</span><span class="keyword">(</span><span class="default">$precision</span><span class="keyword">);<br /></span><span class="default">$big </span><span class="keyword">= </span><span class="default">pow</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">);<br /></span><span class="default">$small </span><span class="keyword">= </span><span class="default">1 </span><span class="keyword">/ </span><span class="default">$big</span><span class="keyword">;<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">bcconv</span><span class="keyword">(</span><span class="default">$big </span><span class="keyword">+ </span><span class="default">$small</span><span class="keyword">));               </span><span class="comment">// string(17) "10000000000000000"<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">$big</span><span class="keyword">, </span><span class="default">$small</span><span class="keyword">));                 </span><span class="comment">// string(18) "0.0000000000000000"<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">bcconv</span><span class="keyword">(</span><span class="default">$big</span><span class="keyword">), </span><span class="default">bcconv</span><span class="keyword">(</span><span class="default">$small</span><span class="keyword">))); </span><span class="comment">// string(34) "10000000000000000.0000000000000001"<br /></span><span class="default">?&gt;<br /></span>The first result's precision loss is due to PHP's internal floating point numbers' representation.<br />The second result is wrong because of the localized decimal separator.<br />Finally, the last result is correct.</span></code></div>
  </div>
 </div>
  <div class="note" id="29938">  <div class="votes">
    <div id="Vu29938">
    <a href="https://www.php.net/manual/vote-note.php?id=29938&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd29938">
    <a href="https://www.php.net/manual/vote-note.php?id=29938&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V29938" title="37% like this...">
    -2
    </div>
  </div>
  <a href="ref.bc.php.html#29938" class="name">
  <strong class="user"><em>oliver at summertime dot net</em></strong></a><a class="genanchor" href="ref.bc.php.html#29938"> &para;</a><div class="date" title="2003-03-01 10:12"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom29938">
<div class="phpcode"><code><span class="html">A simplier Version of the Script above:<br /><br />function dec2base($dec, $digits) {<br /> $value = "";<br /> $base  = strlen($digits);<br /> while($dec&gt;$base-1) {<br />  $rest = $dec % $base;<br />  $dec  = $dec / $base;<br />  $value = $digits[$rest].$value;<br /> }<br /> $value = $digits[intval($dec)].$value;<br /> return (string) $value;<br />}<br /><br />function base2dec($value, $digits) {<br /> $value = strtoupper($value);<br /> $base  = strlen($digits);<br /> $size  = strlen($value);<br /> $dec   = '0';<br /> for ($loop = 0; $loop&lt;$size; $loop++) {<br />  $element = strpos($digits,$value[$loop]);<br />  $power   = pow($base,$size-$loop-1);<br />  $dec    += $element * $power;<br /> }<br /> return (string) $dec;<br />}<br /><br />$digits = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789";<br />echo dec2base('1000', $digits);</span></code></div>
  </div>
 </div>
  <div class="note" id="68756">  <div class="votes">
    <div id="Vu68756">
    <a href="https://www.php.net/manual/vote-note.php?id=68756&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd68756">
    <a href="https://www.php.net/manual/vote-note.php?id=68756&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V68756" title="36% like this...">
    -3
    </div>
  </div>
  <a href="ref.bc.php.html#68756" class="name">
  <strong class="user"><em>marcus at synchromedia dot co dot uk</em></strong></a><a class="genanchor" href="ref.bc.php.html#68756"> &para;</a><div class="date" title="2006-08-09 09:17"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom68756">
<div class="phpcode"><code><span class="html">Oops, first posting contained wrong code... sorry.<br />An amendment to the entry by pulstar at mail dot com - the digits() function can be made much faster (remove the line breaks from the big string, and make sure you don't miss any characters!):<br /><br />function digits2($base) {<br />    if($base &lt; 64) {<br />        return substr('0123456789abcdefghijklmnopqrstuvwxyz<br />ABCDEFGHIJKLMNOPQRSTUVWXYZ-_', 0, $base);<br />    } else {<br />        return substr("\x0\x1\x2\x3\x4\x5\x6\x7\x8\x9\xa\xb\xc\xd<br />\xe\xf\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d<br />\x1e\x1f\x20!\x22#\x24%&amp;'()*+,-./0123456789:;&lt;=&gt;<br />\x3f@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]<br />^_`abcdefghijklmnopqrstuvwxyz{|}~\x7f\x80\x81\x82\x83\x84\x85<br />\x86\x87\x88\x89\x8a\x8b\x8c\x8d\x8e\x8f\x90\x91\x92\x93\x94\x95<br />\x96\x97\x98\x99\x9a\x9b\x9c\x9d\x9e\x9f\xa0\xa1\xa2\xa3\xa4\xa5<br />\xa6\xa7\xa8\xa9\xaa\xab\xac\xad\xae\xaf\xb0\xb1\xb2\xb3\xb4\xb5<br />\xb6\xb7\xb8\xb9\xba\xbb\xbc\xbd\xbe\xbf\xc0\xc1\xc2\xc3\xc4\xc5<br />\xc6\xc7\xc8\xc9\xca\xcb\xcc\xcd\xce\xcf\xd0\xd1\xd2\xd3\xd4\xd5<br />\xd6\xd7\xd8\xd9\xda\xdb\xdc\xdd\xde\xdf\xe0\xe1\xe2\xe3\xe4\xe5<br />\xe6\xe7\xe8\xe9\xea\xeb\xec\xed\xee\xef\xf0\xf1\xf2\xf3\xf4\xf5\xf6<br />\xf7\xf8\xf9\xfa\xfb\xfc\xfd\xfe\xff", 0, $base);<br />    }<br />}<br /><br />in my benchmarks, this is around 150x faster for 256 digits</span></code></div>
  </div>
 </div>
  <div class="note" id="73522">  <div class="votes">
    <div id="Vu73522">
    <a href="https://www.php.net/manual/vote-note.php?id=73522&amp;page=ref.bc&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd73522">
    <a href="https://www.php.net/manual/vote-note.php?id=73522&amp;page=ref.bc&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V73522" title="33% like this...">
    -2
    </div>
  </div>
  <a href="ref.bc.php.html#73522" class="name">
  <strong class="user"><em>udochen at gmail dot com</em></strong></a><a class="genanchor" href="ref.bc.php.html#73522"> &para;</a><div class="date" title="2007-02-27 11:48"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom73522">
<div class="phpcode"><code><span class="html">Code below implements standard rounding on 5 or higer round up, else don't round.  There wasn't a round function for the BC functions, so here is a simple one that works. Same args as round, except takes strings and returns a string for more BC operations.<br /><br />----------------<br /><br />function roundbc($x, $p) {<br /><br />     $x = trim($x);<br />     $data = explode(".",$x);<br /><br />     if(substr($data[1],$p,1) &gt;= "5") {<br /><br />           //generate the add string.<br />           $i=0;<br />           $addString = "5";<br />           while($i &lt; $p) {<br />               $addString = "0" . $addString;<br />               $i++;<br />           }//end while.<br />           $addString = "." . $addString;<br /><br />           //now add the addString to the original fraction.<br />           $sum = bcadd($data[0] . "." . $data   [1],$addString,$p+1);<br /><br />           //explode the result.<br />           $sumData = explode(".",$sum);<br /><br />           //now, return the correct precision on the rounded number.<br />           return $sumData[0] . "." . substr($sumData[1],0,$p);<br /><br />      } else {<br /><br />           //don't round the value and return the orignal to the desired<br />           //precision or less.<br />           return $data[0] . "." . substr($data[1],0,$p);<br /><br />      }//end if/else.<br /><br />   }//end roundbc.</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=ref.bc&amp;redirect=https://www.php.net/manual/ru/ref.bc.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="book.bc.php.html">BC Math</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="intro.bc.php.html" title="Введение">Введение</a>
                        </li>
                                                <li class="">
                            <a href="bc.setup.php.html" title="Установка и настройка">Установка и настройка</a>
                        </li>
                                                <li class="">
                            <a href="bc.constants.php.html" title="Предопределённые константы">Предопределённые константы</a>
                        </li>
                                                <li class="current">
                            <a href="ref.bc.php.html" title="Функции BC Math">Функции BC Math</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
