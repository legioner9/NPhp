<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: Функции cURL - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="ref.curl.php.html">
 <link rel="shorturl" href="https://www.php.net/curl">
 <link rel="alternate" href="https://www.php.net/curl" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="book.curl.php.html">
 <link rel="prev" href="curl.examples-basic.php.html">
 <link rel="next" href="function.curl-close.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/ref.curl.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/ref.curl.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/ref.curl.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/ref.curl.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/ref.curl.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/ref.curl.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/ref.curl.php" hreflang="pt_BR">
 <link rel="alternate" href="ref.curl.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/ref.curl.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/ref.curl.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.curl-close.php.html">
          curl_close &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="curl.examples-basic.php.html">
          &laquo; Простой пример использования curl        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.remote.other.php.html'>Другие службы</a></li>      <li><a href='book.curl.php.html'>cURL</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/ref.curl.php'>English</option>
            <option value='de/ref.curl.php'>German</option>
            <option value='es/ref.curl.php'>Spanish</option>
            <option value='fr/ref.curl.php'>French</option>
            <option value='it/ref.curl.php'>Italian</option>
            <option value='ja/ref.curl.php'>Japanese</option>
            <option value='pt_BR/ref.curl.php'>Brazilian Portuguese</option>
            <option value='ru/ref.curl.php' selected="selected">Russian</option>
            <option value='tr/ref.curl.php'>Turkish</option>
            <option value='zh/ref.curl.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/curl/reference.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Fref.curl%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="ref.curl" class="reference">
 <h1 class="title">Функции cURL</h1>

 

































































































































































































<h2>Содержание</h2><ul class="chunklist chunklist_reference"><li><a href="function.curl-close.php.html">curl_close</a> — Завершает сеанс cURL</li><li><a href="function.curl-copy-handle.php.html">curl_copy_handle</a> — Копирует дескриптор cURL вместе со всеми его настройками</li><li><a href="function.curl-errno.php.html">curl_errno</a> — Возвращает код последней ошибки</li><li><a href="function.curl-error.php.html">curl_error</a> — Возвращает строку с описанием последней ошибки текущего сеанса</li><li><a href="function.curl-escape.php.html">curl_escape</a> — Кодирует заданную строку как URL</li><li><a href="function.curl-exec.php.html">curl_exec</a> — Выполняет запрос cURL</li><li><a href="function.curl-getinfo.php.html">curl_getinfo</a> — Получает информацию о конкретной передаче</li><li><a href="function.curl-init.php.html">curl_init</a> — Инициализирует сеанс cURL</li><li><a href="function.curl-multi-add-handle.php.html">curl_multi_add_handle</a> — Добавляет обычный cURL-дескриптор к набору cURL-дескрипторов</li><li><a href="function.curl-multi-close.php.html">curl_multi_close</a> — Закрывает набор cURL-дескрипторов</li><li><a href="function.curl-multi-errno.php.html">curl_multi_errno</a> — Возвращает код последней ошибки множественного curl</li><li><a href="function.curl-multi-exec.php.html">curl_multi_exec</a> — Запускает подсоединения текущего дескриптора cURL</li><li><a href="function.curl-multi-getcontent.php.html">curl_multi_getcontent</a> — Возвращает результат операции, если была установлена опция
   CURLOPT_RETURNTRANSFER</li><li><a href="function.curl-multi-info-read.php.html">curl_multi_info_read</a> — Возвращает информацию о текущих операциях</li><li><a href="function.curl-multi-init.php.html">curl_multi_init</a> — Создаёт набор cURL-дескрипторов</li><li><a href="function.curl-multi-remove-handle.php.html">curl_multi_remove_handle</a> — Удаляет cURL дескриптор из набора cURL дескрипторов</li><li><a href="function.curl-multi-select.php.html">curl_multi_select</a> — Ждёт активности на любом curl_multi соединении</li><li><a href="function.curl-multi-setopt.php.html">curl_multi_setopt</a> — Устанавливает опции множественного дескриптора cURL</li><li><a href="function.curl-multi-strerror.php.html">curl_multi_strerror</a> — Возвращает строку, описывающую ошибку</li><li><a href="function.curl-pause.php.html">curl_pause</a> — Приостановить и возобновить соединение</li><li><a href="function.curl-reset.php.html">curl_reset</a> — Сбросить все настройки обработчика сессии libcurl</li><li><a href="function.curl-setopt-array.php.html">curl_setopt_array</a> — Устанавливает несколько параметров для сеанса cURL</li><li><a href="function.curl-setopt.php.html">curl_setopt</a> — Устанавливает параметр для cURL-передачи</li><li><a href="function.curl-share-close.php.html">curl_share_close</a> — Закрыть разделяемый обработчик cURL</li><li><a href="function.curl-share-errno.php.html">curl_share_errno</a> — Возвращает код последней ошибки разделяемого обработчика curl</li><li><a href="function.curl-share-init.php.html">curl_share_init</a> — Инициализация разделяемого обработчика cURL</li><li><a href="function.curl-share-setopt.php.html">curl_share_setopt</a> — Установить опции разделяемого обработчика cURL</li><li><a href="function.curl-share-strerror.php.html">curl_share_strerror</a> — Возвращает описание для заданного кода ошибки</li><li><a href="function.curl-strerror.php.html">curl_strerror</a> — Получить текстовое описание для кода ошибки</li><li><a href="function.curl-unescape.php.html">curl_unescape</a> — Декодирует закодированную URL-строку</li><li><a href="function.curl_upkeep.php.html">curl_upkeep</a> — Выполняет любые проверки работоспособности соединений</li><li><a href="function.curl-version.php.html">curl_version</a> — Возвращает версию cURL</li></ul>
</div>
<section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=ref.curl&amp;redirect=https://www.php.net/manual/ru/ref.curl.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">15 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="76249">  <div class="votes">
    <div id="Vu76249">
    <a href="https://www.php.net/manual/vote-note.php?id=76249&amp;page=ref.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd76249">
    <a href="https://www.php.net/manual/vote-note.php?id=76249&amp;page=ref.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V76249" title="57% like this...">
    22
    </div>
  </div>
  <a href="ref.curl.php.html#76249" class="name">
  <strong class="user"><em>Mr.KTO</em></strong></a><a class="genanchor" href="ref.curl.php.html#76249"> &para;</a><div class="date" title="2007-07-07 06:59"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom76249">
<div class="phpcode"><code><span class="html">Don't foget to curl_close($ch); Even if curl_errno($ch) != 0<br /><br />Because if you don't - on Windows this will produce windows-error-report (Program terminated unexpectedly)</span></code></div>
  </div>
 </div>
  <div class="note" id="126141">  <div class="votes">
    <div id="Vu126141">
    <a href="https://www.php.net/manual/vote-note.php?id=126141&amp;page=ref.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd126141">
    <a href="https://www.php.net/manual/vote-note.php?id=126141&amp;page=ref.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V126141" title="57% like this...">
    1
    </div>
  </div>
  <a href="ref.curl.php.html#126141" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="ref.curl.php.html#126141"> &para;</a><div class="date" title="2021-06-06 08:06"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom126141">
<div class="phpcode"><code><span class="html">Note, if you will ever need to get/set unique handle for Curl-object, you might need to use CURL_PRIVATE property for each instace<br /><a href="https://www.php.net/manual/en/function.curl-setopt.php" rel="nofollow" target="_blank">https://www.php.net/manual/en/function.curl-setopt.php</a></span></code></div>
  </div>
 </div>
  <div class="note" id="115002">  <div class="votes">
    <div id="Vu115002">
    <a href="https://www.php.net/manual/vote-note.php?id=115002&amp;page=ref.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd115002">
    <a href="https://www.php.net/manual/vote-note.php?id=115002&amp;page=ref.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V115002" title="53% like this...">
    3
    </div>
  </div>
  <a href="ref.curl.php.html#115002" class="name">
  <strong class="user"><em>helmizz at yahoo dot com</em></strong></a><a class="genanchor" href="ref.curl.php.html#115002"> &para;</a><div class="date" title="2014-05-11 10:03"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom115002">
<div class="phpcode"><code><span class="html">This is sample script to use curl, Just input curl_setopt,<br />exp : <br />curlsetop[0] ==&gt; name : CURLOPT_URL ; value : <a href="http://amazon.com" rel="nofollow" target="_blank">http://amazon.com</a><br />curlsetop[1] ==&gt; name : CURLOPT_RETURNTRANSFER ; value : true<br />curlsetop[2] ==&gt; name : CURLOPT_FOLLOWLOCATION ; value : true<br /><br />You can add form input.<br /><br />&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "<a href="http://www.w3.org/TR/html4/loose.dtd" rel="nofollow" target="_blank">http://www.w3.org/TR/html4/loose.dtd</a>"&gt;<br />&lt;html&gt;<br /> &lt;head&gt;<br />  &lt;title&gt; New Document &lt;/title&gt;<br />  &lt;meta name="Generator" content=""&gt;<br />  &lt;meta name="Author" content="Helmi Anwar"&gt;<br />  &lt;meta name="Keywords" content=""&gt;<br />  &lt;meta name="Description" content=""&gt;<br /> &lt;/head&gt;<br /><br /> &lt;body&gt;<br /><br /> &lt;form method="post" action=""&gt;<br />    &lt;table&gt;<br />    &lt;tr class="rowid_add"&gt;<br />        &lt;td&gt;curl_setopt [0]&lt;/td&gt;<br />        &lt;td&gt;Name : &lt;input type="text" size="50" name="setopt_name[]"&gt;&lt;/td&gt;<br />        &lt;td&gt;Value :&lt;input type="text" size="50" name="setopt_value[]"&gt;&lt;/td&gt;<br />    &lt;/tr&gt;<br />    &lt;tr class="rowid_add"&gt;<br />        &lt;td&gt;curl_setopt [0]&lt;/td&gt;<br />        &lt;td&gt;Name : &lt;input type="text" size="50" name="setopt_name[]"&gt;&lt;/td&gt;<br />        &lt;td&gt;Value :&lt;input type="text" size="50" name="setopt_value[]"&gt;&lt;/td&gt;<br />    &lt;/tr&gt;<br />        &lt;tr class="rowid_add"&gt;<br />        &lt;td&gt;curl_setopt [0]&lt;/td&gt;<br />        &lt;td&gt;Name : &lt;input type="text" size="50" name="setopt_name[]"&gt;&lt;/td&gt;<br />        &lt;td&gt;Value :&lt;input type="text" size="50" name="setopt_value[]"&gt;&lt;/td&gt;<br />    &lt;/tr&gt;<br />    &lt;tr&gt;<br />        &lt;td&gt;&lt;input type="submit" name="submit_yes" value="EXECUTE"&gt;&lt;/td&gt;<br />    &lt;/tr&gt;<br />    &lt;/table&gt;<br /> &lt;/form&gt;<br /><br /> <br /> <span class="default">&lt;?php<br /><br />    </span><span class="keyword">function </span><span class="default">curl_test</span><span class="keyword">(</span><span class="default">$setopt_content</span><span class="keyword">)<br />    {<br />        </span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br />        </span><span class="default">curl_setopt_array</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">$setopt_content</span><span class="keyword">);<br />        </span><span class="default">$result_data </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />        </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />        return </span><span class="default">$result_data</span><span class="keyword">;<br />    }<br /><br />if(</span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'submit_yes'</span><span class="keyword">]==</span><span class="string">"EXECUTE"</span><span class="keyword">)<br />{<br />    <br />    foreach (</span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'setopt_name'</span><span class="keyword">] as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$index_content</span><span class="keyword">) <br />    {    <br />        </span><span class="default">$value_content</span><span class="keyword">=</span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'setopt_value'</span><span class="keyword">][</span><span class="default">$k</span><span class="keyword">];<br />        </span><span class="default">$index_content </span><span class="keyword">=</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$index_content</span><span class="keyword">);<br />        eval(</span><span class="string">'$index_content = '</span><span class="keyword">.</span><span class="default">$index_content</span><span class="keyword">.</span><span class="string">';'</span><span class="keyword">);<br />        </span><span class="comment">//echo ($index_content);<br />        </span><span class="keyword">if(</span><span class="default">$index_content</span><span class="keyword">!=</span><span class="string">''</span><span class="keyword">)<br />        {<br />            if(</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$value_content</span><span class="keyword">)==</span><span class="string">'TRUE'</span><span class="keyword">)<br />            {</span><span class="default">$setopt_content</span><span class="keyword">[</span><span class="default">$index_content</span><span class="keyword">]=</span><span class="default">TRUE</span><span class="keyword">;}<br />            elseif(</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$value_content</span><span class="keyword">)==</span><span class="string">'FALSE'</span><span class="keyword">)<br />            {</span><span class="default">$setopt_content</span><span class="keyword">[</span><span class="default">$index_content</span><span class="keyword">]=</span><span class="default">FALSE</span><span class="keyword">;}<br />            else<br />            {</span><span class="default">$setopt_content</span><span class="keyword">[</span><span class="default">$index_content</span><span class="keyword">]=</span><span class="default">$value_content</span><span class="keyword">;}<br />        }<br />    }<br /><br />    </span><span class="default">$info</span><span class="keyword">=</span><span class="default">curl_test</span><span class="keyword">(</span><span class="default">$setopt_content</span><span class="keyword">);<br /><br />}<br /><br /> </span><span class="default">?&gt;<br /></span> &lt;textarea name="result" rows="25" cols="100"&gt;<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$info</span><span class="keyword">);</span><span class="default">?&gt;</span>&lt;/textarea&gt;<br /> &lt;/body&gt;<br />&lt;/html&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="46539">  <div class="votes">
    <div id="Vu46539">
    <a href="https://www.php.net/manual/vote-note.php?id=46539&amp;page=ref.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd46539">
    <a href="https://www.php.net/manual/vote-note.php?id=46539&amp;page=ref.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V46539" title="51% like this...">
    3
    </div>
  </div>
  <a href="ref.curl.php.html#46539" class="name">
  <strong class="user"><em>mikeb[at]xamo[dot]com</em></strong></a><a class="genanchor" href="ref.curl.php.html#46539"> &para;</a><div class="date" title="2004-10-14 01:11"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom46539">
<div class="phpcode"><code><span class="html">A note of warning for PHP 5 users: if you try to fetch the CURLINFO_CONTENT_TYPE using curl_getinfo when there is a connect error, you will core dump PHP. I have informed the Curl team about this, so it will hopefully be fixed soon. Just make sure you check for an error before you look for this data.</span></code></div>
  </div>
 </div>
  <div class="note" id="82946">  <div class="votes">
    <div id="Vu82946">
    <a href="https://www.php.net/manual/vote-note.php?id=82946&amp;page=ref.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd82946">
    <a href="https://www.php.net/manual/vote-note.php?id=82946&amp;page=ref.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V82946" title="49% like this...">
    -1
    </div>
  </div>
  <a href="ref.curl.php.html#82946" class="name">
  <strong class="user"><em>Peter X.</em></strong></a><a class="genanchor" href="ref.curl.php.html#82946"> &para;</a><div class="date" title="2008-05-02 07:44"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom82946">
<div class="phpcode"><code><span class="html">Although it has been noted that cURL outperforms both file_get_contents and fopen when it comes to getting a file over a HTTP link, the disadvantage of cURL is that it has no way of only reading a part of a page at a time.<br /><br />For example, the following code is likely to generate a memory limit error:<br /><br /><span class="default">&lt;?php<br />$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="string">"<a href="http://www.example.com/reallybigfile.tar.gz" rel="nofollow" target="_blank">http://www.example.com/reallybigfile.tar.gz</a>"</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_BINARYTRANSFER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br /></span><span class="default">$output </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /><br /></span><span class="default">$fh </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"out.tar.gz"</span><span class="keyword">, </span><span class="string">'w'</span><span class="keyword">);<br /></span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">, </span><span class="default">$output</span><span class="keyword">);<br /></span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />While this, on the other hand, wouldn't<br /><br /><span class="default">&lt;?php<br />$hostfile </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"<a href="http://www.example.com/reallybigfile.tar.gz" rel="nofollow" target="_blank">http://www.example.com/reallybigfile.tar.gz</a>"</span><span class="keyword">, </span><span class="string">'r'</span><span class="keyword">);<br /></span><span class="default">$fh </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"out.tar.gz"</span><span class="keyword">, </span><span class="string">'w'</span><span class="keyword">);<br /><br />while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$hostfile</span><span class="keyword">)) {<br />    </span><span class="default">$output </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$hostfile</span><span class="keyword">, </span><span class="default">8192</span><span class="keyword">);<br />    </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">, </span><span class="default">$output</span><span class="keyword">);<br />}<br />    <br /></span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$hostfile</span><span class="keyword">);<br /></span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="73687">  <div class="votes">
    <div id="Vu73687">
    <a href="https://www.php.net/manual/vote-note.php?id=73687&amp;page=ref.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd73687">
    <a href="https://www.php.net/manual/vote-note.php?id=73687&amp;page=ref.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V73687" title="46% like this...">
    -2
    </div>
  </div>
  <a href="ref.curl.php.html#73687" class="name">
  <strong class="user"><em>killermonk at REMOVE dot killermonk dot com</em></strong></a><a class="genanchor" href="ref.curl.php.html#73687"> &para;</a><div class="date" title="2007-03-06 11:23"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom73687">
<div class="phpcode"><code><span class="html">For anyone trying to use cURL to submit to an ASP/ASPX page that uses an image as the submit button.<br /><br />Make sure that you have 'button_name.x' and 'button_name.y' in the post fields. PHP names these fields 'button_name_x' and 'button_name_y', while ASP uses a dot.<br /><br />Also, as noted above, be sure to include the '__VIEWSTATE' input field in your post request.</span></code></div>
  </div>
 </div>
  <div class="note" id="40437">  <div class="votes">
    <div id="Vu40437">
    <a href="https://www.php.net/manual/vote-note.php?id=40437&amp;page=ref.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd40437">
    <a href="https://www.php.net/manual/vote-note.php?id=40437&amp;page=ref.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V40437" title="47% like this...">
    -2
    </div>
  </div>
  <a href="ref.curl.php.html#40437" class="name">
  <strong class="user"><em>simon [at] vhostdirect [dot] co [dot] uk</em></strong></a><a class="genanchor" href="ref.curl.php.html#40437"> &para;</a><div class="date" title="2004-03-03 04:53"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom40437">
<div class="phpcode"><code><span class="html">It took me quite some to to figure out how to get Curl (with SSL), OpenSSL and PHP to play nicely together.<br /><br />After reinstalling MS-VC7 and compiling OpenSSL to finally realise this was'nt nesscary.<br /><br />If your like me and like *Nix systems more than Windows then you'll most probly have similar problems.<br /><br />I came across this, on a simple google with the right keywords.<br /><br /><a href="http://www.tonyspencer.com/journal/00000037.htm" rel="nofollow" target="_blank">http://www.tonyspencer.com/journal/00000037.htm</a><br /><br />I read thru that and found my mistake.<br /><br />Its just a small list of notes, I found them to be the best I've found on the subject and the most simplist.<br /><br />Dont forget to add a simple line like this into your scripts to get them working on Win32.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">if(</span><span class="default">$WINDIR</span><span class="keyword">) </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">, </span><span class="default">CURLOPT_CAINFO</span><span class="keyword">, </span><span class="string">"c:\\windows\\ca-bundle.crt"</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />Last note: ca-bundle.crt file is located in the Curl download. I stored mine in the windows directory and apache/php can access it fine.<br /><br />All the best and I hope this helps.<br /><br />Simon Lightfoot<br />vHost Direct Limited</span></code></div>
  </div>
 </div>
  <div class="note" id="45653">  <div class="votes">
    <div id="Vu45653">
    <a href="https://www.php.net/manual/vote-note.php?id=45653&amp;page=ref.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd45653">
    <a href="https://www.php.net/manual/vote-note.php?id=45653&amp;page=ref.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V45653" title="45% like this...">
    -3
    </div>
  </div>
  <a href="ref.curl.php.html#45653" class="name">
  <strong class="user"><em>alidrus at langkah dot com</em></strong></a><a class="genanchor" href="ref.curl.php.html#45653"> &para;</a><div class="date" title="2004-09-14 02:31"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom45653">
<div class="phpcode"><code><span class="html">In recent versions of php, CURLOPT_MUTE has (probably) been deprecated. Any attempt of using curl_setopt() to set CURLOPT_MUTE will give you a warning like this:<br /><br />PHP Notice:  Use of undefined constant CURLOPT_MUTE - assumed 'CURLOPT_MUTE' in ....<br /><br />If you wish tu silence the curl output, use the following instead:<br /><br /><span class="default">&lt;?php<br />    curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />And then,<br /><br /><span class="default">&lt;?php<br />    $curl_output</span><span class="keyword">=</span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />The output of the curl operation will be stored as a string in $curl_output while the operation remains totally silent.</span></code></div>
  </div>
 </div>
  <div class="note" id="93163">  <div class="votes">
    <div id="Vu93163">
    <a href="https://www.php.net/manual/vote-note.php?id=93163&amp;page=ref.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd93163">
    <a href="https://www.php.net/manual/vote-note.php?id=93163&amp;page=ref.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V93163" title="45% like this...">
    -6
    </div>
  </div>
  <a href="ref.curl.php.html#93163" class="name">
  <strong class="user"><em>Emprivo.com</em></strong></a><a class="genanchor" href="ref.curl.php.html#93163"> &para;</a><div class="date" title="2009-08-26 09:58"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom93163">
<div class="phpcode"><code><span class="html">Fixed bugs in the function posted earlier (better javascript redirect following and now supports HTTPS)<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">/*==================================<br />Get url content and response headers (given a url, follows all redirections on it and returned content and response headers of final url)<br /><br />@return    array[0]    content<br />        array[1]    array of response headers<br />==================================*/<br /></span><span class="keyword">function </span><span class="default">get_url</span><span class="keyword">( </span><span class="default">$url</span><span class="keyword">,  </span><span class="default">$javascript_loop </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$timeout </span><span class="keyword">= </span><span class="default">5 </span><span class="keyword">)<br />{<br />    </span><span class="default">$url </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">"&amp;amp;"</span><span class="keyword">, </span><span class="string">"&amp;"</span><span class="keyword">, </span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">)) );<br /><br />    </span><span class="default">$cookie </span><span class="keyword">= </span><span class="default">tempnam </span><span class="keyword">(</span><span class="string">"/tmp"</span><span class="keyword">, </span><span class="string">"CURLCOOKIE"</span><span class="keyword">);<br />    </span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br />    </span><span class="default">curl_setopt</span><span class="keyword">( </span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_USERAGENT</span><span class="keyword">, </span><span class="string">"Mozilla/5.0 (Windows; U; Windows NT 5.1; rv:1.7.3) Gecko/20041001 Firefox/0.10.1" </span><span class="keyword">);<br />    </span><span class="default">curl_setopt</span><span class="keyword">( </span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$url </span><span class="keyword">);<br />    </span><span class="default">curl_setopt</span><span class="keyword">( </span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEJAR</span><span class="keyword">, </span><span class="default">$cookie </span><span class="keyword">);<br />    </span><span class="default">curl_setopt</span><span class="keyword">( </span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FOLLOWLOCATION</span><span class="keyword">, </span><span class="default">true </span><span class="keyword">);<br />    </span><span class="default">curl_setopt</span><span class="keyword">( </span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_ENCODING</span><span class="keyword">, </span><span class="string">"" </span><span class="keyword">);<br />    </span><span class="default">curl_setopt</span><span class="keyword">( </span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">true </span><span class="keyword">);<br />    </span><span class="default">curl_setopt</span><span class="keyword">( </span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_AUTOREFERER</span><span class="keyword">, </span><span class="default">true </span><span class="keyword">);<br />    </span><span class="default">curl_setopt</span><span class="keyword">( </span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_SSL_VERIFYPEER</span><span class="keyword">, </span><span class="default">false </span><span class="keyword">);    </span><span class="comment"># required for https urls<br />    </span><span class="default">curl_setopt</span><span class="keyword">( </span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_CONNECTTIMEOUT</span><span class="keyword">, </span><span class="default">$timeout </span><span class="keyword">);<br />    </span><span class="default">curl_setopt</span><span class="keyword">( </span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_TIMEOUT</span><span class="keyword">, </span><span class="default">$timeout </span><span class="keyword">);<br />    </span><span class="default">curl_setopt</span><span class="keyword">( </span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_MAXREDIRS</span><span class="keyword">, </span><span class="default">10 </span><span class="keyword">);<br />    </span><span class="default">$content </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">( </span><span class="default">$ch </span><span class="keyword">);<br />    </span><span class="default">$response </span><span class="keyword">= </span><span class="default">curl_getinfo</span><span class="keyword">( </span><span class="default">$ch </span><span class="keyword">);<br />    </span><span class="default">curl_close </span><span class="keyword">( </span><span class="default">$ch </span><span class="keyword">);<br /><br />    if (</span><span class="default">$response</span><span class="keyword">[</span><span class="string">'http_code'</span><span class="keyword">] == </span><span class="default">301 </span><span class="keyword">|| </span><span class="default">$response</span><span class="keyword">[</span><span class="string">'http_code'</span><span class="keyword">] == </span><span class="default">302</span><span class="keyword">)<br />    {<br />        </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"user_agent"</span><span class="keyword">, </span><span class="string">"Mozilla/5.0 (Windows; U; Windows NT 5.1; rv:1.7.3) Gecko/20041001 Firefox/0.10.1"</span><span class="keyword">);<br /><br />        if ( </span><span class="default">$headers </span><span class="keyword">= </span><span class="default">get_headers</span><span class="keyword">(</span><span class="default">$response</span><span class="keyword">[</span><span class="string">'url'</span><span class="keyword">]) )<br />        {<br />            foreach( </span><span class="default">$headers </span><span class="keyword">as </span><span class="default">$value </span><span class="keyword">)<br />            {<br />                if ( </span><span class="default">substr</span><span class="keyword">( </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">), </span><span class="default">0</span><span class="keyword">, </span><span class="default">9 </span><span class="keyword">) == </span><span class="string">"location:" </span><span class="keyword">)<br />                    return </span><span class="default">get_url</span><span class="keyword">( </span><span class="default">trim</span><span class="keyword">( </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$value</span><span class="keyword">, </span><span class="default">9</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) ) ) );<br />            }<br />        }<br />    }<br /><br />    if (    ( </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/&gt;[[:space:]]+window\.location\.replace\('(.*)'\)/i"</span><span class="keyword">, </span><span class="default">$content</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) || </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/&gt;[[:space:]]+window\.location\=\"(.*)\"/i"</span><span class="keyword">, </span><span class="default">$content</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) ) &amp;&amp;<br />            </span><span class="default">$javascript_loop </span><span class="keyword">&lt; </span><span class="default">5<br />    </span><span class="keyword">)<br />    {<br />        return </span><span class="default">get_url</span><span class="keyword">( </span><span class="default">$value</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$javascript_loop</span><span class="keyword">+</span><span class="default">1 </span><span class="keyword">);<br />    }<br />    else<br />    {<br />        return array( </span><span class="default">$content</span><span class="keyword">, </span><span class="default">$response </span><span class="keyword">);<br />    }<br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="72608">  <div class="votes">
    <div id="Vu72608">
    <a href="https://www.php.net/manual/vote-note.php?id=72608&amp;page=ref.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd72608">
    <a href="https://www.php.net/manual/vote-note.php?id=72608&amp;page=ref.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V72608" title="42% like this...">
    -4
    </div>
  </div>
  <a href="ref.curl.php.html#72608" class="name">
  <strong class="user"><em>gordon_e_rouse at yahoo dot com dot au</em></strong></a><a class="genanchor" href="ref.curl.php.html#72608"> &para;</a><div class="date" title="2007-01-25 02:24"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom72608">
<div class="phpcode"><code><span class="html">Using curl to take snapshots of the current page for emailing the HTML is a clever little idea. (ie: Email this page to a friend)<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">//to be explained below!<br /></span><span class="default">session_write_close</span><span class="keyword">();<br /><br /></span><span class="default">$pageurl </span><span class="keyword">= </span><span class="string">"<a href="http://www.site.com/content.php?PHPSESSID=123XYZ" rel="nofollow" target="_blank">http://www.site.com/content.php?PHPSESSID=123XYZ</a><br />curl_setopt(</span><span class="default">$ch</span><span class="string">, CURLOPT_RETURNTRANSFER, 1);<br /><br />curl_setopt (</span><span class="default">$ch</span><span class="string">, CURLOPT_URL, </span><span class="default">$pageurl</span><span class="string"> ); <br /></span><span class="default">$html</span><span class="string"> = curl_exec ( </span><span class="default">$ch</span><span class="string"> );<br />curl_close(</span><span class="default">$ch</span><span class="string">);<br /><br />//then you need to fix pathing to absolute<br /></span><span class="default">$search</span><span class="string"> = "</span><span class="keyword">/(</span><span class="default">src</span><span class="keyword">|</span><span class="default">href</span><span class="keyword">|</span><span class="default">background</span><span class="keyword">)=\</span><span class="string">"[^:,^&gt;,^\"]*\"/i"</span><span class="keyword">;<br /><br /></span><span class="default">preg_match_all </span><span class="keyword">( </span><span class="default">$search</span><span class="keyword">, </span><span class="default">$html</span><span class="keyword">, </span><span class="default">$a_matches </span><span class="keyword">);<br /><br /></span><span class="comment">//you can figure out the rest ! but thought the reg expression is useful as well<br /></span><span class="default">?&gt;<br /></span><br />But here is the catch, you may want to make sure curl connects to the server under the same session as the browser. So naturally you pass the session cookie through the curl system either by the cookie jar system, or through the query string in the path.<br /><br />This is where you will get stuck. PHP will need write access to the same session file simultaneously!! causing serious hanging issues!<br /><br />This is why you should close off your session before you make curl take a page snapshot!</span></code></div>
  </div>
 </div>
  <div class="note" id="62547">  <div class="votes">
    <div id="Vu62547">
    <a href="https://www.php.net/manual/vote-note.php?id=62547&amp;page=ref.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd62547">
    <a href="https://www.php.net/manual/vote-note.php?id=62547&amp;page=ref.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V62547" title="40% like this...">
    -5
    </div>
  </div>
  <a href="ref.curl.php.html#62547" class="name">
  <strong class="user"><em>richardkmiller AT gmail</em></strong></a><a class="genanchor" href="ref.curl.php.html#62547"> &para;</a><div class="date" title="2006-03-02 04:21"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom62547">
<div class="phpcode"><code><span class="html">Beware of any extra spaces in the URL.  A trailing space in the URL caused my script to fail with the message "empty reply from server".</span></code></div>
  </div>
 </div>
  <div class="note" id="62194">  <div class="votes">
    <div id="Vu62194">
    <a href="https://www.php.net/manual/vote-note.php?id=62194&amp;page=ref.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd62194">
    <a href="https://www.php.net/manual/vote-note.php?id=62194&amp;page=ref.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V62194" title="38% like this...">
    -6
    </div>
  </div>
  <a href="ref.curl.php.html#62194" class="name">
  <strong class="user"><em>stevehartken at hotmail dot com</em></strong></a><a class="genanchor" href="ref.curl.php.html#62194"> &para;</a><div class="date" title="2006-02-21 10:40"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom62194">
<div class="phpcode"><code><span class="html">I had the following experience when harvesting urls with a get variable from a page using cUrl. HTML pages will output ampersands as &amp;amp when the page is read by the curl function. <br /><br />If you code a script to find all hyperlinks, it will use &amp;amp instead of &amp;, especially using a regular expression search.<br /><br />It is hard to detect because when you output the url to the browser it renders the html. To fix, add a line to replace the &amp;amp with &amp;.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">processURL</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">){<br />    </span><span class="default">$url</span><span class="keyword">=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'&amp;amp;'</span><span class="keyword">,</span><span class="string">'&amp;'</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">);<br />    </span><span class="default">$ch</span><span class="keyword">=</span><span class="default">curl_init</span><span class="keyword">();<br />    </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">);<br />    </span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />    </span><span class="default">$xml </span><span class="keyword">= </span><span class="default">curl_exec </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />    </span><span class="default">curl_close </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />    echo </span><span class="default">$xml</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="67940">  <div class="votes">
    <div id="Vu67940">
    <a href="https://www.php.net/manual/vote-note.php?id=67940&amp;page=ref.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd67940">
    <a href="https://www.php.net/manual/vote-note.php?id=67940&amp;page=ref.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V67940" title="35% like this...">
    -6
    </div>
  </div>
  <a href="ref.curl.php.html#67940" class="name">
  <strong class="user"><em>galvao at galvao.eti.br</em></strong></a><a class="genanchor" href="ref.curl.php.html#67940"> &para;</a><div class="date" title="2006-07-06 08:27"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom67940">
<div class="phpcode"><code><span class="html">Note that on Win32 this documentation can get a little confusing.<br /><br />In order to get this to work you need to:<br /><br />1) Be sure that the folder where libeay32.dll and ssleay32.dll - tipically C:\\PHP - is present on the PATH variable.<br /><br />2) Uncomment - remove the semi-colon - the line that says "extension=php_curl.dll" from php.ini<br /><br />3) Restart the webserver (you should already know this one, but...)<br /><br />It took me some time to realize this, since this page doesn't mention the need to uncomment that php.ini's line.</span></code></div>
  </div>
 </div>
  <div class="note" id="125821">  <div class="votes">
    <div id="Vu125821">
    <a href="https://www.php.net/manual/vote-note.php?id=125821&amp;page=ref.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd125821">
    <a href="https://www.php.net/manual/vote-note.php?id=125821&amp;page=ref.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V125821" title="25% like this...">
    -2
    </div>
  </div>
  <a href="ref.curl.php.html#125821" class="name">
  <strong class="user"><em>ciaoandriana8 at gmail dot com</em></strong></a><a class="genanchor" href="ref.curl.php.html#125821"> &para;</a><div class="date" title="2021-02-14 06:13"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom125821">
<div class="phpcode"><code><span class="html">This is sample script to use curl, Just input curl_setopt,<br />exp :<br />curlsetop[0] ==&gt; name : CURLOPT_URL ; value : <a href="https://amzn.to/3njlWW6" rel="nofollow" target="_blank">https://amzn.to/3njlWW6</a>      <br />curlsetop[1] ==&gt; name : CURLOPT_RETURNTRANSFER ; value : true<br />curlsetop[2] ==&gt; name : CURLOPT_FOLLOWLOCATION ; value : true<br /><br />You can add form input.<br /><br />&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "<a href="http://www.w3.org/TR/html4/loose.dtd" rel="nofollow" target="_blank">http://www.w3.org/TR/html4/loose.dtd</a>"&gt;<br />&lt;html&gt;<br />&lt;head&gt;<br />  &lt;title&gt; New Document &lt;/title&gt;<br />  &lt;meta name="Generator" content=""&gt;<br />  &lt;meta name="Author" content="Helmi Anwar"&gt;<br />  &lt;meta name="Keywords" content=""&gt;<br />  &lt;meta name="Description" content=""&gt;<br />&lt;/head&gt;<br /><br />&lt;body&gt;<br /><br />&lt;form method="post" action=""&gt;<br />    &lt;table&gt;<br />    &lt;tr class="rowid_add"&gt;<br />        &lt;td&gt;curl_setopt [0]&lt;/td&gt;<br />        &lt;td&gt;Name : &lt;input type="text" size="50" name="setopt_name[]"&gt;&lt;/td&gt;<br />        &lt;td&gt;Value :&lt;input type="text" size="50" name="setopt_value[]"&gt;&lt;/td&gt;<br />    &lt;/tr&gt;<br />    &lt;tr class="rowid_add"&gt;<br />        &lt;td&gt;curl_setopt [0]&lt;/td&gt;<br />        &lt;td&gt;Name : &lt;input type="text" size="50" name="setopt_name[]"&gt;&lt;/td&gt;<br />        &lt;td&gt;Value :&lt;input type="text" size="50" name="setopt_value[]"&gt;&lt;/td&gt;<br />    &lt;/tr&gt;<br />        &lt;tr class="rowid_add"&gt;<br />        &lt;td&gt;curl_setopt [0]&lt;/td&gt;<br />        &lt;td&gt;Name : &lt;input type="text" size="50" name="setopt_name[]"&gt;&lt;/td&gt;<br />        &lt;td&gt;Value :&lt;input type="text" size="50" name="setopt_value[]"&gt;&lt;/td&gt;<br />    &lt;/tr&gt;<br />    &lt;tr&gt;<br />        &lt;td&gt;&lt;input type="submit" name="submit_yes" value="EXECUTE"&gt;&lt;/td&gt;<br />    &lt;/tr&gt;<br />    &lt;/table&gt;<br />&lt;/form&gt;<br /><br /><span class="default">&lt;?php<br /><br />    </span><span class="keyword">function </span><span class="default">curl_test</span><span class="keyword">(</span><span class="default">$setopt_content</span><span class="keyword">)<br />    {<br />        </span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br />        </span><span class="default">curl_setopt_array</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">$setopt_content</span><span class="keyword">);<br />        </span><span class="default">$result_data </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />        </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />        return </span><span class="default">$result_data</span><span class="keyword">;<br />    }<br /><br />if(</span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'submit_yes'</span><span class="keyword">]==</span><span class="string">"EXECUTE"</span><span class="keyword">)<br />{<br />   <br />    foreach (</span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'setopt_name'</span><span class="keyword">] as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$index_content</span><span class="keyword">)<br />    {   <br />        </span><span class="default">$value_content</span><span class="keyword">=</span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'setopt_value'</span><span class="keyword">][</span><span class="default">$k</span><span class="keyword">];<br />        </span><span class="default">$index_content </span><span class="keyword">=</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$index_content</span><span class="keyword">);<br />        eval(</span><span class="string">'$index_content = '</span><span class="keyword">.</span><span class="default">$index_content</span><span class="keyword">.</span><span class="string">';'</span><span class="keyword">);<br />        </span><span class="comment">//echo ($index_content);<br />        </span><span class="keyword">if(</span><span class="default">$index_content</span><span class="keyword">!=</span><span class="string">''</span><span class="keyword">)<br />        {<br />            if(</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$value_content</span><span class="keyword">)==</span><span class="string">'TRUE'</span><span class="keyword">)<br />            {</span><span class="default">$setopt_content</span><span class="keyword">[</span><span class="default">$index_content</span><span class="keyword">]=</span><span class="default">TRUE</span><span class="keyword">;}<br />            elseif(</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$value_content</span><span class="keyword">)==</span><span class="string">'FALSE'</span><span class="keyword">)<br />            {</span><span class="default">$setopt_content</span><span class="keyword">[</span><span class="default">$index_content</span><span class="keyword">]=</span><span class="default">FALSE</span><span class="keyword">;}<br />            else<br />            {</span><span class="default">$setopt_content</span><span class="keyword">[</span><span class="default">$index_content</span><span class="keyword">]=</span><span class="default">$value_content</span><span class="keyword">;}<br />        }<br />    }<br /><br />    </span><span class="default">$info</span><span class="keyword">=</span><span class="default">curl_test</span><span class="keyword">(</span><span class="default">$setopt_content</span><span class="keyword">);<br /><br />}<br /><br /></span><span class="default">?&gt;<br /></span>&lt;textarea name="result" rows="25" cols="100"&gt;<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$info</span><span class="keyword">);</span><span class="default">?&gt;</span>&lt;/textarea&gt;<br />&lt;/body&gt;<br />&lt;/html&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="43156">  <div class="votes">
    <div id="Vu43156">
    <a href="https://www.php.net/manual/vote-note.php?id=43156&amp;page=ref.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd43156">
    <a href="https://www.php.net/manual/vote-note.php?id=43156&amp;page=ref.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V43156" title="33% like this...">
    -7
    </div>
  </div>
  <a href="ref.curl.php.html#43156" class="name">
  <strong class="user"><em>rich @ richud dot com</em></strong></a><a class="genanchor" href="ref.curl.php.html#43156"> &para;</a><div class="date" title="2004-06-11 07:12"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom43156">
<div class="phpcode"><code><span class="html">If you have upgraded to using thread safe PHP (with apache 2 MPM=worker) note that<br />CURLOPT_COOKIEJAR / CURLOPT_COOKIEFILE both need an absolute path set for the cookie file location and no longer take a relative path. <br />(As before, also remember to have set correct permissions to allow a writeable cookie file/dir by apache)<br />[php 4.3.7/apache v2.0.49]</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=ref.curl&amp;redirect=https://www.php.net/manual/ru/ref.curl.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="book.curl.php.html">cURL</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="intro.curl.php.html" title="Введение">Введение</a>
                        </li>
                                                <li class="">
                            <a href="curl.setup.php.html" title="Установка и настройка">Установка и настройка</a>
                        </li>
                                                <li class="">
                            <a href="curl.constants.php.html" title="Предопределённые константы">Предопределённые константы</a>
                        </li>
                                                <li class="">
                            <a href="curl.examples.php.html" title="Примеры">Примеры</a>
                        </li>
                                                <li class="current">
                            <a href="ref.curl.php.html" title="Функции cURL">Функции cURL</a>
                        </li>
                                                <li class="">
                            <a href="class.curlhandle.php.html" title="CurlHandle">CurlHandle</a>
                        </li>
                                                <li class="">
                            <a href="class.curlmultihandle.php.html" title="CurlMultiHandle">CurlMultiHandle</a>
                        </li>
                                                <li class="">
                            <a href="class.curlsharehandle.php.html" title="CurlShareHandle">CurlShareHandle</a>
                        </li>
                                                <li class="">
                            <a href="class.curlfile.php.html" title="CURLFile">CURLFile</a>
                        </li>
                                                <li class="">
                            <a href="class.curlstringfile.php.html" title="CURLStringFile">CURLStringFile</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
