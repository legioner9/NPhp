<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: Функции FTP - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="ref.ftp.php.html">
 <link rel="shorturl" href="https://www.php.net/ftp">
 <link rel="alternate" href="https://www.php.net/ftp" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="book.ftp.php.html">
 <link rel="prev" href="ftp.examples-basic.php.html">
 <link rel="next" href="function.ftp-alloc.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/ref.ftp.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/ref.ftp.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/ref.ftp.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/ref.ftp.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/ref.ftp.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/ref.ftp.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/ref.ftp.php" hreflang="pt_BR">
 <link rel="alternate" href="ref.ftp.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/ref.ftp.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/ref.ftp.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.ftp-alloc.php.html">
          ftp_alloc &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="ftp.examples-basic.php.html">
          &laquo; Простое использование        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.remote.other.php.html'>Другие службы</a></li>      <li><a href='book.ftp.php.html'>FTP</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/ref.ftp.php'>English</option>
            <option value='de/ref.ftp.php'>German</option>
            <option value='es/ref.ftp.php'>Spanish</option>
            <option value='fr/ref.ftp.php'>French</option>
            <option value='it/ref.ftp.php'>Italian</option>
            <option value='ja/ref.ftp.php'>Japanese</option>
            <option value='pt_BR/ref.ftp.php'>Brazilian Portuguese</option>
            <option value='ru/ref.ftp.php' selected="selected">Russian</option>
            <option value='tr/ref.ftp.php'>Turkish</option>
            <option value='zh/ref.ftp.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/ftp/reference.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Fref.ftp%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="ref.ftp" class="reference">
 <h1 class="title">Функции FTP</h1>

 


























































































































































































































<h2>Содержание</h2><ul class="chunklist chunklist_reference"><li><a href="function.ftp-alloc.php.html">ftp_alloc</a> — Резервирует место на диске для закачиваемого файла</li><li><a href="function.ftp-append.php.html">ftp_append</a> — Добавляет содержимое файла в конец другого файла на FTP-сервере</li><li><a href="function.ftp-cdup.php.html">ftp_cdup</a> — Переходит в родительскую директорию</li><li><a href="function.ftp-chdir.php.html">ftp_chdir</a> — Изменяет текущую директорию на FTP-сервере</li><li><a href="function.ftp-chmod.php.html">ftp_chmod</a> — Устанавливает права доступа к файлу</li><li><a href="function.ftp-close.php.html">ftp_close</a> — Закрывает соединение с FTP-сервером</li><li><a href="function.ftp-connect.php.html">ftp_connect</a> — Устанавливает соединение с FTP-сервером</li><li><a href="function.ftp-delete.php.html">ftp_delete</a> — Удаляет файл на FTP-сервере</li><li><a href="function.ftp-exec.php.html">ftp_exec</a> — Запрашивает выполнение команды на FTP-сервере</li><li><a href="function.ftp-fget.php.html">ftp_fget</a> — Скачивает файл с FTP-сервера и сохраняет его в предварительно открытом файле</li><li><a href="function.ftp-fput.php.html">ftp_fput</a> — Загружает предварительно открытый файл на FTP-сервер</li><li><a href="function.ftp-get-option.php.html">ftp_get_option</a> — Получает текущие параметры FTP-соединения</li><li><a href="function.ftp-get.php.html">ftp_get</a> — Скачивает файл с FTP-сервера</li><li><a href="function.ftp-login.php.html">ftp_login</a> — Выполняет вход на FTP-сервер</li><li><a href="function.ftp-mdtm.php.html">ftp_mdtm</a> — Возвращает время последней модификации файла</li><li><a href="function.ftp-mkdir.php.html">ftp_mkdir</a> — Создаёт директорию</li><li><a href="function.ftp-mlsd.php.html">ftp_mlsd</a> — Возвращает список файлов в заданной директории</li><li><a href="function.ftp-nb-continue.php.html">ftp_nb_continue</a> — Продолжает асинхронную операцию</li><li><a href="function.ftp-nb-fget.php.html">ftp_nb_fget</a> — Скачивает файл с FTP-сервера в асинхронном режиме и сохраняет его в предварительно открытом файле</li><li><a href="function.ftp-nb-fput.php.html">ftp_nb_fput</a> — Загружает предварительно открытый файл на FTP-сервер в асинхронном режиме</li><li><a href="function.ftp-nb-get.php.html">ftp_nb_get</a> — Скачивает файл с FTP-сервера в асинхронном режиме и сохраняет его в локальный файл</li><li><a href="function.ftp-nb-put.php.html">ftp_nb_put</a> — Загружает файл на FTP-сервер в асинхронном режиме</li><li><a href="function.ftp-nlist.php.html">ftp_nlist</a> — Возвращает список файлов в заданной директории</li><li><a href="function.ftp-pasv.php.html">ftp_pasv</a> — Включает или выключает пассивный режим</li><li><a href="function.ftp-put.php.html">ftp_put</a> — Загружает файл на FTP-сервер</li><li><a href="function.ftp-pwd.php.html">ftp_pwd</a> — Возвращает имя текущей директории</li><li><a href="function.ftp-quit.php.html">ftp_quit</a> — Псевдоним ftp_close</li><li><a href="function.ftp-raw.php.html">ftp_raw</a> — Отправляет произвольную команду FTP-серверу</li><li><a href="function.ftp-rawlist.php.html">ftp_rawlist</a> — Возвращает подробный список файлов в заданной директории</li><li><a href="function.ftp-rename.php.html">ftp_rename</a> — Переименовывает файл или директорию на FTP-сервере</li><li><a href="function.ftp-rmdir.php.html">ftp_rmdir</a> — Удаляет директорию</li><li><a href="function.ftp-set-option.php.html">ftp_set_option</a> — Устанавливает параметры соединения с FTP-сервером</li><li><a href="function.ftp-site.php.html">ftp_site</a> — Отправляет серверу команду SITE</li><li><a href="function.ftp-size.php.html">ftp_size</a> — Возвращает размер указанного файла</li><li><a href="function.ftp-ssl-connect.php.html">ftp_ssl_connect</a> — Устанавливает соединение с FTP-сервером через SSL</li><li><a href="function.ftp-systype.php.html">ftp_systype</a> — Возвращает тип операционной системы FTP-сервера</li></ul>
</div>
<section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=ref.ftp&amp;redirect=https://www.php.net/manual/ru/ref.ftp.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">16 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="68915">  <div class="votes">
    <div id="Vu68915">
    <a href="https://www.php.net/manual/vote-note.php?id=68915&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd68915">
    <a href="https://www.php.net/manual/vote-note.php?id=68915&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V68915" title="63% like this...">
    3
    </div>
  </div>
  <a href="ref.ftp.php.html#68915" class="name">
  <strong class="user"><em>nicklas at programmera dot nu</em></strong></a><a class="genanchor" href="ref.ftp.php.html#68915"> &para;</a><div class="date" title="2006-08-15 02:56"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom68915">
<div class="phpcode"><code><span class="html">I didn't quite like my FTP program since I had to make all the settings all over when i restarted the client, so I made this script for simple ftp uploading, its running as a CLI app.<br /><br /><span class="default">&lt;?php<br /><br />    </span><span class="comment">//if STDIN isn't defined, define it<br />    </span><span class="keyword">if (!</span><span class="default">defined</span><span class="keyword">(</span><span class="string">"STDIN"</span><span class="keyword">))<br />    {<br />    <br />        </span><span class="default">define</span><span class="keyword">(</span><span class="string">"STDIN"</span><span class="keyword">, </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"php://stdin"</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">));<br />        <br />    }<br />    <br />    echo </span><span class="string">"FTP file uploader\r\n\r\n"</span><span class="keyword">;<br /><br />    echo </span><span class="string">"Server: "</span><span class="keyword">;<br /><br />    </span><span class="comment">//trim() all the fgets cause it seams to add a \n<br />    </span><span class="default">$server </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">fgets</span><span class="keyword">(</span><span class="default">STDIN</span><span class="keyword">));<br />    <br />    echo </span><span class="string">"Username: "</span><span class="keyword">;<br />    <br />    </span><span class="default">$username </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">fgets</span><span class="keyword">(</span><span class="default">STDIN</span><span class="keyword">));<br />    <br />    echo </span><span class="string">"Password: "</span><span class="keyword">;<br />    <br />    </span><span class="default">$password </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">fgets</span><span class="keyword">(</span><span class="default">STDIN</span><span class="keyword">));<br />    <br />    </span><span class="default">$connect </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">$server</span><span class="keyword">);<br />    </span><span class="default">$login </span><span class="keyword">= </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$connect</span><span class="keyword">, </span><span class="default">$username</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">);<br />    <br />    if ((!</span><span class="default">$connect</span><span class="keyword">) || (!</span><span class="default">$login</span><span class="keyword">))<br />    {<br />    <br />        exit(</span><span class="string">"Login failed.\r\n"</span><span class="keyword">);<br />        <br />    }<br />    <br />    echo </span><span class="string">"Connected\r\n"</span><span class="keyword">;<br /><br />    echo </span><span class="string">"PASV (Y/Any key = Off): "</span><span class="keyword">;<br />    <br />    if(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">fgets</span><span class="keyword">(</span><span class="default">STDIN</span><span class="keyword">)) == </span><span class="string">"Y"</span><span class="keyword">)<br />    {<br /><br />        </span><span class="comment">//enable passive mode<br />        </span><span class="default">ftp_pasv</span><span class="keyword">(</span><span class="default">$connect</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />    <br />            echo </span><span class="string">"PASV: On\r\n"</span><span class="keyword">;<br />        <br />    }<br />    else<br />    {<br />    <br />        echo </span><span class="string">"PASV: Off\r\n"</span><span class="keyword">;<br /><br />    }<br /><br />    </span><span class="default">$showContent </span><span class="keyword">= </span><span class="default">ftp_nlist</span><span class="keyword">(</span><span class="default">$connect</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">);<br />    <br />    echo </span><span class="string">"Listing Contents:\r\n"</span><span class="keyword">;<br />        <br />        </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$showContent</span><span class="keyword">);<br /><br />    echo </span><span class="string">"File to upload: "</span><span class="keyword">;<br />    <br />    </span><span class="default">$file </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">fgets</span><span class="keyword">(</span><span class="default">STDIN</span><span class="keyword">));<br />    <br />    </span><span class="comment">//escape the uploading process by typing "exit;"<br />    </span><span class="keyword">if (</span><span class="default">$file </span><span class="keyword">== </span><span class="string">"exit;"</span><span class="keyword">)<br />    {<br />    <br />        exit;<br />    <br />    }<br />    <br />    </span><span class="comment">//use "$file, $file" since the file shouldn't be renamed, also if its a binary file change the last argument to FTP_BINARY<br />    </span><span class="default">$upload </span><span class="keyword">= </span><span class="default">ftp_put</span><span class="keyword">(</span><span class="default">$connect</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">, </span><span class="default">FTP_ASCII</span><span class="keyword">);<br />    <br />    if (!</span><span class="default">$upload</span><span class="keyword">)<br />    {<br />    <br />        exit(</span><span class="string">"Upload failed.\r\n"</span><span class="keyword">);<br />        <br />    }<br />    else<br />    {<br />    <br />        echo </span><span class="string">"The file \"" </span><span class="keyword">. </span><span class="default">$file </span><span class="keyword">. </span><span class="string">"\" was successfully uploaded. :)\r\nSize of \"" </span><span class="keyword">. </span><span class="default">$file </span><span class="keyword">. </span><span class="string">"\": " </span><span class="keyword">. </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">) / </span><span class="default">1024 </span><span class="keyword">.</span><span class="string">"kb.\r\n"</span><span class="keyword">;<br />        echo </span><span class="string">"My work is done, bye.\r\n"</span><span class="keyword">;<br />        <br />    }<br />    <br />    </span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$connect</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="70706">  <div class="votes">
    <div id="Vu70706">
    <a href="https://www.php.net/manual/vote-note.php?id=70706&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd70706">
    <a href="https://www.php.net/manual/vote-note.php?id=70706&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V70706" title="57% like this...">
    2
    </div>
  </div>
  <a href="ref.ftp.php.html#70706" class="name">
  <strong class="user"><em>cgray at premierconsulting dot com (Chris Gray)</em></strong></a><a class="genanchor" href="ref.ftp.php.html#70706"> &para;</a><div class="date" title="2006-10-24 08:58"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom70706">
<div class="phpcode"><code><span class="html">After looking everywhere for a "FULLY WORKING" ftp uploader script, I finally came up with this, by using a lot of various one’s I found on the web. If you find a better way of doing something, please let me know. Thanks, and Enjoy<br /><br /><span class="default">&lt;?php<br />  </span><span class="keyword">if(isset(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'SubmitFile'</span><span class="keyword">])){<br />      </span><span class="default">$myFile </span><span class="keyword">= </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'txt_file'</span><span class="keyword">]; </span><span class="comment">// This will make an array out of the file information that was stored.<br />      </span><span class="default">$file </span><span class="keyword">= </span><span class="default">$myFile</span><span class="keyword">[</span><span class="string">'tmp_name'</span><span class="keyword">];  </span><span class="comment">//Converts the array into a new string containing the path name on the server where your file is.<br /> <br />      </span><span class="default">$myFileName </span><span class="keyword">= </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'txt_fileName'</span><span class="keyword">]); </span><span class="comment">//Retrieve filename out of file path<br /><br />      </span><span class="default">$destination_file </span><span class="keyword">= </span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$myFileName</span><span class="keyword">;  </span><span class="comment">//where you want to throw the file on the webserver (relative to your login dir)<br /><br />      // connection settings<br />      </span><span class="default">$ftp_server </span><span class="keyword">= </span><span class="string">"127.0.0.1"</span><span class="keyword">;  </span><span class="comment">//address of ftp server.<br />      </span><span class="default">$ftp_user_name </span><span class="keyword">= </span><span class="string">"Your UserName"</span><span class="keyword">; </span><span class="comment">// Username<br />      </span><span class="default">$ftp_user_pass </span><span class="keyword">= </span><span class="string">"Your Password"</span><span class="keyword">;   </span><span class="comment">// Password<br /><br />      </span><span class="default">$conn_id </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">$ftp_server</span><span class="keyword">);        </span><span class="comment">// set up basic connection<br />      </span><span class="default">$login_result </span><span class="keyword">= </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$ftp_user_name</span><span class="keyword">, </span><span class="default">$ftp_user_pass</span><span class="keyword">) or die(</span><span class="string">"&lt;h2&gt;You do not have access to this ftp server!&lt;/h2&gt;"</span><span class="keyword">);   </span><span class="comment">// login with username and password, or give invalid user message<br />      </span><span class="keyword">if ((!</span><span class="default">$conn_id</span><span class="keyword">) || (!</span><span class="default">$login_result</span><span class="keyword">)) {  </span><span class="comment">// check connection<br />             // wont ever hit this, b/c of the die call on ftp_login<br />             </span><span class="keyword">echo </span><span class="string">"FTP connection has failed! &lt;br /&gt;"</span><span class="keyword">;<br />             echo </span><span class="string">"Attempted to connect to </span><span class="default">$ftp_server</span><span class="string"> for user </span><span class="default">$ftp_user_name</span><span class="string">"</span><span class="keyword">;<br />             exit;<br />         } else {<br />         </span><span class="comment">//    echo "Connected to $ftp_server, for user $ftp_user_name &lt;br /&gt;";<br />      </span><span class="keyword">}<br /><br />      </span><span class="default">$upload </span><span class="keyword">= </span><span class="default">ftp_put</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$destination_file</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">, </span><span class="default">FTP_BINARY</span><span class="keyword">);  </span><span class="comment">// upload the file<br />      </span><span class="keyword">if (!</span><span class="default">$upload</span><span class="keyword">) {  </span><span class="comment">// check upload status<br />         </span><span class="keyword">echo </span><span class="string">"&lt;h2&gt;FTP upload of </span><span class="default">$myFileName</span><span class="string"> has failed!&lt;/h2&gt; &lt;br /&gt;"</span><span class="keyword">;<br />      } else {<br />         echo </span><span class="string">"Uploading </span><span class="default">$myFileName</span><span class="string"> Complete!&lt;br /&gt;&lt;br /&gt;"</span><span class="keyword">;<br />      }<br /><br />      </span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">); </span><span class="comment">// close the FTP stream<br />  </span><span class="keyword">}<br /></span><span class="default">?&gt;<br /></span><br />&lt;html&gt;<br />  &lt;head&gt;<br /><br />  &lt;/head&gt;<br />  &lt;body&gt;<br />        &lt;form enctype="multipart/form-data" action="<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">];</span><span class="default">?&gt;</span>" method="POST"&gt;<br />            Please choose a file: &lt;input name="txt_file" type="file" id="txt_file" tabindex="1" size="35" onChange="txt_fileName.value=txt_file.value" /&gt;<br />            &lt;input name="txt_fileName" type="hidden" id="txt_fileName" tabindex="99" size="1" /&gt;<br /><br />            &lt;input type="submit" name="SubmitFile" value="Upload File" accesskey="ENTER" tabindex="2" /&gt;<br />      &lt;/form&gt;<br />  &lt;/body&gt;<br />&lt;html&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="72615">  <div class="votes">
    <div id="Vu72615">
    <a href="https://www.php.net/manual/vote-note.php?id=72615&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd72615">
    <a href="https://www.php.net/manual/vote-note.php?id=72615&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V72615" title="56% like this...">
    2
    </div>
  </div>
  <a href="ref.ftp.php.html#72615" class="name">
  <strong class="user"><em>ras &quot;at&quot; fyn {dot} dk</em></strong></a><a class="genanchor" href="ref.ftp.php.html#72615"> &para;</a><div class="date" title="2007-01-26 01:11"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom72615">
<div class="phpcode"><code><span class="html">A function to get a remote file and return it's contents, instead of saving to a local file, was missing - here it is:<br /><br />function ftp_fetch($ftp_stream, $remote_file) {<br />    ob_end_flush();<br />    ob_start();<br />    $out = fopen('php://output', 'w');<br />    if (!ftp_fget($ftp_stream, $out, $remote_file, FTP_ASCII)) die('Unable to get file: ' . $remote_file);<br />    fclose($out);<br />    $data = ob_get_clean();<br />    return $data;<br />}<br /><br />It works the same as ftp_get(), but instead returns the contents of the remote file - for example:<br /><br />$ftp = ftp_connect('my.server.com', 21, 60);<br />ftp_login($ftp, 'username', 'password');<br />$data = ftp_fetch($ftp, 'path/to/remote.file');<br />echo $data;<br /><br />Note, I use it to fetch text-files from a server - if you need to fetch binary files, change FTP_ASCII to FTP_BINARY .. but most likely, getting files to memory is only useful for smaller files, e.g. plain text, xml, etc.</span></code></div>
  </div>
 </div>
  <div class="note" id="77877">  <div class="votes">
    <div id="Vu77877">
    <a href="https://www.php.net/manual/vote-note.php?id=77877&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd77877">
    <a href="https://www.php.net/manual/vote-note.php?id=77877&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V77877" title="55% like this...">
    2
    </div>
  </div>
  <a href="ref.ftp.php.html#77877" class="name">
  <strong class="user"><em>dot a dot@dot dot com</em></strong></a><a class="genanchor" href="ref.ftp.php.html#77877"> &para;</a><div class="date" title="2007-09-17 08:49"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom77877">
<div class="phpcode"><code><span class="html">This took me a few hours to work out. It is based on the code below I've just added a string replace to convert pathname given by Windows to Unix pathname. Hope it saves somebody some time. Enjoy! (Also, delete file function is included:))<br /><br /><span class="default">&lt;?php    <br />$myFile </span><span class="keyword">= </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'file'</span><span class="keyword">]; </span><span class="comment">// This will make an array out of the file information that was stored.<br />    </span><span class="default">$file </span><span class="keyword">= </span><span class="default">$myFile</span><span class="keyword">[</span><span class="string">'tmp_name'</span><span class="keyword">];  </span><span class="comment">//Converts the array into a new string containing the path name on the server where your file is.<br />    </span><span class="default">$myFileName </span><span class="keyword">= </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'MyFile'</span><span class="keyword">]; </span><span class="comment">//Retrieve file path and file name    <br />    </span><span class="default">$myfile_replace </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'\\'</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$myFileName</span><span class="keyword">);    </span><span class="comment">//convert path for use with unix<br />    </span><span class="default">$myfile </span><span class="keyword">= </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$myfile_replace</span><span class="keyword">);    </span><span class="comment">//extract file name from path<br />    </span><span class="default">$destination_file </span><span class="keyword">= </span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$myfile</span><span class="keyword">;  </span><span class="comment">//where you want to throw the file on the webserver (relative to your login dir)<br />    // connection settings<br />    </span><span class="default">$ftp_server </span><span class="keyword">= </span><span class="string">"127.0.0.1"</span><span class="keyword">;  </span><span class="comment">//address of ftp server (leave out <a href="ftp://" rel="nofollow" target="_blank">ftp://</a>)<br />    </span><span class="default">$ftp_user_name </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">; </span><span class="comment">// Username<br />    </span><span class="default">$ftp_user_pass </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;   </span><span class="comment">// Password<br />    </span><span class="default">$conn_id </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">$ftp_server</span><span class="keyword">);        </span><span class="comment">// set up basic connection<br />    // login with username and password, or give invalid user message<br />    </span><span class="default">$login_result </span><span class="keyword">= </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$ftp_user_name</span><span class="keyword">, </span><span class="default">$ftp_user_pass</span><span class="keyword">) or die(</span><span class="string">"&lt;h1&gt;You do not have access to this ftp server!&lt;/h1&gt;"</span><span class="keyword">);<br />    </span><span class="default">$upload </span><span class="keyword">= </span><span class="default">ftp_put</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$destination_file</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">, </span><span class="default">FTP_BINARY</span><span class="keyword">);  </span><span class="comment">// upload the file<br />    </span><span class="keyword">if (!</span><span class="default">$upload</span><span class="keyword">) {  </span><span class="comment">// check upload status<br />        </span><span class="keyword">echo </span><span class="string">"&lt;h2&gt;FTP upload of </span><span class="default">$myFileName</span><span class="string"> has failed!&lt;/h2&gt; &lt;br /&gt;"</span><span class="keyword">;<br />    }<br /></span><span class="comment">/*<br />    // try to delete $file<br />    if (ftp_delete($conn_id, $destination_file)) {<br />        echo "$destination_file has been deleted!\n";<br />    } else {<br />        echo "Could not delete $destination_file!\n";<br />    }<br />*/<br /></span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">); </span><span class="comment">// close the FTP stream<br /></span><span class="keyword">}<br /></span><span class="default">?&gt;<br /></span>&lt;form name="form" enctype="multipart/form-data" action="<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">]; </span><span class="default">?&gt;</span>" method="POST" &gt;<br />Please choose a file: &lt;input type="file" name="file" accept="text/plain" onChange="MyFile.value=file.value"&gt;<br />&lt;input name="MyFile" type="hidden" id="MyFile" tabindex="99" size="1" /&gt;<br />&lt;input type="submit" name="submit" value="upload" style="vertical-align:middle"/&gt;&lt;br/&gt;&lt;br/&gt;<br />&lt;/form&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="52630">  <div class="votes">
    <div id="Vu52630">
    <a href="https://www.php.net/manual/vote-note.php?id=52630&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd52630">
    <a href="https://www.php.net/manual/vote-note.php?id=52630&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V52630" title="50% like this...">
    0
    </div>
  </div>
  <a href="ref.ftp.php.html#52630" class="name">
  <strong class="user"><em>dickiedyce at uk dot com</em></strong></a><a class="genanchor" href="ref.ftp.php.html#52630"> &para;</a><div class="date" title="2005-05-07 08:20"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom52630">
<div class="phpcode"><code><span class="html">It may seem obvious to others, but it had me stumped for nearly an hour! If you can connect to an ftp site but some functions (list, put, get etc) don't work, then try using ftp_pasv and set passive mode on.<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">// setup $host and $file variables for your setup before here...<br /><br /></span><span class="default">$hostip </span><span class="keyword">= </span><span class="default">gethostbyname</span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">);<br /></span><span class="default">$conn_id </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">$hostip</span><span class="keyword">);<br /><br /></span><span class="comment">// login with username and password<br /></span><span class="default">$login_result </span><span class="keyword">= </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$ftp_user_name</span><span class="keyword">, </span><span class="default">$ftp_user_pass</span><span class="keyword">);<br /><br /></span><span class="comment">// IMPORTANT!!! turn passive mode on<br /></span><span class="default">ftp_pasv </span><span class="keyword">( </span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">true </span><span class="keyword">);<br /><br />if ((!</span><span class="default">$conn_id</span><span class="keyword">) || (!</span><span class="default">$login_result</span><span class="keyword">)) {<br />  echo </span><span class="string">"FTP connection has failed!"</span><span class="keyword">;<br />  echo </span><span class="string">"Attempted to connect to </span><span class="default">$host</span><span class="string"> for user </span><span class="default">$ftp_user_name</span><span class="string">"</span><span class="keyword">;<br />  die;<br />} else {<br />  echo </span><span class="string">"Connected to </span><span class="default">$host</span><span class="string">, for user </span><span class="default">$ftp_user_name</span><span class="string">&lt;br&gt;"</span><span class="keyword">;<br />  echo </span><span class="string">"Host IP is </span><span class="default">$hostip</span><span class="string">&lt;br&gt;"</span><span class="keyword">;<br />  <br />  </span><span class="comment">// upload a file<br />  </span><span class="keyword">if (</span><span class="default">ftp_put</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$remote_file</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">, </span><span class="default">FTP_ASCII</span><span class="keyword">)) {<br />    echo </span><span class="string">"successfully uploaded </span><span class="default">$file</span><span class="string">&lt;br&gt;"</span><span class="keyword">;<br />  } else {<br />    echo </span><span class="string">"There was a problem while uploading </span><span class="default">$file</span><span class="string">&lt;br&gt;"</span><span class="keyword">;<br />  }<br />    <br />  </span><span class="comment">// close the connection<br />  </span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">);<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="39318">  <div class="votes">
    <div id="Vu39318">
    <a href="https://www.php.net/manual/vote-note.php?id=39318&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd39318">
    <a href="https://www.php.net/manual/vote-note.php?id=39318&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V39318" title="50% like this...">
    0
    </div>
  </div>
  <a href="ref.ftp.php.html#39318" class="name">
  <strong class="user"><em>postmaster at alishomepage dot com</em></strong></a><a class="genanchor" href="ref.ftp.php.html#39318"> &para;</a><div class="date" title="2004-01-24 03:29"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom39318">
<div class="phpcode"><code><span class="html">I have written an OpenSource ZIP2FTP interface, which actually takes a given ZIP file and decompresses it in the folder on an FTP server you specify...<br /><br />Therefore it may be quite interesting for you people interested in FTP, its adress is <a href="http://zip2ftp.alishomepage.com" rel="nofollow" target="_blank">http://zip2ftp.alishomepage.com</a> ; those who directly want the source may visit <a href="http://zip2ftp.alishomepage.com/?do=getSource" rel="nofollow" target="_blank">http://zip2ftp.alishomepage.com/?do=getSource</a></span></code></div>
  </div>
 </div>
  <div class="note" id="37421">  <div class="votes">
    <div id="Vu37421">
    <a href="https://www.php.net/manual/vote-note.php?id=37421&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd37421">
    <a href="https://www.php.net/manual/vote-note.php?id=37421&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V37421" title="50% like this...">
    0
    </div>
  </div>
  <a href="ref.ftp.php.html#37421" class="name">
  <strong class="user"><em>Vikrant Korde &lt;vakorde at hotmail dot com&gt;</em></strong></a><a class="genanchor" href="ref.ftp.php.html#37421"> &para;</a><div class="date" title="2003-11-14 05:35"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom37421">
<div class="phpcode"><code><span class="html">&lt;?<br /><br />//If you want to move or replicate the folder hierarchy from your current server to another remote server. Then this will be helpful as this will browse the current server's directory and at the same time it will copy that file in the remote server in the same directory. <br /><br />//This script will copy all the files from this directory and subdirectory to another remote server via FTP<br /><br />function rec_copy ($source_path, $destination_path, $con)<br />{<br />    ftp_mkdir($con, $destination_path);<br />    ftp_site($con, 'CHMOD 0777 '.$destination_path);<br />    ftp_chdir($con,$destination_path);<br /><br />    if (is_dir($source_path)) <br />    {<br />        chdir($source_path);<br />        $handle=opendir('.');<br />        while (($file = readdir($handle))!==false) <br />        {<br />            if (($file != ".") &amp;&amp; ($file != "..")) <br />            {<br />                if (is_dir($file))<br />                {<br />                    // here i am restricting the folder name 'propertyimages' from being copied to remote server. -- VK<br />                    if($file != "propertyimages")<br />                    {<br />                        rec_copy ($source_path."/".$file, $file, $con);<br />                        chdir($source_path);<br />                        ftp_cdup($con);<br />                    }<br />                }<br />                if (is_file($file))<br />                {<br />                    $fp = fopen($file,"r");<br />                    // this will convert spaces to '_' so that it will not throw error.  -- VK<br />                    ftp_fput ($con, str_replace(" ", "_", $file), $fp,FTP_BINARY);<br />                    ftp_site($con, 'CHMOD 0755 '.str_replace(" ", "_", $file));<br />                } <br />            }<br />        }<br />        closedir($handle); <br />    }<br />}<br /><br />// make a FTP connection --VK<br />$con = ftp_connect("69.18.213.131",21);<br />$login_result = ftp_login($con,"username","password");    <br /><br />// this is the root path for the remote server-- VK<br />$rootpath = "mainwebsite_html";    <br /><br />// this is the physical path of the source directory. actually u can also use the relative path. -- VK<br />$sourcepath = realpath("../")."/resdesk";<br /><br />// this directory name will only change the top most directory and not the inner one -- VK<br />$destination_dir_name = "resdesk_".$account_id."/";<br /><br />rec_copy ($sourcepath, $destination_dir_name, $con);<br />if (function_exists("ftp_close")) <br />{<br />    ftp_close($con);<br />}<br />?&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="25330">  <div class="votes">
    <div id="Vu25330">
    <a href="https://www.php.net/manual/vote-note.php?id=25330&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd25330">
    <a href="https://www.php.net/manual/vote-note.php?id=25330&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V25330" title="50% like this...">
    0
    </div>
  </div>
  <a href="ref.ftp.php.html#25330" class="name">
  <strong class="user"><em>NOSPAMkent at ioflux dot NOSPAM dot com</em></strong></a><a class="genanchor" href="ref.ftp.php.html#25330"> &para;</a><div class="date" title="2002-09-19 05:05"><strong>21 years ago</strong></div>
  <div class="text" id="Hcom25330">
<div class="phpcode"><code><span class="html">I think what some other posts were trying to say which may need clarification is that in PHP 4.2.3, ftp_connect("myhost.com") was failing most of the time, except it would work like every few minutes.<br /><br />The fix is that ftp_connect seems to have a bug resolving addresses. If you do:<br /><br />$hostip = gethostbyname($host);<br />$conn_id = ftp_connect($hostip);<br /><br />It seems to solve the problem.<br />(Other users referred to an ftpbuf() error... not sure what that is, but this should fix it.)</span></code></div>
  </div>
 </div>
  <div class="note" id="43248">  <div class="votes">
    <div id="Vu43248">
    <a href="https://www.php.net/manual/vote-note.php?id=43248&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd43248">
    <a href="https://www.php.net/manual/vote-note.php?id=43248&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V43248" title="42% like this...">
    -1
    </div>
  </div>
  <a href="ref.ftp.php.html#43248" class="name">
  <strong class="user"><em>Kristy Christie (kristy at isp7 dot net)</em></strong></a><a class="genanchor" href="ref.ftp.php.html#43248"> &para;</a><div class="date" title="2004-06-15 11:50"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom43248">
<div class="phpcode"><code><span class="html">Here's a little function that I created to recurse through a local directory and upload the entire contents to a remote FTP server.<br /><br />In the example, I'm trying to copy the entire "iwm" directory located at /home/kristy/scripts/iwm to a remote server's /public_html/test/ via FTP.<br /><br />The only trouble is that for the line "if (!ftp_chdir($ftpc,$ftproot.$srcrela))", which I use to check if the directory already exists on the remote server, spits out a warning about being unable to change to that directory if it doesn't exist.<br /><br />But an error handler should take care of it.<br /><br />My thanks to the person who posted the snippet on retrieving the list of files in a directory.<br /><br />For the version of the script that echo's it's progress as it recurses &amp; uploads, go to: <a href="http://pastebin.com/73784" rel="nofollow" target="_blank">http://pastebin.com/73784</a><br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">// --------------------------------------------------------------------<br />// THE TRIGGER<br />// --------------------------------------------------------------------<br /><br />    // set the various variables<br />    </span><span class="default">$ftproot </span><span class="keyword">= </span><span class="string">"/public_html/test/"</span><span class="keyword">;<br />    </span><span class="default">$srcroot </span><span class="keyword">= </span><span class="string">"/home/kristy/scripts/"</span><span class="keyword">;        <br />    </span><span class="default">$srcrela </span><span class="keyword">= </span><span class="string">"iwm/"</span><span class="keyword">;<br /><br />    </span><span class="comment">// connect to the destination FTP &amp; enter appropriate directories both locally and remotely<br />    </span><span class="default">$ftpc </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="string">"ftp.mydomain.com"</span><span class="keyword">);<br />    </span><span class="default">$ftpr </span><span class="keyword">= </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$ftpc</span><span class="keyword">,</span><span class="string">"username"</span><span class="keyword">,</span><span class="string">"password"</span><span class="keyword">);<br /><br />    if ((!</span><span class="default">$ftpc</span><span class="keyword">) || (!</span><span class="default">$ftpr</span><span class="keyword">)) { echo </span><span class="string">"FTP connection not established!"</span><span class="keyword">; die(); }<br />    if (!</span><span class="default">chdir</span><span class="keyword">(</span><span class="default">$srcroot</span><span class="keyword">)) { echo </span><span class="string">"Could not enter local source root directory."</span><span class="keyword">; die(); }<br />    if (!</span><span class="default">ftp_chdir</span><span class="keyword">(</span><span class="default">$ftpc</span><span class="keyword">,</span><span class="default">$ftproot</span><span class="keyword">)) { echo </span><span class="string">"Could not enter FTP root directory."</span><span class="keyword">; die(); }<br /><br />    </span><span class="comment">// start ftp'ing over the directory recursively<br />    </span><span class="default">ftpRec </span><span class="keyword">(</span><span class="default">$srcrela</span><span class="keyword">);<br /><br />    </span><span class="comment">// close the FTP connection<br />    </span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$ftpc</span><span class="keyword">);<br /><br /></span><span class="comment">// --------------------------------------------------------------------<br />// THE ACTUAL FUNCTION<br />// --------------------------------------------------------------------<br /></span><span class="keyword">function </span><span class="default">ftpRec </span><span class="keyword">(</span><span class="default">$srcrela</span><span class="keyword">)<br />{<br />    global </span><span class="default">$srcroot</span><span class="keyword">;<br />    global </span><span class="default">$ftproot</span><span class="keyword">;<br />    global </span><span class="default">$ftpc</span><span class="keyword">;<br />    global </span><span class="default">$ftpr</span><span class="keyword">;<br />                <br />    </span><span class="comment">// enter the local directory to be recursed through<br />    </span><span class="default">chdir</span><span class="keyword">(</span><span class="default">$srcroot</span><span class="keyword">.</span><span class="default">$srcrela</span><span class="keyword">);<br />    <br />    </span><span class="comment">// check if the directory exists &amp; change to it on the destination<br />    </span><span class="keyword">if (!</span><span class="default">ftp_chdir</span><span class="keyword">(</span><span class="default">$ftpc</span><span class="keyword">,</span><span class="default">$ftproot</span><span class="keyword">.</span><span class="default">$srcrela</span><span class="keyword">))<br />    {<br />        </span><span class="comment">// remote directory doesn't exist so create &amp; enter it<br />           </span><span class="default">ftp_mkdir    </span><span class="keyword">(</span><span class="default">$ftpc</span><span class="keyword">,</span><span class="default">$ftproot</span><span class="keyword">.</span><span class="default">$srcrela</span><span class="keyword">);<br />           </span><span class="default">ftp_chdir    </span><span class="keyword">(</span><span class="default">$ftpc</span><span class="keyword">,</span><span class="default">$ftproot</span><span class="keyword">.</span><span class="default">$srcrela</span><span class="keyword">);<br />    }<br /><br />    if (</span><span class="default">$handle </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">))<br />    {<br />       while (</span><span class="default">false </span><span class="keyword">!== (</span><span class="default">$fil </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">)))<br />       {<br />           if (</span><span class="default">$fil </span><span class="keyword">!= </span><span class="string">"." </span><span class="keyword">&amp;&amp; </span><span class="default">$fil </span><span class="keyword">!= </span><span class="string">".."</span><span class="keyword">)    <br />           {<br />               </span><span class="comment">// check if it's a file or directory<br />               </span><span class="keyword">if (!</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$fil</span><span class="keyword">))<br />               {    <br />                   </span><span class="comment">// it's a file so upload it<br />                   </span><span class="default">ftp_put</span><span class="keyword">(</span><span class="default">$ftpc</span><span class="keyword">, </span><span class="default">$ftproot</span><span class="keyword">.</span><span class="default">$srcrela</span><span class="keyword">.</span><span class="default">$fil</span><span class="keyword">, </span><span class="default">$fil</span><span class="keyword">, </span><span class="default">FTP_BINARY</span><span class="keyword">);<br />                }<br />                else<br />                {<br />                    </span><span class="comment">// it's a directory so recurse through it<br />                    </span><span class="keyword">if (</span><span class="default">$fil </span><span class="keyword">== </span><span class="string">"templates"</span><span class="keyword">)<br />                    {<br />                            </span><span class="comment">// I want the script to ignore any directories named "templates"<br />                            // and therefore, not recurse through them and upload their contents<br />                    </span><span class="keyword">}<br />                    else<br />                    {<br />                        </span><span class="default">ftpRec </span><span class="keyword">(</span><span class="default">$srcrela</span><span class="keyword">.</span><span class="default">$fil</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">);<br />                        </span><span class="default">chdir </span><span class="keyword">(</span><span class="string">"../"</span><span class="keyword">);<br />                    }<br />                }<br />          }<br />      }<br />      </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);<br />    }    <br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="82142">  <div class="votes">
    <div id="Vu82142">
    <a href="https://www.php.net/manual/vote-note.php?id=82142&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd82142">
    <a href="https://www.php.net/manual/vote-note.php?id=82142&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V82142" title="33% like this...">
    -1
    </div>
  </div>
  <a href="ref.ftp.php.html#82142" class="name">
  <strong class="user"><em>spam at kacke dot de</em></strong></a><a class="genanchor" href="ref.ftp.php.html#82142"> &para;</a><div class="date" title="2008-03-28 09:46"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom82142">
<div class="phpcode"><code><span class="html">Here is a FTP-abstraction-class which supports the most commands.<br /><br />Also it works on TLS, SSLv2 etc. by using stream_crypto_enable()<br /><br /><a href="http://kacke.de/php_samples/source.php?f=ftp.cls.php" rel="nofollow" target="_blank">http://kacke.de/php_samples/source.php?f=ftp.cls.php</a><br /><br />Many thanks to WEZ at this point after all the years :-)<br /><br />Toppi</span></code></div>
  </div>
 </div>
  <div class="note" id="55639">  <div class="votes">
    <div id="Vu55639">
    <a href="https://www.php.net/manual/vote-note.php?id=55639&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd55639">
    <a href="https://www.php.net/manual/vote-note.php?id=55639&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V55639" title="33% like this...">
    -1
    </div>
  </div>
  <a href="ref.ftp.php.html#55639" class="name">
  <strong class="user"><em>leonardo at rol dot com dot ro</em></strong></a><a class="genanchor" href="ref.ftp.php.html#55639"> &para;</a><div class="date" title="2005-08-09 06:51"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom55639">
<div class="phpcode"><code><span class="html">Here is an example for downloading a remote ftp structure to local server, useful for migrating sites from one server to another, especially when you are upgrading ensim ;)<br /><br /><a href="http://leonardo.rol.ro/ftpleech.txt" rel="nofollow" target="_blank">http://leonardo.rol.ro/ftpleech.txt</a></span></code></div>
  </div>
 </div>
  <div class="note" id="19020">  <div class="votes">
    <div id="Vu19020">
    <a href="https://www.php.net/manual/vote-note.php?id=19020&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd19020">
    <a href="https://www.php.net/manual/vote-note.php?id=19020&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V19020" title="41% like this...">
    -4
    </div>
  </div>
  <a href="ref.ftp.php.html#19020" class="name">
  <strong class="user"><em>sven at cartell-network dot de</em></strong></a><a class="genanchor" href="ref.ftp.php.html#19020"> &para;</a><div class="date" title="2002-02-13 11:27"><strong>22 years ago</strong></div>
  <div class="text" id="Hcom19020">
<div class="phpcode"><code><span class="html">connection to a ftp server across proxy<br /><br />$ftp_server = "proxy"; f.e. 123.456.789.10<br />$ftp_user_name = "username@ftpserver"; f.e. exampleuk@www.example.uk<br />$ftp_user_pass = "password";<br /><br />$conn_id = ftp_connect($ftp_server, 2121);<br />$login_result = ftp_login( $conn_id, $ftp_user_name, $ftp_user_pass );</span></code></div>
  </div>
 </div>
  <div class="note" id="36838">  <div class="votes">
    <div id="Vu36838">
    <a href="https://www.php.net/manual/vote-note.php?id=36838&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd36838">
    <a href="https://www.php.net/manual/vote-note.php?id=36838&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V36838" title="25% like this...">
    -2
    </div>
  </div>
  <a href="ref.ftp.php.html#36838" class="name">
  <strong class="user"><em>postmaster at alishomepage dot com</em></strong></a><a class="genanchor" href="ref.ftp.php.html#36838"> &para;</a><div class="date" title="2003-10-24 04:06"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom36838">
<div class="phpcode"><code><span class="html">Here's another FTP interface over PHP (also uses MySQL)<br /><br /><a href="http://myftp.alishomepage.com" rel="nofollow" target="_blank">http://myftp.alishomepage.com</a><br /><br />PS: this script will ALSO allow you to download its source... So it becomes interesting for YOU PROGRAMMERS as well :D</span></code></div>
  </div>
 </div>
  <div class="note" id="72027">  <div class="votes">
    <div id="Vu72027">
    <a href="https://www.php.net/manual/vote-note.php?id=72027&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd72027">
    <a href="https://www.php.net/manual/vote-note.php?id=72027&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V72027" title="28% like this...">
    -3
    </div>
  </div>
  <a href="ref.ftp.php.html#72027" class="name">
  <strong class="user"><em>breese at pipetech dot tv</em></strong></a><a class="genanchor" href="ref.ftp.php.html#72027"> &para;</a><div class="date" title="2006-12-29 09:02"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom72027">
<div class="phpcode"><code><span class="html">I fixed the below upload script to work with Windows uploads (and updated some of the syntax). I also added a Javascript "progress indicator" for those of us who don't use PHP 5.2<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">if(isset(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'start_upload'</span><span class="keyword">]) &amp;&amp; </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'txt_file'</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] != </span><span class="string">""</span><span class="keyword">){<br />     <br />    </span><span class="default">$local_file </span><span class="keyword">= </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'txt_file'</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">]; </span><span class="comment">// Defines Name of Local File to be Uploaded<br /><br />    </span><span class="default">$destination_file </span><span class="keyword">= </span><span class="string">"/"</span><span class="keyword">.</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'txt_file'</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]);  </span><span class="comment">// Path for File Upload (relative to your login dir)<br /><br />    // Global Connection Settings<br />    </span><span class="default">$ftp_server </span><span class="keyword">= </span><span class="string">"127.0.0.1"</span><span class="keyword">;      </span><span class="comment">// FTP Server Address (exlucde <a href="ftp://" rel="nofollow" target="_blank">ftp://</a>)<br />    </span><span class="default">$ftp_user_name </span><span class="keyword">= </span><span class="string">"username"</span><span class="keyword">;     </span><span class="comment">// FTP Server Username<br />    </span><span class="default">$ftp_user_pass </span><span class="keyword">= </span><span class="string">"password"</span><span class="keyword">;      </span><span class="comment">// Password<br /><br />    // Connect to FTP Server<br />    </span><span class="default">$conn_id </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">$ftp_server</span><span class="keyword">);<br />    </span><span class="comment">// Login to FTP Server<br />    </span><span class="default">$login_result </span><span class="keyword">= </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$ftp_user_name</span><span class="keyword">, </span><span class="default">$ftp_user_pass</span><span class="keyword">);<br />    <br />    </span><span class="comment">// Verify Log In Status<br />    </span><span class="keyword">if ((!</span><span class="default">$conn_id</span><span class="keyword">) || (!</span><span class="default">$login_result</span><span class="keyword">)) {<br />        echo </span><span class="string">"FTP connection has failed! &lt;br /&gt;"</span><span class="keyword">;<br />        echo </span><span class="string">"Attempted to connect to </span><span class="default">$ftp_server</span><span class="string"> for user </span><span class="default">$ftp_user_name</span><span class="string">"</span><span class="keyword">;<br />        exit;<br />    } else {<br />        echo </span><span class="string">"Connected to </span><span class="default">$ftp_server</span><span class="string">, for user </span><span class="default">$ftp_user_name</span><span class="string"> &lt;br /&gt;"</span><span class="keyword">;<br />    }<br /><br />    </span><span class="default">$upload </span><span class="keyword">= </span><span class="default">ftp_put</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$destination_file</span><span class="keyword">, </span><span class="default">$local_file</span><span class="keyword">, </span><span class="default">FTP_BINARY</span><span class="keyword">);  </span><span class="comment">// Upload the File<br />    <br />    // Verify Upload Status<br />    </span><span class="keyword">if (!</span><span class="default">$upload</span><span class="keyword">) {<br />        echo </span><span class="string">"&lt;h2&gt;FTP upload of "</span><span class="keyword">.</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'txt_file'</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">].</span><span class="string">" has failed!&lt;/h2&gt;&lt;br /&gt;&lt;br /&gt;"</span><span class="keyword">;<br />    } else {<br />        echo </span><span class="string">"Success!&lt;br /&gt;" </span><span class="keyword">. </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'txt_file'</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">" has been uploaded to " </span><span class="keyword">. </span><span class="default">$ftp_server </span><span class="keyword">. </span><span class="default">$destination_file </span><span class="keyword">. </span><span class="string">"!&lt;br /&gt;&lt;br /&gt;"</span><span class="keyword">;<br />    }<br /><br />    </span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">); </span><span class="comment">// Close the FTP Connection<br /></span><span class="keyword">}<br /></span><span class="default">?&gt;<br /></span><br />&lt;html&gt;<br />    &lt;head&gt;<br />        &lt;script type="text/javascript"&gt;<br />            window.onload = function() {<br />                document.getElementById("progress").style.visibility = "hidden";<br />                document.getElementById("prog_text").style.visibility = "hidden";<br />            }<br />            <br />            function dispProgress() {<br />                document.getElementById("progress").style.visibility = "visible";<br />                document.getElementById("prog_text").style.visibility = "visible";<br />            }<br />            <br />        &lt;/script&gt;<br />        <br />    &lt;/head&gt;<br />    &lt;body&gt;<br />        &lt;form action="<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">];</span><span class="default">?&gt;</span>" method="POST" enctype="multipart/form-data"&gt;<br />            Please choose a file: &lt;input name="txt_file" type="file" size="35" /&gt;<br />            &lt;input type="submit" name="start_upload" value="Upload File" onClick="dispProgress()" /&gt;<br />        &lt;/form&gt;<br />        <br />        &lt;!-- Link to progress file: see <a href="http://www.ajaxload.info/" rel="nofollow" target="_blank">http://www.ajaxload.info/</a> for animated gifs --&gt;<br />        &lt;img id="progress" src="<a href="http://www.your.site/images/progress.gif" rel="nofollow" target="_blank">http://www.your.site/images/progress.gif</a>" /&gt;<br />        &lt;p id="prog_text" style="display:inline;"&gt; Upload Started!&lt;/p&gt;<br />        <br />    &lt;/body&gt;<br />&lt;html&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="60038">  <div class="votes">
    <div id="Vu60038">
    <a href="https://www.php.net/manual/vote-note.php?id=60038&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd60038">
    <a href="https://www.php.net/manual/vote-note.php?id=60038&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V60038" title="20% like this...">
    -3
    </div>
  </div>
  <a href="ref.ftp.php.html#60038" class="name">
  <strong class="user"><em>magic2lantern at mail dot ru</em></strong></a><a class="genanchor" href="ref.ftp.php.html#60038"> &para;</a><div class="date" title="2005-12-23 08:19"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom60038">
<div class="phpcode"><code><span class="html">This is a simple script writen by me which allows the user<br />run it in console and get tree from FTP Server.<br /><br /><span class="default">&lt;?php<br />$argv </span><span class="keyword">= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"argv"</span><span class="keyword">];<br /></span><span class="default">$argv </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />if (</span><span class="default">getenv</span><span class="keyword">(</span><span class="string">"HTTP_HOST"</span><span class="keyword">)) {exit(</span><span class="string">"For bash execution only!"</span><span class="keyword">);}<br />if ((empty(</span><span class="default">$argv</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])) || (empty(</span><span class="default">$argv</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]))) {exit(</span><span class="string">"Usage: thisscript.php 10.0.0.10 /games/Arcade/<br />where 10.0.0.10 is the FTP Server and /games/Arcade is the start path on FTP\n"</span><span class="keyword">);}<br /><br /></span><span class="comment">// connect to the ftp server<br /></span><span class="default">$connect_id </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br /></span><span class="comment">// login on the server<br /></span><span class="keyword">if (</span><span class="default">$connect_id</span><span class="keyword">) { </span><span class="default">$login_result </span><span class="keyword">= </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$connect_id</span><span class="keyword">, </span><span class="string">'anonymous'</span><span class="keyword">, </span><span class="string">'JustForFun'</span><span class="keyword">); }<br /></span><span class="comment">// check connection<br /></span><span class="keyword">if ((!</span><span class="default">$connect_id</span><span class="keyword">) || (!</span><span class="default">$login_result</span><span class="keyword">)) {<br />   echo </span><span class="string">"Unable to connect the remote FTP Server!\n"</span><span class="keyword">;<br />   exit;<br />}<br />function </span><span class="default">ftp_get_dir </span><span class="keyword">(</span><span class="default">$ftp_dir</span><span class="keyword">) {<br />global </span><span class="default">$connect_id</span><span class="keyword">;<br /></span><span class="default">$ftp_contents </span><span class="keyword">= </span><span class="default">ftp_nlist </span><span class="keyword">(</span><span class="default">$connect_id</span><span class="keyword">, </span><span class="default">$ftp_dir</span><span class="keyword">);<br />    for (</span><span class="default">$myCounter_for_server_elements </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; !empty (</span><span class="default">$ftp_contents</span><span class="keyword">[</span><span class="default">$myCounter_for_server_elements</span><span class="keyword">]);<br /></span><span class="default">$myCounter_for_server_elements</span><span class="keyword">++)<br />    {<br /></span><span class="comment">// get elements list in current dir<br />        </span><span class="keyword">echo </span><span class="default">$argv</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] . </span><span class="default">$ftp_dir </span><span class="keyword">. </span><span class="default">$ftp_contents</span><span class="keyword">[</span><span class="default">$myCounter_for_server_elements</span><span class="keyword">] . </span><span class="string">"\n"</span><span class="keyword">;<br />        </span><span class="default">ftp_get_dir </span><span class="keyword">(</span><span class="default">$ftp_dir </span><span class="keyword">. </span><span class="default">$ftp_contents</span><span class="keyword">[</span><span class="default">$myCounter_for_server_elements</span><span class="keyword">] . </span><span class="string">'/'</span><span class="keyword">);<br />    }<br />}<br /></span><span class="default">ftp_get_dir </span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br /></span><span class="comment">// close connection<br /></span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$connect_id</span><span class="keyword">);<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="44110">  <div class="votes">
    <div id="Vu44110">
    <a href="https://www.php.net/manual/vote-note.php?id=44110&amp;page=ref.ftp&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd44110">
    <a href="https://www.php.net/manual/vote-note.php?id=44110&amp;page=ref.ftp&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V44110" title="16% like this...">
    -4
    </div>
  </div>
  <a href="ref.ftp.php.html#44110" class="name">
  <strong class="user"><em>arjen at queek dot nl</em></strong></a><a class="genanchor" href="ref.ftp.php.html#44110"> &para;</a><div class="date" title="2004-07-15 07:38"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom44110">
<div class="phpcode"><code><span class="html">If you prefer a OO-approach to the FTP-functions, you can use this snippet of code (PHP5 only! and does add some overhead). It's just a "start-up", extend/improve as you wish...<br />You can pass all ftp_* functions to your object and stripping ftp_ of the function name. Plus, you don't have to pass the ftp-resource as the first argument.<br /><br />For example:<br /><span class="default">&lt;?php<br />ftp_delete</span><span class="keyword">(</span><span class="default">$ftp</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">);    </span><span class="comment">// Where $ftp is your ftp-resource<br /></span><span class="default">?&gt;<br /></span><br />Can become:<br /><span class="default">&lt;?php<br />$ftp</span><span class="keyword">-&gt;</span><span class="default">delete</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);        </span><span class="comment">// Where $ftp is your FTP-object<br /></span><span class="default">?&gt;<br /></span><br />Code:<br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">class </span><span class="default">FTP </span><span class="keyword">{<br /><br />    private </span><span class="default">$ftp</span><span class="keyword">;<br />    <br />    </span><span class="comment">/* public Void __construct(): Constructor */<br />    </span><span class="keyword">public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">, </span><span class="default">$port </span><span class="keyword">= </span><span class="default">21</span><span class="keyword">, </span><span class="default">$timeout </span><span class="keyword">= </span><span class="default">90</span><span class="keyword">) {<br />        </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">ftp </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">, </span><span class="default">$port</span><span class="keyword">, </span><span class="default">$timeout</span><span class="keyword">);<br />    }<br />    <br />    </span><span class="comment">/* public Void __destruct(): Destructor */<br />    </span><span class="keyword">public function </span><span class="default">__destruct</span><span class="keyword">() {<br />        @</span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">ftp</span><span class="keyword">);<br />    }<br /><br />    </span><span class="comment">/* public Mixed __call(): Re-route all function calls to the PHP-functions */<br />    </span><span class="keyword">public function </span><span class="default">__call</span><span class="keyword">(</span><span class="default">$function</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">) {<br />        </span><span class="comment">// Prepend the ftp resource to the arguments array<br />        </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$arguments</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">ftp</span><span class="keyword">);<br />        <br />        </span><span class="comment">// Call the PHP function<br />        </span><span class="keyword">return </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'ftp_' </span><span class="keyword">. </span><span class="default">$function</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">);<br />    }<br />    <br />}<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=ref.ftp&amp;redirect=https://www.php.net/manual/ru/ref.ftp.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="book.ftp.php.html">FTP</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="intro.ftp.php.html" title="Введение">Введение</a>
                        </li>
                                                <li class="">
                            <a href="ftp.setup.php.html" title="Установка и настройка">Установка и настройка</a>
                        </li>
                                                <li class="">
                            <a href="ftp.constants.php.html" title="Предопределённые константы">Предопределённые константы</a>
                        </li>
                                                <li class="">
                            <a href="ftp.examples.php.html" title="Примеры">Примеры</a>
                        </li>
                                                <li class="current">
                            <a href="ref.ftp.php.html" title="Функции FTP">Функции FTP</a>
                        </li>
                                                <li class="">
                            <a href="class.ftp-connection.php.html" title="FTP\Connection">FTP\Connection</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
