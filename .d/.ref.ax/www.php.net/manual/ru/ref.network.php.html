<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: Сетевые функции - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="ref.network.php.html">
 <link rel="shorturl" href="https://www.php.net/network">
 <link rel="alternate" href="https://www.php.net/network" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="book.network.php.html">
 <link rel="prev" href="network.constants.php.html">
 <link rel="next" href="function.checkdnsrr.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/ref.network.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/ref.network.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/ref.network.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/ref.network.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/ref.network.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/ref.network.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/ref.network.php" hreflang="pt_BR">
 <link rel="alternate" href="ref.network.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/ref.network.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/ref.network.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.checkdnsrr.php.html">
          checkdnsrr &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="network.constants.php.html">
          &laquo; Предопределённые константы        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.remote.other.php.html'>Другие службы</a></li>      <li><a href='book.network.php.html'>Сеть</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/ref.network.php'>English</option>
            <option value='de/ref.network.php'>German</option>
            <option value='es/ref.network.php'>Spanish</option>
            <option value='fr/ref.network.php'>French</option>
            <option value='it/ref.network.php'>Italian</option>
            <option value='ja/ref.network.php'>Japanese</option>
            <option value='pt_BR/ref.network.php'>Brazilian Portuguese</option>
            <option value='ru/ref.network.php' selected="selected">Russian</option>
            <option value='tr/ref.network.php'>Turkish</option>
            <option value='zh/ref.network.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/network/reference.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Fref.network%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="ref.network" class="reference">
 <h1 class="title">Сетевые функции</h1>

 
















































































































































































































<h2>Содержание</h2><ul class="chunklist chunklist_reference"><li><a href="function.checkdnsrr.php.html">checkdnsrr</a> — Проверяет записи DNS, соответствующие переданному имени узла Интернета или IP-адресу</li><li><a href="function.closelog.php.html">closelog</a> — Закрывает соединение с системным журналом</li><li><a href="function.dns-check-record.php.html">dns_check_record</a> — Псевдоним checkdnsrr</li><li><a href="function.dns-get-mx.php.html">dns_get_mx</a> — Псевдоним getmxrr</li><li><a href="function.dns-get-record.php.html">dns_get_record</a> — Получение ресурсных записей DNS хоста</li><li><a href="function.fsockopen.php.html">fsockopen</a> — Открывает соединение с интернет-сокетом или доменным сокетом Unix</li><li><a href="function.gethostbyaddr.php.html">gethostbyaddr</a> — Получает доменное имя хоста, соответствующее переданному IP-адресу</li><li><a href="function.gethostbyname.php.html">gethostbyname</a> — Получает IPv4-адрес, соответствующий переданному имени хоста</li><li><a href="function.gethostbynamel.php.html">gethostbynamel</a> — Получает список IPv4-адресов, соответствующих переданному доменному имени хоста</li><li><a href="function.gethostname.php.html">gethostname</a> — Получает имя хоста</li><li><a href="function.getmxrr.php.html">getmxrr</a> — Получает записи MX, соответствующие переданному доменному имени хоста</li><li><a href="function.getprotobyname.php.html">getprotobyname</a> — Получает номер протокола по имени</li><li><a href="function.getprotobynumber.php.html">getprotobynumber</a> — Получает имя протокола по номеру</li><li><a href="function.getservbyname.php.html">getservbyname</a> — Получает номер порта, связанного с интернет-службой и протоколом</li><li><a href="function.getservbyport.php.html">getservbyport</a> — Получает интернет-службу, соответствующую заданному порту и протоколу</li><li><a href="function.header-register-callback.php.html">header_register_callback</a> — Вызывает функцию заголовка</li><li><a href="function.header-remove.php.html">header_remove</a> — Удаляет ранее установленные заголовки</li><li><a href="function.header.php.html">header</a> — Отправляет необработанный (сырой) HTTP-заголовок</li><li><a href="function.headers-list.php.html">headers_list</a> — Возвращает список переданных заголовков (или готовых к отправке)</li><li><a href="function.headers-sent.php.html">headers_sent</a> — Проверяет, были ли отправлены заголовки</li><li><a href="function.http-response-code.php.html">http_response_code</a> — Получает или устанавливает код ответа HTTP</li><li><a href="function.inet-ntop.php.html">inet_ntop</a> — Конвертирует упакованный интернет-адрес в читаемый формат</li><li><a href="function.inet-pton.php.html">inet_pton</a> — Конвертирует читаемый IP-адрес в его упакованное представление in_addr</li><li><a href="function.ip2long.php.html">ip2long</a> — Конвертирует строку, содержащую IPv4-адрес в целое число</li><li><a href="function.long2ip.php.html">long2ip</a> — Конвертирует целое число в IPv4-адрес</li><li><a href="function.net-get-interfaces.php.html">net_get_interfaces</a> — Получает сетевые интерфейсы</li><li><a href="function.openlog.php.html">openlog</a> — Открывает соединение к системному журналу</li><li><a href="function.pfsockopen.php.html">pfsockopen</a> — Открывает постоянное соединение с интернет-сокетом или доменным сокетом Unix</li><li><a href="function.setcookie.php.html">setcookie</a> — Отправляет cookie</li><li><a href="function.setrawcookie.php.html">setrawcookie</a> — Отправляет cookie без URL-кодирования значения</li><li><a href="function.socket-get-status.php.html">socket_get_status</a> — Псевдоним stream_get_meta_data</li><li><a href="function.socket-set-blocking.php.html">socket_set_blocking</a> — Псевдоним stream_set_blocking</li><li><a href="function.socket-set-timeout.php.html">socket_set_timeout</a> — Псевдоним stream_set_timeout</li><li><a href="function.syslog.php.html">syslog</a> — Генерирует сообщение для системного журнала</li></ul>
</div>
<section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=ref.network&amp;redirect=https://www.php.net/manual/ru/ref.network.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">14 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="74656">  <div class="votes">
    <div id="Vu74656">
    <a href="https://www.php.net/manual/vote-note.php?id=74656&amp;page=ref.network&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd74656">
    <a href="https://www.php.net/manual/vote-note.php?id=74656&amp;page=ref.network&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V74656" title="61% like this...">
    35
    </div>
  </div>
  <a href="ref.network.php.html#74656" class="name">
  <strong class="user"><em>claudiu at cnixs dot com</em></strong></a><a class="genanchor" href="ref.network.php.html#74656"> &para;</a><div class="date" title="2007-04-22 02:52"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom74656">
<div class="phpcode"><code><span class="html">A simple and very fast function to check against CIDR.<br /><br />Your previous examples are too complicated and involves a lot of functions call.<br /><br />Here it is (only with arithmetic operators and call only to ip2long () and split() ):<br /><span class="default">&lt;?php<br />  </span><span class="keyword">function </span><span class="default">ipCIDRCheck </span><span class="keyword">(</span><span class="default">$IP</span><span class="keyword">, </span><span class="default">$CIDR</span><span class="keyword">) {<br />    list (</span><span class="default">$net</span><span class="keyword">, </span><span class="default">$mask</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">"/"</span><span class="keyword">, </span><span class="default">$CIDR</span><span class="keyword">);<br />    <br />    </span><span class="default">$ip_net </span><span class="keyword">= </span><span class="default">ip2long </span><span class="keyword">(</span><span class="default">$net</span><span class="keyword">);<br />    </span><span class="default">$ip_mask </span><span class="keyword">= ~((</span><span class="default">1 </span><span class="keyword">&lt;&lt; (</span><span class="default">32 </span><span class="keyword">- </span><span class="default">$mask</span><span class="keyword">)) - </span><span class="default">1</span><span class="keyword">);<br /><br />    </span><span class="default">$ip_ip </span><span class="keyword">= </span><span class="default">ip2long </span><span class="keyword">(</span><span class="default">$IP</span><span class="keyword">);<br /><br />    </span><span class="default">$ip_ip_net </span><span class="keyword">= </span><span class="default">$ip_ip </span><span class="keyword">&amp; </span><span class="default">$ip_mask</span><span class="keyword">;<br /><br />    return (</span><span class="default">$ip_ip_net </span><span class="keyword">== </span><span class="default">$ip_net</span><span class="keyword">);<br />  }<br /></span><span class="default">?&gt;<br /></span>call example: <span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">ipCheck </span><span class="keyword">(</span><span class="string">"192.168.1.23"</span><span class="keyword">, </span><span class="string">"192.168.1.0/24"</span><span class="keyword">); </span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="121090">  <div class="votes">
    <div id="Vu121090">
    <a href="https://www.php.net/manual/vote-note.php?id=121090&amp;page=ref.network&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd121090">
    <a href="https://www.php.net/manual/vote-note.php?id=121090&amp;page=ref.network&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V121090" title="71% like this...">
    12
    </div>
  </div>
  <a href="ref.network.php.html#121090" class="name">
  <strong class="user"><em>Anton Avramov - lukav at lukav dot com</em></strong></a><a class="genanchor" href="ref.network.php.html#121090"> &para;</a><div class="date" title="2017-05-16 02:41"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom121090">
<div class="phpcode"><code><span class="html">An improved version of claudiu at cnixs dot com not using split and working with the following: <br />ip: 192.168.101.123, CIRD: 192.168.101.144/24 <br /><br /><span class="default">&lt;?php <br /></span><span class="keyword">function </span><span class="default">ipCIDRCheck </span><span class="keyword">(</span><span class="default">$IP</span><span class="keyword">, </span><span class="default">$CIDR</span><span class="keyword">) {<br />    list (</span><span class="default">$net</span><span class="keyword">, </span><span class="default">$mask</span><span class="keyword">) = </span><span class="default">explode </span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$CIDR</span><span class="keyword">);<br />    <br />    </span><span class="default">$ip_net </span><span class="keyword">= </span><span class="default">ip2long </span><span class="keyword">(</span><span class="default">$net</span><span class="keyword">);<br />    </span><span class="default">$ip_mask </span><span class="keyword">= ~((</span><span class="default">1 </span><span class="keyword">&lt;&lt; (</span><span class="default">32 </span><span class="keyword">- </span><span class="default">$mask</span><span class="keyword">)) - </span><span class="default">1</span><span class="keyword">);<br /><br />    </span><span class="default">$ip_ip </span><span class="keyword">= </span><span class="default">ip2long </span><span class="keyword">(</span><span class="default">$IP</span><span class="keyword">);<br /><br />    return ((</span><span class="default">$ip_ip </span><span class="keyword">&amp; </span><span class="default">$ip_mask</span><span class="keyword">) == (</span><span class="default">$ip_net </span><span class="keyword">&amp; </span><span class="default">$ip_mask</span><span class="keyword">));<br />  }<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="119478">  <div class="votes">
    <div id="Vu119478">
    <a href="https://www.php.net/manual/vote-note.php?id=119478&amp;page=ref.network&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd119478">
    <a href="https://www.php.net/manual/vote-note.php?id=119478&amp;page=ref.network&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V119478" title="62% like this...">
    4
    </div>
  </div>
  <a href="ref.network.php.html#119478" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="ref.network.php.html#119478"> &para;</a><div class="date" title="2016-06-16 05:15"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom119478">
<div class="phpcode"><code><span class="html">improved version of philippe-at-cyberabuse.org's answer:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">cidrconv</span><span class="keyword">(</span><span class="default">$net</span><span class="keyword">) { <br />    </span><span class="default">$start </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$net</span><span class="keyword">,</span><span class="string">"/"</span><span class="keyword">); <br />    </span><span class="default">$n </span><span class="keyword">= </span><span class="default">3 </span><span class="keyword">- </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$net</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">); <br />    if (</span><span class="default">$n </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">)<br />    {<br />        for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$n</span><span class="keyword">;</span><span class="default">$i </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--)<br />            </span><span class="default">$start </span><span class="keyword">.= </span><span class="string">".0"</span><span class="keyword">;<br />    } <br />    </span><span class="default">$bits1 </span><span class="keyword">= </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">decbin</span><span class="keyword">(</span><span class="default">ip2long</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">)), </span><span class="default">32</span><span class="keyword">, </span><span class="string">"0"</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);<br />    </span><span class="default">$net </span><span class="keyword">= (</span><span class="default">1 </span><span class="keyword">&lt;&lt; (</span><span class="default">32 </span><span class="keyword">- </span><span class="default">substr</span><span class="keyword">(</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$net</span><span class="keyword">, </span><span class="string">"/"</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">))) - </span><span class="default">1</span><span class="keyword">; <br />    </span><span class="default">$bits2 </span><span class="keyword">= </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">decbin</span><span class="keyword">(</span><span class="default">$net</span><span class="keyword">), </span><span class="default">32</span><span class="keyword">, </span><span class="string">"0"</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">); <br />    </span><span class="default">$final </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />    for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">32</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />    { <br />        if (</span><span class="default">$bits1</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">$bits2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) </span><span class="default">$final </span><span class="keyword">.= </span><span class="default">$bits1</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]; <br />        if (</span><span class="default">$bits1</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">1 </span><span class="keyword">and </span><span class="default">$bits2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">0</span><span class="keyword">) </span><span class="default">$final </span><span class="keyword">.= </span><span class="default">$bits1</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]; <br />        if (</span><span class="default">$bits1</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">0 </span><span class="keyword">and </span><span class="default">$bits2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">1</span><span class="keyword">) </span><span class="default">$final </span><span class="keyword">.= </span><span class="default">$bits2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]; <br />    } <br />    return array(</span><span class="default">$start</span><span class="keyword">, </span><span class="default">long2ip</span><span class="keyword">(</span><span class="default">bindec</span><span class="keyword">(</span><span class="default">$final</span><span class="keyword">))); <br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="75922">  <div class="votes">
    <div id="Vu75922">
    <a href="https://www.php.net/manual/vote-note.php?id=75922&amp;page=ref.network&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd75922">
    <a href="https://www.php.net/manual/vote-note.php?id=75922&amp;page=ref.network&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V75922" title="55% like this...">
    2
    </div>
  </div>
  <a href="ref.network.php.html#75922" class="name">
  <strong class="user"><em>David GASTALDIN</em></strong></a><a class="genanchor" href="ref.network.php.html#75922"> &para;</a><div class="date" title="2007-06-21 08:12"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom75922">
<div class="phpcode"><code><span class="html">Here a IP-Range to CIDRs function that I wrote for the purpose of filling my Postfix client.cidr with ripe-ncc data to block spamming from useless countries. Strcmp functions are meant to work around the silly PHP string comparison which inevitably tries compare strings as numbers when possible. I'll make no comment about that fact ... bit I have to bite my tong hard :<br /><br />function PlageVersCIDRs($ip_min, $ip_max) {<br />    $cidrs = array();<br />    $ip_min_bin = sprintf('%032b', $ip_min);<br />    $ip_max_bin = sprintf('%032b', $ip_max);<br />    $ip_cour_bin = $ip_min_bin;<br />    while (strcmp($ip_cour_bin, $ip_max_bin) &lt;= 0) {<br />        $lng_reseau = 32;<br />        $ip_reseau_bin = $ip_cour_bin;<br />        while (($ip_cour_bin[$lng_reseau - 1] == '0') &amp;&amp; (strcmp(substr_replace($ip_reseau_bin, '1', $lng_reseau - 1, 1), $ip_max_bin) &lt;= 0)) {<br />            $ip_reseau_bin[$lng_reseau - 1] = '1';<br />            $lng_reseau--;<br />        }<br />        $cidrs[] = long2ip(bindec($ip_cour_bin)).'/'.$lng_reseau;<br />        $ip_cour_bin = sprintf('%032b', bindec($ip_reseau_bin) + 1);<br />    }<br />    return $cidrs;<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="17580">  <div class="votes">
    <div id="Vu17580">
    <a href="https://www.php.net/manual/vote-note.php?id=17580&amp;page=ref.network&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd17580">
    <a href="https://www.php.net/manual/vote-note.php?id=17580&amp;page=ref.network&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V17580" title="55% like this...">
    2
    </div>
  </div>
  <a href="ref.network.php.html#17580" class="name">
  <strong class="user"><em>philippe-at-cyberabuse.org</em></strong></a><a class="genanchor" href="ref.network.php.html#17580"> &para;</a><div class="date" title="2001-12-14 07:46"><strong>22 years ago</strong></div>
  <div class="text" id="Hcom17580">
<div class="phpcode"><code><span class="html">PHP miss CIDR functions.<br /><br />This one will convert a CIDR like this:<br />0.0.0.0/16 -&gt; 0.0.0.0 - 0.0.255.255<br />127.0/16 -&gt; 127.0.0.0 - 127.0.255.255<br />etc...<br /><br />function cidrconv($net) {<br />$start=strtok($net,"/");<br />$n=3-substr_count($net, ".");<br />if ($n&gt;0) { for ($i=$n;$i&gt;0;$i--) $start.=".0"; }<br />$bits1=str_pad(decbin(ip2long($start)),32,"0","STR_PAD_LEFT");<br />$net=pow(2,(32-substr(strstr($net,"/"),1)))-1;<br />$bits2=str_pad(decbin($net),32,"0","STR_PAD_LEFT");<br />for ($i=0;$i&lt;32;$i++) {<br />if ($bits1[$i]==$bits2[$i]) $final.=$bits1[$i];<br />if ($bits1[$i]==1 and $bits2[$i]==0) $final.=$bits1[$i];<br />if ($bits1[$i]==0 and $bits2[$i]==1) $final.=$bits2[$i];<br />}<br />return $start." - ".long2ip(bindec($final));<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="118307">  <div class="votes">
    <div id="Vu118307">
    <a href="https://www.php.net/manual/vote-note.php?id=118307&amp;page=ref.network&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd118307">
    <a href="https://www.php.net/manual/vote-note.php?id=118307&amp;page=ref.network&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V118307" title="46% like this...">
    -1
    </div>
  </div>
  <a href="ref.network.php.html#118307" class="name">
  <strong class="user"><em>-dR</em></strong></a><a class="genanchor" href="ref.network.php.html#118307"> &para;</a><div class="date" title="2015-11-13 11:40"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom118307">
<div class="phpcode"><code><span class="html">This little function might come in handy<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">cidr_range</span><span class="keyword">( </span><span class="default">$cidr</span><span class="keyword">, </span><span class="default">$chkip</span><span class="keyword">=</span><span class="default">null </span><span class="keyword">)<br />{<br />    </span><span class="comment">// Assign IP / mask<br />    </span><span class="keyword">list(</span><span class="default">$ip</span><span class="keyword">,</span><span class="default">$mask</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"/"</span><span class="keyword">,</span><span class="default">$cidr</span><span class="keyword">);<br /><br />    </span><span class="comment">// Sanitize IP<br />    </span><span class="default">$ip1 </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'_(\d+\.\d+\.\d+\.\d+).*$_'</span><span class="keyword">, </span><span class="string">'$1'</span><span class="keyword">, </span><span class="string">"</span><span class="default">$ip</span><span class="string">.0.0.0" </span><span class="keyword">);<br /><br />    </span><span class="comment">// Calculate range<br />    </span><span class="default">$ip2 </span><span class="keyword">= </span><span class="default">long2ip</span><span class="keyword">( </span><span class="default">ip2long</span><span class="keyword">( </span><span class="default">$ip1 </span><span class="keyword">) - </span><span class="default">1 </span><span class="keyword">+ ( </span><span class="default">1 </span><span class="keyword">&lt;&lt; ( </span><span class="default">32 </span><span class="keyword">- </span><span class="default">$mask</span><span class="keyword">) ) );<br /><br />    </span><span class="comment">// are we cidr range cheking?<br />    </span><span class="keyword">if ( </span><span class="default">$chkip </span><span class="keyword">!= </span><span class="default">null </span><span class="keyword">&amp;&amp; ! </span><span class="default">filter_var</span><span class="keyword">( </span><span class="default">$chkip</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_IP</span><span class="keyword">, </span><span class="default">FILTER_FLAG_IPV4</span><span class="keyword">) === </span><span class="default">false </span><span class="keyword">)<br />    {<br />        return </span><span class="default">ip2long</span><span class="keyword">( </span><span class="default">$ip1 </span><span class="keyword">) &lt;= </span><span class="default">ip2long</span><span class="keyword">( </span><span class="default">$chkip </span><span class="keyword">) &amp;&amp; </span><span class="default">ip2long</span><span class="keyword">( </span><span class="default">$ip2 </span><span class="keyword">) &gt;= </span><span class="default">ip2long</span><span class="keyword">( </span><span class="default">$chkip </span><span class="keyword">) ? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;<br />    } else {<br />        return </span><span class="string">"</span><span class="default">$ip1</span><span class="string"> - </span><span class="default">$ip2</span><span class="string">"</span><span class="keyword">;<br />    }<br />}<br /><br /></span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">cidr_range</span><span class="keyword">( </span><span class="string">"127.0/16"</span><span class="keyword">, </span><span class="string">"127.0.0.1" </span><span class="keyword">) );   </span><span class="comment">// bool(true)<br /></span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">cidr_range</span><span class="keyword">( </span><span class="string">"127.0/16"</span><span class="keyword">, </span><span class="string">"192.168.0.1" </span><span class="keyword">) ); </span><span class="comment">// bool(false)<br /></span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">cidr_range</span><span class="keyword">( </span><span class="string">"192.168.0.0/24" </span><span class="keyword">) );          </span><span class="comment">// string(27) "192.168.0.0 - 192.168.0.255"<br /><br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="50337">  <div class="votes">
    <div id="Vu50337">
    <a href="https://www.php.net/manual/vote-note.php?id=50337&amp;page=ref.network&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd50337">
    <a href="https://www.php.net/manual/vote-note.php?id=50337&amp;page=ref.network&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V50337" title="47% like this...">
    -1
    </div>
  </div>
  <a href="ref.network.php.html#50337" class="name">
  <strong class="user"><em>nexxer at rogers dot com</em></strong></a><a class="genanchor" href="ref.network.php.html#50337"> &para;</a><div class="date" title="2005-02-24 05:16"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom50337">
<div class="phpcode"><code><span class="html">In Trevor Hemsley's translation of the perl range2cidr function, the <br /><br />while ($end &gt; $start) <br /><br />condition should be<br /><br />while ($end &gt;= $start)<br /><br />otherwise it won't work for /32s, ie if you feed range2cidr("1.2.3.4", "1.2.3.4").<br /><br />-- nex</span></code></div>
  </div>
 </div>
  <div class="note" id="30910">  <div class="votes">
    <div id="Vu30910">
    <a href="https://www.php.net/manual/vote-note.php?id=30910&amp;page=ref.network&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd30910">
    <a href="https://www.php.net/manual/vote-note.php?id=30910&amp;page=ref.network&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V30910" title="36% like this...">
    -3
    </div>
  </div>
  <a href="ref.network.php.html#30910" class="name"><strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="ref.network.php.html#30910"> &para;</a><div class="date" title="2003-04-02 08:11"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom30910">
<div class="phpcode"><code><span class="html">Alternative cidr_conv function - a little easier to follow<br /><br />function cidr_conv($cidr_address) {<br />  $first = substr($cidr_address, 0, strpos($cidr_address, "/"));<br />  $netmask = substr(strstr($cidr_address, "/"), 1);<br /><br />  $first_bin = str_pad(decbin(ip2long($first)), 32, "0", STR_PAD_LEFT);<br />  $netmask_bin = str_pad(str_repeat("1", (integer)$netmask), 32, "0", STR_PAD_RIGHT);<br />  <br />  for ($i = 0; $i &lt; 32; $i++) {<br />    if ($netmask_bin[$i] == "1") <br />      $last_bin .= $first_bin[$i];<br />    else<br />      $last_bin .= "1";<br />  }<br /><br />  $last = long2ip(bindec($last_bin));<br /><br />  return "$first - $last";<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="37753">  <div class="votes">
    <div id="Vu37753">
    <a href="https://www.php.net/manual/vote-note.php?id=37753&amp;page=ref.network&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd37753">
    <a href="https://www.php.net/manual/vote-note.php?id=37753&amp;page=ref.network&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V37753" title="33% like this...">
    -4
    </div>
  </div>
  <a href="ref.network.php.html#37753" class="name">
  <strong class="user"><em>samuele at norsam dot org</em></strong></a><a class="genanchor" href="ref.network.php.html#37753"> &para;</a><div class="date" title="2003-11-25 09:01"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom37753">
<div class="phpcode"><code><span class="html">To find if an IP is in a net/mask (very fast):<br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">isIPIn</span><span class="keyword">(</span><span class="default">$ip</span><span class="keyword">,</span><span class="default">$net</span><span class="keyword">,</span><span class="default">$mask</span><span class="keyword">) {<br />   </span><span class="default">$lnet</span><span class="keyword">=</span><span class="default">ip2long</span><span class="keyword">(</span><span class="default">$net</span><span class="keyword">);<br />   </span><span class="default">$lip</span><span class="keyword">=</span><span class="default">ip2long</span><span class="keyword">(</span><span class="default">$ip</span><span class="keyword">);<br />   </span><span class="default">$binnet</span><span class="keyword">=</span><span class="default">str_pad</span><span class="keyword">( </span><span class="default">decbin</span><span class="keyword">(</span><span class="default">$lnet</span><span class="keyword">),</span><span class="default">32</span><span class="keyword">,</span><span class="string">"0"</span><span class="keyword">,</span><span class="string">"STR_PAD_LEFT" </span><span class="keyword">);<br />   </span><span class="default">$firstpart</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$binnet</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$mask</span><span class="keyword">);<br />   </span><span class="default">$binip</span><span class="keyword">=</span><span class="default">str_pad</span><span class="keyword">( </span><span class="default">decbin</span><span class="keyword">(</span><span class="default">$lip</span><span class="keyword">),</span><span class="default">32</span><span class="keyword">,</span><span class="string">"0"</span><span class="keyword">,</span><span class="string">"STR_PAD_LEFT" </span><span class="keyword">);<br />   </span><span class="default">$firstip</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$binip</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$mask</span><span class="keyword">);<br />   return(</span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$firstpart</span><span class="keyword">,</span><span class="default">$firstip</span><span class="keyword">)==</span><span class="default">0</span><span class="keyword">);<br />   }<br /></span><span class="default">?&gt;<br /></span><br />This function can be compacted, avoiding some variable settings, but the function will not be too clear to read...<br />Example code, used to made a kind of location service network-based:<br /><br /><span class="default">&lt;?php<br />$n </span><span class="keyword">= array ( </span><span class="string">"192.168.0.0/16"   </span><span class="keyword">=&gt; </span><span class="string">"TUSCANY"</span><span class="keyword">,<br />             </span><span class="string">"192.168.1.0/24"   </span><span class="keyword">=&gt; </span><span class="string">"- Florence"</span><span class="keyword">,<br />             </span><span class="string">"192.168.2.0/24"   </span><span class="keyword">=&gt; </span><span class="string">"- Pisa"</span><span class="keyword">,<br />             </span><span class="string">"192.168.3.0/24"   </span><span class="keyword">=&gt; </span><span class="string">"- Siena"</span><span class="keyword">,<br />             </span><span class="string">"192.168.64.0/21" </span><span class="keyword">=&gt; </span><span class="string">"- Tuscan Archipelago"</span><span class="keyword">,<br />             </span><span class="string">"192.168.64.0/23" </span><span class="keyword">=&gt; </span><span class="string">"--- Elba Island"</span><span class="keyword">,<br />             </span><span class="string">"192.168.66.0/24" </span><span class="keyword">=&gt; </span><span class="string">"--- Capraia Island"</span><span class="keyword">,<br />             </span><span class="string">"192.168.67.0/24" </span><span class="keyword">=&gt; </span><span class="string">"--- Giannutri Island"</span><span class="keyword">);<br /><br /></span><span class="comment">// Normally you should use the following line<br /></span><span class="default">$myip </span><span class="keyword">= </span><span class="default">$HTTP_SERVER_VARS</span><span class="keyword">[</span><span class="string">'REMOTE_ADDR'</span><span class="keyword">];<br /></span><span class="comment">// This is first example: returns Tuscany/Pisa<br /></span><span class="default">$myip </span><span class="keyword">= </span><span class="string">"192.168.2.33"</span><span class="keyword">;<br /></span><span class="comment">// This is second example: returns Tuscany/T.Arch./Elba<br /></span><span class="default">$myip </span><span class="keyword">= </span><span class="string">"192.168.65.34"</span><span class="keyword">;<br /><br />echo </span><span class="string">"Your position:&lt;br /&gt;\n"</span><span class="keyword">;<br />foreach ( </span><span class="default">$n </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v </span><span class="keyword">) {<br />   list(</span><span class="default">$net</span><span class="keyword">,</span><span class="default">$mask</span><span class="keyword">)=</span><span class="default">split</span><span class="keyword">(</span><span class="string">"/"</span><span class="keyword">,</span><span class="default">$k</span><span class="keyword">);<br />   if (</span><span class="default">isIPIn</span><span class="keyword">(</span><span class="default">$myip</span><span class="keyword">,</span><span class="default">$net</span><span class="keyword">,</span><span class="default">$mask</span><span class="keyword">)) {<br />       echo </span><span class="default">$n</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">].</span><span class="string">"&lt;br /&gt;\n"</span><span class="keyword">; }<br />   }<br /></span><span class="default">?&gt;<br /></span><br />and so on...</span></code></div>
  </div>
 </div>
  <div class="note" id="64152">  <div class="votes">
    <div id="Vu64152">
    <a href="https://www.php.net/manual/vote-note.php?id=64152&amp;page=ref.network&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd64152">
    <a href="https://www.php.net/manual/vote-note.php?id=64152&amp;page=ref.network&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V64152" title="30% like this...">
    -4
    </div>
  </div>
  <a href="ref.network.php.html#64152" class="name">
  <strong class="user"><em>dand at ddchosting.com</em></strong></a><a class="genanchor" href="ref.network.php.html#64152"> &para;</a><div class="date" title="2006-04-08 02:28"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom64152">
<div class="phpcode"><code><span class="html">When I was working on a project I ran into this problem with redirecting. My solution is as follows:<br />header("Refresh: 5; url=../main/main.php?".session_id()."");<br /><br />This allowed me to pass the session_id() which is used throughout site to make sure user has loged in. <br />I hope this helps!</span></code></div>
  </div>
 </div>
  <div class="note" id="55230">  <div class="votes">
    <div id="Vu55230">
    <a href="https://www.php.net/manual/vote-note.php?id=55230&amp;page=ref.network&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd55230">
    <a href="https://www.php.net/manual/vote-note.php?id=55230&amp;page=ref.network&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V55230" title="30% like this...">
    -5
    </div>
  </div>
  <a href="ref.network.php.html#55230" class="name">
  <strong class="user"><em>metator at netcabo dot pt</em></strong></a><a class="genanchor" href="ref.network.php.html#55230"> &para;</a><div class="date" title="2005-07-27 08:22"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom55230">
<div class="phpcode"><code><span class="html">Regarding samuele's note:<br /><br />You can get faster code if you apply directly what happens in  network devices, such as routers. If you AND (logic operation) the remote ip against the local netmask the result will be the network ip if the remote ip is from the local network. Example:<br /><br />    192.168.0.16 = 11000000.10101000.00000000.00010000<br />&amp; 255.255.255.0 = 11111111.11111111.11111111.00000000<br />--------------------------------------------------------------<br />   192.168.0.0 = 11000000.10101000.00000000.00000000<br /><br />And now the code. My example uses a html form where you place the values you want to test:<br /><br />&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;Check IP&lt;/TITLE&gt;<br />&lt;/HEAD&gt;&lt;BODY&gt;<br />    &lt;form action="<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">]; </span><span class="default">?&gt;</span>" method="POST"&gt;<br /><br />Hope you find this useful.<br />        IP to check: &lt;input type="text" name="ip"&gt; &lt;br&gt;<br />        Local network ip: &lt;input type="text" name="net"&gt; &lt;br&gt;<br />        Local netmask: &lt;input type="text" name="mask"&gt; &lt;br&gt;<br />        &lt;input type="submit" name="check" value="Check it!"&gt;<br />    &lt;/form&gt;<br />    <span class="default">&lt;?php<br /><br /></span><span class="comment">/**<br /> * @param string $ip IP to check in dotted decimal format<br /> * @param string $net Network IP in dotted decimal format<br /> * @param string $mask Netmask in dotted decimal format<br /> * @returns true if the ip belongs to the network, false otherwise<br /> **/<br /></span><span class="keyword">function </span><span class="default">isIPIn</span><span class="keyword">(</span><span class="default">$ip</span><span class="keyword">, </span><span class="default">$net</span><span class="keyword">, </span><span class="default">$mask</span><span class="keyword">) {<br />    </span><span class="comment">//doesn't check for the return value of ip2long<br />    </span><span class="default">$ip </span><span class="keyword">= </span><span class="default">ip2long</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'ip'</span><span class="keyword">]);<br />    </span><span class="default">$rede </span><span class="keyword">= </span><span class="default">ip2long</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'net'</span><span class="keyword">]);<br />    </span><span class="default">$mask </span><span class="keyword">= </span><span class="default">ip2long</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'mask'</span><span class="keyword">]);<br />    <br />    </span><span class="comment">//AND <br />    </span><span class="default">$res </span><span class="keyword">= </span><span class="default">$ip </span><span class="keyword">&amp; </span><span class="default">$mask</span><span class="keyword">;<br />    <br />    return (</span><span class="default">$res </span><span class="keyword">== </span><span class="default">$rede</span><span class="keyword">);<br />}<br /><br />if (isset(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'check'</span><span class="keyword">])) {<br />     echo </span><span class="default">isIPIn</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'ip'</span><span class="keyword">], </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'net'</span><span class="keyword">], </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'mask'</span><span class="keyword">]) ? </span><span class="string">"IP IN."</span><span class="keyword">: </span><span class="string">"IP OUT."</span><span class="keyword">;<br />}<br /> </span><span class="default">?&gt;<br /></span>&lt;/BODY&gt;&lt;HTML&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="34797">  <div class="votes">
    <div id="Vu34797">
    <a href="https://www.php.net/manual/vote-note.php?id=34797&amp;page=ref.network&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd34797">
    <a href="https://www.php.net/manual/vote-note.php?id=34797&amp;page=ref.network&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V34797" title="28% like this...">
    -6
    </div>
  </div>
  <a href="ref.network.php.html#34797" class="name">
  <strong class="user"><em>anderson at piq dot com dot br</em></strong></a><a class="genanchor" href="ref.network.php.html#34797"> &para;</a><div class="date" title="2003-08-06 10:10"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom34797">
<div class="phpcode"><code><span class="html">If you want to get the interface of an IP, based on the local route table, use this.<br /><br />function GetIfaceforIP($user_ip)<br />{<br />    $route = "/bin/netstat -rn";<br /><br />    exec($route, $aoutput);<br />    foreach($aoutput as $key =&gt; $line)<br />    {<br />        if($key &gt; 1)<br />        {<br />            $line = ereg_replace("[[:space:]]+",",",$line);<br />            list($network, $gateway, $mask, $flags, $mss, $window, $irtt, $iface) = explode(",", $line)<br />            if((ip2long($user_ip) &amp; ip2long($mask)) == ip2long($network))<br />            {<br />                return $iface;<br />            }<br />        }<br />    }<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="26063">  <div class="votes">
    <div id="Vu26063">
    <a href="https://www.php.net/manual/vote-note.php?id=26063&amp;page=ref.network&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd26063">
    <a href="https://www.php.net/manual/vote-note.php?id=26063&amp;page=ref.network&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V26063" title="16% like this...">
    -8
    </div>
  </div>
  <a href="ref.network.php.html#26063" class="name">
  <strong class="user"><em>trevor-hemsley at nospam dot dial dot pipex dot com</em></strong></a><a class="genanchor" href="ref.network.php.html#26063"> &para;</a><div class="date" title="2002-10-16 11:53"><strong>21 years ago</strong></div>
  <div class="text" id="Hcom26063">
<div class="phpcode"><code><span class="html">Previous example of IP range to CIDR list does not cope with ranges as well as the perl Net::Netmask range2cidrlist() function. In PHP this looks like<br /><br />&lt;?<br />function imask($this)<br />{<br />// use base_convert not dechex because dechex is broken and returns 0x80000000 instead of 0xffffffff<br />return base_convert((pow(2,32) - pow(2, (32-$this)))), 10, 16);<br />}<br /><br />function imaxblock($ibase, $tbit)<br />{<br />while ($tbit &gt; 0)<br />{<br />$im = hexdec(imask($tbit-1));<br />$imand = $ibase &amp; $im;<br />if ($imand != $ibase)<br />{<br />break;<br />}<br />$tbit--;<br />}<br />return $tbit;<br />}<br /><br />function range2cidrlist($istart, $iend)<br />{<br />// this function returns an array of cidr lists that map the range given<br />$s = explode(".", $istart);<br />// PHP ip2long does not handle leading zeros on IP addresses! 172.016 comes back as 172.14, seems to be treated as octal!<br />$start = "";<br />$dot = "";<br />while (list($key,$val) = each($s))<br />{<br />$start = sprintf("%s%s%d",$start,$dot,$val);<br />$dot = ".";<br />}<br />$end = "";<br />$dot = "";<br />$e = explode(".",$iend);<br />while (list($key,$val) = each($e))<br />{<br />$end = sprintf("%s%s%d",$end,$dot,$val);<br />$dot = ".";<br />}<br />$start = ip2long($start);<br />$end = ip2long($end);<br />$result = array();<br />while ($end &gt; $start)<br />{<br />$maxsize = imaxblock($start,32);<br />$x = log($end - $start + 1)/log(2);<br />$maxdiff = floor(32 - floor($x));<br />$ip = long2ip($start);<br />if ($maxsize &lt; $maxdiff)<br />{<br />$maxsize = $maxdiff;<br />}<br />array_push($result,"$ip/$maxsize");<br />$start += pow(2, (32-$maxsize));<br />}<br />return $result;<br />}<br />?&gt;</span></code></div>
  </div>
 </div>
  <div class="note" id="25958">  <div class="votes">
    <div id="Vu25958">
    <a href="https://www.php.net/manual/vote-note.php?id=25958&amp;page=ref.network&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd25958">
    <a href="https://www.php.net/manual/vote-note.php?id=25958&amp;page=ref.network&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V25958" title="10% like this...">
    -8
    </div>
  </div>
  <a href="ref.network.php.html#25958" class="name">
  <strong class="user"><em>philippe-at-cyberabuse.org</em></strong></a><a class="genanchor" href="ref.network.php.html#25958"> &para;</a><div class="date" title="2002-10-12 03:49"><strong>21 years ago</strong></div>
  <div class="text" id="Hcom25958">
<div class="phpcode"><code><span class="html">... and this one will do the opposite (o return NULL for invalid netblocks) :<br /><br />1.0.0.0 1.0.255.255 -&gt; 1.0.0.0/16<br />1.0.0.0 1.3.255.255 -&gt; 1.0.0.0/14<br />192.168.0.0 192.168.0.255 -&gt; 192.168.0.0/24<br /><br />function ip2cidr($ip_start,$ip_end) {<br />if(long2ip(ip2long($ip_start))!=$ip_start or long2ip(ip2long($ip_end))!=$ip_end) return NULL; <br />$ipl_start=(int)ip2long($ip_start);<br />$ipl_end=(int)ip2long($ip_end);<br />if($ipl_start&gt;0 &amp;&amp; $ipl_end&lt;0) $delta=($ipl_end+4294967296)-$ipl_start;<br />else $delta=$ipl_end-$ipl_start;<br />$netmask=str_pad(decbin($delta),32,"0","STR_PAD_LEFT");<br />if(ip2long($ip_start)==0 &amp;&amp; substr_count($netmask,"1")==32) return "0.0.0.0/0";<br />if($delta&lt;0 or ($delta&gt;0 &amp;&amp; $delta%2==0)) return NULL;<br />for($mask=0;$mask&lt;32;$mask++) if($netmask[$mask]==1) break;<br />if(substr_count($netmask,"0")!=$mask) return NULL;<br />return "$ip_start/$mask";<br />}</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=ref.network&amp;redirect=https://www.php.net/manual/ru/ref.network.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="book.network.php.html">Сеть</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="intro.network.php.html" title="Введение">Введение</a>
                        </li>
                                                <li class="">
                            <a href="network.setup.php.html" title="Установка и настройка">Установка и настройка</a>
                        </li>
                                                <li class="">
                            <a href="network.constants.php.html" title="Предопределённые константы">Предопределённые константы</a>
                        </li>
                                                <li class="current">
                            <a href="ref.network.php.html" title="Сетевые функции">Сетевые функции</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
