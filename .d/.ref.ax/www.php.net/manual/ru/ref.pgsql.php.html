<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: Функции PostgreSQL - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="ref.pgsql.php.html">
 <link rel="shorturl" href="https://www.php.net/pgsql">
 <link rel="alternate" href="https://www.php.net/pgsql" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="book.pgsql.php.html">
 <link rel="prev" href="pgsql.examples-queries.php.html">
 <link rel="next" href="function.pg-affected-rows.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/ref.pgsql.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/ref.pgsql.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/ref.pgsql.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/ref.pgsql.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/ref.pgsql.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/ref.pgsql.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/ref.pgsql.php" hreflang="pt_BR">
 <link rel="alternate" href="ref.pgsql.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/ref.pgsql.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/ref.pgsql.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.pg-affected-rows.php.html">
          pg_affected_rows &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="pgsql.examples-queries.php.html">
          &laquo; Базовое использование        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.database.php.html'>Модули для работы с базами данных</a></li>      <li><a href='refs.database.vendors.php.html'>Модули для работы с базами данных отдельных производителей</a></li>      <li><a href='book.pgsql.php.html'>PostgreSQL</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/ref.pgsql.php'>English</option>
            <option value='de/ref.pgsql.php'>German</option>
            <option value='es/ref.pgsql.php'>Spanish</option>
            <option value='fr/ref.pgsql.php'>French</option>
            <option value='it/ref.pgsql.php'>Italian</option>
            <option value='ja/ref.pgsql.php'>Japanese</option>
            <option value='pt_BR/ref.pgsql.php'>Brazilian Portuguese</option>
            <option value='ru/ref.pgsql.php' selected="selected">Russian</option>
            <option value='tr/ref.pgsql.php'>Turkish</option>
            <option value='zh/ref.pgsql.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/pgsql/reference.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Fref.pgsql%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="ref.pgsql" class="reference">
 <h1 class="title">Функции PostgreSQL</h1>

 <div class="partintro">
  <div class="section" id="pgsql.notes">
  <h2 class="title">Примечания</h2>
   <blockquote class="note"><p><strong class="note">Замечание</strong>: 
    <p class="para">
     Не все функции могут поддерживаться в собранном модуле. Это зависит
     от версии вашей libpq (клиентская библиотека PostgreSQL) и как libpq
     была собрана. Если модуль PostgreSQL для PHP отсутствует, то это
     значит, что версия вашей libpq не поддерживается.
    </p>
   </p></blockquote>
   <blockquote class="note"><p><strong class="note">Замечание</strong>: 
    <p class="para">
     Большинство функций PostgreSQL принимают <code class="parameter">connection</code>
     в качестве первого необязательного параметра. Если параметр отсутствует, то
     используется последнее открытое соединение. Если же такого не существует, то
     функция возвращает <strong><code>false</code></strong>.
    </p>
   </p></blockquote>
   <blockquote class="note"><p><strong class="note">Замечание</strong>: 
    <p class="para">
     PostgreSQL автоматически переводит все идентификаторы (такие как имена
     таблиц/столбцов) в нижний регистр во время создания объекта и выполнения
     запроса. Для того, чтобы заставить использовать идентификаторы в обоих
     или только в верхнем регистрах, вы должны экранировать идентификатор с помощью
     двойных кавычек (&quot;&quot;).
    </p>
   </p></blockquote>
   <blockquote class="note"><p><strong class="note">Замечание</strong>: 
    <p class="para">
     В PostgreSQL нет специальных команд для получения информации о схеме БД
     (к примеру, всех таблиц выбранной базы данных). Но вместо этого в версиях
     PostgreSQL 7.4 и выше существует стандартная схема, которая называется
     <code class="literal">information_schema</code>. Она содержит системные представления
     (view) со всей необходимой информацией в легкодоступной форме. Для
     дополнительной информации смотрите <a href="http://www.postgresql.org/docs/current/interactive/" class="link external">&raquo;&nbsp;документацию PostgreSQL</a>
    </p>
   </p></blockquote>
  </div>
 </div>




































































































































































































































































































































































































































































































































































<h2>Содержание</h2><ul class="chunklist chunklist_reference"><li><a href="function.pg-affected-rows.php.html">pg_affected_rows</a> — Возвращает количество затронутых запросом записей (кортежей)</li><li><a href="function.pg-cancel-query.php.html">pg_cancel_query</a> — Остановка асинхронного запроса.</li><li><a href="function.pg-client-encoding.php.html">pg_client_encoding</a> — Получение кодировки клиента.</li><li><a href="function.pg-close.php.html">pg_close</a> — Закрывает соединение с базой данных PostgreSQL</li><li><a href="function.pg-connect-poll.php.html">pg_connect_poll</a> — Опросить статус попытки асинхронного соединения PostgreSQL.</li><li><a href="function.pg-connect.php.html">pg_connect</a> — Открывает соединение с базой данных PostgreSQL</li><li><a href="function.pg-connection-busy.php.html">pg_connection_busy</a> — Проверяет, занято ли соединение в данный момент.</li><li><a href="function.pg-connection-reset.php.html">pg_connection_reset</a> — Сброс подключения (переподключение)</li><li><a href="function.pg-connection-status.php.html">pg_connection_status</a> — Определяет состояние подключения</li><li><a href="function.pg-consume-input.php.html">pg_consume_input</a> — Читает вводные данные на соединении</li><li><a href="function.pg-convert.php.html">pg_convert</a> — Преобразовывает значения ассоциативного массива в подходящий для SQL-запросов вид</li><li><a href="function.pg-copy-from.php.html">pg_copy_from</a> — Вставляет записи из массива в таблицу</li><li><a href="function.pg-copy-to.php.html">pg_copy_to</a> — Копирует данные из таблицы в массив</li><li><a href="function.pg-dbname.php.html">pg_dbname</a> — Определяет имя базы данных</li><li><a href="function.pg-delete.php.html">pg_delete</a> — Удаляет записи</li><li><a href="function.pg-end-copy.php.html">pg_end_copy</a> — Синхронизирует с бэкендом PostgreSQL</li><li><a href="function.pg-escape-bytea.php.html">pg_escape_bytea</a> — Экранирует спецсимволы в строке для вставки в поле типа bytea</li><li><a href="function.pg-escape-identifier.php.html">pg_escape_identifier</a> — Экранирует идентификатор для вставки в текстовое поле</li><li><a href="function.pg-escape-literal.php.html">pg_escape_literal</a> — Экранировать литерал при вставке в текстовое поле</li><li><a href="function.pg-escape-string.php.html">pg_escape_string</a> — Экранирование спецсимволов в строке запроса</li><li><a href="function.pg-execute.php.html">pg_execute</a> — Запускает выполнение ранее подготовленного параметризованного запроса и ждёт результат</li><li><a href="function.pg-fetch-all-columns.php.html">pg_fetch_all_columns</a> — Выбирает все записи из одной колонки результата запроса и помещает их в массив</li><li><a href="function.pg-fetch-all.php.html">pg_fetch_all</a> — Выбирает все данные из результата запроса и помещает их в массив</li><li><a href="function.pg-fetch-array.php.html">pg_fetch_array</a> — Возвращает строку результата в виде массива</li><li><a href="function.pg-fetch-assoc.php.html">pg_fetch_assoc</a> — Выбирает строку результата запроса и помещает данные в ассоциативный массив</li><li><a href="function.pg-fetch-object.php.html">pg_fetch_object</a> — Выбирает строку результата запроса и возвращает данные в виде объекта</li><li><a href="function.pg-fetch-result.php.html">pg_fetch_result</a> — Возвращает запись из результата запроса</li><li><a href="function.pg-fetch-row.php.html">pg_fetch_row</a> — Выбирает строку результата запроса и помещает данные в массив</li><li><a href="function.pg-field-is-null.php.html">pg_field_is_null</a> — Проверка поля на значение SQL NULL</li><li><a href="function.pg-field-name.php.html">pg_field_name</a> — Возвращает наименование поля</li><li><a href="function.pg-field-num.php.html">pg_field_num</a> — Возвращает порядковый номер именованного поля</li><li><a href="function.pg-field-prtlen.php.html">pg_field_prtlen</a> — Возвращает количество печатаемых символов</li><li><a href="function.pg-field-size.php.html">pg_field_size</a> — Возвращает размер поля</li><li><a href="function.pg-field-table.php.html">pg_field_table</a> — Возвращает наименование или идентификатор таблицы, содержащей заданное поле</li><li><a href="function.pg-field-type-oid.php.html">pg_field_type_oid</a> — Возвращает идентификатор типа заданного поля</li><li><a href="function.pg-field-type.php.html">pg_field_type</a> — Возвращает имя типа заданного поля</li><li><a href="function.pg-flush.php.html">pg_flush</a> — Сбросить данные исходящего запроса на соединении</li><li><a href="function.pg-free-result.php.html">pg_free_result</a> — Очистка результата запроса и освобождение памяти</li><li><a href="function.pg-get-notify.php.html">pg_get_notify</a> — Получение SQL NOTIFY сообщения</li><li><a href="function.pg-get-pid.php.html">pg_get_pid</a> — Получает ID процесса сервера БД</li><li><a href="function.pg-get-result.php.html">pg_get_result</a> — Получение результата асинхронного запроса</li><li><a href="function.pg-host.php.html">pg_host</a> — Возвращает имя хоста, соответствующего подключению</li><li><a href="function.pg-insert.php.html">pg_insert</a> — Заносит данные из массива в таблицу базы данных</li><li><a href="function.pg-last-error.php.html">pg_last_error</a> — Получает сообщение о последней произошедшей ошибке на соединении с базой данных</li><li><a href="function.pg-last-notice.php.html">pg_last_notice</a> — Возвращает последнее уведомление от сервера PostgreSQL</li><li><a href="function.pg-last-oid.php.html">pg_last_oid</a> — Возвращает OID последней добавленной в базу строки</li><li><a href="function.pg-lo-close.php.html">pg_lo_close</a> — Закрывает большой объект</li><li><a href="function.pg-lo-create.php.html">pg_lo_create</a> — Создаёт большой объект</li><li><a href="function.pg-lo-export.php.html">pg_lo_export</a> — Вывод большого объекта в файл</li><li><a href="function.pg-lo-import.php.html">pg_lo_import</a> — Импорт большого объекта из файла</li><li><a href="function.pg-lo-open.php.html">pg_lo_open</a> — Открывает большой объект базы данных</li><li><a href="function.pg-lo-read-all.php.html">pg_lo_read_all</a> — Читает содержимое большого объекта и посылает напрямую в браузер</li><li><a href="function.pg-lo-read.php.html">pg_lo_read</a> — Читает данные большого объекта</li><li><a href="function.pg-lo-seek.php.html">pg_lo_seek</a> — Перемещает внутренний указатель большого объекта</li><li><a href="function.pg-lo-tell.php.html">pg_lo_tell</a> — Возвращает текущее положение внутреннего указателя большого объекта</li><li><a href="function.pg-lo-truncate.php.html">pg_lo_truncate</a> — Обрезает большой объект</li><li><a href="function.pg-lo-unlink.php.html">pg_lo_unlink</a> — Удаление большого объекта</li><li><a href="function.pg-lo-write.php.html">pg_lo_write</a> — Записывает данные в большой объект</li><li><a href="function.pg-meta-data.php.html">pg_meta_data</a> — Получение метаданных таблицы</li><li><a href="function.pg-num-fields.php.html">pg_num_fields</a> — Возвращает количество полей в выборке</li><li><a href="function.pg-num-rows.php.html">pg_num_rows</a> — Возвращает количество строк в выборке</li><li><a href="function.pg-options.php.html">pg_options</a> — Получение параметров соединения с сервером баз данных</li><li><a href="function.pg-parameter-status.php.html">pg_parameter_status</a> — Просмотр текущих значений параметров сервера</li><li><a href="function.pg-pconnect.php.html">pg_pconnect</a> — Открывает постоянное соединение с сервером PostgreSQL</li><li><a href="function.pg-ping.php.html">pg_ping</a> — Проверка соединения с базой данных</li><li><a href="function.pg-port.php.html">pg_port</a> — Возвращает номер порта, соответствующий заданному соединению</li><li><a href="function.pg-prepare.php.html">pg_prepare</a> — Посылает запрос на создание параметризованного SQL выражения
  и ждёт его завершения</li><li><a href="function.pg-put-line.php.html">pg_put_line</a> — Передаёт на PostgreSQL сервер строку с завершающим нулём</li><li><a href="function.pg-query-params.php.html">pg_query_params</a> — Посылает параметризованный запрос на сервер, параметры передаются отдельно от текста SQL запроса</li><li><a href="function.pg-query.php.html">pg_query</a> — Выполняет запрос</li><li><a href="function.pg-result-error-field.php.html">pg_result_error_field</a> — Возвращает конкретное поле из отчёта об ошибках</li><li><a href="function.pg-result-error.php.html">pg_result_error</a> — Возвращает сообщение об ошибке, связанное с запросом результата</li><li><a href="function.pg-result-seek.php.html">pg_result_seek</a> — Смещает указатель на строку выборки в экземпляре результата запроса</li><li><a href="function.pg-result-status.php.html">pg_result_status</a> — Возвращает состояние результата запроса</li><li><a href="function.pg-select.php.html">pg_select</a> — Выбирает записи из базы данных</li><li><a href="function.pg-send-execute.php.html">pg_send_execute</a> — Запускает предварительно подготовленный SQL-запрос и
   передаёт ему параметры; не ожидает возвращаемого результата</li><li><a href="function.pg-send-prepare.php.html">pg_send_prepare</a> — Посылает запрос на создание параметризованного SQL-выражения,
   не дожидаясь его завершения</li><li><a href="function.pg-send-query-params.php.html">pg_send_query_params</a> — Посылает параметризованный запрос на сервер, не ожидает возвращаемого результата</li><li><a href="function.pg-send-query.php.html">pg_send_query</a> — Отправляет асинхронный запрос</li><li><a href="function.pg-set-client-encoding.php.html">pg_set_client_encoding</a> — Устанавливает клиентскую кодировку</li><li><a href="function.pg-set-error-context-visibility.php.html">pg_set_error_context_visibility</a> — Определяет видимость сообщений об ошибках контекста, возвращаемых функциями pg_last_error
   и pg_result_error</li><li><a href="function.pg-set-error-verbosity.php.html">pg_set_error_verbosity</a> — Определяет объем текста сообщений, возвращаемых функциями
   pg_last_error и pg_result_error</li><li><a href="function.pg-socket.php.html">pg_socket</a> — Получить дескриптор только для чтения на сокет, лежащего в основе соединения PostgreSQL</li><li><a href="function.pg-trace.php.html">pg_trace</a> — Включает трассировку подключения PostgreSQL</li><li><a href="function.pg-transaction-status.php.html">pg_transaction_status</a> — Возвращает текущее состояние транзакции на сервере</li><li><a href="function.pg-tty.php.html">pg_tty</a> — Возвращает имя терминала TTY, связанное с соединением</li><li><a href="function.pg-unescape-bytea.php.html">pg_unescape_bytea</a> — Убирает экранирование двоичных данных типа bytea</li><li><a href="function.pg-untrace.php.html">pg_untrace</a> — Отключает трассировку соединения с PostgreSQL</li><li><a href="function.pg-update.php.html">pg_update</a> — Обновление данных в таблице</li><li><a href="function.pg-version.php.html">pg_version</a> — Возвращает массив, содержащий версии клиента, протокола клиент-серверного
   взаимодействия и сервера (если доступно)</li></ul>
</div>
<section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=ref.pgsql&amp;redirect=https://www.php.net/manual/ru/ref.pgsql.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">18 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="42679">  <div class="votes">
    <div id="Vu42679">
    <a href="https://www.php.net/manual/vote-note.php?id=42679&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd42679">
    <a href="https://www.php.net/manual/vote-note.php?id=42679&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V42679" title="80% like this...">
    3
    </div>
  </div>
  <a href="ref.pgsql.php.html#42679" class="name">
  <strong class="user"><em>abondi at ijk dot it</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#42679"> &para;</a><div class="date" title="2004-05-26 05:11"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom42679">
<div class="phpcode"><code><span class="html">I've found another function to mimic the following mysql list tables function (<a href="http://www.php.net/manual/en/function.mysql-list-tables.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/function.mysql-list-tables.php</a>) that's more useful for my target:<br /><br />function pg_list_tables() {<br />      $sql = "SELECT a.relname AS Name<br />          FROM pg_class a, pg_user b<br />          WHERE ( relkind = 'r') and relname !~ '^pg_' AND relname !~ '^sql_'<br />          AND relname !~ '^xin[vx][0-9]+' AND b.usesysid = a.relowner<br />          AND NOT (EXISTS (SELECT viewname FROM pg_views WHERE viewname=a.relname));";<br />      return(pg_query($conn, $sql));<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="108639">  <div class="votes">
    <div id="Vu108639">
    <a href="https://www.php.net/manual/vote-note.php?id=108639&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd108639">
    <a href="https://www.php.net/manual/vote-note.php?id=108639&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V108639" title="59% like this...">
    8
    </div>
  </div>
  <a href="ref.pgsql.php.html#108639" class="name">
  <strong class="user"><em>Tony Murray</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#108639"> &para;</a><div class="date" title="2012-05-13 09:52"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom108639">
<div class="phpcode"><code><span class="html">A simple conversion for 1D PostgreSQL array data:<br /><br />// =====<br />//Example #1 (An array of IP addresses):<br /><span class="default">&lt;?php<br />  $pgsqlArr </span><span class="keyword">= </span><span class="string">'{192.168.1.1,10.1.1.1}'</span><span class="keyword">;<br /><br />  </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^{(.*)}$/'</span><span class="keyword">, </span><span class="default">$pgsqlArr</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />  </span><span class="default">$phpArr </span><span class="keyword">= </span><span class="default">str_getcsv</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br /><br />  </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$phpArr</span><span class="keyword">);<br />}<br /></span><span class="comment">// Output:<br />// Array<br />// (<br />//    [0] =&gt; 192.168.1.1<br />//    [1] =&gt; 10.1.1.1<br />// )<br />// =====<br /><br />// =====<br />// Example #2 (An array of strings including spaces and commas):<br /></span><span class="keyword">&lt;?</span><span class="default">php<br />  $pgsqlArr </span><span class="keyword">= </span><span class="string">'{string1,string2,"string,3","string 4"}'</span><span class="keyword">;<br /><br />  </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^{(.*)}$/'</span><span class="keyword">, </span><span class="default">$pgsqlArr</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />  </span><span class="default">$phpArr </span><span class="keyword">= </span><span class="default">str_getcsv</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br /><br />  </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$phpArr</span><span class="keyword">);<br />}<br /></span><span class="comment">// Output:<br />// Array<br />// (<br />//    [0] =&gt; string1<br />//    [1] =&gt; string2<br />//    [2] =&gt; string,3<br />//    [3] =&gt; string 4<br />// )<br />// =====</span></span></code></div>
  </div>
 </div>
  <div class="note" id="57709">  <div class="votes">
    <div id="Vu57709">
    <a href="https://www.php.net/manual/vote-note.php?id=57709&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd57709">
    <a href="https://www.php.net/manual/vote-note.php?id=57709&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V57709" title="60% like this...">
    1
    </div>
  </div>
  <a href="ref.pgsql.php.html#57709" class="name">
  <strong class="user"><em>1413 at blargh dot com</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#57709"> &para;</a><div class="date" title="2005-10-11 05:09"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom57709">
<div class="phpcode"><code><span class="html">Here is some quick and dirty code to convert Postgres-returned arrays into PHP arrays.  There's probably a billion bugs, but since I'm only dealing with variable-depth-and-length arrays of integers, it works for my needs.<br /><br />Most notably, any data that might have commas in it won't work right...<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">PGArrayToPHPArray</span><span class="keyword">(</span><span class="default">$pgArray</span><span class="keyword">)<br />{<br />  </span><span class="default">$ret </span><span class="keyword">= array();<br />  </span><span class="default">$stack </span><span class="keyword">= array(&amp;</span><span class="default">$ret</span><span class="keyword">);<br />  </span><span class="default">$pgArray </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$pgArray</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">);<br />  </span><span class="default">$pgElements </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">, </span><span class="default">$pgArray</span><span class="keyword">);<br />  <br />  </span><span class="default">ArrayDump</span><span class="keyword">(</span><span class="default">$pgElements</span><span class="keyword">);<br /><br />  foreach(</span><span class="default">$pgElements </span><span class="keyword">as </span><span class="default">$elem</span><span class="keyword">)<br />    {<br />      if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$elem</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">) == </span><span class="string">"}"</span><span class="keyword">)<br />        {<br />          </span><span class="default">$elem </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$elem</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">);<br />          </span><span class="default">$newSub </span><span class="keyword">= array();<br />          while(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$elem</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">) != </span><span class="string">"{"</span><span class="keyword">)<br />            {<br />              </span><span class="default">$newSub</span><span class="keyword">[] = </span><span class="default">$elem</span><span class="keyword">;<br />              </span><span class="default">$elem </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$ret</span><span class="keyword">);<br />            }<br />          </span><span class="default">$newSub</span><span class="keyword">[] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$elem</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />          </span><span class="default">$ret</span><span class="keyword">[] = </span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">$newSub</span><span class="keyword">);<br />        }<br />      else<br />        </span><span class="default">$ret</span><span class="keyword">[] = </span><span class="default">$elem</span><span class="keyword">;<br />    }<br />  return </span><span class="default">$ret</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="28047">  <div class="votes">
    <div id="Vu28047">
    <a href="https://www.php.net/manual/vote-note.php?id=28047&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd28047">
    <a href="https://www.php.net/manual/vote-note.php?id=28047&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V28047" title="57% like this...">
    1
    </div>
  </div>
  <a href="ref.pgsql.php.html#28047" class="name">
  <strong class="user"><em>daniel at bichara dot com dot br</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#28047"> &para;</a><div class="date" title="2002-12-30 05:04"><strong>21 years ago</strong></div>
  <div class="text" id="Hcom28047">
<div class="phpcode"><code><span class="html">Running RedHat Linux and Apache with suexec enabled you must include pgsql.so on each .php file using dl("pgsql.so") and remove "extension=pgsql.so" from php.ini, otherwise Apache (httpd) will not start.</span></code></div>
  </div>
 </div>
  <div class="note" id="43751">  <div class="votes">
    <div id="Vu43751">
    <a href="https://www.php.net/manual/vote-note.php?id=43751&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd43751">
    <a href="https://www.php.net/manual/vote-note.php?id=43751&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V43751" title="55% like this...">
    1
    </div>
  </div>
  <a href="ref.pgsql.php.html#43751" class="name">
  <strong class="user"><em>74012 dot 2773 at compuserve dot com</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#43751"> &para;</a><div class="date" title="2004-07-01 09:35"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom43751">
<div class="phpcode"><code><span class="html">for just a list of tables, this works with postgresql-7.2.1:<br /><br />function pg_list_tables($db) {<br />    $sql = "select relname from pg_stat_user_tables order by relname;";<br />    return pg_query($db, $sql);<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="15521">  <div class="votes">
    <div id="Vu15521">
    <a href="https://www.php.net/manual/vote-note.php?id=15521&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd15521">
    <a href="https://www.php.net/manual/vote-note.php?id=15521&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V15521" title="55% like this...">
    1
    </div>
  </div>
  <a href="ref.pgsql.php.html#15521" class="name">
  <strong class="user"><em>saberit at home dot com</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#15521"> &para;</a><div class="date" title="2001-09-15 02:11"><strong>22 years ago</strong></div>
  <div class="text" id="Hcom15521">
<div class="phpcode"><code><span class="html">I tried compiling PHP from source with PostgreSQL support (./configure --with-pgsql=/usr/local/pgsql) and ran into a bunch of problems when trying to 'make'. The problem was that some of the PostgreSQL headers were not installed by default when I installed PostgreSQL from source. When installing PostgreSQL make sure you 'make install-all-headers' after you 'make install'.</span></code></div>
  </div>
 </div>
  <div class="note" id="53036">  <div class="votes">
    <div id="Vu53036">
    <a href="https://www.php.net/manual/vote-note.php?id=53036&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd53036">
    <a href="https://www.php.net/manual/vote-note.php?id=53036&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V53036" title="50% like this...">
    0
    </div>
  </div>
  <a href="ref.pgsql.php.html#53036" class="name">
  <strong class="user"><em>WillowCatkin at hotmail dot com</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#53036"> &para;</a><div class="date" title="2005-05-21 06:43"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom53036">
<div class="phpcode"><code><span class="html">There is an example:<br /><span class="default">&lt;?php<br /></span><span class="comment">/*<br /> * Define PostgreSQL database server connect parameters.<br /> */<br /></span><span class="default">define</span><span class="keyword">(</span><span class="string">'PGHOST'</span><span class="keyword">,</span><span class="string">'10.0.0.218'</span><span class="keyword">);<br /></span><span class="default">define</span><span class="keyword">(</span><span class="string">'PGPORT'</span><span class="keyword">,</span><span class="default">5432</span><span class="keyword">);<br /></span><span class="default">define</span><span class="keyword">(</span><span class="string">'PGDATABASE'</span><span class="keyword">,</span><span class="string">'example'</span><span class="keyword">);<br /></span><span class="default">define</span><span class="keyword">(</span><span class="string">'PGUSER'</span><span class="keyword">, </span><span class="string">'root'</span><span class="keyword">);<br /></span><span class="default">define</span><span class="keyword">(</span><span class="string">'PGPASSWORD'</span><span class="keyword">, </span><span class="string">'nopass'</span><span class="keyword">);<br /></span><span class="default">define</span><span class="keyword">(</span><span class="string">'PGCLIENTENCODING'</span><span class="keyword">,</span><span class="string">'UNICODE'</span><span class="keyword">);<br /></span><span class="default">define</span><span class="keyword">(</span><span class="string">'ERROR_ON_CONNECT_FAILED'</span><span class="keyword">,</span><span class="string">'Sorry, can not connect the database server now!'</span><span class="keyword">);<br /><br /></span><span class="comment">/*<br /> * Merge connect string and connect db server with default parameters.<br /> */<br /></span><span class="default">pg_pconnect</span><span class="keyword">(</span><span class="string">'host=' </span><span class="keyword">. </span><span class="default">PGHOST </span><span class="keyword">. </span><span class="string">' port=' </span><span class="keyword">. </span><span class="default">PGPORT </span><span class="keyword">. </span><span class="string">' dbname=' </span><span class="keyword">. </span><span class="default">PGDATABASE </span><span class="keyword">. </span><span class="string">' user=' </span><span class="keyword">. </span><span class="default">PGUSER </span><span class="keyword">. </span><span class="string">' password=' </span><span class="keyword">. </span><span class="default">PGPASSWORD</span><span class="keyword">);<br /><br /></span><span class="comment">/*<br /> * generate sql statements to call db-server-side stored procedure(or function) <br /> * @parameter    string    $proc        stored procedure name.<br /> * @parameter    array    $paras        parameters, 2 dimensions array.<br /> * @return        string    $sql = 'select "proc"(para1,para2,para3);'<br /> * @example    pg_prepare('userExists',<br /> *                            array(<br /> *                                array('userName','chin','string'),<br /> *                                array('userId','7777','numeric')<br /> *                            )<br /> * )<br /> */<br /></span><span class="keyword">function </span><span class="default">pg_prepare</span><span class="keyword">(</span><span class="default">$proc</span><span class="keyword">, </span><span class="default">$paras</span><span class="keyword">)<br />{<br />    </span><span class="default">$sql </span><span class="keyword">= </span><span class="string">'select "' </span><span class="keyword">. </span><span class="default">$proc </span><span class="keyword">. </span><span class="string">'"('</span><span class="keyword">;<br />    </span><span class="default">$sql </span><span class="keyword">.= </span><span class="default">$paras</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">] == </span><span class="string">'numeric' </span><span class="keyword">? </span><span class="default">$paras</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] : </span><span class="string">"'" </span><span class="keyword">. </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"'"</span><span class="keyword">,</span><span class="string">"''"</span><span class="keyword">,</span><span class="default">$paras</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">]) . </span><span class="string">"'"</span><span class="keyword">;<br />    </span><span class="default">$len </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$paras</span><span class="keyword">);<br />    for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">++)<br />    {<br />        </span><span class="default">$sql </span><span class="keyword">.= </span><span class="string">','</span><span class="keyword">;<br />        </span><span class="default">$sql </span><span class="keyword">.= </span><span class="default">$paras</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">] == </span><span class="string">'numeric' </span><span class="keyword">? </span><span class="default">$paras</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] : </span><span class="string">"'" </span><span class="keyword">. </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"'"</span><span class="keyword">,</span><span class="string">"''"</span><span class="keyword">,</span><span class="default">$paras</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">]) . </span><span class="string">"'"</span><span class="keyword">;<br />    }<br />    </span><span class="default">$sql </span><span class="keyword">.= </span><span class="string">');'</span><span class="keyword">;<br />    return </span><span class="default">$sql</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div>
  <div class="note" id="27265">  <div class="votes">
    <div id="Vu27265">
    <a href="https://www.php.net/manual/vote-note.php?id=27265&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd27265">
    <a href="https://www.php.net/manual/vote-note.php?id=27265&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V27265" title="42% like this...">
    -1
    </div>
  </div>
  <a href="ref.pgsql.php.html#27265" class="name">
  <strong class="user"><em>anonymous at unknown dot com</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#27265"> &para;</a><div class="date" title="2002-11-29 09:50"><strong>21 years ago</strong></div>
  <div class="text" id="Hcom27265">
<div class="phpcode"><code><span class="html">I just wanted to add to my previous post I've got the system up and running.<br />Environment: Windows XP, Apache 1.3.23, Php 4.3 RC2, PostGreSQL beta4 native windows build<br /><br />Installation was fairly easy: <br />1. read the readme.txt<br />2. edit the setenv.bat as described in readme<br />3. run 'initdb'<br />    all execs are in /bin<br />    help is accessed like &lt;command&gt; --help<br />4. Start the psql deamon - you may want to create a batch file like<br />    'D:\postgres_beta4\bin\postmaster -h localhost -D D:/postgres_beta4/data'<br /><br />    --deamon should be up and running now--<br /><br />You can login into a shell from a console like<br />    'psql -h localhost -d &lt;username&gt;'<br /><br />You must load the postgresql extension by editing the php.ini and restarting apache in order to access psql with php.<br /><br />And one final not: when running<br />    $dbconn = pg_connect ("host=localhost port=5432 dbname=$dbname user=$user");<br />remember that $user and or $dbname is CASESENSITIVE.<br /><br />Oh yeah, I created the data dir manually - don't know whether that was necessary<br /><br />Grtz Vargo</span></code></div>
  </div>
 </div>
  <div class="note" id="53559">  <div class="votes">
    <div id="Vu53559">
    <a href="https://www.php.net/manual/vote-note.php?id=53559&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd53559">
    <a href="https://www.php.net/manual/vote-note.php?id=53559&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V53559" title="40% like this...">
    -1
    </div>
  </div>
  <a href="ref.pgsql.php.html#53559" class="name">
  <strong class="user"><em>anis_wn at gawab dot com</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#53559"> &para;</a><div class="date" title="2005-06-05 09:45"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom53559">
<div class="phpcode"><code><span class="html">Setting up PostgreSQL for higher security PHP connection.<br /><br />Case:<br />We want to connect to PostgreSQL database using username and password supplied by webuser at login time.<br /><br />Fact (Linux):<br />Apache (perhaps other servers, too) running the server as (default to) apache user account. So if you connect to PostgreSQL using default user, apache will be assingned for it. If you hard code the user and password in your PHP script, you'll loose security restriction from PostgreSQL.<br /><br />Solution:<br />(You are assumed to have enough privilege to do these things, though)<br />1. Edit pg_hba.conf to have the line like the one below<br />    host    db_Name    [web_server_ip_address] [ip_address_mask] md5<br />2. Add to you script the login page that submits username and password.<br />3. Use those information to login to PostgreSQL like these...<br />&lt;?<br />    $conn = "host=$DBHost port=$DBPort dbname=$DBName ".<br />            "user='{$_POST['dbUsername']}' password='{$_POST['dbPassword']}'";<br />    $db = pg_connect ($conn);<br />[your other codes go here...]<br />?&gt;<br />4. You must add users in PostgreSQL properly.<br />5. For your convenience, you can store the username and password to $_SESSION variable.<br /><br />Good luck.<br />Anis WN</span></code></div>
  </div>
 </div>
  <div class="note" id="70596">  <div class="votes">
    <div id="Vu70596">
    <a href="https://www.php.net/manual/vote-note.php?id=70596&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd70596">
    <a href="https://www.php.net/manual/vote-note.php?id=70596&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V70596" title="33% like this...">
    -1
    </div>
  </div>
  <a href="ref.pgsql.php.html#70596" class="name"><strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#70596"> &para;</a><div class="date" title="2006-10-20 10:10"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom70596">
<div class="phpcode"><code><span class="html">Lots of advice on stored procedures didn't work for me.  This did:<br /><br /><span class="default">&lt;?php<br />$response </span><span class="keyword">= </span><span class="default">pg_query</span><span class="keyword">( </span><span class="default">$connection</span><span class="keyword">, </span><span class="string">"BEGIN; DECLARE s CURSOR FOR SELECT get_consumer('harry'); FETCH ALL IN s; END;" </span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />..where harry looks like this:<br /><br />CREATE OR REPLACE FUNCTION get_consumer( varchar )<br />RETURNS refcursor<br />AS '<br />DECLARE<br />  _name          ALIAS FOR $1;<br />  r              refcursor;<br />BEGIN<br />  OPEN r FOR SELECT name FROM consumer<br />  WHERE<br />    consumer.name = _name<br />  ;<br />  RETURN r;<br />END<br />' LANGUAGE 'plpgsql';</span></code></div>
  </div>
 </div>
  <div class="note" id="12467">  <div class="votes">
    <div id="Vu12467">
    <a href="https://www.php.net/manual/vote-note.php?id=12467&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd12467">
    <a href="https://www.php.net/manual/vote-note.php?id=12467&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V12467" title="33% like this...">
    -1
    </div>
  </div>
  <a href="ref.pgsql.php.html#12467" class="name">
  <strong class="user"><em>!spamcraig at ahdore dot com</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#12467"> &para;</a><div class="date" title="2001-04-15 01:11"><strong>22 years ago</strong></div>
  <div class="text" id="Hcom12467">
<div class="phpcode"><code><span class="html">If you want to extract data from select statements, you need to store the result index, and then apply pg_result to that value. Basically, do this<br /><br />$resultIdx = pg_query ($database, "select * from tablename");<br />$mySelect = pg_fetch_result($resultIdx, 0, 0);  // gets column 0 of tuple 0<br />echo("My select: [".$mySelect."]");<br /><br />I'm new to php and had to do some fiddling around to work this out. It's reasonably elementary, but not demonstrated by the examples on these pages. Hopefully it will come in useful to someone else.</span></code></div>
  </div>
 </div>
  <div class="note" id="18749">  <div class="votes">
    <div id="Vu18749">
    <a href="https://www.php.net/manual/vote-note.php?id=18749&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd18749">
    <a href="https://www.php.net/manual/vote-note.php?id=18749&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V18749" title="33% like this...">
    -2
    </div>
  </div>
  <a href="ref.pgsql.php.html#18749" class="name">
  <strong class="user"><em>mystran at wasteland dot pp dot htv dot fi</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#18749"> &para;</a><div class="date" title="2002-02-03 07:46"><strong>22 years ago</strong></div>
  <div class="text" id="Hcom18749">
<div class="phpcode"><code><span class="html">Nice to know fact that I didn't find documented here.<br /><br />PHP will return values of PostgreSQL boolean datatype as single character strings "t" and "f", not PHP true and false.<br /><br />[Editor's Note]<br />'t' or 'f' is valid boolean expression for PostgreSQL.<br /><br />All values from PostgreSQL are strings, since PostgreSQL integer, float may be much larger than PHP's native int, double can handle. PostgreSQL array is not supported.</span></code></div>
  </div>
 </div>
  <div class="note" id="13660">  <div class="votes">
    <div id="Vu13660">
    <a href="https://www.php.net/manual/vote-note.php?id=13660&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd13660">
    <a href="https://www.php.net/manual/vote-note.php?id=13660&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V13660" title="33% like this...">
    -2
    </div>
  </div>
  <a href="ref.pgsql.php.html#13660" class="name">
  <strong class="user"><em>passion at monkey dot org</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#13660"> &para;</a><div class="date" title="2001-06-27 06:53"><strong>22 years ago</strong></div>
  <div class="text" id="Hcom13660">
<div class="phpcode"><code><span class="html">I've tried to mimic the following mysql database connection functions for postgres. <br /><a href="http://www.php.net/manual/en/function.mysql-list-dbs.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/function.mysql-list-dbs.php</a><br /><a href="http://www.php.net/manual/en/function.mysql-list-tables.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/function.mysql-list-tables.php</a><br /><br />These are assuming that you're passing in $link as the result from pg_connect:<br /><br />function pg_list_dbs($link)<br />{  <br />    $sql = 'SELECT datname FROM pg_database';<br />    return (pg_query($link, $sql));<br />}  <br /><br />function pg_list_tables($link)<br />{  <br />    $sql = "SELECT relname FROM pg_class WHERE relname !~ '^pg_'";<br />    return (pg_query($link, $sql));<br />}</span></code></div>
  </div>
 </div>
  <div class="note" id="58660">  <div class="votes">
    <div id="Vu58660">
    <a href="https://www.php.net/manual/vote-note.php?id=58660&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd58660">
    <a href="https://www.php.net/manual/vote-note.php?id=58660&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V58660" title="25% like this...">
    -2
    </div>
  </div>
  <a href="ref.pgsql.php.html#58660" class="name">
  <strong class="user"><em>Chris KL</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#58660"> &para;</a><div class="date" title="2005-11-10 05:17"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom58660">
<div class="phpcode"><code><span class="html">Here is a better array parser for PHP.  It will work with 1-d arrays only.  Unlike the example below it will work in all cases.<br /><br />    /**<br />     * Change a db array into a PHP array<br />     * @param $arr String representing the DB array<br />     * @return A PHP array<br />     */<br />    function phpArray($dbarr) {<br />        // Take off the first and last characters (the braces)<br />        $arr = substr($dbarr, 1, strlen($dbarr) - 2);<br /><br />        // Pick out array entries by carefully parsing.  This is necessary in order<br />        // to cope with double quotes and commas, etc.<br />        $elements = array();<br />        $i = $j = 0;        <br />        $in_quotes = false;<br />        while ($i &lt; strlen($arr)) {<br />            // If current char is a double quote and it's not escaped, then<br />            // enter quoted bit<br />            $char = substr($arr, $i, 1);<br />            if ($char == '"' &amp;&amp; ($i == 0 || substr($arr, $i - 1, 1) != '\\')) <br />                $in_quotes = !$in_quotes;<br />            elseif ($char == ',' &amp;&amp; !$in_quotes) {<br />                // Add text so far to the array<br />                $elements[] = substr($arr, $j, $i - $j);<br />                $j = $i + 1;<br />            }<br />            $i++;<br />        }<br />        // Add final text to the array<br />        $elements[] = substr($arr, $j);<br /><br />        // Do one further loop over the elements array to remote double quoting<br />        // and escaping of double quotes and backslashes<br />        for ($i = 0; $i &lt; sizeof($elements); $i++) {<br />            $v = $elements[$i];<br />            if (strpos($v, '"') === 0) {<br />                $v = substr($v, 1, strlen($v) - 2);<br />                $v = str_replace('\\"', '"', $v);<br />                $v = str_replace('\\\\', '\\', $v);<br />                $elements[$i] = $v;<br />            }<br />        }<br /><br />        return $elements;<br />    }</span></code></div>
  </div>
 </div>
  <div class="note" id="46209">  <div class="votes">
    <div id="Vu46209">
    <a href="https://www.php.net/manual/vote-note.php?id=46209&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd46209">
    <a href="https://www.php.net/manual/vote-note.php?id=46209&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V46209" title="25% like this...">
    -2
    </div>
  </div>
  <a href="ref.pgsql.php.html#46209" class="name">
  <strong class="user"><em>adaml at mimuw edu pl</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#46209"> &para;</a><div class="date" title="2004-10-02 06:07"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom46209">
<div class="phpcode"><code><span class="html">Yes, PHP does support stored procedures<br />You have to add "select" before the name of the <br />procedure, just like that:<br /><br />$result = pg_querry($conn, "SELECT procedure_x($aa)");<br /><br />if a procedure returns a cursor you do something like that:<br /><br />$result = pg_query($conn, "SELECT procedure_x('rcursor'); FETCH ALL IN rcursor");</span></code></div>
  </div>
 </div>
  <div class="note" id="13904">  <div class="votes">
    <div id="Vu13904">
    <a href="https://www.php.net/manual/vote-note.php?id=13904&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd13904">
    <a href="https://www.php.net/manual/vote-note.php?id=13904&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V13904" title="25% like this...">
    -2
    </div>
  </div>
  <a href="ref.pgsql.php.html#13904" class="name">
  <strong class="user"><em>hubert at hubertmuller dot com</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#13904"> &para;</a><div class="date" title="2001-07-09 04:36"><strong>22 years ago</strong></div>
  <div class="text" id="Hcom13904">
<div class="phpcode"><code><span class="html">The best way to find the separated list of tables, sequences, keys etc is:<br /><br />SELECT relname FROM pg_class WHERE relkind='&lt;value&gt;' AND relname !~ '^pg_';<br /><br />&lt;value&gt; takes:<br />i for keys,<br />r for relations,<br />S for sequences<br /><br />Note that all tables names that begins with 'pg_' are PostgreSQL internal tables (this explain why I use AND relname !~ '^pg_' condition).</span></code></div>
  </div>
 </div>
  <div class="note" id="4113">  <div class="votes">
    <div id="Vu4113">
    <a href="https://www.php.net/manual/vote-note.php?id=4113&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd4113">
    <a href="https://www.php.net/manual/vote-note.php?id=4113&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V4113" title="25% like this...">
    -2
    </div>
  </div>
  <a href="ref.pgsql.php.html#4113" class="name">
  <strong class="user"><em>bleach at chek dot com</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#4113"> &para;</a><div class="date" title="2000-03-02 12:36"><strong>23 years ago</strong></div>
  <div class="text" id="Hcom4113">
<div class="phpcode"><code><span class="html">If you want to see all the objects in a database, you can find that information in the pg_class table. &lt;BR&gt;<br />SELECT * FROM pg_class;&lt;BR&gt;<br />Now this is going to be kind of long and complex, to see how psql command handles the \d and other things. use the syntax.  psql -E &lt;Database&gt;, ie psql -E mydatabase &lt;BR&gt;<br />What this will do is show the SQL command used for everything. So when you type a \d or something, it shows the SQL query used for the result.</span></code></div>
  </div>
 </div>
  <div class="note" id="71221">  <div class="votes">
    <div id="Vu71221">
    <a href="https://www.php.net/manual/vote-note.php?id=71221&amp;page=ref.pgsql&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd71221">
    <a href="https://www.php.net/manual/vote-note.php?id=71221&amp;page=ref.pgsql&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V71221" title="13% like this...">
    -11
    </div>
  </div>
  <a href="ref.pgsql.php.html#71221" class="name"><strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="ref.pgsql.php.html#71221"> &para;</a><div class="date" title="2006-11-16 04:30"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom71221">
<div class="phpcode"><code><span class="html">Chris KL: Will parse well {"\\"}? The second " will be treat as escaped while it shoudn't...</span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=ref.pgsql&amp;redirect=https://www.php.net/manual/ru/ref.pgsql.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="book.pgsql.php.html">PostgreSQL</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="intro.pgsql.php.html" title="Введение">Введение</a>
                        </li>
                                                <li class="">
                            <a href="pgsql.setup.php.html" title="Установка и настройка">Установка и настройка</a>
                        </li>
                                                <li class="">
                            <a href="pgsql.constants.php.html" title="Предопределённые константы">Предопределённые константы</a>
                        </li>
                                                <li class="">
                            <a href="pgsql.examples.php.html" title="Примеры">Примеры</a>
                        </li>
                                                <li class="current">
                            <a href="ref.pgsql.php.html" title="Функции PostgreSQL">Функции PostgreSQL</a>
                        </li>
                                                <li class="">
                            <a href="class.pgsql-connection.php.html" title="PgSql\Connection">PgSql\Connection</a>
                        </li>
                                                <li class="">
                            <a href="class.pgsql-result.php.html" title="PgSql\Result">PgSql\Result</a>
                        </li>
                                                <li class="">
                            <a href="class.pgsql-lob.php.html" title="PgSql\Lob">PgSql\Lob</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
