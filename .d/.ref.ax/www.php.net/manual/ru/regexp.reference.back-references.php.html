<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: Обратные ссылки - Manual </title>

 <link rel="icon" type="image/svg+xml" sizes="any" href="../../favicon.svg%3Fv=2">
 <link rel="icon" type="image/png" sizes="196x196" href="../../favicon-196x196.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png%3Fv=2">
 <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png%3Fv=2">
 <link rel="shortcut icon" href="../../favicon.ico%3Fv=2">

 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="regexp.reference.back-references.php.html">
 <link rel="shorturl" href="regexp.reference.back-references.php.html">
 <link rel="alternate" href="regexp.reference.back-references.php.html" hreflang="x-default">

 <link rel="contents" href="index.php.html">
 <link rel="index" href="reference.pcre.pattern.syntax.php.html">
 <link rel="prev" href="regexp.reference.repetition.php.html">
 <link rel="next" href="regexp.reference.assertions.php.html">

 <link rel="alternate" href="https://www.php.net/manual/en/regexp.reference.back-references.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/de/regexp.reference.back-references.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/es/regexp.reference.back-references.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/fr/regexp.reference.back-references.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/it/regexp.reference.back-references.php" hreflang="it">
 <link rel="alternate" href="https://www.php.net/manual/ja/regexp.reference.back-references.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/regexp.reference.back-references.php" hreflang="pt_BR">
 <link rel="alternate" href="regexp.reference.back-references.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/tr/regexp.reference.back-references.php" hreflang="tr">
 <link rel="alternate" href="https://www.php.net/manual/zh/regexp.reference.back-references.php" hreflang="zh">

<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1689765002&amp;f=%252Ffonts%252FFira%252Ffira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1700771401&amp;f=%252Ffonts%252FFont-Awesome%252Fcss%252Ffontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1705413607&amp;f=%252Fstyles%252Ftheme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached.php%3Ft=1701958202&amp;f=%252Fstyles%252Ftheme-medium.css" media="screen">

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="../../images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.3/index.php">
          <img src="../../images/php8/logo_php8_3.svg" alt="php8.3" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='https://www.php.net/conferences/index.php#2024-02-13-1'>Dutch PHP Conference 2024</a></div>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.attributes.php'>Predefined Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="regexp.reference.assertions.php.html">
          Утверждения &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="regexp.reference.repetition.php.html">
          &laquo; Повторение        </a>
      </div>
          <ul>
            <li><a href='index.php.html'>Руководство по PHP</a></li>      <li><a href='funcref.php.html'>Справочник функций</a></li>      <li><a href='refs.basic.text.php.html'>Обработка текста</a></li>      <li><a href='book.pcre.php.html'>PCRE</a></li>      <li><a href='pcre.pattern.php.html'>Регулярные выражения PCRE</a></li>      <li><a href='reference.pcre.pattern.syntax.php.html'>Описание синтаксиса Perl-совместимых регулярных выражений</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/regexp.reference.back-references.php'>English</option>
            <option value='de/regexp.reference.back-references.php'>German</option>
            <option value='es/regexp.reference.back-references.php'>Spanish</option>
            <option value='fr/regexp.reference.back-references.php'>French</option>
            <option value='it/regexp.reference.back-references.php'>Italian</option>
            <option value='ja/regexp.reference.back-references.php'>Japanese</option>
            <option value='pt_BR/regexp.reference.back-references.php'>Brazilian Portuguese</option>
            <option value='ru/regexp.reference.back-references.php' selected="selected">Russian</option>
            <option value='tr/regexp.reference.back-references.php'>Turkish</option>
            <option value='zh/regexp.reference.back-references.php'>Chinese (Simplified)</option>
            <option value='help-translate.php'>Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/pcre/pattern.syntax.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Fregexp.reference.back-references%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="regexp.reference.back-references" class="section">
  <h2 class="title">Обратные ссылки</h2>
  <p class="para">
   Вне символьного класса обратный слеш с последующей цифрой
   больше нуля (и, возможно, последующими цифрами) интерпретируется
   как ссылка на предшествующую захватывающую подмаску, предполагая,
   что соответствующее количество предшествующих открывающих круглых
   скобок присутствует.
  </p>
  <p class="para">
   Однако, Если следующее за обратным слешем число меньше 10,
   оно всегда интерпретируется как обратная ссылка, и приводит к ошибке
   только в том случае, если нет соответствующего числа открывающих
   скобок. Другими словами, открывающие скобки не обязаны предшествовать
   ссылке для чисел меньше 10. «Упреждающая обратная ссылка» может
   иметь смысл, если используется повторение и более поздняя подмаска
   участвует в ранней итерации.
   Смотрите раздел <a href="regexp.reference.escape.php.html" class="link">escape-последовательности</a>
   для получения дополнительных сведений об обработке цифр, следующих за обратным слешем.
  </p>
  <p class="para">
   Обратная ссылка сопоставляется с частью строки, захваченной
   соответствующей подмаской, но не с самой подмаской.
   Таким образом шаблон

   <code class="literal">(sens|respons)e and \1ibility</code>

   соответствует «sense and sensibility», «response and responsibility»,
   но не «sense and responsibility». Если обратная ссылка
   обнаружена во время регистрозависимого поиска, то при
   сопоставлении обратной ссылки регистр также учитывается. Например,

   <code class="literal">((?i)rah)\s+\1</code>

   соответствует «rah rah» и «RAH RAH», но не «RAH rah», хотя сама
   подмаска сопоставляется без учёта регистра.
  </p>
  <p class="para">
   На одну и ту же подмаску может быть несколько ссылок. Если
   подмаска не участвовала в сопоставлении, то сопоставление со
   ссылкой на неё всегда терпит неудачу. Например, шаблон

   <code class="literal">(a|(bc))\2</code>

   терпит неудачу, если находит соответствие с «a» раньше, чем с «bc».
   Поскольку может быть до 99 обратных ссылок, все цифры, следующие
   за обратным слешем, рассматриваются как часть потенциальной
   обратной ссылки. Если за ссылкой должна следовать цифра, необходимо
   использовать ограничитель. Если указан флаг
   <a href="reference.pcre.pattern.modifiers.php.html" class="link">PCRE_EXTENDED</a>,
   ограничителем может быть любой пробельный символ. В противном
   случае можно использовать пустой комментарий.
  </p>
  <p class="para">
   Ссылка на подмаску, внутри которой она расположена, всегда терпит неудачу,
   если это первое сопоставление текущей подмаски. Например, шаблон (a\1)
   не соответствует ни одной строке. Но всё же такие ссылки бывают
   полезны в повторяющихся подмасках. Например, шаблон

   <code class="literal">(a|b\1)+</code>

   совпадает с любым количеством «a», «aba», «ababaa»... При
   каждой итерации подмаски обратная ссылка соответствует той части
   строки, которая была захвачена при предыдущей итерации.
   Чтобы такая конструкция работала, шаблон должен быть построен так,
   чтобы при первой итерации сопоставление с обратной ссылкой не производилось.
   Этого можно достичь, используя альтернативы (как в предыдущем
   примере), либо квантификаторы с минимумом, равным нулю.
  </p>
  <p class="para">
   Управляющая последовательность <code class="literal">\g</code>
   может быть использована для абсолютных и относительных ссылок на
   подмаски. После этой последовательности должно быть указано
   беззнаковое или отрицательное число, при желании заключённое в фигурные
   скобки. Последовательности <code class="literal">\1</code>, <code class="literal">\g1</code>
   и <code class="literal">\g{1}</code> эквивалентны друг другу.
   Использование этого шаблона с беззнаковым числом поможет избежать
   двусмысленности, присущей числам после обратного слеша. Это также
   помогает отличить обратные ссылки от символов в восьмеричном
   формате, а также упрощает запись числового литерала сразу после
   обратной ссылки, например, <code class="literal">\g{2}1</code>.
  </p>
  <p class="para">
   Использование отрицательных чисел с <code class="literal">\g</code> полезно при
   использовании относительных ссылок. Например, <code class="literal">(foo)(bar)\g{-1}</code>
   соответствует «foobarbar», а <code class="literal">(foo)(bar)\g{-2}</code>
   соответствует «foobarfoo». Это также может быть полезно в длинных
   шаблонах, в качестве альтернативы отслеживания числа подмасок,
   на которые можно ссылаться в последующей части шаблона.
  </p>
  <p class="para">
   Указать обратную ссылку на именованную подмаску можно с помощью
   <code class="literal">(?P=name)</code>,
   <code class="literal">\k&lt;name&gt;</code>, <code class="literal">\k&#039;name&#039;</code>, <code class="literal">\k{name}</code>,
   <code class="literal">\g{name}</code>, <code class="literal">\g&lt;name&gt;</code> или <code class="literal">\g&#039;name&#039;</code>.
  </p>
 </div><section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=regexp.reference.back-references&amp;redirect=https://www.php.net/manual/ru/regexp.reference.back-references.php">＋<small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">2 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="119566">  <div class="votes">
    <div id="Vu119566">
    <a href="https://www.php.net/manual/vote-note.php?id=119566&amp;page=regexp.reference.back-references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd119566">
    <a href="https://www.php.net/manual/vote-note.php?id=119566&amp;page=regexp.reference.back-references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V119566" title="68% like this...">
    13
    </div>
  </div>
  <a href="regexp.reference.back-references.php.html#119566" class="name">
  <strong class="user"><em>mnvx at yandex dot ru</em></strong></a><a class="genanchor" href="regexp.reference.back-references.php.html#119566"> &para;</a><div class="date" title="2016-07-07 09:35"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom119566">
<div class="phpcode"><code><span class="html">Something similar opportunity is DEFINE.<br /><br />Example:<br />    (?(DEFINE)(?&lt;myname&gt;\bvery\b))(?&amp;myname)\p{Pd}(?&amp;myname).<br /><br />Expression above will match "very-very" from next sentence:<br />    Define is very-very handy sometimes.<br />              ^-------^<br /><br />How it works. (?(DEFINE)(?&lt;myname&gt;\bvery\b)) - this block defines "myname" equal to "\bvery\b". So, this block "(?&amp;myname)\p{Pd}(?&amp;myname)" equvivalent to "\bvery\b\p{Pd}\bvery\b".</span></code></div>
  </div>
 </div>
  <div class="note" id="127718">  <div class="votes">
    <div id="Vu127718">
    <a href="https://www.php.net/manual/vote-note.php?id=127718&amp;page=regexp.reference.back-references&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd127718">
    <a href="https://www.php.net/manual/vote-note.php?id=127718&amp;page=regexp.reference.back-references&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V127718" title="50% like this...">
    0
    </div>
  </div>
  <a href="regexp.reference.back-references.php.html#127718" class="name">
  <strong class="user"><em>Steve</em></strong></a><a class="genanchor" href="regexp.reference.back-references.php.html#127718"> &para;</a><div class="date" title="2022-10-12 09:22"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom127718">
<div class="phpcode"><code><span class="html">The escape sequence \g used as a backreference may not always behave as expected.<br />The following numbered backreferences refer to the text matching the specified capture group, as documented:<br />\1<br />\g1<br />\g{1}<br />\g-1<br />\g{-1}<br /><br />However, the following variants refer to the subpattern code instead of the matched text:<br />\g&lt;1&gt;<br />\g'1'<br />\g&lt;-1&gt;<br />\g'-1'<br /><br />With named backreferences, we may also use the \k escape sequence as well as the (?P=...) construct. The following combinations also refer to the text matching the named capture group, as documented:<br />\g{name}<br />\k{name}<br />\k&lt;name&gt;<br />\k'name'<br />(?P=name)<br /><br />However, these refer to the subpattern code instead of the matched text:<br />g&lt;name&gt;<br />\g'name'<br /><br />In the following example, the capture group searches for a single letter 'a' or 'b', and then the backreference looks for the same letter. Thus, the patterns are expected to match 'aa' and 'bb', but not 'ab' nor 'ba'.<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">/* Matches to the following patterns are replaced by 'xx' in the subject string 'aa ab ba bb'. */<br /></span><span class="default">$patterns </span><span class="keyword">= [<br />  </span><span class="comment"># numbered backreferences (absolute)<br />  </span><span class="string">'/([ab])\1/'</span><span class="keyword">,      </span><span class="comment">// 'xx ab ba xx'<br />  </span><span class="string">'/([ab])\g1/'</span><span class="keyword">,     </span><span class="comment">// 'xx ab ba xx'<br />  </span><span class="string">'/([ab])\g{1}/'</span><span class="keyword">,   </span><span class="comment">// 'xx ab ba xx'<br />  </span><span class="string">'/([ab])\g&lt;1&gt;/'</span><span class="keyword">,   </span><span class="comment">// 'xx xx xx xx' # unexpected behavior, backreference matches both 'a' and 'b'.<br />  </span><span class="string">"/([ab])\g'1'/"</span><span class="keyword">,   </span><span class="comment">// 'xx xx xx xx' # unexpected behavior, backreference matches both 'a' and 'b'.<br />  </span><span class="string">'/([ab])\k{1}/'</span><span class="keyword">,   </span><span class="comment">// 'aa ab ba bb' # No group with name "1", backreference to unset group always fails.<br />  </span><span class="string">'/([ab])\k&lt;1&gt;/'</span><span class="keyword">,   </span><span class="comment">// 'aa ab ba bb' # No group with name "1", backreference to unset group always fails.<br />  </span><span class="string">"/([ab])\k'1'/"</span><span class="keyword">,   </span><span class="comment">// 'aa ab ba bb' # No group with name "1", backreference to unset group always fails.<br />  </span><span class="string">'/([ab])(?P=1)/'</span><span class="keyword">,  </span><span class="comment">// NULL # Regex error: "subpattern name must start with a non-digit", (?P=) expects name not number.<br />  # numbered backreferences (relative)<br />  </span><span class="string">'/([ab])\-1/'</span><span class="keyword">,     </span><span class="comment">// 'aa ab ba bb'<br />  </span><span class="string">'/([ab])\g-1/'</span><span class="keyword">,    </span><span class="comment">// 'xx ab ba xx'<br />  </span><span class="string">'/([ab])\g{-1}/'</span><span class="keyword">,  </span><span class="comment">// 'xx ab ba xx'<br />  </span><span class="string">'/([ab])\g&lt;-1&gt;/'</span><span class="keyword">,  </span><span class="comment">// 'xx xx xx xx' # unexpected behavior, backreference matches both 'a' and 'b'.<br />  </span><span class="string">"/([ab])\g'-1'/"</span><span class="keyword">,  </span><span class="comment">// 'xx xx xx xx' # unexpected behavior, backreference matches both 'a' and 'b'.<br />  </span><span class="string">'/([ab])\k{-1}/'</span><span class="keyword">,  </span><span class="comment">// 'aa ab ba bb' # No group with name "-1", backreference to unset group always fails.<br />  </span><span class="string">'/([ab])\k&lt;-1&gt;/'</span><span class="keyword">,  </span><span class="comment">// 'aa ab ba bb' # No group with name "-1", backreference to unset group always fails.<br />  </span><span class="string">"/([ab])\k'-1'/"</span><span class="keyword">,  </span><span class="comment">// 'aa ab ba bb' # No group with name "-1", backreference to unset group always fails.<br />  </span><span class="string">'/([ab])(?P=-1)/'</span><span class="keyword">, </span><span class="comment">// NULL # Regex error: "subpattern name expected", (?P=) expects name not number.<br />  # named backreferences<br />  </span><span class="string">'/(?&lt;name&gt;[ab])\g{name}/'</span><span class="keyword">,  </span><span class="comment">// 'xx ab ba xx'<br />  </span><span class="string">'/(?&lt;name&gt;[ab])\g&lt;name&gt;/'</span><span class="keyword">,  </span><span class="comment">// 'xx xx xx xx' # unexpected behavior, backreference matches both 'a' and 'b'.<br />  </span><span class="string">"/(?&lt;name&gt;[ab])\g'name'/"</span><span class="keyword">,  </span><span class="comment">// 'xx xx xx xx' # unexpected behavior, backreference matches both 'a' and 'b'.<br />  </span><span class="string">'/(?&lt;name&gt;[ab])\k{name}/'</span><span class="keyword">,  </span><span class="comment">// 'xx ab ba xx'<br />  </span><span class="string">'/(?&lt;name&gt;[ab])\k&lt;name&gt;/'</span><span class="keyword">,  </span><span class="comment">// 'xx ab ba xx'<br />  </span><span class="string">"/(?&lt;name&gt;[ab])\k'name'/"</span><span class="keyword">,  </span><span class="comment">// 'xx ab ba xx'<br />  </span><span class="string">'/(?&lt;name&gt;[ab])(?P=name)/'</span><span class="keyword">, </span><span class="comment">// 'xx ab ba xx'<br /></span><span class="keyword">];<br />    <br />foreach (</span><span class="default">$patterns </span><span class="keyword">as </span><span class="default">$pat</span><span class="keyword">)<br />    echo </span><span class="string">"  '</span><span class="default">$pat</span><span class="string">',\t// " </span><span class="keyword">. </span><span class="default">var_export</span><span class="keyword">(@</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$pat</span><span class="keyword">, </span><span class="string">'xx'</span><span class="keyword">, </span><span class="string">'aa ab ba bb'</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">) . </span><span class="default">PHP_EOL</span><span class="keyword">;<br /></span><span class="default">?&gt;</span></span></code></div>
  </div>
 </div></div>
<div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=regexp.reference.back-references&amp;redirect=https://www.php.net/manual/ru/regexp.reference.back-references.php">＋<small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="reference.pcre.pattern.syntax.php.html">Описание синтаксиса Perl-совместимых регулярных выражений</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="regexp.introduction.php.html" title="Вступление">Вступление</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.delimiters.php.html" title="Разделители">Разделители</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.meta.php.html" title="Метасимволы">Метасимволы</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.escape.php.html" title="Экранирующие последовательности">Экранирующие последовательности</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.unicode.php.html" title="Свойства Unicode-&#8203;символов">Свойства Unicode-&#8203;символов</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.anchors.php.html" title="Якоря">Якоря</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.dot.php.html" title="Метасимвол точка">Метасимвол точка</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.character-classes.php.html" title="Символьные классы">Символьные классы</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.alternation.php.html" title="Альтернативный выбор">Альтернативный выбор</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.internal-options.php.html" title="Установка внутренних опций">Установка внутренних опций</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.subpatterns.php.html" title="Подмаски">Подмаски</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.repetition.php.html" title="Повторение">Повторение</a>
                        </li>
                                                <li class="current">
                            <a href="regexp.reference.back-references.php.html" title="Обратные ссылки">Обратные ссылки</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.assertions.php.html" title="Утверждения">Утверждения</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.onlyonce.php.html" title="Однократные подмаски">Однократные подмаски</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.conditional.php.html" title="Условные подмаски">Условные подмаски</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.comments.php.html" title="Комментарии">Комментарии</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.recursive.php.html" title="Рекурсивные шаблоны">Рекурсивные шаблоны</a>
                        </li>
                                                <li class="">
                            <a href="regexp.reference.performance.php.html" title="Производительность">Производительность</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2024 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fhogan-3.0.2.min.js"></script>
<script src="../../cached.php%3Ft=1421837618&amp;f=%252Fjs%252Fext%252Ftypeahead.min.js"></script>
<script src="../../cached.php%3Ft=1657876202&amp;f=%252Fjs%252Fext%252Fmousetrap.min.js"></script>
<script src="../../cached.php%3Ft=1657730402&amp;f=%252Fjs%252Fext%252Fjquery.scrollTo.min.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fsearch.js"></script>
<script src="../../cached.php%3Ft=1701958202&amp;f=%252Fjs%252Fcommon.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top@2x.png"></a>

</body>
</html>
